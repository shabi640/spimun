const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./chair-DQVEfitO.js","./chair-CByRO7nB.css"])))=>i.map(i=>d[i]);
var FX=Object.defineProperty;var NX=(t,n,e)=>n in t?FX(t,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[n]=e;var w=(t,n,e)=>NX(t,typeof n!="symbol"?n+"":n,e);function VX(t,n){for(var e=0;e<n.length;e++){const i=n[e];if(typeof i!="string"&&!Array.isArray(i)){for(const s in i)if(s!=="default"&&!(s in t)){const r=Object.getOwnPropertyDescriptor(i,s);r&&Object.defineProperty(t,s,r.get?r:{enumerable:!0,get:()=>i[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function e(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=e(s);fetch(s.href,r)}})();/**
* @vue/shared v3.4.38
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function l4(t,n){const e=new Set(t.split(","));return i=>e.has(i)}const wi={},Bf=[],$n=()=>{},DX=()=>!1,nw=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),c4=t=>t.startsWith("onUpdate:"),Es=Object.assign,u4=(t,n)=>{const e=t.indexOf(n);e>-1&&t.splice(e,1)},$X=Object.prototype.hasOwnProperty,Mn=(t,n)=>$X.call(t,n),Bt=Array.isArray,Ff=t=>I1(t)==="[object Map]",_m=t=>I1(t)==="[object Set]",IA=t=>I1(t)==="[object Date]",Ut=t=>typeof t=="function",pn=t=>typeof t=="string",yl=t=>typeof t=="symbol",bn=t=>t!==null&&typeof t=="object",eO=t=>(bn(t)||Ut(t))&&Ut(t.then)&&Ut(t.catch),tO=Object.prototype.toString,I1=t=>tO.call(t),cb=t=>I1(t).slice(8,-1),Yb=t=>I1(t)==="[object Object]",d4=t=>pn(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,eg=l4(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),iw=t=>{const n=Object.create(null);return e=>n[e]||(n[e]=t(e))},zX=/-(\w)/g,So=iw(t=>t.replace(zX,(n,e)=>e?e.toUpperCase():"")),HX=/\B([A-Z])/g,Ac=iw(t=>t.replace(HX,"-$1").toLowerCase()),sw=iw(t=>t.charAt(0).toUpperCase()+t.slice(1)),tg=iw(t=>t?`on${sw(t)}`:""),Wr=(t,n)=>!Object.is(t,n),ub=(t,...n)=>{for(let e=0;e<t.length;e++)t[e](...n)},nO=(t,n,e,i=!1)=>{Object.defineProperty(t,n,{configurable:!0,enumerable:!1,writable:i,value:e})},Zb=t=>{const n=parseFloat(t);return isNaN(n)?t:n},UX=t=>{const n=pn(t)?Number(t):NaN;return isNaN(n)?t:n};let RA;const iO=()=>RA||(RA=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Xn(t){if(Bt(t)){const n={};for(let e=0;e<t.length;e++){const i=t[e],s=pn(i)?KX(i):Xn(i);if(s)for(const r in s)n[r]=s[r]}return n}else if(pn(t)||bn(t))return t}const WX=/;(?![^(]*\))/g,jX=/:([^]+)/,qX=/\/\*[^]*?\*\//g;function KX(t){const n={};return t.replace(qX,"").split(WX).forEach(e=>{if(e){const i=e.split(jX);i.length>1&&(n[i[0].trim()]=i[1].trim())}}),n}function De(t){let n="";if(pn(t))n=t;else if(Bt(t))for(let e=0;e<t.length;e++){const i=De(t[e]);i&&(n+=i+" ")}else if(bn(t))for(const e in t)t[e]&&(n+=e+" ");return n.trim()}const GX="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",YX=l4(GX);function sO(t){return!!t||t===""}function ZX(t,n){if(t.length!==n.length)return!1;let e=!0;for(let i=0;e&&i<t.length;i++)e=ch(t[i],n[i]);return e}function ch(t,n){if(t===n)return!0;let e=IA(t),i=IA(n);if(e||i)return e&&i?t.getTime()===n.getTime():!1;if(e=yl(t),i=yl(n),e||i)return t===n;if(e=Bt(t),i=Bt(n),e||i)return e&&i?ZX(t,n):!1;if(e=bn(t),i=bn(n),e||i){if(!e||!i)return!1;const s=Object.keys(t).length,r=Object.keys(n).length;if(s!==r)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=n.hasOwnProperty(o);if(a&&!l||!a&&l||!ch(t[o],n[o]))return!1}}return String(t)===String(n)}function h4(t,n){return t.findIndex(e=>ch(e,n))}const rO=t=>!!(t&&t.__v_isRef===!0),vn=t=>pn(t)?t:t==null?"":Bt(t)||bn(t)&&(t.toString===tO||!Ut(t.toString))?rO(t)?vn(t.value):JSON.stringify(t,oO,2):String(t),oO=(t,n)=>rO(n)?oO(t,n.value):Ff(n)?{[`Map(${n.size})`]:[...n.entries()].reduce((e,[i,s],r)=>(e[V2(i,r)+" =>"]=s,e),{})}:_m(n)?{[`Set(${n.size})`]:[...n.values()].map(e=>V2(e))}:yl(n)?V2(n):bn(n)&&!Bt(n)&&!Yb(n)?String(n):n,V2=(t,n="")=>{var e;return yl(t)?`Symbol(${(e=t.description)!=null?e:n})`:t};/**
* @vue/reactivity v3.4.38
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let uo,XX=class{constructor(n=!1){this.detached=n,this._active=!0,this.effects=[],this.cleanups=[],this.parent=uo,!n&&uo&&(this.index=(uo.scopes||(uo.scopes=[])).push(this)-1)}get active(){return this._active}run(n){if(this._active){const e=uo;try{return uo=this,n()}finally{uo=e}}}on(){uo=this}off(){uo=this.parent}stop(n){if(this._active){let e,i;for(e=0,i=this.effects.length;e<i;e++)this.effects[e].stop();for(e=0,i=this.cleanups.length;e<i;e++)this.cleanups[e]();if(this.scopes)for(e=0,i=this.scopes.length;e<i;e++)this.scopes[e].stop(!0);if(!this.detached&&this.parent&&!n){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}};function JX(t,n=uo){n&&n.active&&n.effects.push(t)}function aO(){return uo}function lO(t){uo&&uo.cleanups.push(t)}let Jd,f4=class{constructor(n,e,i,s){this.fn=n,this.trigger=e,this.scheduler=i,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,JX(this,s)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,Wu();for(let n=0;n<this._depsLength;n++){const e=this.deps[n];if(e.computed&&(QX(e.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),ju()}return this._dirtyLevel>=4}set dirty(n){this._dirtyLevel=n?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let n=Tu,e=Jd;try{return Tu=!0,Jd=this,this._runnings++,MA(this),this.fn()}finally{PA(this),this._runnings--,Jd=e,Tu=n}}stop(){this.active&&(MA(this),PA(this),this.onStop&&this.onStop(),this.active=!1)}};function QX(t){return t.value}function MA(t){t._trackId++,t._depsLength=0}function PA(t){if(t.deps.length>t._depsLength){for(let n=t._depsLength;n<t.deps.length;n++)cO(t.deps[n],t);t.deps.length=t._depsLength}}function cO(t,n){const e=t.get(n);e!==void 0&&n._trackId!==e&&(t.delete(n),t.size===0&&t.cleanup())}let Tu=!0,P3=0;const uO=[];function Wu(){uO.push(Tu),Tu=!1}function ju(){const t=uO.pop();Tu=t===void 0?!0:t}function m4(){P3++}function p4(){for(P3--;!P3&&O3.length;)O3.shift()()}function dO(t,n,e){if(n.get(t)!==t._trackId){n.set(t,t._trackId);const i=t.deps[t._depsLength];i!==n?(i&&cO(i,t),t.deps[t._depsLength++]=n):t._depsLength++}}const O3=[];function hO(t,n,e){m4();for(const i of t.keys()){let s;i._dirtyLevel<n&&(s??(s=t.get(i)===i._trackId))&&(i._shouldSchedule||(i._shouldSchedule=i._dirtyLevel===0),i._dirtyLevel=n),i._shouldSchedule&&(s??(s=t.get(i)===i._trackId))&&(i.trigger(),(!i._runnings||i.allowRecurse)&&i._dirtyLevel!==2&&(i._shouldSchedule=!1,i.scheduler&&O3.push(i.scheduler)))}p4()}const fO=(t,n)=>{const e=new Map;return e.cleanup=t,e.computed=n,e},Xb=new WeakMap,Qd=Symbol(""),L3=Symbol("");function eo(t,n,e){if(Tu&&Jd){let i=Xb.get(t);i||Xb.set(t,i=new Map);let s=i.get(e);s||i.set(e,s=fO(()=>i.delete(e))),dO(Jd,s)}}function oc(t,n,e,i,s,r){const o=Xb.get(t);if(!o)return;let a=[];if(n==="clear")a=[...o.values()];else if(e==="length"&&Bt(t)){const l=Number(i);o.forEach((c,u)=>{(u==="length"||!yl(u)&&u>=l)&&a.push(c)})}else switch(e!==void 0&&a.push(o.get(e)),n){case"add":Bt(t)?d4(e)&&a.push(o.get("length")):(a.push(o.get(Qd)),Ff(t)&&a.push(o.get(L3)));break;case"delete":Bt(t)||(a.push(o.get(Qd)),Ff(t)&&a.push(o.get(L3)));break;case"set":Ff(t)&&a.push(o.get(Qd));break}m4();for(const l of a)l&&hO(l,4);p4()}function eJ(t,n){const e=Xb.get(t);return e&&e.get(n)}const tJ=l4("__proto__,__v_isRef,__isVue"),mO=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(yl)),OA=nJ();function nJ(){const t={};return["includes","indexOf","lastIndexOf"].forEach(n=>{t[n]=function(...e){const i=Hn(this);for(let r=0,o=this.length;r<o;r++)eo(i,"get",r+"");const s=i[n](...e);return s===-1||s===!1?i[n](...e.map(Hn)):s}}),["push","pop","shift","unshift","splice"].forEach(n=>{t[n]=function(...e){Wu(),m4();const i=Hn(this)[n].apply(this,e);return p4(),ju(),i}}),t}function iJ(t){yl(t)||(t=String(t));const n=Hn(this);return eo(n,"has",t),n.hasOwnProperty(t)}class pO{constructor(n=!1,e=!1){this._isReadonly=n,this._isShallow=e}get(n,e,i){const s=this._isReadonly,r=this._isShallow;if(e==="__v_isReactive")return!s;if(e==="__v_isReadonly")return s;if(e==="__v_isShallow")return r;if(e==="__v_raw")return i===(s?r?gJ:_O:r?bO:vO).get(n)||Object.getPrototypeOf(n)===Object.getPrototypeOf(i)?n:void 0;const o=Bt(n);if(!s){if(o&&Mn(OA,e))return Reflect.get(OA,e,i);if(e==="hasOwnProperty")return iJ}const a=Reflect.get(n,e,i);return(yl(e)?mO.has(e):tJ(e))||(s||eo(n,"get",e),r)?a:is(a)?o&&d4(e)?a:a.value:bn(a)?s?ow(a):Ir(a):a}}class gO extends pO{constructor(n=!1){super(!1,n)}set(n,e,i,s){let r=n[e];if(!this._isShallow){const l=uh(r);if(!Kf(i)&&!uh(i)&&(r=Hn(r),i=Hn(i)),!Bt(n)&&is(r)&&!is(i))return l?!1:(r.value=i,!0)}const o=Bt(n)&&d4(e)?Number(e)<n.length:Mn(n,e),a=Reflect.set(n,e,i,s);return n===Hn(s)&&(o?Wr(i,r)&&oc(n,"set",e,i):oc(n,"add",e,i)),a}deleteProperty(n,e){const i=Mn(n,e);n[e];const s=Reflect.deleteProperty(n,e);return s&&i&&oc(n,"delete",e,void 0),s}has(n,e){const i=Reflect.has(n,e);return(!yl(e)||!mO.has(e))&&eo(n,"has",e),i}ownKeys(n){return eo(n,"iterate",Bt(n)?"length":Qd),Reflect.ownKeys(n)}}class sJ extends pO{constructor(n=!1){super(!0,n)}set(n,e){return!0}deleteProperty(n,e){return!0}}const rJ=new gO,oJ=new sJ,aJ=new gO(!0);const g4=t=>t,rw=t=>Reflect.getPrototypeOf(t);function Y0(t,n,e=!1,i=!1){t=t.__v_raw;const s=Hn(t),r=Hn(n);e||(Wr(n,r)&&eo(s,"get",n),eo(s,"get",r));const{has:o}=rw(s),a=i?g4:e?w4:Ng;if(o.call(s,n))return a(t.get(n));if(o.call(s,r))return a(t.get(r));t!==s&&t.get(n)}function Z0(t,n=!1){const e=this.__v_raw,i=Hn(e),s=Hn(t);return n||(Wr(t,s)&&eo(i,"has",t),eo(i,"has",s)),t===s?e.has(t):e.has(t)||e.has(s)}function X0(t,n=!1){return t=t.__v_raw,!n&&eo(Hn(t),"iterate",Qd),Reflect.get(t,"size",t)}function LA(t,n=!1){!n&&!Kf(t)&&!uh(t)&&(t=Hn(t));const e=Hn(this);return rw(e).has.call(e,t)||(e.add(t),oc(e,"add",t,t)),this}function BA(t,n,e=!1){!e&&!Kf(n)&&!uh(n)&&(n=Hn(n));const i=Hn(this),{has:s,get:r}=rw(i);let o=s.call(i,t);o||(t=Hn(t),o=s.call(i,t));const a=r.call(i,t);return i.set(t,n),o?Wr(n,a)&&oc(i,"set",t,n):oc(i,"add",t,n),this}function FA(t){const n=Hn(this),{has:e,get:i}=rw(n);let s=e.call(n,t);s||(t=Hn(t),s=e.call(n,t)),i&&i.call(n,t);const r=n.delete(t);return s&&oc(n,"delete",t,void 0),r}function NA(){const t=Hn(this),n=t.size!==0,e=t.clear();return n&&oc(t,"clear",void 0,void 0),e}function J0(t,n){return function(i,s){const r=this,o=r.__v_raw,a=Hn(o),l=n?g4:t?w4:Ng;return!t&&eo(a,"iterate",Qd),o.forEach((c,u)=>i.call(s,l(c),l(u),r))}}function Q0(t,n,e){return function(...i){const s=this.__v_raw,r=Hn(s),o=Ff(r),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,c=s[t](...i),u=e?g4:n?w4:Ng;return!n&&eo(r,"iterate",l?L3:Qd),{next(){const{value:d,done:f}=c.next();return f?{value:d,done:f}:{value:a?[u(d[0]),u(d[1])]:u(d),done:f}},[Symbol.iterator](){return this}}}}function Zc(t){return function(...n){return t==="delete"?!1:t==="clear"?void 0:this}}function lJ(){const t={get(r){return Y0(this,r)},get size(){return X0(this)},has:Z0,add:LA,set:BA,delete:FA,clear:NA,forEach:J0(!1,!1)},n={get(r){return Y0(this,r,!1,!0)},get size(){return X0(this)},has:Z0,add(r){return LA.call(this,r,!0)},set(r,o){return BA.call(this,r,o,!0)},delete:FA,clear:NA,forEach:J0(!1,!0)},e={get(r){return Y0(this,r,!0)},get size(){return X0(this,!0)},has(r){return Z0.call(this,r,!0)},add:Zc("add"),set:Zc("set"),delete:Zc("delete"),clear:Zc("clear"),forEach:J0(!0,!1)},i={get(r){return Y0(this,r,!0,!0)},get size(){return X0(this,!0)},has(r){return Z0.call(this,r,!0)},add:Zc("add"),set:Zc("set"),delete:Zc("delete"),clear:Zc("clear"),forEach:J0(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(r=>{t[r]=Q0(r,!1,!1),e[r]=Q0(r,!0,!1),n[r]=Q0(r,!1,!0),i[r]=Q0(r,!0,!0)}),[t,e,n,i]}const[cJ,uJ,dJ,hJ]=lJ();function v4(t,n){const e=n?t?hJ:dJ:t?uJ:cJ;return(i,s,r)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?i:Reflect.get(Mn(e,s)&&s in i?e:i,s,r)}const fJ={get:v4(!1,!1)},mJ={get:v4(!1,!0)},pJ={get:v4(!0,!1)};const vO=new WeakMap,bO=new WeakMap,_O=new WeakMap,gJ=new WeakMap;function vJ(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function bJ(t){return t.__v_skip||!Object.isExtensible(t)?0:vJ(cb(t))}function Ir(t){return uh(t)?t:_4(t,!1,rJ,fJ,vO)}function b4(t){return _4(t,!1,aJ,mJ,bO)}function ow(t){return _4(t,!0,oJ,pJ,_O)}function _4(t,n,e,i,s){if(!bn(t)||t.__v_raw&&!(n&&t.__v_isReactive))return t;const r=s.get(t);if(r)return r;const o=bJ(t);if(o===0)return t;const a=new Proxy(t,o===2?i:e);return s.set(t,a),a}function ng(t){return uh(t)?ng(t.__v_raw):!!(t&&t.__v_isReactive)}function uh(t){return!!(t&&t.__v_isReadonly)}function Kf(t){return!!(t&&t.__v_isShallow)}function wO(t){return t?!!t.__v_raw:!1}function Hn(t){const n=t&&t.__v_raw;return n?Hn(n):t}function yO(t){return Object.isExtensible(t)&&nO(t,"__v_skip",!0),t}const Ng=t=>bn(t)?Ir(t):t,w4=t=>bn(t)?ow(t):t;let CO=class{constructor(n,e,i,s){this.getter=n,this._setter=e,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new f4(()=>n(this._value),()=>ig(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=i}get value(){const n=Hn(this);return(!n._cacheable||n.effect.dirty)&&Wr(n._value,n._value=n.effect.run())&&ig(n,4),y4(n),n.effect._dirtyLevel>=2&&ig(n,2),n._value}set value(n){this._setter(n)}get _dirty(){return this.effect.dirty}set _dirty(n){this.effect.dirty=n}};function _J(t,n,e=!1){let i,s;const r=Ut(t);return r?(i=t,s=$n):(i=t.get,s=t.set),new CO(i,s,r||!s,e)}function y4(t){var n;Tu&&Jd&&(t=Hn(t),dO(Jd,(n=t.dep)!=null?n:t.dep=fO(()=>t.dep=void 0,t instanceof CO?t:void 0)))}function ig(t,n=4,e,i){t=Hn(t);const s=t.dep;s&&hO(s,n)}function is(t){return!!(t&&t.__v_isRef===!0)}function Se(t){return kO(t,!1)}function ac(t){return kO(t,!0)}function kO(t,n){return is(t)?t:new wJ(t,n)}class wJ{constructor(n,e){this.__v_isShallow=e,this.dep=void 0,this.__v_isRef=!0,this._rawValue=e?n:Hn(n),this._value=e?n:Ng(n)}get value(){return y4(this),this._value}set value(n){const e=this.__v_isShallow||Kf(n)||uh(n);n=e?n:Hn(n),Wr(n,this._rawValue)&&(this._rawValue,this._rawValue=n,this._value=e?n:Ng(n),ig(this,4))}}function H(t){return is(t)?t.value:t}const yJ={get:(t,n,e)=>H(Reflect.get(t,n,e)),set:(t,n,e,i)=>{const s=t[n];return is(s)&&!is(e)?(s.value=e,!0):Reflect.set(t,n,e,i)}};function EO(t){return ng(t)?t:new Proxy(t,yJ)}class CJ{constructor(n){this.dep=void 0,this.__v_isRef=!0;const{get:e,set:i}=n(()=>y4(this),()=>ig(this));this._get=e,this._set=i}get value(){return this._get()}set value(n){this._set(n)}}function kJ(t){return new CJ(t)}function wm(t){const n=Bt(t)?new Array(t.length):{};for(const e in t)n[e]=SO(t,e);return n}class EJ{constructor(n,e,i){this._object=n,this._key=e,this._defaultValue=i,this.__v_isRef=!0}get value(){const n=this._object[this._key];return n===void 0?this._defaultValue:n}set value(n){this._object[this._key]=n}get dep(){return eJ(Hn(this._object),this._key)}}class SJ{constructor(n){this._getter=n,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function bo(t,n,e){return is(t)?t:Ut(t)?new SJ(t):bn(t)&&arguments.length>1?SO(t,n,e):Se(t)}function SO(t,n,e){const i=t[n];return is(i)?i:new EJ(t,n,e)}/**
* @vue/runtime-core v3.4.38
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function xu(t,n,e,i){try{return i?t(...i):t()}catch(s){aw(s,n,e)}}function Qo(t,n,e,i){if(Ut(t)){const s=xu(t,n,e,i);return s&&eO(s)&&s.catch(r=>{aw(r,n,e)}),s}if(Bt(t)){const s=[];for(let r=0;r<t.length;r++)s.push(Qo(t[r],n,e,i));return s}}function aw(t,n,e,i=!0){const s=n?n.vnode:null;if(n){let r=n.parent;const o=n.proxy,a=`https://vuejs.org/error-reference/#runtime-${e}`;for(;r;){const c=r.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](t,o,a)===!1)return}r=r.parent}const l=n.appContext.config.errorHandler;if(l){Wu(),xu(l,null,10,[t,o,a]),ju();return}}TJ(t,e,s,i)}function TJ(t,n,e,i=!0){console.error(t)}let Vg=!1,B3=!1;const ar=[];let ml=0;const Nf=[];let gu=null,Vd=0;const TO=Promise.resolve();let C4=null;function Jn(t){const n=C4||TO;return t?n.then(this?t.bind(this):t):n}function xJ(t){let n=ml+1,e=ar.length;for(;n<e;){const i=n+e>>>1,s=ar[i],r=Dg(s);r<t||r===t&&s.pre?n=i+1:e=i}return n}function k4(t){(!ar.length||!ar.includes(t,Vg&&t.allowRecurse?ml+1:ml))&&(t.id==null?ar.push(t):ar.splice(xJ(t.id),0,t),xO())}function xO(){!Vg&&!B3&&(B3=!0,C4=TO.then(IO))}function AJ(t){const n=ar.indexOf(t);n>ml&&ar.splice(n,1)}function IJ(t){Bt(t)?Nf.push(...t):(!gu||!gu.includes(t,t.allowRecurse?Vd+1:Vd))&&Nf.push(t),xO()}function VA(t,n,e=Vg?ml+1:0){for(;e<ar.length;e++){const i=ar[e];if(i&&i.pre){if(t&&i.id!==t.uid)continue;ar.splice(e,1),e--,i()}}}function AO(t){if(Nf.length){const n=[...new Set(Nf)].sort((e,i)=>Dg(e)-Dg(i));if(Nf.length=0,gu){gu.push(...n);return}for(gu=n,Vd=0;Vd<gu.length;Vd++){const e=gu[Vd];e.active!==!1&&e()}gu=null,Vd=0}}const Dg=t=>t.id==null?1/0:t.id,RJ=(t,n)=>{const e=Dg(t)-Dg(n);if(e===0){if(t.pre&&!n.pre)return-1;if(n.pre&&!t.pre)return 1}return e};function IO(t){B3=!1,Vg=!0,ar.sort(RJ);try{for(ml=0;ml<ar.length;ml++){const n=ar[ml];n&&n.active!==!1&&xu(n,n.i,n.i?15:14)}}finally{ml=0,ar.length=0,AO(),Vg=!1,C4=null,(ar.length||Nf.length)&&IO()}}let zs=null,lw=null;function Jb(t){const n=zs;return zs=t,lw=t&&t.type.__scopeId||null,n}function MJ(t){lw=t}function PJ(){lw=null}function Je(t,n=zs,e){if(!n||t._n)return t;const i=(...s)=>{i._d&&ZA(-1);const r=Jb(n);let o;try{o=t(...s)}finally{Jb(r),i._d&&ZA(1)}return o};return i._n=!0,i._c=!0,i._d=!0,i}function Qi(t,n){if(zs===null)return t;const e=pw(zs),i=t.dirs||(t.dirs=[]);for(let s=0;s<n.length;s++){let[r,o,a,l=wi]=n[s];r&&(Ut(r)&&(r={mounted:r,updated:r}),r.deep&&yu(o),i.push({dir:r,instance:e,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function fd(t,n,e,i){const s=t.dirs,r=n&&n.dirs;for(let o=0;o<s.length;o++){const a=s[o];r&&(a.oldValue=r[o].value);let l=a.dir[i];l&&(Wu(),Qo(l,e,8,[t.el,a,t,n]),ju())}}const vu=Symbol("_leaveCb"),ev=Symbol("_enterCb");function RO(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return ri(()=>{t.isMounted=!0}),Ts(()=>{t.isUnmounting=!0}),t}const Uo=[Function,Array],MO={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Uo,onEnter:Uo,onAfterEnter:Uo,onEnterCancelled:Uo,onBeforeLeave:Uo,onLeave:Uo,onAfterLeave:Uo,onLeaveCancelled:Uo,onBeforeAppear:Uo,onAppear:Uo,onAfterAppear:Uo,onAppearCancelled:Uo},PO=t=>{const n=t.subTree;return n.component?PO(n.component):n},OJ={name:"BaseTransition",props:MO,setup(t,{slots:n}){const e=On(),i=RO();return()=>{const s=n.default&&E4(n.default(),!0);if(!s||!s.length)return;let r=s[0];if(s.length>1){for(const f of s)if(f.type!==lr){r=f;break}}const o=Hn(t),{mode:a}=o;if(i.isLeaving)return D2(r);const l=DA(r);if(!l)return D2(r);let c=$g(l,o,i,e,f=>c=f);Gf(l,c);const u=e.subTree,d=u&&DA(u);if(d&&d.type!==lr&&!Dd(l,d)&&PO(e).type!==lr){const f=$g(d,o,i,e);if(Gf(d,f),a==="out-in"&&l.type!==lr)return i.isLeaving=!0,f.afterLeave=()=>{i.isLeaving=!1,e.update.active!==!1&&(e.effect.dirty=!0,e.update())},D2(r);a==="in-out"&&l.type!==lr&&(f.delayLeave=(p,m,v)=>{const y=OO(i,d);y[String(d.key)]=d,p[vu]=()=>{m(),p[vu]=void 0,delete c.delayedLeave},c.delayedLeave=v})}return r}}},LJ=OJ;function OO(t,n){const{leavingVNodes:e}=t;let i=e.get(n.type);return i||(i=Object.create(null),e.set(n.type,i)),i}function $g(t,n,e,i,s){const{appear:r,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:u,onEnterCancelled:d,onBeforeLeave:f,onLeave:p,onAfterLeave:m,onLeaveCancelled:v,onBeforeAppear:y,onAppear:_,onAfterAppear:b,onAppearCancelled:E}=n,x=String(t.key),A=OO(e,t),I=(M,T)=>{M&&Qo(M,i,9,T)},k=(M,T)=>{const P=T[1];I(M,T),Bt(M)?M.every(R=>R.length<=1)&&P():M.length<=1&&P()},O={mode:o,persisted:a,beforeEnter(M){let T=l;if(!e.isMounted)if(r)T=y||l;else return;M[vu]&&M[vu](!0);const P=A[x];P&&Dd(t,P)&&P.el[vu]&&P.el[vu](),I(T,[M])},enter(M){let T=c,P=u,R=d;if(!e.isMounted)if(r)T=_||c,P=b||u,R=E||d;else return;let L=!1;const F=M[ev]=B=>{L||(L=!0,B?I(R,[M]):I(P,[M]),O.delayedLeave&&O.delayedLeave(),M[ev]=void 0)};T?k(T,[M,F]):F()},leave(M,T){const P=String(t.key);if(M[ev]&&M[ev](!0),e.isUnmounting)return T();I(f,[M]);let R=!1;const L=M[vu]=F=>{R||(R=!0,T(),F?I(v,[M]):I(m,[M]),M[vu]=void 0,A[P]===t&&delete A[P])};A[P]=t,p?k(p,[M,L]):L()},clone(M){const T=$g(M,n,e,i,s);return s&&s(T),T}};return O}function D2(t){if(cw(t))return t=hc(t),t.children=null,t}function DA(t){if(!cw(t))return t;const{shapeFlag:n,children:e}=t;if(e){if(n&16)return e[0];if(n&32&&Ut(e.default))return e.default()}}function Gf(t,n){t.shapeFlag&6&&t.component?Gf(t.component.subTree,n):t.shapeFlag&128?(t.ssContent.transition=n.clone(t.ssContent),t.ssFallback.transition=n.clone(t.ssFallback)):t.transition=n}function E4(t,n=!1,e){let i=[],s=0;for(let r=0;r<t.length;r++){let o=t[r];const a=e==null?o.key:String(e)+String(o.key!=null?o.key:r);o.type===Wn?(o.patchFlag&128&&s++,i=i.concat(E4(o.children,n,a))):(n||o.type!==lr)&&i.push(a!=null?hc(o,{key:a}):o)}if(s>1)for(let r=0;r<i.length;r++)i[r].patchFlag=-2;return i}/*! #__NO_SIDE_EFFECTS__ */function pt(t,n){return Ut(t)?Es({name:t.name},n,{setup:t}):t}const sg=t=>!!t.type.__asyncLoader,cw=t=>t.type.__isKeepAlive;function LO(t,n){FO(t,"a",n)}function BO(t,n){FO(t,"da",n)}function FO(t,n,e=Gs){const i=t.__wdc||(t.__wdc=()=>{let s=e;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(uw(n,i,e),e){let s=e.parent;for(;s&&s.parent;)cw(s.parent.vnode)&&BJ(i,n,e,s),s=s.parent}}function BJ(t,n,e,i){const s=uw(n,t,i,!0);ym(()=>{u4(i[n],s)},e)}function uw(t,n,e=Gs,i=!1){if(e){const s=e[t]||(e[t]=[]),r=n.__weh||(n.__weh=(...o)=>{Wu();const a=M1(e),l=Qo(n,e,t,o);return a(),ju(),l});return i?s.unshift(r):s.push(r),r}}const Ic=t=>(n,e=Gs)=>{(!mw||t==="sp")&&uw(t,(...i)=>n(...i),e)},dw=Ic("bm"),ri=Ic("m"),FJ=Ic("bu"),R1=Ic("u"),Ts=Ic("bum"),ym=Ic("um"),NJ=Ic("sp"),VJ=Ic("rtg"),DJ=Ic("rtc");function $J(t,n=Gs){uw("ec",t,n)}const S4="components",zJ="directives";function ns(t,n){return x4(S4,t,!0,n)||t}const NO=Symbol.for("v-ndc");function Cs(t){return pn(t)?x4(S4,t,!1)||t:t||NO}function T4(t){return x4(zJ,t)}function x4(t,n,e=!0,i=!1){const s=zs||Gs;if(s){const r=s.type;if(t===S4){const a=BQ(r,!1);if(a&&(a===n||a===So(n)||a===sw(So(n))))return r}const o=$A(s[t]||r[t],n)||$A(s.appContext[t],n);return!o&&i?r:o}}function $A(t,n){return t&&(t[n]||t[So(n)]||t[sw(So(n))])}function Fu(t,n,e,i){let s;const r=e;if(Bt(t)||pn(t)){s=new Array(t.length);for(let o=0,a=t.length;o<a;o++)s[o]=n(t[o],o,void 0,r)}else if(typeof t=="number"){s=new Array(t);for(let o=0;o<t;o++)s[o]=n(o+1,o,void 0,r)}else if(bn(t))if(t[Symbol.iterator])s=Array.from(t,(o,a)=>n(o,a,void 0,r));else{const o=Object.keys(t);s=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const c=o[a];s[a]=n(t[c],c,a,r)}}else s=[];return s}function F3(t,n){for(let e=0;e<n.length;e++){const i=n[e];if(Bt(i))for(let s=0;s<i.length;s++)t[i[s].name]=i[s].fn;else i&&(t[i.name]=i.key?(...s)=>{const r=i.fn(...s);return r&&(r.key=i.key),r}:i.fn)}return t}function Et(t,n,e={},i,s){if(zs.isCE||zs.parent&&sg(zs.parent)&&zs.parent.isCE)return n!=="default"&&(e.name=n),et("slot",e,i&&i());let r=t[n];r&&r._c&&(r._d=!1),ve();const o=r&&VO(r(e)),a=At(Wn,{key:(e.key||o&&o.key||`_${n}`)+(!o&&i?"_fb":"")},o||(i?i():[]),o&&t._===1?64:-2);return a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),r&&r._c&&(r._d=!0),a}function VO(t){return t.some(n=>Nu(n)?!(n.type===lr||n.type===Wn&&!VO(n.children)):!0)?t:null}function HJ(t,n){const e={};for(const i in t)e[tg(i)]=t[i];return e}const N3=t=>t?oL(t)?pw(t):N3(t.parent):null,rg=Es(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>N3(t.parent),$root:t=>N3(t.root),$emit:t=>t.emit,$options:t=>A4(t),$forceUpdate:t=>t.f||(t.f=()=>{t.effect.dirty=!0,k4(t.update)}),$nextTick:t=>t.n||(t.n=Jn.bind(t.proxy)),$watch:t=>pQ.bind(t)}),$2=(t,n)=>t!==wi&&!t.__isScriptSetup&&Mn(t,n),UJ={get({_:t},n){if(n==="__v_skip")return!0;const{ctx:e,setupState:i,data:s,props:r,accessCache:o,type:a,appContext:l}=t;let c;if(n[0]!=="$"){const p=o[n];if(p!==void 0)switch(p){case 1:return i[n];case 2:return s[n];case 4:return e[n];case 3:return r[n]}else{if($2(i,n))return o[n]=1,i[n];if(s!==wi&&Mn(s,n))return o[n]=2,s[n];if((c=t.propsOptions[0])&&Mn(c,n))return o[n]=3,r[n];if(e!==wi&&Mn(e,n))return o[n]=4,e[n];V3&&(o[n]=0)}}const u=rg[n];let d,f;if(u)return n==="$attrs"&&eo(t.attrs,"get",""),u(t);if((d=a.__cssModules)&&(d=d[n]))return d;if(e!==wi&&Mn(e,n))return o[n]=4,e[n];if(f=l.config.globalProperties,Mn(f,n))return f[n]},set({_:t},n,e){const{data:i,setupState:s,ctx:r}=t;return $2(s,n)?(s[n]=e,!0):i!==wi&&Mn(i,n)?(i[n]=e,!0):Mn(t.props,n)||n[0]==="$"&&n.slice(1)in t?!1:(r[n]=e,!0)},has({_:{data:t,setupState:n,accessCache:e,ctx:i,appContext:s,propsOptions:r}},o){let a;return!!e[o]||t!==wi&&Mn(t,o)||$2(n,o)||(a=r[0])&&Mn(a,o)||Mn(i,o)||Mn(rg,o)||Mn(s.config.globalProperties,o)},defineProperty(t,n,e){return e.get!=null?t._.accessCache[n]=0:Mn(e,"value")&&this.set(t,n,e.value,null),Reflect.defineProperty(t,n,e)}};function Ch(){return DO().slots}function WJ(){return DO().attrs}function DO(){const t=On();return t.setupContext||(t.setupContext=lL(t))}function Qb(t){return Bt(t)?t.reduce((n,e)=>(n[e]=null,n),{}):t}function zA(t,n){return!t||!n?t||n:Bt(t)&&Bt(n)?t.concat(n):Es({},Qb(t),Qb(n))}let V3=!0;function jJ(t){const n=A4(t),e=t.proxy,i=t.ctx;V3=!1,n.beforeCreate&&HA(n.beforeCreate,t,"bc");const{data:s,computed:r,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:d,mounted:f,beforeUpdate:p,updated:m,activated:v,deactivated:y,beforeDestroy:_,beforeUnmount:b,destroyed:E,unmounted:x,render:A,renderTracked:I,renderTriggered:k,errorCaptured:O,serverPrefetch:M,expose:T,inheritAttrs:P,components:R,directives:L,filters:F}=n;if(c&&qJ(c,i,null),o)for(const J in o){const q=o[J];Ut(q)&&(i[J]=q.bind(e))}if(s){const J=s.call(e,e);bn(J)&&(t.data=Ir(J))}if(V3=!0,r)for(const J in r){const q=r[J],G=Ut(q)?q.bind(e,e):Ut(q.get)?q.get.bind(e,e):$n,S=!Ut(q)&&Ut(q.set)?q.set.bind(e):$n,V=se({get:G,set:S});Object.defineProperty(i,J,{enumerable:!0,configurable:!0,get:()=>V.value,set:re=>V.value=re})}if(a)for(const J in a)$O(a[J],i,e,J);if(l){const J=Ut(l)?l.call(e):l;Reflect.ownKeys(J).forEach(q=>{es(q,J[q])})}u&&HA(u,t,"c");function z(J,q){Bt(q)?q.forEach(G=>J(G.bind(e))):q&&J(q.bind(e))}if(z(dw,d),z(ri,f),z(FJ,p),z(R1,m),z(LO,v),z(BO,y),z($J,O),z(DJ,I),z(VJ,k),z(Ts,b),z(ym,x),z(NJ,M),Bt(T))if(T.length){const J=t.exposed||(t.exposed={});T.forEach(q=>{Object.defineProperty(J,q,{get:()=>e[q],set:G=>e[q]=G})})}else t.exposed||(t.exposed={});A&&t.render===$n&&(t.render=A),P!=null&&(t.inheritAttrs=P),R&&(t.components=R),L&&(t.directives=L)}function qJ(t,n,e=$n){Bt(t)&&(t=D3(t));for(const i in t){const s=t[i];let r;bn(s)?"default"in s?r=jt(s.from||i,s.default,!0):r=jt(s.from||i):r=jt(s),is(r)?Object.defineProperty(n,i,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):n[i]=r}}function HA(t,n,e){Qo(Bt(t)?t.map(i=>i.bind(n.proxy)):t.bind(n.proxy),n,e)}function $O(t,n,e,i){const s=i.includes(".")?tL(e,i):()=>e[i];if(pn(t)){const r=n[t];Ut(r)&&Dt(s,r)}else if(Ut(t))Dt(s,t.bind(e));else if(bn(t))if(Bt(t))t.forEach(r=>$O(r,n,e,i));else{const r=Ut(t.handler)?t.handler.bind(e):n[t.handler];Ut(r)&&Dt(s,r,t)}}function A4(t){const n=t.type,{mixins:e,extends:i}=n,{mixins:s,optionsCache:r,config:{optionMergeStrategies:o}}=t.appContext,a=r.get(n);let l;return a?l=a:!s.length&&!e&&!i?l=n:(l={},s.length&&s.forEach(c=>e_(l,c,o,!0)),e_(l,n,o)),bn(n)&&r.set(n,l),l}function e_(t,n,e,i=!1){const{mixins:s,extends:r}=n;r&&e_(t,r,e,!0),s&&s.forEach(o=>e_(t,o,e,!0));for(const o in n)if(!(i&&o==="expose")){const a=KJ[o]||e&&e[o];t[o]=a?a(t[o],n[o]):n[o]}return t}const KJ={data:UA,props:WA,emits:WA,methods:$p,computed:$p,beforeCreate:yr,created:yr,beforeMount:yr,mounted:yr,beforeUpdate:yr,updated:yr,beforeDestroy:yr,beforeUnmount:yr,destroyed:yr,unmounted:yr,activated:yr,deactivated:yr,errorCaptured:yr,serverPrefetch:yr,components:$p,directives:$p,watch:YJ,provide:UA,inject:GJ};function UA(t,n){return n?t?function(){return Es(Ut(t)?t.call(this,this):t,Ut(n)?n.call(this,this):n)}:n:t}function GJ(t,n){return $p(D3(t),D3(n))}function D3(t){if(Bt(t)){const n={};for(let e=0;e<t.length;e++)n[t[e]]=t[e];return n}return t}function yr(t,n){return t?[...new Set([].concat(t,n))]:n}function $p(t,n){return t?Es(Object.create(null),t,n):n}function WA(t,n){return t?Bt(t)&&Bt(n)?[...new Set([...t,...n])]:Es(Object.create(null),Qb(t),Qb(n??{})):n}function YJ(t,n){if(!t)return n;if(!n)return t;const e=Es(Object.create(null),t);for(const i in n)e[i]=yr(t[i],n[i]);return e}function zO(){return{app:null,config:{isNativeTag:DX,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let ZJ=0;function XJ(t,n){return function(i,s=null){Ut(i)||(i=Es({},i)),s!=null&&!bn(s)&&(s=null);const r=zO(),o=new WeakSet;let a=!1;const l=r.app={_uid:ZJ++,_component:i,_props:s,_container:null,_context:r,_instance:null,version:cL,get config(){return r.config},set config(c){},use(c,...u){return o.has(c)||(c&&Ut(c.install)?(o.add(c),c.install(l,...u)):Ut(c)&&(o.add(c),c(l,...u))),l},mixin(c){return r.mixins.includes(c)||r.mixins.push(c),l},component(c,u){return u?(r.components[c]=u,l):r.components[c]},directive(c,u){return u?(r.directives[c]=u,l):r.directives[c]},mount(c,u,d){if(!a){const f=et(i,s);return f.appContext=r,d===!0?d="svg":d===!1&&(d=void 0),u&&n?n(f,c):t(f,c,d),a=!0,l._container=c,c.__vue_app__=l,pw(f.component)}},unmount(){a&&(t(null,l._container),delete l._container.__vue_app__)},provide(c,u){return r.provides[c]=u,l},runWithContext(c){const u=Vf;Vf=l;try{return c()}finally{Vf=u}}};return l}}let Vf=null;function es(t,n){if(Gs){let e=Gs.provides;const i=Gs.parent&&Gs.parent.provides;i===e&&(e=Gs.provides=Object.create(i)),e[t]=n}}function jt(t,n,e=!1){const i=Gs||zs;if(i||Vf){const s=Vf?Vf._context.provides:i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return e&&Ut(n)?n.call(i&&i.proxy):n}}const HO={},UO=()=>Object.create(HO),WO=t=>Object.getPrototypeOf(t)===HO;function JJ(t,n,e,i=!1){const s={},r=UO();t.propsDefaults=Object.create(null),jO(t,n,s,r);for(const o in t.propsOptions[0])o in s||(s[o]=void 0);e?t.props=i?s:b4(s):t.type.props?t.props=s:t.props=r,t.attrs=r}function QJ(t,n,e,i){const{props:s,attrs:r,vnode:{patchFlag:o}}=t,a=Hn(s),[l]=t.propsOptions;let c=!1;if((i||o>0)&&!(o&16)){if(o&8){const u=t.vnode.dynamicProps;for(let d=0;d<u.length;d++){let f=u[d];if(fw(t.emitsOptions,f))continue;const p=n[f];if(l)if(Mn(r,f))p!==r[f]&&(r[f]=p,c=!0);else{const m=So(f);s[m]=$3(l,a,m,p,t,!1)}else p!==r[f]&&(r[f]=p,c=!0)}}}else{jO(t,n,s,r)&&(c=!0);let u;for(const d in a)(!n||!Mn(n,d)&&((u=Ac(d))===d||!Mn(n,u)))&&(l?e&&(e[d]!==void 0||e[u]!==void 0)&&(s[d]=$3(l,a,d,void 0,t,!0)):delete s[d]);if(r!==a)for(const d in r)(!n||!Mn(n,d))&&(delete r[d],c=!0)}c&&oc(t.attrs,"set","")}function jO(t,n,e,i){const[s,r]=t.propsOptions;let o=!1,a;if(n)for(let l in n){if(eg(l))continue;const c=n[l];let u;s&&Mn(s,u=So(l))?!r||!r.includes(u)?e[u]=c:(a||(a={}))[u]=c:fw(t.emitsOptions,l)||(!(l in i)||c!==i[l])&&(i[l]=c,o=!0)}if(r){const l=Hn(e),c=a||wi;for(let u=0;u<r.length;u++){const d=r[u];e[d]=$3(s,l,d,c[d],t,!Mn(c,d))}}return o}function $3(t,n,e,i,s,r){const o=t[e];if(o!=null){const a=Mn(o,"default");if(a&&i===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&Ut(l)){const{propsDefaults:c}=s;if(e in c)i=c[e];else{const u=M1(s);i=c[e]=l.call(null,n),u()}}else i=l}o[0]&&(r&&!a?i=!1:o[1]&&(i===""||i===Ac(e))&&(i=!0))}return i}const eQ=new WeakMap;function qO(t,n,e=!1){const i=e?eQ:n.propsCache,s=i.get(t);if(s)return s;const r=t.props,o={},a=[];let l=!1;if(!Ut(t)){const u=d=>{l=!0;const[f,p]=qO(d,n,!0);Es(o,f),p&&a.push(...p)};!e&&n.mixins.length&&n.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!r&&!l)return bn(t)&&i.set(t,Bf),Bf;if(Bt(r))for(let u=0;u<r.length;u++){const d=So(r[u]);jA(d)&&(o[d]=wi)}else if(r)for(const u in r){const d=So(u);if(jA(d)){const f=r[u],p=o[d]=Bt(f)||Ut(f)?{type:f}:Es({},f),m=p.type;let v=!1,y=!0;if(Bt(m))for(let _=0;_<m.length;++_){const b=m[_],E=Ut(b)&&b.name;if(E==="Boolean"){v=!0;break}else E==="String"&&(y=!1)}else v=Ut(m)&&m.name==="Boolean";p[0]=v,p[1]=y,(v||Mn(p,"default"))&&a.push(d)}}const c=[o,a];return bn(t)&&i.set(t,c),c}function jA(t){return t[0]!=="$"&&!eg(t)}const KO=t=>t[0]==="_"||t==="$stable",I4=t=>Bt(t)?t.map(hl):[hl(t)],tQ=(t,n,e)=>{if(n._n)return n;const i=Je((...s)=>I4(n(...s)),e);return i._c=!1,i},GO=(t,n,e)=>{const i=t._ctx;for(const s in t){if(KO(s))continue;const r=t[s];if(Ut(r))n[s]=tQ(s,r,i);else if(r!=null){const o=I4(r);n[s]=()=>o}}},YO=(t,n)=>{const e=I4(n);t.slots.default=()=>e},ZO=(t,n,e)=>{for(const i in n)(e||i!=="_")&&(t[i]=n[i])},nQ=(t,n,e)=>{const i=t.slots=UO();if(t.vnode.shapeFlag&32){const s=n._;s?(ZO(i,n,e),e&&nO(i,"_",s,!0)):GO(n,i)}else n&&YO(t,n)},iQ=(t,n,e)=>{const{vnode:i,slots:s}=t;let r=!0,o=wi;if(i.shapeFlag&32){const a=n._;a?e&&a===1?r=!1:ZO(s,n,e):(r=!n.$stable,GO(n,s)),o=n}else n&&(YO(t,n),o={default:1});if(r)for(const a in s)!KO(a)&&o[a]==null&&delete s[a]};function z3(t,n,e,i,s=!1){if(Bt(t)){t.forEach((f,p)=>z3(f,n&&(Bt(n)?n[p]:n),e,i,s));return}if(sg(i)&&!s)return;const r=i.shapeFlag&4?pw(i.component):i.el,o=s?null:r,{i:a,r:l}=t,c=n&&n.r,u=a.refs===wi?a.refs={}:a.refs,d=a.setupState;if(c!=null&&c!==l&&(pn(c)?(u[c]=null,Mn(d,c)&&(d[c]=null)):is(c)&&(c.value=null)),Ut(l))xu(l,a,12,[o,u]);else{const f=pn(l),p=is(l);if(f||p){const m=()=>{if(t.f){const v=f?Mn(d,l)?d[l]:u[l]:l.value;s?Bt(v)&&u4(v,r):Bt(v)?v.includes(r)||v.push(r):f?(u[l]=[r],Mn(d,l)&&(d[l]=u[l])):(l.value=[r],t.k&&(u[t.k]=l.value))}else f?(u[l]=o,Mn(d,l)&&(d[l]=o)):p&&(l.value=o,t.k&&(u[t.k]=o))};o?(m.id=-1,Dr(m,e)):m()}}}const XO=Symbol("_vte"),sQ=t=>t.__isTeleport,og=t=>t&&(t.disabled||t.disabled===""),qA=t=>typeof SVGElement<"u"&&t instanceof SVGElement,KA=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,H3=(t,n)=>{const e=t&&t.to;return pn(e)?n?n(e):null:e},rQ={name:"Teleport",__isTeleport:!0,process(t,n,e,i,s,r,o,a,l,c){const{mc:u,pc:d,pbc:f,o:{insert:p,querySelector:m,createText:v,createComment:y}}=c,_=og(n.props);let{shapeFlag:b,children:E,dynamicChildren:x}=n;if(t==null){const A=n.el=v(""),I=n.anchor=v("");p(A,e,i),p(I,e,i);const k=n.target=H3(n.props,m),O=QO(k,n,v,p);k&&(o==="svg"||qA(k)?o="svg":(o==="mathml"||KA(k))&&(o="mathml"));const M=(T,P)=>{b&16&&u(E,T,P,s,r,o,a,l)};_?M(e,I):k&&M(k,O)}else{n.el=t.el,n.targetStart=t.targetStart;const A=n.anchor=t.anchor,I=n.target=t.target,k=n.targetAnchor=t.targetAnchor,O=og(t.props),M=O?e:I,T=O?A:k;if(o==="svg"||qA(I)?o="svg":(o==="mathml"||KA(I))&&(o="mathml"),x?(f(t.dynamicChildren,x,M,s,r,o,a),R4(t,n,!0)):l||d(t,n,M,T,s,r,o,a,!1),_)O?n.props&&t.props&&n.props.to!==t.props.to&&(n.props.to=t.props.to):tv(n,e,A,c,1);else if((n.props&&n.props.to)!==(t.props&&t.props.to)){const P=n.target=H3(n.props,m);P&&tv(n,P,null,c,0)}else O&&tv(n,I,k,c,1)}JO(n)},remove(t,n,e,{um:i,o:{remove:s}},r){const{shapeFlag:o,children:a,anchor:l,targetStart:c,targetAnchor:u,target:d,props:f}=t;if(d&&(s(c),s(u)),r&&s(l),o&16){const p=r||!og(f);for(let m=0;m<a.length;m++){const v=a[m];i(v,n,e,p,!!v.dynamicChildren)}}},move:tv,hydrate:oQ};function tv(t,n,e,{o:{insert:i},m:s},r=2){r===0&&i(t.targetAnchor,n,e);const{el:o,anchor:a,shapeFlag:l,children:c,props:u}=t,d=r===2;if(d&&i(o,n,e),(!d||og(u))&&l&16)for(let f=0;f<c.length;f++)s(c[f],n,e,2);d&&i(a,n,e)}function oQ(t,n,e,i,s,r,{o:{nextSibling:o,parentNode:a,querySelector:l,insert:c,createText:u}},d){const f=n.target=H3(n.props,l);if(f){const p=f._lpa||f.firstChild;if(n.shapeFlag&16)if(og(n.props))n.anchor=d(o(t),n,a(t),e,i,s,r),n.targetStart=p,n.targetAnchor=p&&o(p);else{n.anchor=o(t);let m=p;for(;m;){if(m&&m.nodeType===8){if(m.data==="teleport start anchor")n.targetStart=m;else if(m.data==="teleport anchor"){n.targetAnchor=m,f._lpa=n.targetAnchor&&o(n.targetAnchor);break}}m=o(m)}n.targetAnchor||QO(f,n,u,c),d(p&&o(p),n,f,e,i,s,r)}JO(n)}return n.anchor&&o(n.anchor)}const aQ=rQ;function JO(t){const n=t.ctx;if(n&&n.ut){let e=t.children[0].el;for(;e&&e!==t.targetAnchor;)e.nodeType===1&&e.setAttribute("data-v-owner",n.uid),e=e.nextSibling;n.ut()}}function QO(t,n,e,i){const s=n.targetStart=e(""),r=n.targetAnchor=e("");return s[XO]=r,t&&(i(s,t),i(r,t)),r}const Dr=kQ;function lQ(t){return cQ(t)}function cQ(t,n){const e=iO();e.__VUE__=!0;const{insert:i,remove:s,patchProp:r,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:d,nextSibling:f,setScopeId:p=$n,insertStaticContent:m}=t,v=(D,$,X,le=null,ie=null,be=null,Ae=void 0,_e=null,Ee=!!$.dynamicChildren)=>{if(D===$)return;D&&!Dd(D,$)&&(le=ne(D),re(D,ie,be,!0),D=null),$.patchFlag===-2&&(Ee=!1,$.dynamicChildren=null);const{type:he,ref:He,shapeFlag:ze}=$;switch(he){case Cm:y(D,$,X,le);break;case lr:_(D,$,X,le);break;case db:D==null&&b($,X,le,Ae);break;case Wn:R(D,$,X,le,ie,be,Ae,_e,Ee);break;default:ze&1?A(D,$,X,le,ie,be,Ae,_e,Ee):ze&6?L(D,$,X,le,ie,be,Ae,_e,Ee):(ze&64||ze&128)&&he.process(D,$,X,le,ie,be,Ae,_e,Ee,ge)}He!=null&&ie&&z3(He,D&&D.ref,be,$||D,!$)},y=(D,$,X,le)=>{if(D==null)i($.el=a($.children),X,le);else{const ie=$.el=D.el;$.children!==D.children&&c(ie,$.children)}},_=(D,$,X,le)=>{D==null?i($.el=l($.children||""),X,le):$.el=D.el},b=(D,$,X,le)=>{[D.el,D.anchor]=m(D.children,$,X,le,D.el,D.anchor)},E=({el:D,anchor:$},X,le)=>{let ie;for(;D&&D!==$;)ie=f(D),i(D,X,le),D=ie;i($,X,le)},x=({el:D,anchor:$})=>{let X;for(;D&&D!==$;)X=f(D),s(D),D=X;s($)},A=(D,$,X,le,ie,be,Ae,_e,Ee)=>{$.type==="svg"?Ae="svg":$.type==="math"&&(Ae="mathml"),D==null?I($,X,le,ie,be,Ae,_e,Ee):M(D,$,ie,be,Ae,_e,Ee)},I=(D,$,X,le,ie,be,Ae,_e)=>{let Ee,he;const{props:He,shapeFlag:ze,transition:de,dirs:We}=D;if(Ee=D.el=o(D.type,be,He&&He.is,He),ze&8?u(Ee,D.children):ze&16&&O(D.children,Ee,null,le,ie,z2(D,be),Ae,_e),We&&fd(D,null,le,"created"),k(Ee,D,D.scopeId,Ae,le),He){for(const Re in He)Re!=="value"&&!eg(Re)&&r(Ee,Re,null,He[Re],be,le);"value"in He&&r(Ee,"value",null,He.value,be),(he=He.onVnodeBeforeMount)&&tl(he,le,D)}We&&fd(D,null,le,"beforeMount");const ut=uQ(ie,de);ut&&de.beforeEnter(Ee),i(Ee,$,X),((he=He&&He.onVnodeMounted)||ut||We)&&Dr(()=>{he&&tl(he,le,D),ut&&de.enter(Ee),We&&fd(D,null,le,"mounted")},ie)},k=(D,$,X,le,ie)=>{if(X&&p(D,X),le)for(let be=0;be<le.length;be++)p(D,le[be]);if(ie){let be=ie.subTree;if($===be){const Ae=ie.vnode;k(D,Ae,Ae.scopeId,Ae.slotScopeIds,ie.parent)}}},O=(D,$,X,le,ie,be,Ae,_e,Ee=0)=>{for(let he=Ee;he<D.length;he++){const He=D[he]=_e?bu(D[he]):hl(D[he]);v(null,He,$,X,le,ie,be,Ae,_e)}},M=(D,$,X,le,ie,be,Ae)=>{const _e=$.el=D.el;let{patchFlag:Ee,dynamicChildren:he,dirs:He}=$;Ee|=D.patchFlag&16;const ze=D.props||wi,de=$.props||wi;let We;if(X&&md(X,!1),(We=de.onVnodeBeforeUpdate)&&tl(We,X,$,D),He&&fd($,D,X,"beforeUpdate"),X&&md(X,!0),(ze.innerHTML&&de.innerHTML==null||ze.textContent&&de.textContent==null)&&u(_e,""),he?T(D.dynamicChildren,he,_e,X,le,z2($,ie),be):Ae||q(D,$,_e,null,X,le,z2($,ie),be,!1),Ee>0){if(Ee&16)P(_e,ze,de,X,ie);else if(Ee&2&&ze.class!==de.class&&r(_e,"class",null,de.class,ie),Ee&4&&r(_e,"style",ze.style,de.style,ie),Ee&8){const ut=$.dynamicProps;for(let Re=0;Re<ut.length;Re++){const je=ut[Re],ae=ze[je],Ue=de[je];(Ue!==ae||je==="value")&&r(_e,je,ae,Ue,ie,X)}}Ee&1&&D.children!==$.children&&u(_e,$.children)}else!Ae&&he==null&&P(_e,ze,de,X,ie);((We=de.onVnodeUpdated)||He)&&Dr(()=>{We&&tl(We,X,$,D),He&&fd($,D,X,"updated")},le)},T=(D,$,X,le,ie,be,Ae)=>{for(let _e=0;_e<$.length;_e++){const Ee=D[_e],he=$[_e],He=Ee.el&&(Ee.type===Wn||!Dd(Ee,he)||Ee.shapeFlag&70)?d(Ee.el):X;v(Ee,he,He,null,le,ie,be,Ae,!0)}},P=(D,$,X,le,ie)=>{if($!==X){if($!==wi)for(const be in $)!eg(be)&&!(be in X)&&r(D,be,$[be],null,ie,le);for(const be in X){if(eg(be))continue;const Ae=X[be],_e=$[be];Ae!==_e&&be!=="value"&&r(D,be,_e,Ae,ie,le)}"value"in X&&r(D,"value",$.value,X.value,ie)}},R=(D,$,X,le,ie,be,Ae,_e,Ee)=>{const he=$.el=D?D.el:a(""),He=$.anchor=D?D.anchor:a("");let{patchFlag:ze,dynamicChildren:de,slotScopeIds:We}=$;We&&(_e=_e?_e.concat(We):We),D==null?(i(he,X,le),i(He,X,le),O($.children||[],X,He,ie,be,Ae,_e,Ee)):ze>0&&ze&64&&de&&D.dynamicChildren?(T(D.dynamicChildren,de,X,ie,be,Ae,_e),($.key!=null||ie&&$===ie.subTree)&&R4(D,$,!0)):q(D,$,X,He,ie,be,Ae,_e,Ee)},L=(D,$,X,le,ie,be,Ae,_e,Ee)=>{$.slotScopeIds=_e,D==null?$.shapeFlag&512?ie.ctx.activate($,X,le,Ae,Ee):F($,X,le,ie,be,Ae,Ee):B(D,$,Ee)},F=(D,$,X,le,ie,be,Ae)=>{const _e=D.component=MQ(D,le,ie);if(cw(D)&&(_e.ctx.renderer=ge),PQ(_e,!1,Ae),_e.asyncDep){if(ie&&ie.registerDep(_e,z,Ae),!D.el){const Ee=_e.subTree=et(lr);_(null,Ee,$,X)}}else z(_e,D,$,X,ie,be,Ae)},B=(D,$,X)=>{const le=$.component=D.component;if(wQ(D,$,X))if(le.asyncDep&&!le.asyncResolved){J(le,$,X);return}else le.next=$,AJ(le.update),le.effect.dirty=!0,le.update();else $.el=D.el,le.vnode=$},z=(D,$,X,le,ie,be,Ae)=>{const _e=()=>{if(D.isMounted){let{next:He,bu:ze,u:de,parent:We,vnode:ut}=D;{const W=eL(D);if(W){He&&(He.el=ut.el,J(D,He,Ae)),W.asyncDep.then(()=>{D.isUnmounted||_e()});return}}let Re=He,je;md(D,!1),He?(He.el=ut.el,J(D,He,Ae)):He=ut,ze&&ub(ze),(je=He.props&&He.props.onVnodeBeforeUpdate)&&tl(je,We,He,ut),md(D,!0);const ae=H2(D),Ue=D.subTree;D.subTree=ae,v(Ue,ae,d(Ue.el),ne(Ue),D,ie,be),He.el=ae.el,Re===null&&yQ(D,ae.el),de&&Dr(de,ie),(je=He.props&&He.props.onVnodeUpdated)&&Dr(()=>tl(je,We,He,ut),ie)}else{let He;const{el:ze,props:de}=$,{bm:We,m:ut,parent:Re}=D,je=sg($);if(md(D,!1),We&&ub(We),!je&&(He=de&&de.onVnodeBeforeMount)&&tl(He,Re,$),md(D,!0),ze&&wt){const ae=()=>{D.subTree=H2(D),wt(ze,D.subTree,D,ie,null)};je?$.type.__asyncLoader().then(()=>!D.isUnmounted&&ae()):ae()}else{const ae=D.subTree=H2(D);v(null,ae,X,le,D,ie,be),$.el=ae.el}if(ut&&Dr(ut,ie),!je&&(He=de&&de.onVnodeMounted)){const ae=$;Dr(()=>tl(He,Re,ae),ie)}($.shapeFlag&256||Re&&sg(Re.vnode)&&Re.vnode.shapeFlag&256)&&D.a&&Dr(D.a,ie),D.isMounted=!0,$=X=le=null}},Ee=D.effect=new f4(_e,$n,()=>k4(he),D.scope),he=D.update=()=>{Ee.dirty&&Ee.run()};he.i=D,he.id=D.uid,md(D,!0),he()},J=(D,$,X)=>{$.component=D;const le=D.vnode.props;D.vnode=$,D.next=null,QJ(D,$.props,le,X),iQ(D,$.children,X),Wu(),VA(D),ju()},q=(D,$,X,le,ie,be,Ae,_e,Ee=!1)=>{const he=D&&D.children,He=D?D.shapeFlag:0,ze=$.children,{patchFlag:de,shapeFlag:We}=$;if(de>0){if(de&128){S(he,ze,X,le,ie,be,Ae,_e,Ee);return}else if(de&256){G(he,ze,X,le,ie,be,Ae,_e,Ee);return}}We&8?(He&16&&Ne(he,ie,be),ze!==he&&u(X,ze)):He&16?We&16?S(he,ze,X,le,ie,be,Ae,_e,Ee):Ne(he,ie,be,!0):(He&8&&u(X,""),We&16&&O(ze,X,le,ie,be,Ae,_e,Ee))},G=(D,$,X,le,ie,be,Ae,_e,Ee)=>{D=D||Bf,$=$||Bf;const he=D.length,He=$.length,ze=Math.min(he,He);let de;for(de=0;de<ze;de++){const We=$[de]=Ee?bu($[de]):hl($[de]);v(D[de],We,X,null,ie,be,Ae,_e,Ee)}he>He?Ne(D,ie,be,!0,!1,ze):O($,X,le,ie,be,Ae,_e,Ee,ze)},S=(D,$,X,le,ie,be,Ae,_e,Ee)=>{let he=0;const He=$.length;let ze=D.length-1,de=He-1;for(;he<=ze&&he<=de;){const We=D[he],ut=$[he]=Ee?bu($[he]):hl($[he]);if(Dd(We,ut))v(We,ut,X,null,ie,be,Ae,_e,Ee);else break;he++}for(;he<=ze&&he<=de;){const We=D[ze],ut=$[de]=Ee?bu($[de]):hl($[de]);if(Dd(We,ut))v(We,ut,X,null,ie,be,Ae,_e,Ee);else break;ze--,de--}if(he>ze){if(he<=de){const We=de+1,ut=We<He?$[We].el:le;for(;he<=de;)v(null,$[he]=Ee?bu($[he]):hl($[he]),X,ut,ie,be,Ae,_e,Ee),he++}}else if(he>de)for(;he<=ze;)re(D[he],ie,be,!0),he++;else{const We=he,ut=he,Re=new Map;for(he=ut;he<=de;he++){const ue=$[he]=Ee?bu($[he]):hl($[he]);ue.key!=null&&Re.set(ue.key,he)}let je,ae=0;const Ue=de-ut+1;let W=!1,K=0;const te=new Array(Ue);for(he=0;he<Ue;he++)te[he]=0;for(he=We;he<=ze;he++){const ue=D[he];if(ae>=Ue){re(ue,ie,be,!0);continue}let ee;if(ue.key!=null)ee=Re.get(ue.key);else for(je=ut;je<=de;je++)if(te[je-ut]===0&&Dd(ue,$[je])){ee=je;break}ee===void 0?re(ue,ie,be,!0):(te[ee-ut]=he+1,ee>=K?K=ee:W=!0,v(ue,$[ee],X,null,ie,be,Ae,_e,Ee),ae++)}const oe=W?dQ(te):Bf;for(je=oe.length-1,he=Ue-1;he>=0;he--){const ue=ut+he,ee=$[ue],Ce=ue+1<He?$[ue+1].el:le;te[he]===0?v(null,ee,X,Ce,ie,be,Ae,_e,Ee):W&&(je<0||he!==oe[je]?V(ee,X,Ce,2):je--)}}},V=(D,$,X,le,ie=null)=>{const{el:be,type:Ae,transition:_e,children:Ee,shapeFlag:he}=D;if(he&6){V(D.component.subTree,$,X,le);return}if(he&128){D.suspense.move($,X,le);return}if(he&64){Ae.move(D,$,X,ge);return}if(Ae===Wn){i(be,$,X);for(let ze=0;ze<Ee.length;ze++)V(Ee[ze],$,X,le);i(D.anchor,$,X);return}if(Ae===db){E(D,$,X);return}if(le!==2&&he&1&&_e)if(le===0)_e.beforeEnter(be),i(be,$,X),Dr(()=>_e.enter(be),ie);else{const{leave:ze,delayLeave:de,afterLeave:We}=_e,ut=()=>i(be,$,X),Re=()=>{ze(be,()=>{ut(),We&&We()})};de?de(be,ut,Re):Re()}else i(be,$,X)},re=(D,$,X,le=!1,ie=!1)=>{const{type:be,props:Ae,ref:_e,children:Ee,dynamicChildren:he,shapeFlag:He,patchFlag:ze,dirs:de,cacheIndex:We}=D;if(ze===-2&&(ie=!1),_e!=null&&z3(_e,null,X,D,!0),We!=null&&($.renderCache[We]=void 0),He&256){$.ctx.deactivate(D);return}const ut=He&1&&de,Re=!sg(D);let je;if(Re&&(je=Ae&&Ae.onVnodeBeforeUnmount)&&tl(je,$,D),He&6)Fe(D.component,X,le);else{if(He&128){D.suspense.unmount(X,le);return}ut&&fd(D,null,$,"beforeUnmount"),He&64?D.type.remove(D,$,X,ge,le):he&&!he.hasOnce&&(be!==Wn||ze>0&&ze&64)?Ne(he,$,X,!1,!0):(be===Wn&&ze&384||!ie&&He&16)&&Ne(Ee,$,X),le&&U(D)}(Re&&(je=Ae&&Ae.onVnodeUnmounted)||ut)&&Dr(()=>{je&&tl(je,$,D),ut&&fd(D,null,$,"unmounted")},X)},U=D=>{const{type:$,el:X,anchor:le,transition:ie}=D;if($===Wn){Pe(X,le);return}if($===db){x(D);return}const be=()=>{s(X),ie&&!ie.persisted&&ie.afterLeave&&ie.afterLeave()};if(D.shapeFlag&1&&ie&&!ie.persisted){const{leave:Ae,delayLeave:_e}=ie,Ee=()=>Ae(X,be);_e?_e(D.el,be,Ee):Ee()}else be()},Pe=(D,$)=>{let X;for(;D!==$;)X=f(D),s(D),D=X;s($)},Fe=(D,$,X)=>{const{bum:le,scope:ie,update:be,subTree:Ae,um:_e,m:Ee,a:he}=D;GA(Ee),GA(he),le&&ub(le),ie.stop(),be&&(be.active=!1,re(Ae,D,$,X)),_e&&Dr(_e,$),Dr(()=>{D.isUnmounted=!0},$),$&&$.pendingBranch&&!$.isUnmounted&&D.asyncDep&&!D.asyncResolved&&D.suspenseId===$.pendingId&&($.deps--,$.deps===0&&$.resolve())},Ne=(D,$,X,le=!1,ie=!1,be=0)=>{for(let Ae=be;Ae<D.length;Ae++)re(D[Ae],$,X,le,ie)},ne=D=>{if(D.shapeFlag&6)return ne(D.component.subTree);if(D.shapeFlag&128)return D.suspense.next();const $=f(D.anchor||D.el),X=$&&$[XO];return X?f(X):$};let me=!1;const pe=(D,$,X)=>{D==null?$._vnode&&re($._vnode,null,null,!0):v($._vnode||null,D,$,null,null,null,X),$._vnode=D,me||(me=!0,VA(),AO(),me=!1)},ge={p:v,um:re,m:V,r:U,mt:F,mc:O,pc:q,pbc:T,n:ne,o:t};let rt,wt;return{render:pe,hydrate:rt,createApp:XJ(pe,rt)}}function z2({type:t,props:n},e){return e==="svg"&&t==="foreignObject"||e==="mathml"&&t==="annotation-xml"&&n&&n.encoding&&n.encoding.includes("html")?void 0:e}function md({effect:t,update:n},e){t.allowRecurse=n.allowRecurse=e}function uQ(t,n){return(!t||t&&!t.pendingBranch)&&n&&!n.persisted}function R4(t,n,e=!1){const i=t.children,s=n.children;if(Bt(i)&&Bt(s))for(let r=0;r<i.length;r++){const o=i[r];let a=s[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[r]=bu(s[r]),a.el=o.el),!e&&a.patchFlag!==-2&&R4(o,a)),a.type===Cm&&(a.el=o.el)}}function dQ(t){const n=t.slice(),e=[0];let i,s,r,o,a;const l=t.length;for(i=0;i<l;i++){const c=t[i];if(c!==0){if(s=e[e.length-1],t[s]<c){n[i]=s,e.push(i);continue}for(r=0,o=e.length-1;r<o;)a=r+o>>1,t[e[a]]<c?r=a+1:o=a;c<t[e[r]]&&(r>0&&(n[i]=e[r-1]),e[r]=i)}}for(r=e.length,o=e[r-1];r-- >0;)e[r]=o,o=n[o];return e}function eL(t){const n=t.subTree.component;if(n)return n.asyncDep&&!n.asyncResolved?n:eL(n)}function GA(t){if(t)for(let n=0;n<t.length;n++)t[n].active=!1}const hQ=Symbol.for("v-scx"),fQ=()=>jt(hQ);function Au(t,n){return hw(t,null,n)}function mQ(t,n){return hw(t,null,{flush:"sync"})}const nv={};function Dt(t,n,e){return hw(t,n,e)}function hw(t,n,{immediate:e,deep:i,flush:s,once:r,onTrack:o,onTrigger:a}=wi){if(n&&r){const I=n;n=(...k)=>{I(...k),A()}}const l=Gs,c=I=>i===!0?I:yu(I,i===!1?1:void 0);let u,d=!1,f=!1;if(is(t)?(u=()=>t.value,d=Kf(t)):ng(t)?(u=()=>c(t),d=!0):Bt(t)?(f=!0,d=t.some(I=>ng(I)||Kf(I)),u=()=>t.map(I=>{if(is(I))return I.value;if(ng(I))return c(I);if(Ut(I))return xu(I,l,2)})):Ut(t)?n?u=()=>xu(t,l,2):u=()=>(p&&p(),Qo(t,l,3,[m])):u=$n,n&&i){const I=u;u=()=>yu(I())}let p,m=I=>{p=E.onStop=()=>{xu(I,l,4),p=E.onStop=void 0}},v;if(mw)if(m=$n,n?e&&Qo(n,l,3,[u(),f?[]:void 0,m]):u(),s==="sync"){const I=fQ();v=I.__watcherHandles||(I.__watcherHandles=[])}else return $n;let y=f?new Array(t.length).fill(nv):nv;const _=()=>{if(!(!E.active||!E.dirty))if(n){const I=E.run();(i||d||(f?I.some((k,O)=>Wr(k,y[O])):Wr(I,y)))&&(p&&p(),Qo(n,l,3,[I,y===nv?void 0:f&&y[0]===nv?[]:y,m]),y=I)}else E.run()};_.allowRecurse=!!n;let b;s==="sync"?b=_:s==="post"?b=()=>Dr(_,l&&l.suspense):(_.pre=!0,l&&(_.id=l.uid),b=()=>k4(_));const E=new f4(u,$n,b),x=aO(),A=()=>{E.stop(),x&&u4(x.effects,E)};return n?e?_():y=E.run():s==="post"?Dr(E.run.bind(E),l&&l.suspense):E.run(),v&&v.push(A),A}function pQ(t,n,e){const i=this.proxy,s=pn(t)?t.includes(".")?tL(i,t):()=>i[t]:t.bind(i,i);let r;Ut(n)?r=n:(r=n.handler,e=n);const o=M1(this),a=hw(s,r.bind(i),e);return o(),a}function tL(t,n){const e=n.split(".");return()=>{let i=t;for(let s=0;s<e.length&&i;s++)i=i[e[s]];return i}}function yu(t,n=1/0,e){if(n<=0||!bn(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),n--,is(t))yu(t.value,n,e);else if(Bt(t))for(let i=0;i<t.length;i++)yu(t[i],n,e);else if(_m(t)||Ff(t))t.forEach(i=>{yu(i,n,e)});else if(Yb(t)){for(const i in t)yu(t[i],n,e);for(const i of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,i)&&yu(t[i],n,e)}return t}function gQ(t,n,e=wi){const i=On(),s=So(n),r=Ac(n),o=nL(t,n),a=kJ((l,c)=>{let u,d=wi,f;return mQ(()=>{const p=t[n];Wr(u,p)&&(u=p,c())}),{get(){return l(),e.get?e.get(u):u},set(p){const m=e.set?e.set(p):p;if(!Wr(m,u)&&!(d!==wi&&Wr(p,d)))return;const v=i.vnode.props;v&&(n in v||s in v||r in v)&&(`onUpdate:${n}`in v||`onUpdate:${s}`in v||`onUpdate:${r}`in v)||(u=p,c()),i.emit(`update:${n}`,m),Wr(p,m)&&Wr(p,d)&&!Wr(m,f)&&c(),d=p,f=m}}});return a[Symbol.iterator]=()=>{let l=0;return{next(){return l<2?{value:l++?o||wi:a,done:!1}:{done:!0}}}},a}const nL=(t,n)=>n==="modelValue"||n==="model-value"?t.modelModifiers:t[`${n}Modifiers`]||t[`${So(n)}Modifiers`]||t[`${Ac(n)}Modifiers`];function vQ(t,n,...e){if(t.isUnmounted)return;const i=t.vnode.props||wi;let s=e;const r=n.startsWith("update:"),o=r&&nL(i,n.slice(7));o&&(o.trim&&(s=e.map(u=>pn(u)?u.trim():u)),o.number&&(s=e.map(Zb)));let a,l=i[a=tg(n)]||i[a=tg(So(n))];!l&&r&&(l=i[a=tg(Ac(n))]),l&&Qo(l,t,6,s);const c=i[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Qo(c,t,6,s)}}function iL(t,n,e=!1){const i=n.emitsCache,s=i.get(t);if(s!==void 0)return s;const r=t.emits;let o={},a=!1;if(!Ut(t)){const l=c=>{const u=iL(c,n,!0);u&&(a=!0,Es(o,u))};!e&&n.mixins.length&&n.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!r&&!a?(bn(t)&&i.set(t,null),null):(Bt(r)?r.forEach(l=>o[l]=null):Es(o,r),bn(t)&&i.set(t,o),o)}function fw(t,n){return!t||!nw(n)?!1:(n=n.slice(2).replace(/Once$/,""),Mn(t,n[0].toLowerCase()+n.slice(1))||Mn(t,Ac(n))||Mn(t,n))}function H2(t){const{type:n,vnode:e,proxy:i,withProxy:s,propsOptions:[r],slots:o,attrs:a,emit:l,render:c,renderCache:u,props:d,data:f,setupState:p,ctx:m,inheritAttrs:v}=t,y=Jb(t);let _,b;try{if(e.shapeFlag&4){const x=s||i,A=x;_=hl(c.call(A,x,u,d,p,f,m)),b=a}else{const x=n;_=hl(x.length>1?x(d,{attrs:a,slots:o,emit:l}):x(d,null)),b=n.props?a:bQ(a)}}catch(x){ag.length=0,aw(x,t,1),_=et(lr)}let E=_;if(b&&v!==!1){const x=Object.keys(b),{shapeFlag:A}=E;x.length&&A&7&&(r&&x.some(c4)&&(b=_Q(b,r)),E=hc(E,b,!1,!0))}return e.dirs&&(E=hc(E,null,!1,!0),E.dirs=E.dirs?E.dirs.concat(e.dirs):e.dirs),e.transition&&(E.transition=e.transition),_=E,Jb(y),_}const bQ=t=>{let n;for(const e in t)(e==="class"||e==="style"||nw(e))&&((n||(n={}))[e]=t[e]);return n},_Q=(t,n)=>{const e={};for(const i in t)(!c4(i)||!(i.slice(9)in n))&&(e[i]=t[i]);return e};function wQ(t,n,e){const{props:i,children:s,component:r}=t,{props:o,children:a,patchFlag:l}=n,c=r.emitsOptions;if(n.dirs||n.transition)return!0;if(e&&l>=0){if(l&1024)return!0;if(l&16)return i?YA(i,o,c):!!o;if(l&8){const u=n.dynamicProps;for(let d=0;d<u.length;d++){const f=u[d];if(o[f]!==i[f]&&!fw(c,f))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:i===o?!1:i?o?YA(i,o,c):!0:!!o;return!1}function YA(t,n,e){const i=Object.keys(n);if(i.length!==Object.keys(t).length)return!0;for(let s=0;s<i.length;s++){const r=i[s];if(n[r]!==t[r]&&!fw(e,r))return!0}return!1}function yQ({vnode:t,parent:n},e){for(;n;){const i=n.subTree;if(i.suspense&&i.suspense.activeBranch===t&&(i.el=t.el),i===t)(t=n.vnode).el=e,n=n.parent;else break}}const CQ=t=>t.__isSuspense;function kQ(t,n){n&&n.pendingBranch?Bt(t)?n.effects.push(...t):n.effects.push(t):IJ(t)}const Wn=Symbol.for("v-fgt"),Cm=Symbol.for("v-txt"),lr=Symbol.for("v-cmt"),db=Symbol.for("v-stc"),ag=[];let _o=null;function ve(t=!1){ag.push(_o=t?null:[])}function SQ(){ag.pop(),_o=ag[ag.length-1]||null}let zg=1;function ZA(t){zg+=t,t<0&&_o&&(_o.hasOnce=!0)}function sL(t){return t.dynamicChildren=zg>0?_o||Bf:null,SQ(),zg>0&&_o&&_o.push(t),t}function it(t,n,e,i,s,r){return sL(ot(t,n,e,i,s,r,!0))}function At(t,n,e,i,s){return sL(et(t,n,e,i,s,!0))}function Nu(t){return t?t.__v_isVNode===!0:!1}function Dd(t,n){return t.type===n.type&&t.key===n.key}const rL=({key:t})=>t??null,hb=({ref:t,ref_key:n,ref_for:e})=>(typeof t=="number"&&(t=""+t),t!=null?pn(t)||is(t)||Ut(t)?{i:zs,r:t,k:n,f:!!e}:t:null);function ot(t,n=null,e=null,i=0,s=null,r=t===Wn?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:n,key:n&&rL(n),ref:n&&hb(n),scopeId:lw,slotScopeIds:null,children:e,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:i,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:zs};return a?(M4(l,e),r&128&&t.normalize(l)):e&&(l.shapeFlag|=pn(e)?8:16),zg>0&&!o&&_o&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&_o.push(l),l}const et=TQ;function TQ(t,n=null,e=null,i=0,s=null,r=!1){if((!t||t===NO)&&(t=lr),Nu(t)){const a=hc(t,n,!0);return e&&M4(a,e),zg>0&&!r&&_o&&(a.shapeFlag&6?_o[_o.indexOf(t)]=a:_o.push(a)),a.patchFlag=-2,a}if(FQ(t)&&(t=t.__vccOpts),n){n=xQ(n);let{class:a,style:l}=n;a&&!pn(a)&&(n.class=De(a)),bn(l)&&(wO(l)&&!Bt(l)&&(l=Es({},l)),n.style=Xn(l))}const o=pn(t)?1:CQ(t)?128:sQ(t)?64:bn(t)?4:Ut(t)?2:0;return ot(t,n,e,i,s,o,r,!0)}function xQ(t){return t?wO(t)||WO(t)?Es({},t):t:null}function hc(t,n,e=!1,i=!1){const{props:s,ref:r,patchFlag:o,children:a,transition:l}=t,c=n?Gr(s||{},n):s,u={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&rL(c),ref:n&&n.ref?e&&r?Bt(r)?r.concat(hb(n)):[r,hb(n)]:hb(n):r,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:n&&t.type!==Wn?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&hc(t.ssContent),ssFallback:t.ssFallback&&hc(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&i&&Gf(u,l.clone(u)),u}function Rn(t=" ",n=0){return et(Cm,null,t,n)}function AQ(t,n){const e=et(db,null,t);return e.staticCount=n,e}function _t(t="",n=!1){return n?(ve(),At(lr,null,t)):et(lr,null,t)}function hl(t){return t==null||typeof t=="boolean"?et(lr):Bt(t)?et(Wn,null,t.slice()):typeof t=="object"?bu(t):et(Cm,null,String(t))}function bu(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:hc(t)}function M4(t,n){let e=0;const{shapeFlag:i}=t;if(n==null)n=null;else if(Bt(n))e=16;else if(typeof n=="object")if(i&65){const s=n.default;s&&(s._c&&(s._d=!1),M4(t,s()),s._c&&(s._d=!0));return}else{e=32;const s=n._;!s&&!WO(n)?n._ctx=zs:s===3&&zs&&(zs.slots._===1?n._=1:(n._=2,t.patchFlag|=1024))}else Ut(n)?(n={default:n,_ctx:zs},e=32):(n=String(n),i&64?(e=16,n=[Rn(n)]):e=8);t.children=n,t.shapeFlag|=e}function Gr(...t){const n={};for(let e=0;e<t.length;e++){const i=t[e];for(const s in i)if(s==="class")n.class!==i.class&&(n.class=De([n.class,i.class]));else if(s==="style")n.style=Xn([n.style,i.style]);else if(nw(s)){const r=n[s],o=i[s];o&&r!==o&&!(Bt(r)&&r.includes(o))&&(n[s]=r?[].concat(r,o):o)}else s!==""&&(n[s]=i[s])}return n}function tl(t,n,e,i=null){Qo(t,n,7,[e,i])}const IQ=zO();let RQ=0;function MQ(t,n,e){const i=t.type,s=(n?n.appContext:t.appContext)||IQ,r={uid:RQ++,vnode:t,type:i,parent:n,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new XX(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:n?n.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:qO(i,s),emitsOptions:iL(i,s),emit:null,emitted:null,propsDefaults:wi,inheritAttrs:i.inheritAttrs,ctx:wi,data:wi,props:wi,attrs:wi,slots:wi,refs:wi,setupState:wi,setupContext:null,suspense:e,suspenseId:e?e.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=n?n.root:r,r.emit=vQ.bind(null,r),t.ce&&t.ce(r),r}let Gs=null;const On=()=>Gs||zs;let t_,U3;{const t=iO(),n=(e,i)=>{let s;return(s=t[e])||(s=t[e]=[]),s.push(i),r=>{s.length>1?s.forEach(o=>o(r)):s[0](r)}};t_=n("__VUE_INSTANCE_SETTERS__",e=>Gs=e),U3=n("__VUE_SSR_SETTERS__",e=>mw=e)}const M1=t=>{const n=Gs;return t_(t),t.scope.on(),()=>{t.scope.off(),t_(n)}},XA=()=>{Gs&&Gs.scope.off(),t_(null)};function oL(t){return t.vnode.shapeFlag&4}let mw=!1;function PQ(t,n=!1,e=!1){n&&U3(n);const{props:i,children:s}=t.vnode,r=oL(t);JJ(t,i,r,n),nQ(t,s,e);const o=r?OQ(t,n):void 0;return n&&U3(!1),o}function OQ(t,n){const e=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,UJ);const{setup:i}=e;if(i){const s=t.setupContext=i.length>1?lL(t):null,r=M1(t);Wu();const o=xu(i,t,0,[t.props,s]);if(ju(),r(),eO(o)){if(o.then(XA,XA),n)return o.then(a=>{JA(t,a,n)}).catch(a=>{aw(a,t,0)});t.asyncDep=o}else JA(t,o,n)}else aL(t,n)}function JA(t,n,e){Ut(n)?t.type.__ssrInlineRender?t.ssrRender=n:t.render=n:bn(n)&&(t.setupState=EO(n)),aL(t,e)}let QA;function aL(t,n,e){const i=t.type;if(!t.render){if(!n&&QA&&!i.render){const s=i.template||A4(t).template;if(s){const{isCustomElement:r,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:l}=i,c=Es(Es({isCustomElement:r,delimiters:a},o),l);i.render=QA(s,c)}}t.render=i.render||$n}{const s=M1(t);Wu();try{jJ(t)}finally{ju(),s()}}}const LQ={get(t,n){return eo(t,"get",""),t[n]}};function lL(t){const n=e=>{t.exposed=e||{}};return{attrs:new Proxy(t.attrs,LQ),slots:t.slots,emit:t.emit,expose:n}}function pw(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(EO(yO(t.exposed)),{get(n,e){if(e in n)return n[e];if(e in rg)return rg[e](t)},has(n,e){return e in n||e in rg}})):t.proxy}function BQ(t,n=!0){return Ut(t)?t.displayName||t.name:t.name||n&&t.__name}function FQ(t){return Ut(t)&&"__vccOpts"in t}const se=(t,n)=>_J(t,n,mw);function Xt(t,n,e){const i=arguments.length;return i===2?bn(n)&&!Bt(n)?Nu(n)?et(t,null,[n]):et(t,n):et(t,null,n):(i>3?e=Array.prototype.slice.call(arguments,2):i===3&&Nu(e)&&(e=[e]),et(t,n,e))}const cL="3.4.38",NQ=$n;/**
* @vue/runtime-dom v3.4.38
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const VQ="http://www.w3.org/2000/svg",DQ="http://www.w3.org/1998/Math/MathML",Zl=typeof document<"u"?document:null,e6=Zl&&Zl.createElement("template"),$Q={insert:(t,n,e)=>{n.insertBefore(t,e||null)},remove:t=>{const n=t.parentNode;n&&n.removeChild(t)},createElement:(t,n,e,i)=>{const s=n==="svg"?Zl.createElementNS(VQ,t):n==="mathml"?Zl.createElementNS(DQ,t):e?Zl.createElement(t,{is:e}):Zl.createElement(t);return t==="select"&&i&&i.multiple!=null&&s.setAttribute("multiple",i.multiple),s},createText:t=>Zl.createTextNode(t),createComment:t=>Zl.createComment(t),setText:(t,n)=>{t.nodeValue=n},setElementText:(t,n)=>{t.textContent=n},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Zl.querySelector(t),setScopeId(t,n){t.setAttribute(n,"")},insertStaticContent(t,n,e,i,s,r){const o=e?e.previousSibling:n.lastChild;if(s&&(s===r||s.nextSibling))for(;n.insertBefore(s.cloneNode(!0),e),!(s===r||!(s=s.nextSibling)););else{e6.innerHTML=i==="svg"?`<svg>${t}</svg>`:i==="mathml"?`<math>${t}</math>`:t;const a=e6.content;if(i==="svg"||i==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}n.insertBefore(a,e)}return[o?o.nextSibling:n.firstChild,e?e.previousSibling:n.lastChild]}},Xc="transition",ap="animation",Yf=Symbol("_vtc"),Ua=(t,{slots:n})=>Xt(LJ,dL(t),n);Ua.displayName="Transition";const uL={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},zQ=Ua.props=Es({},MO,uL),pd=(t,n=[])=>{Bt(t)?t.forEach(e=>e(...n)):t&&t(...n)},t6=t=>t?Bt(t)?t.some(n=>n.length>1):t.length>1:!1;function dL(t){const n={};for(const R in t)R in uL||(n[R]=t[R]);if(t.css===!1)return n;const{name:e="v",type:i,duration:s,enterFromClass:r=`${e}-enter-from`,enterActiveClass:o=`${e}-enter-active`,enterToClass:a=`${e}-enter-to`,appearFromClass:l=r,appearActiveClass:c=o,appearToClass:u=a,leaveFromClass:d=`${e}-leave-from`,leaveActiveClass:f=`${e}-leave-active`,leaveToClass:p=`${e}-leave-to`}=t,m=HQ(s),v=m&&m[0],y=m&&m[1],{onBeforeEnter:_,onEnter:b,onEnterCancelled:E,onLeave:x,onLeaveCancelled:A,onBeforeAppear:I=_,onAppear:k=b,onAppearCancelled:O=E}=n,M=(R,L,F)=>{cu(R,L?u:a),cu(R,L?c:o),F&&F()},T=(R,L)=>{R._isLeaving=!1,cu(R,d),cu(R,p),cu(R,f),L&&L()},P=R=>(L,F)=>{const B=R?k:b,z=()=>M(L,R,F);pd(B,[L,z]),n6(()=>{cu(L,R?l:r),ql(L,R?u:a),t6(B)||i6(L,i,v,z)})};return Es(n,{onBeforeEnter(R){pd(_,[R]),ql(R,r),ql(R,o)},onBeforeAppear(R){pd(I,[R]),ql(R,l),ql(R,c)},onEnter:P(!1),onAppear:P(!0),onLeave(R,L){R._isLeaving=!0;const F=()=>T(R,L);ql(R,d),ql(R,f),fL(),n6(()=>{R._isLeaving&&(cu(R,d),ql(R,p),t6(x)||i6(R,i,y,F))}),pd(x,[R,F])},onEnterCancelled(R){M(R,!1),pd(E,[R])},onAppearCancelled(R){M(R,!0),pd(O,[R])},onLeaveCancelled(R){T(R),pd(A,[R])}})}function HQ(t){if(t==null)return null;if(bn(t))return[U2(t.enter),U2(t.leave)];{const n=U2(t);return[n,n]}}function U2(t){return UX(t)}function ql(t,n){n.split(/\s+/).forEach(e=>e&&t.classList.add(e)),(t[Yf]||(t[Yf]=new Set)).add(n)}function cu(t,n){n.split(/\s+/).forEach(i=>i&&t.classList.remove(i));const e=t[Yf];e&&(e.delete(n),e.size||(t[Yf]=void 0))}function n6(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let UQ=0;function i6(t,n,e,i){const s=t._endId=++UQ,r=()=>{s===t._endId&&i()};if(e)return setTimeout(r,e);const{type:o,timeout:a,propCount:l}=hL(t,n);if(!o)return i();const c=o+"end";let u=0;const d=()=>{t.removeEventListener(c,f),r()},f=p=>{p.target===t&&++u>=l&&d()};setTimeout(()=>{u<l&&d()},a+1),t.addEventListener(c,f)}function hL(t,n){const e=window.getComputedStyle(t),i=m=>(e[m]||"").split(", "),s=i(`${Xc}Delay`),r=i(`${Xc}Duration`),o=s6(s,r),a=i(`${ap}Delay`),l=i(`${ap}Duration`),c=s6(a,l);let u=null,d=0,f=0;n===Xc?o>0&&(u=Xc,d=o,f=r.length):n===ap?c>0&&(u=ap,d=c,f=l.length):(d=Math.max(o,c),u=d>0?o>c?Xc:ap:null,f=u?u===Xc?r.length:l.length:0);const p=u===Xc&&/\b(transform|all)(,|$)/.test(i(`${Xc}Property`).toString());return{type:u,timeout:d,propCount:f,hasTransform:p}}function s6(t,n){for(;t.length<n.length;)t=t.concat(t);return Math.max(...n.map((e,i)=>r6(e)+r6(t[i])))}function r6(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function fL(){return document.body.offsetHeight}function WQ(t,n,e){const i=t[Yf];i&&(n=(n?[n,...i]:[...i]).join(" ")),n==null?t.removeAttribute("class"):e?t.setAttribute("class",n):t.className=n}const n_=Symbol("_vod"),mL=Symbol("_vsh"),ra={beforeMount(t,{value:n},{transition:e}){t[n_]=t.style.display==="none"?"":t.style.display,e&&n?e.beforeEnter(t):lp(t,n)},mounted(t,{value:n},{transition:e}){e&&n&&e.enter(t)},updated(t,{value:n,oldValue:e},{transition:i}){!n!=!e&&(i?n?(i.beforeEnter(t),lp(t,!0),i.enter(t)):i.leave(t,()=>{lp(t,!1)}):lp(t,n))},beforeUnmount(t,{value:n}){lp(t,n)}};function lp(t,n){t.style.display=n?t[n_]:"none",t[mL]=!n}const jQ=Symbol(""),qQ=/(^|;)\s*display\s*:/;function KQ(t,n,e){const i=t.style,s=pn(e);let r=!1;if(e&&!s){if(n)if(pn(n))for(const o of n.split(";")){const a=o.slice(0,o.indexOf(":")).trim();e[a]==null&&fb(i,a,"")}else for(const o in n)e[o]==null&&fb(i,o,"");for(const o in e)o==="display"&&(r=!0),fb(i,o,e[o])}else if(s){if(n!==e){const o=i[jQ];o&&(e+=";"+o),i.cssText=e,r=qQ.test(e)}}else n&&t.removeAttribute("style");n_ in t&&(t[n_]=r?i.display:"",t[mL]&&(i.display="none"))}const o6=/\s*!important$/;function fb(t,n,e){if(Bt(e))e.forEach(i=>fb(t,n,i));else if(e==null&&(e=""),n.startsWith("--"))t.setProperty(n,e);else{const i=GQ(t,n);o6.test(e)?t.setProperty(Ac(i),e.replace(o6,""),"important"):t[i]=e}}const a6=["Webkit","Moz","ms"],W2={};function GQ(t,n){const e=W2[n];if(e)return e;let i=So(n);if(i!=="filter"&&i in t)return W2[n]=i;i=sw(i);for(let s=0;s<a6.length;s++){const r=a6[s]+i;if(r in t)return W2[n]=r}return n}const l6="http://www.w3.org/1999/xlink";function c6(t,n,e,i,s,r=YX(n)){i&&n.startsWith("xlink:")?e==null?t.removeAttributeNS(l6,n.slice(6,n.length)):t.setAttributeNS(l6,n,e):e==null||r&&!sO(e)?t.removeAttribute(n):t.setAttribute(n,r?"":yl(e)?String(e):e)}function YQ(t,n,e,i){if(n==="innerHTML"||n==="textContent"){if(e==null)return;t[n]=e;return}const s=t.tagName;if(n==="value"&&s!=="PROGRESS"&&!s.includes("-")){const o=s==="OPTION"?t.getAttribute("value")||"":t.value,a=e==null?"":String(e);(o!==a||!("_value"in t))&&(t.value=a),e==null&&t.removeAttribute(n),t._value=e;return}let r=!1;if(e===""||e==null){const o=typeof t[n];o==="boolean"?e=sO(e):e==null&&o==="string"?(e="",r=!0):o==="number"&&(e=0,r=!0)}try{t[n]=e}catch{}r&&t.removeAttribute(n)}function ec(t,n,e,i){t.addEventListener(n,e,i)}function ZQ(t,n,e,i){t.removeEventListener(n,e,i)}const u6=Symbol("_vei");function XQ(t,n,e,i,s=null){const r=t[u6]||(t[u6]={}),o=r[n];if(i&&o)o.value=i;else{const[a,l]=JQ(n);if(i){const c=r[n]=tee(i,s);ec(t,a,c,l)}else o&&(ZQ(t,a,o,l),r[n]=void 0)}}const d6=/(?:Once|Passive|Capture)$/;function JQ(t){let n;if(d6.test(t)){n={};let i;for(;i=t.match(d6);)t=t.slice(0,t.length-i[0].length),n[i[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Ac(t.slice(2)),n]}let j2=0;const QQ=Promise.resolve(),eee=()=>j2||(QQ.then(()=>j2=0),j2=Date.now());function tee(t,n){const e=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=e.attached)return;Qo(nee(i,e.value),n,5,[i])};return e.value=t,e.attached=eee(),e}function nee(t,n){if(Bt(n)){const e=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{e.call(t),t._stopped=!0},n.map(i=>s=>!s._stopped&&i&&i(s))}else return n}const h6=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,iee=(t,n,e,i,s,r)=>{const o=s==="svg";n==="class"?WQ(t,i,o):n==="style"?KQ(t,e,i):nw(n)?c4(n)||XQ(t,n,e,i,r):(n[0]==="."?(n=n.slice(1),!0):n[0]==="^"?(n=n.slice(1),!1):see(t,n,i,o))?(YQ(t,n,i),!t.tagName.includes("-")&&(n==="value"||n==="checked"||n==="selected")&&c6(t,n,i,o,r,n!=="value")):(n==="true-value"?t._trueValue=i:n==="false-value"&&(t._falseValue=i),c6(t,n,i,o))};function see(t,n,e,i){if(i)return!!(n==="innerHTML"||n==="textContent"||n in t&&h6(n)&&Ut(e));if(n==="spellcheck"||n==="draggable"||n==="translate"||n==="form"||n==="list"&&t.tagName==="INPUT"||n==="type"&&t.tagName==="TEXTAREA")return!1;if(n==="width"||n==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return h6(n)&&pn(e)?!1:n in t}const pL=new WeakMap,gL=new WeakMap,i_=Symbol("_moveCb"),f6=Symbol("_enterCb"),vL={name:"TransitionGroup",props:Es({},zQ,{tag:String,moveClass:String}),setup(t,{slots:n}){const e=On(),i=RO();let s,r;return R1(()=>{if(!s.length)return;const o=t.moveClass||`${t.name||"v"}-move`;if(!cee(s[0].el,e.vnode.el,o))return;s.forEach(oee),s.forEach(aee);const a=s.filter(lee);fL(),a.forEach(l=>{const c=l.el,u=c.style;ql(c,o),u.transform=u.webkitTransform=u.transitionDuration="";const d=c[i_]=f=>{f&&f.target!==c||(!f||/transform$/.test(f.propertyName))&&(c.removeEventListener("transitionend",d),c[i_]=null,cu(c,o))};c.addEventListener("transitionend",d)})}),()=>{const o=Hn(t),a=dL(o);let l=o.tag||Wn;if(s=[],r)for(let c=0;c<r.length;c++){const u=r[c];u.el&&u.el instanceof Element&&(s.push(u),Gf(u,$g(u,a,i,e)),pL.set(u,u.el.getBoundingClientRect()))}r=n.default?E4(n.default()):[];for(let c=0;c<r.length;c++){const u=r[c];u.key!=null&&Gf(u,$g(u,a,i,e))}return et(l,null,r)}}},ree=t=>delete t.mode;vL.props;const bL=vL;function oee(t){const n=t.el;n[i_]&&n[i_](),n[f6]&&n[f6]()}function aee(t){gL.set(t,t.el.getBoundingClientRect())}function lee(t){const n=pL.get(t),e=gL.get(t),i=n.left-e.left,s=n.top-e.top;if(i||s){const r=t.el.style;return r.transform=r.webkitTransform=`translate(${i}px,${s}px)`,r.transitionDuration="0s",t}}function cee(t,n,e){const i=t.cloneNode(),s=t[Yf];s&&s.forEach(a=>{a.split(/\s+/).forEach(l=>l&&i.classList.remove(l))}),e.split(/\s+/).forEach(a=>a&&i.classList.add(a)),i.style.display="none";const r=n.nodeType===1?n:n.parentNode;r.appendChild(i);const{hasTransform:o}=hL(i);return r.removeChild(i),o}const Vu=t=>{const n=t.props["onUpdate:modelValue"]||!1;return Bt(n)?e=>ub(n,e):n};function uee(t){t.target.composing=!0}function m6(t){const n=t.target;n.composing&&(n.composing=!1,n.dispatchEvent(new Event("input")))}const ea=Symbol("_assign"),_L={created(t,{modifiers:{lazy:n,trim:e,number:i}},s){t[ea]=Vu(s);const r=i||s.props&&s.props.type==="number";ec(t,n?"change":"input",o=>{if(o.target.composing)return;let a=t.value;e&&(a=a.trim()),r&&(a=Zb(a)),t[ea](a)}),e&&ec(t,"change",()=>{t.value=t.value.trim()}),n||(ec(t,"compositionstart",uee),ec(t,"compositionend",m6),ec(t,"change",m6))},mounted(t,{value:n}){t.value=n??""},beforeUpdate(t,{value:n,oldValue:e,modifiers:{lazy:i,trim:s,number:r}},o){if(t[ea]=Vu(o),t.composing)return;const a=(r||t.type==="number")&&!/^0\d/.test(t.value)?Zb(t.value):t.value,l=n??"";a!==l&&(document.activeElement===t&&t.type!=="range"&&(i&&n===e||s&&t.value.trim()===l)||(t.value=l))}},s_={deep:!0,created(t,n,e){t[ea]=Vu(e),ec(t,"change",()=>{const i=t._modelValue,s=Zf(t),r=t.checked,o=t[ea];if(Bt(i)){const a=h4(i,s),l=a!==-1;if(r&&!l)o(i.concat(s));else if(!r&&l){const c=[...i];c.splice(a,1),o(c)}}else if(_m(i)){const a=new Set(i);r?a.add(s):a.delete(s),o(a)}else o(wL(t,r))})},mounted:p6,beforeUpdate(t,n,e){t[ea]=Vu(e),p6(t,n,e)}};function p6(t,{value:n,oldValue:e},i){t._modelValue=n,Bt(n)?t.checked=h4(n,i.props.value)>-1:_m(n)?t.checked=n.has(i.props.value):n!==e&&(t.checked=ch(n,wL(t,!0)))}const oUe={created(t,{value:n},e){t.checked=ch(n,e.props.value),t[ea]=Vu(e),ec(t,"change",()=>{t[ea](Zf(t))})},beforeUpdate(t,{value:n,oldValue:e},i){t[ea]=Vu(i),n!==e&&(t.checked=ch(n,i.props.value))}},dee={deep:!0,created(t,{value:n,modifiers:{number:e}},i){const s=_m(n);ec(t,"change",()=>{const r=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>e?Zb(Zf(o)):Zf(o));t[ea](t.multiple?s?new Set(r):r:r[0]),t._assigning=!0,Jn(()=>{t._assigning=!1})}),t[ea]=Vu(i)},mounted(t,{value:n,modifiers:{number:e}}){g6(t,n)},beforeUpdate(t,n,e){t[ea]=Vu(e)},updated(t,{value:n,modifiers:{number:e}}){t._assigning||g6(t,n)}};function g6(t,n,e){const i=t.multiple,s=Bt(n);if(!(i&&!s&&!_m(n))){for(let r=0,o=t.options.length;r<o;r++){const a=t.options[r],l=Zf(a);if(i)if(s){const c=typeof l;c==="string"||c==="number"?a.selected=n.some(u=>String(u)===String(l)):a.selected=h4(n,l)>-1}else a.selected=n.has(l);else if(ch(Zf(a),n)){t.selectedIndex!==r&&(t.selectedIndex=r);return}}!i&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function Zf(t){return"_value"in t?t._value:t.value}function wL(t,n){const e=n?"_trueValue":"_falseValue";return e in t?t[e]:n}const hee=["ctrl","shift","alt","meta"],fee={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,n)=>hee.some(e=>t[`${e}Key`]&&!n.includes(e))},Ui=(t,n)=>{const e=t._withMods||(t._withMods={}),i=n.join(".");return e[i]||(e[i]=(s,...r)=>{for(let o=0;o<n.length;o++){const a=fee[n[o]];if(a&&a(s,n))return}return t(s,...r)})},mee={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},$d=(t,n)=>{const e=t._withKeys||(t._withKeys={}),i=n.join(".");return e[i]||(e[i]=s=>{if(!("key"in s))return;const r=Ac(s.key);if(n.some(o=>o===r||mee[o]===r))return t(s)})},pee=Es({patchProp:iee},$Q);let v6;function yL(){return v6||(v6=lQ(pee))}const r_=(...t)=>{yL().render(...t)},gee=(...t)=>{const n=yL().createApp(...t),{mount:e}=n;return n.mount=i=>{const s=bee(i);if(!s)return;const r=n._component;!Ut(r)&&!r.render&&!r.template&&(r.template=s.innerHTML),s.innerHTML="";const o=e(s,!1,vee(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},n};function vee(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function bee(t){return pn(t)?document.querySelector(t):t}var CL=typeof global=="object"&&global&&global.Object===Object&&global,_ee=typeof self=="object"&&self&&self.Object===Object&&self,Wa=CL||_ee||Function("return this")(),oa=Wa.Symbol,kL=Object.prototype,wee=kL.hasOwnProperty,yee=kL.toString,cp=oa?oa.toStringTag:void 0;function Cee(t){var n=wee.call(t,cp),e=t[cp];try{t[cp]=void 0;var i=!0}catch{}var s=yee.call(t);return i&&(n?t[cp]=e:delete t[cp]),s}var kee=Object.prototype,Eee=kee.toString;function See(t){return Eee.call(t)}var Tee="[object Null]",xee="[object Undefined]",b6=oa?oa.toStringTag:void 0;function qu(t){return t==null?t===void 0?xee:Tee:b6&&b6 in Object(t)?Cee(t):See(t)}function aa(t){return t!=null&&typeof t=="object"}var Aee="[object Symbol]";function gw(t){return typeof t=="symbol"||aa(t)&&qu(t)==Aee}function EL(t,n){for(var e=-1,i=t==null?0:t.length,s=Array(i);++e<i;)s[e]=n(t[e],e,t);return s}var mr=Array.isArray,Iee=1/0,_6=oa?oa.prototype:void 0,w6=_6?_6.toString:void 0;function SL(t){if(typeof t=="string")return t;if(mr(t))return EL(t,SL)+"";if(gw(t))return w6?w6.call(t):"";var n=t+"";return n=="0"&&1/t==-Iee?"-0":n}var Ree=/\s/;function Mee(t){for(var n=t.length;n--&&Ree.test(t.charAt(n)););return n}var Pee=/^\s+/;function Oee(t){return t&&t.slice(0,Mee(t)+1).replace(Pee,"")}function Li(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}var y6=NaN,Lee=/^[-+]0x[0-9a-f]+$/i,Bee=/^0b[01]+$/i,Fee=/^0o[0-7]+$/i,Nee=parseInt;function C6(t){if(typeof t=="number")return t;if(gw(t))return y6;if(Li(t)){var n=typeof t.valueOf=="function"?t.valueOf():t;t=Li(n)?n+"":n}if(typeof t!="string")return t===0?t:+t;t=Oee(t);var e=Bee.test(t);return e||Fee.test(t)?Nee(t.slice(2),e?2:8):Lee.test(t)?y6:+t}function Cu(t){return t}var Vee="[object AsyncFunction]",Dee="[object Function]",$ee="[object GeneratorFunction]",zee="[object Proxy]";function Hg(t){if(!Li(t))return!1;var n=qu(t);return n==Dee||n==$ee||n==Vee||n==zee}var q2=Wa["__core-js_shared__"],k6=function(){var t=/[^.]+$/.exec(q2&&q2.keys&&q2.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function Hee(t){return!!k6&&k6 in t}var Uee=Function.prototype,Wee=Uee.toString;function kh(t){if(t!=null){try{return Wee.call(t)}catch{}try{return t+""}catch{}}return""}var jee=/[\\^$.*+?()[\]{}|]/g,qee=/^\[object .+?Constructor\]$/,Kee=Function.prototype,Gee=Object.prototype,Yee=Kee.toString,Zee=Gee.hasOwnProperty,Xee=RegExp("^"+Yee.call(Zee).replace(jee,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Jee(t){if(!Li(t)||Hee(t))return!1;var n=Hg(t)?Xee:qee;return n.test(kh(t))}function Qee(t,n){return t==null?void 0:t[n]}function Eh(t,n){var e=Qee(t,n);return Jee(e)?e:void 0}var W3=Eh(Wa,"WeakMap"),E6=Object.create,ete=function(){function t(){}return function(n){if(!Li(n))return{};if(E6)return E6(n);t.prototype=n;var e=new t;return t.prototype=void 0,e}}();function tte(t,n,e){switch(e.length){case 0:return t.call(n);case 1:return t.call(n,e[0]);case 2:return t.call(n,e[0],e[1]);case 3:return t.call(n,e[0],e[1],e[2])}return t.apply(n,e)}function TL(t,n){var e=-1,i=t.length;for(n||(n=Array(i));++e<i;)n[e]=t[e];return n}var nte=800,ite=16,ste=Date.now;function rte(t){var n=0,e=0;return function(){var i=ste(),s=ite-(i-e);if(e=i,s>0){if(++n>=nte)return arguments[0]}else n=0;return t.apply(void 0,arguments)}}function ote(t){return function(){return t}}var o_=function(){try{var t=Eh(Object,"defineProperty");return t({},"",{}),t}catch{}}(),ate=o_?function(t,n){return o_(t,"toString",{configurable:!0,enumerable:!1,value:ote(n),writable:!0})}:Cu,xL=rte(ate);function lte(t,n){for(var e=-1,i=t==null?0:t.length;++e<i&&n(t[e],e,t)!==!1;);return t}function cte(t,n,e,i){t.length;for(var s=e+1;s--;)if(n(t[s],s,t))return s;return-1}var ute=9007199254740991,dte=/^(?:0|[1-9]\d*)$/;function vw(t,n){var e=typeof t;return n=n??ute,!!n&&(e=="number"||e!="symbol"&&dte.test(t))&&t>-1&&t%1==0&&t<n}function bw(t,n,e){n=="__proto__"&&o_?o_(t,n,{configurable:!0,enumerable:!0,value:e,writable:!0}):t[n]=e}function P1(t,n){return t===n||t!==t&&n!==n}var hte=Object.prototype,fte=hte.hasOwnProperty;function P4(t,n,e){var i=t[n];(!(fte.call(t,n)&&P1(i,e))||e===void 0&&!(n in t))&&bw(t,n,e)}function km(t,n,e,i){var s=!e;e||(e={});for(var r=-1,o=n.length;++r<o;){var a=n[r],l=void 0;l===void 0&&(l=t[a]),s?bw(e,a,l):P4(e,a,l)}return e}var S6=Math.max;function AL(t,n,e){return n=S6(n===void 0?t.length-1:n,0),function(){for(var i=arguments,s=-1,r=S6(i.length-n,0),o=Array(r);++s<r;)o[s]=i[n+s];s=-1;for(var a=Array(n+1);++s<n;)a[s]=i[s];return a[n]=e(o),tte(t,this,a)}}function mte(t,n){return xL(AL(t,n,Cu),t+"")}var pte=9007199254740991;function O4(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=pte}function Em(t){return t!=null&&O4(t.length)&&!Hg(t)}function gte(t,n,e){if(!Li(e))return!1;var i=typeof n;return(i=="number"?Em(e)&&vw(n,e.length):i=="string"&&n in e)?P1(e[n],t):!1}function IL(t){return mte(function(n,e){var i=-1,s=e.length,r=s>1?e[s-1]:void 0,o=s>2?e[2]:void 0;for(r=t.length>3&&typeof r=="function"?(s--,r):void 0,o&&gte(e[0],e[1],o)&&(r=s<3?void 0:r,s=1),n=Object(n);++i<s;){var a=e[i];a&&t(n,a,i,r)}return n})}var vte=Object.prototype;function L4(t){var n=t&&t.constructor,e=typeof n=="function"&&n.prototype||vte;return t===e}function bte(t,n){for(var e=-1,i=Array(t);++e<t;)i[e]=n(e);return i}var _te="[object Arguments]";function T6(t){return aa(t)&&qu(t)==_te}var RL=Object.prototype,wte=RL.hasOwnProperty,yte=RL.propertyIsEnumerable,Ug=T6(function(){return arguments}())?T6:function(t){return aa(t)&&wte.call(t,"callee")&&!yte.call(t,"callee")};function Cte(){return!1}var ML=typeof exports=="object"&&exports&&!exports.nodeType&&exports,x6=ML&&typeof module=="object"&&module&&!module.nodeType&&module,kte=x6&&x6.exports===ML,A6=kte?Wa.Buffer:void 0,Ete=A6?A6.isBuffer:void 0,Wg=Ete||Cte,Ste="[object Arguments]",Tte="[object Array]",xte="[object Boolean]",Ate="[object Date]",Ite="[object Error]",Rte="[object Function]",Mte="[object Map]",Pte="[object Number]",Ote="[object Object]",Lte="[object RegExp]",Bte="[object Set]",Fte="[object String]",Nte="[object WeakMap]",Vte="[object ArrayBuffer]",Dte="[object DataView]",$te="[object Float32Array]",zte="[object Float64Array]",Hte="[object Int8Array]",Ute="[object Int16Array]",Wte="[object Int32Array]",jte="[object Uint8Array]",qte="[object Uint8ClampedArray]",Kte="[object Uint16Array]",Gte="[object Uint32Array]",Ki={};Ki[$te]=Ki[zte]=Ki[Hte]=Ki[Ute]=Ki[Wte]=Ki[jte]=Ki[qte]=Ki[Kte]=Ki[Gte]=!0;Ki[Ste]=Ki[Tte]=Ki[Vte]=Ki[xte]=Ki[Dte]=Ki[Ate]=Ki[Ite]=Ki[Rte]=Ki[Mte]=Ki[Pte]=Ki[Ote]=Ki[Lte]=Ki[Bte]=Ki[Fte]=Ki[Nte]=!1;function Yte(t){return aa(t)&&O4(t.length)&&!!Ki[qu(t)]}function B4(t){return function(n){return t(n)}}var PL=typeof exports=="object"&&exports&&!exports.nodeType&&exports,lg=PL&&typeof module=="object"&&module&&!module.nodeType&&module,Zte=lg&&lg.exports===PL,K2=Zte&&CL.process,Xf=function(){try{var t=lg&&lg.require&&lg.require("util").types;return t||K2&&K2.binding&&K2.binding("util")}catch{}}(),I6=Xf&&Xf.isTypedArray,F4=I6?B4(I6):Yte,Xte=Object.prototype,Jte=Xte.hasOwnProperty;function OL(t,n){var e=mr(t),i=!e&&Ug(t),s=!e&&!i&&Wg(t),r=!e&&!i&&!s&&F4(t),o=e||i||s||r,a=o?bte(t.length,String):[],l=a.length;for(var c in t)(n||Jte.call(t,c))&&!(o&&(c=="length"||s&&(c=="offset"||c=="parent")||r&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||vw(c,l)))&&a.push(c);return a}function LL(t,n){return function(e){return t(n(e))}}var Qte=LL(Object.keys,Object),ene=Object.prototype,tne=ene.hasOwnProperty;function nne(t){if(!L4(t))return Qte(t);var n=[];for(var e in Object(t))tne.call(t,e)&&e!="constructor"&&n.push(e);return n}function O1(t){return Em(t)?OL(t):nne(t)}function ine(t){var n=[];if(t!=null)for(var e in Object(t))n.push(e);return n}var sne=Object.prototype,rne=sne.hasOwnProperty;function one(t){if(!Li(t))return ine(t);var n=L4(t),e=[];for(var i in t)i=="constructor"&&(n||!rne.call(t,i))||e.push(i);return e}function Sm(t){return Em(t)?OL(t,!0):one(t)}var BL=IL(function(t,n){km(n,Sm(n),t)}),ane=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,lne=/^\w*$/;function N4(t,n){if(mr(t))return!1;var e=typeof t;return e=="number"||e=="symbol"||e=="boolean"||t==null||gw(t)?!0:lne.test(t)||!ane.test(t)||n!=null&&t in Object(n)}var jg=Eh(Object,"create");function cne(){this.__data__=jg?jg(null):{},this.size=0}function une(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}var dne="__lodash_hash_undefined__",hne=Object.prototype,fne=hne.hasOwnProperty;function mne(t){var n=this.__data__;if(jg){var e=n[t];return e===dne?void 0:e}return fne.call(n,t)?n[t]:void 0}var pne=Object.prototype,gne=pne.hasOwnProperty;function vne(t){var n=this.__data__;return jg?n[t]!==void 0:gne.call(n,t)}var bne="__lodash_hash_undefined__";function _ne(t,n){var e=this.__data__;return this.size+=this.has(t)?0:1,e[t]=jg&&n===void 0?bne:n,this}function dh(t){var n=-1,e=t==null?0:t.length;for(this.clear();++n<e;){var i=t[n];this.set(i[0],i[1])}}dh.prototype.clear=cne;dh.prototype.delete=une;dh.prototype.get=mne;dh.prototype.has=vne;dh.prototype.set=_ne;function wne(){this.__data__=[],this.size=0}function _w(t,n){for(var e=t.length;e--;)if(P1(t[e][0],n))return e;return-1}var yne=Array.prototype,Cne=yne.splice;function kne(t){var n=this.__data__,e=_w(n,t);if(e<0)return!1;var i=n.length-1;return e==i?n.pop():Cne.call(n,e,1),--this.size,!0}function Ene(t){var n=this.__data__,e=_w(n,t);return e<0?void 0:n[e][1]}function Sne(t){return _w(this.__data__,t)>-1}function Tne(t,n){var e=this.__data__,i=_w(e,t);return i<0?(++this.size,e.push([t,n])):e[i][1]=n,this}function Rc(t){var n=-1,e=t==null?0:t.length;for(this.clear();++n<e;){var i=t[n];this.set(i[0],i[1])}}Rc.prototype.clear=wne;Rc.prototype.delete=kne;Rc.prototype.get=Ene;Rc.prototype.has=Sne;Rc.prototype.set=Tne;var qg=Eh(Wa,"Map");function xne(){this.size=0,this.__data__={hash:new dh,map:new(qg||Rc),string:new dh}}function Ane(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}function ww(t,n){var e=t.__data__;return Ane(n)?e[typeof n=="string"?"string":"hash"]:e.map}function Ine(t){var n=ww(this,t).delete(t);return this.size-=n?1:0,n}function Rne(t){return ww(this,t).get(t)}function Mne(t){return ww(this,t).has(t)}function Pne(t,n){var e=ww(this,t),i=e.size;return e.set(t,n),this.size+=e.size==i?0:1,this}function Mc(t){var n=-1,e=t==null?0:t.length;for(this.clear();++n<e;){var i=t[n];this.set(i[0],i[1])}}Mc.prototype.clear=xne;Mc.prototype.delete=Ine;Mc.prototype.get=Rne;Mc.prototype.has=Mne;Mc.prototype.set=Pne;var One="Expected a function";function V4(t,n){if(typeof t!="function"||n!=null&&typeof n!="function")throw new TypeError(One);var e=function(){var i=arguments,s=n?n.apply(this,i):i[0],r=e.cache;if(r.has(s))return r.get(s);var o=t.apply(this,i);return e.cache=r.set(s,o)||r,o};return e.cache=new(V4.Cache||Mc),e}V4.Cache=Mc;var Lne=500;function Bne(t){var n=V4(t,function(i){return e.size===Lne&&e.clear(),i}),e=n.cache;return n}var Fne=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Nne=/\\(\\)?/g,Vne=Bne(function(t){var n=[];return t.charCodeAt(0)===46&&n.push(""),t.replace(Fne,function(e,i,s,r){n.push(s?r.replace(Nne,"$1"):i||e)}),n});function D4(t){return t==null?"":SL(t)}function L1(t,n){return mr(t)?t:N4(t,n)?[t]:Vne(D4(t))}var Dne=1/0;function Tm(t){if(typeof t=="string"||gw(t))return t;var n=t+"";return n=="0"&&1/t==-Dne?"-0":n}function yw(t,n){n=L1(n,t);for(var e=0,i=n.length;t!=null&&e<i;)t=t[Tm(n[e++])];return e&&e==i?t:void 0}function cr(t,n,e){var i=t==null?void 0:yw(t,n);return i===void 0?e:i}function $4(t,n){for(var e=-1,i=n.length,s=t.length;++e<i;)t[s+e]=n[e];return t}var R6=oa?oa.isConcatSpreadable:void 0;function $ne(t){return mr(t)||Ug(t)||!!(R6&&t&&t[R6])}function FL(t,n,e,i,s){var r=-1,o=t.length;for(e||(e=$ne),s||(s=[]);++r<o;){var a=t[r];e(a)?$4(s,a):s[s.length]=a}return s}function zne(t){var n=t==null?0:t.length;return n?FL(t):[]}function Hne(t){return xL(AL(t,void 0,zne),t+"")}var z4=LL(Object.getPrototypeOf,Object),Une="[object Object]",Wne=Function.prototype,jne=Object.prototype,NL=Wne.toString,qne=jne.hasOwnProperty,Kne=NL.call(Object);function po(t){if(!aa(t)||qu(t)!=Une)return!1;var n=z4(t);if(n===null)return!0;var e=qne.call(n,"constructor")&&n.constructor;return typeof e=="function"&&e instanceof e&&NL.call(e)==Kne}function VL(t,n,e){var i=-1,s=t.length;n<0&&(n=-n>s?0:s+n),e=e>s?s:e,e<0&&(e+=s),s=n>e?0:e-n>>>0,n>>>=0;for(var r=Array(s);++i<s;)r[i]=t[i+n];return r}function Gne(t,n,e){var i=t.length;return e=e===void 0?i:e,!n&&e>=i?t:VL(t,n,e)}var Yne="\\ud800-\\udfff",Zne="\\u0300-\\u036f",Xne="\\ufe20-\\ufe2f",Jne="\\u20d0-\\u20ff",Qne=Zne+Xne+Jne,eie="\\ufe0e\\ufe0f",tie="\\u200d",nie=RegExp("["+tie+Yne+Qne+eie+"]");function DL(t){return nie.test(t)}function iie(t){return t.split("")}var $L="\\ud800-\\udfff",sie="\\u0300-\\u036f",rie="\\ufe20-\\ufe2f",oie="\\u20d0-\\u20ff",aie=sie+rie+oie,lie="\\ufe0e\\ufe0f",cie="["+$L+"]",j3="["+aie+"]",q3="\\ud83c[\\udffb-\\udfff]",uie="(?:"+j3+"|"+q3+")",zL="[^"+$L+"]",HL="(?:\\ud83c[\\udde6-\\uddff]){2}",UL="[\\ud800-\\udbff][\\udc00-\\udfff]",die="\\u200d",WL=uie+"?",jL="["+lie+"]?",hie="(?:"+die+"(?:"+[zL,HL,UL].join("|")+")"+jL+WL+")*",fie=jL+WL+hie,mie="(?:"+[zL+j3+"?",j3,HL,UL,cie].join("|")+")",pie=RegExp(q3+"(?="+q3+")|"+mie+fie,"g");function gie(t){return t.match(pie)||[]}function vie(t){return DL(t)?gie(t):iie(t)}function bie(t){return function(n){n=D4(n);var e=DL(n)?vie(n):void 0,i=e?e[0]:n.charAt(0),s=e?Gne(e,1).join(""):n.slice(1);return i[t]()+s}}var _ie=bie("toUpperCase");function xa(){if(!arguments.length)return[];var t=arguments[0];return mr(t)?t:[t]}function wie(){this.__data__=new Rc,this.size=0}function yie(t){var n=this.__data__,e=n.delete(t);return this.size=n.size,e}function Cie(t){return this.__data__.get(t)}function kie(t){return this.__data__.has(t)}var Eie=200;function Sie(t,n){var e=this.__data__;if(e instanceof Rc){var i=e.__data__;if(!qg||i.length<Eie-1)return i.push([t,n]),this.size=++e.size,this;e=this.__data__=new Mc(i)}return e.set(t,n),this.size=e.size,this}function La(t){var n=this.__data__=new Rc(t);this.size=n.size}La.prototype.clear=wie;La.prototype.delete=yie;La.prototype.get=Cie;La.prototype.has=kie;La.prototype.set=Sie;function Tie(t,n){return t&&km(n,O1(n),t)}function xie(t,n){return t&&km(n,Sm(n),t)}var qL=typeof exports=="object"&&exports&&!exports.nodeType&&exports,M6=qL&&typeof module=="object"&&module&&!module.nodeType&&module,Aie=M6&&M6.exports===qL,P6=Aie?Wa.Buffer:void 0,O6=P6?P6.allocUnsafe:void 0;function KL(t,n){if(n)return t.slice();var e=t.length,i=O6?O6(e):new t.constructor(e);return t.copy(i),i}function Iie(t,n){for(var e=-1,i=t==null?0:t.length,s=0,r=[];++e<i;){var o=t[e];n(o,e,t)&&(r[s++]=o)}return r}function GL(){return[]}var Rie=Object.prototype,Mie=Rie.propertyIsEnumerable,L6=Object.getOwnPropertySymbols,H4=L6?function(t){return t==null?[]:(t=Object(t),Iie(L6(t),function(n){return Mie.call(t,n)}))}:GL;function Pie(t,n){return km(t,H4(t),n)}var Oie=Object.getOwnPropertySymbols,YL=Oie?function(t){for(var n=[];t;)$4(n,H4(t)),t=z4(t);return n}:GL;function Lie(t,n){return km(t,YL(t),n)}function ZL(t,n,e){var i=n(t);return mr(t)?i:$4(i,e(t))}function K3(t){return ZL(t,O1,H4)}function Bie(t){return ZL(t,Sm,YL)}var G3=Eh(Wa,"DataView"),Y3=Eh(Wa,"Promise"),Z3=Eh(Wa,"Set"),B6="[object Map]",Fie="[object Object]",F6="[object Promise]",N6="[object Set]",V6="[object WeakMap]",D6="[object DataView]",Nie=kh(G3),Vie=kh(qg),Die=kh(Y3),$ie=kh(Z3),zie=kh(W3),Sa=qu;(G3&&Sa(new G3(new ArrayBuffer(1)))!=D6||qg&&Sa(new qg)!=B6||Y3&&Sa(Y3.resolve())!=F6||Z3&&Sa(new Z3)!=N6||W3&&Sa(new W3)!=V6)&&(Sa=function(t){var n=qu(t),e=n==Fie?t.constructor:void 0,i=e?kh(e):"";if(i)switch(i){case Nie:return D6;case Vie:return B6;case Die:return F6;case $ie:return N6;case zie:return V6}return n});var Hie=Object.prototype,Uie=Hie.hasOwnProperty;function Wie(t){var n=t.length,e=new t.constructor(n);return n&&typeof t[0]=="string"&&Uie.call(t,"index")&&(e.index=t.index,e.input=t.input),e}var a_=Wa.Uint8Array;function U4(t){var n=new t.constructor(t.byteLength);return new a_(n).set(new a_(t)),n}function jie(t,n){var e=n?U4(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.byteLength)}var qie=/\w*$/;function Kie(t){var n=new t.constructor(t.source,qie.exec(t));return n.lastIndex=t.lastIndex,n}var $6=oa?oa.prototype:void 0,z6=$6?$6.valueOf:void 0;function Gie(t){return z6?Object(z6.call(t)):{}}function XL(t,n){var e=n?U4(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.length)}var Yie="[object Boolean]",Zie="[object Date]",Xie="[object Map]",Jie="[object Number]",Qie="[object RegExp]",ese="[object Set]",tse="[object String]",nse="[object Symbol]",ise="[object ArrayBuffer]",sse="[object DataView]",rse="[object Float32Array]",ose="[object Float64Array]",ase="[object Int8Array]",lse="[object Int16Array]",cse="[object Int32Array]",use="[object Uint8Array]",dse="[object Uint8ClampedArray]",hse="[object Uint16Array]",fse="[object Uint32Array]";function mse(t,n,e){var i=t.constructor;switch(n){case ise:return U4(t);case Yie:case Zie:return new i(+t);case sse:return jie(t,e);case rse:case ose:case ase:case lse:case cse:case use:case dse:case hse:case fse:return XL(t,e);case Xie:return new i;case Jie:case tse:return new i(t);case Qie:return Kie(t);case ese:return new i;case nse:return Gie(t)}}function JL(t){return typeof t.constructor=="function"&&!L4(t)?ete(z4(t)):{}}var pse="[object Map]";function gse(t){return aa(t)&&Sa(t)==pse}var H6=Xf&&Xf.isMap,vse=H6?B4(H6):gse,bse="[object Set]";function _se(t){return aa(t)&&Sa(t)==bse}var U6=Xf&&Xf.isSet,wse=U6?B4(U6):_se,yse=1,Cse=2,kse=4,QL="[object Arguments]",Ese="[object Array]",Sse="[object Boolean]",Tse="[object Date]",xse="[object Error]",eB="[object Function]",Ase="[object GeneratorFunction]",Ise="[object Map]",Rse="[object Number]",tB="[object Object]",Mse="[object RegExp]",Pse="[object Set]",Ose="[object String]",Lse="[object Symbol]",Bse="[object WeakMap]",Fse="[object ArrayBuffer]",Nse="[object DataView]",Vse="[object Float32Array]",Dse="[object Float64Array]",$se="[object Int8Array]",zse="[object Int16Array]",Hse="[object Int32Array]",Use="[object Uint8Array]",Wse="[object Uint8ClampedArray]",jse="[object Uint16Array]",qse="[object Uint32Array]",zi={};zi[QL]=zi[Ese]=zi[Fse]=zi[Nse]=zi[Sse]=zi[Tse]=zi[Vse]=zi[Dse]=zi[$se]=zi[zse]=zi[Hse]=zi[Ise]=zi[Rse]=zi[tB]=zi[Mse]=zi[Pse]=zi[Ose]=zi[Lse]=zi[Use]=zi[Wse]=zi[jse]=zi[qse]=!0;zi[xse]=zi[eB]=zi[Bse]=!1;function Df(t,n,e,i,s,r){var o,a=n&yse,l=n&Cse,c=n&kse;if(e&&(o=s?e(t,i,s,r):e(t)),o!==void 0)return o;if(!Li(t))return t;var u=mr(t);if(u){if(o=Wie(t),!a)return TL(t,o)}else{var d=Sa(t),f=d==eB||d==Ase;if(Wg(t))return KL(t,a);if(d==tB||d==QL||f&&!s){if(o=l||f?{}:JL(t),!a)return l?Lie(t,xie(o,t)):Pie(t,Tie(o,t))}else{if(!zi[d])return s?t:{};o=mse(t,d,a)}}r||(r=new La);var p=r.get(t);if(p)return p;r.set(t,o),wse(t)?t.forEach(function(y){o.add(Df(y,n,e,y,t,r))}):vse(t)&&t.forEach(function(y,_){o.set(_,Df(y,n,e,_,t,r))});var m=c?l?Bie:K3:l?Sm:O1,v=u?void 0:m(t);return lte(v||t,function(y,_){v&&(_=y,y=t[_]),P4(o,_,Df(y,n,e,_,t,r))}),o}var Kse=4;function l_(t){return Df(t,Kse)}var Gse=1,Yse=4;function To(t){return Df(t,Gse|Yse)}var Zse=1,Xse=4;function W4(t,n){return n=typeof n=="function"?n:void 0,Df(t,Zse|Xse,n)}var Jse="__lodash_hash_undefined__";function Qse(t){return this.__data__.set(t,Jse),this}function ere(t){return this.__data__.has(t)}function c_(t){var n=-1,e=t==null?0:t.length;for(this.__data__=new Mc;++n<e;)this.add(t[n])}c_.prototype.add=c_.prototype.push=Qse;c_.prototype.has=ere;function tre(t,n){for(var e=-1,i=t==null?0:t.length;++e<i;)if(n(t[e],e,t))return!0;return!1}function nre(t,n){return t.has(n)}var ire=1,sre=2;function nB(t,n,e,i,s,r){var o=e&ire,a=t.length,l=n.length;if(a!=l&&!(o&&l>a))return!1;var c=r.get(t),u=r.get(n);if(c&&u)return c==n&&u==t;var d=-1,f=!0,p=e&sre?new c_:void 0;for(r.set(t,n),r.set(n,t);++d<a;){var m=t[d],v=n[d];if(i)var y=o?i(v,m,d,n,t,r):i(m,v,d,t,n,r);if(y!==void 0){if(y)continue;f=!1;break}if(p){if(!tre(n,function(_,b){if(!nre(p,b)&&(m===_||s(m,_,e,i,r)))return p.push(b)})){f=!1;break}}else if(!(m===v||s(m,v,e,i,r))){f=!1;break}}return r.delete(t),r.delete(n),f}function rre(t){var n=-1,e=Array(t.size);return t.forEach(function(i,s){e[++n]=[s,i]}),e}function ore(t){var n=-1,e=Array(t.size);return t.forEach(function(i){e[++n]=i}),e}var are=1,lre=2,cre="[object Boolean]",ure="[object Date]",dre="[object Error]",hre="[object Map]",fre="[object Number]",mre="[object RegExp]",pre="[object Set]",gre="[object String]",vre="[object Symbol]",bre="[object ArrayBuffer]",_re="[object DataView]",W6=oa?oa.prototype:void 0,G2=W6?W6.valueOf:void 0;function wre(t,n,e,i,s,r,o){switch(e){case _re:if(t.byteLength!=n.byteLength||t.byteOffset!=n.byteOffset)return!1;t=t.buffer,n=n.buffer;case bre:return!(t.byteLength!=n.byteLength||!r(new a_(t),new a_(n)));case cre:case ure:case fre:return P1(+t,+n);case dre:return t.name==n.name&&t.message==n.message;case mre:case gre:return t==n+"";case hre:var a=rre;case pre:var l=i&are;if(a||(a=ore),t.size!=n.size&&!l)return!1;var c=o.get(t);if(c)return c==n;i|=lre,o.set(t,n);var u=nB(a(t),a(n),i,s,r,o);return o.delete(t),u;case vre:if(G2)return G2.call(t)==G2.call(n)}return!1}var yre=1,Cre=Object.prototype,kre=Cre.hasOwnProperty;function Ere(t,n,e,i,s,r){var o=e&yre,a=K3(t),l=a.length,c=K3(n),u=c.length;if(l!=u&&!o)return!1;for(var d=l;d--;){var f=a[d];if(!(o?f in n:kre.call(n,f)))return!1}var p=r.get(t),m=r.get(n);if(p&&m)return p==n&&m==t;var v=!0;r.set(t,n),r.set(n,t);for(var y=o;++d<l;){f=a[d];var _=t[f],b=n[f];if(i)var E=o?i(b,_,f,n,t,r):i(_,b,f,t,n,r);if(!(E===void 0?_===b||s(_,b,e,i,r):E)){v=!1;break}y||(y=f=="constructor")}if(v&&!y){var x=t.constructor,A=n.constructor;x!=A&&"constructor"in t&&"constructor"in n&&!(typeof x=="function"&&x instanceof x&&typeof A=="function"&&A instanceof A)&&(v=!1)}return r.delete(t),r.delete(n),v}var Sre=1,j6="[object Arguments]",q6="[object Array]",iv="[object Object]",Tre=Object.prototype,K6=Tre.hasOwnProperty;function xre(t,n,e,i,s,r){var o=mr(t),a=mr(n),l=o?q6:Sa(t),c=a?q6:Sa(n);l=l==j6?iv:l,c=c==j6?iv:c;var u=l==iv,d=c==iv,f=l==c;if(f&&Wg(t)){if(!Wg(n))return!1;o=!0,u=!1}if(f&&!u)return r||(r=new La),o||F4(t)?nB(t,n,e,i,s,r):wre(t,n,l,e,i,s,r);if(!(e&Sre)){var p=u&&K6.call(t,"__wrapped__"),m=d&&K6.call(n,"__wrapped__");if(p||m){var v=p?t.value():t,y=m?n.value():n;return r||(r=new La),s(v,y,e,i,r)}}return f?(r||(r=new La),Ere(t,n,e,i,s,r)):!1}function B1(t,n,e,i,s){return t===n?!0:t==null||n==null||!aa(t)&&!aa(n)?t!==t&&n!==n:xre(t,n,e,i,B1,s)}var Are=1,Ire=2;function Rre(t,n,e,i){var s=e.length,r=s;if(t==null)return!r;for(t=Object(t);s--;){var o=e[s];if(o[2]?o[1]!==t[o[0]]:!(o[0]in t))return!1}for(;++s<r;){o=e[s];var a=o[0],l=t[a],c=o[1];if(o[2]){if(l===void 0&&!(a in t))return!1}else{var u=new La,d;if(!(d===void 0?B1(c,l,Are|Ire,i,u):d))return!1}}return!0}function iB(t){return t===t&&!Li(t)}function Mre(t){for(var n=O1(t),e=n.length;e--;){var i=n[e],s=t[i];n[e]=[i,s,iB(s)]}return n}function sB(t,n){return function(e){return e==null?!1:e[t]===n&&(n!==void 0||t in Object(e))}}function Pre(t){var n=Mre(t);return n.length==1&&n[0][2]?sB(n[0][0],n[0][1]):function(e){return e===t||Rre(e,t,n)}}function Ore(t,n){return t!=null&&n in Object(t)}function Lre(t,n,e){n=L1(n,t);for(var i=-1,s=n.length,r=!1;++i<s;){var o=Tm(n[i]);if(!(r=t!=null&&e(t,o)))break;t=t[o]}return r||++i!=s?r:(s=t==null?0:t.length,!!s&&O4(s)&&vw(o,s)&&(mr(t)||Ug(t)))}function rB(t,n){return t!=null&&Lre(t,n,Ore)}var Bre=1,Fre=2;function Nre(t,n){return N4(t)&&iB(n)?sB(Tm(t),n):function(e){var i=cr(e,t);return i===void 0&&i===n?rB(e,t):B1(n,i,Bre|Fre)}}function Vre(t){return function(n){return n==null?void 0:n[t]}}function Dre(t){return function(n){return yw(n,t)}}function $re(t){return N4(t)?Vre(Tm(t)):Dre(t)}function j4(t){return typeof t=="function"?t:t==null?Cu:typeof t=="object"?mr(t)?Nre(t[0],t[1]):Pre(t):$re(t)}function zre(t){return function(n,e,i){for(var s=-1,r=Object(n),o=i(n),a=o.length;a--;){var l=o[++s];if(e(r[l],l,r)===!1)break}return n}}var oB=zre();function aB(t,n){return t&&oB(t,n,O1)}function Hre(t,n){return function(e,i){if(e==null)return e;if(!Em(e))return t(e,i);for(var s=e.length,r=-1,o=Object(e);++r<s&&i(o[r],r,o)!==!1;);return e}}var Ure=Hre(aB),Y2=function(){return Wa.Date.now()},Wre="Expected a function",jre=Math.max,qre=Math.min;function Ss(t,n,e){var i,s,r,o,a,l,c=0,u=!1,d=!1,f=!0;if(typeof t!="function")throw new TypeError(Wre);n=C6(n)||0,Li(e)&&(u=!!e.leading,d="maxWait"in e,r=d?jre(C6(e.maxWait)||0,n):r,f="trailing"in e?!!e.trailing:f);function p(I){var k=i,O=s;return i=s=void 0,c=I,o=t.apply(O,k),o}function m(I){return c=I,a=setTimeout(_,n),u?p(I):o}function v(I){var k=I-l,O=I-c,M=n-k;return d?qre(M,r-O):M}function y(I){var k=I-l,O=I-c;return l===void 0||k>=n||k<0||d&&O>=r}function _(){var I=Y2();if(y(I))return b(I);a=setTimeout(_,v(I))}function b(I){return a=void 0,f&&i?p(I):(i=s=void 0,o)}function E(){a!==void 0&&clearTimeout(a),c=0,i=l=s=a=void 0}function x(){return a===void 0?o:b(Y2())}function A(){var I=Y2(),k=y(I);if(i=arguments,s=this,l=I,k){if(a===void 0)return m(l);if(d)return clearTimeout(a),a=setTimeout(_,n),p(l)}return a===void 0&&(a=setTimeout(_,n)),o}return A.cancel=E,A.flush=x,A}function X3(t,n,e){(e!==void 0&&!P1(t[n],e)||e===void 0&&!(n in t))&&bw(t,n,e)}function Kre(t){return aa(t)&&Em(t)}function J3(t,n){if(!(n==="constructor"&&typeof t[n]=="function")&&n!="__proto__")return t[n]}function Gre(t){return km(t,Sm(t))}function Yre(t,n,e,i,s,r,o){var a=J3(t,e),l=J3(n,e),c=o.get(l);if(c){X3(t,e,c);return}var u=r?r(a,l,e+"",t,n,o):void 0,d=u===void 0;if(d){var f=mr(l),p=!f&&Wg(l),m=!f&&!p&&F4(l);u=l,f||p||m?mr(a)?u=a:Kre(a)?u=TL(a):p?(d=!1,u=KL(l,!0)):m?(d=!1,u=XL(l,!0)):u=[]:po(l)||Ug(l)?(u=a,Ug(a)?u=Gre(a):(!Li(a)||Hg(a))&&(u=JL(l))):d=!1}d&&(o.set(l,u),s(u,l,i,r,o),o.delete(l)),X3(t,e,u)}function lB(t,n,e,i,s){t!==n&&oB(n,function(r,o){if(s||(s=new La),Li(r))Yre(t,n,o,e,lB,i,s);else{var a=i?i(J3(t,o),r,o+"",t,n,s):void 0;a===void 0&&(a=r),X3(t,o,a)}},Sm)}function Zre(t){var n=t==null?0:t.length;return n?t[n-1]:void 0}var cB=/[\\^$.*+?()[\]{}|]/g,Xre=RegExp(cB.source);function uB(t){return t=D4(t),t&&Xre.test(t)?t.replace(cB,"\\$&"):t}function Jre(t,n,e){var i=t==null?0:t.length;if(!i)return-1;var s=i-1;return cte(t,j4(n),s)}function Qre(t,n){var e=-1,i=Em(t)?Array(t.length):[];return Ure(t,function(s,r,o){i[++e]=n(s,r,o)}),i}function dB(t,n){var e=mr(t)?EL:Qre;return e(t,j4(n))}function eoe(t,n){return FL(dB(t,n))}function u_(t){for(var n=-1,e=t==null?0:t.length,i={};++n<e;){var s=t[n];i[s[0]]=s[1]}return i}var toe="[object String]";function G6(t){return typeof t=="string"||!mr(t)&&aa(t)&&qu(t)==toe}function noe(t,n){return n.length<2?t:yw(t,VL(n,0,-1))}function hh(t){return aa(t)&&t.nodeType===1&&!po(t)}function Cl(t,n){return B1(t,n)}function ioe(t,n,e){e=typeof e=="function"?e:void 0;var i=e?e(t,n):void 0;return i===void 0?B1(t,n,void 0,e):!!i}function fc(t){return t==null}function hB(t){return t===void 0}function soe(t,n){var e={};return n=j4(n),aB(t,function(i,s,r){bw(e,s,n(i,s,r))}),e}var Cw=IL(function(t,n,e){lB(t,n,e)});function roe(t,n){return n=L1(n,t),t=noe(t,n),t==null||delete t[Tm(Zre(n))]}function fB(t,n,e,i){if(!Li(t))return t;n=L1(n,t);for(var s=-1,r=n.length,o=r-1,a=t;a!=null&&++s<r;){var l=Tm(n[s]),c=e;if(l==="__proto__"||l==="constructor"||l==="prototype")return t;if(s!=o){var u=a[l];c=void 0,c===void 0&&(c=Li(u)?u:vw(n[s+1])?[]:{})}P4(a,l,c),a=a[l]}return t}function ooe(t,n,e){for(var i=-1,s=n.length,r={};++i<s;){var o=n[i],a=yw(t,o);e(a,o)&&fB(r,L1(o,t),a)}return r}function aoe(t,n){return ooe(t,n,function(e,i){return rB(t,i)})}var mB=Hne(function(t,n){return t==null?{}:aoe(t,n)});function pB(t,n,e){return t==null?t:fB(t,n,e)}var loe="Expected a function";function Jf(t,n,e){var i=!0,s=!0;if(typeof t!="function")throw new TypeError(loe);return Li(e)&&(i="leading"in e?!!e.leading:i,s="trailing"in e?!!e.trailing:s),Ss(t,n,{leading:i,maxWait:n,trailing:s})}function coe(t,n){return t==null?!0:roe(t,n)}const Z2="Lock from Vue integration (@ckeditor/ckeditor5-vue)",uoe=300,doe=pt({name:"CKEditor",__name:"ckeditor",props:zA({editor:{},config:{default:()=>({})},tagName:{default:"div"},disabled:{type:Boolean,default:!1},disableTwoWayDataBinding:{type:Boolean,default:!1}},{modelValue:{type:String,default:""},modelModifiers:{}}),emits:zA(["ready","destroy","blur","focus","input","update:modelValue"],["update:modelValue"]),setup(t,{expose:n,emit:e}){const i=gQ(t,"modelValue"),s=t,r=e,o=Se(),a=Se(),l=Se();n({instance:a,lastEditorData:l}),Dt(i,d=>{a.value&&d!==l.value&&a.value.data.set(d)}),Dt(()=>s.disabled,d=>{d?a.value.enableReadOnlyMode(Z2):a.value.disableReadOnlyMode(Z2)});function c(){const d=window.CKEDITOR_VERSION;if(!d)return console.warn('Cannot find the "CKEDITOR_VERSION" in the "window" scope.');const[f]=d.split(".").map(Number);f>=42||d.startsWith("0.0.0")||console.warn("The <CKEditor> component requires using CKEditor 5 in version 42+ or nightly build.")}function u(d){const f=Ss(p=>{if(s.disableTwoWayDataBinding)return;const m=l.value=d.data.get();r("update:modelValue",m,p,d),r("input",m,p,d)},uoe,{leading:!0});d.model.document.on("change:data",f),d.editing.view.document.on("focus",p=>{r("focus",p,d)}),d.editing.view.document.on("blur",p=>{r("blur",p,d)})}return c(),ri(()=>{const d=Object.assign({},s.config);i.value&&(d.initialData=i.value),s.editor.create(o.value,d).then(f=>{a.value=yO(f),u(f),i.value!==d.initialData&&f.data.set(i.value),s.disabled&&f.enableReadOnlyMode(Z2),r("ready",f)}).catch(f=>{console.error(f)})}),Ts(()=>{a.value&&(a.value.destroy(),a.value=void 0),r("destroy")}),(d,f)=>(ve(),At(Cs(d.tagName),{ref_key:"element",ref:o},null,512))}});/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md.
 *//* istanbul ignore if -- @preserve */if(!cL.startsWith("3."))throw new Error("The CKEditor plugin works only with Vue 3+. For more information, please refer to https://ckeditor.com/docs/ckeditor5/latest/builds/guides/integration/frameworks/vuejs-v3.html");const hoe={install(t){t.component("Ckeditor",doe)}},foe='a[href],button:not([disabled]),button:not([hidden]),:not([tabindex="-1"]),input:not([disabled]),input:not([type="hidden"]),select:not([disabled]),textarea:not([disabled])',moe=t=>getComputedStyle(t).position==="fixed"?!1:t.offsetParent!==null,aUe=t=>Array.from(t.querySelectorAll(foe)).filter(n=>poe(n)&&moe(n)),poe=t=>{if(t.tabIndex>0||t.tabIndex===0&&t.getAttribute("tabIndex")!==null)return!0;if(t.disabled)return!1;switch(t.nodeName){case"A":return!!t.href&&t.rel!=="ignore";case"INPUT":return!(t.type==="hidden"||t.type==="file");case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}},mb=function(t,n,...e){let i;n.includes("mouse")||n.includes("click")?i="MouseEvents":n.includes("key")?i="KeyboardEvent":i="HTMLEvents";const s=document.createEvent(i);return s.initEvent(n,...e),t.dispatchEvent(s),t},Xl=(t,n,{checkForDefaultPrevented:e=!0}={})=>s=>{const r=t==null?void 0:t(s);if(e===!1||!r)return n==null?void 0:n(s)};var Y6;const bi=typeof window<"u",goe=t=>typeof t<"u",voe=t=>typeof t=="function",boe=t=>typeof t=="string",d_=()=>{},Q3=bi&&((Y6=window==null?void 0:window.navigator)==null?void 0:Y6.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function Kg(t){return typeof t=="function"?t():H(t)}function _oe(t,n){function e(...i){return new Promise((s,r)=>{Promise.resolve(t(()=>n.apply(this,i),{fn:n,thisArg:this,args:i})).then(s).catch(r)})}return e}function woe(t,n={}){let e,i,s=d_;const r=a=>{clearTimeout(a),s(),s=d_};return a=>{const l=Kg(t),c=Kg(n.maxWait);return e&&r(e),l<=0||c!==void 0&&c<=0?(i&&(r(i),i=null),Promise.resolve(a())):new Promise((u,d)=>{s=n.rejectOnCancel?d:u,c&&!i&&(i=setTimeout(()=>{e&&r(e),i=null,u(a())},c)),e=setTimeout(()=>{i&&r(i),i=null,u(a())},l)})}}function yoe(t){return t}function F1(t){return aO()?(lO(t),!0):!1}function Coe(t,n=200,e={}){return _oe(woe(n,e),t)}function koe(t,n=200,e={}){const i=Se(t.value),s=Coe(()=>{i.value=t.value},n,e);return Dt(t,()=>s()),i}function Eoe(t,n=!0){On()?ri(t):n?t():Jn(t)}function Gg(t,n,e={}){const{immediate:i=!0}=e,s=Se(!1);let r=null;function o(){r&&(clearTimeout(r),r=null)}function a(){s.value=!1,o()}function l(...c){o(),s.value=!0,r=setTimeout(()=>{s.value=!1,r=null,t(...c)},Kg(n))}return i&&(s.value=!0,bi&&l()),F1(a),{isPending:ow(s),start:l,stop:a}}function nc(t){var n;const e=Kg(t);return(n=e==null?void 0:e.$el)!=null?n:e}const kw=bi?window:void 0;function ta(...t){let n,e,i,s;if(boe(t[0])||Array.isArray(t[0])?([e,i,s]=t,n=kw):[n,e,i,s]=t,!n)return d_;Array.isArray(e)||(e=[e]),Array.isArray(i)||(i=[i]);const r=[],o=()=>{r.forEach(u=>u()),r.length=0},a=(u,d,f,p)=>(u.addEventListener(d,f,p),()=>u.removeEventListener(d,f,p)),l=Dt(()=>[nc(n),Kg(s)],([u,d])=>{o(),u&&r.push(...e.flatMap(f=>i.map(p=>a(u,f,p,d))))},{immediate:!0,flush:"post"}),c=()=>{l(),o()};return F1(c),c}let Z6=!1;function Soe(t,n,e={}){const{window:i=kw,ignore:s=[],capture:r=!0,detectIframe:o=!1}=e;if(!i)return;Q3&&!Z6&&(Z6=!0,Array.from(i.document.body.children).forEach(f=>f.addEventListener("click",d_)));let a=!0;const l=f=>s.some(p=>{if(typeof p=="string")return Array.from(i.document.querySelectorAll(p)).some(m=>m===f.target||f.composedPath().includes(m));{const m=nc(p);return m&&(f.target===m||f.composedPath().includes(m))}}),u=[ta(i,"click",f=>{const p=nc(t);if(!(!p||p===f.target||f.composedPath().includes(p))){if(f.detail===0&&(a=!l(f)),!a){a=!0;return}n(f)}},{passive:!0,capture:r}),ta(i,"pointerdown",f=>{const p=nc(t);p&&(a=!f.composedPath().includes(p)&&!l(f))},{passive:!0}),o&&ta(i,"blur",f=>{var p;const m=nc(t);((p=i.document.activeElement)==null?void 0:p.tagName)==="IFRAME"&&!(m!=null&&m.contains(i.document.activeElement))&&n(f)})].filter(Boolean);return()=>u.forEach(f=>f())}function gB(t,n=!1){const e=Se(),i=()=>e.value=!!t();return i(),Eoe(i,n),e}function Toe(t){return JSON.parse(JSON.stringify(t))}const X6=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},J6="__vueuse_ssr_handlers__";X6[J6]=X6[J6]||{};var Q6=Object.getOwnPropertySymbols,xoe=Object.prototype.hasOwnProperty,Aoe=Object.prototype.propertyIsEnumerable,Ioe=(t,n)=>{var e={};for(var i in t)xoe.call(t,i)&&n.indexOf(i)<0&&(e[i]=t[i]);if(t!=null&&Q6)for(var i of Q6(t))n.indexOf(i)<0&&Aoe.call(t,i)&&(e[i]=t[i]);return e};function jr(t,n,e={}){const i=e,{window:s=kw}=i,r=Ioe(i,["window"]);let o;const a=gB(()=>s&&"ResizeObserver"in s),l=()=>{o&&(o.disconnect(),o=void 0)},c=Dt(()=>nc(t),d=>{l(),a.value&&s&&d&&(o=new ResizeObserver(n),o.observe(d,r))},{immediate:!0,flush:"post"}),u=()=>{l(),c()};return F1(u),{isSupported:a,stop:u}}var e8=Object.getOwnPropertySymbols,Roe=Object.prototype.hasOwnProperty,Moe=Object.prototype.propertyIsEnumerable,Poe=(t,n)=>{var e={};for(var i in t)Roe.call(t,i)&&n.indexOf(i)<0&&(e[i]=t[i]);if(t!=null&&e8)for(var i of e8(t))n.indexOf(i)<0&&Moe.call(t,i)&&(e[i]=t[i]);return e};function Ooe(t,n,e={}){const i=e,{window:s=kw}=i,r=Poe(i,["window"]);let o;const a=gB(()=>s&&"MutationObserver"in s),l=()=>{o&&(o.disconnect(),o=void 0)},c=Dt(()=>nc(t),d=>{l(),a.value&&s&&d&&(o=new MutationObserver(n),o.observe(d,r))},{immediate:!0}),u=()=>{l(),c()};return F1(u),{isSupported:a,stop:u}}var t8;(function(t){t.UP="UP",t.RIGHT="RIGHT",t.DOWN="DOWN",t.LEFT="LEFT",t.NONE="NONE"})(t8||(t8={}));var Loe=Object.defineProperty,n8=Object.getOwnPropertySymbols,Boe=Object.prototype.hasOwnProperty,Foe=Object.prototype.propertyIsEnumerable,i8=(t,n,e)=>n in t?Loe(t,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[n]=e,Noe=(t,n)=>{for(var e in n||(n={}))Boe.call(n,e)&&i8(t,e,n[e]);if(n8)for(var e of n8(n))Foe.call(n,e)&&i8(t,e,n[e]);return t};const Voe={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};Noe({linear:yoe},Voe);function Doe(t,n,e,i={}){var s,r,o;const{clone:a=!1,passive:l=!1,eventName:c,deep:u=!1,defaultValue:d}=i,f=On(),p=(f==null?void 0:f.emit)||((s=f==null?void 0:f.$emit)==null?void 0:s.bind(f))||((o=(r=f==null?void 0:f.proxy)==null?void 0:r.$emit)==null?void 0:o.bind(f==null?void 0:f.proxy));let m=c;m=c||m||`update:${n.toString()}`;const v=_=>a?voe(a)?a(_):Toe(_):_,y=()=>goe(t[n])?v(t[n]):d;if(l){const _=y(),b=Se(_);return Dt(()=>t[n],E=>b.value=v(E)),Dt(b,E=>{(E!==t[n]||u)&&p(m,E)},{deep:u}),b}else return se({get(){return y()},set(_){p(m,_)}})}const $oe=()=>bi&&/firefox/i.test(window.navigator.userAgent),ic=t=>t===void 0,mc=t=>typeof t=="boolean",Ms=t=>typeof t=="number",Iu=t=>typeof Element>"u"?!1:t instanceof Element,eC=t=>fc(t),zoe=t=>pn(t)?!Number.isNaN(Number(t)):!1,Hoe=t=>bi?window.requestAnimationFrame(t):setTimeout(t,16),Uoe=(t="")=>t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d"),tC=t=>Object.keys(t),Woe=t=>Object.entries(t),pb=(t,n,e)=>({get value(){return cr(t,n,e)},set value(i){pB(t,n,i)}});class joe extends Error{constructor(n){super(n),this.name="ElementPlusError"}}function Fa(t,n){throw new joe(`[${t}] ${n}`)}function lUe(t,n){}const vB=(t="")=>t.split(" ").filter(n=>!!n.trim()),Eu=(t,n)=>{if(!t||!n)return!1;if(n.includes(" "))throw new Error("className should not contain space.");return t.classList.contains(n)},sc=(t,n)=>{!t||!n.trim()||t.classList.add(...vB(n))},lc=(t,n)=>{!t||!n.trim()||t.classList.remove(...vB(n))},qoe=(t,n)=>{var e;if(!bi||!t||!n)return"";let i=So(n);i==="float"&&(i="cssFloat");try{const s=t.style[i];if(s)return s;const r=(e=document.defaultView)==null?void 0:e.getComputedStyle(t,"");return r?r[i]:""}catch{return t.style[i]}};function kl(t,n="px"){if(!t)return"";if(Ms(t)||zoe(t))return`${t}${n}`;if(pn(t))return t}let sv;const Koe=t=>{var n;if(!bi)return 0;if(sv!==void 0)return sv;const e=document.createElement("div");e.className=`${t}-scrollbar__wrap`,e.style.visibility="hidden",e.style.width="100px",e.style.position="absolute",e.style.top="-9999px",document.body.appendChild(e);const i=e.offsetWidth;e.style.overflow="scroll";const s=document.createElement("div");s.style.width="100%",e.appendChild(s);const r=s.offsetWidth;return(n=e.parentNode)==null||n.removeChild(e),sv=i-r,sv};function Goe(t,n){if(!bi)return;if(!n){t.scrollTop=0;return}const e=[];let i=n.offsetParent;for(;i!==null&&t!==i&&t.contains(i);)e.push(i),i=i.offsetParent;const s=n.offsetTop+e.reduce((l,c)=>l+c.offsetTop,0),r=s+n.offsetHeight,o=t.scrollTop,a=o+t.clientHeight;s<o?t.scrollTop=s:r>a&&(t.scrollTop=r-t.clientHeight)}/*! Element Plus Icons Vue v2.3.1 */var Yoe=pt({name:"ArrowDown",__name:"arrow-down",setup(t){return(n,e)=>(ve(),it("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ot("path",{fill:"currentColor",d:"M831.872 340.864 512 652.672 192.128 340.864a30.592 30.592 0 0 0-42.752 0 29.12 29.12 0 0 0 0 41.6L489.664 714.24a32 32 0 0 0 44.672 0l340.288-331.712a29.12 29.12 0 0 0 0-41.728 30.592 30.592 0 0 0-42.752 0z"})]))}}),q4=Yoe,Zoe=pt({name:"ArrowRight",__name:"arrow-right",setup(t){return(n,e)=>(ve(),it("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ot("path",{fill:"currentColor",d:"M340.864 149.312a30.592 30.592 0 0 0 0 42.752L652.736 512 340.864 831.872a30.592 30.592 0 0 0 0 42.752 29.12 29.12 0 0 0 41.728 0L714.24 534.336a32 32 0 0 0 0-44.672L382.592 149.376a29.12 29.12 0 0 0-41.728 0z"})]))}}),K4=Zoe,Xoe=pt({name:"ArrowUp",__name:"arrow-up",setup(t){return(n,e)=>(ve(),it("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ot("path",{fill:"currentColor",d:"m488.832 344.32-339.84 356.672a32 32 0 0 0 0 44.16l.384.384a29.44 29.44 0 0 0 42.688 0l320-335.872 319.872 335.872a29.44 29.44 0 0 0 42.688 0l.384-.384a32 32 0 0 0 0-44.16L535.168 344.32a32 32 0 0 0-46.336 0"})]))}}),Joe=Xoe,Qoe=pt({name:"Check",__name:"check",setup(t){return(n,e)=>(ve(),it("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ot("path",{fill:"currentColor",d:"M406.656 706.944 195.84 496.256a32 32 0 1 0-45.248 45.248l256 256 512-512a32 32 0 0 0-45.248-45.248L406.592 706.944z"})]))}}),bB=Qoe,eae=pt({name:"CircleCheck",__name:"circle-check",setup(t){return(n,e)=>(ve(),it("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ot("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"}),ot("path",{fill:"currentColor",d:"M745.344 361.344a32 32 0 0 1 45.312 45.312l-288 288a32 32 0 0 1-45.312 0l-160-160a32 32 0 1 1 45.312-45.312L480 626.752l265.344-265.408z"})]))}}),G4=eae,tae=pt({name:"CircleCloseFilled",__name:"circle-close-filled",setup(t){return(n,e)=>(ve(),it("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ot("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m0 393.664L407.936 353.6a38.4 38.4 0 1 0-54.336 54.336L457.664 512 353.6 616.064a38.4 38.4 0 1 0 54.336 54.336L512 566.336 616.064 670.4a38.4 38.4 0 1 0 54.336-54.336L566.336 512 670.4 407.936a38.4 38.4 0 1 0-54.336-54.336z"})]))}}),_B=tae,nae=pt({name:"CircleClose",__name:"circle-close",setup(t){return(n,e)=>(ve(),it("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ot("path",{fill:"currentColor",d:"m466.752 512-90.496-90.496a32 32 0 0 1 45.248-45.248L512 466.752l90.496-90.496a32 32 0 1 1 45.248 45.248L557.248 512l90.496 90.496a32 32 0 1 1-45.248 45.248L512 557.248l-90.496 90.496a32 32 0 0 1-45.248-45.248z"}),ot("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"})]))}}),Ew=nae,iae=pt({name:"Close",__name:"close",setup(t){return(n,e)=>(ve(),it("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ot("path",{fill:"currentColor",d:"M764.288 214.592 512 466.88 259.712 214.592a31.936 31.936 0 0 0-45.12 45.12L466.752 512 214.528 764.224a31.936 31.936 0 1 0 45.12 45.184L512 557.184l252.288 252.288a31.936 31.936 0 0 0 45.12-45.12L557.12 512.064l252.288-252.352a31.936 31.936 0 1 0-45.12-45.184z"})]))}}),Qf=iae,sae=pt({name:"Delete",__name:"delete",setup(t){return(n,e)=>(ve(),it("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ot("path",{fill:"currentColor",d:"M160 256H96a32 32 0 0 1 0-64h256V95.936a32 32 0 0 1 32-32h256a32 32 0 0 1 32 32V192h256a32 32 0 1 1 0 64h-64v672a32 32 0 0 1-32 32H192a32 32 0 0 1-32-32zm448-64v-64H416v64zM224 896h576V256H224zm192-128a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32m192 0a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32"})]))}}),rae=sae,oae=pt({name:"Document",__name:"document",setup(t){return(n,e)=>(ve(),it("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ot("path",{fill:"currentColor",d:"M832 384H576V128H192v768h640zm-26.496-64L640 154.496V320zM160 64h480l256 256v608a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V96a32 32 0 0 1 32-32m160 448h384v64H320zm0-192h160v64H320zm0 384h384v64H320z"})]))}}),aae=oae,lae=pt({name:"Hide",__name:"hide",setup(t){return(n,e)=>(ve(),it("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ot("path",{fill:"currentColor",d:"M876.8 156.8c0-9.6-3.2-16-9.6-22.4-6.4-6.4-12.8-9.6-22.4-9.6-9.6 0-16 3.2-22.4 9.6L736 220.8c-64-32-137.6-51.2-224-60.8-160 16-288 73.6-377.6 176C44.8 438.4 0 496 0 512s48 73.6 134.4 176c22.4 25.6 44.8 48 73.6 67.2l-86.4 89.6c-6.4 6.4-9.6 12.8-9.6 22.4 0 9.6 3.2 16 9.6 22.4 6.4 6.4 12.8 9.6 22.4 9.6 9.6 0 16-3.2 22.4-9.6l704-710.4c3.2-6.4 6.4-12.8 6.4-22.4Zm-646.4 528c-76.8-70.4-128-128-153.6-172.8 28.8-48 80-105.6 153.6-172.8C304 272 400 230.4 512 224c64 3.2 124.8 19.2 176 44.8l-54.4 54.4C598.4 300.8 560 288 512 288c-64 0-115.2 22.4-160 64s-64 96-64 160c0 48 12.8 89.6 35.2 124.8L256 707.2c-9.6-6.4-19.2-16-25.6-22.4Zm140.8-96c-12.8-22.4-19.2-48-19.2-76.8 0-44.8 16-83.2 48-112 32-28.8 67.2-48 112-48 28.8 0 54.4 6.4 73.6 19.2zM889.599 336c-12.8-16-28.8-28.8-41.6-41.6l-48 48c73.6 67.2 124.8 124.8 150.4 169.6-28.8 48-80 105.6-153.6 172.8-73.6 67.2-172.8 108.8-284.8 115.2-51.2-3.2-99.2-12.8-140.8-28.8l-48 48c57.6 22.4 118.4 38.4 188.8 44.8 160-16 288-73.6 377.6-176C979.199 585.6 1024 528 1024 512s-48.001-73.6-134.401-176Z"}),ot("path",{fill:"currentColor",d:"M511.998 672c-12.8 0-25.6-3.2-38.4-6.4l-51.2 51.2c28.8 12.8 57.6 19.2 89.6 19.2 64 0 115.2-22.4 160-64 41.6-41.6 64-96 64-160 0-32-6.4-64-19.2-89.6l-51.2 51.2c3.2 12.8 6.4 25.6 6.4 38.4 0 44.8-16 83.2-48 112-32 28.8-67.2 48-112 48Z"})]))}}),cae=lae,uae=pt({name:"InfoFilled",__name:"info-filled",setup(t){return(n,e)=>(ve(),it("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ot("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896.064A448 448 0 0 1 512 64m67.2 275.072c33.28 0 60.288-23.104 60.288-57.344s-27.072-57.344-60.288-57.344c-33.28 0-60.16 23.104-60.16 57.344s26.88 57.344 60.16 57.344M590.912 699.2c0-6.848 2.368-24.64 1.024-34.752l-52.608 60.544c-10.88 11.456-24.512 19.392-30.912 17.28a12.992 12.992 0 0 1-8.256-14.72l87.68-276.992c7.168-35.136-12.544-67.2-54.336-71.296-44.096 0-108.992 44.736-148.48 101.504 0 6.784-1.28 23.68.064 33.792l52.544-60.608c10.88-11.328 23.552-19.328 29.952-17.152a12.8 12.8 0 0 1 7.808 16.128L388.48 728.576c-10.048 32.256 8.96 63.872 55.04 71.04 67.84 0 107.904-43.648 147.456-100.416z"})]))}}),wB=uae,dae=pt({name:"Loading",__name:"loading",setup(t){return(n,e)=>(ve(),it("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ot("path",{fill:"currentColor",d:"M512 64a32 32 0 0 1 32 32v192a32 32 0 0 1-64 0V96a32 32 0 0 1 32-32m0 640a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V736a32 32 0 0 1 32-32m448-192a32 32 0 0 1-32 32H736a32 32 0 1 1 0-64h192a32 32 0 0 1 32 32m-640 0a32 32 0 0 1-32 32H96a32 32 0 0 1 0-64h192a32 32 0 0 1 32 32M195.2 195.2a32 32 0 0 1 45.248 0L376.32 331.008a32 32 0 0 1-45.248 45.248L195.2 240.448a32 32 0 0 1 0-45.248zm452.544 452.544a32 32 0 0 1 45.248 0L828.8 783.552a32 32 0 0 1-45.248 45.248L647.744 692.992a32 32 0 0 1 0-45.248zM828.8 195.264a32 32 0 0 1 0 45.184L692.992 376.32a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0m-452.544 452.48a32 32 0 0 1 0 45.248L240.448 828.8a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0z"})]))}}),Y4=dae,hae=pt({name:"More",__name:"more",setup(t){return(n,e)=>(ve(),it("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ot("path",{fill:"currentColor",d:"M176 416a112 112 0 1 0 0 224 112 112 0 0 0 0-224m0 64a48 48 0 1 1 0 96 48 48 0 0 1 0-96m336-64a112 112 0 1 1 0 224 112 112 0 0 1 0-224m0 64a48 48 0 1 0 0 96 48 48 0 0 0 0-96m336-64a112 112 0 1 1 0 224 112 112 0 0 1 0-224m0 64a48 48 0 1 0 0 96 48 48 0 0 0 0-96"})]))}}),fae=hae,mae=pt({name:"SuccessFilled",__name:"success-filled",setup(t){return(n,e)=>(ve(),it("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ot("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m-55.808 536.384-99.52-99.584a38.4 38.4 0 1 0-54.336 54.336l126.72 126.72a38.272 38.272 0 0 0 54.336 0l262.4-262.464a38.4 38.4 0 1 0-54.272-54.336z"})]))}}),yB=mae,pae=pt({name:"View",__name:"view",setup(t){return(n,e)=>(ve(),it("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ot("path",{fill:"currentColor",d:"M512 160c320 0 512 352 512 352S832 864 512 864 0 512 0 512s192-352 512-352m0 64c-225.28 0-384.128 208.064-436.8 288 52.608 79.872 211.456 288 436.8 288 225.28 0 384.128-208.064 436.8-288-52.608-79.872-211.456-288-436.8-288zm0 64a224 224 0 1 1 0 448 224 224 0 0 1 0-448m0 64a160.192 160.192 0 0 0-160 160c0 88.192 71.744 160 160 160s160-71.808 160-160-71.744-160-160-160"})]))}}),gae=pae,vae=pt({name:"WarningFilled",__name:"warning-filled",setup(t){return(n,e)=>(ve(),it("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ot("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m0 192a58.432 58.432 0 0 0-58.24 63.744l23.36 256.384a35.072 35.072 0 0 0 69.76 0l23.296-256.384A58.432 58.432 0 0 0 512 256m0 512a51.2 51.2 0 1 0 0-102.4 51.2 51.2 0 0 0 0 102.4"})]))}}),Z4=vae,bae=pt({name:"ZoomIn",__name:"zoom-in",setup(t){return(n,e)=>(ve(),it("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ot("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704m-32-384v-96a32 32 0 0 1 64 0v96h96a32 32 0 0 1 0 64h-96v96a32 32 0 0 1-64 0v-96h-96a32 32 0 0 1 0-64z"})]))}}),_ae=bae;const CB="__epPropKey",Ft=t=>t,wae=t=>bn(t)&&!!t[CB],Sw=(t,n)=>{if(!bn(t)||wae(t))return t;const{values:e,required:i,default:s,type:r,validator:o}=t,l={type:r,required:!!i,validator:e||o?c=>{let u=!1,d=[];if(e&&(d=Array.from(e),Mn(t,"default")&&d.push(s),u||(u=d.includes(c))),o&&(u||(u=o(c))),!u&&d.length>0){const f=[...new Set(d)].map(p=>JSON.stringify(p)).join(", ");NQ(`Invalid prop: validation failed${n?` for prop "${n}"`:""}. Expected one of [${f}], got value ${JSON.stringify(c)}.`)}return u}:void 0,[CB]:!0};return Mn(t,"default")&&(l.default=s),l},Ln=t=>u_(Object.entries(t).map(([n,e])=>[n,Sw(e,n)])),qr=Ft([String,Object,Function]),yae={Close:Qf},kB={Close:Qf,SuccessFilled:yB,InfoFilled:wB,WarningFilled:Z4,CircleCloseFilled:_B},h_={success:yB,warning:Z4,error:_B,info:wB},EB={validating:Y4,success:G4,error:Ew},xs=(t,n)=>{if(t.install=e=>{for(const i of[t,...Object.values(n??{})])e.component(i.name,i)},n)for(const[e,i]of Object.entries(n))t[e]=i;return t},Cae=(t,n)=>(t.install=e=>{t._context=e._context,e.config.globalProperties[n]=t},t),Al=t=>(t.install=$n,t),kae=(...t)=>n=>{t.forEach(e=>{Ut(e)?e(n):e.value=n})},ur={tab:"Tab",enter:"Enter",space:"Space",left:"ArrowLeft",up:"ArrowUp",right:"ArrowRight",down:"ArrowDown",esc:"Escape",delete:"Delete",backspace:"Backspace",numpadEnter:"NumpadEnter",pageUp:"PageUp",pageDown:"PageDown",home:"Home",end:"End"},kr="update:modelValue",SB="change",Tw=["","default","small","large"];var gb=(t=>(t[t.TEXT=1]="TEXT",t[t.CLASS=2]="CLASS",t[t.STYLE=4]="STYLE",t[t.PROPS=8]="PROPS",t[t.FULL_PROPS=16]="FULL_PROPS",t[t.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",t[t.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",t[t.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",t[t.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",t[t.NEED_PATCH=512]="NEED_PATCH",t[t.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",t[t.HOISTED=-1]="HOISTED",t[t.BAIL=-2]="BAIL",t))(gb||{});const vb=t=>{const n=Bt(t)?t:[t],e=[];return n.forEach(i=>{var s;Bt(i)?e.push(...vb(i)):Nu(i)&&Bt(i.children)?e.push(...vb(i.children)):(e.push(i),Nu(i)&&((s=i.component)!=null&&s.subTree)&&e.push(...vb(i.component.subTree)))}),e},Eae=t=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(t),em=t=>t,Sae=["class","style"],Tae=/^on[A-Z]/,xae=(t={})=>{const{excludeListeners:n=!1,excludeKeys:e}=t,i=se(()=>((e==null?void 0:e.value)||[]).concat(Sae)),s=On();return se(s?()=>{var r;return u_(Object.entries((r=s.proxy)==null?void 0:r.$attrs).filter(([o])=>!i.value.includes(o)&&!(n&&Tae.test(o))))}:()=>({}))},cg=({from:t,replacement:n,scope:e,version:i,ref:s,type:r="API"},o)=>{Dt(()=>H(o),a=>{},{immediate:!0})},Aae=(t,n,e,i)=>{let s={offsetX:0,offsetY:0};const r=c=>{const u=c.clientX,d=c.clientY,{offsetX:f,offsetY:p}=s,m=t.value.getBoundingClientRect(),v=m.left,y=m.top,_=m.width,b=m.height,E=document.documentElement.clientWidth,x=document.documentElement.clientHeight,A=-v+f,I=-y+p,k=E-v-_+f,O=x-y-b+p,M=P=>{let R=f+P.clientX-u,L=p+P.clientY-d;i!=null&&i.value||(R=Math.min(Math.max(R,A),k),L=Math.min(Math.max(L,I),O)),s={offsetX:R,offsetY:L},t.value&&(t.value.style.transform=`translate(${kl(R)}, ${kl(L)})`)},T=()=>{document.removeEventListener("mousemove",M),document.removeEventListener("mouseup",T)};document.addEventListener("mousemove",M),document.addEventListener("mouseup",T)},o=()=>{n.value&&t.value&&n.value.addEventListener("mousedown",r)},a=()=>{n.value&&t.value&&n.value.removeEventListener("mousedown",r)},l=()=>{s={offsetX:0,offsetY:0},t.value&&(t.value.style.transform="none")};return ri(()=>{Au(()=>{e.value?o():a()})}),Ts(()=>{a()}),{resetPosition:l}};var Iae={name:"en",el:{breadcrumb:{label:"Breadcrumb"},colorpicker:{confirm:"OK",clear:"Clear",defaultLabel:"color picker",description:"current color is {color}. press enter to select a new color.",alphaLabel:"pick alpha value"},datepicker:{now:"Now",today:"Today",cancel:"Cancel",clear:"Clear",confirm:"OK",dateTablePrompt:"Use the arrow keys and enter to select the day of the month",monthTablePrompt:"Use the arrow keys and enter to select the month",yearTablePrompt:"Use the arrow keys and enter to select the year",selectedDate:"Selected date",selectDate:"Select date",selectTime:"Select time",startDate:"Start Date",startTime:"Start Time",endDate:"End Date",endTime:"End Time",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",year:"",month1:"January",month2:"February",month3:"March",month4:"April",month5:"May",month6:"June",month7:"July",month8:"August",month9:"September",month10:"October",month11:"November",month12:"December",week:"week",weeks:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},weeksFull:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"},months:{jan:"Jan",feb:"Feb",mar:"Mar",apr:"Apr",may:"May",jun:"Jun",jul:"Jul",aug:"Aug",sep:"Sep",oct:"Oct",nov:"Nov",dec:"Dec"}},inputNumber:{decrease:"decrease number",increase:"increase number"},select:{loading:"Loading",noMatch:"No matching data",noData:"No data",placeholder:"Select"},mention:{loading:"Loading"},dropdown:{toggleDropdown:"Toggle Dropdown"},cascader:{noMatch:"No matching data",loading:"Loading",placeholder:"Select",noData:"No data"},pagination:{goto:"Go to",pagesize:"/page",total:"Total {total}",pageClassifier:"",page:"Page",prev:"Go to previous page",next:"Go to next page",currentPage:"page {pager}",prevPages:"Previous {pager} pages",nextPages:"Next {pager} pages",deprecationWarning:"Deprecated usages detected, please refer to the el-pagination documentation for more details"},dialog:{close:"Close this dialog"},drawer:{close:"Close this dialog"},messagebox:{title:"Message",confirm:"OK",cancel:"Cancel",error:"Illegal input",close:"Close this dialog"},upload:{deleteTip:"press delete to remove",delete:"Delete",preview:"Preview",continue:"Continue"},slider:{defaultLabel:"slider between {min} and {max}",defaultRangeStartLabel:"pick start value",defaultRangeEndLabel:"pick end value"},table:{emptyText:"No Data",confirmFilter:"Confirm",resetFilter:"Reset",clearFilter:"All",sumText:"Sum"},tour:{next:"Next",previous:"Previous",finish:"Finish"},tree:{emptyText:"No Data"},transfer:{noMatch:"No matching data",noData:"No data",titles:["List 1","List 2"],filterPlaceholder:"Enter keyword",noCheckedFormat:"{total} items",hasCheckedFormat:"{checked}/{total} checked"},image:{error:"FAILED"},pageHeader:{title:"Back"},popconfirm:{confirmButtonText:"Yes",cancelButtonText:"No"},carousel:{leftArrow:"Carousel arrow left",rightArrow:"Carousel arrow right",indicator:"Carousel switch to index {index}"}}};const Rae=t=>(n,e)=>Mae(n,e,H(t)),Mae=(t,n,e)=>cr(e,t,t).replace(/\{(\w+)\}/g,(i,s)=>{var r;return`${(r=n==null?void 0:n[s])!=null?r:`{${s}}`}`}),Pae=t=>{const n=se(()=>H(t).name),e=is(t)?t:Se(t);return{lang:n,locale:e,t:Rae(t)}},TB=Symbol("localeContextKey"),xm=t=>{const n=t||jt(TB,Se());return Pae(se(()=>n.value||Iae))},ug="el",Oae="is-",gd=(t,n,e,i,s)=>{let r=`${t}-${n}`;return e&&(r+=`-${e}`),i&&(r+=`__${i}`),s&&(r+=`--${s}`),r},xB=Symbol("namespaceContextKey"),X4=t=>{const n=t||(On()?jt(xB,Se(ug)):Se(ug));return se(()=>H(n)||ug)},Zt=(t,n)=>{const e=X4(n);return{namespace:e,b:(v="")=>gd(e.value,t,v,"",""),e:v=>v?gd(e.value,t,"",v,""):"",m:v=>v?gd(e.value,t,"","",v):"",be:(v,y)=>v&&y?gd(e.value,t,v,y,""):"",em:(v,y)=>v&&y?gd(e.value,t,"",v,y):"",bm:(v,y)=>v&&y?gd(e.value,t,v,"",y):"",bem:(v,y,_)=>v&&y&&_?gd(e.value,t,v,y,_):"",is:(v,...y)=>{const _=y.length>=1?y[0]:!0;return v&&_?`${Oae}${v}`:""},cssVar:v=>{const y={};for(const _ in v)v[_]&&(y[`--${e.value}-${_}`]=v[_]);return y},cssVarName:v=>`--${e.value}-${v}`,cssVarBlock:v=>{const y={};for(const _ in v)v[_]&&(y[`--${e.value}-${t}-${_}`]=v[_]);return y},cssVarBlockName:v=>`--${e.value}-${t}-${v}`}},Lae=(t,n={})=>{is(t)||Fa("[useLockscreen]","You need to pass a ref param to this function");const e=n.ns||Zt("popup"),i=se(()=>e.bm("parent","hidden"));if(!bi||Eu(document.body,i.value))return;let s=0,r=!1,o="0";const a=()=>{setTimeout(()=>{lc(document==null?void 0:document.body,i.value),r&&document&&(document.body.style.width=o)},200)};Dt(t,l=>{if(!l){a();return}r=!Eu(document.body,i.value),r&&(o=document.body.style.width),s=Koe(e.namespace.value);const c=document.documentElement.clientHeight<document.body.scrollHeight,u=qoe(document.body,"overflowY");s>0&&(c||u==="scroll")&&r&&(document.body.style.width=`calc(100% - ${s}px)`),sc(document.body,i.value)}),lO(()=>a())},Bae=Sw({type:Ft(Boolean),default:null}),Fae=Sw({type:Ft(Function)}),AB=t=>{const n=`update:${t}`,e=`onUpdate:${t}`,i=[n],s={[t]:Bae,[e]:Fae};return{useModelToggle:({indicator:o,toggleReason:a,shouldHideWhenRouteChanges:l,shouldProceed:c,onShow:u,onHide:d})=>{const f=On(),{emit:p}=f,m=f.props,v=se(()=>Ut(m[e])),y=se(()=>m[t]===null),_=k=>{o.value!==!0&&(o.value=!0,a&&(a.value=k),Ut(u)&&u(k))},b=k=>{o.value!==!1&&(o.value=!1,a&&(a.value=k),Ut(d)&&d(k))},E=k=>{if(m.disabled===!0||Ut(c)&&!c())return;const O=v.value&&bi;O&&p(n,!0),(y.value||!O)&&_(k)},x=k=>{if(m.disabled===!0||!bi)return;const O=v.value&&bi;O&&p(n,!1),(y.value||!O)&&b(k)},A=k=>{mc(k)&&(m.disabled&&k?v.value&&p(n,!1):o.value!==k&&(k?_():b()))},I=()=>{o.value?x():E()};return Dt(()=>m[t],A),l&&f.appContext.config.globalProperties.$route!==void 0&&Dt(()=>({...f.proxy.$route}),()=>{l.value&&o.value&&x()}),ri(()=>{A(m[t])}),{hide:x,show:E,toggle:I,hasUpdateHandler:v}},useModelToggleProps:s,useModelToggleEmits:i}};AB("modelValue");const IB=t=>{const n=On();return se(()=>{var e,i;return(i=(e=n==null?void 0:n.proxy)==null?void 0:e.$props)==null?void 0:i[t]})};var Yr="top",la="bottom",ca="right",Zr="left",J4="auto",N1=[Yr,la,ca,Zr],tm="start",Yg="end",Nae="clippingParents",RB="viewport",up="popper",Vae="reference",s8=N1.reduce(function(t,n){return t.concat([n+"-"+tm,n+"-"+Yg])},[]),xw=[].concat(N1,[J4]).reduce(function(t,n){return t.concat([n,n+"-"+tm,n+"-"+Yg])},[]),Dae="beforeRead",$ae="read",zae="afterRead",Hae="beforeMain",Uae="main",Wae="afterMain",jae="beforeWrite",qae="write",Kae="afterWrite",Gae=[Dae,$ae,zae,Hae,Uae,Wae,jae,qae,Kae];function El(t){return t?(t.nodeName||"").toLowerCase():null}function ja(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var n=t.ownerDocument;return n&&n.defaultView||window}return t}function nm(t){var n=ja(t).Element;return t instanceof n||t instanceof Element}function na(t){var n=ja(t).HTMLElement;return t instanceof n||t instanceof HTMLElement}function Q4(t){if(typeof ShadowRoot>"u")return!1;var n=ja(t).ShadowRoot;return t instanceof n||t instanceof ShadowRoot}function Yae(t){var n=t.state;Object.keys(n.elements).forEach(function(e){var i=n.styles[e]||{},s=n.attributes[e]||{},r=n.elements[e];!na(r)||!El(r)||(Object.assign(r.style,i),Object.keys(s).forEach(function(o){var a=s[o];a===!1?r.removeAttribute(o):r.setAttribute(o,a===!0?"":a)}))})}function Zae(t){var n=t.state,e={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(n.elements.popper.style,e.popper),n.styles=e,n.elements.arrow&&Object.assign(n.elements.arrow.style,e.arrow),function(){Object.keys(n.elements).forEach(function(i){var s=n.elements[i],r=n.attributes[i]||{},o=Object.keys(n.styles.hasOwnProperty(i)?n.styles[i]:e[i]),a=o.reduce(function(l,c){return l[c]="",l},{});!na(s)||!El(s)||(Object.assign(s.style,a),Object.keys(r).forEach(function(l){s.removeAttribute(l)}))})}}var MB={name:"applyStyles",enabled:!0,phase:"write",fn:Yae,effect:Zae,requires:["computeStyles"]};function _l(t){return t.split("-")[0]}var eh=Math.max,f_=Math.min,im=Math.round;function sm(t,n){n===void 0&&(n=!1);var e=t.getBoundingClientRect(),i=1,s=1;if(na(t)&&n){var r=t.offsetHeight,o=t.offsetWidth;o>0&&(i=im(e.width)/o||1),r>0&&(s=im(e.height)/r||1)}return{width:e.width/i,height:e.height/s,top:e.top/s,right:e.right/i,bottom:e.bottom/s,left:e.left/i,x:e.left/i,y:e.top/s}}function eE(t){var n=sm(t),e=t.offsetWidth,i=t.offsetHeight;return Math.abs(n.width-e)<=1&&(e=n.width),Math.abs(n.height-i)<=1&&(i=n.height),{x:t.offsetLeft,y:t.offsetTop,width:e,height:i}}function PB(t,n){var e=n.getRootNode&&n.getRootNode();if(t.contains(n))return!0;if(e&&Q4(e)){var i=n;do{if(i&&t.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function pc(t){return ja(t).getComputedStyle(t)}function Xae(t){return["table","td","th"].indexOf(El(t))>=0}function Ku(t){return((nm(t)?t.ownerDocument:t.document)||window.document).documentElement}function Aw(t){return El(t)==="html"?t:t.assignedSlot||t.parentNode||(Q4(t)?t.host:null)||Ku(t)}function r8(t){return!na(t)||pc(t).position==="fixed"?null:t.offsetParent}function Jae(t){var n=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,e=navigator.userAgent.indexOf("Trident")!==-1;if(e&&na(t)){var i=pc(t);if(i.position==="fixed")return null}var s=Aw(t);for(Q4(s)&&(s=s.host);na(s)&&["html","body"].indexOf(El(s))<0;){var r=pc(s);if(r.transform!=="none"||r.perspective!=="none"||r.contain==="paint"||["transform","perspective"].indexOf(r.willChange)!==-1||n&&r.willChange==="filter"||n&&r.filter&&r.filter!=="none")return s;s=s.parentNode}return null}function V1(t){for(var n=ja(t),e=r8(t);e&&Xae(e)&&pc(e).position==="static";)e=r8(e);return e&&(El(e)==="html"||El(e)==="body"&&pc(e).position==="static")?n:e||Jae(t)||n}function tE(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function dg(t,n,e){return eh(t,f_(n,e))}function Qae(t,n,e){var i=dg(t,n,e);return i>e?e:i}function OB(){return{top:0,right:0,bottom:0,left:0}}function LB(t){return Object.assign({},OB(),t)}function BB(t,n){return n.reduce(function(e,i){return e[i]=t,e},{})}var ele=function(t,n){return t=typeof t=="function"?t(Object.assign({},n.rects,{placement:n.placement})):t,LB(typeof t!="number"?t:BB(t,N1))};function tle(t){var n,e=t.state,i=t.name,s=t.options,r=e.elements.arrow,o=e.modifiersData.popperOffsets,a=_l(e.placement),l=tE(a),c=[Zr,ca].indexOf(a)>=0,u=c?"height":"width";if(!(!r||!o)){var d=ele(s.padding,e),f=eE(r),p=l==="y"?Yr:Zr,m=l==="y"?la:ca,v=e.rects.reference[u]+e.rects.reference[l]-o[l]-e.rects.popper[u],y=o[l]-e.rects.reference[l],_=V1(r),b=_?l==="y"?_.clientHeight||0:_.clientWidth||0:0,E=v/2-y/2,x=d[p],A=b-f[u]-d[m],I=b/2-f[u]/2+E,k=dg(x,I,A),O=l;e.modifiersData[i]=(n={},n[O]=k,n.centerOffset=k-I,n)}}function nle(t){var n=t.state,e=t.options,i=e.element,s=i===void 0?"[data-popper-arrow]":i;s!=null&&(typeof s=="string"&&(s=n.elements.popper.querySelector(s),!s)||!PB(n.elements.popper,s)||(n.elements.arrow=s))}var ile={name:"arrow",enabled:!0,phase:"main",fn:tle,effect:nle,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function rm(t){return t.split("-")[1]}var sle={top:"auto",right:"auto",bottom:"auto",left:"auto"};function rle(t){var n=t.x,e=t.y,i=window,s=i.devicePixelRatio||1;return{x:im(n*s)/s||0,y:im(e*s)/s||0}}function o8(t){var n,e=t.popper,i=t.popperRect,s=t.placement,r=t.variation,o=t.offsets,a=t.position,l=t.gpuAcceleration,c=t.adaptive,u=t.roundOffsets,d=t.isFixed,f=o.x,p=f===void 0?0:f,m=o.y,v=m===void 0?0:m,y=typeof u=="function"?u({x:p,y:v}):{x:p,y:v};p=y.x,v=y.y;var _=o.hasOwnProperty("x"),b=o.hasOwnProperty("y"),E=Zr,x=Yr,A=window;if(c){var I=V1(e),k="clientHeight",O="clientWidth";if(I===ja(e)&&(I=Ku(e),pc(I).position!=="static"&&a==="absolute"&&(k="scrollHeight",O="scrollWidth")),I=I,s===Yr||(s===Zr||s===ca)&&r===Yg){x=la;var M=d&&I===A&&A.visualViewport?A.visualViewport.height:I[k];v-=M-i.height,v*=l?1:-1}if(s===Zr||(s===Yr||s===la)&&r===Yg){E=ca;var T=d&&I===A&&A.visualViewport?A.visualViewport.width:I[O];p-=T-i.width,p*=l?1:-1}}var P=Object.assign({position:a},c&&sle),R=u===!0?rle({x:p,y:v}):{x:p,y:v};if(p=R.x,v=R.y,l){var L;return Object.assign({},P,(L={},L[x]=b?"0":"",L[E]=_?"0":"",L.transform=(A.devicePixelRatio||1)<=1?"translate("+p+"px, "+v+"px)":"translate3d("+p+"px, "+v+"px, 0)",L))}return Object.assign({},P,(n={},n[x]=b?v+"px":"",n[E]=_?p+"px":"",n.transform="",n))}function ole(t){var n=t.state,e=t.options,i=e.gpuAcceleration,s=i===void 0?!0:i,r=e.adaptive,o=r===void 0?!0:r,a=e.roundOffsets,l=a===void 0?!0:a,c={placement:_l(n.placement),variation:rm(n.placement),popper:n.elements.popper,popperRect:n.rects.popper,gpuAcceleration:s,isFixed:n.options.strategy==="fixed"};n.modifiersData.popperOffsets!=null&&(n.styles.popper=Object.assign({},n.styles.popper,o8(Object.assign({},c,{offsets:n.modifiersData.popperOffsets,position:n.options.strategy,adaptive:o,roundOffsets:l})))),n.modifiersData.arrow!=null&&(n.styles.arrow=Object.assign({},n.styles.arrow,o8(Object.assign({},c,{offsets:n.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),n.attributes.popper=Object.assign({},n.attributes.popper,{"data-popper-placement":n.placement})}var FB={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:ole,data:{}},rv={passive:!0};function ale(t){var n=t.state,e=t.instance,i=t.options,s=i.scroll,r=s===void 0?!0:s,o=i.resize,a=o===void 0?!0:o,l=ja(n.elements.popper),c=[].concat(n.scrollParents.reference,n.scrollParents.popper);return r&&c.forEach(function(u){u.addEventListener("scroll",e.update,rv)}),a&&l.addEventListener("resize",e.update,rv),function(){r&&c.forEach(function(u){u.removeEventListener("scroll",e.update,rv)}),a&&l.removeEventListener("resize",e.update,rv)}}var NB={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:ale,data:{}},lle={left:"right",right:"left",bottom:"top",top:"bottom"};function bb(t){return t.replace(/left|right|bottom|top/g,function(n){return lle[n]})}var cle={start:"end",end:"start"};function a8(t){return t.replace(/start|end/g,function(n){return cle[n]})}function nE(t){var n=ja(t),e=n.pageXOffset,i=n.pageYOffset;return{scrollLeft:e,scrollTop:i}}function iE(t){return sm(Ku(t)).left+nE(t).scrollLeft}function ule(t){var n=ja(t),e=Ku(t),i=n.visualViewport,s=e.clientWidth,r=e.clientHeight,o=0,a=0;return i&&(s=i.width,r=i.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(o=i.offsetLeft,a=i.offsetTop)),{width:s,height:r,x:o+iE(t),y:a}}function dle(t){var n,e=Ku(t),i=nE(t),s=(n=t.ownerDocument)==null?void 0:n.body,r=eh(e.scrollWidth,e.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),o=eh(e.scrollHeight,e.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),a=-i.scrollLeft+iE(t),l=-i.scrollTop;return pc(s||e).direction==="rtl"&&(a+=eh(e.clientWidth,s?s.clientWidth:0)-r),{width:r,height:o,x:a,y:l}}function sE(t){var n=pc(t),e=n.overflow,i=n.overflowX,s=n.overflowY;return/auto|scroll|overlay|hidden/.test(e+s+i)}function VB(t){return["html","body","#document"].indexOf(El(t))>=0?t.ownerDocument.body:na(t)&&sE(t)?t:VB(Aw(t))}function hg(t,n){var e;n===void 0&&(n=[]);var i=VB(t),s=i===((e=t.ownerDocument)==null?void 0:e.body),r=ja(i),o=s?[r].concat(r.visualViewport||[],sE(i)?i:[]):i,a=n.concat(o);return s?a:a.concat(hg(Aw(o)))}function nC(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function hle(t){var n=sm(t);return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function l8(t,n){return n===RB?nC(ule(t)):nm(n)?hle(n):nC(dle(Ku(t)))}function fle(t){var n=hg(Aw(t)),e=["absolute","fixed"].indexOf(pc(t).position)>=0,i=e&&na(t)?V1(t):t;return nm(i)?n.filter(function(s){return nm(s)&&PB(s,i)&&El(s)!=="body"}):[]}function mle(t,n,e){var i=n==="clippingParents"?fle(t):[].concat(n),s=[].concat(i,[e]),r=s[0],o=s.reduce(function(a,l){var c=l8(t,l);return a.top=eh(c.top,a.top),a.right=f_(c.right,a.right),a.bottom=f_(c.bottom,a.bottom),a.left=eh(c.left,a.left),a},l8(t,r));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function DB(t){var n=t.reference,e=t.element,i=t.placement,s=i?_l(i):null,r=i?rm(i):null,o=n.x+n.width/2-e.width/2,a=n.y+n.height/2-e.height/2,l;switch(s){case Yr:l={x:o,y:n.y-e.height};break;case la:l={x:o,y:n.y+n.height};break;case ca:l={x:n.x+n.width,y:a};break;case Zr:l={x:n.x-e.width,y:a};break;default:l={x:n.x,y:n.y}}var c=s?tE(s):null;if(c!=null){var u=c==="y"?"height":"width";switch(r){case tm:l[c]=l[c]-(n[u]/2-e[u]/2);break;case Yg:l[c]=l[c]+(n[u]/2-e[u]/2);break}}return l}function Zg(t,n){n===void 0&&(n={});var e=n,i=e.placement,s=i===void 0?t.placement:i,r=e.boundary,o=r===void 0?Nae:r,a=e.rootBoundary,l=a===void 0?RB:a,c=e.elementContext,u=c===void 0?up:c,d=e.altBoundary,f=d===void 0?!1:d,p=e.padding,m=p===void 0?0:p,v=LB(typeof m!="number"?m:BB(m,N1)),y=u===up?Vae:up,_=t.rects.popper,b=t.elements[f?y:u],E=mle(nm(b)?b:b.contextElement||Ku(t.elements.popper),o,l),x=sm(t.elements.reference),A=DB({reference:x,element:_,strategy:"absolute",placement:s}),I=nC(Object.assign({},_,A)),k=u===up?I:x,O={top:E.top-k.top+v.top,bottom:k.bottom-E.bottom+v.bottom,left:E.left-k.left+v.left,right:k.right-E.right+v.right},M=t.modifiersData.offset;if(u===up&&M){var T=M[s];Object.keys(O).forEach(function(P){var R=[ca,la].indexOf(P)>=0?1:-1,L=[Yr,la].indexOf(P)>=0?"y":"x";O[P]+=T[L]*R})}return O}function ple(t,n){n===void 0&&(n={});var e=n,i=e.placement,s=e.boundary,r=e.rootBoundary,o=e.padding,a=e.flipVariations,l=e.allowedAutoPlacements,c=l===void 0?xw:l,u=rm(i),d=u?a?s8:s8.filter(function(m){return rm(m)===u}):N1,f=d.filter(function(m){return c.indexOf(m)>=0});f.length===0&&(f=d);var p=f.reduce(function(m,v){return m[v]=Zg(t,{placement:v,boundary:s,rootBoundary:r,padding:o})[_l(v)],m},{});return Object.keys(p).sort(function(m,v){return p[m]-p[v]})}function gle(t){if(_l(t)===J4)return[];var n=bb(t);return[a8(t),n,a8(n)]}function vle(t){var n=t.state,e=t.options,i=t.name;if(!n.modifiersData[i]._skip){for(var s=e.mainAxis,r=s===void 0?!0:s,o=e.altAxis,a=o===void 0?!0:o,l=e.fallbackPlacements,c=e.padding,u=e.boundary,d=e.rootBoundary,f=e.altBoundary,p=e.flipVariations,m=p===void 0?!0:p,v=e.allowedAutoPlacements,y=n.options.placement,_=_l(y),b=_===y,E=l||(b||!m?[bb(y)]:gle(y)),x=[y].concat(E).reduce(function(Pe,Fe){return Pe.concat(_l(Fe)===J4?ple(n,{placement:Fe,boundary:u,rootBoundary:d,padding:c,flipVariations:m,allowedAutoPlacements:v}):Fe)},[]),A=n.rects.reference,I=n.rects.popper,k=new Map,O=!0,M=x[0],T=0;T<x.length;T++){var P=x[T],R=_l(P),L=rm(P)===tm,F=[Yr,la].indexOf(R)>=0,B=F?"width":"height",z=Zg(n,{placement:P,boundary:u,rootBoundary:d,altBoundary:f,padding:c}),J=F?L?ca:Zr:L?la:Yr;A[B]>I[B]&&(J=bb(J));var q=bb(J),G=[];if(r&&G.push(z[R]<=0),a&&G.push(z[J]<=0,z[q]<=0),G.every(function(Pe){return Pe})){M=P,O=!1;break}k.set(P,G)}if(O)for(var S=m?3:1,V=function(Pe){var Fe=x.find(function(Ne){var ne=k.get(Ne);if(ne)return ne.slice(0,Pe).every(function(me){return me})});if(Fe)return M=Fe,"break"},re=S;re>0;re--){var U=V(re);if(U==="break")break}n.placement!==M&&(n.modifiersData[i]._skip=!0,n.placement=M,n.reset=!0)}}var ble={name:"flip",enabled:!0,phase:"main",fn:vle,requiresIfExists:["offset"],data:{_skip:!1}};function c8(t,n,e){return e===void 0&&(e={x:0,y:0}),{top:t.top-n.height-e.y,right:t.right-n.width+e.x,bottom:t.bottom-n.height+e.y,left:t.left-n.width-e.x}}function u8(t){return[Yr,ca,la,Zr].some(function(n){return t[n]>=0})}function _le(t){var n=t.state,e=t.name,i=n.rects.reference,s=n.rects.popper,r=n.modifiersData.preventOverflow,o=Zg(n,{elementContext:"reference"}),a=Zg(n,{altBoundary:!0}),l=c8(o,i),c=c8(a,s,r),u=u8(l),d=u8(c);n.modifiersData[e]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},n.attributes.popper=Object.assign({},n.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}var wle={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:_le};function yle(t,n,e){var i=_l(t),s=[Zr,Yr].indexOf(i)>=0?-1:1,r=typeof e=="function"?e(Object.assign({},n,{placement:t})):e,o=r[0],a=r[1];return o=o||0,a=(a||0)*s,[Zr,ca].indexOf(i)>=0?{x:a,y:o}:{x:o,y:a}}function Cle(t){var n=t.state,e=t.options,i=t.name,s=e.offset,r=s===void 0?[0,0]:s,o=xw.reduce(function(u,d){return u[d]=yle(d,n.rects,r),u},{}),a=o[n.placement],l=a.x,c=a.y;n.modifiersData.popperOffsets!=null&&(n.modifiersData.popperOffsets.x+=l,n.modifiersData.popperOffsets.y+=c),n.modifiersData[i]=o}var kle={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Cle};function Ele(t){var n=t.state,e=t.name;n.modifiersData[e]=DB({reference:n.rects.reference,element:n.rects.popper,strategy:"absolute",placement:n.placement})}var $B={name:"popperOffsets",enabled:!0,phase:"read",fn:Ele,data:{}};function Sle(t){return t==="x"?"y":"x"}function Tle(t){var n=t.state,e=t.options,i=t.name,s=e.mainAxis,r=s===void 0?!0:s,o=e.altAxis,a=o===void 0?!1:o,l=e.boundary,c=e.rootBoundary,u=e.altBoundary,d=e.padding,f=e.tether,p=f===void 0?!0:f,m=e.tetherOffset,v=m===void 0?0:m,y=Zg(n,{boundary:l,rootBoundary:c,padding:d,altBoundary:u}),_=_l(n.placement),b=rm(n.placement),E=!b,x=tE(_),A=Sle(x),I=n.modifiersData.popperOffsets,k=n.rects.reference,O=n.rects.popper,M=typeof v=="function"?v(Object.assign({},n.rects,{placement:n.placement})):v,T=typeof M=="number"?{mainAxis:M,altAxis:M}:Object.assign({mainAxis:0,altAxis:0},M),P=n.modifiersData.offset?n.modifiersData.offset[n.placement]:null,R={x:0,y:0};if(I){if(r){var L,F=x==="y"?Yr:Zr,B=x==="y"?la:ca,z=x==="y"?"height":"width",J=I[x],q=J+y[F],G=J-y[B],S=p?-O[z]/2:0,V=b===tm?k[z]:O[z],re=b===tm?-O[z]:-k[z],U=n.elements.arrow,Pe=p&&U?eE(U):{width:0,height:0},Fe=n.modifiersData["arrow#persistent"]?n.modifiersData["arrow#persistent"].padding:OB(),Ne=Fe[F],ne=Fe[B],me=dg(0,k[z],Pe[z]),pe=E?k[z]/2-S-me-Ne-T.mainAxis:V-me-Ne-T.mainAxis,ge=E?-k[z]/2+S+me+ne+T.mainAxis:re+me+ne+T.mainAxis,rt=n.elements.arrow&&V1(n.elements.arrow),wt=rt?x==="y"?rt.clientTop||0:rt.clientLeft||0:0,D=(L=P==null?void 0:P[x])!=null?L:0,$=J+pe-D-wt,X=J+ge-D,le=dg(p?f_(q,$):q,J,p?eh(G,X):G);I[x]=le,R[x]=le-J}if(a){var ie,be=x==="x"?Yr:Zr,Ae=x==="x"?la:ca,_e=I[A],Ee=A==="y"?"height":"width",he=_e+y[be],He=_e-y[Ae],ze=[Yr,Zr].indexOf(_)!==-1,de=(ie=P==null?void 0:P[A])!=null?ie:0,We=ze?he:_e-k[Ee]-O[Ee]-de+T.altAxis,ut=ze?_e+k[Ee]+O[Ee]-de-T.altAxis:He,Re=p&&ze?Qae(We,_e,ut):dg(p?We:he,_e,p?ut:He);I[A]=Re,R[A]=Re-_e}n.modifiersData[i]=R}}var xle={name:"preventOverflow",enabled:!0,phase:"main",fn:Tle,requiresIfExists:["offset"]};function Ale(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function Ile(t){return t===ja(t)||!na(t)?nE(t):Ale(t)}function Rle(t){var n=t.getBoundingClientRect(),e=im(n.width)/t.offsetWidth||1,i=im(n.height)/t.offsetHeight||1;return e!==1||i!==1}function Mle(t,n,e){e===void 0&&(e=!1);var i=na(n),s=na(n)&&Rle(n),r=Ku(n),o=sm(t,s),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(i||!i&&!e)&&((El(n)!=="body"||sE(r))&&(a=Ile(n)),na(n)?(l=sm(n,!0),l.x+=n.clientLeft,l.y+=n.clientTop):r&&(l.x=iE(r))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function Ple(t){var n=new Map,e=new Set,i=[];t.forEach(function(r){n.set(r.name,r)});function s(r){e.add(r.name);var o=[].concat(r.requires||[],r.requiresIfExists||[]);o.forEach(function(a){if(!e.has(a)){var l=n.get(a);l&&s(l)}}),i.push(r)}return t.forEach(function(r){e.has(r.name)||s(r)}),i}function Ole(t){var n=Ple(t);return Gae.reduce(function(e,i){return e.concat(n.filter(function(s){return s.phase===i}))},[])}function Lle(t){var n;return function(){return n||(n=new Promise(function(e){Promise.resolve().then(function(){n=void 0,e(t())})})),n}}function Ble(t){var n=t.reduce(function(e,i){var s=e[i.name];return e[i.name]=s?Object.assign({},s,i,{options:Object.assign({},s.options,i.options),data:Object.assign({},s.data,i.data)}):i,e},{});return Object.keys(n).map(function(e){return n[e]})}var d8={placement:"bottom",modifiers:[],strategy:"absolute"};function h8(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return!n.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function rE(t){t===void 0&&(t={});var n=t,e=n.defaultModifiers,i=e===void 0?[]:e,s=n.defaultOptions,r=s===void 0?d8:s;return function(o,a,l){l===void 0&&(l=r);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},d8,r),modifiersData:{},elements:{reference:o,popper:a},attributes:{},styles:{}},u=[],d=!1,f={state:c,setOptions:function(v){var y=typeof v=="function"?v(c.options):v;m(),c.options=Object.assign({},r,c.options,y),c.scrollParents={reference:nm(o)?hg(o):o.contextElement?hg(o.contextElement):[],popper:hg(a)};var _=Ole(Ble([].concat(i,c.options.modifiers)));return c.orderedModifiers=_.filter(function(b){return b.enabled}),p(),f.update()},forceUpdate:function(){if(!d){var v=c.elements,y=v.reference,_=v.popper;if(h8(y,_)){c.rects={reference:Mle(y,V1(_),c.options.strategy==="fixed"),popper:eE(_)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(O){return c.modifiersData[O.name]=Object.assign({},O.data)});for(var b=0;b<c.orderedModifiers.length;b++){if(c.reset===!0){c.reset=!1,b=-1;continue}var E=c.orderedModifiers[b],x=E.fn,A=E.options,I=A===void 0?{}:A,k=E.name;typeof x=="function"&&(c=x({state:c,options:I,name:k,instance:f})||c)}}}},update:Lle(function(){return new Promise(function(v){f.forceUpdate(),v(c)})}),destroy:function(){m(),d=!0}};if(!h8(o,a))return f;f.setOptions(l).then(function(v){!d&&l.onFirstUpdate&&l.onFirstUpdate(v)});function p(){c.orderedModifiers.forEach(function(v){var y=v.name,_=v.options,b=_===void 0?{}:_,E=v.effect;if(typeof E=="function"){var x=E({state:c,name:y,instance:f,options:b}),A=function(){};u.push(x||A)}})}function m(){u.forEach(function(v){return v()}),u=[]}return f}}rE();var Fle=[NB,$B,FB,MB];rE({defaultModifiers:Fle});var Nle=[NB,$B,FB,MB,kle,ble,xle,ile,wle],Vle=rE({defaultModifiers:Nle});const Dle=(t,n,e={})=>{const i={name:"updateState",enabled:!0,phase:"write",fn:({state:l})=>{const c=$le(l);Object.assign(o.value,c)},requires:["computeStyles"]},s=se(()=>{const{onFirstUpdate:l,placement:c,strategy:u,modifiers:d}=H(e);return{onFirstUpdate:l,placement:c||"bottom",strategy:u||"absolute",modifiers:[...d||[],i,{name:"applyStyles",enabled:!1}]}}),r=ac(),o=Se({styles:{popper:{position:H(s).strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),a=()=>{r.value&&(r.value.destroy(),r.value=void 0)};return Dt(s,l=>{const c=H(r);c&&c.setOptions(l)},{deep:!0}),Dt([t,n],([l,c])=>{a(),!(!l||!c)&&(r.value=Vle(l,c,H(s)))}),Ts(()=>{a()}),{state:se(()=>{var l;return{...((l=H(r))==null?void 0:l.state)||{}}}),styles:se(()=>H(o).styles),attributes:se(()=>H(o).attributes),update:()=>{var l;return(l=H(r))==null?void 0:l.update()},forceUpdate:()=>{var l;return(l=H(r))==null?void 0:l.forceUpdate()},instanceRef:se(()=>H(r))}};function $le(t){const n=Object.keys(t.elements),e=u_(n.map(s=>[s,t.styles[s]||{}])),i=u_(n.map(s=>[s,t.attributes[s]]));return{styles:e,attributes:i}}const zB=t=>{if(!t)return{onClick:$n,onMousedown:$n,onMouseup:$n};let n=!1,e=!1;return{onClick:o=>{n&&e&&t(o),n=e=!1},onMousedown:o=>{n=o.target===o.currentTarget},onMouseup:o=>{e=o.target===o.currentTarget}}};function f8(){let t;const n=(i,s)=>{e(),t=window.setTimeout(i,s)},e=()=>window.clearTimeout(t);return F1(()=>e()),{registerTimeout:n,cancelTimeout:e}}const m8={prefix:Math.floor(Math.random()*1e4),current:0},zle=Symbol("elIdInjection"),HB=()=>On()?jt(zle,m8):m8,fh=t=>{const n=HB(),e=X4();return se(()=>H(t)||`${e.value}-id-${n.prefix}-${n.current++}`)};let vf=[];const p8=t=>{const n=t;n.key===ur.esc&&vf.forEach(e=>e(n))},Hle=t=>{ri(()=>{vf.length===0&&document.addEventListener("keydown",p8),bi&&vf.push(t)}),Ts(()=>{vf=vf.filter(n=>n!==t),vf.length===0&&bi&&document.removeEventListener("keydown",p8)})};let g8;const UB=()=>{const t=X4(),n=HB(),e=se(()=>`${t.value}-popper-container-${n.prefix}`),i=se(()=>`#${e.value}`);return{id:e,selector:i}},Ule=t=>{const n=document.createElement("div");return n.id=t,document.body.appendChild(n),n},Wle=()=>{const{id:t,selector:n}=UB();return dw(()=>{bi&&!g8&&!document.body.querySelector(n.value)&&(g8=Ule(t.value))}),{id:t,selector:n}},jle=Ln({showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0}}),qle=({showAfter:t,hideAfter:n,autoClose:e,open:i,close:s})=>{const{registerTimeout:r}=f8(),{registerTimeout:o,cancelTimeout:a}=f8();return{onOpen:u=>{r(()=>{i(u);const d=H(e);Ms(d)&&d>0&&o(()=>{s(u)},d)},H(t))},onClose:u=>{a(),r(()=>{s(u)},H(n))}}},WB=Symbol("elForwardRef"),Kle=t=>{es(WB,{setForwardRef:e=>{t.value=e}})},Gle=t=>({mounted(n){t(n)},updated(n){t(n)},unmounted(){t(null)}}),v8={current:0},b8=Se(0),jB=2e3,_8=Symbol("elZIndexContextKey"),qB=Symbol("zIndexContextKey"),oE=t=>{const n=On()?jt(_8,v8):v8,e=t||(On()?jt(qB,void 0):void 0),i=se(()=>{const o=H(e);return Ms(o)?o:jB}),s=se(()=>i.value+b8.value),r=()=>(n.current++,b8.value=n.current,s.value);return!bi&&jt(_8),{initialZIndex:i,currentZIndex:s,nextZIndex:r}};function Yle(t){let n;function e(){if(t.value==null)return;const{selectionStart:s,selectionEnd:r,value:o}=t.value;if(s==null||r==null)return;const a=o.slice(0,Math.max(0,s)),l=o.slice(Math.max(0,r));n={selectionStart:s,selectionEnd:r,value:o,beforeTxt:a,afterTxt:l}}function i(){if(t.value==null||n==null)return;const{value:s}=t.value,{beforeTxt:r,afterTxt:o,selectionStart:a}=n;if(r==null||o==null||a==null)return;let l=s.length;if(s.endsWith(o))l=s.length-o.length;else if(s.startsWith(r))l=r.length;else{const c=r[a-1],u=s.indexOf(c,a-1);u!==-1&&(l=u+1)}t.value.setSelectionRange(l,l)}return[e,i]}const Am=Sw({type:String,values:Tw,required:!1}),KB=Symbol("size"),Zle=()=>{const t=jt(KB,{});return se(()=>H(t.size)||"")};function GB(t,{beforeFocus:n,afterFocus:e,beforeBlur:i,afterBlur:s}={}){const r=On(),{emit:o}=r,a=ac(),l=Se(!1),c=f=>{Ut(n)&&n(f)||l.value||(l.value=!0,o("focus",f),e==null||e())},u=f=>{var p;Ut(i)&&i(f)||f.relatedTarget&&((p=a.value)!=null&&p.contains(f.relatedTarget))||(l.value=!1,o("blur",f),s==null||s())},d=()=>{var f,p;(f=a.value)!=null&&f.contains(document.activeElement)&&a.value!==document.activeElement||(p=t.value)==null||p.focus()};return Dt(a,f=>{f&&f.setAttribute("tabindex","-1")}),ta(a,"focus",c,!0),ta(a,"blur",u,!0),ta(a,"click",d,!0),{isFocused:l,wrapperRef:a,handleFocus:c,handleBlur:u}}function YB({afterComposition:t,emit:n}){const e=Se(!1),i=a=>{n==null||n("compositionstart",a),e.value=!0},s=a=>{var l;n==null||n("compositionupdate",a);const c=(l=a.target)==null?void 0:l.value,u=c[c.length-1]||"";e.value=!Eae(u)},r=a=>{n==null||n("compositionend",a),e.value&&(e.value=!1,Jn(()=>t(a)))};return{isComposing:e,handleComposition:a=>{a.type==="compositionend"?r(a):s(a)},handleCompositionStart:i,handleCompositionUpdate:s,handleCompositionEnd:r}}const ZB=Symbol("emptyValuesContextKey"),Xle=["",void 0,null],Jle=void 0,Qle=Ln({emptyValues:Array,valueOnClear:{type:[String,Number,Boolean,Function],default:void 0,validator:t=>Ut(t)?!t():!t}}),ece=(t,n)=>{const e=On()?jt(ZB,Se({})):Se({}),i=se(()=>t.emptyValues||e.value.emptyValues||Xle),s=se(()=>Ut(t.valueOnClear)?t.valueOnClear():t.valueOnClear!==void 0?t.valueOnClear:Ut(e.value.valueOnClear)?e.value.valueOnClear():e.value.valueOnClear!==void 0?e.value.valueOnClear:Jle),r=o=>i.value.includes(o);return i.value.includes(s.value),{emptyValues:i,valueOnClear:s,isEmptyValue:r}},tce=Ln({ariaLabel:String,ariaOrientation:{type:String,values:["horizontal","vertical","undefined"]},ariaControls:String}),Sh=t=>mB(tce,t),XB=Symbol(),m_=Se();function Iw(t,n=void 0){const e=On()?jt(XB,m_):m_;return t?se(()=>{var i,s;return(s=(i=e.value)==null?void 0:i[t])!=null?s:n}):e}function nce(t,n){const e=Iw(),i=Zt(t,se(()=>{var a;return((a=e.value)==null?void 0:a.namespace)||ug})),s=xm(se(()=>{var a;return(a=e.value)==null?void 0:a.locale})),r=oE(se(()=>{var a;return((a=e.value)==null?void 0:a.zIndex)||jB})),o=se(()=>{var a;return H(n)||((a=e.value)==null?void 0:a.size)||""});return ice(se(()=>H(e)||{})),{ns:i,locale:s,zIndex:r,size:o}}const ice=(t,n,e=!1)=>{var i;const s=!!On(),r=s?Iw():void 0,o=(i=void 0)!=null?i:s?es:void 0;if(!o)return;const a=se(()=>{const l=H(t);return r!=null&&r.value?sce(r.value,l):l});return o(XB,a),o(TB,se(()=>a.value.locale)),o(xB,se(()=>a.value.namespace)),o(qB,se(()=>a.value.zIndex)),o(KB,{size:se(()=>a.value.size||"")}),o(ZB,se(()=>({emptyValues:a.value.emptyValues,valueOnClear:a.value.valueOnClear}))),(e||!m_.value)&&(m_.value=a.value),a},sce=(t,n)=>{const e=[...new Set([...tC(t),...tC(n)])],i={};for(const s of e)i[s]=n[s]!==void 0?n[s]:t[s];return i},w8={};var kn=(t,n)=>{const e=t.__vccOpts||t;for(const[i,s]of n)e[i]=s;return e};const rce=Ln({size:{type:Ft([Number,String])},color:{type:String}}),oce=pt({name:"ElIcon",inheritAttrs:!1}),ace=pt({...oce,props:rce,setup(t){const n=t,e=Zt("icon"),i=se(()=>{const{size:s,color:r}=n;return!s&&!r?{}:{fontSize:ic(s)?void 0:kl(s),"--color":r}});return(s,r)=>(ve(),it("i",Gr({class:H(e).b(),style:H(i)},s.$attrs),[Et(s.$slots,"default")],16))}});var lce=kn(ace,[["__file","icon.vue"]]);const yi=xs(lce),cce=["light","dark"],uce=Ln({title:{type:String,default:""},description:{type:String,default:""},type:{type:String,values:tC(h_),default:"info"},closable:{type:Boolean,default:!0},closeText:{type:String,default:""},showIcon:Boolean,center:Boolean,effect:{type:String,values:cce,default:"light"}}),dce={close:t=>t instanceof MouseEvent},hce=pt({name:"ElAlert"}),fce=pt({...hce,props:uce,emits:dce,setup(t,{emit:n}){const e=t,{Close:i}=kB,s=Ch(),r=Zt("alert"),o=Se(!0),a=se(()=>h_[e.type]),l=se(()=>[r.e("icon"),{[r.is("big")]:!!e.description||!!s.default}]),c=se(()=>({"with-description":e.description||s.default})),u=d=>{o.value=!1,n("close",d)};return(d,f)=>(ve(),At(Ua,{name:H(r).b("fade"),persisted:""},{default:Je(()=>[Qi(ot("div",{class:De([H(r).b(),H(r).m(d.type),H(r).is("center",d.center),H(r).is(d.effect)]),role:"alert"},[d.showIcon&&H(a)?(ve(),At(H(yi),{key:0,class:De(H(l))},{default:Je(()=>[(ve(),At(Cs(H(a))))]),_:1},8,["class"])):_t("v-if",!0),ot("div",{class:De(H(r).e("content"))},[d.title||d.$slots.title?(ve(),it("span",{key:0,class:De([H(r).e("title"),H(c)])},[Et(d.$slots,"title",{},()=>[Rn(vn(d.title),1)])],2)):_t("v-if",!0),d.$slots.default||d.description?(ve(),it("p",{key:1,class:De(H(r).e("description"))},[Et(d.$slots,"default",{},()=>[Rn(vn(d.description),1)])],2)):_t("v-if",!0),d.closable?(ve(),it(Wn,{key:2},[d.closeText?(ve(),it("div",{key:0,class:De([H(r).e("close-btn"),H(r).is("customed")]),onClick:u},vn(d.closeText),3)):(ve(),At(H(yi),{key:1,class:De(H(r).e("close-btn")),onClick:u},{default:Je(()=>[et(H(i))]),_:1},8,["class"]))],64)):_t("v-if",!0)],2)],2),[[ra,o.value]])]),_:3},8,["name"]))}});var mce=kn(fce,[["__file","alert.vue"]]);const pce=xs(mce),Im=Symbol("formContextKey"),mh=Symbol("formItemContextKey"),gc=(t,n={})=>{const e=Se(void 0),i=n.prop?e:IB("size"),s=n.global?e:Zle(),r=n.form?{size:void 0}:jt(Im,void 0),o=n.formItem?{size:void 0}:jt(mh,void 0);return se(()=>i.value||H(t)||(o==null?void 0:o.size)||(r==null?void 0:r.size)||s.value||"")},Gu=t=>{const n=IB("disabled"),e=jt(Im,void 0);return se(()=>n.value||H(t)||(e==null?void 0:e.disabled)||!1)},Rm=()=>{const t=jt(Im,void 0),n=jt(mh,void 0);return{form:t,formItem:n}},Rw=(t,{formItemContext:n,disableIdGeneration:e,disableIdManagement:i})=>{e||(e=Se(!1)),i||(i=Se(!1));const s=Se();let r;const o=se(()=>{var a;return!!(!(t.label||t.ariaLabel)&&n&&n.inputIds&&((a=n.inputIds)==null?void 0:a.length)<=1)});return ri(()=>{r=Dt([bo(t,"id"),e],([a,l])=>{const c=a??(l?void 0:fh().value);c!==s.value&&(n!=null&&n.removeInputId&&(s.value&&n.removeInputId(s.value),!(i!=null&&i.value)&&!l&&c&&n.addInputId(c)),s.value=c)},{immediate:!0})}),ym(()=>{r&&r(),n!=null&&n.removeInputId&&s.value&&n.removeInputId(s.value)}),{isLabeledByFormItem:o,inputId:s}},gce=Ln({size:{type:String,values:Tw},disabled:Boolean}),vce=Ln({...gce,model:Object,rules:{type:Ft(Object)},labelPosition:{type:String,values:["left","right","top"],default:"right"},requireAsteriskPosition:{type:String,values:["left","right"],default:"left"},labelWidth:{type:[String,Number],default:""},labelSuffix:{type:String,default:""},inline:Boolean,inlineMessage:Boolean,statusIcon:Boolean,showMessage:{type:Boolean,default:!0},validateOnRuleChange:{type:Boolean,default:!0},hideRequiredAsterisk:Boolean,scrollToError:Boolean,scrollIntoViewOptions:{type:[Object,Boolean]}}),bce={validate:(t,n,e)=>(Bt(t)||pn(t))&&mc(n)&&pn(e)};function _ce(){const t=Se([]),n=se(()=>{if(!t.value.length)return"0";const r=Math.max(...t.value);return r?`${r}px`:""});function e(r){const o=t.value.indexOf(r);return o===-1&&n.value,o}function i(r,o){if(r&&o){const a=e(o);t.value.splice(a,1,r)}else r&&t.value.push(r)}function s(r){const o=e(r);o>-1&&t.value.splice(o,1)}return{autoLabelWidth:n,registerLabelWidth:i,deregisterLabelWidth:s}}const ov=(t,n)=>{const e=xa(n);return e.length>0?t.filter(i=>i.prop&&e.includes(i.prop)):t},wce="ElForm",yce=pt({name:wce}),Cce=pt({...yce,props:vce,emits:bce,setup(t,{expose:n,emit:e}){const i=t,s=[],r=gc(),o=Zt("form"),a=se(()=>{const{labelPosition:E,inline:x}=i;return[o.b(),o.m(r.value||"default"),{[o.m(`label-${E}`)]:E,[o.m("inline")]:x}]}),l=E=>s.find(x=>x.prop===E),c=E=>{s.push(E)},u=E=>{E.prop&&s.splice(s.indexOf(E),1)},d=(E=[])=>{i.model&&ov(s,E).forEach(x=>x.resetField())},f=(E=[])=>{ov(s,E).forEach(x=>x.clearValidate())},p=se(()=>!!i.model),m=E=>{if(s.length===0)return[];const x=ov(s,E);return x.length?x:[]},v=async E=>_(void 0,E),y=async(E=[])=>{if(!p.value)return!1;const x=m(E);if(x.length===0)return!0;let A={};for(const I of x)try{await I.validate("")}catch(k){A={...A,...k}}return Object.keys(A).length===0?!0:Promise.reject(A)},_=async(E=[],x)=>{const A=!Ut(x);try{const I=await y(E);return I===!0&&await(x==null?void 0:x(I)),I}catch(I){if(I instanceof Error)throw I;const k=I;return i.scrollToError&&b(Object.keys(k)[0]),await(x==null?void 0:x(!1,k)),A&&Promise.reject(k)}},b=E=>{var x;const A=ov(s,E)[0];A&&((x=A.$el)==null||x.scrollIntoView(i.scrollIntoViewOptions))};return Dt(()=>i.rules,()=>{i.validateOnRuleChange&&v().catch(E=>void 0)},{deep:!0}),es(Im,Ir({...wm(i),emit:e,resetFields:d,clearValidate:f,validateField:_,getField:l,addField:c,removeField:u,..._ce()})),n({validate:v,validateField:_,resetFields:d,clearValidate:f,scrollToField:b,fields:s}),(E,x)=>(ve(),it("form",{class:De(H(a))},[Et(E.$slots,"default")],2))}});var kce=kn(Cce,[["__file","form.vue"]]);function jd(){return jd=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},jd.apply(this,arguments)}function Ece(t,n){t.prototype=Object.create(n.prototype),t.prototype.constructor=t,Xg(t,n)}function iC(t){return iC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},iC(t)}function Xg(t,n){return Xg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,s){return i.__proto__=s,i},Xg(t,n)}function Sce(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _b(t,n,e){return Sce()?_b=Reflect.construct.bind():_b=function(s,r,o){var a=[null];a.push.apply(a,r);var l=Function.bind.apply(s,a),c=new l;return o&&Xg(c,o.prototype),c},_b.apply(null,arguments)}function Tce(t){return Function.toString.call(t).indexOf("[native code]")!==-1}function sC(t){var n=typeof Map=="function"?new Map:void 0;return sC=function(i){if(i===null||!Tce(i))return i;if(typeof i!="function")throw new TypeError("Super expression must either be null or a function");if(typeof n<"u"){if(n.has(i))return n.get(i);n.set(i,s)}function s(){return _b(i,arguments,iC(this).constructor)}return s.prototype=Object.create(i.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),Xg(s,i)},sC(t)}var xce=/%[sdj%]/g,Ace=function(){};function rC(t){if(!t||!t.length)return null;var n={};return t.forEach(function(e){var i=e.field;n[i]=n[i]||[],n[i].push(e)}),n}function wo(t){for(var n=arguments.length,e=new Array(n>1?n-1:0),i=1;i<n;i++)e[i-1]=arguments[i];var s=0,r=e.length;if(typeof t=="function")return t.apply(null,e);if(typeof t=="string"){var o=t.replace(xce,function(a){if(a==="%%")return"%";if(s>=r)return a;switch(a){case"%s":return String(e[s++]);case"%d":return Number(e[s++]);case"%j":try{return JSON.stringify(e[s++])}catch{return"[Circular]"}break;default:return a}});return o}return t}function Ice(t){return t==="string"||t==="url"||t==="hex"||t==="email"||t==="date"||t==="pattern"}function Os(t,n){return!!(t==null||n==="array"&&Array.isArray(t)&&!t.length||Ice(n)&&typeof t=="string"&&!t)}function Rce(t,n,e){var i=[],s=0,r=t.length;function o(a){i.push.apply(i,a||[]),s++,s===r&&e(i)}t.forEach(function(a){n(a,o)})}function y8(t,n,e){var i=0,s=t.length;function r(o){if(o&&o.length){e(o);return}var a=i;i=i+1,a<s?n(t[a],r):e([])}r([])}function Mce(t){var n=[];return Object.keys(t).forEach(function(e){n.push.apply(n,t[e]||[])}),n}var C8=function(t){Ece(n,t);function n(e,i){var s;return s=t.call(this,"Async Validation Error")||this,s.errors=e,s.fields=i,s}return n}(sC(Error));function Pce(t,n,e,i,s){if(n.first){var r=new Promise(function(f,p){var m=function(_){return i(_),_.length?p(new C8(_,rC(_))):f(s)},v=Mce(t);y8(v,e,m)});return r.catch(function(f){return f}),r}var o=n.firstFields===!0?Object.keys(t):n.firstFields||[],a=Object.keys(t),l=a.length,c=0,u=[],d=new Promise(function(f,p){var m=function(y){if(u.push.apply(u,y),c++,c===l)return i(u),u.length?p(new C8(u,rC(u))):f(s)};a.length||(i(u),f(s)),a.forEach(function(v){var y=t[v];o.indexOf(v)!==-1?y8(y,e,m):Rce(y,e,m)})});return d.catch(function(f){return f}),d}function Oce(t){return!!(t&&t.message!==void 0)}function Lce(t,n){for(var e=t,i=0;i<n.length;i++){if(e==null)return e;e=e[n[i]]}return e}function k8(t,n){return function(e){var i;return t.fullFields?i=Lce(n,t.fullFields):i=n[e.field||t.fullField],Oce(e)?(e.field=e.field||t.fullField,e.fieldValue=i,e):{message:typeof e=="function"?e():e,fieldValue:i,field:e.field||t.fullField}}}function E8(t,n){if(n){for(var e in n)if(n.hasOwnProperty(e)){var i=n[e];typeof i=="object"&&typeof t[e]=="object"?t[e]=jd({},t[e],i):t[e]=i}}return t}var JB=function(n,e,i,s,r,o){n.required&&(!i.hasOwnProperty(n.field)||Os(e,o||n.type))&&s.push(wo(r.messages.required,n.fullField))},Bce=function(n,e,i,s,r){(/^\s+$/.test(e)||e==="")&&s.push(wo(r.messages.whitespace,n.fullField))},av,Fce=function(){if(av)return av;var t="[a-fA-F\\d:]",n=function(x){return x&&x.includeBoundaries?"(?:(?<=\\s|^)(?="+t+")|(?<="+t+")(?=\\s|$))":""},e="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",i="[a-fA-F\\d]{1,4}",s=(`
(?:
(?:`+i+":){7}(?:"+i+`|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:`+i+":){6}(?:"+e+"|:"+i+`|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:`+i+":){5}(?::"+e+"|(?::"+i+`){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:`+i+":){4}(?:(?::"+i+"){0,1}:"+e+"|(?::"+i+`){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:`+i+":){3}(?:(?::"+i+"){0,2}:"+e+"|(?::"+i+`){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:`+i+":){2}(?:(?::"+i+"){0,3}:"+e+"|(?::"+i+`){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:`+i+":){1}(?:(?::"+i+"){0,4}:"+e+"|(?::"+i+`){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::`+i+"){0,5}:"+e+"|(?::"+i+`){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`).replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),r=new RegExp("(?:^"+e+"$)|(?:^"+s+"$)"),o=new RegExp("^"+e+"$"),a=new RegExp("^"+s+"$"),l=function(x){return x&&x.exact?r:new RegExp("(?:"+n(x)+e+n(x)+")|(?:"+n(x)+s+n(x)+")","g")};l.v4=function(E){return E&&E.exact?o:new RegExp(""+n(E)+e+n(E),"g")},l.v6=function(E){return E&&E.exact?a:new RegExp(""+n(E)+s+n(E),"g")};var c="(?:(?:[a-z]+:)?//)",u="(?:\\S+(?::\\S*)?@)?",d=l.v4().source,f=l.v6().source,p="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",m="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",v="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",y="(?::\\d{2,5})?",_='(?:[/?#][^\\s"]*)?',b="(?:"+c+"|www\\.)"+u+"(?:localhost|"+d+"|"+f+"|"+p+m+v+")"+y+_;return av=new RegExp("(?:^"+b+"$)","i"),av},S8={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},zp={integer:function(n){return zp.number(n)&&parseInt(n,10)===n},float:function(n){return zp.number(n)&&!zp.integer(n)},array:function(n){return Array.isArray(n)},regexp:function(n){if(n instanceof RegExp)return!0;try{return!!new RegExp(n)}catch{return!1}},date:function(n){return typeof n.getTime=="function"&&typeof n.getMonth=="function"&&typeof n.getYear=="function"&&!isNaN(n.getTime())},number:function(n){return isNaN(n)?!1:typeof n=="number"},object:function(n){return typeof n=="object"&&!zp.array(n)},method:function(n){return typeof n=="function"},email:function(n){return typeof n=="string"&&n.length<=320&&!!n.match(S8.email)},url:function(n){return typeof n=="string"&&n.length<=2048&&!!n.match(Fce())},hex:function(n){return typeof n=="string"&&!!n.match(S8.hex)}},Nce=function(n,e,i,s,r){if(n.required&&e===void 0){JB(n,e,i,s,r);return}var o=["integer","float","array","regexp","object","method","email","number","date","url","hex"],a=n.type;o.indexOf(a)>-1?zp[a](e)||s.push(wo(r.messages.types[a],n.fullField,n.type)):a&&typeof e!==n.type&&s.push(wo(r.messages.types[a],n.fullField,n.type))},Vce=function(n,e,i,s,r){var o=typeof n.len=="number",a=typeof n.min=="number",l=typeof n.max=="number",c=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,u=e,d=null,f=typeof e=="number",p=typeof e=="string",m=Array.isArray(e);if(f?d="number":p?d="string":m&&(d="array"),!d)return!1;m&&(u=e.length),p&&(u=e.replace(c,"_").length),o?u!==n.len&&s.push(wo(r.messages[d].len,n.fullField,n.len)):a&&!l&&u<n.min?s.push(wo(r.messages[d].min,n.fullField,n.min)):l&&!a&&u>n.max?s.push(wo(r.messages[d].max,n.fullField,n.max)):a&&l&&(u<n.min||u>n.max)&&s.push(wo(r.messages[d].range,n.fullField,n.min,n.max))},nf="enum",Dce=function(n,e,i,s,r){n[nf]=Array.isArray(n[nf])?n[nf]:[],n[nf].indexOf(e)===-1&&s.push(wo(r.messages[nf],n.fullField,n[nf].join(", ")))},$ce=function(n,e,i,s,r){if(n.pattern){if(n.pattern instanceof RegExp)n.pattern.lastIndex=0,n.pattern.test(e)||s.push(wo(r.messages.pattern.mismatch,n.fullField,e,n.pattern));else if(typeof n.pattern=="string"){var o=new RegExp(n.pattern);o.test(e)||s.push(wo(r.messages.pattern.mismatch,n.fullField,e,n.pattern))}}},jn={required:JB,whitespace:Bce,type:Nce,range:Vce,enum:Dce,pattern:$ce},zce=function(n,e,i,s,r){var o=[],a=n.required||!n.required&&s.hasOwnProperty(n.field);if(a){if(Os(e,"string")&&!n.required)return i();jn.required(n,e,s,o,r,"string"),Os(e,"string")||(jn.type(n,e,s,o,r),jn.range(n,e,s,o,r),jn.pattern(n,e,s,o,r),n.whitespace===!0&&jn.whitespace(n,e,s,o,r))}i(o)},Hce=function(n,e,i,s,r){var o=[],a=n.required||!n.required&&s.hasOwnProperty(n.field);if(a){if(Os(e)&&!n.required)return i();jn.required(n,e,s,o,r),e!==void 0&&jn.type(n,e,s,o,r)}i(o)},Uce=function(n,e,i,s,r){var o=[],a=n.required||!n.required&&s.hasOwnProperty(n.field);if(a){if(e===""&&(e=void 0),Os(e)&&!n.required)return i();jn.required(n,e,s,o,r),e!==void 0&&(jn.type(n,e,s,o,r),jn.range(n,e,s,o,r))}i(o)},Wce=function(n,e,i,s,r){var o=[],a=n.required||!n.required&&s.hasOwnProperty(n.field);if(a){if(Os(e)&&!n.required)return i();jn.required(n,e,s,o,r),e!==void 0&&jn.type(n,e,s,o,r)}i(o)},jce=function(n,e,i,s,r){var o=[],a=n.required||!n.required&&s.hasOwnProperty(n.field);if(a){if(Os(e)&&!n.required)return i();jn.required(n,e,s,o,r),Os(e)||jn.type(n,e,s,o,r)}i(o)},qce=function(n,e,i,s,r){var o=[],a=n.required||!n.required&&s.hasOwnProperty(n.field);if(a){if(Os(e)&&!n.required)return i();jn.required(n,e,s,o,r),e!==void 0&&(jn.type(n,e,s,o,r),jn.range(n,e,s,o,r))}i(o)},Kce=function(n,e,i,s,r){var o=[],a=n.required||!n.required&&s.hasOwnProperty(n.field);if(a){if(Os(e)&&!n.required)return i();jn.required(n,e,s,o,r),e!==void 0&&(jn.type(n,e,s,o,r),jn.range(n,e,s,o,r))}i(o)},Gce=function(n,e,i,s,r){var o=[],a=n.required||!n.required&&s.hasOwnProperty(n.field);if(a){if(e==null&&!n.required)return i();jn.required(n,e,s,o,r,"array"),e!=null&&(jn.type(n,e,s,o,r),jn.range(n,e,s,o,r))}i(o)},Yce=function(n,e,i,s,r){var o=[],a=n.required||!n.required&&s.hasOwnProperty(n.field);if(a){if(Os(e)&&!n.required)return i();jn.required(n,e,s,o,r),e!==void 0&&jn.type(n,e,s,o,r)}i(o)},Zce="enum",Xce=function(n,e,i,s,r){var o=[],a=n.required||!n.required&&s.hasOwnProperty(n.field);if(a){if(Os(e)&&!n.required)return i();jn.required(n,e,s,o,r),e!==void 0&&jn[Zce](n,e,s,o,r)}i(o)},Jce=function(n,e,i,s,r){var o=[],a=n.required||!n.required&&s.hasOwnProperty(n.field);if(a){if(Os(e,"string")&&!n.required)return i();jn.required(n,e,s,o,r),Os(e,"string")||jn.pattern(n,e,s,o,r)}i(o)},Qce=function(n,e,i,s,r){var o=[],a=n.required||!n.required&&s.hasOwnProperty(n.field);if(a){if(Os(e,"date")&&!n.required)return i();if(jn.required(n,e,s,o,r),!Os(e,"date")){var l;e instanceof Date?l=e:l=new Date(e),jn.type(n,l,s,o,r),l&&jn.range(n,l.getTime(),s,o,r)}}i(o)},eue=function(n,e,i,s,r){var o=[],a=Array.isArray(e)?"array":typeof e;jn.required(n,e,s,o,r,a),i(o)},X2=function(n,e,i,s,r){var o=n.type,a=[],l=n.required||!n.required&&s.hasOwnProperty(n.field);if(l){if(Os(e,o)&&!n.required)return i();jn.required(n,e,s,a,r,o),Os(e,o)||jn.type(n,e,s,a,r)}i(a)},tue=function(n,e,i,s,r){var o=[],a=n.required||!n.required&&s.hasOwnProperty(n.field);if(a){if(Os(e)&&!n.required)return i();jn.required(n,e,s,o,r)}i(o)},fg={string:zce,method:Hce,number:Uce,boolean:Wce,regexp:jce,integer:qce,float:Kce,array:Gce,object:Yce,enum:Xce,pattern:Jce,date:Qce,url:X2,hex:X2,email:X2,required:eue,any:tue};function oC(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var n=JSON.parse(JSON.stringify(this));return n.clone=this.clone,n}}}var aC=oC(),D1=function(){function t(e){this.rules=null,this._messages=aC,this.define(e)}var n=t.prototype;return n.define=function(i){var s=this;if(!i)throw new Error("Cannot configure a schema with no rules");if(typeof i!="object"||Array.isArray(i))throw new Error("Rules must be an object");this.rules={},Object.keys(i).forEach(function(r){var o=i[r];s.rules[r]=Array.isArray(o)?o:[o]})},n.messages=function(i){return i&&(this._messages=E8(oC(),i)),this._messages},n.validate=function(i,s,r){var o=this;s===void 0&&(s={}),r===void 0&&(r=function(){});var a=i,l=s,c=r;if(typeof l=="function"&&(c=l,l={}),!this.rules||Object.keys(this.rules).length===0)return c&&c(null,a),Promise.resolve(a);function u(v){var y=[],_={};function b(x){if(Array.isArray(x)){var A;y=(A=y).concat.apply(A,x)}else y.push(x)}for(var E=0;E<v.length;E++)b(v[E]);y.length?(_=rC(y),c(y,_)):c(null,a)}if(l.messages){var d=this.messages();d===aC&&(d=oC()),E8(d,l.messages),l.messages=d}else l.messages=this.messages();var f={},p=l.keys||Object.keys(this.rules);p.forEach(function(v){var y=o.rules[v],_=a[v];y.forEach(function(b){var E=b;typeof E.transform=="function"&&(a===i&&(a=jd({},a)),_=a[v]=E.transform(_)),typeof E=="function"?E={validator:E}:E=jd({},E),E.validator=o.getValidationMethod(E),E.validator&&(E.field=v,E.fullField=E.fullField||v,E.type=o.getType(E),f[v]=f[v]||[],f[v].push({rule:E,value:_,source:a,field:v}))})});var m={};return Pce(f,l,function(v,y){var _=v.rule,b=(_.type==="object"||_.type==="array")&&(typeof _.fields=="object"||typeof _.defaultField=="object");b=b&&(_.required||!_.required&&v.value),_.field=v.field;function E(I,k){return jd({},k,{fullField:_.fullField+"."+I,fullFields:_.fullFields?[].concat(_.fullFields,[I]):[I]})}function x(I){I===void 0&&(I=[]);var k=Array.isArray(I)?I:[I];!l.suppressWarning&&k.length&&t.warning("async-validator:",k),k.length&&_.message!==void 0&&(k=[].concat(_.message));var O=k.map(k8(_,a));if(l.first&&O.length)return m[_.field]=1,y(O);if(!b)y(O);else{if(_.required&&!v.value)return _.message!==void 0?O=[].concat(_.message).map(k8(_,a)):l.error&&(O=[l.error(_,wo(l.messages.required,_.field))]),y(O);var M={};_.defaultField&&Object.keys(v.value).map(function(R){M[R]=_.defaultField}),M=jd({},M,v.rule.fields);var T={};Object.keys(M).forEach(function(R){var L=M[R],F=Array.isArray(L)?L:[L];T[R]=F.map(E.bind(null,R))});var P=new t(T);P.messages(l.messages),v.rule.options&&(v.rule.options.messages=l.messages,v.rule.options.error=l.error),P.validate(v.value,v.rule.options||l,function(R){var L=[];O&&O.length&&L.push.apply(L,O),R&&R.length&&L.push.apply(L,R),y(L.length?L:null)})}}var A;if(_.asyncValidator)A=_.asyncValidator(_,v.value,x,v.source,l);else if(_.validator){try{A=_.validator(_,v.value,x,v.source,l)}catch(I){console.error==null||console.error(I),l.suppressValidatorError||setTimeout(function(){throw I},0),x(I.message)}A===!0?x():A===!1?x(typeof _.message=="function"?_.message(_.fullField||_.field):_.message||(_.fullField||_.field)+" fails"):A instanceof Array?x(A):A instanceof Error&&x(A.message)}A&&A.then&&A.then(function(){return x()},function(I){return x(I)})},function(v){u(v)},a)},n.getType=function(i){if(i.type===void 0&&i.pattern instanceof RegExp&&(i.type="pattern"),typeof i.validator!="function"&&i.type&&!fg.hasOwnProperty(i.type))throw new Error(wo("Unknown rule type %s",i.type));return i.type||"string"},n.getValidationMethod=function(i){if(typeof i.validator=="function")return i.validator;var s=Object.keys(i),r=s.indexOf("message");return r!==-1&&s.splice(r,1),s.length===1&&s[0]==="required"?fg.required:fg[this.getType(i)]||void 0},t}();D1.register=function(n,e){if(typeof e!="function")throw new Error("Cannot register a validator by type, validator is not a function");fg[n]=e};D1.warning=Ace;D1.messages=aC;D1.validators=fg;const nue=["","error","validating","success"],iue=Ln({label:String,labelWidth:{type:[String,Number],default:""},labelPosition:{type:String,values:["left","right","top",""],default:""},prop:{type:Ft([String,Array])},required:{type:Boolean,default:void 0},rules:{type:Ft([Object,Array])},error:String,validateStatus:{type:String,values:nue},for:String,inlineMessage:{type:[String,Boolean],default:""},showMessage:{type:Boolean,default:!0},size:{type:String,values:Tw}}),T8="ElLabelWrap";var sue=pt({name:T8,props:{isAutoWidth:Boolean,updateAll:Boolean},setup(t,{slots:n}){const e=jt(Im,void 0),i=jt(mh);i||Fa(T8,"usage: <el-form-item><label-wrap /></el-form-item>");const s=Zt("form"),r=Se(),o=Se(0),a=()=>{var u;if((u=r.value)!=null&&u.firstElementChild){const d=window.getComputedStyle(r.value.firstElementChild).width;return Math.ceil(Number.parseFloat(d))}else return 0},l=(u="update")=>{Jn(()=>{n.default&&t.isAutoWidth&&(u==="update"?o.value=a():u==="remove"&&(e==null||e.deregisterLabelWidth(o.value)))})},c=()=>l("update");return ri(()=>{c()}),Ts(()=>{l("remove")}),R1(()=>c()),Dt(o,(u,d)=>{t.updateAll&&(e==null||e.registerLabelWidth(u,d))}),jr(se(()=>{var u,d;return(d=(u=r.value)==null?void 0:u.firstElementChild)!=null?d:null}),c),()=>{var u,d;if(!n)return null;const{isAutoWidth:f}=t;if(f){const p=e==null?void 0:e.autoLabelWidth,m=i==null?void 0:i.hasLabel,v={};if(m&&p&&p!=="auto"){const y=Math.max(0,Number.parseInt(p,10)-o.value),b=(i.labelPosition||e.labelPosition)==="left"?"marginRight":"marginLeft";y&&(v[b]=`${y}px`)}return et("div",{ref:r,class:[s.be("item","label-wrap")],style:v},[(u=n.default)==null?void 0:u.call(n)])}else return et(Wn,{ref:r},[(d=n.default)==null?void 0:d.call(n)])}}});const rue=pt({name:"ElFormItem"}),oue=pt({...rue,props:iue,setup(t,{expose:n}){const e=t,i=Ch(),s=jt(Im,void 0),r=jt(mh,void 0),o=gc(void 0,{formItem:!1}),a=Zt("form-item"),l=fh().value,c=Se([]),u=Se(""),d=koe(u,100),f=Se(""),p=Se();let m,v=!1;const y=se(()=>e.labelPosition||(s==null?void 0:s.labelPosition)),_=se(()=>{if(y.value==="top")return{};const me=kl(e.labelWidth||(s==null?void 0:s.labelWidth)||"");return me?{width:me}:{}}),b=se(()=>{if(y.value==="top"||s!=null&&s.inline)return{};if(!e.label&&!e.labelWidth&&T)return{};const me=kl(e.labelWidth||(s==null?void 0:s.labelWidth)||"");return!e.label&&!i.label?{marginLeft:me}:{}}),E=se(()=>[a.b(),a.m(o.value),a.is("error",u.value==="error"),a.is("validating",u.value==="validating"),a.is("success",u.value==="success"),a.is("required",B.value||e.required),a.is("no-asterisk",s==null?void 0:s.hideRequiredAsterisk),(s==null?void 0:s.requireAsteriskPosition)==="right"?"asterisk-right":"asterisk-left",{[a.m("feedback")]:s==null?void 0:s.statusIcon,[a.m(`label-${y.value}`)]:y.value}]),x=se(()=>mc(e.inlineMessage)?e.inlineMessage:(s==null?void 0:s.inlineMessage)||!1),A=se(()=>[a.e("error"),{[a.em("error","inline")]:x.value}]),I=se(()=>e.prop?pn(e.prop)?e.prop:e.prop.join("."):""),k=se(()=>!!(e.label||i.label)),O=se(()=>e.for||(c.value.length===1?c.value[0]:void 0)),M=se(()=>!O.value&&k.value),T=!!r,P=se(()=>{const me=s==null?void 0:s.model;if(!(!me||!e.prop))return pb(me,e.prop).value}),R=se(()=>{const{required:me}=e,pe=[];e.rules&&pe.push(...xa(e.rules));const ge=s==null?void 0:s.rules;if(ge&&e.prop){const rt=pb(ge,e.prop).value;rt&&pe.push(...xa(rt))}if(me!==void 0){const rt=pe.map((wt,D)=>[wt,D]).filter(([wt])=>Object.keys(wt).includes("required"));if(rt.length>0)for(const[wt,D]of rt)wt.required!==me&&(pe[D]={...wt,required:me});else pe.push({required:me})}return pe}),L=se(()=>R.value.length>0),F=me=>R.value.filter(ge=>!ge.trigger||!me?!0:Array.isArray(ge.trigger)?ge.trigger.includes(me):ge.trigger===me).map(({trigger:ge,...rt})=>rt),B=se(()=>R.value.some(me=>me.required)),z=se(()=>{var me;return d.value==="error"&&e.showMessage&&((me=s==null?void 0:s.showMessage)!=null?me:!0)}),J=se(()=>`${e.label||""}${(s==null?void 0:s.labelSuffix)||""}`),q=me=>{u.value=me},G=me=>{var pe,ge;const{errors:rt,fields:wt}=me;(!rt||!wt)&&console.error(me),q("error"),f.value=rt?(ge=(pe=rt==null?void 0:rt[0])==null?void 0:pe.message)!=null?ge:`${e.prop} is required`:"",s==null||s.emit("validate",e.prop,!1,f.value)},S=()=>{q("success"),s==null||s.emit("validate",e.prop,!0,"")},V=async me=>{const pe=I.value;return new D1({[pe]:me}).validate({[pe]:P.value},{firstFields:!0}).then(()=>(S(),!0)).catch(rt=>(G(rt),Promise.reject(rt)))},re=async(me,pe)=>{if(v||!e.prop)return!1;const ge=Ut(pe);if(!L.value)return pe==null||pe(!1),!1;const rt=F(me);return rt.length===0?(pe==null||pe(!0),!0):(q("validating"),V(rt).then(()=>(pe==null||pe(!0),!0)).catch(wt=>{const{fields:D}=wt;return pe==null||pe(!1,D),ge?!1:Promise.reject(D)}))},U=()=>{q(""),f.value="",v=!1},Pe=async()=>{const me=s==null?void 0:s.model;if(!me||!e.prop)return;const pe=pb(me,e.prop);v=!0,pe.value=l_(m),await Jn(),U(),v=!1},Fe=me=>{c.value.includes(me)||c.value.push(me)},Ne=me=>{c.value=c.value.filter(pe=>pe!==me)};Dt(()=>e.error,me=>{f.value=me||"",q(me?"error":"")},{immediate:!0}),Dt(()=>e.validateStatus,me=>q(me||""));const ne=Ir({...wm(e),$el:p,size:o,validateState:u,labelId:l,inputIds:c,isGroup:M,hasLabel:k,fieldValue:P,addInputId:Fe,removeInputId:Ne,resetField:Pe,clearValidate:U,validate:re});return es(mh,ne),ri(()=>{e.prop&&(s==null||s.addField(ne),m=l_(P.value))}),Ts(()=>{s==null||s.removeField(ne)}),n({size:o,validateMessage:f,validateState:u,validate:re,clearValidate:U,resetField:Pe}),(me,pe)=>{var ge;return ve(),it("div",{ref_key:"formItemRef",ref:p,class:De(H(E)),role:H(M)?"group":void 0,"aria-labelledby":H(M)?H(l):void 0},[et(H(sue),{"is-auto-width":H(_).width==="auto","update-all":((ge=H(s))==null?void 0:ge.labelWidth)==="auto"},{default:Je(()=>[H(k)?(ve(),At(Cs(H(O)?"label":"div"),{key:0,id:H(l),for:H(O),class:De(H(a).e("label")),style:Xn(H(_))},{default:Je(()=>[Et(me.$slots,"label",{label:H(J)},()=>[Rn(vn(H(J)),1)])]),_:3},8,["id","for","class","style"])):_t("v-if",!0)]),_:3},8,["is-auto-width","update-all"]),ot("div",{class:De(H(a).e("content")),style:Xn(H(b))},[Et(me.$slots,"default"),et(bL,{name:`${H(a).namespace.value}-zoom-in-top`},{default:Je(()=>[H(z)?Et(me.$slots,"error",{key:0,error:f.value},()=>[ot("div",{class:De(H(A))},vn(f.value),3)]):_t("v-if",!0)]),_:3},8,["name"])],6)],10,["role","aria-labelledby"])}}});var QB=kn(oue,[["__file","form-item.vue"]]);const eF=xs(kce,{FormItem:QB}),tF=Al(QB);let ba;const aue=`
  height:0 !important;
  visibility:hidden !important;
  ${$oe()?"":"overflow:hidden !important;"}
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
`,lue=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function cue(t){const n=window.getComputedStyle(t),e=n.getPropertyValue("box-sizing"),i=Number.parseFloat(n.getPropertyValue("padding-bottom"))+Number.parseFloat(n.getPropertyValue("padding-top")),s=Number.parseFloat(n.getPropertyValue("border-bottom-width"))+Number.parseFloat(n.getPropertyValue("border-top-width"));return{contextStyle:lue.map(o=>`${o}:${n.getPropertyValue(o)}`).join(";"),paddingSize:i,borderSize:s,boxSizing:e}}function x8(t,n=1,e){var i;ba||(ba=document.createElement("textarea"),document.body.appendChild(ba));const{paddingSize:s,borderSize:r,boxSizing:o,contextStyle:a}=cue(t);ba.setAttribute("style",`${a};${aue}`),ba.value=t.value||t.placeholder||"";let l=ba.scrollHeight;const c={};o==="border-box"?l=l+r:o==="content-box"&&(l=l-s),ba.value="";const u=ba.scrollHeight-s;if(Ms(n)){let d=u*n;o==="border-box"&&(d=d+s+r),l=Math.max(d,l),c.minHeight=`${d}px`}if(Ms(e)){let d=u*e;o==="border-box"&&(d=d+s+r),l=Math.min(d,l)}return c.height=`${l}px`,(i=ba.parentNode)==null||i.removeChild(ba),ba=void 0,c}const uue=Ln({id:{type:String,default:void 0},size:Am,disabled:Boolean,modelValue:{type:Ft([String,Number,Object]),default:""},maxlength:{type:[String,Number]},minlength:{type:[String,Number]},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:Ft([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:Boolean,clearable:Boolean,showPassword:Boolean,showWordLimit:Boolean,suffixIcon:{type:qr},prefixIcon:{type:qr},containerRole:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:Ft([Object,Array,String]),default:()=>em({})},autofocus:Boolean,rows:{type:Number,default:2},...Sh(["ariaLabel"])}),due={[kr]:t=>pn(t),input:t=>pn(t),change:t=>pn(t),focus:t=>t instanceof FocusEvent,blur:t=>t instanceof FocusEvent,clear:()=>!0,mouseleave:t=>t instanceof MouseEvent,mouseenter:t=>t instanceof MouseEvent,keydown:t=>t instanceof Event,compositionstart:t=>t instanceof CompositionEvent,compositionupdate:t=>t instanceof CompositionEvent,compositionend:t=>t instanceof CompositionEvent},hue=pt({name:"ElInput",inheritAttrs:!1}),fue=pt({...hue,props:uue,emits:due,setup(t,{expose:n,emit:e}){const i=t,s=WJ(),r=Ch(),o=se(()=>{const de={};return i.containerRole==="combobox"&&(de["aria-haspopup"]=s["aria-haspopup"],de["aria-owns"]=s["aria-owns"],de["aria-expanded"]=s["aria-expanded"]),de}),a=se(()=>[i.type==="textarea"?y.b():v.b(),v.m(p.value),v.is("disabled",m.value),v.is("exceed",U.value),{[v.b("group")]:r.prepend||r.append,[v.m("prefix")]:r.prefix||i.prefixIcon,[v.m("suffix")]:r.suffix||i.suffixIcon||i.clearable||i.showPassword,[v.bm("suffix","password-clear")]:G.value&&S.value,[v.b("hidden")]:i.type==="hidden"},s.class]),l=se(()=>[v.e("wrapper"),v.is("focus",M.value)]),c=xae({excludeKeys:se(()=>Object.keys(o.value))}),{form:u,formItem:d}=Rm(),{inputId:f}=Rw(i,{formItemContext:d}),p=gc(),m=Gu(),v=Zt("input"),y=Zt("textarea"),_=ac(),b=ac(),E=Se(!1),x=Se(!1),A=Se(),I=ac(i.inputStyle),k=se(()=>_.value||b.value),{wrapperRef:O,isFocused:M,handleFocus:T,handleBlur:P}=GB(k,{afterBlur(){var de;i.validateEvent&&((de=d==null?void 0:d.validate)==null||de.call(d,"blur").catch(We=>void 0))}}),R=se(()=>{var de;return(de=u==null?void 0:u.statusIcon)!=null?de:!1}),L=se(()=>(d==null?void 0:d.validateState)||""),F=se(()=>L.value&&EB[L.value]),B=se(()=>x.value?gae:cae),z=se(()=>[s.style]),J=se(()=>[i.inputStyle,I.value,{resize:i.resize}]),q=se(()=>fc(i.modelValue)?"":String(i.modelValue)),G=se(()=>i.clearable&&!m.value&&!i.readonly&&!!q.value&&(M.value||E.value)),S=se(()=>i.showPassword&&!m.value&&!i.readonly&&!!q.value&&(!!q.value||M.value)),V=se(()=>i.showWordLimit&&!!i.maxlength&&(i.type==="text"||i.type==="textarea")&&!m.value&&!i.readonly&&!i.showPassword),re=se(()=>q.value.length),U=se(()=>!!V.value&&re.value>Number(i.maxlength)),Pe=se(()=>!!r.suffix||!!i.suffixIcon||G.value||i.showPassword||V.value||!!L.value&&R.value),[Fe,Ne]=Yle(_);jr(b,de=>{if(pe(),!V.value||i.resize!=="both")return;const We=de[0],{width:ut}=We.contentRect;A.value={right:`calc(100% - ${ut+15+6}px)`}});const ne=()=>{const{type:de,autosize:We}=i;if(!(!bi||de!=="textarea"||!b.value))if(We){const ut=bn(We)?We.minRows:void 0,Re=bn(We)?We.maxRows:void 0,je=x8(b.value,ut,Re);I.value={overflowY:"hidden",...je},Jn(()=>{b.value.offsetHeight,I.value=je})}else I.value={minHeight:x8(b.value).minHeight}},pe=(de=>{let We=!1;return()=>{var ut;if(We||!i.autosize)return;((ut=b.value)==null?void 0:ut.offsetParent)===null||(de(),We=!0)}})(ne),ge=()=>{const de=k.value,We=i.formatter?i.formatter(q.value):q.value;!de||de.value===We||(de.value=We)},rt=async de=>{Fe();let{value:We}=de.target;if(i.formatter&&(We=i.parser?i.parser(We):We),!D.value){if(We===q.value){ge();return}e(kr,We),e("input",We),await Jn(),ge(),Ne()}},wt=de=>{e("change",de.target.value)},{isComposing:D,handleCompositionStart:$,handleCompositionUpdate:X,handleCompositionEnd:le}=YB({emit:e,afterComposition:rt}),ie=()=>{x.value=!x.value,be()},be=async()=>{var de;await Jn(),(de=k.value)==null||de.focus()},Ae=()=>{var de;return(de=k.value)==null?void 0:de.blur()},_e=de=>{E.value=!1,e("mouseleave",de)},Ee=de=>{E.value=!0,e("mouseenter",de)},he=de=>{e("keydown",de)},He=()=>{var de;(de=k.value)==null||de.select()},ze=()=>{e(kr,""),e("change",""),e("clear"),e("input","")};return Dt(()=>i.modelValue,()=>{var de;Jn(()=>ne()),i.validateEvent&&((de=d==null?void 0:d.validate)==null||de.call(d,"change").catch(We=>void 0))}),Dt(q,()=>ge()),Dt(()=>i.type,async()=>{await Jn(),ge(),ne()}),ri(()=>{!i.formatter&&i.parser,ge(),Jn(ne)}),n({input:_,textarea:b,ref:k,textareaStyle:J,autosize:bo(i,"autosize"),isComposing:D,focus:be,blur:Ae,select:He,clear:ze,resizeTextarea:ne}),(de,We)=>(ve(),it("div",Gr(H(o),{class:[H(a),{[H(v).bm("group","append")]:de.$slots.append,[H(v).bm("group","prepend")]:de.$slots.prepend}],style:H(z),role:de.containerRole,onMouseenter:Ee,onMouseleave:_e}),[_t(" input "),de.type!=="textarea"?(ve(),it(Wn,{key:0},[_t(" prepend slot "),de.$slots.prepend?(ve(),it("div",{key:0,class:De(H(v).be("group","prepend"))},[Et(de.$slots,"prepend")],2)):_t("v-if",!0),ot("div",{ref_key:"wrapperRef",ref:O,class:De(H(l))},[_t(" prefix slot "),de.$slots.prefix||de.prefixIcon?(ve(),it("span",{key:0,class:De(H(v).e("prefix"))},[ot("span",{class:De(H(v).e("prefix-inner"))},[Et(de.$slots,"prefix"),de.prefixIcon?(ve(),At(H(yi),{key:0,class:De(H(v).e("icon"))},{default:Je(()=>[(ve(),At(Cs(de.prefixIcon)))]),_:1},8,["class"])):_t("v-if",!0)],2)],2)):_t("v-if",!0),ot("input",Gr({id:H(f),ref_key:"input",ref:_,class:H(v).e("inner")},H(c),{minlength:de.minlength,maxlength:de.maxlength,type:de.showPassword?x.value?"text":"password":de.type,disabled:H(m),readonly:de.readonly,autocomplete:de.autocomplete,tabindex:de.tabindex,"aria-label":de.ariaLabel,placeholder:de.placeholder,style:de.inputStyle,form:de.form,autofocus:de.autofocus,onCompositionstart:H($),onCompositionupdate:H(X),onCompositionend:H(le),onInput:rt,onChange:wt,onKeydown:he}),null,16,["id","minlength","maxlength","type","disabled","readonly","autocomplete","tabindex","aria-label","placeholder","form","autofocus","onCompositionstart","onCompositionupdate","onCompositionend"]),_t(" suffix slot "),H(Pe)?(ve(),it("span",{key:1,class:De(H(v).e("suffix"))},[ot("span",{class:De(H(v).e("suffix-inner"))},[!H(G)||!H(S)||!H(V)?(ve(),it(Wn,{key:0},[Et(de.$slots,"suffix"),de.suffixIcon?(ve(),At(H(yi),{key:0,class:De(H(v).e("icon"))},{default:Je(()=>[(ve(),At(Cs(de.suffixIcon)))]),_:1},8,["class"])):_t("v-if",!0)],64)):_t("v-if",!0),H(G)?(ve(),At(H(yi),{key:1,class:De([H(v).e("icon"),H(v).e("clear")]),onMousedown:Ui(H($n),["prevent"]),onClick:ze},{default:Je(()=>[et(H(Ew))]),_:1},8,["class","onMousedown"])):_t("v-if",!0),H(S)?(ve(),At(H(yi),{key:2,class:De([H(v).e("icon"),H(v).e("password")]),onClick:ie},{default:Je(()=>[(ve(),At(Cs(H(B))))]),_:1},8,["class"])):_t("v-if",!0),H(V)?(ve(),it("span",{key:3,class:De(H(v).e("count"))},[ot("span",{class:De(H(v).e("count-inner"))},vn(H(re))+" / "+vn(de.maxlength),3)],2)):_t("v-if",!0),H(L)&&H(F)&&H(R)?(ve(),At(H(yi),{key:4,class:De([H(v).e("icon"),H(v).e("validateIcon"),H(v).is("loading",H(L)==="validating")])},{default:Je(()=>[(ve(),At(Cs(H(F))))]),_:1},8,["class"])):_t("v-if",!0)],2)],2)):_t("v-if",!0)],2),_t(" append slot "),de.$slots.append?(ve(),it("div",{key:1,class:De(H(v).be("group","append"))},[Et(de.$slots,"append")],2)):_t("v-if",!0)],64)):(ve(),it(Wn,{key:1},[_t(" textarea "),ot("textarea",Gr({id:H(f),ref_key:"textarea",ref:b,class:[H(y).e("inner"),H(v).is("focus",H(M))]},H(c),{minlength:de.minlength,maxlength:de.maxlength,tabindex:de.tabindex,disabled:H(m),readonly:de.readonly,autocomplete:de.autocomplete,style:H(J),"aria-label":de.ariaLabel,placeholder:de.placeholder,form:de.form,autofocus:de.autofocus,rows:de.rows,onCompositionstart:H($),onCompositionupdate:H(X),onCompositionend:H(le),onInput:rt,onFocus:H(T),onBlur:H(P),onChange:wt,onKeydown:he}),null,16,["id","minlength","maxlength","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form","autofocus","rows","onCompositionstart","onCompositionupdate","onCompositionend","onFocus","onBlur"]),H(V)?(ve(),it("span",{key:0,style:Xn(A.value),class:De(H(v).e("count"))},vn(H(re))+" / "+vn(de.maxlength),7)):_t("v-if",!0)],64))],16,["role"]))}});var mue=kn(fue,[["__file","input.vue"]]);const nF=xs(mue),sf=4,pue={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},gue=({move:t,size:n,bar:e})=>({[e.size]:n,transform:`translate${e.axis}(${t}%)`}),aE=Symbol("scrollbarContextKey"),vue=Ln({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),bue="Thumb",_ue=pt({__name:"thumb",props:vue,setup(t){const n=t,e=jt(aE),i=Zt("scrollbar");e||Fa(bue,"can not inject scrollbar context");const s=Se(),r=Se(),o=Se({}),a=Se(!1);let l=!1,c=!1,u=bi?document.onselectstart:null;const d=se(()=>pue[n.vertical?"vertical":"horizontal"]),f=se(()=>gue({size:n.size,move:n.move,bar:d.value})),p=se(()=>s.value[d.value.offset]**2/e.wrapElement[d.value.scrollSize]/n.ratio/r.value[d.value.offset]),m=I=>{var k;if(I.stopPropagation(),I.ctrlKey||[1,2].includes(I.button))return;(k=window.getSelection())==null||k.removeAllRanges(),y(I);const O=I.currentTarget;O&&(o.value[d.value.axis]=O[d.value.offset]-(I[d.value.client]-O.getBoundingClientRect()[d.value.direction]))},v=I=>{if(!r.value||!s.value||!e.wrapElement)return;const k=Math.abs(I.target.getBoundingClientRect()[d.value.direction]-I[d.value.client]),O=r.value[d.value.offset]/2,M=(k-O)*100*p.value/s.value[d.value.offset];e.wrapElement[d.value.scroll]=M*e.wrapElement[d.value.scrollSize]/100},y=I=>{I.stopImmediatePropagation(),l=!0,document.addEventListener("mousemove",_),document.addEventListener("mouseup",b),u=document.onselectstart,document.onselectstart=()=>!1},_=I=>{if(!s.value||!r.value||l===!1)return;const k=o.value[d.value.axis];if(!k)return;const O=(s.value.getBoundingClientRect()[d.value.direction]-I[d.value.client])*-1,M=r.value[d.value.offset]-k,T=(O-M)*100*p.value/s.value[d.value.offset];e.wrapElement[d.value.scroll]=T*e.wrapElement[d.value.scrollSize]/100},b=()=>{l=!1,o.value[d.value.axis]=0,document.removeEventListener("mousemove",_),document.removeEventListener("mouseup",b),A(),c&&(a.value=!1)},E=()=>{c=!1,a.value=!!n.size},x=()=>{c=!0,a.value=l};Ts(()=>{A(),document.removeEventListener("mouseup",b)});const A=()=>{document.onselectstart!==u&&(document.onselectstart=u)};return ta(bo(e,"scrollbarElement"),"mousemove",E),ta(bo(e,"scrollbarElement"),"mouseleave",x),(I,k)=>(ve(),At(Ua,{name:H(i).b("fade"),persisted:""},{default:Je(()=>[Qi(ot("div",{ref_key:"instance",ref:s,class:De([H(i).e("bar"),H(i).is(H(d).key)]),onMousedown:v},[ot("div",{ref_key:"thumb",ref:r,class:De(H(i).e("thumb")),style:Xn(H(f)),onMousedown:m},null,38)],34),[[ra,I.always||a.value]])]),_:1},8,["name"]))}});var A8=kn(_ue,[["__file","thumb.vue"]]);const wue=Ln({always:{type:Boolean,default:!0},minSize:{type:Number,required:!0}}),yue=pt({__name:"bar",props:wue,setup(t,{expose:n}){const e=t,i=jt(aE),s=Se(0),r=Se(0),o=Se(""),a=Se(""),l=Se(1),c=Se(1);return n({handleScroll:f=>{if(f){const p=f.offsetHeight-sf,m=f.offsetWidth-sf;r.value=f.scrollTop*100/p*l.value,s.value=f.scrollLeft*100/m*c.value}},update:()=>{const f=i==null?void 0:i.wrapElement;if(!f)return;const p=f.offsetHeight-sf,m=f.offsetWidth-sf,v=p**2/f.scrollHeight,y=m**2/f.scrollWidth,_=Math.max(v,e.minSize),b=Math.max(y,e.minSize);l.value=v/(p-v)/(_/(p-_)),c.value=y/(m-y)/(b/(m-b)),a.value=_+sf<p?`${_}px`:"",o.value=b+sf<m?`${b}px`:""}}),(f,p)=>(ve(),it(Wn,null,[et(A8,{move:s.value,ratio:c.value,size:o.value,always:f.always},null,8,["move","ratio","size","always"]),et(A8,{move:r.value,ratio:l.value,size:a.value,vertical:"",always:f.always},null,8,["move","ratio","size","always"])],64))}});var Cue=kn(yue,[["__file","bar.vue"]]);const kue=Ln({height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:{type:Boolean,default:!1},wrapStyle:{type:Ft([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20},id:String,role:String,...Sh(["ariaLabel","ariaOrientation"])}),Eue={scroll:({scrollTop:t,scrollLeft:n})=>[t,n].every(Ms)},Sue="ElScrollbar",Tue=pt({name:Sue}),xue=pt({...Tue,props:kue,emits:Eue,setup(t,{expose:n,emit:e}){const i=t,s=Zt("scrollbar");let r,o,a=0,l=0;const c=Se(),u=Se(),d=Se(),f=Se(),p=se(()=>{const A={};return i.height&&(A.height=kl(i.height)),i.maxHeight&&(A.maxHeight=kl(i.maxHeight)),[i.wrapStyle,A]}),m=se(()=>[i.wrapClass,s.e("wrap"),{[s.em("wrap","hidden-default")]:!i.native}]),v=se(()=>[s.e("view"),i.viewClass]),y=()=>{var A;u.value&&((A=f.value)==null||A.handleScroll(u.value),a=u.value.scrollTop,l=u.value.scrollLeft,e("scroll",{scrollTop:u.value.scrollTop,scrollLeft:u.value.scrollLeft}))};function _(A,I){bn(A)?u.value.scrollTo(A):Ms(A)&&Ms(I)&&u.value.scrollTo(A,I)}const b=A=>{Ms(A)&&(u.value.scrollTop=A)},E=A=>{Ms(A)&&(u.value.scrollLeft=A)},x=()=>{var A;(A=f.value)==null||A.update()};return Dt(()=>i.noresize,A=>{A?(r==null||r(),o==null||o()):({stop:r}=jr(d,x),o=ta("resize",x))},{immediate:!0}),Dt(()=>[i.maxHeight,i.height],()=>{i.native||Jn(()=>{var A;x(),u.value&&((A=f.value)==null||A.handleScroll(u.value))})}),es(aE,Ir({scrollbarElement:c,wrapElement:u})),LO(()=>{u.value.scrollTop=a,u.value.scrollLeft=l}),ri(()=>{i.native||Jn(()=>{x()})}),R1(()=>x()),n({wrapRef:u,update:x,scrollTo:_,setScrollTop:b,setScrollLeft:E,handleScroll:y}),(A,I)=>(ve(),it("div",{ref_key:"scrollbarRef",ref:c,class:De(H(s).b())},[ot("div",{ref_key:"wrapRef",ref:u,class:De(H(m)),style:Xn(H(p)),onScroll:y},[(ve(),At(Cs(A.tag),{id:A.id,ref_key:"resizeRef",ref:d,class:De(H(v)),style:Xn(A.viewStyle),role:A.role,"aria-label":A.ariaLabel,"aria-orientation":A.ariaOrientation},{default:Je(()=>[Et(A.$slots,"default")]),_:3},8,["id","class","style","role","aria-label","aria-orientation"]))],38),A.native?_t("v-if",!0):(ve(),At(Cue,{key:0,ref_key:"barRef",ref:f,always:A.always,"min-size":A.minSize},null,8,["always","min-size"]))],2))}});var Aue=kn(xue,[["__file","scrollbar.vue"]]);const lE=xs(Aue),cE=Symbol("popper"),iF=Symbol("popperContent"),Iue=["dialog","grid","group","listbox","menu","navigation","tooltip","tree"],sF=Ln({role:{type:String,values:Iue,default:"tooltip"}}),Rue=pt({name:"ElPopper",inheritAttrs:!1}),Mue=pt({...Rue,props:sF,setup(t,{expose:n}){const e=t,i=Se(),s=Se(),r=Se(),o=Se(),a=se(()=>e.role),l={triggerRef:i,popperInstanceRef:s,contentRef:r,referenceRef:o,role:a};return n(l),es(cE,l),(c,u)=>Et(c.$slots,"default")}});var Pue=kn(Mue,[["__file","popper.vue"]]);const rF=Ln({arrowOffset:{type:Number,default:5}}),Oue=pt({name:"ElPopperArrow",inheritAttrs:!1}),Lue=pt({...Oue,props:rF,setup(t,{expose:n}){const e=t,i=Zt("popper"),{arrowOffset:s,arrowRef:r,arrowStyle:o}=jt(iF,void 0);return Dt(()=>e.arrowOffset,a=>{s.value=a}),Ts(()=>{r.value=void 0}),n({arrowRef:r}),(a,l)=>(ve(),it("span",{ref_key:"arrowRef",ref:r,class:De(H(i).e("arrow")),style:Xn(H(o)),"data-popper-arrow":""},null,6))}});var Bue=kn(Lue,[["__file","arrow.vue"]]);const Fue="ElOnlyChild",Nue=pt({name:Fue,setup(t,{slots:n,attrs:e}){var i;const s=jt(WB),r=Gle((i=s==null?void 0:s.setForwardRef)!=null?i:$n);return()=>{var o;const a=(o=n.default)==null?void 0:o.call(n,e);if(!a||a.length>1)return null;const l=oF(a);return l?Qi(hc(l,e),[[r]]):null}}});function oF(t){if(!t)return null;const n=t;for(const e of n){if(bn(e))switch(e.type){case lr:continue;case Cm:case"svg":return I8(e);case Wn:return oF(e.children);default:return e}return I8(e)}return null}function I8(t){const n=Zt("only-child");return et("span",{class:n.e("content")},[t])}const aF=Ln({virtualRef:{type:Ft(Object)},virtualTriggering:Boolean,onMouseenter:{type:Ft(Function)},onMouseleave:{type:Ft(Function)},onClick:{type:Ft(Function)},onKeydown:{type:Ft(Function)},onFocus:{type:Ft(Function)},onBlur:{type:Ft(Function)},onContextmenu:{type:Ft(Function)},id:String,open:Boolean}),Vue=pt({name:"ElPopperTrigger",inheritAttrs:!1}),Due=pt({...Vue,props:aF,setup(t,{expose:n}){const e=t,{role:i,triggerRef:s}=jt(cE,void 0);Kle(s);const r=se(()=>a.value?e.id:void 0),o=se(()=>{if(i&&i.value==="tooltip")return e.open&&e.id?e.id:void 0}),a=se(()=>{if(i&&i.value!=="tooltip")return i.value}),l=se(()=>a.value?`${e.open}`:void 0);let c;const u=["onMouseenter","onMouseleave","onClick","onKeydown","onFocus","onBlur","onContextmenu"];return ri(()=>{Dt(()=>e.virtualRef,d=>{d&&(s.value=nc(d))},{immediate:!0}),Dt(s,(d,f)=>{c==null||c(),c=void 0,Iu(d)&&(u.forEach(p=>{var m;const v=e[p];v&&(d.addEventListener(p.slice(2).toLowerCase(),v),(m=f==null?void 0:f.removeEventListener)==null||m.call(f,p.slice(2).toLowerCase(),v))}),c=Dt([r,o,a,l],p=>{["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach((m,v)=>{fc(p[v])?d.removeAttribute(m):d.setAttribute(m,p[v])})},{immediate:!0})),Iu(f)&&["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach(p=>f.removeAttribute(p))},{immediate:!0})}),Ts(()=>{if(c==null||c(),c=void 0,s.value&&Iu(s.value)){const d=s.value;u.forEach(f=>{const p=e[f];p&&d.removeEventListener(f.slice(2).toLowerCase(),p)}),s.value=void 0}}),n({triggerRef:s}),(d,f)=>d.virtualTriggering?_t("v-if",!0):(ve(),At(H(Nue),Gr({key:0},d.$attrs,{"aria-controls":H(r),"aria-describedby":H(o),"aria-expanded":H(l),"aria-haspopup":H(a)}),{default:Je(()=>[Et(d.$slots,"default")]),_:3},16,["aria-controls","aria-describedby","aria-expanded","aria-haspopup"]))}});var $ue=kn(Due,[["__file","trigger.vue"]]);const J2="focus-trap.focus-after-trapped",Q2="focus-trap.focus-after-released",zue="focus-trap.focusout-prevented",R8={cancelable:!0,bubbles:!1},Hue={cancelable:!0,bubbles:!1},M8="focusAfterTrapped",P8="focusAfterReleased",lF=Symbol("elFocusTrap"),uE=Se(),Mw=Se(0),dE=Se(0);let lv=0;const cF=t=>{const n=[],e=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const s=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||s?NodeFilter.FILTER_SKIP:i.tabIndex>=0||i===document.activeElement?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;e.nextNode();)n.push(e.currentNode);return n},O8=(t,n)=>{for(const e of t)if(!Uue(e,n))return e},Uue=(t,n)=>{if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(n&&t===n)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1},Wue=t=>{const n=cF(t),e=O8(n,t),i=O8(n.reverse(),t);return[e,i]},jue=t=>t instanceof HTMLInputElement&&"select"in t,uu=(t,n)=>{if(t&&t.focus){const e=document.activeElement;t.focus({preventScroll:!0}),dE.value=window.performance.now(),t!==e&&jue(t)&&n&&t.select()}};function L8(t,n){const e=[...t],i=t.indexOf(n);return i!==-1&&e.splice(i,1),e}const que=()=>{let t=[];return{push:i=>{const s=t[0];s&&i!==s&&s.pause(),t=L8(t,i),t.unshift(i)},remove:i=>{var s,r;t=L8(t,i),(r=(s=t[0])==null?void 0:s.resume)==null||r.call(s)}}},Kue=(t,n=!1)=>{const e=document.activeElement;for(const i of t)if(uu(i,n),document.activeElement!==e)return},B8=que(),Gue=()=>Mw.value>dE.value,cv=()=>{uE.value="pointer",Mw.value=window.performance.now()},F8=()=>{uE.value="keyboard",Mw.value=window.performance.now()},Yue=()=>(ri(()=>{lv===0&&(document.addEventListener("mousedown",cv),document.addEventListener("touchstart",cv),document.addEventListener("keydown",F8)),lv++}),Ts(()=>{lv--,lv<=0&&(document.removeEventListener("mousedown",cv),document.removeEventListener("touchstart",cv),document.removeEventListener("keydown",F8))}),{focusReason:uE,lastUserFocusTimestamp:Mw,lastAutomatedFocusTimestamp:dE}),uv=t=>new CustomEvent(zue,{...Hue,detail:t}),Zue=pt({name:"ElFocusTrap",inheritAttrs:!1,props:{loop:Boolean,trapped:Boolean,focusTrapEl:Object,focusStartEl:{type:[Object,String],default:"first"}},emits:[M8,P8,"focusin","focusout","focusout-prevented","release-requested"],setup(t,{emit:n}){const e=Se();let i,s;const{focusReason:r}=Yue();Hle(m=>{t.trapped&&!o.paused&&n("release-requested",m)});const o={paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}},a=m=>{if(!t.loop&&!t.trapped||o.paused)return;const{key:v,altKey:y,ctrlKey:_,metaKey:b,currentTarget:E,shiftKey:x}=m,{loop:A}=t,I=v===ur.tab&&!y&&!_&&!b,k=document.activeElement;if(I&&k){const O=E,[M,T]=Wue(O);if(M&&T){if(!x&&k===T){const R=uv({focusReason:r.value});n("focusout-prevented",R),R.defaultPrevented||(m.preventDefault(),A&&uu(M,!0))}else if(x&&[M,O].includes(k)){const R=uv({focusReason:r.value});n("focusout-prevented",R),R.defaultPrevented||(m.preventDefault(),A&&uu(T,!0))}}else if(k===O){const R=uv({focusReason:r.value});n("focusout-prevented",R),R.defaultPrevented||m.preventDefault()}}};es(lF,{focusTrapRef:e,onKeydown:a}),Dt(()=>t.focusTrapEl,m=>{m&&(e.value=m)},{immediate:!0}),Dt([e],([m],[v])=>{m&&(m.addEventListener("keydown",a),m.addEventListener("focusin",u),m.addEventListener("focusout",d)),v&&(v.removeEventListener("keydown",a),v.removeEventListener("focusin",u),v.removeEventListener("focusout",d))});const l=m=>{n(M8,m)},c=m=>n(P8,m),u=m=>{const v=H(e);if(!v)return;const y=m.target,_=m.relatedTarget,b=y&&v.contains(y);t.trapped||_&&v.contains(_)||(i=_),b&&n("focusin",m),!o.paused&&t.trapped&&(b?s=y:uu(s,!0))},d=m=>{const v=H(e);if(!(o.paused||!v))if(t.trapped){const y=m.relatedTarget;!fc(y)&&!v.contains(y)&&setTimeout(()=>{if(!o.paused&&t.trapped){const _=uv({focusReason:r.value});n("focusout-prevented",_),_.defaultPrevented||uu(s,!0)}},0)}else{const y=m.target;y&&v.contains(y)||n("focusout",m)}};async function f(){await Jn();const m=H(e);if(m){B8.push(o);const v=m.contains(document.activeElement)?i:document.activeElement;if(i=v,!m.contains(v)){const _=new Event(J2,R8);m.addEventListener(J2,l),m.dispatchEvent(_),_.defaultPrevented||Jn(()=>{let b=t.focusStartEl;pn(b)||(uu(b),document.activeElement!==b&&(b="first")),b==="first"&&Kue(cF(m),!0),(document.activeElement===v||b==="container")&&uu(m)})}}}function p(){const m=H(e);if(m){m.removeEventListener(J2,l);const v=new CustomEvent(Q2,{...R8,detail:{focusReason:r.value}});m.addEventListener(Q2,c),m.dispatchEvent(v),!v.defaultPrevented&&(r.value=="keyboard"||!Gue()||m.contains(document.activeElement))&&uu(i??document.body),m.removeEventListener(Q2,c),B8.remove(o)}}return ri(()=>{t.trapped&&f(),Dt(()=>t.trapped,m=>{m?f():p()})}),Ts(()=>{t.trapped&&p(),e.value&&(e.value.removeEventListener("keydown",a),e.value.removeEventListener("focusin",u),e.value.removeEventListener("focusout",d),e.value=void 0)}),{onKeydown:a}}});function Xue(t,n,e,i,s,r){return Et(t.$slots,"default",{handleKeydown:t.onKeydown})}var uF=kn(Zue,[["render",Xue],["__file","focus-trap.vue"]]);const Jue=["fixed","absolute"],Que=Ln({boundariesPadding:{type:Number,default:0},fallbackPlacements:{type:Ft(Array),default:void 0},gpuAcceleration:{type:Boolean,default:!0},offset:{type:Number,default:12},placement:{type:String,values:xw,default:"bottom"},popperOptions:{type:Ft(Object),default:()=>({})},strategy:{type:String,values:Jue,default:"absolute"}}),dF=Ln({...Que,id:String,style:{type:Ft([String,Array,Object])},className:{type:Ft([String,Array,Object])},effect:{type:Ft(String),default:"dark"},visible:Boolean,enterable:{type:Boolean,default:!0},pure:Boolean,focusOnShow:{type:Boolean,default:!1},trapping:{type:Boolean,default:!1},popperClass:{type:Ft([String,Array,Object])},popperStyle:{type:Ft([String,Array,Object])},referenceEl:{type:Ft(Object)},triggerTargetEl:{type:Ft(Object)},stopPopperMouseEvent:{type:Boolean,default:!0},virtualTriggering:Boolean,zIndex:Number,...Sh(["ariaLabel"])}),ede={mouseenter:t=>t instanceof MouseEvent,mouseleave:t=>t instanceof MouseEvent,focus:()=>!0,blur:()=>!0,close:()=>!0},tde=(t,n=[])=>{const{placement:e,strategy:i,popperOptions:s}=t,r={placement:e,strategy:i,...s,modifiers:[...ide(t),...n]};return sde(r,s==null?void 0:s.modifiers),r},nde=t=>{if(bi)return nc(t)};function ide(t){const{offset:n,gpuAcceleration:e,fallbackPlacements:i}=t;return[{name:"offset",options:{offset:[0,n??12]}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5,fallbackPlacements:i}},{name:"computeStyles",options:{gpuAcceleration:e}}]}function sde(t,n){n&&(t.modifiers=[...t.modifiers,...n??[]])}const rde=0,ode=t=>{const{popperInstanceRef:n,contentRef:e,triggerRef:i,role:s}=jt(cE,void 0),r=Se(),o=Se(),a=se(()=>({name:"eventListeners",enabled:!!t.visible})),l=se(()=>{var _;const b=H(r),E=(_=H(o))!=null?_:rde;return{name:"arrow",enabled:!hB(b),options:{element:b,padding:E}}}),c=se(()=>({onFirstUpdate:()=>{m()},...tde(t,[H(l),H(a)])})),u=se(()=>nde(t.referenceEl)||H(i)),{attributes:d,state:f,styles:p,update:m,forceUpdate:v,instanceRef:y}=Dle(u,e,c);return Dt(y,_=>n.value=_),ri(()=>{Dt(()=>{var _;return(_=H(u))==null?void 0:_.getBoundingClientRect()},()=>{m()})}),{attributes:d,arrowRef:r,contentRef:e,instanceRef:y,state:f,styles:p,role:s,forceUpdate:v,update:m}},ade=(t,{attributes:n,styles:e,role:i})=>{const{nextZIndex:s}=oE(),r=Zt("popper"),o=se(()=>H(n).popper),a=Se(Ms(t.zIndex)?t.zIndex:s()),l=se(()=>[r.b(),r.is("pure",t.pure),r.is(t.effect),t.popperClass]),c=se(()=>[{zIndex:H(a)},H(e).popper,t.popperStyle||{}]),u=se(()=>i.value==="dialog"?"false":void 0),d=se(()=>H(e).arrow||{});return{ariaModal:u,arrowStyle:d,contentAttrs:o,contentClass:l,contentStyle:c,contentZIndex:a,updateZIndex:()=>{a.value=Ms(t.zIndex)?t.zIndex:s()}}},lde=(t,n)=>{const e=Se(!1),i=Se();return{focusStartRef:i,trapped:e,onFocusAfterReleased:c=>{var u;((u=c.detail)==null?void 0:u.focusReason)!=="pointer"&&(i.value="first",n("blur"))},onFocusAfterTrapped:()=>{n("focus")},onFocusInTrap:c=>{t.visible&&!e.value&&(c.target&&(i.value=c.target),e.value=!0)},onFocusoutPrevented:c=>{t.trapping||(c.detail.focusReason==="pointer"&&c.preventDefault(),e.value=!1)},onReleaseRequested:()=>{e.value=!1,n("close")}}},cde=pt({name:"ElPopperContent"}),ude=pt({...cde,props:dF,emits:ede,setup(t,{expose:n,emit:e}){const i=t,{focusStartRef:s,trapped:r,onFocusAfterReleased:o,onFocusAfterTrapped:a,onFocusInTrap:l,onFocusoutPrevented:c,onReleaseRequested:u}=lde(i,e),{attributes:d,arrowRef:f,contentRef:p,styles:m,instanceRef:v,role:y,update:_}=ode(i),{ariaModal:b,arrowStyle:E,contentAttrs:x,contentClass:A,contentStyle:I,updateZIndex:k}=ade(i,{styles:m,attributes:d,role:y}),O=jt(mh,void 0),M=Se();es(iF,{arrowStyle:E,arrowRef:f,arrowOffset:M}),O&&es(mh,{...O,addInputId:$n,removeInputId:$n});let T;const P=(L=!0)=>{_(),L&&k()},R=()=>{P(!1),i.visible&&i.focusOnShow?r.value=!0:i.visible===!1&&(r.value=!1)};return ri(()=>{Dt(()=>i.triggerTargetEl,(L,F)=>{T==null||T(),T=void 0;const B=H(L||p.value),z=H(F||p.value);Iu(B)&&(T=Dt([y,()=>i.ariaLabel,b,()=>i.id],J=>{["role","aria-label","aria-modal","id"].forEach((q,G)=>{fc(J[G])?B.removeAttribute(q):B.setAttribute(q,J[G])})},{immediate:!0})),z!==B&&Iu(z)&&["role","aria-label","aria-modal","id"].forEach(J=>{z.removeAttribute(J)})},{immediate:!0}),Dt(()=>i.visible,R,{immediate:!0})}),Ts(()=>{T==null||T(),T=void 0}),n({popperContentRef:p,popperInstanceRef:v,updatePopper:P,contentStyle:I}),(L,F)=>(ve(),it("div",Gr({ref_key:"contentRef",ref:p},H(x),{style:H(I),class:H(A),tabindex:"-1",onMouseenter:B=>L.$emit("mouseenter",B),onMouseleave:B=>L.$emit("mouseleave",B)}),[et(H(uF),{trapped:H(r),"trap-on-focus-in":!0,"focus-trap-el":H(p),"focus-start-el":H(s),onFocusAfterTrapped:H(a),onFocusAfterReleased:H(o),onFocusin:H(l),onFocusoutPrevented:H(c),onReleaseRequested:H(u)},{default:Je(()=>[Et(L.$slots,"default")]),_:3},8,["trapped","focus-trap-el","focus-start-el","onFocusAfterTrapped","onFocusAfterReleased","onFocusin","onFocusoutPrevented","onReleaseRequested"])],16,["onMouseenter","onMouseleave"]))}});var dde=kn(ude,[["__file","content.vue"]]);const hde=xs(Pue),hE=Symbol("elTooltip"),fE=Ln({...jle,...dF,appendTo:{type:Ft([String,Object])},content:{type:String,default:""},rawContent:Boolean,persistent:Boolean,visible:{type:Ft(Boolean),default:null},transition:String,teleported:{type:Boolean,default:!0},disabled:Boolean,...Sh(["ariaLabel"])}),hF=Ln({...aF,disabled:Boolean,trigger:{type:Ft([String,Array]),default:"hover"},triggerKeys:{type:Ft(Array),default:()=>[ur.enter,ur.space]}}),{useModelToggleProps:fde,useModelToggleEmits:mde,useModelToggle:pde}=AB("visible"),gde=Ln({...sF,...fde,...fE,...hF,...rF,showArrow:{type:Boolean,default:!0}}),vde=[...mde,"before-show","before-hide","show","hide","open","close"],bde=(t,n)=>Bt(t)?t.includes(n):t===n,rf=(t,n,e)=>i=>{bde(H(t),n)&&e(i)},_de=pt({name:"ElTooltipTrigger"}),wde=pt({..._de,props:hF,setup(t,{expose:n}){const e=t,i=Zt("tooltip"),{controlled:s,id:r,open:o,onOpen:a,onClose:l,onToggle:c}=jt(hE,void 0),u=Se(null),d=()=>{if(H(s)||e.disabled)return!0},f=bo(e,"trigger"),p=Xl(d,rf(f,"hover",a)),m=Xl(d,rf(f,"hover",l)),v=Xl(d,rf(f,"click",x=>{x.button===0&&c(x)})),y=Xl(d,rf(f,"focus",a)),_=Xl(d,rf(f,"focus",l)),b=Xl(d,rf(f,"contextmenu",x=>{x.preventDefault(),c(x)})),E=Xl(d,x=>{const{code:A}=x;e.triggerKeys.includes(A)&&(x.preventDefault(),c(x))});return n({triggerRef:u}),(x,A)=>(ve(),At(H($ue),{id:H(r),"virtual-ref":x.virtualRef,open:H(o),"virtual-triggering":x.virtualTriggering,class:De(H(i).e("trigger")),onBlur:H(_),onClick:H(v),onContextmenu:H(b),onFocus:H(y),onMouseenter:H(p),onMouseleave:H(m),onKeydown:H(E)},{default:Je(()=>[Et(x.$slots,"default")]),_:3},8,["id","virtual-ref","open","virtual-triggering","class","onBlur","onClick","onContextmenu","onFocus","onMouseenter","onMouseleave","onKeydown"]))}});var yde=kn(wde,[["__file","trigger.vue"]]);const Cde=Ln({to:{type:Ft([String,Object]),required:!0},disabled:Boolean}),kde=pt({__name:"teleport",props:Cde,setup(t){return(n,e)=>n.disabled?Et(n.$slots,"default",{key:0}):(ve(),At(aQ,{key:1,to:n.to},[Et(n.$slots,"default")],8,["to"]))}});var Ede=kn(kde,[["__file","teleport.vue"]]);const fF=xs(Ede),Sde=pt({name:"ElTooltipContent",inheritAttrs:!1}),Tde=pt({...Sde,props:fE,setup(t,{expose:n}){const e=t,{selector:i}=UB(),s=Zt("tooltip"),r=Se(null);let o;const{controlled:a,id:l,open:c,trigger:u,onClose:d,onOpen:f,onShow:p,onHide:m,onBeforeShow:v,onBeforeHide:y}=jt(hE,void 0),_=se(()=>e.transition||`${s.namespace.value}-fade-in-linear`),b=se(()=>e.persistent);Ts(()=>{o==null||o()});const E=se(()=>H(b)?!0:H(c)),x=se(()=>e.disabled?!1:H(c)),A=se(()=>e.appendTo||i.value),I=se(()=>{var z;return(z=e.style)!=null?z:{}}),k=se(()=>!H(c)),O=()=>{m()},M=()=>{if(H(a))return!0},T=Xl(M,()=>{e.enterable&&H(u)==="hover"&&f()}),P=Xl(M,()=>{H(u)==="hover"&&d()}),R=()=>{var z,J;(J=(z=r.value)==null?void 0:z.updatePopper)==null||J.call(z),v==null||v()},L=()=>{y==null||y()},F=()=>{p(),o=Soe(se(()=>{var z;return(z=r.value)==null?void 0:z.popperContentRef}),()=>{if(H(a))return;H(u)!=="hover"&&d()})},B=()=>{e.virtualTriggering||d()};return Dt(()=>H(c),z=>{z||o==null||o()},{flush:"post"}),Dt(()=>e.content,()=>{var z,J;(J=(z=r.value)==null?void 0:z.updatePopper)==null||J.call(z)}),n({contentRef:r}),(z,J)=>(ve(),At(H(fF),{disabled:!z.teleported,to:H(A)},{default:Je(()=>[et(Ua,{name:H(_),onAfterLeave:O,onBeforeEnter:R,onAfterEnter:F,onBeforeLeave:L},{default:Je(()=>[H(E)?Qi((ve(),At(H(dde),Gr({key:0,id:H(l),ref_key:"contentRef",ref:r},z.$attrs,{"aria-label":z.ariaLabel,"aria-hidden":H(k),"boundaries-padding":z.boundariesPadding,"fallback-placements":z.fallbackPlacements,"gpu-acceleration":z.gpuAcceleration,offset:z.offset,placement:z.placement,"popper-options":z.popperOptions,strategy:z.strategy,effect:z.effect,enterable:z.enterable,pure:z.pure,"popper-class":z.popperClass,"popper-style":[z.popperStyle,H(I)],"reference-el":z.referenceEl,"trigger-target-el":z.triggerTargetEl,visible:H(x),"z-index":z.zIndex,onMouseenter:H(T),onMouseleave:H(P),onBlur:B,onClose:H(d)}),{default:Je(()=>[Et(z.$slots,"default")]),_:3},16,["id","aria-label","aria-hidden","boundaries-padding","fallback-placements","gpu-acceleration","offset","placement","popper-options","strategy","effect","enterable","pure","popper-class","popper-style","reference-el","trigger-target-el","visible","z-index","onMouseenter","onMouseleave","onClose"])),[[ra,H(x)]]):_t("v-if",!0)]),_:3},8,["name"])]),_:3},8,["disabled","to"]))}});var xde=kn(Tde,[["__file","content.vue"]]);const Ade=pt({name:"ElTooltip"}),Ide=pt({...Ade,props:gde,emits:vde,setup(t,{expose:n,emit:e}){const i=t;Wle();const s=fh(),r=Se(),o=Se(),a=()=>{var _;const b=H(r);b&&((_=b.popperInstanceRef)==null||_.update())},l=Se(!1),c=Se(),{show:u,hide:d,hasUpdateHandler:f}=pde({indicator:l,toggleReason:c}),{onOpen:p,onClose:m}=qle({showAfter:bo(i,"showAfter"),hideAfter:bo(i,"hideAfter"),autoClose:bo(i,"autoClose"),open:u,close:d}),v=se(()=>mc(i.visible)&&!f.value);es(hE,{controlled:v,id:s,open:ow(l),trigger:bo(i,"trigger"),onOpen:_=>{p(_)},onClose:_=>{m(_)},onToggle:_=>{H(l)?m(_):p(_)},onShow:()=>{e("show",c.value)},onHide:()=>{e("hide",c.value)},onBeforeShow:()=>{e("before-show",c.value)},onBeforeHide:()=>{e("before-hide",c.value)},updatePopper:a}),Dt(()=>i.disabled,_=>{_&&l.value&&(l.value=!1)});const y=_=>{var b,E;const x=(E=(b=o.value)==null?void 0:b.contentRef)==null?void 0:E.popperContentRef,A=(_==null?void 0:_.relatedTarget)||document.activeElement;return x&&x.contains(A)};return BO(()=>l.value&&d()),n({popperRef:r,contentRef:o,isFocusInsideContent:y,updatePopper:a,onOpen:p,onClose:m,hide:d}),(_,b)=>(ve(),At(H(hde),{ref_key:"popperRef",ref:r,role:_.role},{default:Je(()=>[et(yde,{disabled:_.disabled,trigger:_.trigger,"trigger-keys":_.triggerKeys,"virtual-ref":_.virtualRef,"virtual-triggering":_.virtualTriggering},{default:Je(()=>[_.$slots.default?Et(_.$slots,"default",{key:0}):_t("v-if",!0)]),_:3},8,["disabled","trigger","trigger-keys","virtual-ref","virtual-triggering"]),et(xde,{ref_key:"contentRef",ref:o,"aria-label":_.ariaLabel,"boundaries-padding":_.boundariesPadding,content:_.content,disabled:_.disabled,effect:_.effect,enterable:_.enterable,"fallback-placements":_.fallbackPlacements,"hide-after":_.hideAfter,"gpu-acceleration":_.gpuAcceleration,offset:_.offset,persistent:_.persistent,"popper-class":_.popperClass,"popper-style":_.popperStyle,placement:_.placement,"popper-options":_.popperOptions,pure:_.pure,"raw-content":_.rawContent,"reference-el":_.referenceEl,"trigger-target-el":_.triggerTargetEl,"show-after":_.showAfter,strategy:_.strategy,teleported:_.teleported,transition:_.transition,"virtual-triggering":_.virtualTriggering,"z-index":_.zIndex,"append-to":_.appendTo},{default:Je(()=>[Et(_.$slots,"content",{},()=>[_.rawContent?(ve(),it("span",{key:0,innerHTML:_.content},null,8,["innerHTML"])):(ve(),it("span",{key:1},vn(_.content),1))]),_.showArrow?(ve(),At(H(Bue),{key:0,"arrow-offset":_.arrowOffset},null,8,["arrow-offset"])):_t("v-if",!0)]),_:3},8,["aria-label","boundaries-padding","content","disabled","effect","enterable","fallback-placements","hide-after","gpu-acceleration","offset","persistent","popper-class","popper-style","placement","popper-options","pure","raw-content","reference-el","trigger-target-el","show-after","strategy","teleported","transition","virtual-triggering","z-index","append-to"])]),_:3},8,["role"]))}});var Rde=kn(Ide,[["__file","tooltip.vue"]]);const $1=xs(Rde),Mde=Ln({value:{type:[String,Number],default:""},max:{type:Number,default:99},isDot:Boolean,hidden:Boolean,type:{type:String,values:["primary","success","warning","info","danger"],default:"danger"},showZero:{type:Boolean,default:!0},color:String,badgeStyle:{type:Ft([String,Object,Array])},offset:{type:Ft(Array),default:[0,0]},badgeClass:{type:String}}),Pde=pt({name:"ElBadge"}),Ode=pt({...Pde,props:Mde,setup(t,{expose:n}){const e=t,i=Zt("badge"),s=se(()=>e.isDot?"":Ms(e.value)&&Ms(e.max)?e.max<e.value?`${e.max}+`:e.value===0&&!e.showZero?"":`${e.value}`:`${e.value}`),r=se(()=>{var o,a,l,c,u;return[{backgroundColor:e.color,marginRight:kl(-((a=(o=e.offset)==null?void 0:o[0])!=null?a:0)),marginTop:kl((c=(l=e.offset)==null?void 0:l[1])!=null?c:0)},(u=e.badgeStyle)!=null?u:{}]});return n({content:s}),(o,a)=>(ve(),it("div",{class:De(H(i).b())},[Et(o.$slots,"default"),et(Ua,{name:`${H(i).namespace.value}-zoom-in-center`,persisted:""},{default:Je(()=>[Qi(ot("sup",{class:De([H(i).e("content"),H(i).em("content",o.type),H(i).is("fixed",!!o.$slots.default),H(i).is("dot",o.isDot),o.badgeClass]),style:Xn(H(r)),textContent:vn(H(s))},null,14,["textContent"]),[[ra,!o.hidden&&(H(s)||o.isDot)]])]),_:1},8,["name"])],2))}});var Lde=kn(Ode,[["__file","badge.vue"]]);const Bde=xs(Lde),mF=Symbol("buttonGroupContextKey"),Fde=(t,n)=>{cg({from:"type.text",replacement:"link",version:"3.0.0",scope:"props",ref:"https://element-plus.org/en-US/component/button.html#button-attributes"},se(()=>t.type==="text"));const e=jt(mF,void 0),i=Iw("button"),{form:s}=Rm(),r=gc(se(()=>e==null?void 0:e.size)),o=Gu(),a=Se(),l=Ch(),c=se(()=>t.type||(e==null?void 0:e.type)||""),u=se(()=>{var m,v,y;return(y=(v=t.autoInsertSpace)!=null?v:(m=i.value)==null?void 0:m.autoInsertSpace)!=null?y:!1}),d=se(()=>t.tag==="button"?{ariaDisabled:o.value||t.loading,disabled:o.value||t.loading,autofocus:t.autofocus,type:t.nativeType}:{}),f=se(()=>{var m;const v=(m=l.default)==null?void 0:m.call(l);if(u.value&&(v==null?void 0:v.length)===1){const y=v[0];if((y==null?void 0:y.type)===Cm){const _=y.children;return new RegExp("^\\p{Unified_Ideograph}{2}$","u").test(_.trim())}}return!1});return{_disabled:o,_size:r,_type:c,_ref:a,_props:d,shouldAddSpace:f,handleClick:m=>{if(o.value||t.loading){m.stopPropagation();return}t.nativeType==="reset"&&(s==null||s.resetFields()),n("click",m)}}},Nde=["default","primary","success","warning","info","danger","text",""],Vde=["button","submit","reset"],lC=Ln({size:Am,disabled:Boolean,type:{type:String,values:Nde,default:""},icon:{type:qr},nativeType:{type:String,values:Vde,default:"button"},loading:Boolean,loadingIcon:{type:qr,default:()=>Y4},plain:Boolean,text:Boolean,link:Boolean,bg:Boolean,autofocus:Boolean,round:Boolean,circle:Boolean,color:String,dark:Boolean,autoInsertSpace:{type:Boolean,default:void 0},tag:{type:Ft([String,Object]),default:"button"}}),Dde={click:t=>t instanceof MouseEvent};function Zs(t,n){$de(t)&&(t="100%");var e=zde(t);return t=n===360?t:Math.min(n,Math.max(0,parseFloat(t))),e&&(t=parseInt(String(t*n),10)/100),Math.abs(t-n)<1e-6?1:(n===360?t=(t<0?t%n+n:t%n)/parseFloat(String(n)):t=t%n/parseFloat(String(n)),t)}function dv(t){return Math.min(1,Math.max(0,t))}function $de(t){return typeof t=="string"&&t.indexOf(".")!==-1&&parseFloat(t)===1}function zde(t){return typeof t=="string"&&t.indexOf("%")!==-1}function pF(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function hv(t){return t<=1?"".concat(Number(t)*100,"%"):t}function qd(t){return t.length===1?"0"+t:String(t)}function Hde(t,n,e){return{r:Zs(t,255)*255,g:Zs(n,255)*255,b:Zs(e,255)*255}}function N8(t,n,e){t=Zs(t,255),n=Zs(n,255),e=Zs(e,255);var i=Math.max(t,n,e),s=Math.min(t,n,e),r=0,o=0,a=(i+s)/2;if(i===s)o=0,r=0;else{var l=i-s;switch(o=a>.5?l/(2-i-s):l/(i+s),i){case t:r=(n-e)/l+(n<e?6:0);break;case n:r=(e-t)/l+2;break;case e:r=(t-n)/l+4;break}r/=6}return{h:r,s:o,l:a}}function e5(t,n,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?t+(n-t)*(6*e):e<1/2?n:e<2/3?t+(n-t)*(2/3-e)*6:t}function Ude(t,n,e){var i,s,r;if(t=Zs(t,360),n=Zs(n,100),e=Zs(e,100),n===0)s=e,r=e,i=e;else{var o=e<.5?e*(1+n):e+n-e*n,a=2*e-o;i=e5(a,o,t+1/3),s=e5(a,o,t),r=e5(a,o,t-1/3)}return{r:i*255,g:s*255,b:r*255}}function V8(t,n,e){t=Zs(t,255),n=Zs(n,255),e=Zs(e,255);var i=Math.max(t,n,e),s=Math.min(t,n,e),r=0,o=i,a=i-s,l=i===0?0:a/i;if(i===s)r=0;else{switch(i){case t:r=(n-e)/a+(n<e?6:0);break;case n:r=(e-t)/a+2;break;case e:r=(t-n)/a+4;break}r/=6}return{h:r,s:l,v:o}}function Wde(t,n,e){t=Zs(t,360)*6,n=Zs(n,100),e=Zs(e,100);var i=Math.floor(t),s=t-i,r=e*(1-n),o=e*(1-s*n),a=e*(1-(1-s)*n),l=i%6,c=[e,o,r,r,a,e][l],u=[a,e,e,o,r,r][l],d=[r,r,a,e,e,o][l];return{r:c*255,g:u*255,b:d*255}}function D8(t,n,e,i){var s=[qd(Math.round(t).toString(16)),qd(Math.round(n).toString(16)),qd(Math.round(e).toString(16))];return i&&s[0].startsWith(s[0].charAt(1))&&s[1].startsWith(s[1].charAt(1))&&s[2].startsWith(s[2].charAt(1))?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0):s.join("")}function jde(t,n,e,i,s){var r=[qd(Math.round(t).toString(16)),qd(Math.round(n).toString(16)),qd(Math.round(e).toString(16)),qd(qde(i))];return s&&r[0].startsWith(r[0].charAt(1))&&r[1].startsWith(r[1].charAt(1))&&r[2].startsWith(r[2].charAt(1))&&r[3].startsWith(r[3].charAt(1))?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0)+r[3].charAt(0):r.join("")}function qde(t){return Math.round(parseFloat(t)*255).toString(16)}function $8(t){return lo(t)/255}function lo(t){return parseInt(t,16)}function Kde(t){return{r:t>>16,g:(t&65280)>>8,b:t&255}}var cC={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function Gde(t){var n={r:0,g:0,b:0},e=1,i=null,s=null,r=null,o=!1,a=!1;return typeof t=="string"&&(t=Xde(t)),typeof t=="object"&&(Hl(t.r)&&Hl(t.g)&&Hl(t.b)?(n=Hde(t.r,t.g,t.b),o=!0,a=String(t.r).substr(-1)==="%"?"prgb":"rgb"):Hl(t.h)&&Hl(t.s)&&Hl(t.v)?(i=hv(t.s),s=hv(t.v),n=Wde(t.h,i,s),o=!0,a="hsv"):Hl(t.h)&&Hl(t.s)&&Hl(t.l)&&(i=hv(t.s),r=hv(t.l),n=Ude(t.h,i,r),o=!0,a="hsl"),Object.prototype.hasOwnProperty.call(t,"a")&&(e=t.a)),e=pF(e),{ok:o,format:t.format||a,r:Math.min(255,Math.max(n.r,0)),g:Math.min(255,Math.max(n.g,0)),b:Math.min(255,Math.max(n.b,0)),a:e}}var Yde="[-\\+]?\\d+%?",Zde="[-\\+]?\\d*\\.\\d+%?",Su="(?:".concat(Zde,")|(?:").concat(Yde,")"),t5="[\\s|\\(]+(".concat(Su,")[,|\\s]+(").concat(Su,")[,|\\s]+(").concat(Su,")\\s*\\)?"),n5="[\\s|\\(]+(".concat(Su,")[,|\\s]+(").concat(Su,")[,|\\s]+(").concat(Su,")[,|\\s]+(").concat(Su,")\\s*\\)?"),wa={CSS_UNIT:new RegExp(Su),rgb:new RegExp("rgb"+t5),rgba:new RegExp("rgba"+n5),hsl:new RegExp("hsl"+t5),hsla:new RegExp("hsla"+n5),hsv:new RegExp("hsv"+t5),hsva:new RegExp("hsva"+n5),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function Xde(t){if(t=t.trim().toLowerCase(),t.length===0)return!1;var n=!1;if(cC[t])t=cC[t],n=!0;else if(t==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var e=wa.rgb.exec(t);return e?{r:e[1],g:e[2],b:e[3]}:(e=wa.rgba.exec(t),e?{r:e[1],g:e[2],b:e[3],a:e[4]}:(e=wa.hsl.exec(t),e?{h:e[1],s:e[2],l:e[3]}:(e=wa.hsla.exec(t),e?{h:e[1],s:e[2],l:e[3],a:e[4]}:(e=wa.hsv.exec(t),e?{h:e[1],s:e[2],v:e[3]}:(e=wa.hsva.exec(t),e?{h:e[1],s:e[2],v:e[3],a:e[4]}:(e=wa.hex8.exec(t),e?{r:lo(e[1]),g:lo(e[2]),b:lo(e[3]),a:$8(e[4]),format:n?"name":"hex8"}:(e=wa.hex6.exec(t),e?{r:lo(e[1]),g:lo(e[2]),b:lo(e[3]),format:n?"name":"hex"}:(e=wa.hex4.exec(t),e?{r:lo(e[1]+e[1]),g:lo(e[2]+e[2]),b:lo(e[3]+e[3]),a:$8(e[4]+e[4]),format:n?"name":"hex8"}:(e=wa.hex3.exec(t),e?{r:lo(e[1]+e[1]),g:lo(e[2]+e[2]),b:lo(e[3]+e[3]),format:n?"name":"hex"}:!1)))))))))}function Hl(t){return!!wa.CSS_UNIT.exec(String(t))}var gF=function(){function t(n,e){n===void 0&&(n=""),e===void 0&&(e={});var i;if(n instanceof t)return n;typeof n=="number"&&(n=Kde(n)),this.originalInput=n;var s=Gde(n);this.originalInput=n,this.r=s.r,this.g=s.g,this.b=s.b,this.a=s.a,this.roundA=Math.round(100*this.a)/100,this.format=(i=e.format)!==null&&i!==void 0?i:s.format,this.gradientType=e.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=s.ok}return t.prototype.isDark=function(){return this.getBrightness()<128},t.prototype.isLight=function(){return!this.isDark()},t.prototype.getBrightness=function(){var n=this.toRgb();return(n.r*299+n.g*587+n.b*114)/1e3},t.prototype.getLuminance=function(){var n=this.toRgb(),e,i,s,r=n.r/255,o=n.g/255,a=n.b/255;return r<=.03928?e=r/12.92:e=Math.pow((r+.055)/1.055,2.4),o<=.03928?i=o/12.92:i=Math.pow((o+.055)/1.055,2.4),a<=.03928?s=a/12.92:s=Math.pow((a+.055)/1.055,2.4),.2126*e+.7152*i+.0722*s},t.prototype.getAlpha=function(){return this.a},t.prototype.setAlpha=function(n){return this.a=pF(n),this.roundA=Math.round(100*this.a)/100,this},t.prototype.isMonochrome=function(){var n=this.toHsl().s;return n===0},t.prototype.toHsv=function(){var n=V8(this.r,this.g,this.b);return{h:n.h*360,s:n.s,v:n.v,a:this.a}},t.prototype.toHsvString=function(){var n=V8(this.r,this.g,this.b),e=Math.round(n.h*360),i=Math.round(n.s*100),s=Math.round(n.v*100);return this.a===1?"hsv(".concat(e,", ").concat(i,"%, ").concat(s,"%)"):"hsva(".concat(e,", ").concat(i,"%, ").concat(s,"%, ").concat(this.roundA,")")},t.prototype.toHsl=function(){var n=N8(this.r,this.g,this.b);return{h:n.h*360,s:n.s,l:n.l,a:this.a}},t.prototype.toHslString=function(){var n=N8(this.r,this.g,this.b),e=Math.round(n.h*360),i=Math.round(n.s*100),s=Math.round(n.l*100);return this.a===1?"hsl(".concat(e,", ").concat(i,"%, ").concat(s,"%)"):"hsla(".concat(e,", ").concat(i,"%, ").concat(s,"%, ").concat(this.roundA,")")},t.prototype.toHex=function(n){return n===void 0&&(n=!1),D8(this.r,this.g,this.b,n)},t.prototype.toHexString=function(n){return n===void 0&&(n=!1),"#"+this.toHex(n)},t.prototype.toHex8=function(n){return n===void 0&&(n=!1),jde(this.r,this.g,this.b,this.a,n)},t.prototype.toHex8String=function(n){return n===void 0&&(n=!1),"#"+this.toHex8(n)},t.prototype.toHexShortString=function(n){return n===void 0&&(n=!1),this.a===1?this.toHexString(n):this.toHex8String(n)},t.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},t.prototype.toRgbString=function(){var n=Math.round(this.r),e=Math.round(this.g),i=Math.round(this.b);return this.a===1?"rgb(".concat(n,", ").concat(e,", ").concat(i,")"):"rgba(".concat(n,", ").concat(e,", ").concat(i,", ").concat(this.roundA,")")},t.prototype.toPercentageRgb=function(){var n=function(e){return"".concat(Math.round(Zs(e,255)*100),"%")};return{r:n(this.r),g:n(this.g),b:n(this.b),a:this.a}},t.prototype.toPercentageRgbString=function(){var n=function(e){return Math.round(Zs(e,255)*100)};return this.a===1?"rgb(".concat(n(this.r),"%, ").concat(n(this.g),"%, ").concat(n(this.b),"%)"):"rgba(".concat(n(this.r),"%, ").concat(n(this.g),"%, ").concat(n(this.b),"%, ").concat(this.roundA,")")},t.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var n="#"+D8(this.r,this.g,this.b,!1),e=0,i=Object.entries(cC);e<i.length;e++){var s=i[e],r=s[0],o=s[1];if(n===o)return r}return!1},t.prototype.toString=function(n){var e=!!n;n=n??this.format;var i=!1,s=this.a<1&&this.a>=0,r=!e&&s&&(n.startsWith("hex")||n==="name");return r?n==="name"&&this.a===0?this.toName():this.toRgbString():(n==="rgb"&&(i=this.toRgbString()),n==="prgb"&&(i=this.toPercentageRgbString()),(n==="hex"||n==="hex6")&&(i=this.toHexString()),n==="hex3"&&(i=this.toHexString(!0)),n==="hex4"&&(i=this.toHex8String(!0)),n==="hex8"&&(i=this.toHex8String()),n==="name"&&(i=this.toName()),n==="hsl"&&(i=this.toHslString()),n==="hsv"&&(i=this.toHsvString()),i||this.toHexString())},t.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},t.prototype.clone=function(){return new t(this.toString())},t.prototype.lighten=function(n){n===void 0&&(n=10);var e=this.toHsl();return e.l+=n/100,e.l=dv(e.l),new t(e)},t.prototype.brighten=function(n){n===void 0&&(n=10);var e=this.toRgb();return e.r=Math.max(0,Math.min(255,e.r-Math.round(255*-(n/100)))),e.g=Math.max(0,Math.min(255,e.g-Math.round(255*-(n/100)))),e.b=Math.max(0,Math.min(255,e.b-Math.round(255*-(n/100)))),new t(e)},t.prototype.darken=function(n){n===void 0&&(n=10);var e=this.toHsl();return e.l-=n/100,e.l=dv(e.l),new t(e)},t.prototype.tint=function(n){return n===void 0&&(n=10),this.mix("white",n)},t.prototype.shade=function(n){return n===void 0&&(n=10),this.mix("black",n)},t.prototype.desaturate=function(n){n===void 0&&(n=10);var e=this.toHsl();return e.s-=n/100,e.s=dv(e.s),new t(e)},t.prototype.saturate=function(n){n===void 0&&(n=10);var e=this.toHsl();return e.s+=n/100,e.s=dv(e.s),new t(e)},t.prototype.greyscale=function(){return this.desaturate(100)},t.prototype.spin=function(n){var e=this.toHsl(),i=(e.h+n)%360;return e.h=i<0?360+i:i,new t(e)},t.prototype.mix=function(n,e){e===void 0&&(e=50);var i=this.toRgb(),s=new t(n).toRgb(),r=e/100,o={r:(s.r-i.r)*r+i.r,g:(s.g-i.g)*r+i.g,b:(s.b-i.b)*r+i.b,a:(s.a-i.a)*r+i.a};return new t(o)},t.prototype.analogous=function(n,e){n===void 0&&(n=6),e===void 0&&(e=30);var i=this.toHsl(),s=360/e,r=[this];for(i.h=(i.h-(s*n>>1)+720)%360;--n;)i.h=(i.h+s)%360,r.push(new t(i));return r},t.prototype.complement=function(){var n=this.toHsl();return n.h=(n.h+180)%360,new t(n)},t.prototype.monochromatic=function(n){n===void 0&&(n=6);for(var e=this.toHsv(),i=e.h,s=e.s,r=e.v,o=[],a=1/n;n--;)o.push(new t({h:i,s,v:r})),r=(r+a)%1;return o},t.prototype.splitcomplement=function(){var n=this.toHsl(),e=n.h;return[this,new t({h:(e+72)%360,s:n.s,l:n.l}),new t({h:(e+216)%360,s:n.s,l:n.l})]},t.prototype.onBackground=function(n){var e=this.toRgb(),i=new t(n).toRgb(),s=e.a+i.a*(1-e.a);return new t({r:(e.r*e.a+i.r*i.a*(1-e.a))/s,g:(e.g*e.a+i.g*i.a*(1-e.a))/s,b:(e.b*e.a+i.b*i.a*(1-e.a))/s,a:s})},t.prototype.triad=function(){return this.polyad(3)},t.prototype.tetrad=function(){return this.polyad(4)},t.prototype.polyad=function(n){for(var e=this.toHsl(),i=e.h,s=[this],r=360/n,o=1;o<n;o++)s.push(new t({h:(i+o*r)%360,s:e.s,l:e.l}));return s},t.prototype.equals=function(n){return this.toRgbString()===new t(n).toRgbString()},t}();function Jc(t,n=20){return t.mix("#141414",n).toString()}function Jde(t){const n=Gu(),e=Zt("button");return se(()=>{let i={},s=t.color;if(s){const r=s.match(/var\((.*?)\)/);r&&(s=window.getComputedStyle(window.document.documentElement).getPropertyValue(r[1]));const o=new gF(s),a=t.dark?o.tint(20).toString():Jc(o,20);if(t.plain)i=e.cssVarBlock({"bg-color":t.dark?Jc(o,90):o.tint(90).toString(),"text-color":s,"border-color":t.dark?Jc(o,50):o.tint(50).toString(),"hover-text-color":`var(${e.cssVarName("color-white")})`,"hover-bg-color":s,"hover-border-color":s,"active-bg-color":a,"active-text-color":`var(${e.cssVarName("color-white")})`,"active-border-color":a}),n.value&&(i[e.cssVarBlockName("disabled-bg-color")]=t.dark?Jc(o,90):o.tint(90).toString(),i[e.cssVarBlockName("disabled-text-color")]=t.dark?Jc(o,50):o.tint(50).toString(),i[e.cssVarBlockName("disabled-border-color")]=t.dark?Jc(o,80):o.tint(80).toString());else{const l=t.dark?Jc(o,30):o.tint(30).toString(),c=o.isDark()?`var(${e.cssVarName("color-white")})`:`var(${e.cssVarName("color-black")})`;if(i=e.cssVarBlock({"bg-color":s,"text-color":c,"border-color":s,"hover-bg-color":l,"hover-text-color":c,"hover-border-color":l,"active-bg-color":a,"active-border-color":a}),n.value){const u=t.dark?Jc(o,50):o.tint(50).toString();i[e.cssVarBlockName("disabled-bg-color")]=u,i[e.cssVarBlockName("disabled-text-color")]=t.dark?"rgba(255, 255, 255, 0.5)":`var(${e.cssVarName("color-white")})`,i[e.cssVarBlockName("disabled-border-color")]=u}}}return i})}const Qde=pt({name:"ElButton"}),ehe=pt({...Qde,props:lC,emits:Dde,setup(t,{expose:n,emit:e}){const i=t,s=Jde(i),r=Zt("button"),{_ref:o,_size:a,_type:l,_disabled:c,_props:u,shouldAddSpace:d,handleClick:f}=Fde(i,e),p=se(()=>[r.b(),r.m(l.value),r.m(a.value),r.is("disabled",c.value),r.is("loading",i.loading),r.is("plain",i.plain),r.is("round",i.round),r.is("circle",i.circle),r.is("text",i.text),r.is("link",i.link),r.is("has-bg",i.bg)]);return n({ref:o,size:a,type:l,disabled:c,shouldAddSpace:d}),(m,v)=>(ve(),At(Cs(m.tag),Gr({ref_key:"_ref",ref:o},H(u),{class:H(p),style:H(s),onClick:H(f)}),{default:Je(()=>[m.loading?(ve(),it(Wn,{key:0},[m.$slots.loading?Et(m.$slots,"loading",{key:0}):(ve(),At(H(yi),{key:1,class:De(H(r).is("loading"))},{default:Je(()=>[(ve(),At(Cs(m.loadingIcon)))]),_:1},8,["class"]))],64)):m.icon||m.$slots.icon?(ve(),At(H(yi),{key:1},{default:Je(()=>[m.icon?(ve(),At(Cs(m.icon),{key:0})):Et(m.$slots,"icon",{key:1})]),_:3})):_t("v-if",!0),m.$slots.default?(ve(),it("span",{key:2,class:De({[H(r).em("text","expand")]:H(d)})},[Et(m.$slots,"default")],2)):_t("v-if",!0)]),_:3},16,["class","style","onClick"]))}});var the=kn(ehe,[["__file","button.vue"]]);const nhe={size:lC.size,type:lC.type},ihe=pt({name:"ElButtonGroup"}),she=pt({...ihe,props:nhe,setup(t){const n=t;es(mF,Ir({size:bo(n,"size"),type:bo(n,"type")}));const e=Zt("button");return(i,s)=>(ve(),it("div",{class:De(H(e).b("group"))},[Et(i.$slots,"default")],2))}});var vF=kn(she,[["__file","button-group.vue"]]);const z1=xs(the,{ButtonGroup:vF});Al(vF);var dp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function bF(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}const du=new Map;if(bi){let t;document.addEventListener("mousedown",n=>t=n),document.addEventListener("mouseup",n=>{if(t){for(const e of du.values())for(const{documentHandler:i}of e)i(n,t);t=void 0}})}function z8(t,n){let e=[];return Array.isArray(n.arg)?e=n.arg:Iu(n.arg)&&e.push(n.arg),function(i,s){const r=n.instance.popperRef,o=i.target,a=s==null?void 0:s.target,l=!n||!n.instance,c=!o||!a,u=t.contains(o)||t.contains(a),d=t===o,f=e.length&&e.some(m=>m==null?void 0:m.contains(o))||e.length&&e.includes(a),p=r&&(r.contains(o)||r.contains(a));l||c||u||d||f||p||n.value(i,s)}}const mE={beforeMount(t,n){du.has(t)||du.set(t,[]),du.get(t).push({documentHandler:z8(t,n),bindingFn:n.value})},updated(t,n){du.has(t)||du.set(t,[]);const e=du.get(t),i=e.findIndex(r=>r.bindingFn===n.oldValue),s={documentHandler:z8(t,n),bindingFn:n.value};i>=0?e.splice(i,1,s):e.push(s)},unmounted(t){du.delete(t)}};var H8=!1,zd,uC,dC,wb,yb,_F,Cb,hC,fC,mC,wF,pC,gC,yF,CF;function Br(){if(!H8){H8=!0;var t=navigator.userAgent,n=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(t),e=/(Mac OS X)|(Windows)|(Linux)/.exec(t);if(pC=/\b(iPhone|iP[ao]d)/.exec(t),gC=/\b(iP[ao]d)/.exec(t),mC=/Android/i.exec(t),yF=/FBAN\/\w+;/i.exec(t),CF=/Mobile/i.exec(t),wF=!!/Win64/.exec(t),n){zd=n[1]?parseFloat(n[1]):n[5]?parseFloat(n[5]):NaN,zd&&document&&document.documentMode&&(zd=document.documentMode);var i=/(?:Trident\/(\d+.\d+))/.exec(t);_F=i?parseFloat(i[1])+4:zd,uC=n[2]?parseFloat(n[2]):NaN,dC=n[3]?parseFloat(n[3]):NaN,wb=n[4]?parseFloat(n[4]):NaN,wb?(n=/(?:Chrome\/(\d+\.\d+))/.exec(t),yb=n&&n[1]?parseFloat(n[1]):NaN):yb=NaN}else zd=uC=dC=yb=wb=NaN;if(e){if(e[1]){var s=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(t);Cb=s?parseFloat(s[1].replace("_",".")):!0}else Cb=!1;hC=!!e[2],fC=!!e[3]}else Cb=hC=fC=!1}}var vC={ie:function(){return Br()||zd},ieCompatibilityMode:function(){return Br()||_F>zd},ie64:function(){return vC.ie()&&wF},firefox:function(){return Br()||uC},opera:function(){return Br()||dC},webkit:function(){return Br()||wb},safari:function(){return vC.webkit()},chrome:function(){return Br()||yb},windows:function(){return Br()||hC},osx:function(){return Br()||Cb},linux:function(){return Br()||fC},iphone:function(){return Br()||pC},mobile:function(){return Br()||pC||gC||mC||CF},nativeApp:function(){return Br()||yF},android:function(){return Br()||mC},ipad:function(){return Br()||gC}},rhe=vC,fv=!!(typeof window<"u"&&window.document&&window.document.createElement),ohe={canUseDOM:fv,canUseWorkers:typeof Worker<"u",canUseEventListeners:fv&&!!(window.addEventListener||window.attachEvent),canUseViewport:fv&&!!window.screen,isInWorker:!fv},kF=ohe,EF;kF.canUseDOM&&(EF=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);function ahe(t,n){if(!kF.canUseDOM||n&&!("addEventListener"in document))return!1;var e="on"+t,i=e in document;if(!i){var s=document.createElement("div");s.setAttribute(e,"return;"),i=typeof s[e]=="function"}return!i&&EF&&t==="wheel"&&(i=document.implementation.hasFeature("Events.wheel","3.0")),i}var lhe=ahe,U8=10,W8=40,j8=800;function SF(t){var n=0,e=0,i=0,s=0;return"detail"in t&&(e=t.detail),"wheelDelta"in t&&(e=-t.wheelDelta/120),"wheelDeltaY"in t&&(e=-t.wheelDeltaY/120),"wheelDeltaX"in t&&(n=-t.wheelDeltaX/120),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(n=e,e=0),i=n*U8,s=e*U8,"deltaY"in t&&(s=t.deltaY),"deltaX"in t&&(i=t.deltaX),(i||s)&&t.deltaMode&&(t.deltaMode==1?(i*=W8,s*=W8):(i*=j8,s*=j8)),i&&!n&&(n=i<1?-1:1),s&&!e&&(e=s<1?-1:1),{spinX:n,spinY:e,pixelX:i,pixelY:s}}SF.getEventType=function(){return rhe.firefox()?"DOMMouseScroll":lhe("wheel")?"wheel":"mousewheel"};var che=SF;/**
* Checks if an event is supported in the current execution environment.
*
* NOTE: This will not work correctly for non-generic events such as `change`,
* `reset`, `load`, `error`, and `select`.
*
* Borrows from Modernizr.
*
* @param {string} eventNameSuffix Event name, e.g. "click".
* @param {?boolean} capture Check if the capture phase is supported.
* @return {boolean} True if the event is supported.
* @internal
* @license Modernizr 3.0.0pre (Custom Build) | MIT
*/const uhe=function(t,n){if(t&&t.addEventListener){const e=function(i){const s=che(i);n&&Reflect.apply(n,this,[i,s])};t.addEventListener("wheel",e,{passive:!0})}},dhe={beforeMount(t,n){uhe(t,n.value)}},TF={modelValue:{type:[Number,String,Boolean],default:void 0},label:{type:[String,Boolean,Number,Object],default:void 0},value:{type:[String,Boolean,Number,Object],default:void 0},indeterminate:Boolean,disabled:Boolean,checked:Boolean,name:{type:String,default:void 0},trueValue:{type:[String,Number],default:void 0},falseValue:{type:[String,Number],default:void 0},trueLabel:{type:[String,Number],default:void 0},falseLabel:{type:[String,Number],default:void 0},id:{type:String,default:void 0},border:Boolean,size:Am,tabindex:[String,Number],validateEvent:{type:Boolean,default:!0},...Sh(["ariaControls"])},xF={[kr]:t=>pn(t)||Ms(t)||mc(t),change:t=>pn(t)||Ms(t)||mc(t)},Mm=Symbol("checkboxGroupContextKey"),hhe=({model:t,isChecked:n})=>{const e=jt(Mm,void 0),i=se(()=>{var r,o;const a=(r=e==null?void 0:e.max)==null?void 0:r.value,l=(o=e==null?void 0:e.min)==null?void 0:o.value;return!ic(a)&&t.value.length>=a&&!n.value||!ic(l)&&t.value.length<=l&&n.value});return{isDisabled:Gu(se(()=>(e==null?void 0:e.disabled.value)||i.value)),isLimitDisabled:i}},fhe=(t,{model:n,isLimitExceeded:e,hasOwnLabel:i,isDisabled:s,isLabeledByFormItem:r})=>{const o=jt(Mm,void 0),{formItem:a}=Rm(),{emit:l}=On();function c(m){var v,y,_,b;return[!0,t.trueValue,t.trueLabel].includes(m)?(y=(v=t.trueValue)!=null?v:t.trueLabel)!=null?y:!0:(b=(_=t.falseValue)!=null?_:t.falseLabel)!=null?b:!1}function u(m,v){l("change",c(m),v)}function d(m){if(e.value)return;const v=m.target;l("change",c(v.checked),m)}async function f(m){e.value||!i.value&&!s.value&&r.value&&(m.composedPath().some(_=>_.tagName==="LABEL")||(n.value=c([!1,t.falseValue,t.falseLabel].includes(n.value)),await Jn(),u(n.value,m)))}const p=se(()=>(o==null?void 0:o.validateEvent)||t.validateEvent);return Dt(()=>t.modelValue,()=>{p.value&&(a==null||a.validate("change").catch(m=>void 0))}),{handleChange:d,onClickRoot:f}},mhe=t=>{const n=Se(!1),{emit:e}=On(),i=jt(Mm,void 0),s=se(()=>ic(i)===!1),r=Se(!1),o=se({get(){var a,l;return s.value?(a=i==null?void 0:i.modelValue)==null?void 0:a.value:(l=t.modelValue)!=null?l:n.value},set(a){var l,c;s.value&&Bt(a)?(r.value=((l=i==null?void 0:i.max)==null?void 0:l.value)!==void 0&&a.length>(i==null?void 0:i.max.value)&&a.length>o.value.length,r.value===!1&&((c=i==null?void 0:i.changeEvent)==null||c.call(i,a))):(e(kr,a),n.value=a)}});return{model:o,isGroup:s,isLimitExceeded:r}},phe=(t,n,{model:e})=>{const i=jt(Mm,void 0),s=Se(!1),r=se(()=>eC(t.value)?t.label:t.value),o=se(()=>{const u=e.value;return mc(u)?u:Bt(u)?bn(r.value)?u.map(Hn).some(d=>Cl(d,r.value)):u.map(Hn).includes(r.value):u!=null?u===t.trueValue||u===t.trueLabel:!!u}),a=gc(se(()=>{var u;return(u=i==null?void 0:i.size)==null?void 0:u.value}),{prop:!0}),l=gc(se(()=>{var u;return(u=i==null?void 0:i.size)==null?void 0:u.value})),c=se(()=>!!n.default||!eC(r.value));return{checkboxButtonSize:a,isChecked:o,isFocused:s,checkboxSize:l,hasOwnLabel:c,actualValue:r}},AF=(t,n)=>{const{formItem:e}=Rm(),{model:i,isGroup:s,isLimitExceeded:r}=mhe(t),{isFocused:o,isChecked:a,checkboxButtonSize:l,checkboxSize:c,hasOwnLabel:u,actualValue:d}=phe(t,n,{model:i}),{isDisabled:f}=hhe({model:i,isChecked:a}),{inputId:p,isLabeledByFormItem:m}=Rw(t,{formItemContext:e,disableIdGeneration:u,disableIdManagement:s}),{handleChange:v,onClickRoot:y}=fhe(t,{model:i,isLimitExceeded:r,hasOwnLabel:u,isDisabled:f,isLabeledByFormItem:m});return(()=>{function b(){var E,x;Bt(i.value)&&!i.value.includes(d.value)?i.value.push(d.value):i.value=(x=(E=t.trueValue)!=null?E:t.trueLabel)!=null?x:!0}t.checked&&b()})(),cg({from:"label act as value",replacement:"value",version:"3.0.0",scope:"el-checkbox",ref:"https://element-plus.org/en-US/component/checkbox.html"},se(()=>s.value&&eC(t.value))),cg({from:"true-label",replacement:"true-value",version:"3.0.0",scope:"el-checkbox",ref:"https://element-plus.org/en-US/component/checkbox.html"},se(()=>!!t.trueLabel)),cg({from:"false-label",replacement:"false-value",version:"3.0.0",scope:"el-checkbox",ref:"https://element-plus.org/en-US/component/checkbox.html"},se(()=>!!t.falseLabel)),{inputId:p,isLabeledByFormItem:m,isChecked:a,isDisabled:f,isFocused:o,checkboxButtonSize:l,checkboxSize:c,hasOwnLabel:u,model:i,actualValue:d,handleChange:v,onClickRoot:y}},ghe=pt({name:"ElCheckbox"}),vhe=pt({...ghe,props:TF,emits:xF,setup(t){const n=t,e=Ch(),{inputId:i,isLabeledByFormItem:s,isChecked:r,isDisabled:o,isFocused:a,checkboxSize:l,hasOwnLabel:c,model:u,actualValue:d,handleChange:f,onClickRoot:p}=AF(n,e),m=Zt("checkbox"),v=se(()=>[m.b(),m.m(l.value),m.is("disabled",o.value),m.is("bordered",n.border),m.is("checked",r.value)]),y=se(()=>[m.e("input"),m.is("disabled",o.value),m.is("checked",r.value),m.is("indeterminate",n.indeterminate),m.is("focus",a.value)]);return(_,b)=>(ve(),At(Cs(!H(c)&&H(s)?"span":"label"),{class:De(H(v)),"aria-controls":_.indeterminate?_.ariaControls:null,onClick:H(p)},{default:Je(()=>{var E,x;return[ot("span",{class:De(H(y))},[_.trueValue||_.falseValue||_.trueLabel||_.falseLabel?Qi((ve(),it("input",{key:0,id:H(i),"onUpdate:modelValue":A=>is(u)?u.value=A:null,class:De(H(m).e("original")),type:"checkbox",indeterminate:_.indeterminate,name:_.name,tabindex:_.tabindex,disabled:H(o),"true-value":(E=_.trueValue)!=null?E:_.trueLabel,"false-value":(x=_.falseValue)!=null?x:_.falseLabel,onChange:H(f),onFocus:A=>a.value=!0,onBlur:A=>a.value=!1,onClick:Ui(()=>{},["stop"])},null,42,["id","onUpdate:modelValue","indeterminate","name","tabindex","disabled","true-value","false-value","onChange","onFocus","onBlur","onClick"])),[[s_,H(u)]]):Qi((ve(),it("input",{key:1,id:H(i),"onUpdate:modelValue":A=>is(u)?u.value=A:null,class:De(H(m).e("original")),type:"checkbox",indeterminate:_.indeterminate,disabled:H(o),value:H(d),name:_.name,tabindex:_.tabindex,onChange:H(f),onFocus:A=>a.value=!0,onBlur:A=>a.value=!1,onClick:Ui(()=>{},["stop"])},null,42,["id","onUpdate:modelValue","indeterminate","disabled","value","name","tabindex","onChange","onFocus","onBlur","onClick"])),[[s_,H(u)]]),ot("span",{class:De(H(m).e("inner"))},null,2)],2),H(c)?(ve(),it("span",{key:0,class:De(H(m).e("label"))},[Et(_.$slots,"default"),_.$slots.default?_t("v-if",!0):(ve(),it(Wn,{key:0},[Rn(vn(_.label),1)],64))],2)):_t("v-if",!0)]}),_:3},8,["class","aria-controls","onClick"]))}});var bhe=kn(vhe,[["__file","checkbox.vue"]]);const _he=pt({name:"ElCheckboxButton"}),whe=pt({..._he,props:TF,emits:xF,setup(t){const n=t,e=Ch(),{isFocused:i,isChecked:s,isDisabled:r,checkboxButtonSize:o,model:a,actualValue:l,handleChange:c}=AF(n,e),u=jt(Mm,void 0),d=Zt("checkbox"),f=se(()=>{var m,v,y,_;const b=(v=(m=u==null?void 0:u.fill)==null?void 0:m.value)!=null?v:"";return{backgroundColor:b,borderColor:b,color:(_=(y=u==null?void 0:u.textColor)==null?void 0:y.value)!=null?_:"",boxShadow:b?`-1px 0 0 0 ${b}`:void 0}}),p=se(()=>[d.b("button"),d.bm("button",o.value),d.is("disabled",r.value),d.is("checked",s.value),d.is("focus",i.value)]);return(m,v)=>{var y,_;return ve(),it("label",{class:De(H(p))},[m.trueValue||m.falseValue||m.trueLabel||m.falseLabel?Qi((ve(),it("input",{key:0,"onUpdate:modelValue":b=>is(a)?a.value=b:null,class:De(H(d).be("button","original")),type:"checkbox",name:m.name,tabindex:m.tabindex,disabled:H(r),"true-value":(y=m.trueValue)!=null?y:m.trueLabel,"false-value":(_=m.falseValue)!=null?_:m.falseLabel,onChange:H(c),onFocus:b=>i.value=!0,onBlur:b=>i.value=!1,onClick:Ui(()=>{},["stop"])},null,42,["onUpdate:modelValue","name","tabindex","disabled","true-value","false-value","onChange","onFocus","onBlur","onClick"])),[[s_,H(a)]]):Qi((ve(),it("input",{key:1,"onUpdate:modelValue":b=>is(a)?a.value=b:null,class:De(H(d).be("button","original")),type:"checkbox",name:m.name,tabindex:m.tabindex,disabled:H(r),value:H(l),onChange:H(c),onFocus:b=>i.value=!0,onBlur:b=>i.value=!1,onClick:Ui(()=>{},["stop"])},null,42,["onUpdate:modelValue","name","tabindex","disabled","value","onChange","onFocus","onBlur","onClick"])),[[s_,H(a)]]),m.$slots.default||m.label?(ve(),it("span",{key:2,class:De(H(d).be("button","inner")),style:Xn(H(s)?H(f):void 0)},[Et(m.$slots,"default",{},()=>[Rn(vn(m.label),1)])],6)):_t("v-if",!0)],2)}}});var IF=kn(whe,[["__file","checkbox-button.vue"]]);const yhe=Ln({modelValue:{type:Ft(Array),default:()=>[]},disabled:Boolean,min:Number,max:Number,size:Am,fill:String,textColor:String,tag:{type:String,default:"div"},validateEvent:{type:Boolean,default:!0},...Sh(["ariaLabel"])}),Che={[kr]:t=>Bt(t),change:t=>Bt(t)},khe=pt({name:"ElCheckboxGroup"}),Ehe=pt({...khe,props:yhe,emits:Che,setup(t,{emit:n}){const e=t,i=Zt("checkbox"),{formItem:s}=Rm(),{inputId:r,isLabeledByFormItem:o}=Rw(e,{formItemContext:s}),a=async c=>{n(kr,c),await Jn(),n("change",c)},l=se({get(){return e.modelValue},set(c){a(c)}});return es(Mm,{...mB(wm(e),["size","min","max","disabled","validateEvent","fill","textColor"]),modelValue:l,changeEvent:a}),Dt(()=>e.modelValue,()=>{e.validateEvent&&(s==null||s.validate("change").catch(c=>void 0))}),(c,u)=>{var d;return ve(),At(Cs(c.tag),{id:H(r),class:De(H(i).b("group")),role:"group","aria-label":H(o)?void 0:c.ariaLabel||"checkbox-group","aria-labelledby":H(o)?(d=H(s))==null?void 0:d.labelId:void 0},{default:Je(()=>[Et(c.$slots,"default")]),_:3},8,["id","class","aria-label","aria-labelledby"])}}});var RF=kn(Ehe,[["__file","checkbox-group.vue"]]);const ph=xs(bhe,{CheckboxButton:IF,CheckboxGroup:RF});Al(IF);Al(RF);const bC=Ln({type:{type:String,values:["primary","success","info","warning","danger"],default:"primary"},closable:Boolean,disableTransitions:Boolean,hit:Boolean,color:String,size:{type:String,values:Tw},effect:{type:String,values:["dark","light","plain"],default:"light"},round:Boolean}),She={close:t=>t instanceof MouseEvent,click:t=>t instanceof MouseEvent},The=pt({name:"ElTag"}),xhe=pt({...The,props:bC,emits:She,setup(t,{emit:n}){const e=t,i=gc(),s=Zt("tag"),r=se(()=>{const{type:l,hit:c,effect:u,closable:d,round:f}=e;return[s.b(),s.is("closable",d),s.m(l||"primary"),s.m(i.value),s.m(u),s.is("hit",c),s.is("round",f)]}),o=l=>{n("close",l)},a=l=>{n("click",l)};return(l,c)=>l.disableTransitions?(ve(),it("span",{key:0,class:De(H(r)),style:Xn({backgroundColor:l.color}),onClick:a},[ot("span",{class:De(H(s).e("content"))},[Et(l.$slots,"default")],2),l.closable?(ve(),At(H(yi),{key:0,class:De(H(s).e("close")),onClick:Ui(o,["stop"])},{default:Je(()=>[et(H(Qf))]),_:1},8,["class","onClick"])):_t("v-if",!0)],6)):(ve(),At(Ua,{key:1,name:`${H(s).namespace.value}-zoom-in-center`,appear:""},{default:Je(()=>[ot("span",{class:De(H(r)),style:Xn({backgroundColor:l.color}),onClick:a},[ot("span",{class:De(H(s).e("content"))},[Et(l.$slots,"default")],2),l.closable?(ve(),At(H(yi),{key:0,class:De(H(s).e("close")),onClick:Ui(o,["stop"])},{default:Je(()=>[et(H(Qf))]),_:1},8,["class","onClick"])):_t("v-if",!0)],6)]),_:3},8,["name"]))}});var Ahe=kn(xhe,[["__file","tag.vue"]]);const Ihe=xs(Ahe),Rhe=pt({name:"ElCollapseTransition"}),Mhe=pt({...Rhe,setup(t){const n=Zt("collapse-transition"),e=s=>{s.style.maxHeight="",s.style.overflow=s.dataset.oldOverflow,s.style.paddingTop=s.dataset.oldPaddingTop,s.style.paddingBottom=s.dataset.oldPaddingBottom},i={beforeEnter(s){s.dataset||(s.dataset={}),s.dataset.oldPaddingTop=s.style.paddingTop,s.dataset.oldPaddingBottom=s.style.paddingBottom,s.style.height&&(s.dataset.elExistsHeight=s.style.height),s.style.maxHeight=0,s.style.paddingTop=0,s.style.paddingBottom=0},enter(s){requestAnimationFrame(()=>{s.dataset.oldOverflow=s.style.overflow,s.dataset.elExistsHeight?s.style.maxHeight=s.dataset.elExistsHeight:s.scrollHeight!==0?s.style.maxHeight=`${s.scrollHeight}px`:s.style.maxHeight=0,s.style.paddingTop=s.dataset.oldPaddingTop,s.style.paddingBottom=s.dataset.oldPaddingBottom,s.style.overflow="hidden"})},afterEnter(s){s.style.maxHeight="",s.style.overflow=s.dataset.oldOverflow},enterCancelled(s){e(s)},beforeLeave(s){s.dataset||(s.dataset={}),s.dataset.oldPaddingTop=s.style.paddingTop,s.dataset.oldPaddingBottom=s.style.paddingBottom,s.dataset.oldOverflow=s.style.overflow,s.style.maxHeight=`${s.scrollHeight}px`,s.style.overflow="hidden"},leave(s){s.scrollHeight!==0&&(s.style.maxHeight=0,s.style.paddingTop=0,s.style.paddingBottom=0)},afterLeave(s){e(s)},leaveCancelled(s){e(s)}};return(s,r)=>(ve(),At(Ua,Gr({name:H(n).b()},HJ(i)),{default:Je(()=>[Et(s.$slots,"default")]),_:3},16,["name"]))}});var Phe=kn(Mhe,[["__file","collapse-transition.vue"]]);const Ohe=xs(Phe),Lhe=Ln({mask:{type:Boolean,default:!0},customMaskEvent:Boolean,overlayClass:{type:Ft([String,Array,Object])},zIndex:{type:Ft([String,Number])}}),Bhe={click:t=>t instanceof MouseEvent},Fhe="overlay";var Nhe=pt({name:"ElOverlay",props:Lhe,emits:Bhe,setup(t,{slots:n,emit:e}){const i=Zt(Fhe),s=l=>{e("click",l)},{onClick:r,onMousedown:o,onMouseup:a}=zB(t.customMaskEvent?void 0:s);return()=>t.mask?et("div",{class:[i.b(),t.overlayClass],style:{zIndex:t.zIndex},onClick:r,onMousedown:o,onMouseup:a},[Et(n,"default")],gb.STYLE|gb.CLASS|gb.PROPS,["onClick","onMouseup","onMousedown"]):Xt("div",{class:t.overlayClass,style:{zIndex:t.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[Et(n,"default")])}});const Vhe=Nhe,MF=Symbol("dialogInjectionKey"),PF=Ln({center:Boolean,alignCenter:Boolean,closeIcon:{type:qr},draggable:Boolean,overflow:Boolean,fullscreen:Boolean,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),Dhe={close:()=>!0},$he=pt({name:"ElDialogContent"}),zhe=pt({...$he,props:PF,emits:Dhe,setup(t,{expose:n}){const e=t,{t:i}=xm(),{Close:s}=yae,{dialogRef:r,headerRef:o,bodyId:a,ns:l,style:c}=jt(MF),{focusTrapRef:u}=jt(lF),d=se(()=>[l.b(),l.is("fullscreen",e.fullscreen),l.is("draggable",e.draggable),l.is("align-center",e.alignCenter),{[l.m("center")]:e.center}]),f=kae(u,r),p=se(()=>e.draggable),m=se(()=>e.overflow),{resetPosition:v}=Aae(r,o,p,m);return n({resetPosition:v}),(y,_)=>(ve(),it("div",{ref:H(f),class:De(H(d)),style:Xn(H(c)),tabindex:"-1"},[ot("header",{ref_key:"headerRef",ref:o,class:De([H(l).e("header"),{"show-close":y.showClose}])},[Et(y.$slots,"header",{},()=>[ot("span",{role:"heading","aria-level":y.ariaLevel,class:De(H(l).e("title"))},vn(y.title),11,["aria-level"])]),y.showClose?(ve(),it("button",{key:0,"aria-label":H(i)("el.dialog.close"),class:De(H(l).e("headerbtn")),type:"button",onClick:b=>y.$emit("close")},[et(H(yi),{class:De(H(l).e("close"))},{default:Je(()=>[(ve(),At(Cs(y.closeIcon||H(s))))]),_:1},8,["class"])],10,["aria-label","onClick"])):_t("v-if",!0)],2),ot("div",{id:H(a),class:De(H(l).e("body"))},[Et(y.$slots,"default")],10,["id"]),y.$slots.footer?(ve(),it("footer",{key:0,class:De(H(l).e("footer"))},[Et(y.$slots,"footer")],2)):_t("v-if",!0)],6))}});var Hhe=kn(zhe,[["__file","dialog-content.vue"]]);const Uhe=Ln({...PF,appendToBody:Boolean,appendTo:{type:Ft([String,Object]),default:"body"},beforeClose:{type:Ft(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:Boolean,headerAriaLevel:{type:String,default:"2"}}),Whe={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[kr]:t=>mc(t),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},jhe=(t,n)=>{var e;const s=On().emit,{nextZIndex:r}=oE();let o="";const a=fh(),l=fh(),c=Se(!1),u=Se(!1),d=Se(!1),f=Se((e=t.zIndex)!=null?e:r());let p,m;const v=Iw("namespace",ug),y=se(()=>{const B={},z=`--${v.value}-dialog`;return t.fullscreen||(t.top&&(B[`${z}-margin-top`]=t.top),t.width&&(B[`${z}-width`]=kl(t.width))),B}),_=se(()=>t.alignCenter?{display:"flex"}:{});function b(){s("opened")}function E(){s("closed"),s(kr,!1),t.destroyOnClose&&(d.value=!1)}function x(){s("close")}function A(){m==null||m(),p==null||p(),t.openDelay&&t.openDelay>0?{stop:p}=Gg(()=>M(),t.openDelay):M()}function I(){p==null||p(),m==null||m(),t.closeDelay&&t.closeDelay>0?{stop:m}=Gg(()=>T(),t.closeDelay):T()}function k(){function B(z){z||(u.value=!0,c.value=!1)}t.beforeClose?t.beforeClose(B):I()}function O(){t.closeOnClickModal&&k()}function M(){bi&&(c.value=!0)}function T(){c.value=!1}function P(){s("openAutoFocus")}function R(){s("closeAutoFocus")}function L(B){var z;((z=B.detail)==null?void 0:z.focusReason)==="pointer"&&B.preventDefault()}t.lockScroll&&Lae(c);function F(){t.closeOnPressEscape&&k()}return Dt(()=>t.modelValue,B=>{B?(u.value=!1,A(),d.value=!0,f.value=hB(t.zIndex)?r():f.value++,Jn(()=>{s("open"),n.value&&(n.value.scrollTop=0)})):c.value&&I()}),Dt(()=>t.fullscreen,B=>{n.value&&(B?(o=n.value.style.transform,n.value.style.transform=""):n.value.style.transform=o)}),ri(()=>{t.modelValue&&(c.value=!0,d.value=!0,A())}),{afterEnter:b,afterLeave:E,beforeLeave:x,handleClose:k,onModalClick:O,close:I,doClose:T,onOpenAutoFocus:P,onCloseAutoFocus:R,onCloseRequested:F,onFocusoutPrevented:L,titleId:a,bodyId:l,closed:u,style:y,overlayDialogStyle:_,rendered:d,visible:c,zIndex:f}},qhe=pt({name:"ElDialog",inheritAttrs:!1}),Khe=pt({...qhe,props:Uhe,emits:Whe,setup(t,{expose:n}){const e=t,i=Ch();cg({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},se(()=>!!i.title));const s=Zt("dialog"),r=Se(),o=Se(),a=Se(),{visible:l,titleId:c,bodyId:u,style:d,overlayDialogStyle:f,rendered:p,zIndex:m,afterEnter:v,afterLeave:y,beforeLeave:_,handleClose:b,onModalClick:E,onOpenAutoFocus:x,onCloseAutoFocus:A,onCloseRequested:I,onFocusoutPrevented:k}=jhe(e,r);es(MF,{dialogRef:r,headerRef:o,bodyId:u,ns:s,rendered:p,style:d});const O=zB(E),M=se(()=>e.draggable&&!e.fullscreen);return n({visible:l,dialogContentRef:a,resetPosition:()=>{var P;(P=a.value)==null||P.resetPosition()}}),(P,R)=>(ve(),At(H(fF),{to:P.appendTo,disabled:P.appendTo!=="body"?!1:!P.appendToBody},{default:Je(()=>[et(Ua,{name:"dialog-fade",onAfterEnter:H(v),onAfterLeave:H(y),onBeforeLeave:H(_),persisted:""},{default:Je(()=>[Qi(et(H(Vhe),{"custom-mask-event":"",mask:P.modal,"overlay-class":P.modalClass,"z-index":H(m)},{default:Je(()=>[ot("div",{role:"dialog","aria-modal":"true","aria-label":P.title||void 0,"aria-labelledby":P.title?void 0:H(c),"aria-describedby":H(u),class:De(`${H(s).namespace.value}-overlay-dialog`),style:Xn(H(f)),onClick:H(O).onClick,onMousedown:H(O).onMousedown,onMouseup:H(O).onMouseup},[et(H(uF),{loop:"",trapped:H(l),"focus-start-el":"container",onFocusAfterTrapped:H(x),onFocusAfterReleased:H(A),onFocusoutPrevented:H(k),onReleaseRequested:H(I)},{default:Je(()=>[H(p)?(ve(),At(Hhe,Gr({key:0,ref_key:"dialogContentRef",ref:a},P.$attrs,{center:P.center,"align-center":P.alignCenter,"close-icon":P.closeIcon,draggable:H(M),overflow:P.overflow,fullscreen:P.fullscreen,"show-close":P.showClose,title:P.title,"aria-level":P.headerAriaLevel,onClose:H(b)}),F3({header:Je(()=>[P.$slots.title?Et(P.$slots,"title",{key:1}):Et(P.$slots,"header",{key:0,close:H(b),titleId:H(c),titleClass:H(s).e("title")})]),default:Je(()=>[Et(P.$slots,"default")]),_:2},[P.$slots.footer?{name:"footer",fn:Je(()=>[Et(P.$slots,"footer")])}:void 0]),1040,["center","align-center","close-icon","draggable","overflow","fullscreen","show-close","title","aria-level","onClose"])):_t("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,["aria-label","aria-labelledby","aria-describedby","onClick","onMousedown","onMouseup"])]),_:3},8,["mask","overlay-class","z-index"]),[[ra,H(l)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])]),_:3},8,["to","disabled"]))}});var Ghe=kn(Khe,[["__file","dialog.vue"]]);const OF=xs(Ghe),Yhe=Ln({type:{type:String,values:["primary","success","warning","info","danger","default"],default:"default"},underline:{type:Boolean,default:!0},disabled:Boolean,href:{type:String,default:""},target:{type:String,default:"_self"},icon:{type:qr}}),Zhe={click:t=>t instanceof MouseEvent},Xhe=pt({name:"ElLink"}),Jhe=pt({...Xhe,props:Yhe,emits:Zhe,setup(t,{emit:n}){const e=t,i=Zt("link"),s=se(()=>[i.b(),i.m(e.type),i.is("disabled",e.disabled),i.is("underline",e.underline&&!e.disabled)]);function r(o){e.disabled||n("click",o)}return(o,a)=>(ve(),it("a",{class:De(H(s)),href:o.disabled||!o.href?void 0:o.href,target:o.disabled||!o.href?void 0:o.target,onClick:r},[o.icon?(ve(),At(H(yi),{key:0},{default:Je(()=>[(ve(),At(Cs(o.icon)))]),_:1})):_t("v-if",!0),o.$slots.default?(ve(),it("span",{key:1,class:De(H(i).e("inner"))},[Et(o.$slots,"default")],2)):_t("v-if",!0),o.$slots.icon?Et(o.$slots,"icon",{key:2}):_t("v-if",!0)],10,["href","target"]))}});var Qhe=kn(Jhe,[["__file","link.vue"]]);const efe=xs(Qhe);let tfe=class{constructor(n,e){this.parent=n,this.domNode=e,this.subIndex=0,this.subIndex=0,this.init()}init(){this.subMenuItems=this.domNode.querySelectorAll("li"),this.addListeners()}gotoSubIndex(n){n===this.subMenuItems.length?n=0:n<0&&(n=this.subMenuItems.length-1),this.subMenuItems[n].focus(),this.subIndex=n}addListeners(){const n=this.parent.domNode;Array.prototype.forEach.call(this.subMenuItems,e=>{e.addEventListener("keydown",i=>{let s=!1;switch(i.code){case ur.down:{this.gotoSubIndex(this.subIndex+1),s=!0;break}case ur.up:{this.gotoSubIndex(this.subIndex-1),s=!0;break}case ur.tab:{mb(n,"mouseleave");break}case ur.enter:case ur.space:{s=!0,i.currentTarget.click();break}}return s&&(i.preventDefault(),i.stopPropagation()),!1})})}},nfe=class{constructor(n,e){this.domNode=n,this.submenu=null,this.submenu=null,this.init(e)}init(n){this.domNode.setAttribute("tabindex","0");const e=this.domNode.querySelector(`.${n}-menu`);e&&(this.submenu=new tfe(this,e)),this.addListeners()}addListeners(){this.domNode.addEventListener("keydown",n=>{let e=!1;switch(n.code){case ur.down:{mb(n.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(0),e=!0;break}case ur.up:{mb(n.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(this.submenu.subMenuItems.length-1),e=!0;break}case ur.tab:{mb(n.currentTarget,"mouseleave");break}case ur.enter:case ur.space:{e=!0,n.currentTarget.click();break}}e&&n.preventDefault()})}},ife=class{constructor(n,e){this.domNode=n,this.init(e)}init(n){const e=this.domNode.childNodes;Array.from(e).forEach(i=>{i.nodeType===1&&new nfe(i,n)})}};const sfe=pt({name:"ElMenuCollapseTransition",setup(){const t=Zt("menu");return{listeners:{onBeforeEnter:e=>e.style.opacity="0.2",onEnter(e,i){sc(e,`${t.namespace.value}-opacity-transition`),e.style.opacity="1",i()},onAfterEnter(e){lc(e,`${t.namespace.value}-opacity-transition`),e.style.opacity=""},onBeforeLeave(e){e.dataset||(e.dataset={}),Eu(e,t.m("collapse"))?(lc(e,t.m("collapse")),e.dataset.oldOverflow=e.style.overflow,e.dataset.scrollWidth=e.clientWidth.toString(),sc(e,t.m("collapse"))):(sc(e,t.m("collapse")),e.dataset.oldOverflow=e.style.overflow,e.dataset.scrollWidth=e.clientWidth.toString(),lc(e,t.m("collapse"))),e.style.width=`${e.scrollWidth}px`,e.style.overflow="hidden"},onLeave(e){sc(e,"horizontal-collapse-transition"),e.style.width=`${e.dataset.scrollWidth}px`}}}}});function rfe(t,n,e,i,s,r){return ve(),At(Ua,Gr({mode:"out-in"},t.listeners),{default:Je(()=>[Et(t.$slots,"default")]),_:3},16)}var ofe=kn(sfe,[["render",rfe],["__file","menu-collapse-transition.vue"]]);function LF(t,n){const e=se(()=>{let s=t.parent;const r=[n.value];for(;s.type.name!=="ElMenu";)s.props.index&&r.unshift(s.props.index),s=s.parent;return r});return{parentMenu:se(()=>{let s=t.parent;for(;s&&!["ElMenu","ElSubMenu"].includes(s.type.name);)s=s.parent;return s}),indexPath:e}}function afe(t){return se(()=>{const e=t.backgroundColor;return e?new gF(e).shade(20).toString():""})}const BF=(t,n)=>{const e=Zt("menu");return se(()=>e.cssVarBlock({"text-color":t.textColor||"","hover-text-color":t.textColor||"","bg-color":t.backgroundColor||"","hover-bg-color":afe(t).value||"","active-color":t.activeTextColor||"",level:`${n}`}))},lfe=Ln({index:{type:String,required:!0},showTimeout:Number,hideTimeout:Number,popperClass:String,disabled:Boolean,teleported:{type:Boolean,default:void 0},popperOffset:Number,expandCloseIcon:{type:qr},expandOpenIcon:{type:qr},collapseCloseIcon:{type:qr},collapseOpenIcon:{type:qr}}),i5="ElSubMenu";var pE=pt({name:i5,props:lfe,setup(t,{slots:n,expose:e}){const i=On(),{indexPath:s,parentMenu:r}=LF(i,se(()=>t.index)),o=Zt("menu"),a=Zt("sub-menu"),l=jt("rootMenu");l||Fa(i5,"can not inject root menu");const c=jt(`subMenu:${r.value.uid}`);c||Fa(i5,"can not inject sub menu");const u=Se({}),d=Se({});let f;const p=Se(!1),m=Se(),v=Se(null),y=se(()=>O.value==="horizontal"&&b.value?"bottom-start":"right-start"),_=se(()=>O.value==="horizontal"&&b.value||O.value==="vertical"&&!l.props.collapse?t.expandCloseIcon&&t.expandOpenIcon?I.value?t.expandOpenIcon:t.expandCloseIcon:q4:t.collapseCloseIcon&&t.collapseOpenIcon?I.value?t.collapseOpenIcon:t.collapseCloseIcon:K4),b=se(()=>c.level===0),E=se(()=>{const S=t.teleported;return S===void 0?b.value:S}),x=se(()=>l.props.collapse?`${o.namespace.value}-zoom-in-left`:`${o.namespace.value}-zoom-in-top`),A=se(()=>O.value==="horizontal"&&b.value?["bottom-start","bottom-end","top-start","top-end","right-start","left-start"]:["right-start","right","right-end","left-start","bottom-start","bottom-end","top-start","top-end"]),I=se(()=>l.openedMenus.includes(t.index)),k=se(()=>{let S=!1;return Object.values(u.value).forEach(V=>{V.active&&(S=!0)}),Object.values(d.value).forEach(V=>{V.active&&(S=!0)}),S}),O=se(()=>l.props.mode),M=Ir({index:t.index,indexPath:s,active:k}),T=BF(l.props,c.level+1),P=se(()=>{var S;return(S=t.popperOffset)!=null?S:l.props.popperOffset}),R=se(()=>{var S;return(S=t.popperClass)!=null?S:l.props.popperClass}),L=se(()=>{var S;return(S=t.showTimeout)!=null?S:l.props.showTimeout}),F=se(()=>{var S;return(S=t.hideTimeout)!=null?S:l.props.hideTimeout}),B=()=>{var S,V,re;return(re=(V=(S=v.value)==null?void 0:S.popperRef)==null?void 0:V.popperInstanceRef)==null?void 0:re.destroy()},z=S=>{S||B()},J=()=>{l.props.menuTrigger==="hover"&&l.props.mode==="horizontal"||l.props.collapse&&l.props.mode==="vertical"||t.disabled||l.handleSubMenuClick({index:t.index,indexPath:s.value,active:k.value})},q=(S,V=L.value)=>{var re;if(S.type!=="focus"){if(l.props.menuTrigger==="click"&&l.props.mode==="horizontal"||!l.props.collapse&&l.props.mode==="vertical"||t.disabled){c.mouseInChild.value=!0;return}c.mouseInChild.value=!0,f==null||f(),{stop:f}=Gg(()=>{l.openMenu(t.index,s.value)},V),E.value&&((re=r.value.vnode.el)==null||re.dispatchEvent(new MouseEvent("mouseenter")))}},G=(S=!1)=>{var V;if(l.props.menuTrigger==="click"&&l.props.mode==="horizontal"||!l.props.collapse&&l.props.mode==="vertical"){c.mouseInChild.value=!1;return}f==null||f(),c.mouseInChild.value=!1,{stop:f}=Gg(()=>!p.value&&l.closeMenu(t.index,s.value),F.value),E.value&&S&&((V=c.handleMouseleave)==null||V.call(c,!0))};Dt(()=>l.props.collapse,S=>z(!!S));{const S=re=>{d.value[re.index]=re},V=re=>{delete d.value[re.index]};es(`subMenu:${i.uid}`,{addSubMenu:S,removeSubMenu:V,handleMouseleave:G,mouseInChild:p,level:c.level+1})}return e({opened:I}),ri(()=>{l.addSubMenu(M),c.addSubMenu(M)}),Ts(()=>{c.removeSubMenu(M),l.removeSubMenu(M)}),()=>{var S;const V=[(S=n.title)==null?void 0:S.call(n),Xt(yi,{class:a.e("icon-arrow"),style:{transform:I.value?t.expandCloseIcon&&t.expandOpenIcon||t.collapseCloseIcon&&t.collapseOpenIcon&&l.props.collapse?"none":"rotateZ(180deg)":"none"}},{default:()=>pn(_.value)?Xt(i.appContext.components[_.value]):Xt(_.value)})],re=l.isMenuPopup?Xt($1,{ref:v,visible:I.value,effect:"light",pure:!0,offset:P.value,showArrow:!1,persistent:!0,popperClass:R.value,placement:y.value,teleported:E.value,fallbackPlacements:A.value,transition:x.value,gpuAcceleration:!1},{content:()=>{var U;return Xt("div",{class:[o.m(O.value),o.m("popup-container"),R.value],onMouseenter:Pe=>q(Pe,100),onMouseleave:()=>G(!0),onFocus:Pe=>q(Pe,100)},[Xt("ul",{class:[o.b(),o.m("popup"),o.m(`popup-${y.value}`)],style:T.value},[(U=n.default)==null?void 0:U.call(n)])])},default:()=>Xt("div",{class:a.e("title"),onClick:J},V)}):Xt(Wn,{},[Xt("div",{class:a.e("title"),ref:m,onClick:J},V),Xt(Ohe,{},{default:()=>{var U;return Qi(Xt("ul",{role:"menu",class:[o.b(),o.m("inline")],style:T.value},[(U=n.default)==null?void 0:U.call(n)]),[[ra,I.value]])}})]);return Xt("li",{class:[a.b(),a.is("active",k.value),a.is("opened",I.value),a.is("disabled",t.disabled)],role:"menuitem",ariaHaspopup:!0,ariaExpanded:I.value,onMouseenter:q,onMouseleave:()=>G(),onFocus:q},[re])}}});const cfe=Ln({mode:{type:String,values:["horizontal","vertical"],default:"vertical"},defaultActive:{type:String,default:""},defaultOpeneds:{type:Ft(Array),default:()=>em([])},uniqueOpened:Boolean,router:Boolean,menuTrigger:{type:String,values:["hover","click"],default:"hover"},collapse:Boolean,backgroundColor:String,textColor:String,activeTextColor:String,closeOnClickOutside:Boolean,collapseTransition:{type:Boolean,default:!0},ellipsis:{type:Boolean,default:!0},popperOffset:{type:Number,default:6},ellipsisIcon:{type:qr,default:()=>fae},popperEffect:{type:Ft(String),default:"dark"},popperClass:String,showTimeout:{type:Number,default:300},hideTimeout:{type:Number,default:300}}),s5=t=>Array.isArray(t)&&t.every(n=>pn(n)),ufe={close:(t,n)=>pn(t)&&s5(n),open:(t,n)=>pn(t)&&s5(n),select:(t,n,e,i)=>pn(t)&&s5(n)&&bn(e)&&(i===void 0||i instanceof Promise)};var dfe=pt({name:"ElMenu",props:cfe,emits:ufe,setup(t,{emit:n,slots:e,expose:i}){const s=On(),r=s.appContext.config.globalProperties.$router,o=Se(),a=Zt("menu"),l=Zt("sub-menu"),c=Se(-1),u=Se(t.defaultOpeneds&&!t.collapse?t.defaultOpeneds.slice(0):[]),d=Se(t.defaultActive),f=Se({}),p=Se({}),m=se(()=>t.mode==="horizontal"||t.mode==="vertical"&&t.collapse),v=()=>{const F=d.value&&f.value[d.value];if(!F||t.mode==="horizontal"||t.collapse)return;F.indexPath.forEach(z=>{const J=p.value[z];J&&y(z,J.indexPath)})},y=(F,B)=>{u.value.includes(F)||(t.uniqueOpened&&(u.value=u.value.filter(z=>B.includes(z))),u.value.push(F),n("open",F,B))},_=F=>{const B=u.value.indexOf(F);B!==-1&&u.value.splice(B,1)},b=(F,B)=>{_(F),n("close",F,B)},E=({index:F,indexPath:B})=>{u.value.includes(F)?b(F,B):y(F,B)},x=F=>{(t.mode==="horizontal"||t.collapse)&&(u.value=[]);const{index:B,indexPath:z}=F;if(!(fc(B)||fc(z)))if(t.router&&r){const J=F.route||B,q=r.push(J).then(G=>(G||(d.value=B),G));n("select",B,z,{index:B,indexPath:z,route:J},q)}else d.value=B,n("select",B,z,{index:B,indexPath:z})},A=F=>{const B=f.value,z=B[F]||d.value&&B[d.value]||B[t.defaultActive];z?d.value=z.index:d.value=F},I=F=>{const B=getComputedStyle(F),z=Number.parseInt(B.marginLeft,10),J=Number.parseInt(B.marginRight,10);return F.offsetWidth+z+J||0},k=()=>{var F,B;if(!o.value)return-1;const z=Array.from((B=(F=o.value)==null?void 0:F.childNodes)!=null?B:[]).filter(Pe=>Pe.nodeName!=="#comment"&&(Pe.nodeName!=="#text"||Pe.nodeValue)),J=64,q=getComputedStyle(o.value),G=Number.parseInt(q.paddingLeft,10),S=Number.parseInt(q.paddingRight,10),V=o.value.clientWidth-G-S;let re=0,U=0;return z.forEach((Pe,Fe)=>{re+=I(Pe),re<=V-J&&(U=Fe+1)}),U===z.length?-1:U},O=F=>p.value[F].indexPath,M=(F,B=33.34)=>{let z;return()=>{z&&clearTimeout(z),z=setTimeout(()=>{F()},B)}};let T=!0;const P=()=>{if(c.value===k())return;const F=()=>{c.value=-1,Jn(()=>{c.value=k()})};T?F():M(F)(),T=!1};Dt(()=>t.defaultActive,F=>{f.value[F]||(d.value=""),A(F)}),Dt(()=>t.collapse,F=>{F&&(u.value=[])}),Dt(f.value,v);let R;Au(()=>{t.mode==="horizontal"&&t.ellipsis?R=jr(o,P).stop:R==null||R()});const L=Se(!1);{const F=q=>{p.value[q.index]=q},B=q=>{delete p.value[q.index]};es("rootMenu",Ir({props:t,openedMenus:u,items:f,subMenus:p,activeIndex:d,isMenuPopup:m,addMenuItem:q=>{f.value[q.index]=q},removeMenuItem:q=>{delete f.value[q.index]},addSubMenu:F,removeSubMenu:B,openMenu:y,closeMenu:b,handleMenuItemClick:x,handleSubMenuClick:E})),es(`subMenu:${s.uid}`,{addSubMenu:F,removeSubMenu:B,mouseInChild:L,level:0})}return ri(()=>{t.mode==="horizontal"&&new ife(s.vnode.el,a.namespace.value)}),i({open:B=>{const{indexPath:z}=p.value[B];z.forEach(J=>y(J,z))},close:_,handleResize:P}),()=>{var F,B;let z=(B=(F=e.default)==null?void 0:F.call(e))!=null?B:[];const J=[];if(t.mode==="horizontal"&&o.value){const V=vb(z),re=c.value===-1?V:V.slice(0,c.value),U=c.value===-1?[]:V.slice(c.value);U!=null&&U.length&&t.ellipsis&&(z=re,J.push(Xt(pE,{index:"sub-menu-more",class:l.e("hide-arrow"),popperOffset:t.popperOffset},{title:()=>Xt(yi,{class:l.e("icon-more")},{default:()=>Xt(t.ellipsisIcon)}),default:()=>U})))}const q=BF(t,0),G=t.closeOnClickOutside?[[mE,()=>{u.value.length&&(L.value||(u.value.forEach(V=>n("close",V,O(V))),u.value=[]))}]]:[],S=Qi(Xt("ul",{key:String(t.collapse),role:"menubar",ref:o,style:q.value,class:{[a.b()]:!0,[a.m(t.mode)]:!0,[a.m("collapse")]:t.collapse}},[...z,...J]),G);return t.collapseTransition&&t.mode==="vertical"?Xt(ofe,()=>S):S}}});const hfe=Ln({index:{type:Ft([String,null]),default:null},route:{type:Ft([String,Object])},disabled:Boolean}),ffe={click:t=>pn(t.index)&&Array.isArray(t.indexPath)},r5="ElMenuItem",mfe=pt({name:r5,components:{ElTooltip:$1},props:hfe,emits:ffe,setup(t,{emit:n}){const e=On(),i=jt("rootMenu"),s=Zt("menu"),r=Zt("menu-item");i||Fa(r5,"can not inject root menu");const{parentMenu:o,indexPath:a}=LF(e,bo(t,"index")),l=jt(`subMenu:${o.value.uid}`);l||Fa(r5,"can not inject sub menu");const c=se(()=>t.index===i.activeIndex),u=Ir({index:t.index,indexPath:a,active:c}),d=()=>{t.disabled||(i.handleMenuItemClick({index:t.index,indexPath:a.value,route:t.route}),n("click",u))};return ri(()=>{l.addSubMenu(u),i.addMenuItem(u)}),Ts(()=>{l.removeSubMenu(u),i.removeMenuItem(u)}),{parentMenu:o,rootMenu:i,active:c,nsMenu:s,nsMenuItem:r,handleClick:d}}});function pfe(t,n,e,i,s,r){const o=ns("el-tooltip");return ve(),it("li",{class:De([t.nsMenuItem.b(),t.nsMenuItem.is("active",t.active),t.nsMenuItem.is("disabled",t.disabled)]),role:"menuitem",tabindex:"-1",onClick:t.handleClick},[t.parentMenu.type.name==="ElMenu"&&t.rootMenu.props.collapse&&t.$slots.title?(ve(),At(o,{key:0,effect:t.rootMenu.props.popperEffect,placement:"right","fallback-placements":["left"],persistent:""},{content:Je(()=>[Et(t.$slots,"title")]),default:Je(()=>[ot("div",{class:De(t.nsMenu.be("tooltip","trigger"))},[Et(t.$slots,"default")],2)]),_:3},8,["effect"])):(ve(),it(Wn,{key:1},[Et(t.$slots,"default"),Et(t.$slots,"title")],64))],10,["onClick"])}var FF=kn(mfe,[["render",pfe],["__file","menu-item.vue"]]);const gfe={title:String},vfe="ElMenuItemGroup",bfe=pt({name:vfe,props:gfe,setup(){return{ns:Zt("menu-item-group")}}});function _fe(t,n,e,i,s,r){return ve(),it("li",{class:De(t.ns.b())},[ot("div",{class:De(t.ns.e("title"))},[t.$slots.title?Et(t.$slots,"title",{key:1}):(ve(),it(Wn,{key:0},[Rn(vn(t.title),1)],64))],2),ot("ul",null,[Et(t.$slots,"default")])],2)}var NF=kn(bfe,[["render",_fe],["__file","menu-item-group.vue"]]);const wfe=xs(dfe,{MenuItem:FF,MenuItemGroup:NF,SubMenu:pE}),yfe=Al(FF);Al(NF);const Cfe=Al(pE),VF=Symbol("ElSelectGroup"),Pw=Symbol("ElSelect");function kfe(t,n){const e=jt(Pw),i=jt(VF,{disabled:!1}),s=se(()=>u(xa(e.props.modelValue),t.value)),r=se(()=>{var p;if(e.props.multiple){const m=xa((p=e.props.modelValue)!=null?p:[]);return!s.value&&m.length>=e.props.multipleLimit&&e.props.multipleLimit>0}else return!1}),o=se(()=>t.label||(bn(t.value)?"":t.value)),a=se(()=>t.value||t.label||""),l=se(()=>t.disabled||n.groupDisabled||r.value),c=On(),u=(p=[],m)=>{if(bn(t.value)){const v=e.props.valueKey;return p&&p.some(y=>Hn(cr(y,v))===cr(m,v))}else return p&&p.includes(m)},d=()=>{!t.disabled&&!i.disabled&&(e.states.hoveringIndex=e.optionsArray.indexOf(c.proxy))},f=p=>{const m=new RegExp(Uoe(p),"i");n.visible=m.test(o.value)||t.created};return Dt(()=>o.value,()=>{!t.created&&!e.props.remote&&e.setSelected()}),Dt(()=>t.value,(p,m)=>{const{remote:v,valueKey:y}=e.props;if(p!==m&&(e.onOptionDestroy(m,c.proxy),e.onOptionCreate(c.proxy)),!t.created&&!v){if(y&&bn(p)&&bn(m)&&p[y]===m[y])return;e.setSelected()}}),Dt(()=>i.disabled,()=>{n.groupDisabled=i.disabled},{immediate:!0}),{select:e,currentLabel:o,currentValue:a,itemSelected:s,isDisabled:l,hoverItem:d,updateOption:f}}const Efe=pt({name:"ElOption",componentName:"ElOption",props:{value:{required:!0,type:[String,Number,Boolean,Object]},label:[String,Number],created:Boolean,disabled:Boolean},setup(t){const n=Zt("select"),e=fh(),i=se(()=>[n.be("dropdown","item"),n.is("disabled",H(a)),n.is("selected",H(o)),n.is("hovering",H(f))]),s=Ir({index:-1,groupDisabled:!1,visible:!0,hover:!1}),{currentLabel:r,itemSelected:o,isDisabled:a,select:l,hoverItem:c,updateOption:u}=kfe(t,s),{visible:d,hover:f}=wm(s),p=On().proxy;l.onOptionCreate(p),Ts(()=>{const v=p.value,{selected:y}=l.states,b=(l.props.multiple?y:[y]).some(E=>E.value===p.value);Jn(()=>{l.states.cachedOptions.get(v)===p&&!b&&l.states.cachedOptions.delete(v)}),l.onOptionDestroy(v,p)});function m(){a.value||l.handleOptionSelect(p)}return{ns:n,id:e,containerKls:i,currentLabel:r,itemSelected:o,isDisabled:a,select:l,hoverItem:c,updateOption:u,visible:d,hover:f,selectOptionClick:m,states:s}}});function Sfe(t,n,e,i,s,r){return Qi((ve(),it("li",{id:t.id,class:De(t.containerKls),role:"option","aria-disabled":t.isDisabled||void 0,"aria-selected":t.itemSelected,onMouseenter:t.hoverItem,onClick:Ui(t.selectOptionClick,["stop"])},[Et(t.$slots,"default",{},()=>[ot("span",null,vn(t.currentLabel),1)])],42,["id","aria-disabled","aria-selected","onMouseenter","onClick"])),[[ra,t.visible]])}var gE=kn(Efe,[["render",Sfe],["__file","option.vue"]]);const Tfe=pt({name:"ElSelectDropdown",componentName:"ElSelectDropdown",setup(){const t=jt(Pw),n=Zt("select"),e=se(()=>t.props.popperClass),i=se(()=>t.props.multiple),s=se(()=>t.props.fitInputWidth),r=Se("");function o(){var a;r.value=`${(a=t.selectRef)==null?void 0:a.offsetWidth}px`}return ri(()=>{o(),jr(t.selectRef,o)}),{ns:n,minWidth:r,popperClass:e,isMultiple:i,isFitInputWidth:s}}});function xfe(t,n,e,i,s,r){return ve(),it("div",{class:De([t.ns.b("dropdown"),t.ns.is("multiple",t.isMultiple),t.popperClass]),style:Xn({[t.isFitInputWidth?"width":"minWidth"]:t.minWidth})},[t.$slots.header?(ve(),it("div",{key:0,class:De(t.ns.be("dropdown","header"))},[Et(t.$slots,"header")],2)):_t("v-if",!0),Et(t.$slots,"default"),t.$slots.footer?(ve(),it("div",{key:1,class:De(t.ns.be("dropdown","footer"))},[Et(t.$slots,"footer")],2)):_t("v-if",!0)],6)}var Afe=kn(Tfe,[["render",xfe],["__file","select-dropdown.vue"]]);const Ife=11,Rfe=(t,n)=>{const{t:e}=xm(),i=fh(),s=Zt("select"),r=Zt("input"),o=Ir({inputValue:"",options:new Map,cachedOptions:new Map,disabledOptions:new Map,optionValues:[],selected:t.multiple?[]:{},selectionWidth:0,calculatorWidth:0,collapseItemWidth:0,selectedLabel:"",hoveringIndex:-1,previousQuery:null,inputHovering:!1,menuVisibleOnFocus:!1,isBeforeHide:!1}),a=Se(null),l=Se(null),c=Se(null),u=Se(null),d=Se(null),f=Se(null),p=Se(null),m=Se(null),v=Se(null),y=Se(null),_=Se(null),b=Se(null),{isComposing:E,handleCompositionStart:x,handleCompositionUpdate:A,handleCompositionEnd:I}=YB({afterComposition:Me=>Re(Me)}),{wrapperRef:k,isFocused:O,handleBlur:M}=GB(d,{afterFocus(){t.automaticDropdown&&!T.value&&(T.value=!0,o.menuVisibleOnFocus=!0)},beforeBlur(Me){var ht,Qt;return((ht=c.value)==null?void 0:ht.isFocusInsideContent(Me))||((Qt=u.value)==null?void 0:Qt.isFocusInsideContent(Me))},afterBlur(){T.value=!1,o.menuVisibleOnFocus=!1}}),T=Se(!1),P=Se(),{form:R,formItem:L}=Rm(),{inputId:F}=Rw(t,{formItemContext:L}),{valueOnClear:B,isEmptyValue:z}=ece(t),J=se(()=>t.disabled||(R==null?void 0:R.disabled)),q=se(()=>Bt(t.modelValue)?t.modelValue.length>0:!z(t.modelValue)),G=se(()=>t.clearable&&!J.value&&o.inputHovering&&q.value),S=se(()=>t.remote&&t.filterable&&!t.remoteShowSuffix?"":t.suffixIcon),V=se(()=>s.is("reverse",S.value&&T.value)),re=se(()=>(L==null?void 0:L.validateState)||""),U=se(()=>EB[re.value]),Pe=se(()=>t.remote?300:0),Fe=se(()=>t.loading?t.loadingText||e("el.select.loading"):t.remote&&!o.inputValue&&o.options.size===0?!1:t.filterable&&o.inputValue&&o.options.size>0&&Ne.value===0?t.noMatchText||e("el.select.noMatch"):o.options.size===0?t.noDataText||e("el.select.noData"):null),Ne=se(()=>ne.value.filter(Me=>Me.visible).length),ne=se(()=>{const Me=Array.from(o.options.values()),ht=[];return o.optionValues.forEach(Qt=>{const nn=Me.findIndex(Bn=>Bn.value===Qt);nn>-1&&ht.push(Me[nn])}),ht.length>=Me.length?ht:Me}),me=se(()=>Array.from(o.cachedOptions.values())),pe=se(()=>{const Me=ne.value.filter(ht=>!ht.created).some(ht=>ht.currentLabel===o.inputValue);return t.filterable&&t.allowCreate&&o.inputValue!==""&&!Me}),ge=()=>{t.filterable&&Ut(t.filterMethod)||t.filterable&&t.remote&&Ut(t.remoteMethod)||ne.value.forEach(Me=>{var ht;(ht=Me.updateOption)==null||ht.call(Me,o.inputValue)})},rt=gc(),wt=se(()=>["small"].includes(rt.value)?"small":"default"),D=se({get(){return T.value&&Fe.value!==!1},set(Me){T.value=Me}}),$=se(()=>{if(t.multiple&&!ic(t.modelValue))return xa(t.modelValue).length===0&&!o.inputValue;const Me=Bt(t.modelValue)?t.modelValue[0]:t.modelValue;return t.filterable||ic(Me)?!o.inputValue:!0}),X=se(()=>{var Me;const ht=(Me=t.placeholder)!=null?Me:e("el.select.placeholder");return t.multiple||!q.value?ht:o.selectedLabel}),le=se(()=>Q3?null:"mouseenter");Dt(()=>t.modelValue,(Me,ht)=>{t.multiple&&t.filterable&&!t.reserveKeyword&&(o.inputValue="",ie("")),Ae(),!Cl(Me,ht)&&t.validateEvent&&(L==null||L.validate("change").catch(Qt=>void 0))},{flush:"post",deep:!0}),Dt(()=>T.value,Me=>{Me?ie(o.inputValue):(o.inputValue="",o.previousQuery=null,o.isBeforeHide=!0),n("visible-change",Me)}),Dt(()=>o.options.entries(),()=>{var Me;if(!bi)return;const ht=((Me=a.value)==null?void 0:Me.querySelectorAll("input"))||[];(!t.filterable&&!t.defaultFirstOption&&!ic(t.modelValue)||!Array.from(ht).includes(document.activeElement))&&Ae(),t.defaultFirstOption&&(t.filterable||t.remote)&&Ne.value&&be()},{flush:"post"}),Dt(()=>o.hoveringIndex,Me=>{Ms(Me)&&Me>-1?P.value=ne.value[Me]||{}:P.value={},ne.value.forEach(ht=>{ht.hover=P.value===ht})}),Au(()=>{o.isBeforeHide||ge()});const ie=Me=>{o.previousQuery===Me||E.value||(o.previousQuery=Me,t.filterable&&Ut(t.filterMethod)?t.filterMethod(Me):t.filterable&&t.remote&&Ut(t.remoteMethod)&&t.remoteMethod(Me),t.defaultFirstOption&&(t.filterable||t.remote)&&Ne.value?Jn(be):Jn(Ee))},be=()=>{const Me=ne.value.filter(nn=>nn.visible&&!nn.disabled&&!nn.states.groupDisabled),ht=Me.find(nn=>nn.created),Qt=Me[0];o.hoveringIndex=ue(ne.value,ht||Qt)},Ae=()=>{if(t.multiple)o.selectedLabel="";else{const ht=Bt(t.modelValue)?t.modelValue[0]:t.modelValue,Qt=_e(ht);o.selectedLabel=Qt.currentLabel,o.selected=Qt;return}const Me=[];ic(t.modelValue)||xa(t.modelValue).forEach(ht=>{Me.push(_e(ht))}),o.selected=Me},_e=Me=>{let ht;const Qt=cb(Me).toLowerCase()==="object",nn=cb(Me).toLowerCase()==="null",Bn=cb(Me).toLowerCase()==="undefined";for(let Ot=o.cachedOptions.size-1;Ot>=0;Ot--){const we=me.value[Ot];if(Qt?cr(we.value,t.valueKey)===cr(Me,t.valueKey):we.value===Me){ht={value:Me,currentLabel:we.currentLabel,get isDisabled(){return we.isDisabled}};break}}if(ht)return ht;const Vi=Qt?Me.label:!nn&&!Bn?Me:"";return{value:Me,currentLabel:Vi}},Ee=()=>{t.multiple?o.hoveringIndex=ne.value.findIndex(Me=>o.selected.some(ht=>yt(ht)===yt(Me))):o.hoveringIndex=ne.value.findIndex(Me=>yt(Me)===yt(o.selected))},he=()=>{o.selectionWidth=l.value.getBoundingClientRect().width},He=()=>{o.calculatorWidth=f.value.getBoundingClientRect().width},ze=()=>{o.collapseItemWidth=_.value.getBoundingClientRect().width},de=()=>{var Me,ht;(ht=(Me=c.value)==null?void 0:Me.updatePopper)==null||ht.call(Me)},We=()=>{var Me,ht;(ht=(Me=u.value)==null?void 0:Me.updatePopper)==null||ht.call(Me)},ut=()=>{o.inputValue.length>0&&!T.value&&(T.value=!0),ie(o.inputValue)},Re=Me=>{if(o.inputValue=Me.target.value,t.remote)je();else return ut()},je=Ss(()=>{ut()},Pe.value),ae=Me=>{Cl(t.modelValue,Me)||n(SB,Me)},Ue=Me=>Jre(Me,ht=>!o.disabledOptions.has(ht)),W=Me=>{if(t.multiple&&Me.code!==ur.delete&&Me.target.value.length<=0){const ht=xa(t.modelValue).slice(),Qt=Ue(ht);if(Qt<0)return;const nn=ht[Qt];ht.splice(Qt,1),n(kr,ht),ae(ht),n("remove-tag",nn)}},K=(Me,ht)=>{const Qt=o.selected.indexOf(ht);if(Qt>-1&&!J.value){const nn=xa(t.modelValue).slice();nn.splice(Qt,1),n(kr,nn),ae(nn),n("remove-tag",ht.value)}Me.stopPropagation(),Te()},te=Me=>{Me.stopPropagation();const ht=t.multiple?[]:B.value;if(t.multiple)for(const Qt of o.selected)Qt.isDisabled&&ht.push(Qt.value);n(kr,ht),ae(ht),o.hoveringIndex=-1,T.value=!1,n("clear"),Te()},oe=Me=>{var ht;if(t.multiple){const Qt=xa((ht=t.modelValue)!=null?ht:[]).slice(),nn=ue(Qt,Me.value);nn>-1?Qt.splice(nn,1):(t.multipleLimit<=0||Qt.length<t.multipleLimit)&&Qt.push(Me.value),n(kr,Qt),ae(Qt),Me.created&&ie(""),t.filterable&&!t.reserveKeyword&&(o.inputValue="")}else n(kr,Me.value),ae(Me.value),T.value=!1;Te(),!T.value&&Jn(()=>{ee(Me)})},ue=(Me=[],ht)=>{if(!bn(ht))return Me.indexOf(ht);const Qt=t.valueKey;let nn=-1;return Me.some((Bn,Vi)=>Hn(cr(Bn,Qt))===cr(ht,Qt)?(nn=Vi,!0):!1),nn},ee=Me=>{var ht,Qt,nn,Bn,Vi;const ss=Bt(Me)?Me[0]:Me;let Ot=null;if(ss!=null&&ss.value){const we=ne.value.filter(vt=>vt.value===ss.value);we.length>0&&(Ot=we[0].$el)}if(c.value&&Ot){const we=(Bn=(nn=(Qt=(ht=c.value)==null?void 0:ht.popperRef)==null?void 0:Qt.contentRef)==null?void 0:nn.querySelector)==null?void 0:Bn.call(nn,`.${s.be("dropdown","wrap")}`);we&&Goe(we,Ot)}(Vi=b.value)==null||Vi.handleScroll()},Ce=Me=>{o.options.set(Me.value,Me),o.cachedOptions.set(Me.value,Me),Me.disabled&&o.disabledOptions.set(Me.value,Me)},xe=(Me,ht)=>{o.options.get(Me)===ht&&o.options.delete(Me)},ke=se(()=>{var Me,ht;return(ht=(Me=c.value)==null?void 0:Me.popperRef)==null?void 0:ht.contentRef}),Ge=()=>{o.isBeforeHide=!1,Jn(()=>ee(o.selected))},Te=()=>{var Me;(Me=d.value)==null||Me.focus()},Ke=()=>{lt()},Le=Me=>{te(Me)},lt=Me=>{if(T.value=!1,O.value){const ht=new FocusEvent("focus",Me);Jn(()=>M(ht))}},nt=()=>{o.inputValue.length>0?o.inputValue="":T.value=!1},Mt=()=>{J.value||(Q3&&(o.inputHovering=!0),o.menuVisibleOnFocus?o.menuVisibleOnFocus=!1:T.value=!T.value)},$e=()=>{T.value?ne.value[o.hoveringIndex]&&oe(ne.value[o.hoveringIndex]):Mt()},yt=Me=>bn(Me.value)?cr(Me.value,t.valueKey):Me.value,qt=se(()=>ne.value.filter(Me=>Me.visible).every(Me=>Me.disabled)),ct=se(()=>t.multiple?t.collapseTags?o.selected.slice(0,t.maxCollapseTags):o.selected:[]),Pt=se(()=>t.multiple?t.collapseTags?o.selected.slice(t.maxCollapseTags):[]:[]),st=Me=>{if(!T.value){T.value=!0;return}if(!(o.options.size===0||o.filteredOptionsCount===0||E.value)&&!qt.value){Me==="next"?(o.hoveringIndex++,o.hoveringIndex===o.options.size&&(o.hoveringIndex=0)):Me==="prev"&&(o.hoveringIndex--,o.hoveringIndex<0&&(o.hoveringIndex=o.options.size-1));const ht=ne.value[o.hoveringIndex];(ht.disabled===!0||ht.states.groupDisabled===!0||!ht.visible)&&st(Me),Jn(()=>ee(P.value))}},zt=()=>{if(!l.value)return 0;const Me=window.getComputedStyle(l.value);return Number.parseFloat(Me.gap||"6px")},ni=se(()=>{const Me=zt();return{maxWidth:`${_.value&&t.maxCollapseTags===1?o.selectionWidth-o.collapseItemWidth-Me:o.selectionWidth}px`}}),Ct=se(()=>({maxWidth:`${o.selectionWidth}px`})),Jt=se(()=>({width:`${Math.max(o.calculatorWidth,Ife)}px`}));return jr(l,he),jr(f,He),jr(v,de),jr(k,de),jr(y,We),jr(_,ze),ri(()=>{Ae()}),{inputId:F,contentId:i,nsSelect:s,nsInput:r,states:o,isFocused:O,expanded:T,optionsArray:ne,hoverOption:P,selectSize:rt,filteredOptionsCount:Ne,resetCalculatorWidth:He,updateTooltip:de,updateTagTooltip:We,debouncedOnInputChange:je,onInput:Re,deletePrevTag:W,deleteTag:K,deleteSelected:te,handleOptionSelect:oe,scrollToOption:ee,hasModelValue:q,shouldShowPlaceholder:$,currentPlaceholder:X,mouseEnterEventName:le,showClose:G,iconComponent:S,iconReverse:V,validateState:re,validateIcon:U,showNewOption:pe,updateOptions:ge,collapseTagSize:wt,setSelected:Ae,selectDisabled:J,emptyText:Fe,handleCompositionStart:x,handleCompositionUpdate:A,handleCompositionEnd:I,onOptionCreate:Ce,onOptionDestroy:xe,handleMenuEnter:Ge,focus:Te,blur:Ke,handleClearClick:Le,handleClickOutside:lt,handleEsc:nt,toggleMenu:Mt,selectOption:$e,getValueKey:yt,navigateOptions:st,dropdownMenuVisible:D,showTagList:ct,collapseTagList:Pt,tagStyle:ni,collapseTagStyle:Ct,inputStyle:Jt,popperRef:ke,inputRef:d,tooltipRef:c,tagTooltipRef:u,calculatorRef:f,prefixRef:p,suffixRef:m,selectRef:a,wrapperRef:k,selectionRef:l,scrollbarRef:b,menuRef:v,tagMenuRef:y,collapseItemRef:_}};var Mfe=pt({name:"ElOptions",setup(t,{slots:n}){const e=jt(Pw);let i=[];return()=>{var s,r;const o=(s=n.default)==null?void 0:s.call(n),a=[];function l(c){Bt(c)&&c.forEach(u=>{var d,f,p,m;const v=(d=(u==null?void 0:u.type)||{})==null?void 0:d.name;v==="ElOptionGroup"?l(!pn(u.children)&&!Bt(u.children)&&Ut((f=u.children)==null?void 0:f.default)?(p=u.children)==null?void 0:p.default():u.children):v==="ElOption"?a.push((m=u.props)==null?void 0:m.value):Bt(u.children)&&l(u.children)})}return o.length&&l((r=o[0])==null?void 0:r.children),Cl(a,i)||(i=a,e&&(e.states.optionValues=a)),o}}});const Pfe=Ln({name:String,id:String,modelValue:{type:[Array,String,Number,Boolean,Object],default:void 0},autocomplete:{type:String,default:"off"},automaticDropdown:Boolean,size:Am,effect:{type:Ft(String),default:"light"},disabled:Boolean,clearable:Boolean,filterable:Boolean,allowCreate:Boolean,loading:Boolean,popperClass:{type:String,default:""},popperOptions:{type:Ft(Object),default:()=>({})},remote:Boolean,loadingText:String,noMatchText:String,noDataText:String,remoteMethod:Function,filterMethod:Function,multiple:Boolean,multipleLimit:{type:Number,default:0},placeholder:{type:String},defaultFirstOption:Boolean,reserveKeyword:{type:Boolean,default:!0},valueKey:{type:String,default:"value"},collapseTags:Boolean,collapseTagsTooltip:Boolean,maxCollapseTags:{type:Number,default:1},teleported:fE.teleported,persistent:{type:Boolean,default:!0},clearIcon:{type:qr,default:Ew},fitInputWidth:Boolean,suffixIcon:{type:qr,default:q4},tagType:{...bC.type,default:"info"},tagEffect:{...bC.effect,default:"light"},validateEvent:{type:Boolean,default:!0},remoteShowSuffix:Boolean,placement:{type:Ft(String),values:xw,default:"bottom-start"},fallbackPlacements:{type:Ft(Array),default:["bottom-start","top-start","right","left"]},...Qle,...Sh(["ariaLabel"])}),q8="ElSelect",Ofe=pt({name:q8,componentName:q8,components:{ElSelectMenu:Afe,ElOption:gE,ElOptions:Mfe,ElTag:Ihe,ElScrollbar:lE,ElTooltip:$1,ElIcon:yi},directives:{ClickOutside:mE},props:Pfe,emits:[kr,SB,"remove-tag","clear","visible-change","focus","blur"],setup(t,{emit:n}){const e=Rfe(t,n);return es(Pw,Ir({props:t,states:e.states,optionsArray:e.optionsArray,handleOptionSelect:e.handleOptionSelect,onOptionCreate:e.onOptionCreate,onOptionDestroy:e.onOptionDestroy,selectRef:e.selectRef,setSelected:e.setSelected})),{...e}}});function Lfe(t,n,e,i,s,r){const o=ns("el-tag"),a=ns("el-tooltip"),l=ns("el-icon"),c=ns("el-option"),u=ns("el-options"),d=ns("el-scrollbar"),f=ns("el-select-menu"),p=T4("click-outside");return Qi((ve(),it("div",{ref:"selectRef",class:De([t.nsSelect.b(),t.nsSelect.m(t.selectSize)]),[tg(t.mouseEnterEventName)]:m=>t.states.inputHovering=!0,onMouseleave:m=>t.states.inputHovering=!1},[et(a,{ref:"tooltipRef",visible:t.dropdownMenuVisible,placement:t.placement,teleported:t.teleported,"popper-class":[t.nsSelect.e("popper"),t.popperClass],"popper-options":t.popperOptions,"fallback-placements":t.fallbackPlacements,effect:t.effect,pure:"",trigger:"click",transition:`${t.nsSelect.namespace.value}-zoom-in-top`,"stop-popper-mouse-event":!1,"gpu-acceleration":!1,persistent:t.persistent,onBeforeShow:t.handleMenuEnter,onHide:m=>t.states.isBeforeHide=!1},{default:Je(()=>{var m;return[ot("div",{ref:"wrapperRef",class:De([t.nsSelect.e("wrapper"),t.nsSelect.is("focused",t.isFocused),t.nsSelect.is("hovering",t.states.inputHovering),t.nsSelect.is("filterable",t.filterable),t.nsSelect.is("disabled",t.selectDisabled)]),onClick:Ui(t.toggleMenu,["prevent"])},[t.$slots.prefix?(ve(),it("div",{key:0,ref:"prefixRef",class:De(t.nsSelect.e("prefix"))},[Et(t.$slots,"prefix")],2)):_t("v-if",!0),ot("div",{ref:"selectionRef",class:De([t.nsSelect.e("selection"),t.nsSelect.is("near",t.multiple&&!t.$slots.prefix&&!!t.states.selected.length)])},[t.multiple?Et(t.$slots,"tag",{key:0},()=>[(ve(!0),it(Wn,null,Fu(t.showTagList,v=>(ve(),it("div",{key:t.getValueKey(v),class:De(t.nsSelect.e("selected-item"))},[et(o,{closable:!t.selectDisabled&&!v.isDisabled,size:t.collapseTagSize,type:t.tagType,effect:t.tagEffect,"disable-transitions":"",style:Xn(t.tagStyle),onClose:y=>t.deleteTag(y,v)},{default:Je(()=>[ot("span",{class:De(t.nsSelect.e("tags-text"))},[Et(t.$slots,"label",{label:v.currentLabel,value:v.value},()=>[Rn(vn(v.currentLabel),1)])],2)]),_:2},1032,["closable","size","type","effect","style","onClose"])],2))),128)),t.collapseTags&&t.states.selected.length>t.maxCollapseTags?(ve(),At(a,{key:0,ref:"tagTooltipRef",disabled:t.dropdownMenuVisible||!t.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],effect:t.effect,placement:"bottom",teleported:t.teleported},{default:Je(()=>[ot("div",{ref:"collapseItemRef",class:De(t.nsSelect.e("selected-item"))},[et(o,{closable:!1,size:t.collapseTagSize,type:t.tagType,effect:t.tagEffect,"disable-transitions":"",style:Xn(t.collapseTagStyle)},{default:Je(()=>[ot("span",{class:De(t.nsSelect.e("tags-text"))}," + "+vn(t.states.selected.length-t.maxCollapseTags),3)]),_:1},8,["size","type","effect","style"])],2)]),content:Je(()=>[ot("div",{ref:"tagMenuRef",class:De(t.nsSelect.e("selection"))},[(ve(!0),it(Wn,null,Fu(t.collapseTagList,v=>(ve(),it("div",{key:t.getValueKey(v),class:De(t.nsSelect.e("selected-item"))},[et(o,{class:"in-tooltip",closable:!t.selectDisabled&&!v.isDisabled,size:t.collapseTagSize,type:t.tagType,effect:t.tagEffect,"disable-transitions":"",onClose:y=>t.deleteTag(y,v)},{default:Je(()=>[ot("span",{class:De(t.nsSelect.e("tags-text"))},[Et(t.$slots,"label",{label:v.currentLabel,value:v.value},()=>[Rn(vn(v.currentLabel),1)])],2)]),_:2},1032,["closable","size","type","effect","onClose"])],2))),128))],2)]),_:3},8,["disabled","effect","teleported"])):_t("v-if",!0)]):_t("v-if",!0),t.selectDisabled?_t("v-if",!0):(ve(),it("div",{key:1,class:De([t.nsSelect.e("selected-item"),t.nsSelect.e("input-wrapper"),t.nsSelect.is("hidden",!t.filterable)])},[Qi(ot("input",{id:t.inputId,ref:"inputRef","onUpdate:modelValue":v=>t.states.inputValue=v,type:"text",name:t.name,class:De([t.nsSelect.e("input"),t.nsSelect.is(t.selectSize)]),disabled:t.selectDisabled,autocomplete:t.autocomplete,style:Xn(t.inputStyle),role:"combobox",readonly:!t.filterable,spellcheck:"false","aria-activedescendant":((m=t.hoverOption)==null?void 0:m.id)||"","aria-controls":t.contentId,"aria-expanded":t.dropdownMenuVisible,"aria-label":t.ariaLabel,"aria-autocomplete":"none","aria-haspopup":"listbox",onKeydown:[$d(Ui(v=>t.navigateOptions("next"),["stop","prevent"]),["down"]),$d(Ui(v=>t.navigateOptions("prev"),["stop","prevent"]),["up"]),$d(Ui(t.handleEsc,["stop","prevent"]),["esc"]),$d(Ui(t.selectOption,["stop","prevent"]),["enter"]),$d(Ui(t.deletePrevTag,["stop"]),["delete"])],onCompositionstart:t.handleCompositionStart,onCompositionupdate:t.handleCompositionUpdate,onCompositionend:t.handleCompositionEnd,onInput:t.onInput,onClick:Ui(t.toggleMenu,["stop"])},null,46,["id","onUpdate:modelValue","name","disabled","autocomplete","readonly","aria-activedescendant","aria-controls","aria-expanded","aria-label","onKeydown","onCompositionstart","onCompositionupdate","onCompositionend","onInput","onClick"]),[[_L,t.states.inputValue]]),t.filterable?(ve(),it("span",{key:0,ref:"calculatorRef","aria-hidden":"true",class:De(t.nsSelect.e("input-calculator")),textContent:vn(t.states.inputValue)},null,10,["textContent"])):_t("v-if",!0)],2)),t.shouldShowPlaceholder?(ve(),it("div",{key:2,class:De([t.nsSelect.e("selected-item"),t.nsSelect.e("placeholder"),t.nsSelect.is("transparent",!t.hasModelValue||t.expanded&&!t.states.inputValue)])},[t.hasModelValue?Et(t.$slots,"label",{key:0,label:t.currentPlaceholder,value:t.modelValue},()=>[ot("span",null,vn(t.currentPlaceholder),1)]):(ve(),it("span",{key:1},vn(t.currentPlaceholder),1))],2)):_t("v-if",!0)],2),ot("div",{ref:"suffixRef",class:De(t.nsSelect.e("suffix"))},[t.iconComponent&&!t.showClose?(ve(),At(l,{key:0,class:De([t.nsSelect.e("caret"),t.nsSelect.e("icon"),t.iconReverse])},{default:Je(()=>[(ve(),At(Cs(t.iconComponent)))]),_:1},8,["class"])):_t("v-if",!0),t.showClose&&t.clearIcon?(ve(),At(l,{key:1,class:De([t.nsSelect.e("caret"),t.nsSelect.e("icon"),t.nsSelect.e("clear")]),onClick:t.handleClearClick},{default:Je(()=>[(ve(),At(Cs(t.clearIcon)))]),_:1},8,["class","onClick"])):_t("v-if",!0),t.validateState&&t.validateIcon?(ve(),At(l,{key:2,class:De([t.nsInput.e("icon"),t.nsInput.e("validateIcon")])},{default:Je(()=>[(ve(),At(Cs(t.validateIcon)))]),_:1},8,["class"])):_t("v-if",!0)],2)],10,["onClick"])]}),content:Je(()=>[et(f,{ref:"menuRef"},{default:Je(()=>[t.$slots.header?(ve(),it("div",{key:0,class:De(t.nsSelect.be("dropdown","header")),onClick:Ui(()=>{},["stop"])},[Et(t.$slots,"header")],10,["onClick"])):_t("v-if",!0),Qi(et(d,{id:t.contentId,ref:"scrollbarRef",tag:"ul","wrap-class":t.nsSelect.be("dropdown","wrap"),"view-class":t.nsSelect.be("dropdown","list"),class:De([t.nsSelect.is("empty",t.filteredOptionsCount===0)]),role:"listbox","aria-label":t.ariaLabel,"aria-orientation":"vertical"},{default:Je(()=>[t.showNewOption?(ve(),At(c,{key:0,value:t.states.inputValue,created:!0},null,8,["value"])):_t("v-if",!0),et(u,null,{default:Je(()=>[Et(t.$slots,"default")]),_:3})]),_:3},8,["id","wrap-class","view-class","class","aria-label"]),[[ra,t.states.options.size>0&&!t.loading]]),t.$slots.loading&&t.loading?(ve(),it("div",{key:1,class:De(t.nsSelect.be("dropdown","loading"))},[Et(t.$slots,"loading")],2)):t.loading||t.filteredOptionsCount===0?(ve(),it("div",{key:2,class:De(t.nsSelect.be("dropdown","empty"))},[Et(t.$slots,"empty",{},()=>[ot("span",null,vn(t.emptyText),1)])],2)):_t("v-if",!0),t.$slots.footer?(ve(),it("div",{key:3,class:De(t.nsSelect.be("dropdown","footer")),onClick:Ui(()=>{},["stop"])},[Et(t.$slots,"footer")],10,["onClick"])):_t("v-if",!0)]),_:3},512)]),_:3},8,["visible","placement","teleported","popper-class","popper-options","fallback-placements","effect","transition","persistent","onBeforeShow","onHide"])],16,["onMouseleave"])),[[p,t.handleClickOutside,t.popperRef]])}var Bfe=kn(Ofe,[["render",Lfe],["__file","select.vue"]]);const Ffe=pt({name:"ElOptionGroup",componentName:"ElOptionGroup",props:{label:String,disabled:Boolean},setup(t){const n=Zt("select"),e=Se(null),i=On(),s=Se([]);es(VF,Ir({...wm(t)}));const r=se(()=>s.value.some(c=>c.visible===!0)),o=c=>{var u,d;return((u=c.type)==null?void 0:u.name)==="ElOption"&&!!((d=c.component)!=null&&d.proxy)},a=c=>{const u=xa(c),d=[];return u.forEach(f=>{var p,m;o(f)?d.push(f.component.proxy):(p=f.children)!=null&&p.length?d.push(...a(f.children)):(m=f.component)!=null&&m.subTree&&d.push(...a(f.component.subTree))}),d},l=()=>{s.value=a(i.subTree)};return ri(()=>{l()}),Ooe(e,l,{attributes:!0,subtree:!0,childList:!0}),{groupRef:e,visible:r,ns:n}}});function Nfe(t,n,e,i,s,r){return Qi((ve(),it("ul",{ref:"groupRef",class:De(t.ns.be("group","wrap"))},[ot("li",{class:De(t.ns.be("group","title"))},vn(t.label),3),ot("li",null,[ot("ul",{class:De(t.ns.b("group"))},[Et(t.$slots,"default")],2)])],2)),[[ra,t.visible]])}var DF=kn(Ffe,[["render",Nfe],["__file","option-group.vue"]]);const vE=xs(Bfe,{Option:gE,OptionGroup:DF}),bE=Al(gE);Al(DF);const Vfe=Ln({type:{type:String,default:"line",values:["line","circle","dashboard"]},percentage:{type:Number,default:0,validator:t=>t>=0&&t<=100},status:{type:String,default:"",values:["","success","exception","warning"]},indeterminate:Boolean,duration:{type:Number,default:3},strokeWidth:{type:Number,default:6},strokeLinecap:{type:Ft(String),default:"round"},textInside:Boolean,width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:Ft([String,Array,Function]),default:""},striped:Boolean,stripedFlow:Boolean,format:{type:Ft(Function),default:t=>`${t}%`}}),Dfe=pt({name:"ElProgress"}),$fe=pt({...Dfe,props:Vfe,setup(t){const n=t,e={success:"#13ce66",exception:"#ff4949",warning:"#e6a23c",default:"#20a0ff"},i=Zt("progress"),s=se(()=>{const E={width:`${n.percentage}%`,animationDuration:`${n.duration}s`},x=b(n.percentage);return x.includes("gradient")?E.background=x:E.backgroundColor=x,E}),r=se(()=>(n.strokeWidth/n.width*100).toFixed(1)),o=se(()=>["circle","dashboard"].includes(n.type)?Number.parseInt(`${50-Number.parseFloat(r.value)/2}`,10):0),a=se(()=>{const E=o.value,x=n.type==="dashboard";return`
          M 50 50
          m 0 ${x?"":"-"}${E}
          a ${E} ${E} 0 1 1 0 ${x?"-":""}${E*2}
          a ${E} ${E} 0 1 1 0 ${x?"":"-"}${E*2}
          `}),l=se(()=>2*Math.PI*o.value),c=se(()=>n.type==="dashboard"?.75:1),u=se(()=>`${-1*l.value*(1-c.value)/2}px`),d=se(()=>({strokeDasharray:`${l.value*c.value}px, ${l.value}px`,strokeDashoffset:u.value})),f=se(()=>({strokeDasharray:`${l.value*c.value*(n.percentage/100)}px, ${l.value}px`,strokeDashoffset:u.value,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease, opacity ease 0.6s"})),p=se(()=>{let E;return n.color?E=b(n.percentage):E=e[n.status]||e.default,E}),m=se(()=>n.status==="warning"?Z4:n.type==="line"?n.status==="success"?G4:Ew:n.status==="success"?bB:Qf),v=se(()=>n.type==="line"?12+n.strokeWidth*.4:n.width*.111111+2),y=se(()=>n.format(n.percentage));function _(E){const x=100/E.length;return E.map((I,k)=>pn(I)?{color:I,percentage:(k+1)*x}:I).sort((I,k)=>I.percentage-k.percentage)}const b=E=>{var x;const{color:A}=n;if(Ut(A))return A(E);if(pn(A))return A;{const I=_(A);for(const k of I)if(k.percentage>E)return k.color;return(x=I[I.length-1])==null?void 0:x.color}};return(E,x)=>(ve(),it("div",{class:De([H(i).b(),H(i).m(E.type),H(i).is(E.status),{[H(i).m("without-text")]:!E.showText,[H(i).m("text-inside")]:E.textInside}]),role:"progressbar","aria-valuenow":E.percentage,"aria-valuemin":"0","aria-valuemax":"100"},[E.type==="line"?(ve(),it("div",{key:0,class:De(H(i).b("bar"))},[ot("div",{class:De(H(i).be("bar","outer")),style:Xn({height:`${E.strokeWidth}px`})},[ot("div",{class:De([H(i).be("bar","inner"),{[H(i).bem("bar","inner","indeterminate")]:E.indeterminate},{[H(i).bem("bar","inner","striped")]:E.striped},{[H(i).bem("bar","inner","striped-flow")]:E.stripedFlow}]),style:Xn(H(s))},[(E.showText||E.$slots.default)&&E.textInside?(ve(),it("div",{key:0,class:De(H(i).be("bar","innerText"))},[Et(E.$slots,"default",{percentage:E.percentage},()=>[ot("span",null,vn(H(y)),1)])],2)):_t("v-if",!0)],6)],6)],2)):(ve(),it("div",{key:1,class:De(H(i).b("circle")),style:Xn({height:`${E.width}px`,width:`${E.width}px`})},[(ve(),it("svg",{viewBox:"0 0 100 100"},[ot("path",{class:De(H(i).be("circle","track")),d:H(a),stroke:`var(${H(i).cssVarName("fill-color-light")}, #e5e9f2)`,"stroke-linecap":E.strokeLinecap,"stroke-width":H(r),fill:"none",style:Xn(H(d))},null,14,["d","stroke","stroke-linecap","stroke-width"]),ot("path",{class:De(H(i).be("circle","path")),d:H(a),stroke:H(p),fill:"none",opacity:E.percentage?1:0,"stroke-linecap":E.strokeLinecap,"stroke-width":H(r),style:Xn(H(f))},null,14,["d","stroke","opacity","stroke-linecap","stroke-width"])]))],6)),(E.showText||E.$slots.default)&&!E.textInside?(ve(),it("div",{key:2,class:De(H(i).e("text")),style:Xn({fontSize:`${H(v)}px`})},[Et(E.$slots,"default",{percentage:E.percentage},()=>[E.status?(ve(),At(H(yi),{key:1},{default:Je(()=>[(ve(),At(Cs(H(m))))]),_:1})):(ve(),it("span",{key:0},vn(H(y)),1))])],6)):_t("v-if",!0)],10,["aria-valuenow"]))}});var zfe=kn($fe,[["__file","progress.vue"]]);const Hfe=xs(zfe),o5=function(t){var n;return(n=t.target)==null?void 0:n.closest("td")},Ufe=function(t,n,e,i,s){if(!n&&!i&&(!s||Array.isArray(s)&&!s.length))return t;typeof e=="string"?e=e==="descending"?-1:1:e=e&&e<0?-1:1;const r=i?null:function(a,l){return s?(Array.isArray(s)||(s=[s]),s.map(c=>typeof c=="string"?cr(a,c):c(a,l,t))):(n!=="$key"&&bn(a)&&"$value"in a&&(a=a.$value),[bn(a)?cr(a,n):a])},o=function(a,l){if(i)return i(a.value,l.value);for(let c=0,u=a.key.length;c<u;c++){if(a.key[c]<l.key[c])return-1;if(a.key[c]>l.key[c])return 1}return 0};return t.map((a,l)=>({value:a,index:l,key:r?r(a,l):null})).sort((a,l)=>{let c=o(a,l);return c||(c=a.index-l.index),c*+e}).map(a=>a.value)},$F=function(t,n){let e=null;return t.columns.forEach(i=>{i.id===n&&(e=i)}),e},Wfe=function(t,n){let e=null;for(let i=0;i<t.columns.length;i++){const s=t.columns[i];if(s.columnKey===n){e=s;break}}return e||Fa("ElTable",`No column matching with column-key: ${n}`),e},K8=function(t,n,e){const i=(n.className||"").match(new RegExp(`${e}-table_[^\\s]+`,"gm"));return i?$F(t,i[0]):null},dr=(t,n)=>{if(!t)throw new Error("Row is required when get row identity");if(typeof n=="string"){if(!n.includes("."))return`${t[n]}`;const e=n.split(".");let i=t;for(const s of e)i=i[s];return`${i}`}else if(typeof n=="function")return n.call(null,t)},Kd=function(t,n){const e={};return(t||[]).forEach((i,s)=>{e[dr(i,n)]={row:i,index:s}}),e};function jfe(t,n){const e={};let i;for(i in t)e[i]=t[i];for(i in n)if(Mn(n,i)){const s=n[i];typeof s<"u"&&(e[i]=s)}return e}function _E(t){return t===""||t!==void 0&&(t=Number.parseInt(t,10),Number.isNaN(t)&&(t="")),t}function zF(t){return t===""||t!==void 0&&(t=_E(t),Number.isNaN(t)&&(t=80)),t}function qfe(t){return typeof t=="number"?t:typeof t=="string"?/^\d+(?:px)?$/.test(t)?Number.parseInt(t,10):t:null}function Kfe(...t){return t.length===0?n=>n:t.length===1?t[0]:t.reduce((n,e)=>(...i)=>n(e(...i)))}function p_(t,n,e,i,s,r){let o=r??0,a=!1;const l=t.indexOf(n),c=l!==-1,u=s==null?void 0:s.call(null,n,r),d=p=>{p==="add"?t.push(n):t.splice(l,1),a=!0},f=p=>{let m=0;const v=(i==null?void 0:i.children)&&p[i.children];return v&&Bt(v)&&(m+=v.length,v.forEach(y=>{m+=f(y)})),m};return(!s||u)&&(mc(e)?e&&!c?d("add"):!e&&c&&d("remove"):d(c?"remove":"add")),!(i!=null&&i.checkStrictly)&&(i!=null&&i.children)&&Bt(n[i.children])&&n[i.children].forEach(p=>{p_(t,p,e??!c,i,s,o+1),o+=f(p)+1}),a}function Gfe(t,n,e="children",i="hasChildren"){const s=o=>!(Array.isArray(o)&&o.length);function r(o,a,l){n(o,a,l),a.forEach(c=>{if(c[i]){n(c,null,l+1);return}const u=c[e];s(u)||r(c,u,l+1)})}t.forEach(o=>{if(o[i]){n(o,null,0);return}const a=o[e];s(a)||r(o,a,0)})}let Go=null;function Yfe(t,n,e,i){if((Go==null?void 0:Go.trigger)===e)return;Go==null||Go();const s=i==null?void 0:i.refs.tableWrapper,r=s==null?void 0:s.dataset.prefix,o={strategy:"fixed",...t.popperOptions},a=et($1,{content:n,virtualTriggering:!0,virtualRef:e,appendTo:s,placement:"top",transition:"none",offset:0,hideAfter:0,...t,popperOptions:o,onHide:()=>{Go==null||Go()}});a.appContext={...i.appContext,...i};const l=document.createElement("div");r_(a,l),a.component.exposed.onOpen();const c=s==null?void 0:s.querySelector(`.${r}-scrollbar__wrap`);Go=()=>{r_(null,l),c==null||c.removeEventListener("scroll",Go),Go=null},Go.trigger=e,c==null||c.addEventListener("scroll",Go)}function HF(t){return t.children?eoe(t.children,HF):[t]}function G8(t,n){return t+n.colSpan}const UF=(t,n,e,i)=>{let s=0,r=t;const o=e.states.columns.value;if(i){const l=HF(i[t]);s=o.slice(0,o.indexOf(l[0])).reduce(G8,0),r=s+l.reduce(G8,0)-1}else s=t;let a;switch(n){case"left":r<e.states.fixedLeafColumnsLength.value&&(a="left");break;case"right":s>=o.length-e.states.rightFixedLeafColumnsLength.value&&(a="right");break;default:r<e.states.fixedLeafColumnsLength.value?a="left":s>=o.length-e.states.rightFixedLeafColumnsLength.value&&(a="right")}return a?{direction:a,start:s,after:r}:{}},wE=(t,n,e,i,s,r=0)=>{const o=[],{direction:a,start:l,after:c}=UF(n,e,i,s);if(a){const u=a==="left";o.push(`${t}-fixed-column--${a}`),u&&c+r===i.states.fixedLeafColumnsLength.value-1?o.push("is-last-column"):!u&&l-r===i.states.columns.value.length-i.states.rightFixedLeafColumnsLength.value&&o.push("is-first-column")}return o};function Y8(t,n){return t+(n.realWidth===null||Number.isNaN(n.realWidth)?Number(n.width):n.realWidth)}const yE=(t,n,e,i)=>{const{direction:s,start:r=0,after:o=0}=UF(t,n,e,i);if(!s)return;const a={},l=s==="left",c=e.states.columns.value;return l?a.left=c.slice(0,r).reduce(Y8,0):a.right=c.slice(o+1).reverse().reduce(Y8,0),a},om=(t,n)=>{t&&(Number.isNaN(t[n])||(t[n]=`${t[n]}px`))};function Zfe(t){const n=On(),e=Se(!1),i=Se([]);return{updateExpandRows:()=>{const l=t.data.value||[],c=t.rowKey.value;if(e.value)i.value=l.slice();else if(c){const u=Kd(i.value,c);i.value=l.reduce((d,f)=>{const p=dr(f,c);return u[p]&&d.push(f),d},[])}else i.value=[]},toggleRowExpansion:(l,c)=>{p_(i.value,l,c)&&n.emit("expand-change",l,i.value.slice())},setExpandRowKeys:l=>{n.store.assertRowKey();const c=t.data.value||[],u=t.rowKey.value,d=Kd(c,u);i.value=l.reduce((f,p)=>{const m=d[p];return m&&f.push(m.row),f},[])},isRowExpanded:l=>{const c=t.rowKey.value;return c?!!Kd(i.value,c)[dr(l,c)]:i.value.includes(l)},states:{expandRows:i,defaultExpandAll:e}}}function Xfe(t){const n=On(),e=Se(null),i=Se(null),s=c=>{n.store.assertRowKey(),e.value=c,o(c)},r=()=>{e.value=null},o=c=>{const{data:u,rowKey:d}=t;let f=null;d.value&&(f=(H(u)||[]).find(p=>dr(p,d.value)===c)),i.value=f,n.emit("current-change",i.value,null)};return{setCurrentRowKey:s,restoreCurrentRowKey:r,setCurrentRowByKey:o,updateCurrentRow:c=>{const u=i.value;if(c&&c!==u){i.value=c,n.emit("current-change",i.value,u);return}!c&&u&&(i.value=null,n.emit("current-change",null,u))},updateCurrentRowData:()=>{const c=t.rowKey.value,u=t.data.value||[],d=i.value;if(!u.includes(d)&&d){if(c){const f=dr(d,c);o(f)}else i.value=null;i.value===null&&n.emit("current-change",null,d)}else e.value&&(o(e.value),r())},states:{_currentRowKey:e,currentRow:i}}}function Jfe(t){const n=Se([]),e=Se({}),i=Se(16),s=Se(!1),r=Se({}),o=Se("hasChildren"),a=Se("children"),l=Se(!1),c=On(),u=se(()=>{if(!t.rowKey.value)return{};const b=t.data.value||[];return f(b)}),d=se(()=>{const b=t.rowKey.value,E=Object.keys(r.value),x={};return E.length&&E.forEach(A=>{if(r.value[A].length){const I={children:[]};r.value[A].forEach(k=>{const O=dr(k,b);I.children.push(O),k[o.value]&&!x[O]&&(x[O]={children:[]})}),x[A]=I}}),x}),f=b=>{const E=t.rowKey.value,x={};return Gfe(b,(A,I,k)=>{const O=dr(A,E);Array.isArray(I)?x[O]={children:I.map(M=>dr(M,E)),level:k}:s.value&&(x[O]={children:[],lazy:!0,level:k})},a.value,o.value),x},p=(b=!1,E=(x=>(x=c.store)==null?void 0:x.states.defaultExpandAll.value)())=>{var x;const A=u.value,I=d.value,k=Object.keys(A),O={};if(k.length){const M=H(e),T=[],P=(L,F)=>{if(b)return n.value?E||n.value.includes(F):!!(E||L!=null&&L.expanded);{const B=E||n.value&&n.value.includes(F);return!!(L!=null&&L.expanded||B)}};k.forEach(L=>{const F=M[L],B={...A[L]};if(B.expanded=P(F,L),B.lazy){const{loaded:z=!1,loading:J=!1}=F||{};B.loaded=!!z,B.loading=!!J,T.push(L)}O[L]=B});const R=Object.keys(I);s.value&&R.length&&T.length&&R.forEach(L=>{const F=M[L],B=I[L].children;if(T.includes(L)){if(O[L].children.length!==0)throw new Error("[ElTable]children must be an empty array.");O[L].children=B}else{const{loaded:z=!1,loading:J=!1}=F||{};O[L]={lazy:!0,loaded:!!z,loading:!!J,expanded:P(F,L),children:B,level:""}}})}e.value=O,(x=c.store)==null||x.updateTableScrollY()};Dt(()=>n.value,()=>{p(!0)}),Dt(()=>u.value,()=>{p()}),Dt(()=>d.value,()=>{p()});const m=b=>{n.value=b,p()},v=(b,E)=>{c.store.assertRowKey();const x=t.rowKey.value,A=dr(b,x),I=A&&e.value[A];if(A&&I&&"expanded"in I){const k=I.expanded;E=typeof E>"u"?!I.expanded:E,e.value[A].expanded=E,k!==E&&c.emit("expand-change",b,E),c.store.updateTableScrollY()}},y=b=>{c.store.assertRowKey();const E=t.rowKey.value,x=dr(b,E),A=e.value[x];s.value&&A&&"loaded"in A&&!A.loaded?_(b,x,A):v(b,void 0)},_=(b,E,x)=>{const{load:A}=c.props;A&&!e.value[E].loaded&&(e.value[E].loading=!0,A(b,x,I=>{if(!Array.isArray(I))throw new TypeError("[ElTable] data must be an array");e.value[E].loading=!1,e.value[E].loaded=!0,e.value[E].expanded=!0,I.length&&(r.value[E]=I),c.emit("expand-change",b,!0)}))};return{loadData:_,loadOrToggle:y,toggleTreeExpansion:v,updateTreeExpandKeys:m,updateTreeData:p,normalize:f,states:{expandRowKeys:n,treeData:e,indent:i,lazy:s,lazyTreeNodeMap:r,lazyColumnIdentifier:o,childrenColumnName:a,checkStrictly:l}}}const Qfe=(t,n)=>{const e=n.sortingColumn;return!e||typeof e.sortable=="string"?t:Ufe(t,n.sortProp,n.sortOrder,e.sortMethod,e.sortBy)},kb=t=>{const n=[];return t.forEach(e=>{e.children&&e.children.length>0?n.push.apply(n,kb(e.children)):n.push(e)}),n};function eme(){var t;const n=On(),{size:e}=wm((t=n.proxy)==null?void 0:t.$props),i=Se(null),s=Se([]),r=Se([]),o=Se(!1),a=Se([]),l=Se([]),c=Se([]),u=Se([]),d=Se([]),f=Se([]),p=Se([]),m=Se([]),v=[],y=Se(0),_=Se(0),b=Se(0),E=Se(!1),x=Se([]),A=Se(!1),I=Se(!1),k=Se(null),O=Se({}),M=Se(null),T=Se(null),P=Se(null),R=Se(null),L=Se(null);Dt(s,()=>n.state&&J(!1),{deep:!0});const F=()=>{if(!i.value)throw new Error("[ElTable] prop row-key is required")},B=ae=>{var Ue;(Ue=ae.children)==null||Ue.forEach(W=>{W.fixed=ae.fixed,B(W)})},z=()=>{a.value.forEach(te=>{B(te)}),u.value=a.value.filter(te=>te.fixed===!0||te.fixed==="left"),d.value=a.value.filter(te=>te.fixed==="right"),u.value.length>0&&a.value[0]&&a.value[0].type==="selection"&&!a.value[0].fixed&&(a.value[0].fixed=!0,u.value.unshift(a.value[0]));const ae=a.value.filter(te=>!te.fixed);l.value=[].concat(u.value).concat(ae).concat(d.value);const Ue=kb(ae),W=kb(u.value),K=kb(d.value);y.value=Ue.length,_.value=W.length,b.value=K.length,c.value=[].concat(W).concat(Ue).concat(K),o.value=u.value.length>0||d.value.length>0},J=(ae,Ue=!1)=>{ae&&z(),Ue?n.state.doLayout():n.state.debouncedUpdateLayout()},q=ae=>x.value.some(Ue=>Cl(Ue,ae)),G=()=>{E.value=!1;const ae=x.value;x.value=[],ae.length&&n.emit("selection-change",[])},S=()=>{let ae;if(i.value){ae=[];const Ue=Kd(x.value,i.value),W=Kd(s.value,i.value);for(const K in Ue)Mn(Ue,K)&&!W[K]&&ae.push(Ue[K].row)}else ae=x.value.filter(Ue=>!s.value.includes(Ue));if(ae.length){const Ue=x.value.filter(W=>!ae.includes(W));x.value=Ue,n.emit("selection-change",Ue.slice())}},V=()=>(x.value||[]).slice(),re=(ae,Ue,W=!0)=>{var K,te,oe,ue;const ee={children:(te=(K=n==null?void 0:n.store)==null?void 0:K.states)==null?void 0:te.childrenColumnName.value,checkStrictly:(ue=(oe=n==null?void 0:n.store)==null?void 0:oe.states)==null?void 0:ue.checkStrictly.value};if(p_(x.value,ae,Ue,ee)){const xe=(x.value||[]).slice();W&&n.emit("select",xe,ae),n.emit("selection-change",xe)}},U=()=>{var ae,Ue;const W=I.value?!E.value:!(E.value||x.value.length);E.value=W;let K=!1,te=0;const oe=(Ue=(ae=n==null?void 0:n.store)==null?void 0:ae.states)==null?void 0:Ue.rowKey.value,{childrenColumnName:ue}=n.store.states,ee={children:ue.value,checkStrictly:!1};s.value.forEach((Ce,xe)=>{const ke=xe+te;p_(x.value,Ce,W,ee,k.value,ke)&&(K=!0),te+=Ne(dr(Ce,oe))}),K&&n.emit("selection-change",x.value?x.value.slice():[]),n.emit("select-all",(x.value||[]).slice())},Pe=()=>{const ae=Kd(x.value,i.value);s.value.forEach(Ue=>{const W=dr(Ue,i.value),K=ae[W];K&&(x.value[K.index]=Ue)})},Fe=()=>{var ae;if(((ae=s.value)==null?void 0:ae.length)===0){E.value=!1;return}const{childrenColumnName:Ue}=n.store.states,W=i.value?Kd(x.value,i.value):void 0;let K=0,te=0;const oe=Ce=>W?!!W[dr(Ce,i.value)]:x.value.includes(Ce),ue=Ce=>{var xe;for(const ke of Ce){const Ge=k.value&&k.value.call(null,ke,K);if(oe(ke))te++;else if(!k.value||Ge)return!1;if(K++,(xe=ke[Ue.value])!=null&&xe.length&&!ue(ke[Ue.value]))return!1}return!0},ee=ue(s.value||[]);E.value=te===0?!1:ee},Ne=ae=>{var Ue;if(!n||!n.store)return 0;const{treeData:W}=n.store.states;let K=0;const te=(Ue=W.value[ae])==null?void 0:Ue.children;return te&&(K+=te.length,te.forEach(oe=>{K+=Ne(oe)})),K},ne=(ae,Ue)=>{Array.isArray(ae)||(ae=[ae]);const W={};return ae.forEach(K=>{O.value[K.id]=Ue,W[K.columnKey||K.id]=Ue}),W},me=(ae,Ue,W)=>{T.value&&T.value!==ae&&(T.value.order=null),T.value=ae,P.value=Ue,R.value=W},pe=()=>{let ae=H(r);Object.keys(O.value).forEach(Ue=>{const W=O.value[Ue];if(!W||W.length===0)return;const K=$F({columns:c.value},Ue);K&&K.filterMethod&&(ae=ae.filter(te=>W.some(oe=>K.filterMethod.call(null,oe,te,K))))}),M.value=ae},ge=()=>{s.value=Qfe(M.value,{sortingColumn:T.value,sortProp:P.value,sortOrder:R.value})},rt=(ae=void 0)=>{ae&&ae.filter||pe(),ge()},wt=ae=>{const{tableHeaderRef:Ue}=n.refs;if(!Ue)return;const W=Object.assign({},Ue.filterPanels),K=Object.keys(W);if(K.length)if(typeof ae=="string"&&(ae=[ae]),Array.isArray(ae)){const te=ae.map(oe=>Wfe({columns:c.value},oe));K.forEach(oe=>{const ue=te.find(ee=>ee.id===oe);ue&&(ue.filteredValue=[])}),n.store.commit("filterChange",{column:te,values:[],silent:!0,multi:!0})}else K.forEach(te=>{const oe=c.value.find(ue=>ue.id===te);oe&&(oe.filteredValue=[])}),O.value={},n.store.commit("filterChange",{column:{},values:[],silent:!0})},D=()=>{T.value&&(me(null,null,null),n.store.commit("changeSortCondition",{silent:!0}))},{setExpandRowKeys:$,toggleRowExpansion:X,updateExpandRows:le,states:ie,isRowExpanded:be}=Zfe({data:s,rowKey:i}),{updateTreeExpandKeys:Ae,toggleTreeExpansion:_e,updateTreeData:Ee,loadOrToggle:he,states:He}=Jfe({data:s,rowKey:i}),{updateCurrentRowData:ze,updateCurrentRow:de,setCurrentRowKey:We,states:ut}=Xfe({data:s,rowKey:i});return{assertRowKey:F,updateColumns:z,scheduleLayout:J,isSelected:q,clearSelection:G,cleanSelection:S,getSelectionRows:V,toggleRowSelection:re,_toggleAllSelection:U,toggleAllSelection:null,updateSelectionByRowKey:Pe,updateAllSelected:Fe,updateFilters:ne,updateCurrentRow:de,updateSort:me,execFilter:pe,execSort:ge,execQuery:rt,clearFilter:wt,clearSort:D,toggleRowExpansion:X,setExpandRowKeysAdapter:ae=>{$(ae),Ae(ae)},setCurrentRowKey:We,toggleRowExpansionAdapter:(ae,Ue)=>{c.value.some(({type:K})=>K==="expand")?X(ae,Ue):_e(ae,Ue)},isRowExpanded:be,updateExpandRows:le,updateCurrentRowData:ze,loadOrToggle:he,updateTreeData:Ee,states:{tableSize:e,rowKey:i,data:s,_data:r,isComplex:o,_columns:a,originColumns:l,columns:c,fixedColumns:u,rightFixedColumns:d,leafColumns:f,fixedLeafColumns:p,rightFixedLeafColumns:m,updateOrderFns:v,leafColumnsLength:y,fixedLeafColumnsLength:_,rightFixedLeafColumnsLength:b,isAllSelected:E,selection:x,reserveSelection:A,selectOnIndeterminate:I,selectable:k,filters:O,filteredData:M,sortingColumn:T,sortProp:P,sortOrder:R,hoverRow:L,...ie,...He,...ut}}}function _C(t,n){return t.map(e=>{var i;return e.id===n.id?n:((i=e.children)!=null&&i.length&&(e.children=_C(e.children,n)),e)})}function wC(t){t.forEach(n=>{var e,i;n.no=(e=n.getColumnIndex)==null?void 0:e.call(n),(i=n.children)!=null&&i.length&&wC(n.children)}),t.sort((n,e)=>n.no-e.no)}function tme(){const t=On(),n=eme();return{ns:Zt("table"),...n,mutations:{setData(o,a){const l=H(o._data)!==a;o.data.value=a,o._data.value=a,t.store.execQuery(),t.store.updateCurrentRowData(),t.store.updateExpandRows(),t.store.updateTreeData(t.store.states.defaultExpandAll.value),H(o.reserveSelection)?(t.store.assertRowKey(),t.store.updateSelectionByRowKey()):l?t.store.clearSelection():t.store.cleanSelection(),t.store.updateAllSelected(),t.$ready&&t.store.scheduleLayout()},insertColumn(o,a,l,c){const u=H(o._columns);let d=[];l?(l&&!l.children&&(l.children=[]),l.children.push(a),d=_C(u,l)):(u.push(a),d=u),wC(d),o._columns.value=d,o.updateOrderFns.push(c),a.type==="selection"&&(o.selectable.value=a.selectable,o.reserveSelection.value=a.reserveSelection),t.$ready&&(t.store.updateColumns(),t.store.scheduleLayout())},updateColumnOrder(o,a){var l;((l=a.getColumnIndex)==null?void 0:l.call(a))!==a.no&&(wC(o._columns.value),t.$ready&&t.store.updateColumns())},removeColumn(o,a,l,c){const u=H(o._columns)||[];if(l)l.children.splice(l.children.findIndex(f=>f.id===a.id),1),Jn(()=>{var f;((f=l.children)==null?void 0:f.length)===0&&delete l.children}),o._columns.value=_C(u,l);else{const f=u.indexOf(a);f>-1&&(u.splice(f,1),o._columns.value=u)}const d=o.updateOrderFns.indexOf(c);d>-1&&o.updateOrderFns.splice(d,1),t.$ready&&(t.store.updateColumns(),t.store.scheduleLayout())},sort(o,a){const{prop:l,order:c,init:u}=a;if(l){const d=H(o.columns).find(f=>f.property===l);d&&(d.order=c,t.store.updateSort(d,l,c),t.store.commit("changeSortCondition",{init:u}))}},changeSortCondition(o,a){const{sortingColumn:l,sortProp:c,sortOrder:u}=o,d=H(l),f=H(c),p=H(u);p===null&&(o.sortingColumn.value=null,o.sortProp.value=null);const m={filter:!0};t.store.execQuery(m),(!a||!(a.silent||a.init))&&t.emit("sort-change",{column:d,prop:f,order:p}),t.store.updateTableScrollY()},filterChange(o,a){const{column:l,values:c,silent:u}=a,d=t.store.updateFilters(l,c);t.store.execQuery(),u||t.emit("filter-change",d),t.store.updateTableScrollY()},toggleAllSelection(){t.store.toggleAllSelection()},rowSelectedChanged(o,a){t.store.toggleRowSelection(a),t.store.updateAllSelected()},setHoverRow(o,a){o.hoverRow.value=a},setCurrentRow(o,a){t.store.updateCurrentRow(a)}},commit:function(o,...a){const l=t.store.mutations;if(l[o])l[o].apply(t,[t.store.states].concat(a));else throw new Error(`Action not found: ${o}`)},updateTableScrollY:function(){Jn(()=>t.layout.updateScrollY.apply(t.layout))}}}const mg={rowKey:"rowKey",defaultExpandAll:"defaultExpandAll",selectOnIndeterminate:"selectOnIndeterminate",indent:"indent",lazy:"lazy",data:"data","treeProps.hasChildren":{key:"lazyColumnIdentifier",default:"hasChildren"},"treeProps.children":{key:"childrenColumnName",default:"children"},"treeProps.checkStrictly":{key:"checkStrictly",default:!1}};function nme(t,n){if(!t)throw new Error("Table is required.");const e=tme();return e.toggleAllSelection=Ss(e._toggleAllSelection,10),Object.keys(mg).forEach(i=>{WF(jF(n,i),i,e)}),ime(e,n),e}function ime(t,n){Object.keys(mg).forEach(e=>{Dt(()=>jF(n,e),i=>{WF(i,e,t)})})}function WF(t,n,e){let i=t,s=mg[n];typeof mg[n]=="object"&&(s=s.key,i=i||mg[n].default),e.states[s].value=i}function jF(t,n){if(n.includes(".")){const e=n.split(".");let i=t;return e.forEach(s=>{i=i[s]}),i}else return t[n]}class sme{constructor(n){this.observers=[],this.table=null,this.store=null,this.columns=[],this.fit=!0,this.showHeader=!0,this.height=Se(null),this.scrollX=Se(!1),this.scrollY=Se(!1),this.bodyWidth=Se(null),this.fixedWidth=Se(null),this.rightFixedWidth=Se(null),this.gutterWidth=0;for(const e in n)Mn(n,e)&&(is(this[e])?this[e].value=n[e]:this[e]=n[e]);if(!this.table)throw new Error("Table is required for Table Layout");if(!this.store)throw new Error("Store is required for Table Layout")}updateScrollY(){if(this.height.value===null)return!1;const e=this.table.refs.scrollBarRef;if(this.table.vnode.el&&(e!=null&&e.wrapRef)){let i=!0;const s=this.scrollY.value;return i=e.wrapRef.scrollHeight>e.wrapRef.clientHeight,this.scrollY.value=i,s!==i}return!1}setHeight(n,e="height"){if(!bi)return;const i=this.table.vnode.el;if(n=qfe(n),this.height.value=Number(n),!i&&(n||n===0))return Jn(()=>this.setHeight(n,e));typeof n=="number"?(i.style[e]=`${n}px`,this.updateElsHeight()):typeof n=="string"&&(i.style[e]=n,this.updateElsHeight())}setMaxHeight(n){this.setHeight(n,"max-height")}getFlattenColumns(){const n=[];return this.table.store.states.columns.value.forEach(i=>{i.isColumnGroup?n.push.apply(n,i.columns):n.push(i)}),n}updateElsHeight(){this.updateScrollY(),this.notifyObservers("scrollable")}headerDisplayNone(n){if(!n)return!0;let e=n;for(;e.tagName!=="DIV";){if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}updateColumnsWidth(){if(!bi)return;const n=this.fit,e=this.table.vnode.el.clientWidth;let i=0;const s=this.getFlattenColumns(),r=s.filter(l=>typeof l.width!="number");if(s.forEach(l=>{typeof l.width=="number"&&l.realWidth&&(l.realWidth=null)}),r.length>0&&n){if(s.forEach(l=>{i+=Number(l.width||l.minWidth||80)}),i<=e){this.scrollX.value=!1;const l=e-i;if(r.length===1)r[0].realWidth=Number(r[0].minWidth||80)+l;else{const c=r.reduce((f,p)=>f+Number(p.minWidth||80),0),u=l/c;let d=0;r.forEach((f,p)=>{if(p===0)return;const m=Math.floor(Number(f.minWidth||80)*u);d+=m,f.realWidth=Number(f.minWidth||80)+m}),r[0].realWidth=Number(r[0].minWidth||80)+l-d}}else this.scrollX.value=!0,r.forEach(l=>{l.realWidth=Number(l.minWidth)});this.bodyWidth.value=Math.max(i,e),this.table.state.resizeState.value.width=this.bodyWidth.value}else s.forEach(l=>{!l.width&&!l.minWidth?l.realWidth=80:l.realWidth=Number(l.width||l.minWidth),i+=l.realWidth}),this.scrollX.value=i>e,this.bodyWidth.value=i;const o=this.store.states.fixedColumns.value;if(o.length>0){let l=0;o.forEach(c=>{l+=Number(c.realWidth||c.width)}),this.fixedWidth.value=l}const a=this.store.states.rightFixedColumns.value;if(a.length>0){let l=0;a.forEach(c=>{l+=Number(c.realWidth||c.width)}),this.rightFixedWidth.value=l}this.notifyObservers("columns")}addObserver(n){this.observers.push(n)}removeObserver(n){const e=this.observers.indexOf(n);e!==-1&&this.observers.splice(e,1)}notifyObservers(n){this.observers.forEach(i=>{var s,r;switch(n){case"columns":(s=i.state)==null||s.onColumnsChange(this);break;case"scrollable":(r=i.state)==null||r.onScrollableChange(this);break;default:throw new Error(`Table Layout don't have event ${n}.`)}})}}const{CheckboxGroup:rme}=ph,ome=pt({name:"ElTableFilterPanel",components:{ElCheckbox:ph,ElCheckboxGroup:rme,ElScrollbar:lE,ElTooltip:$1,ElIcon:yi,ArrowDown:q4,ArrowUp:Joe},directives:{ClickOutside:mE},props:{placement:{type:String,default:"bottom-start"},store:{type:Object},column:{type:Object},upDataColumn:{type:Function}},setup(t){const n=On(),{t:e}=xm(),i=Zt("table-filter"),s=n==null?void 0:n.parent;s.filterPanels.value[t.column.id]||(s.filterPanels.value[t.column.id]=n);const r=Se(!1),o=Se(null),a=se(()=>t.column&&t.column.filters),l=se(()=>t.column.filterClassName?`${i.b()} ${t.column.filterClassName}`:i.b()),c=se({get:()=>{var A;return(((A=t.column)==null?void 0:A.filteredValue)||[])[0]},set:A=>{u.value&&(typeof A<"u"&&A!==null?u.value.splice(0,1,A):u.value.splice(0,1))}}),u=se({get(){return t.column?t.column.filteredValue||[]:[]},set(A){t.column&&t.upDataColumn("filteredValue",A)}}),d=se(()=>t.column?t.column.filterMultiple:!0),f=A=>A.value===c.value,p=()=>{r.value=!1},m=A=>{A.stopPropagation(),r.value=!r.value},v=()=>{r.value=!1},y=()=>{E(u.value),p()},_=()=>{u.value=[],E(u.value),p()},b=A=>{c.value=A,E(typeof A<"u"&&A!==null?u.value:[]),p()},E=A=>{t.store.commit("filterChange",{column:t.column,values:A}),t.store.updateAllSelected()};Dt(r,A=>{t.column&&t.upDataColumn("filterOpened",A)},{immediate:!0});const x=se(()=>{var A,I;return(I=(A=o.value)==null?void 0:A.popperRef)==null?void 0:I.contentRef});return{tooltipVisible:r,multiple:d,filterClassName:l,filteredValue:u,filterValue:c,filters:a,handleConfirm:y,handleReset:_,handleSelect:b,isActive:f,t:e,ns:i,showFilterPanel:m,hideFilterPanel:v,popperPaneRef:x,tooltip:o}}});function ame(t,n,e,i,s,r){const o=ns("el-checkbox"),a=ns("el-checkbox-group"),l=ns("el-scrollbar"),c=ns("arrow-up"),u=ns("arrow-down"),d=ns("el-icon"),f=ns("el-tooltip"),p=T4("click-outside");return ve(),At(f,{ref:"tooltip",visible:t.tooltipVisible,offset:0,placement:t.placement,"show-arrow":!1,"stop-popper-mouse-event":!1,teleported:"",effect:"light",pure:"","popper-class":t.filterClassName,persistent:""},{content:Je(()=>[t.multiple?(ve(),it("div",{key:0},[ot("div",{class:De(t.ns.e("content"))},[et(l,{"wrap-class":t.ns.e("wrap")},{default:Je(()=>[et(a,{modelValue:t.filteredValue,"onUpdate:modelValue":m=>t.filteredValue=m,class:De(t.ns.e("checkbox-group"))},{default:Je(()=>[(ve(!0),it(Wn,null,Fu(t.filters,m=>(ve(),At(o,{key:m.value,value:m.value},{default:Je(()=>[Rn(vn(m.text),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue","onUpdate:modelValue","class"])]),_:1},8,["wrap-class"])],2),ot("div",{class:De(t.ns.e("bottom"))},[ot("button",{class:De({[t.ns.is("disabled")]:t.filteredValue.length===0}),disabled:t.filteredValue.length===0,type:"button",onClick:t.handleConfirm},vn(t.t("el.table.confirmFilter")),11,["disabled","onClick"]),ot("button",{type:"button",onClick:t.handleReset},vn(t.t("el.table.resetFilter")),9,["onClick"])],2)])):(ve(),it("ul",{key:1,class:De(t.ns.e("list"))},[ot("li",{class:De([t.ns.e("list-item"),{[t.ns.is("active")]:t.filterValue===void 0||t.filterValue===null}]),onClick:m=>t.handleSelect(null)},vn(t.t("el.table.clearFilter")),11,["onClick"]),(ve(!0),it(Wn,null,Fu(t.filters,m=>(ve(),it("li",{key:m.value,class:De([t.ns.e("list-item"),t.ns.is("active",t.isActive(m))]),label:m.value,onClick:v=>t.handleSelect(m.value)},vn(m.text),11,["label","onClick"]))),128))],2))]),default:Je(()=>[Qi((ve(),it("span",{class:De([`${t.ns.namespace.value}-table__column-filter-trigger`,`${t.ns.namespace.value}-none-outline`]),onClick:t.showFilterPanel},[et(d,null,{default:Je(()=>[Et(t.$slots,"filter-icon",{},()=>[t.column.filterOpened?(ve(),At(c,{key:0})):(ve(),At(u,{key:1}))])]),_:3})],10,["onClick"])),[[p,t.hideFilterPanel,t.popperPaneRef]])]),_:3},8,["visible","placement","popper-class"])}var lme=kn(ome,[["render",ame],["__file","filter-panel.vue"]]);function qF(t){const n=On();dw(()=>{e.value.addObserver(n)}),ri(()=>{i(e.value),s(e.value)}),R1(()=>{i(e.value),s(e.value)}),ym(()=>{e.value.removeObserver(n)});const e=se(()=>{const r=t.layout;if(!r)throw new Error("Can not find table layout.");return r}),i=r=>{var o;const a=((o=t.vnode.el)==null?void 0:o.querySelectorAll("colgroup > col"))||[];if(!a.length)return;const l=r.getFlattenColumns(),c={};l.forEach(u=>{c[u.id]=u});for(let u=0,d=a.length;u<d;u++){const f=a[u],p=f.getAttribute("name"),m=c[p];m&&f.setAttribute("width",m.realWidth||m.width)}},s=r=>{var o,a;const l=((o=t.vnode.el)==null?void 0:o.querySelectorAll("colgroup > col[name=gutter]"))||[];for(let u=0,d=l.length;u<d;u++)l[u].setAttribute("width",r.scrollY.value?r.gutterWidth:"0");const c=((a=t.vnode.el)==null?void 0:a.querySelectorAll("th.gutter"))||[];for(let u=0,d=c.length;u<d;u++){const f=c[u];f.style.width=r.scrollY.value?`${r.gutterWidth}px`:"0",f.style.display=r.scrollY.value?"":"none"}};return{tableLayout:e.value,onColumnsChange:i,onScrollableChange:s}}const Il=Symbol("ElTable");function cme(t,n){const e=On(),i=jt(Il),s=v=>{v.stopPropagation()},r=(v,y)=>{!y.filters&&y.sortable?m(v,y,!1):y.filterable&&!y.sortable&&s(v),i==null||i.emit("header-click",y,v)},o=(v,y)=>{i==null||i.emit("header-contextmenu",y,v)},a=Se(null),l=Se(!1),c=Se({}),u=(v,y)=>{if(bi&&!(y.children&&y.children.length>0)&&a.value&&t.border){l.value=!0;const _=i;n("set-drag-visible",!0);const E=(_==null?void 0:_.vnode.el).getBoundingClientRect().left,x=e.vnode.el.querySelector(`th.${y.id}`),A=x.getBoundingClientRect(),I=A.left-E+30;sc(x,"noclick"),c.value={startMouseLeft:v.clientX,startLeft:A.right-E,startColumnLeft:A.left-E,tableLeft:E};const k=_==null?void 0:_.refs.resizeProxy;k.style.left=`${c.value.startLeft}px`,document.onselectstart=function(){return!1},document.ondragstart=function(){return!1};const O=T=>{const P=T.clientX-c.value.startMouseLeft,R=c.value.startLeft+P;k.style.left=`${Math.max(I,R)}px`},M=()=>{if(l.value){const{startColumnLeft:T,startLeft:P}=c.value,L=Number.parseInt(k.style.left,10)-T;y.width=y.realWidth=L,_==null||_.emit("header-dragend",y.width,P-T,y,v),requestAnimationFrame(()=>{t.store.scheduleLayout(!1,!0)}),document.body.style.cursor="",l.value=!1,a.value=null,c.value={},n("set-drag-visible",!1)}document.removeEventListener("mousemove",O),document.removeEventListener("mouseup",M),document.onselectstart=null,document.ondragstart=null,setTimeout(()=>{lc(x,"noclick")},0)};document.addEventListener("mousemove",O),document.addEventListener("mouseup",M)}},d=(v,y)=>{if(y.children&&y.children.length>0)return;const _=v.target;if(!Iu(_))return;const b=_==null?void 0:_.closest("th");if(!(!y||!y.resizable)&&!l.value&&t.border){const E=b.getBoundingClientRect(),x=document.body.style;E.width>12&&E.right-v.pageX<8?(x.cursor="col-resize",Eu(b,"is-sortable")&&(b.style.cursor="col-resize"),a.value=y):l.value||(x.cursor="",Eu(b,"is-sortable")&&(b.style.cursor="pointer"),a.value=null)}},f=()=>{bi&&(document.body.style.cursor="")},p=({order:v,sortOrders:y})=>{if(v==="")return y[0];const _=y.indexOf(v||null);return y[_>y.length-2?0:_+1]},m=(v,y,_)=>{var b;v.stopPropagation();const E=y.order===_?null:_||p(y),x=(b=v.target)==null?void 0:b.closest("th");if(x&&Eu(x,"noclick")){lc(x,"noclick");return}if(!y.sortable)return;const A=v.currentTarget;if(["ascending","descending"].some(T=>Eu(A,T)&&!y.sortOrders.includes(T)))return;const I=t.store.states;let k=I.sortProp.value,O;const M=I.sortingColumn.value;(M!==y||M===y&&M.order===null)&&(M&&(M.order=null),I.sortingColumn.value=y,k=y.property),E?O=y.order=E:O=y.order=null,I.sortProp.value=k,I.sortOrder.value=O,i==null||i.store.commit("changeSortCondition")};return{handleHeaderClick:r,handleHeaderContextMenu:o,handleMouseDown:u,handleMouseMove:d,handleMouseOut:f,handleSortClick:m,handleFilterClick:s}}function ume(t){const n=jt(Il),e=Zt("table");return{getHeaderRowStyle:a=>{const l=n==null?void 0:n.props.headerRowStyle;return typeof l=="function"?l.call(null,{rowIndex:a}):l},getHeaderRowClass:a=>{const l=[],c=n==null?void 0:n.props.headerRowClassName;return typeof c=="string"?l.push(c):typeof c=="function"&&l.push(c.call(null,{rowIndex:a})),l.join(" ")},getHeaderCellStyle:(a,l,c,u)=>{var d;let f=(d=n==null?void 0:n.props.headerCellStyle)!=null?d:{};typeof f=="function"&&(f=f.call(null,{rowIndex:a,columnIndex:l,row:c,column:u}));const p=yE(l,u.fixed,t.store,c);return om(p,"left"),om(p,"right"),Object.assign({},f,p)},getHeaderCellClass:(a,l,c,u)=>{const d=wE(e.b(),l,u.fixed,t.store,c),f=[u.id,u.order,u.headerAlign,u.className,u.labelClassName,...d];u.children||f.push("is-leaf"),u.sortable&&f.push("is-sortable");const p=n==null?void 0:n.props.headerCellClassName;return typeof p=="string"?f.push(p):typeof p=="function"&&f.push(p.call(null,{rowIndex:a,columnIndex:l,row:c,column:u})),f.push(e.e("cell")),f.filter(m=>!!m).join(" ")}}}const KF=t=>{const n=[];return t.forEach(e=>{e.children?(n.push(e),n.push.apply(n,KF(e.children))):n.push(e)}),n},GF=t=>{let n=1;const e=(r,o)=>{if(o&&(r.level=o.level+1,n<r.level&&(n=r.level)),r.children){let a=0;r.children.forEach(l=>{e(l,r),a+=l.colSpan}),r.colSpan=a}else r.colSpan=1};t.forEach(r=>{r.level=1,e(r,void 0)});const i=[];for(let r=0;r<n;r++)i.push([]);return KF(t).forEach(r=>{r.children?(r.rowSpan=1,r.children.forEach(o=>o.isSubColumn=!0)):r.rowSpan=n-r.level+1,i[r.level-1].push(r)}),i};function dme(t){const n=jt(Il),e=se(()=>GF(t.store.states.originColumns.value));return{isGroup:se(()=>{const r=e.value.length>1;return r&&n&&(n.state.isGroup.value=!0),r}),toggleAllSelection:r=>{r.stopPropagation(),n==null||n.store.commit("toggleAllSelection")},columnRows:e}}var hme=pt({name:"ElTableHeader",components:{ElCheckbox:ph},props:{fixed:{type:String,default:""},store:{required:!0,type:Object},border:Boolean,defaultSort:{type:Object,default:()=>({prop:"",order:""})}},setup(t,{emit:n}){const e=On(),i=jt(Il),s=Zt("table"),r=Se({}),{onColumnsChange:o,onScrollableChange:a}=qF(i);ri(async()=>{await Jn(),await Jn();const{prop:I,order:k}=t.defaultSort;i==null||i.store.commit("sort",{prop:I,order:k,init:!0})});const{handleHeaderClick:l,handleHeaderContextMenu:c,handleMouseDown:u,handleMouseMove:d,handleMouseOut:f,handleSortClick:p,handleFilterClick:m}=cme(t,n),{getHeaderRowStyle:v,getHeaderRowClass:y,getHeaderCellStyle:_,getHeaderCellClass:b}=ume(t),{isGroup:E,toggleAllSelection:x,columnRows:A}=dme(t);return e.state={onColumnsChange:o,onScrollableChange:a},e.filterPanels=r,{ns:s,filterPanels:r,onColumnsChange:o,onScrollableChange:a,columnRows:A,getHeaderRowClass:y,getHeaderRowStyle:v,getHeaderCellClass:b,getHeaderCellStyle:_,handleHeaderClick:l,handleHeaderContextMenu:c,handleMouseDown:u,handleMouseMove:d,handleMouseOut:f,handleSortClick:p,handleFilterClick:m,isGroup:E,toggleAllSelection:x}},render(){const{ns:t,isGroup:n,columnRows:e,getHeaderCellStyle:i,getHeaderCellClass:s,getHeaderRowClass:r,getHeaderRowStyle:o,handleHeaderClick:a,handleHeaderContextMenu:l,handleMouseDown:c,handleMouseMove:u,handleSortClick:d,handleMouseOut:f,store:p,$parent:m}=this;let v=1;return Xt("thead",{class:{[t.is("group")]:n}},e.map((y,_)=>Xt("tr",{class:r(_),key:_,style:o(_)},y.map((b,E)=>(b.rowSpan>v&&(v=b.rowSpan),Xt("th",{class:s(_,E,y,b),colspan:b.colSpan,key:`${b.id}-thead`,rowspan:b.rowSpan,style:i(_,E,y,b),onClick:x=>{x.currentTarget.classList.contains("noclick")||a(x,b)},onContextmenu:x=>l(x,b),onMousedown:x=>c(x,b),onMousemove:x=>u(x,b),onMouseout:f},[Xt("div",{class:["cell",b.filteredValue&&b.filteredValue.length>0?"highlight":""]},[b.renderHeader?b.renderHeader({column:b,$index:E,store:p,_self:m}):b.label,b.sortable&&Xt("span",{onClick:x=>d(x,b),class:"caret-wrapper"},[Xt("i",{onClick:x=>d(x,b,"ascending"),class:"sort-caret ascending"}),Xt("i",{onClick:x=>d(x,b,"descending"),class:"sort-caret descending"})]),b.filterable&&Xt(lme,{store:p,placement:b.filterPlacement||"bottom-start",column:b,upDataColumn:(x,A)=>{b[x]=A}},{"filter-icon":()=>b.renderFilterIcon?b.renderFilterIcon({filterOpened:b.filterOpened}):null})])]))))))}});function a5(t,n,e=.03){return t-n>e}function fme(t){const n=jt(Il),e=Se(""),i=Se(Xt("div")),s=(m,v,y)=>{var _;const b=n,E=o5(m);let x;const A=(_=b==null?void 0:b.vnode.el)==null?void 0:_.dataset.prefix;E&&(x=K8({columns:t.store.states.columns.value},E,A),x&&(b==null||b.emit(`cell-${y}`,v,x,E,m))),b==null||b.emit(`row-${y}`,v,x,m)},r=(m,v)=>{s(m,v,"dblclick")},o=(m,v)=>{t.store.commit("setCurrentRow",v),s(m,v,"click")},a=(m,v)=>{s(m,v,"contextmenu")},l=Ss(m=>{t.store.commit("setHoverRow",m)},30),c=Ss(()=>{t.store.commit("setHoverRow",null)},30),u=m=>{const v=window.getComputedStyle(m,null),y=Number.parseInt(v.paddingLeft,10)||0,_=Number.parseInt(v.paddingRight,10)||0,b=Number.parseInt(v.paddingTop,10)||0,E=Number.parseInt(v.paddingBottom,10)||0;return{left:y,right:_,top:b,bottom:E}},d=(m,v,y)=>{let _=v.target.parentNode;for(;m>1&&(_=_==null?void 0:_.nextSibling,!(!_||_.nodeName!=="TR"));)y(_,"hover-row hover-fixed-row"),m--};return{handleDoubleClick:r,handleClick:o,handleContextMenu:a,handleMouseEnter:l,handleMouseLeave:c,handleCellMouseEnter:(m,v,y)=>{var _;const b=n,E=o5(m),x=(_=b==null?void 0:b.vnode.el)==null?void 0:_.dataset.prefix;if(E){const J=K8({columns:t.store.states.columns.value},E,x);E.rowSpan>1&&d(E.rowSpan,m,sc);const q=b.hoverState={cell:E,column:J,row:v};b==null||b.emit("cell-mouse-enter",q.row,q.column,q.cell,m)}if(!y)return;const A=m.target.querySelector(".cell");if(!(Eu(A,`${x}-tooltip`)&&A.childNodes.length))return;const I=document.createRange();I.setStart(A,0),I.setEnd(A,A.childNodes.length);const{width:k,height:O}=I.getBoundingClientRect(),{width:M,height:T}=A.getBoundingClientRect(),{top:P,left:R,right:L,bottom:F}=u(A),B=R+L,z=P+F;(a5(k+B,M)||a5(O+z,T)||a5(A.scrollWidth,M))&&Yfe(y,E.innerText||E.textContent,E,b)},handleCellMouseLeave:m=>{const v=o5(m);if(!v)return;v.rowSpan>1&&d(v.rowSpan,m,lc);const y=n==null?void 0:n.hoverState;n==null||n.emit("cell-mouse-leave",y==null?void 0:y.row,y==null?void 0:y.column,y==null?void 0:y.cell,m)},tooltipContent:e,tooltipTrigger:i}}function mme(t){const n=jt(Il),e=Zt("table");return{getRowStyle:(c,u)=>{const d=n==null?void 0:n.props.rowStyle;return typeof d=="function"?d.call(null,{row:c,rowIndex:u}):d||null},getRowClass:(c,u)=>{const d=[e.e("row")];n!=null&&n.props.highlightCurrentRow&&c===t.store.states.currentRow.value&&d.push("current-row"),t.stripe&&u%2===1&&d.push(e.em("row","striped"));const f=n==null?void 0:n.props.rowClassName;return typeof f=="string"?d.push(f):typeof f=="function"&&d.push(f.call(null,{row:c,rowIndex:u})),d},getCellStyle:(c,u,d,f)=>{const p=n==null?void 0:n.props.cellStyle;let m=p??{};typeof p=="function"&&(m=p.call(null,{rowIndex:c,columnIndex:u,row:d,column:f}));const v=yE(u,t==null?void 0:t.fixed,t.store);return om(v,"left"),om(v,"right"),Object.assign({},m,v)},getCellClass:(c,u,d,f,p)=>{const m=wE(e.b(),u,t==null?void 0:t.fixed,t.store,void 0,p),v=[f.id,f.align,f.className,...m],y=n==null?void 0:n.props.cellClassName;return typeof y=="string"?v.push(y):typeof y=="function"&&v.push(y.call(null,{rowIndex:c,columnIndex:u,row:d,column:f})),v.push(e.e("cell")),v.filter(_=>!!_).join(" ")},getSpan:(c,u,d,f)=>{let p=1,m=1;const v=n==null?void 0:n.props.spanMethod;if(typeof v=="function"){const y=v({row:c,column:u,rowIndex:d,columnIndex:f});Array.isArray(y)?(p=y[0],m=y[1]):typeof y=="object"&&(p=y.rowspan,m=y.colspan)}return{rowspan:p,colspan:m}},getColspanRealWidth:(c,u,d)=>{if(u<1)return c[d].realWidth;const f=c.map(({realWidth:p,width:m})=>p||m).slice(d,d+u);return Number(f.reduce((p,m)=>Number(p)+Number(m),-1))}}}function pme(t){const n=jt(Il),e=Zt("table"),{handleDoubleClick:i,handleClick:s,handleContextMenu:r,handleMouseEnter:o,handleMouseLeave:a,handleCellMouseEnter:l,handleCellMouseLeave:c,tooltipContent:u,tooltipTrigger:d}=fme(t),{getRowStyle:f,getRowClass:p,getCellStyle:m,getCellClass:v,getSpan:y,getColspanRealWidth:_}=mme(t),b=se(()=>t.store.states.columns.value.findIndex(({type:k})=>k==="default")),E=(k,O)=>{const M=n.props.rowKey;return M?dr(k,M):O},x=(k,O,M,T=!1)=>{const{tooltipEffect:P,tooltipOptions:R,store:L}=t,{indent:F,columns:B}=L.states,z=p(k,O);let J=!0;return M&&(z.push(e.em("row",`level-${M.level}`)),J=M.display),Xt("tr",{style:[J?null:{display:"none"},f(k,O)],class:z,key:E(k,O),onDblclick:G=>i(G,k),onClick:G=>s(G,k),onContextmenu:G=>r(G,k),onMouseenter:()=>o(O),onMouseleave:a},B.value.map((G,S)=>{const{rowspan:V,colspan:re}=y(k,G,O,S);if(!V||!re)return null;const U=Object.assign({},G);U.realWidth=_(B.value,re,S);const Pe={store:t.store,_self:t.context||n,column:U,row:k,$index:O,cellIndex:S,expanded:T};S===b.value&&M&&(Pe.treeNode={indent:M.level*F.value,level:M.level},typeof M.expanded=="boolean"&&(Pe.treeNode.expanded=M.expanded,"loading"in M&&(Pe.treeNode.loading=M.loading),"noLazyChildren"in M&&(Pe.treeNode.noLazyChildren=M.noLazyChildren)));const Fe=`${E(k,O)},${S}`,Ne=U.columnKey||U.rawColumnKey||"",ne=A(S,G,Pe),me=G.showOverflowTooltip&&Cw({effect:P},R,G.showOverflowTooltip);return Xt("td",{style:m(O,S,k,G),class:v(O,S,k,G,re-1),key:`${Ne}${Fe}`,rowspan:V,colspan:re,onMouseenter:pe=>l(pe,k,me),onMouseleave:c},[ne])}))},A=(k,O,M)=>O.renderCell(M);return{wrappedRowRender:(k,O)=>{const M=t.store,{isRowExpanded:T,assertRowKey:P}=M,{treeData:R,lazyTreeNodeMap:L,childrenColumnName:F,rowKey:B}=M.states,z=M.states.columns.value;if(z.some(({type:q})=>q==="expand")){const q=T(k),G=x(k,O,void 0,q),S=n.renderExpanded;return q?S?[[G,Xt("tr",{key:`expanded-row__${G.key}`},[Xt("td",{colspan:z.length,class:`${e.e("cell")} ${e.e("expanded-cell")}`},[S({row:k,$index:O,store:M,expanded:q})])])]]:(console.error("[Element Error]renderExpanded is required."),G):[[G]]}else if(Object.keys(R.value).length){P();const q=dr(k,B.value);let G=R.value[q],S=null;G&&(S={expanded:G.expanded,level:G.level,display:!0},typeof G.lazy=="boolean"&&(typeof G.loaded=="boolean"&&G.loaded&&(S.noLazyChildren=!(G.children&&G.children.length)),S.loading=G.loading));const V=[x(k,O,S)];if(G){let re=0;const U=(Fe,Ne)=>{Fe&&Fe.length&&Ne&&Fe.forEach(ne=>{const me={display:Ne.display&&Ne.expanded,level:Ne.level+1,expanded:!1,noLazyChildren:!1,loading:!1},pe=dr(ne,B.value);if(pe==null)throw new Error("For nested data item, row-key is required.");if(G={...R.value[pe]},G&&(me.expanded=G.expanded,G.level=G.level||me.level,G.display=!!(G.expanded&&me.display),typeof G.lazy=="boolean"&&(typeof G.loaded=="boolean"&&G.loaded&&(me.noLazyChildren=!(G.children&&G.children.length)),me.loading=G.loading)),re++,V.push(x(ne,O+re,me)),G){const ge=L.value[pe]||ne[F.value];U(ge,G)}})};G.display=!0;const Pe=L.value[q]||k[F.value];U(Pe,G)}return V}else return x(k,O,void 0)},tooltipContent:u,tooltipTrigger:d}}const gme={store:{required:!0,type:Object},stripe:Boolean,tooltipEffect:String,tooltipOptions:{type:Object},context:{default:()=>({}),type:Object},rowClassName:[String,Function],rowStyle:[Object,Function],fixed:{type:String,default:""},highlight:Boolean};var vme=pt({name:"ElTableBody",props:gme,setup(t){const n=On(),e=jt(Il),i=Zt("table"),{wrappedRowRender:s,tooltipContent:r,tooltipTrigger:o}=pme(t),{onColumnsChange:a,onScrollableChange:l}=qF(e),c=[];return Dt(t.store.states.hoverRow,(u,d)=>{var f;const p=n==null?void 0:n.vnode.el,m=Array.from((p==null?void 0:p.children)||[]).filter(_=>_==null?void 0:_.classList.contains(`${i.e("row")}`));let v=u;const y=(f=m[v])==null?void 0:f.childNodes;if(y!=null&&y.length){let _=0;Array.from(y).reduce((E,x,A)=>{var I,k;return((I=y[A])==null?void 0:I.colSpan)>1&&(_=(k=y[A])==null?void 0:k.colSpan),x.nodeName!=="TD"&&_===0&&E.push(A),_>0&&_--,E},[]).forEach(E=>{var x;for(v=u;v>0;){const A=(x=m[v-1])==null?void 0:x.childNodes;if(A[E]&&A[E].nodeName==="TD"&&A[E].rowSpan>1){sc(A[E],"hover-cell"),c.push(A[E]);break}v--}})}else c.forEach(_=>lc(_,"hover-cell")),c.length=0;!t.store.states.isComplex.value||!bi||Hoe(()=>{const _=m[d],b=m[u];_&&!_.classList.contains("hover-fixed-row")&&lc(_,"hover-row"),b&&sc(b,"hover-row")})}),ym(()=>{var u;(u=Go)==null||u()}),{ns:i,onColumnsChange:a,onScrollableChange:l,wrappedRowRender:s,tooltipContent:r,tooltipTrigger:o}},render(){const{wrappedRowRender:t,store:n}=this,e=n.states.data.value||[];return Xt("tbody",{tabIndex:-1},[e.reduce((i,s)=>i.concat(t(s,i.length)),[])])}});function bme(){const t=jt(Il),n=t==null?void 0:t.store,e=se(()=>n.states.fixedLeafColumnsLength.value),i=se(()=>n.states.rightFixedColumns.value.length),s=se(()=>n.states.columns.value.length),r=se(()=>n.states.fixedColumns.value.length),o=se(()=>n.states.rightFixedColumns.value.length);return{leftFixedLeafCount:e,rightFixedLeafCount:i,columnsCount:s,leftFixedCount:r,rightFixedCount:o,columns:n.states.columns}}function _me(t){const{columns:n}=bme(),e=Zt("table");return{getCellClasses:(r,o)=>{const a=r[o],l=[e.e("cell"),a.id,a.align,a.labelClassName,...wE(e.b(),o,a.fixed,t.store)];return a.className&&l.push(a.className),a.children||l.push(e.is("leaf")),l},getCellStyles:(r,o)=>{const a=yE(o,r.fixed,t.store);return om(a,"left"),om(a,"right"),a},columns:n}}var wme=pt({name:"ElTableFooter",props:{fixed:{type:String,default:""},store:{required:!0,type:Object},summaryMethod:Function,sumText:String,border:Boolean,defaultSort:{type:Object,default:()=>({prop:"",order:""})}},setup(t){const{getCellClasses:n,getCellStyles:e,columns:i}=_me(t);return{ns:Zt("table"),getCellClasses:n,getCellStyles:e,columns:i}},render(){const{columns:t,getCellStyles:n,getCellClasses:e,summaryMethod:i,sumText:s}=this,r=this.store.states.data.value;let o=[];return i?o=i({columns:t,data:r}):t.forEach((a,l)=>{if(l===0){o[l]=s;return}const c=r.map(p=>Number(p[a.property])),u=[];let d=!0;c.forEach(p=>{if(!Number.isNaN(+p)){d=!1;const m=`${p}`.split(".")[1];u.push(m?m.length:0)}});const f=Math.max.apply(null,u);d?o[l]="":o[l]=c.reduce((p,m)=>{const v=Number(m);return Number.isNaN(+v)?p:Number.parseFloat((p+m).toFixed(Math.min(f,20)))},0)}),Xt(Xt("tfoot",[Xt("tr",{},[...t.map((a,l)=>Xt("td",{key:l,colspan:a.colSpan,rowspan:a.rowSpan,class:e(t,l),style:n(a,l)},[Xt("div",{class:["cell",a.labelClassName]},[o[l]])]))])]))}});function yme(t){return{setCurrentRow:u=>{t.commit("setCurrentRow",u)},getSelectionRows:()=>t.getSelectionRows(),toggleRowSelection:(u,d)=>{t.toggleRowSelection(u,d,!1),t.updateAllSelected()},clearSelection:()=>{t.clearSelection()},clearFilter:u=>{t.clearFilter(u)},toggleAllSelection:()=>{t.commit("toggleAllSelection")},toggleRowExpansion:(u,d)=>{t.toggleRowExpansionAdapter(u,d)},clearSort:()=>{t.clearSort()},sort:(u,d)=>{t.commit("sort",{prop:u,order:d})}}}function Cme(t,n,e,i){const s=Se(!1),r=Se(null),o=Se(!1),a=G=>{o.value=G},l=Se({width:null,height:null,headerHeight:null}),c=Se(!1),u={display:"inline-block",verticalAlign:"middle"},d=Se(),f=Se(0),p=Se(0),m=Se(0),v=Se(0),y=Se(0);Au(()=>{n.setHeight(t.height)}),Au(()=>{n.setMaxHeight(t.maxHeight)}),Dt(()=>[t.currentRowKey,e.states.rowKey],([G,S])=>{!H(S)||!H(G)||e.setCurrentRowKey(`${G}`)},{immediate:!0}),Dt(()=>t.data,G=>{i.store.commit("setData",G)},{immediate:!0,deep:!0}),Au(()=>{t.expandRowKeys&&e.setExpandRowKeysAdapter(t.expandRowKeys)});const _=()=>{i.store.commit("setHoverRow",null),i.hoverState&&(i.hoverState=null)},b=(G,S)=>{const{pixelX:V,pixelY:re}=S;Math.abs(V)>=Math.abs(re)&&(i.refs.bodyWrapper.scrollLeft+=S.pixelX/5)},E=se(()=>t.height||t.maxHeight||e.states.fixedColumns.value.length>0||e.states.rightFixedColumns.value.length>0),x=se(()=>({width:n.bodyWidth.value?`${n.bodyWidth.value}px`:""})),A=()=>{E.value&&n.updateElsHeight(),n.updateColumnsWidth(),requestAnimationFrame(M)};ri(async()=>{await Jn(),e.updateColumns(),T(),requestAnimationFrame(A);const G=i.vnode.el,S=i.refs.headerWrapper;t.flexible&&G&&G.parentElement&&(G.parentElement.style.minWidth="0"),l.value={width:d.value=G.offsetWidth,height:G.offsetHeight,headerHeight:t.showHeader&&S?S.offsetHeight:null},e.states.columns.value.forEach(V=>{V.filteredValue&&V.filteredValue.length&&i.store.commit("filterChange",{column:V,values:V.filteredValue,silent:!0})}),i.$ready=!0});const I=(G,S)=>{if(!G)return;const V=Array.from(G.classList).filter(re=>!re.startsWith("is-scrolling-"));V.push(n.scrollX.value?S:"is-scrolling-none"),G.className=V.join(" ")},k=G=>{const{tableWrapper:S}=i.refs;I(S,G)},O=G=>{const{tableWrapper:S}=i.refs;return!!(S&&S.classList.contains(G))},M=function(){if(!i.refs.scrollBarRef)return;if(!n.scrollX.value){const Ne="is-scrolling-none";O(Ne)||k(Ne);return}const G=i.refs.scrollBarRef.wrapRef;if(!G)return;const{scrollLeft:S,offsetWidth:V,scrollWidth:re}=G,{headerWrapper:U,footerWrapper:Pe}=i.refs;U&&(U.scrollLeft=S),Pe&&(Pe.scrollLeft=S);const Fe=re-V-1;S>=Fe?k("is-scrolling-right"):k(S===0?"is-scrolling-left":"is-scrolling-middle")},T=()=>{i.refs.scrollBarRef&&(i.refs.scrollBarRef.wrapRef&&ta(i.refs.scrollBarRef.wrapRef,"scroll",M,{passive:!0}),t.fit?jr(i.vnode.el,P):ta(window,"resize",P),jr(i.refs.bodyWrapper,()=>{var G,S;P(),(S=(G=i.refs)==null?void 0:G.scrollBarRef)==null||S.update()}))},P=()=>{var G,S,V,re;const U=i.vnode.el;if(!i.$ready||!U)return;let Pe=!1;const{width:Fe,height:Ne,headerHeight:ne}=l.value,me=d.value=U.offsetWidth;Fe!==me&&(Pe=!0);const pe=U.offsetHeight;(t.height||E.value)&&Ne!==pe&&(Pe=!0);const ge=t.tableLayout==="fixed"?i.refs.headerWrapper:(G=i.refs.tableHeaderRef)==null?void 0:G.$el;t.showHeader&&(ge==null?void 0:ge.offsetHeight)!==ne&&(Pe=!0),f.value=((S=i.refs.tableWrapper)==null?void 0:S.scrollHeight)||0,m.value=(ge==null?void 0:ge.scrollHeight)||0,v.value=((V=i.refs.footerWrapper)==null?void 0:V.offsetHeight)||0,y.value=((re=i.refs.appendWrapper)==null?void 0:re.offsetHeight)||0,p.value=f.value-m.value-v.value-y.value,Pe&&(l.value={width:me,height:pe,headerHeight:t.showHeader&&(ge==null?void 0:ge.offsetHeight)||0},A())},R=gc(),L=se(()=>{const{bodyWidth:G,scrollY:S,gutterWidth:V}=n;return G.value?`${G.value-(S.value?V:0)}px`:""}),F=se(()=>t.maxHeight?"fixed":t.tableLayout),B=se(()=>{if(t.data&&t.data.length)return null;let G="100%";t.height&&p.value&&(G=`${p.value}px`);const S=d.value;return{width:S?`${S}px`:"",height:G}}),z=se(()=>t.height?{height:Number.isNaN(Number(t.height))?t.height:`${t.height}px`}:t.maxHeight?{maxHeight:Number.isNaN(Number(t.maxHeight))?t.maxHeight:`${t.maxHeight}px`}:{}),J=se(()=>t.height?{height:"100%"}:t.maxHeight?Number.isNaN(Number(t.maxHeight))?{maxHeight:`calc(${t.maxHeight} - ${m.value+v.value}px)`}:{maxHeight:`${t.maxHeight-m.value-v.value}px`}:{});return{isHidden:s,renderExpanded:r,setDragVisible:a,isGroup:c,handleMouseLeave:_,handleHeaderFooterMousewheel:b,tableSize:R,emptyBlockStyle:B,handleFixedMousewheel:(G,S)=>{const V=i.refs.bodyWrapper;if(Math.abs(S.spinY)>0){const re=V.scrollTop;S.pixelY<0&&re!==0&&G.preventDefault(),S.pixelY>0&&V.scrollHeight-V.clientHeight>re&&G.preventDefault(),V.scrollTop+=Math.ceil(S.pixelY/5)}else V.scrollLeft+=Math.ceil(S.pixelX/5)},resizeProxyVisible:o,bodyWidth:L,resizeState:l,doLayout:A,tableBodyStyles:x,tableLayout:F,scrollbarViewStyle:u,tableInnerStyle:z,scrollbarStyle:J}}function kme(t){const n=Se(),e=()=>{const s=t.vnode.el.querySelector(".hidden-columns"),r={childList:!0,subtree:!0},o=t.store.states.updateOrderFns;n.value=new MutationObserver(()=>{o.forEach(a=>a())}),n.value.observe(s,r)};ri(()=>{e()}),ym(()=>{var i;(i=n.value)==null||i.disconnect()})}var Eme={data:{type:Array,default:()=>[]},size:Am,width:[String,Number],height:[String,Number],maxHeight:[String,Number],fit:{type:Boolean,default:!0},stripe:Boolean,border:Boolean,rowKey:[String,Function],showHeader:{type:Boolean,default:!0},showSummary:Boolean,sumText:String,summaryMethod:Function,rowClassName:[String,Function],rowStyle:[Object,Function],cellClassName:[String,Function],cellStyle:[Object,Function],headerRowClassName:[String,Function],headerRowStyle:[Object,Function],headerCellClassName:[String,Function],headerCellStyle:[Object,Function],highlightCurrentRow:Boolean,currentRowKey:[String,Number],emptyText:String,expandRowKeys:Array,defaultExpandAll:Boolean,defaultSort:Object,tooltipEffect:String,tooltipOptions:Object,spanMethod:Function,selectOnIndeterminate:{type:Boolean,default:!0},indent:{type:Number,default:16},treeProps:{type:Object,default:()=>({hasChildren:"hasChildren",children:"children",checkStrictly:!1})},lazy:Boolean,load:Function,style:{type:Object,default:()=>({})},className:{type:String,default:""},tableLayout:{type:String,default:"fixed"},scrollbarAlwaysOn:Boolean,flexible:Boolean,showOverflowTooltip:[Boolean,Object]};function YF(t){const n=t.tableLayout==="auto";let e=t.columns||[];n&&e.every(s=>s.width===void 0)&&(e=[]);const i=s=>{const r={key:`${t.tableLayout}_${s.id}`,style:{},name:void 0};return n?r.style={width:`${s.width}px`}:r.name=s.id,r};return Xt("colgroup",{},e.map(s=>Xt("col",i(s))))}YF.props=["columns","tableLayout"];const Sme=()=>{const t=Se(),n=(r,o)=>{const a=t.value;a&&a.scrollTo(r,o)},e=(r,o)=>{const a=t.value;a&&Ms(o)&&["Top","Left"].includes(r)&&a[`setScroll${r}`](o)};return{scrollBarRef:t,scrollTo:n,setScrollTop:r=>e("Top",r),setScrollLeft:r=>e("Left",r)}};let Tme=1;const xme=pt({name:"ElTable",directives:{Mousewheel:dhe},components:{TableHeader:hme,TableBody:vme,TableFooter:wme,ElScrollbar:lE,hColgroup:YF},props:Eme,emits:["select","select-all","selection-change","cell-mouse-enter","cell-mouse-leave","cell-contextmenu","cell-click","cell-dblclick","row-click","row-contextmenu","row-dblclick","header-click","header-contextmenu","sort-change","filter-change","current-change","header-dragend","expand-change"],setup(t){const{t:n}=xm(),e=Zt("table"),i=On();es(Il,i);const s=nme(i,t);i.store=s;const r=new sme({store:i.store,table:i,fit:t.fit,showHeader:t.showHeader});i.layout=r;const o=se(()=>(s.states.data.value||[]).length===0),{setCurrentRow:a,getSelectionRows:l,toggleRowSelection:c,clearSelection:u,clearFilter:d,toggleAllSelection:f,toggleRowExpansion:p,clearSort:m,sort:v}=yme(s),{isHidden:y,renderExpanded:_,setDragVisible:b,isGroup:E,handleMouseLeave:x,handleHeaderFooterMousewheel:A,tableSize:I,emptyBlockStyle:k,handleFixedMousewheel:O,resizeProxyVisible:M,bodyWidth:T,resizeState:P,doLayout:R,tableBodyStyles:L,tableLayout:F,scrollbarViewStyle:B,tableInnerStyle:z,scrollbarStyle:J}=Cme(t,r,s,i),{scrollBarRef:q,scrollTo:G,setScrollLeft:S,setScrollTop:V}=Sme(),re=Ss(R,50),U=`${e.namespace.value}-table_${Tme++}`;i.tableId=U,i.state={isGroup:E,resizeState:P,doLayout:R,debouncedUpdateLayout:re};const Pe=se(()=>{var ne;return(ne=t.sumText)!=null?ne:n("el.table.sumText")}),Fe=se(()=>{var ne;return(ne=t.emptyText)!=null?ne:n("el.table.emptyText")}),Ne=se(()=>GF(s.states.originColumns.value)[0]);return kme(i),{ns:e,layout:r,store:s,columns:Ne,handleHeaderFooterMousewheel:A,handleMouseLeave:x,tableId:U,tableSize:I,isHidden:y,isEmpty:o,renderExpanded:_,resizeProxyVisible:M,resizeState:P,isGroup:E,bodyWidth:T,tableBodyStyles:L,emptyBlockStyle:k,debouncedUpdateLayout:re,handleFixedMousewheel:O,setCurrentRow:a,getSelectionRows:l,toggleRowSelection:c,clearSelection:u,clearFilter:d,toggleAllSelection:f,toggleRowExpansion:p,clearSort:m,doLayout:R,sort:v,t:n,setDragVisible:b,context:i,computedSumText:Pe,computedEmptyText:Fe,tableLayout:F,scrollbarViewStyle:B,tableInnerStyle:z,scrollbarStyle:J,scrollBarRef:q,scrollTo:G,setScrollLeft:S,setScrollTop:V}}});function Ame(t,n,e,i,s,r){const o=ns("hColgroup"),a=ns("table-header"),l=ns("table-body"),c=ns("table-footer"),u=ns("el-scrollbar"),d=T4("mousewheel");return ve(),it("div",{ref:"tableWrapper",class:De([{[t.ns.m("fit")]:t.fit,[t.ns.m("striped")]:t.stripe,[t.ns.m("border")]:t.border||t.isGroup,[t.ns.m("hidden")]:t.isHidden,[t.ns.m("group")]:t.isGroup,[t.ns.m("fluid-height")]:t.maxHeight,[t.ns.m("scrollable-x")]:t.layout.scrollX.value,[t.ns.m("scrollable-y")]:t.layout.scrollY.value,[t.ns.m("enable-row-hover")]:!t.store.states.isComplex.value,[t.ns.m("enable-row-transition")]:(t.store.states.data.value||[]).length!==0&&(t.store.states.data.value||[]).length<100,"has-footer":t.showSummary},t.ns.m(t.tableSize),t.className,t.ns.b(),t.ns.m(`layout-${t.tableLayout}`)]),style:Xn(t.style),"data-prefix":t.ns.namespace.value,onMouseleave:t.handleMouseLeave},[ot("div",{class:De(t.ns.e("inner-wrapper")),style:Xn(t.tableInnerStyle)},[ot("div",{ref:"hiddenColumns",class:"hidden-columns"},[Et(t.$slots,"default")],512),t.showHeader&&t.tableLayout==="fixed"?Qi((ve(),it("div",{key:0,ref:"headerWrapper",class:De(t.ns.e("header-wrapper"))},[ot("table",{ref:"tableHeader",class:De(t.ns.e("header")),style:Xn(t.tableBodyStyles),border:"0",cellpadding:"0",cellspacing:"0"},[et(o,{columns:t.store.states.columns.value,"table-layout":t.tableLayout},null,8,["columns","table-layout"]),et(a,{ref:"tableHeaderRef",border:t.border,"default-sort":t.defaultSort,store:t.store,onSetDragVisible:t.setDragVisible},null,8,["border","default-sort","store","onSetDragVisible"])],6)],2)),[[d,t.handleHeaderFooterMousewheel]]):_t("v-if",!0),ot("div",{ref:"bodyWrapper",class:De(t.ns.e("body-wrapper"))},[et(u,{ref:"scrollBarRef","view-style":t.scrollbarViewStyle,"wrap-style":t.scrollbarStyle,always:t.scrollbarAlwaysOn},{default:Je(()=>[ot("table",{ref:"tableBody",class:De(t.ns.e("body")),cellspacing:"0",cellpadding:"0",border:"0",style:Xn({width:t.bodyWidth,tableLayout:t.tableLayout})},[et(o,{columns:t.store.states.columns.value,"table-layout":t.tableLayout},null,8,["columns","table-layout"]),t.showHeader&&t.tableLayout==="auto"?(ve(),At(a,{key:0,ref:"tableHeaderRef",class:De(t.ns.e("body-header")),border:t.border,"default-sort":t.defaultSort,store:t.store,onSetDragVisible:t.setDragVisible},null,8,["class","border","default-sort","store","onSetDragVisible"])):_t("v-if",!0),et(l,{context:t.context,highlight:t.highlightCurrentRow,"row-class-name":t.rowClassName,"tooltip-effect":t.tooltipEffect,"tooltip-options":t.tooltipOptions,"row-style":t.rowStyle,store:t.store,stripe:t.stripe},null,8,["context","highlight","row-class-name","tooltip-effect","tooltip-options","row-style","store","stripe"]),t.showSummary&&t.tableLayout==="auto"?(ve(),At(c,{key:1,class:De(t.ns.e("body-footer")),border:t.border,"default-sort":t.defaultSort,store:t.store,"sum-text":t.computedSumText,"summary-method":t.summaryMethod},null,8,["class","border","default-sort","store","sum-text","summary-method"])):_t("v-if",!0)],6),t.isEmpty?(ve(),it("div",{key:0,ref:"emptyBlock",style:Xn(t.emptyBlockStyle),class:De(t.ns.e("empty-block"))},[ot("span",{class:De(t.ns.e("empty-text"))},[Et(t.$slots,"empty",{},()=>[Rn(vn(t.computedEmptyText),1)])],2)],6)):_t("v-if",!0),t.$slots.append?(ve(),it("div",{key:1,ref:"appendWrapper",class:De(t.ns.e("append-wrapper"))},[Et(t.$slots,"append")],2)):_t("v-if",!0)]),_:3},8,["view-style","wrap-style","always"])],2),t.showSummary&&t.tableLayout==="fixed"?Qi((ve(),it("div",{key:1,ref:"footerWrapper",class:De(t.ns.e("footer-wrapper"))},[ot("table",{class:De(t.ns.e("footer")),cellspacing:"0",cellpadding:"0",border:"0",style:Xn(t.tableBodyStyles)},[et(o,{columns:t.store.states.columns.value,"table-layout":t.tableLayout},null,8,["columns","table-layout"]),et(c,{border:t.border,"default-sort":t.defaultSort,store:t.store,"sum-text":t.computedSumText,"summary-method":t.summaryMethod},null,8,["border","default-sort","store","sum-text","summary-method"])],6)],2)),[[ra,!t.isEmpty],[d,t.handleHeaderFooterMousewheel]]):_t("v-if",!0),t.border||t.isGroup?(ve(),it("div",{key:2,class:De(t.ns.e("border-left-patch"))},null,2)):_t("v-if",!0)],6),Qi(ot("div",{ref:"resizeProxy",class:De(t.ns.e("column-resize-proxy"))},null,2),[[ra,t.resizeProxyVisible]])],46,["data-prefix","onMouseleave"])}var Ime=kn(xme,[["render",Ame],["__file","table.vue"]]);const Rme={selection:"table-column--selection",expand:"table__expand-column"},Mme={default:{order:""},selection:{width:48,minWidth:48,realWidth:48,order:""},expand:{width:48,minWidth:48,realWidth:48,order:""},index:{width:48,minWidth:48,realWidth:48,order:""}},Pme=t=>Rme[t]||"",Ome={selection:{renderHeader({store:t,column:n}){function e(){return t.states.data.value&&t.states.data.value.length===0}return Xt(ph,{disabled:e(),size:t.states.tableSize.value,indeterminate:t.states.selection.value.length>0&&!t.states.isAllSelected.value,"onUpdate:modelValue":t.toggleAllSelection,modelValue:t.states.isAllSelected.value,ariaLabel:n.label})},renderCell({row:t,column:n,store:e,$index:i}){return Xt(ph,{disabled:n.selectable?!n.selectable.call(null,t,i):!1,size:e.states.tableSize.value,onChange:()=>{e.commit("rowSelectedChanged",t)},onClick:s=>s.stopPropagation(),modelValue:e.isSelected(t),ariaLabel:n.label})},sortable:!1,resizable:!1},index:{renderHeader({column:t}){return t.label||"#"},renderCell({column:t,$index:n}){let e=n+1;const i=t.index;return typeof i=="number"?e=n+i:typeof i=="function"&&(e=i(n)),Xt("div",{},[e])},sortable:!1},expand:{renderHeader({column:t}){return t.label||""},renderCell({row:t,store:n,expanded:e}){const{ns:i}=n,s=[i.e("expand-icon")];return e&&s.push(i.em("expand-icon","expanded")),Xt("div",{class:s,onClick:function(o){o.stopPropagation(),n.toggleRowExpansion(t)}},{default:()=>[Xt(yi,null,{default:()=>[Xt(K4)]})]})},sortable:!1,resizable:!1}};function Lme({row:t,column:n,$index:e}){var i;const s=n.property,r=s&&pb(t,s).value;return n&&n.formatter?n.formatter(t,n,r,e):((i=r==null?void 0:r.toString)==null?void 0:i.call(r))||""}function Bme({row:t,treeNode:n,store:e},i=!1){const{ns:s}=e;if(!n)return i?[Xt("span",{class:s.e("placeholder")})]:null;const r=[],o=function(a){a.stopPropagation(),!n.loading&&e.loadOrToggle(t)};if(n.indent&&r.push(Xt("span",{class:s.e("indent"),style:{"padding-left":`${n.indent}px`}})),typeof n.expanded=="boolean"&&!n.noLazyChildren){const a=[s.e("expand-icon"),n.expanded?s.em("expand-icon","expanded"):""];let l=K4;n.loading&&(l=Y4),r.push(Xt("div",{class:a,onClick:o},{default:()=>[Xt(yi,{class:{[s.is("loading")]:n.loading}},{default:()=>[Xt(l)]})]}))}else r.push(Xt("span",{class:s.e("placeholder")}));return r}function Z8(t,n){return t.reduce((e,i)=>(e[i]=i,e),n)}function Fme(t,n){const e=On();return{registerComplexWatchers:()=>{const r=["fixed"],o={realWidth:"width",realMinWidth:"minWidth"},a=Z8(r,o);Object.keys(a).forEach(l=>{const c=o[l];Mn(n,c)&&Dt(()=>n[c],u=>{let d=u;c==="width"&&l==="realWidth"&&(d=_E(u)),c==="minWidth"&&l==="realMinWidth"&&(d=zF(u)),e.columnConfig.value[c]=d,e.columnConfig.value[l]=d;const f=c==="fixed";t.value.store.scheduleLayout(f)})})},registerNormalWatchers:()=>{const r=["label","filters","filterMultiple","filteredValue","sortable","index","formatter","className","labelClassName","filterClassName","showOverflowTooltip"],o={property:"prop",align:"realAlign",headerAlign:"realHeaderAlign"},a=Z8(r,o);Object.keys(a).forEach(l=>{const c=o[l];Mn(n,c)&&Dt(()=>n[c],u=>{e.columnConfig.value[l]=u})})}}}function Nme(t,n,e){const i=On(),s=Se(""),r=Se(!1),o=Se(),a=Se(),l=Zt("table");Au(()=>{o.value=t.align?`is-${t.align}`:null,o.value}),Au(()=>{a.value=t.headerAlign?`is-${t.headerAlign}`:o.value,a.value});const c=se(()=>{let x=i.vnode.vParent||i.parent;for(;x&&!x.tableId&&!x.columnId;)x=x.vnode.vParent||x.parent;return x}),u=se(()=>{const{store:x}=i.parent;if(!x)return!1;const{treeData:A}=x.states,I=A.value;return I&&Object.keys(I).length>0}),d=Se(_E(t.width)),f=Se(zF(t.minWidth)),p=x=>(d.value&&(x.width=d.value),f.value&&(x.minWidth=f.value),!d.value&&f.value&&(x.width=void 0),x.minWidth||(x.minWidth=80),x.realWidth=Number(x.width===void 0?x.minWidth:x.width),x),m=x=>{const A=x.type,I=Ome[A]||{};Object.keys(I).forEach(O=>{const M=I[O];O!=="className"&&M!==void 0&&(x[O]=M)});const k=Pme(A);if(k){const O=`${H(l.namespace)}-${k}`;x.className=x.className?`${x.className} ${O}`:O}return x},v=x=>{Array.isArray(x)?x.forEach(I=>A(I)):A(x);function A(I){var k;((k=I==null?void 0:I.type)==null?void 0:k.name)==="ElTableColumn"&&(I.vParent=i)}};return{columnId:s,realAlign:o,isSubColumn:r,realHeaderAlign:a,columnOrTableParent:c,setColumnWidth:p,setColumnForcedProps:m,setColumnRenders:x=>{t.renderHeader||x.type!=="selection"&&(x.renderHeader=I=>(i.columnConfig.value.label,Et(n,"header",I,()=>[x.label]))),n["filter-icon"]&&(x.renderFilterIcon=I=>Et(n,"filter-icon",I));let A=x.renderCell;return x.type==="expand"?(x.renderCell=I=>Xt("div",{class:"cell"},[A(I)]),e.value.renderExpanded=I=>n.default?n.default(I):n.default):(A=A||Lme,x.renderCell=I=>{let k=null;if(n.default){const L=n.default(I);k=L.some(F=>F.type!==lr)?L:A(I)}else k=A(I);const{columns:O}=e.value.store.states,M=O.value.findIndex(L=>L.type==="default"),T=u.value&&I.cellIndex===M,P=Bme(I,T),R={class:"cell",style:{}};return x.showOverflowTooltip&&(R.class=`${R.class} ${H(l.namespace)}-tooltip`,R.style={width:`${(I.column.realWidth||Number(I.column.width))-1}px`}),v(k),Xt("div",R,[P,k])}),x},getPropsData:(...x)=>x.reduce((A,I)=>(Array.isArray(I)&&I.forEach(k=>{A[k]=t[k]}),A),{}),getColumnElIndex:(x,A)=>Array.prototype.indexOf.call(x,A),updateColumnOrder:()=>{e.value.store.commit("updateColumnOrder",i.columnConfig.value)}}}var Vme={type:{type:String,default:"default"},label:String,className:String,labelClassName:String,property:String,prop:String,width:{type:[String,Number],default:""},minWidth:{type:[String,Number],default:""},renderHeader:Function,sortable:{type:[Boolean,String],default:!1},sortMethod:Function,sortBy:[String,Function,Array],resizable:{type:Boolean,default:!0},columnKey:String,align:String,headerAlign:String,showOverflowTooltip:{type:[Boolean,Object],default:void 0},fixed:[Boolean,String],formatter:Function,selectable:Function,reserveSelection:Boolean,filterMethod:Function,filteredValue:Array,filters:Array,filterPlacement:String,filterMultiple:{type:Boolean,default:!0},filterClassName:String,index:[Number,Function],sortOrders:{type:Array,default:()=>["ascending","descending",null],validator:t=>t.every(n=>["ascending","descending",null].includes(n))}};let Dme=1;var ZF=pt({name:"ElTableColumn",components:{ElCheckbox:ph},props:Vme,setup(t,{slots:n}){const e=On(),i=Se({}),s=se(()=>{let E=e.parent;for(;E&&!E.tableId;)E=E.parent;return E}),{registerNormalWatchers:r,registerComplexWatchers:o}=Fme(s,t),{columnId:a,isSubColumn:l,realHeaderAlign:c,columnOrTableParent:u,setColumnWidth:d,setColumnForcedProps:f,setColumnRenders:p,getPropsData:m,getColumnElIndex:v,realAlign:y,updateColumnOrder:_}=Nme(t,n,s),b=u.value;a.value=`${b.tableId||b.columnId}_column_${Dme++}`,dw(()=>{l.value=s.value!==b;const E=t.type||"default",x=t.sortable===""?!0:t.sortable,A=ic(t.showOverflowTooltip)?b.props.showOverflowTooltip:t.showOverflowTooltip,I={...Mme[E],id:a.value,type:E,property:t.prop||t.property,align:y,headerAlign:c,showOverflowTooltip:A,filterable:t.filters||t.filterMethod,filteredValue:[],filterPlacement:"",filterClassName:"",isColumnGroup:!1,isSubColumn:!1,filterOpened:!1,sortable:x,index:t.index,rawColumnKey:e.vnode.key};let P=m(["columnKey","label","className","labelClassName","type","renderHeader","formatter","fixed","resizable"],["sortMethod","sortBy","sortOrders"],["selectable","reserveSelection"],["filterMethod","filters","filterMultiple","filterOpened","filteredValue","filterPlacement","filterClassName"]);P=jfe(I,P),P=Kfe(p,d,f)(P),i.value=P,r(),o()}),ri(()=>{var E;const x=u.value,A=l.value?x.vnode.el.children:(E=x.refs.hiddenColumns)==null?void 0:E.children,I=()=>v(A||[],e.vnode.el);i.value.getColumnIndex=I,I()>-1&&s.value.store.commit("insertColumn",i.value,l.value?x.columnConfig.value:null,_)}),Ts(()=>{i.value.getColumnIndex()>-1&&s.value.store.commit("removeColumn",i.value,l.value?b.columnConfig.value:null,_)}),e.columnId=a.value,e.columnConfig=i},render(){var t,n,e;try{const i=(n=(t=this.$slots).default)==null?void 0:n.call(t,{row:{},column:{},$index:-1}),s=[];if(Array.isArray(i))for(const o of i)((e=o.type)==null?void 0:e.name)==="ElTableColumn"||o.shapeFlag&2?s.push(o):o.type===Wn&&Array.isArray(o.children)&&o.children.forEach(a=>{(a==null?void 0:a.patchFlag)!==1024&&!pn(a==null?void 0:a.children)&&s.push(a)});return Xt("div",s)}catch{return Xt("div",[])}}});const $me=xs(Ime,{TableColumn:ZF}),zme=Al(ZF),XF=Symbol("uploadContextKey"),Hme="ElUpload";class Ume extends Error{constructor(n,e,i,s){super(n),this.name="UploadAjaxError",this.status=e,this.method=i,this.url=s}}function X8(t,n,e){let i;return e.response?i=`${e.response.error||e.response}`:e.responseText?i=`${e.responseText}`:i=`fail to ${n.method} ${t} ${e.status}`,new Ume(i,e.status,n.method,t)}function Wme(t){const n=t.responseText||t.response;if(!n)return n;try{return JSON.parse(n)}catch{return n}}const jme=t=>{typeof XMLHttpRequest>"u"&&Fa(Hme,"XMLHttpRequest is undefined");const n=new XMLHttpRequest,e=t.action;n.upload&&n.upload.addEventListener("progress",r=>{const o=r;o.percent=r.total>0?r.loaded/r.total*100:0,t.onProgress(o)});const i=new FormData;if(t.data)for(const[r,o]of Object.entries(t.data))Bt(o)&&o.length?i.append(r,...o):i.append(r,o);i.append(t.filename,t.file,t.file.name),n.addEventListener("error",()=>{t.onError(X8(e,t,n))}),n.addEventListener("load",()=>{if(n.status<200||n.status>=300)return t.onError(X8(e,t,n));t.onSuccess(Wme(n))}),n.open(t.method,e,!0),t.withCredentials&&"withCredentials"in n&&(n.withCredentials=!0);const s=t.headers||{};if(s instanceof Headers)s.forEach((r,o)=>n.setRequestHeader(o,r));else for(const[r,o]of Object.entries(s))fc(o)||n.setRequestHeader(r,String(o));return n.send(i),n},JF=["text","picture","picture-card"];let qme=1;const yC=()=>Date.now()+qme++,QF=Ln({action:{type:String,default:"#"},headers:{type:Ft(Object)},method:{type:String,default:"post"},data:{type:Ft([Object,Function,Promise]),default:()=>em({})},multiple:Boolean,name:{type:String,default:"file"},drag:Boolean,withCredentials:Boolean,showFileList:{type:Boolean,default:!0},accept:{type:String,default:""},fileList:{type:Ft(Array),default:()=>em([])},autoUpload:{type:Boolean,default:!0},listType:{type:String,values:JF,default:"text"},httpRequest:{type:Ft(Function),default:jme},disabled:Boolean,limit:Number}),Kme=Ln({...QF,beforeUpload:{type:Ft(Function),default:$n},beforeRemove:{type:Ft(Function)},onRemove:{type:Ft(Function),default:$n},onChange:{type:Ft(Function),default:$n},onPreview:{type:Ft(Function),default:$n},onSuccess:{type:Ft(Function),default:$n},onProgress:{type:Ft(Function),default:$n},onError:{type:Ft(Function),default:$n},onExceed:{type:Ft(Function),default:$n},crossorigin:{type:Ft(String)}}),Gme=Ln({files:{type:Ft(Array),default:()=>em([])},disabled:{type:Boolean,default:!1},handlePreview:{type:Ft(Function),default:$n},listType:{type:String,values:JF,default:"text"},crossorigin:{type:Ft(String)}}),Yme={remove:t=>!!t},Zme=pt({name:"ElUploadList"}),Xme=pt({...Zme,props:Gme,emits:Yme,setup(t,{emit:n}){const e=t,{t:i}=xm(),s=Zt("upload"),r=Zt("icon"),o=Zt("list"),a=Gu(),l=Se(!1),c=se(()=>[s.b("list"),s.bm("list",e.listType),s.is("disabled",e.disabled)]),u=d=>{n("remove",d)};return(d,f)=>(ve(),At(bL,{tag:"ul",class:De(H(c)),name:H(o).b()},{default:Je(()=>[(ve(!0),it(Wn,null,Fu(d.files,(p,m)=>(ve(),it("li",{key:p.uid||p.name,class:De([H(s).be("list","item"),H(s).is(p.status),{focusing:l.value}]),tabindex:"0",onKeydown:$d(v=>!H(a)&&u(p),["delete"]),onFocus:v=>l.value=!0,onBlur:v=>l.value=!1,onClick:v=>l.value=!1},[Et(d.$slots,"default",{file:p,index:m},()=>[d.listType==="picture"||p.status!=="uploading"&&d.listType==="picture-card"?(ve(),it("img",{key:0,class:De(H(s).be("list","item-thumbnail")),src:p.url,crossorigin:d.crossorigin,alt:""},null,10,["src","crossorigin"])):_t("v-if",!0),p.status==="uploading"||d.listType!=="picture-card"?(ve(),it("div",{key:1,class:De(H(s).be("list","item-info"))},[ot("a",{class:De(H(s).be("list","item-name")),onClick:Ui(v=>d.handlePreview(p),["prevent"])},[et(H(yi),{class:De(H(r).m("document"))},{default:Je(()=>[et(H(aae))]),_:1},8,["class"]),ot("span",{class:De(H(s).be("list","item-file-name")),title:p.name},vn(p.name),11,["title"])],10,["onClick"]),p.status==="uploading"?(ve(),At(H(Hfe),{key:0,type:d.listType==="picture-card"?"circle":"line","stroke-width":d.listType==="picture-card"?6:2,percentage:Number(p.percentage),style:Xn(d.listType==="picture-card"?"":"margin-top: 0.5rem")},null,8,["type","stroke-width","percentage","style"])):_t("v-if",!0)],2)):_t("v-if",!0),ot("label",{class:De(H(s).be("list","item-status-label"))},[d.listType==="text"?(ve(),At(H(yi),{key:0,class:De([H(r).m("upload-success"),H(r).m("circle-check")])},{default:Je(()=>[et(H(G4))]),_:1},8,["class"])):["picture-card","picture"].includes(d.listType)?(ve(),At(H(yi),{key:1,class:De([H(r).m("upload-success"),H(r).m("check")])},{default:Je(()=>[et(H(bB))]),_:1},8,["class"])):_t("v-if",!0)],2),H(a)?_t("v-if",!0):(ve(),At(H(yi),{key:2,class:De(H(r).m("close")),onClick:v=>u(p)},{default:Je(()=>[et(H(Qf))]),_:2},1032,["class","onClick"])),_t(" Due to close btn only appears when li gets focused disappears after li gets blurred, thus keyboard navigation can never reach close btn"),_t(" This is a bug which needs to be fixed "),_t(" TODO: Fix the incorrect navigation interaction "),H(a)?_t("v-if",!0):(ve(),it("i",{key:3,class:De(H(r).m("close-tip"))},vn(H(i)("el.upload.deleteTip")),3)),d.listType==="picture-card"?(ve(),it("span",{key:4,class:De(H(s).be("list","item-actions"))},[ot("span",{class:De(H(s).be("list","item-preview")),onClick:v=>d.handlePreview(p)},[et(H(yi),{class:De(H(r).m("zoom-in"))},{default:Je(()=>[et(H(_ae))]),_:1},8,["class"])],10,["onClick"]),H(a)?_t("v-if",!0):(ve(),it("span",{key:0,class:De(H(s).be("list","item-delete")),onClick:v=>u(p)},[et(H(yi),{class:De(H(r).m("delete"))},{default:Je(()=>[et(H(rae))]),_:1},8,["class"])],10,["onClick"]))],2)):_t("v-if",!0)])],42,["onKeydown","onFocus","onBlur","onClick"]))),128)),Et(d.$slots,"append")]),_:3},8,["class","name"]))}});var J8=kn(Xme,[["__file","upload-list.vue"]]);const Jme=Ln({disabled:{type:Boolean,default:!1}}),Qme={file:t=>Bt(t)},eN="ElUploadDrag",epe=pt({name:eN}),tpe=pt({...epe,props:Jme,emits:Qme,setup(t,{emit:n}){jt(XF)||Fa(eN,"usage: <el-upload><el-upload-dragger /></el-upload>");const i=Zt("upload"),s=Se(!1),r=Gu(),o=l=>{if(r.value)return;s.value=!1,l.stopPropagation();const c=Array.from(l.dataTransfer.files);n("file",c)},a=()=>{r.value||(s.value=!0)};return(l,c)=>(ve(),it("div",{class:De([H(i).b("dragger"),H(i).is("dragover",s.value)]),onDrop:Ui(o,["prevent"]),onDragover:Ui(a,["prevent"]),onDragleave:Ui(u=>s.value=!1,["prevent"])},[Et(l.$slots,"default")],42,["onDrop","onDragover","onDragleave"]))}});var npe=kn(tpe,[["__file","upload-dragger.vue"]]);const ipe=Ln({...QF,beforeUpload:{type:Ft(Function),default:$n},onRemove:{type:Ft(Function),default:$n},onStart:{type:Ft(Function),default:$n},onSuccess:{type:Ft(Function),default:$n},onProgress:{type:Ft(Function),default:$n},onError:{type:Ft(Function),default:$n},onExceed:{type:Ft(Function),default:$n}}),spe=pt({name:"ElUploadContent",inheritAttrs:!1}),rpe=pt({...spe,props:ipe,setup(t,{expose:n}){const e=t,i=Zt("upload"),s=Gu(),r=ac({}),o=ac(),a=v=>{if(v.length===0)return;const{autoUpload:y,limit:_,fileList:b,multiple:E,onStart:x,onExceed:A}=e;if(_&&b.length+v.length>_){A(v,b);return}E||(v=v.slice(0,1));for(const I of v){const k=I;k.uid=yC(),x(k),y&&l(k)}},l=async v=>{if(o.value.value="",!e.beforeUpload)return u(v);let y,_={};try{const E=e.data,x=e.beforeUpload(v);_=Yb(e.data)?To(e.data):e.data,y=await x,Yb(e.data)&&Cl(E,_)&&(_=To(e.data))}catch{y=!1}if(y===!1){e.onRemove(v);return}let b=v;y instanceof Blob&&(y instanceof File?b=y:b=new File([y],v.name,{type:v.type})),u(Object.assign(b,{uid:v.uid}),_)},c=async(v,y)=>Ut(v)?v(y):v,u=async(v,y)=>{const{headers:_,data:b,method:E,withCredentials:x,name:A,action:I,onProgress:k,onSuccess:O,onError:M,httpRequest:T}=e;try{y=await c(y??b,v)}catch{e.onRemove(v);return}const{uid:P}=v,R={headers:_||{},withCredentials:x,file:v,data:y,method:E,filename:A,action:I,onProgress:F=>{k(F,v)},onSuccess:F=>{O(F,v),delete r.value[P]},onError:F=>{M(F,v),delete r.value[P]}},L=T(R);r.value[P]=L,L instanceof Promise&&L.then(R.onSuccess,R.onError)},d=v=>{const y=v.target.files;y&&a(Array.from(y))},f=()=>{s.value||(o.value.value="",o.value.click())},p=()=>{f()};return n({abort:v=>{Woe(r.value).filter(v?([_])=>String(v.uid)===_:()=>!0).forEach(([_,b])=>{b instanceof XMLHttpRequest&&b.abort(),delete r.value[_]})},upload:l}),(v,y)=>(ve(),it("div",{class:De([H(i).b(),H(i).m(v.listType),H(i).is("drag",v.drag),H(i).is("disabled",H(s))]),tabindex:H(s)?"-1":"0",onClick:f,onKeydown:$d(Ui(p,["self"]),["enter","space"])},[v.drag?(ve(),At(npe,{key:0,disabled:H(s),onFile:a},{default:Je(()=>[Et(v.$slots,"default")]),_:3},8,["disabled"])):Et(v.$slots,"default",{key:1}),ot("input",{ref_key:"inputRef",ref:o,class:De(H(i).e("input")),name:v.name,disabled:H(s),multiple:v.multiple,accept:v.accept,type:"file",onChange:d,onClick:Ui(()=>{},["stop"])},null,42,["name","disabled","multiple","accept","onClick"])],42,["tabindex","onKeydown"]))}});var Q8=kn(rpe,[["__file","upload-content.vue"]]);const e9="ElUpload",t9=t=>{var n;(n=t.url)!=null&&n.startsWith("blob:")&&URL.revokeObjectURL(t.url)},ope=(t,n)=>{const e=Doe(t,"fileList",void 0,{passive:!0}),i=p=>e.value.find(m=>m.uid===p.uid);function s(p){var m;(m=n.value)==null||m.abort(p)}function r(p=["ready","uploading","success","fail"]){e.value=e.value.filter(m=>!p.includes(m.status))}function o(p){e.value=e.value.filter(m=>m!==p)}const a=(p,m)=>{const v=i(m);v&&(console.error(p),v.status="fail",o(v),t.onError(p,v,e.value),t.onChange(v,e.value))},l=(p,m)=>{const v=i(m);v&&(t.onProgress(p,v,e.value),v.status="uploading",v.percentage=Math.round(p.percent))},c=(p,m)=>{const v=i(m);v&&(v.status="success",v.response=p,t.onSuccess(p,v,e.value),t.onChange(v,e.value))},u=p=>{fc(p.uid)&&(p.uid=yC());const m={name:p.name,percentage:0,status:"ready",size:p.size,raw:p,uid:p.uid};if(t.listType==="picture-card"||t.listType==="picture")try{m.url=URL.createObjectURL(p)}catch(v){v.message,t.onError(v,m,e.value)}e.value=[...e.value,m],t.onChange(m,e.value)},d=async p=>{const m=p instanceof File?i(p):p;m||Fa(e9,"file to be removed not found");const v=y=>{s(y),o(y),t.onRemove(y,e.value),t9(y)};t.beforeRemove?await t.beforeRemove(m,e.value)!==!1&&v(m):v(m)};function f(){e.value.filter(({status:p})=>p==="ready").forEach(({raw:p})=>{var m;return p&&((m=n.value)==null?void 0:m.upload(p))})}return Dt(()=>t.listType,p=>{p!=="picture-card"&&p!=="picture"||(e.value=e.value.map(m=>{const{raw:v,url:y}=m;if(!y&&v)try{m.url=URL.createObjectURL(v)}catch(_){t.onError(_,m,e.value)}return m}))}),Dt(e,p=>{for(const m of p)m.uid||(m.uid=yC()),m.status||(m.status="success")},{immediate:!0,deep:!0}),{uploadFiles:e,abort:s,clearFiles:r,handleError:a,handleProgress:l,handleStart:u,handleSuccess:c,handleRemove:d,submit:f,revokeFileObjectURL:t9}},ape=pt({name:"ElUpload"}),lpe=pt({...ape,props:Kme,setup(t,{expose:n}){const e=t,i=Gu(),s=ac(),{abort:r,submit:o,clearFiles:a,uploadFiles:l,handleStart:c,handleError:u,handleRemove:d,handleSuccess:f,handleProgress:p,revokeFileObjectURL:m}=ope(e,s),v=se(()=>e.listType==="picture-card"),y=se(()=>({...e,fileList:l.value,onStart:c,onProgress:p,onSuccess:f,onError:u,onRemove:d}));return Ts(()=>{l.value.forEach(m)}),es(XF,{accept:bo(e,"accept")}),n({abort:r,submit:o,clearFiles:a,handleStart:c,handleRemove:d}),(_,b)=>(ve(),it("div",null,[H(v)&&_.showFileList?(ve(),At(J8,{key:0,disabled:H(i),"list-type":_.listType,files:H(l),crossorigin:_.crossorigin,"handle-preview":_.onPreview,onRemove:H(d)},F3({append:Je(()=>[et(Q8,Gr({ref_key:"uploadRef",ref:s},H(y)),{default:Je(()=>[_.$slots.trigger?Et(_.$slots,"trigger",{key:0}):_t("v-if",!0),!_.$slots.trigger&&_.$slots.default?Et(_.$slots,"default",{key:1}):_t("v-if",!0)]),_:3},16)]),_:2},[_.$slots.file?{name:"default",fn:Je(({file:E,index:x})=>[Et(_.$slots,"file",{file:E,index:x})])}:void 0]),1032,["disabled","list-type","files","crossorigin","handle-preview","onRemove"])):_t("v-if",!0),!H(v)||H(v)&&!_.showFileList?(ve(),At(Q8,Gr({key:1,ref_key:"uploadRef",ref:s},H(y)),{default:Je(()=>[_.$slots.trigger?Et(_.$slots,"trigger",{key:0}):_t("v-if",!0),!_.$slots.trigger&&_.$slots.default?Et(_.$slots,"default",{key:1}):_t("v-if",!0)]),_:3},16)):_t("v-if",!0),_.$slots.trigger?Et(_.$slots,"default",{key:2}):_t("v-if",!0),Et(_.$slots,"tip"),!H(v)&&_.showFileList?(ve(),At(J8,{key:3,disabled:H(i),"list-type":_.listType,files:H(l),crossorigin:_.crossorigin,"handle-preview":_.onPreview,onRemove:H(d)},F3({_:2},[_.$slots.file?{name:"default",fn:Je(({file:E,index:x})=>[Et(_.$slots,"file",{file:E,index:x})])}:void 0]),1032,["disabled","list-type","files","crossorigin","handle-preview","onRemove"])):_t("v-if",!0)]))}});var cpe=kn(lpe,[["__file","upload.vue"]]);const upe=xs(cpe),tN=["success","info","warning","error"],ir=em({customClass:"",center:!1,dangerouslyUseHTMLString:!1,duration:3e3,icon:void 0,id:"",message:"",onClose:void 0,showClose:!1,type:"info",plain:!1,offset:16,zIndex:0,grouping:!1,repeatNum:1,appendTo:bi?document.body:void 0}),dpe=Ln({customClass:{type:String,default:ir.customClass},center:{type:Boolean,default:ir.center},dangerouslyUseHTMLString:{type:Boolean,default:ir.dangerouslyUseHTMLString},duration:{type:Number,default:ir.duration},icon:{type:qr,default:ir.icon},id:{type:String,default:ir.id},message:{type:Ft([String,Object,Function]),default:ir.message},onClose:{type:Ft(Function),default:ir.onClose},showClose:{type:Boolean,default:ir.showClose},type:{type:String,values:tN,default:ir.type},plain:{type:Boolean,default:ir.plain},offset:{type:Number,default:ir.offset},zIndex:{type:Number,default:ir.zIndex},grouping:{type:Boolean,default:ir.grouping},repeatNum:{type:Number,default:ir.repeatNum}}),hpe={destroy:()=>!0},Ia=b4([]),fpe=t=>{const n=Ia.findIndex(s=>s.id===t),e=Ia[n];let i;return n>0&&(i=Ia[n-1]),{current:e,prev:i}},mpe=t=>{const{prev:n}=fpe(t);return n?n.vm.exposed.bottom.value:0},ppe=(t,n)=>Ia.findIndex(i=>i.id===t)>0?16:n,gpe=pt({name:"ElMessage"}),vpe=pt({...gpe,props:dpe,emits:hpe,setup(t,{expose:n}){const e=t,{Close:i}=kB,{ns:s,zIndex:r}=nce("message"),{currentZIndex:o,nextZIndex:a}=r,l=Se(),c=Se(!1),u=Se(0);let d;const f=se(()=>e.type?e.type==="error"?"danger":e.type:"info"),p=se(()=>{const k=e.type;return{[s.bm("icon",k)]:k&&h_[k]}}),m=se(()=>e.icon||h_[e.type]||""),v=se(()=>mpe(e.id)),y=se(()=>ppe(e.id,e.offset)+v.value),_=se(()=>u.value+y.value),b=se(()=>({top:`${y.value}px`,zIndex:o.value}));function E(){e.duration!==0&&({stop:d}=Gg(()=>{A()},e.duration))}function x(){d==null||d()}function A(){c.value=!1}function I({code:k}){k===ur.esc&&A()}return ri(()=>{E(),a(),c.value=!0}),Dt(()=>e.repeatNum,()=>{x(),E()}),ta(document,"keydown",I),jr(l,()=>{u.value=l.value.getBoundingClientRect().height}),n({visible:c,bottom:_,close:A}),(k,O)=>(ve(),At(Ua,{name:H(s).b("fade"),onBeforeLeave:k.onClose,onAfterLeave:M=>k.$emit("destroy"),persisted:""},{default:Je(()=>[Qi(ot("div",{id:k.id,ref_key:"messageRef",ref:l,class:De([H(s).b(),{[H(s).m(k.type)]:k.type},H(s).is("center",k.center),H(s).is("closable",k.showClose),H(s).is("plain",k.plain),k.customClass]),style:Xn(H(b)),role:"alert",onMouseenter:x,onMouseleave:E},[k.repeatNum>1?(ve(),At(H(Bde),{key:0,value:k.repeatNum,type:H(f),class:De(H(s).e("badge"))},null,8,["value","type","class"])):_t("v-if",!0),H(m)?(ve(),At(H(yi),{key:1,class:De([H(s).e("icon"),H(p)])},{default:Je(()=>[(ve(),At(Cs(H(m))))]),_:1},8,["class"])):_t("v-if",!0),Et(k.$slots,"default",{},()=>[k.dangerouslyUseHTMLString?(ve(),it(Wn,{key:1},[_t(" Caution here, message could've been compromised, never use user's input as message "),ot("p",{class:De(H(s).e("content")),innerHTML:k.message},null,10,["innerHTML"])],2112)):(ve(),it("p",{key:0,class:De(H(s).e("content"))},vn(k.message),3))]),k.showClose?(ve(),At(H(yi),{key:2,class:De(H(s).e("closeBtn")),onClick:Ui(A,["stop"])},{default:Je(()=>[et(H(i))]),_:1},8,["class","onClick"])):_t("v-if",!0)],46,["id"]),[[ra,c.value]])]),_:3},8,["name","onBeforeLeave","onAfterLeave"]))}});var bpe=kn(vpe,[["__file","message.vue"]]);let _pe=1;const nN=t=>{const n=!t||pn(t)||Nu(t)||Ut(t)?{message:t}:t,e={...ir,...n};if(!e.appendTo)e.appendTo=document.body;else if(pn(e.appendTo)){let i=document.querySelector(e.appendTo);Iu(i)||(i=document.body),e.appendTo=i}return e},wpe=t=>{const n=Ia.indexOf(t);if(n===-1)return;Ia.splice(n,1);const{handler:e}=t;e.close()},ype=({appendTo:t,...n},e)=>{const i=`message_${_pe++}`,s=n.onClose,r=document.createElement("div"),o={...n,id:i,onClose:()=>{s==null||s(),wpe(u)},onDestroy:()=>{r_(null,r)}},a=et(bpe,o,Ut(o.message)||Nu(o.message)?{default:Ut(o.message)?o.message:()=>o.message}:null);a.appContext=e||am._context,r_(a,r),t.appendChild(r.firstElementChild);const l=a.component,u={id:i,vnode:a,vm:l,handler:{close:()=>{l.exposed.visible.value=!1}},props:a.component.props};return u},am=(t={},n)=>{if(!bi)return{close:()=>{}};if(Ms(w8.max)&&Ia.length>=w8.max)return{close:()=>{}};const e=nN(t);if(e.grouping&&Ia.length){const s=Ia.find(({vnode:r})=>{var o;return((o=r.props)==null?void 0:o.message)===e.message});if(s)return s.props.repeatNum+=1,s.props.type=e.type,s.handler}const i=ype(e,n);return Ia.push(i),i.handler};tN.forEach(t=>{am[t]=(n={},e)=>{const i=nN(n);return am({...i,type:t},e)}});function Cpe(t){for(const n of Ia)(!t||t===n.props.type)&&n.handler.close()}am.closeAll=Cpe;am._context=null;const vl=Cae(am,"$message");/*!
  * vue-router v4.4.3
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const bf=typeof document<"u";function kpe(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const gi=Object.assign;function l5(t,n){const e={};for(const i in n){const s=n[i];e[i]=Na(s)?s.map(t):t(s)}return e}const pg=()=>{},Na=Array.isArray,iN=/#/g,Epe=/&/g,Spe=/\//g,Tpe=/=/g,xpe=/\?/g,sN=/\+/g,Ape=/%5B/g,Ipe=/%5D/g,rN=/%5E/g,Rpe=/%60/g,oN=/%7B/g,Mpe=/%7C/g,aN=/%7D/g,Ppe=/%20/g;function CE(t){return encodeURI(""+t).replace(Mpe,"|").replace(Ape,"[").replace(Ipe,"]")}function Ope(t){return CE(t).replace(oN,"{").replace(aN,"}").replace(rN,"^")}function CC(t){return CE(t).replace(sN,"%2B").replace(Ppe,"+").replace(iN,"%23").replace(Epe,"%26").replace(Rpe,"`").replace(oN,"{").replace(aN,"}").replace(rN,"^")}function Lpe(t){return CC(t).replace(Tpe,"%3D")}function Bpe(t){return CE(t).replace(iN,"%23").replace(xpe,"%3F")}function Fpe(t){return t==null?"":Bpe(t).replace(Spe,"%2F")}function Jg(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const Npe=/\/$/,Vpe=t=>t.replace(Npe,"");function c5(t,n,e="/"){let i,s={},r="",o="";const a=n.indexOf("#");let l=n.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(i=n.slice(0,l),r=n.slice(l+1,a>-1?a:n.length),s=t(r)),a>-1&&(i=i||n.slice(0,a),o=n.slice(a,n.length)),i=Hpe(i??n,e),{fullPath:i+(r&&"?")+r+o,path:i,query:s,hash:Jg(o)}}function Dpe(t,n){const e=n.query?t(n.query):"";return n.path+(e&&"?")+e+(n.hash||"")}function n9(t,n){return!n||!t.toLowerCase().startsWith(n.toLowerCase())?t:t.slice(n.length)||"/"}function $pe(t,n,e){const i=n.matched.length-1,s=e.matched.length-1;return i>-1&&i===s&&lm(n.matched[i],e.matched[s])&&lN(n.params,e.params)&&t(n.query)===t(e.query)&&n.hash===e.hash}function lm(t,n){return(t.aliasOf||t)===(n.aliasOf||n)}function lN(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const e in t)if(!zpe(t[e],n[e]))return!1;return!0}function zpe(t,n){return Na(t)?i9(t,n):Na(n)?i9(n,t):t===n}function i9(t,n){return Na(n)?t.length===n.length&&t.every((e,i)=>e===n[i]):t.length===1&&t[0]===n}function Hpe(t,n){if(t.startsWith("/"))return t;if(!t)return n;const e=n.split("/"),i=t.split("/"),s=i[i.length-1];(s===".."||s===".")&&i.push("");let r=e.length-1,o,a;for(o=0;o<i.length;o++)if(a=i[o],a!==".")if(a==="..")r>1&&r--;else break;return e.slice(0,r).join("/")+"/"+i.slice(o).join("/")}const Qc={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Qg;(function(t){t.pop="pop",t.push="push"})(Qg||(Qg={}));var gg;(function(t){t.back="back",t.forward="forward",t.unknown=""})(gg||(gg={}));function Upe(t){if(!t)if(bf){const n=document.querySelector("base");t=n&&n.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),Vpe(t)}const Wpe=/^[^#]+#/;function jpe(t,n){return t.replace(Wpe,"#")+n}function qpe(t,n){const e=document.documentElement.getBoundingClientRect(),i=t.getBoundingClientRect();return{behavior:n.behavior,left:i.left-e.left-(n.left||0),top:i.top-e.top-(n.top||0)}}const Ow=()=>({left:window.scrollX,top:window.scrollY});function Kpe(t){let n;if("el"in t){const e=t.el,i=typeof e=="string"&&e.startsWith("#"),s=typeof e=="string"?i?document.getElementById(e.slice(1)):document.querySelector(e):e;if(!s)return;n=qpe(s,t)}else n=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(n):window.scrollTo(n.left!=null?n.left:window.scrollX,n.top!=null?n.top:window.scrollY)}function s9(t,n){return(history.state?history.state.position-n:-1)+t}const kC=new Map;function Gpe(t,n){kC.set(t,n)}function Ype(t){const n=kC.get(t);return kC.delete(t),n}let Zpe=()=>location.protocol+"//"+location.host;function cN(t,n){const{pathname:e,search:i,hash:s}=n,r=t.indexOf("#");if(r>-1){let a=s.includes(t.slice(r))?t.slice(r).length:1,l=s.slice(a);return l[0]!=="/"&&(l="/"+l),n9(l,"")}return n9(e,t)+i+s}function Xpe(t,n,e,i){let s=[],r=[],o=null;const a=({state:f})=>{const p=cN(t,location),m=e.value,v=n.value;let y=0;if(f){if(e.value=p,n.value=f,o&&o===m){o=null;return}y=v?f.position-v.position:0}else i(p);s.forEach(_=>{_(e.value,m,{delta:y,type:Qg.pop,direction:y?y>0?gg.forward:gg.back:gg.unknown})})};function l(){o=e.value}function c(f){s.push(f);const p=()=>{const m=s.indexOf(f);m>-1&&s.splice(m,1)};return r.push(p),p}function u(){const{history:f}=window;f.state&&f.replaceState(gi({},f.state,{scroll:Ow()}),"")}function d(){for(const f of r)f();r=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:d}}function r9(t,n,e,i=!1,s=!1){return{back:t,current:n,forward:e,replaced:i,position:window.history.length,scroll:s?Ow():null}}function Jpe(t){const{history:n,location:e}=window,i={value:cN(t,e)},s={value:n.state};s.value||r(i.value,{back:null,current:i.value,forward:null,position:n.length-1,replaced:!0,scroll:null},!0);function r(l,c,u){const d=t.indexOf("#"),f=d>-1?(e.host&&document.querySelector("base")?t:t.slice(d))+l:Zpe()+t+l;try{n[u?"replaceState":"pushState"](c,"",f),s.value=c}catch(p){console.error(p),e[u?"replace":"assign"](f)}}function o(l,c){const u=gi({},n.state,r9(s.value.back,l,s.value.forward,!0),c,{position:s.value.position});r(l,u,!0),i.value=l}function a(l,c){const u=gi({},s.value,n.state,{forward:l,scroll:Ow()});r(u.current,u,!0);const d=gi({},r9(i.value,l,null),{position:u.position+1},c);r(l,d,!1),i.value=l}return{location:i,state:s,push:a,replace:o}}function Qpe(t){t=Upe(t);const n=Jpe(t),e=Xpe(t,n.state,n.location,n.replace);function i(r,o=!0){o||e.pauseListeners(),history.go(r)}const s=gi({location:"",base:t,go:i,createHref:jpe.bind(null,t)},n,e);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>n.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>n.state.value}),s}function ege(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),Qpe(t)}function tge(t){return typeof t=="string"||t&&typeof t=="object"}function uN(t){return typeof t=="string"||typeof t=="symbol"}const dN=Symbol("");var o9;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(o9||(o9={}));function cm(t,n){return gi(new Error,{type:t,[dN]:!0},n)}function Ul(t,n){return t instanceof Error&&dN in t&&(n==null||!!(t.type&n))}const a9="[^/]+?",nge={sensitive:!1,strict:!1,start:!0,end:!0},ige=/[.+*?^${}()[\]/\\]/g;function sge(t,n){const e=gi({},nge,n),i=[];let s=e.start?"^":"";const r=[];for(const c of t){const u=c.length?[]:[90];e.strict&&!c.length&&(s+="/");for(let d=0;d<c.length;d++){const f=c[d];let p=40+(e.sensitive?.25:0);if(f.type===0)d||(s+="/"),s+=f.value.replace(ige,"\\$&"),p+=40;else if(f.type===1){const{value:m,repeatable:v,optional:y,regexp:_}=f;r.push({name:m,repeatable:v,optional:y});const b=_||a9;if(b!==a9){p+=10;try{new RegExp(`(${b})`)}catch(x){throw new Error(`Invalid custom RegExp for param "${m}" (${b}): `+x.message)}}let E=v?`((?:${b})(?:/(?:${b}))*)`:`(${b})`;d||(E=y&&c.length<2?`(?:/${E})`:"/"+E),y&&(E+="?"),s+=E,p+=20,y&&(p+=-8),v&&(p+=-20),b===".*"&&(p+=-50)}u.push(p)}i.push(u)}if(e.strict&&e.end){const c=i.length-1;i[c][i[c].length-1]+=.7000000000000001}e.strict||(s+="/?"),e.end?s+="$":e.strict&&(s+="(?:/|$)");const o=new RegExp(s,e.sensitive?"":"i");function a(c){const u=c.match(o),d={};if(!u)return null;for(let f=1;f<u.length;f++){const p=u[f]||"",m=r[f-1];d[m.name]=p&&m.repeatable?p.split("/"):p}return d}function l(c){let u="",d=!1;for(const f of t){(!d||!u.endsWith("/"))&&(u+="/"),d=!1;for(const p of f)if(p.type===0)u+=p.value;else if(p.type===1){const{value:m,repeatable:v,optional:y}=p,_=m in c?c[m]:"";if(Na(_)&&!v)throw new Error(`Provided param "${m}" is an array but it is not repeatable (* or + modifiers)`);const b=Na(_)?_.join("/"):_;if(!b)if(y)f.length<2&&(u.endsWith("/")?u=u.slice(0,-1):d=!0);else throw new Error(`Missing required param "${m}"`);u+=b}}return u||"/"}return{re:o,score:i,keys:r,parse:a,stringify:l}}function rge(t,n){let e=0;for(;e<t.length&&e<n.length;){const i=n[e]-t[e];if(i)return i;e++}return t.length<n.length?t.length===1&&t[0]===80?-1:1:t.length>n.length?n.length===1&&n[0]===80?1:-1:0}function hN(t,n){let e=0;const i=t.score,s=n.score;for(;e<i.length&&e<s.length;){const r=rge(i[e],s[e]);if(r)return r;e++}if(Math.abs(s.length-i.length)===1){if(l9(i))return 1;if(l9(s))return-1}return s.length-i.length}function l9(t){const n=t[t.length-1];return t.length>0&&n[n.length-1]<0}const oge={type:0,value:""},age=/[a-zA-Z0-9_]/;function lge(t){if(!t)return[[]];if(t==="/")return[[oge]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function n(p){throw new Error(`ERR (${e})/"${c}": ${p}`)}let e=0,i=e;const s=[];let r;function o(){r&&s.push(r),r=[]}let a=0,l,c="",u="";function d(){c&&(e===0?r.push({type:0,value:c}):e===1||e===2||e===3?(r.length>1&&(l==="*"||l==="+")&&n(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),r.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):n("Invalid state to consume buffer"),c="")}function f(){c+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&e!==2){i=e,e=4;continue}switch(e){case 0:l==="/"?(c&&d(),o()):l===":"?(d(),e=1):f();break;case 4:f(),e=i;break;case 1:l==="("?e=2:age.test(l)?f():(d(),e=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:e=3:u+=l;break;case 3:d(),e=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:n("Unknown state");break}}return e===2&&n(`Unfinished custom RegExp for param "${c}"`),d(),o(),s}function cge(t,n,e){const i=sge(lge(t.path),e),s=gi(i,{record:t,parent:n,children:[],alias:[]});return n&&!s.record.aliasOf==!n.record.aliasOf&&n.children.push(s),s}function uge(t,n){const e=[],i=new Map;n=d9({strict:!1,end:!0,sensitive:!1},n);function s(d){return i.get(d)}function r(d,f,p){const m=!p,v=dge(d);v.aliasOf=p&&p.record;const y=d9(n,d),_=[v];if("alias"in d){const x=typeof d.alias=="string"?[d.alias]:d.alias;for(const A of x)_.push(gi({},v,{components:p?p.record.components:v.components,path:A,aliasOf:p?p.record:v}))}let b,E;for(const x of _){const{path:A}=x;if(f&&A[0]!=="/"){const I=f.record.path,k=I[I.length-1]==="/"?"":"/";x.path=f.record.path+(A&&k+A)}if(b=cge(x,f,y),p?p.alias.push(b):(E=E||b,E!==b&&E.alias.push(b),m&&d.name&&!u9(b)&&o(d.name)),fN(b)&&l(b),v.children){const I=v.children;for(let k=0;k<I.length;k++)r(I[k],b,p&&p.children[k])}p=p||b}return E?()=>{o(E)}:pg}function o(d){if(uN(d)){const f=i.get(d);f&&(i.delete(d),e.splice(e.indexOf(f),1),f.children.forEach(o),f.alias.forEach(o))}else{const f=e.indexOf(d);f>-1&&(e.splice(f,1),d.record.name&&i.delete(d.record.name),d.children.forEach(o),d.alias.forEach(o))}}function a(){return e}function l(d){const f=mge(d,e);e.splice(f,0,d),d.record.name&&!u9(d)&&i.set(d.record.name,d)}function c(d,f){let p,m={},v,y;if("name"in d&&d.name){if(p=i.get(d.name),!p)throw cm(1,{location:d});y=p.record.name,m=gi(c9(f.params,p.keys.filter(E=>!E.optional).concat(p.parent?p.parent.keys.filter(E=>E.optional):[]).map(E=>E.name)),d.params&&c9(d.params,p.keys.map(E=>E.name))),v=p.stringify(m)}else if(d.path!=null)v=d.path,p=e.find(E=>E.re.test(v)),p&&(m=p.parse(v),y=p.record.name);else{if(p=f.name?i.get(f.name):e.find(E=>E.re.test(f.path)),!p)throw cm(1,{location:d,currentLocation:f});y=p.record.name,m=gi({},f.params,d.params),v=p.stringify(m)}const _=[];let b=p;for(;b;)_.unshift(b.record),b=b.parent;return{name:y,path:v,params:m,matched:_,meta:fge(_)}}t.forEach(d=>r(d));function u(){e.length=0,i.clear()}return{addRoute:r,resolve:c,removeRoute:o,clearRoutes:u,getRoutes:a,getRecordMatcher:s}}function c9(t,n){const e={};for(const i of n)i in t&&(e[i]=t[i]);return e}function dge(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:hge(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function hge(t){const n={},e=t.props||!1;if("component"in t)n.default=e;else for(const i in t.components)n[i]=typeof e=="object"?e[i]:e;return n}function u9(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function fge(t){return t.reduce((n,e)=>gi(n,e.meta),{})}function d9(t,n){const e={};for(const i in t)e[i]=i in n?n[i]:t[i];return e}function mge(t,n){let e=0,i=n.length;for(;e!==i;){const r=e+i>>1;hN(t,n[r])<0?i=r:e=r+1}const s=pge(t);return s&&(i=n.lastIndexOf(s,i-1)),i}function pge(t){let n=t;for(;n=n.parent;)if(fN(n)&&hN(t,n)===0)return n}function fN({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function gge(t){const n={};if(t===""||t==="?")return n;const i=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<i.length;++s){const r=i[s].replace(sN," "),o=r.indexOf("="),a=Jg(o<0?r:r.slice(0,o)),l=o<0?null:Jg(r.slice(o+1));if(a in n){let c=n[a];Na(c)||(c=n[a]=[c]),c.push(l)}else n[a]=l}return n}function h9(t){let n="";for(let e in t){const i=t[e];if(e=Lpe(e),i==null){i!==void 0&&(n+=(n.length?"&":"")+e);continue}(Na(i)?i.map(r=>r&&CC(r)):[i&&CC(i)]).forEach(r=>{r!==void 0&&(n+=(n.length?"&":"")+e,r!=null&&(n+="="+r))})}return n}function vge(t){const n={};for(const e in t){const i=t[e];i!==void 0&&(n[e]=Na(i)?i.map(s=>s==null?null:""+s):i==null?i:""+i)}return n}const bge=Symbol(""),f9=Symbol(""),Lw=Symbol(""),kE=Symbol(""),EC=Symbol("");function hp(){let t=[];function n(i){return t.push(i),()=>{const s=t.indexOf(i);s>-1&&t.splice(s,1)}}function e(){t=[]}return{add:n,list:()=>t.slice(),reset:e}}function _u(t,n,e,i,s,r=o=>o()){const o=i&&(i.enterCallbacks[s]=i.enterCallbacks[s]||[]);return()=>new Promise((a,l)=>{const c=f=>{f===!1?l(cm(4,{from:e,to:n})):f instanceof Error?l(f):tge(f)?l(cm(2,{from:n,to:f})):(o&&i.enterCallbacks[s]===o&&typeof f=="function"&&o.push(f),a())},u=r(()=>t.call(i&&i.instances[s],n,e,c));let d=Promise.resolve(u);t.length<3&&(d=d.then(c)),d.catch(f=>l(f))})}function u5(t,n,e,i,s=r=>r()){const r=[];for(const o of t)for(const a in o.components){let l=o.components[a];if(!(n!=="beforeRouteEnter"&&!o.instances[a]))if(_ge(l)){const u=(l.__vccOpts||l)[n];u&&r.push(_u(u,e,i,o,a,s))}else{let c=l();r.push(()=>c.then(u=>{if(!u)return Promise.reject(new Error(`Couldn't resolve component "${a}" at "${o.path}"`));const d=kpe(u)?u.default:u;o.components[a]=d;const p=(d.__vccOpts||d)[n];return p&&_u(p,e,i,o,a,s)()}))}}return r}function _ge(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function m9(t){const n=jt(Lw),e=jt(kE),i=se(()=>{const l=H(t.to);return n.resolve(l)}),s=se(()=>{const{matched:l}=i.value,{length:c}=l,u=l[c-1],d=e.matched;if(!u||!d.length)return-1;const f=d.findIndex(lm.bind(null,u));if(f>-1)return f;const p=p9(l[c-2]);return c>1&&p9(u)===p&&d[d.length-1].path!==p?d.findIndex(lm.bind(null,l[c-2])):f}),r=se(()=>s.value>-1&&kge(e.params,i.value.params)),o=se(()=>s.value>-1&&s.value===e.matched.length-1&&lN(e.params,i.value.params));function a(l={}){return Cge(l)?n[H(t.replace)?"replace":"push"](H(t.to)).catch(pg):Promise.resolve()}return{route:i,href:se(()=>i.value.href),isActive:r,isExactActive:o,navigate:a}}const wge=pt({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:m9,setup(t,{slots:n}){const e=Ir(m9(t)),{options:i}=jt(Lw),s=se(()=>({[g9(t.activeClass,i.linkActiveClass,"router-link-active")]:e.isActive,[g9(t.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:e.isExactActive}));return()=>{const r=n.default&&n.default(e);return t.custom?r:Xt("a",{"aria-current":e.isExactActive?t.ariaCurrentValue:null,href:e.href,onClick:e.navigate,class:s.value},r)}}}),yge=wge;function Cge(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const n=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(n))return}return t.preventDefault&&t.preventDefault(),!0}}function kge(t,n){for(const e in n){const i=n[e],s=t[e];if(typeof i=="string"){if(i!==s)return!1}else if(!Na(s)||s.length!==i.length||i.some((r,o)=>r!==s[o]))return!1}return!0}function p9(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const g9=(t,n,e)=>t??n??e,Ege=pt({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:n,slots:e}){const i=jt(EC),s=se(()=>t.route||i.value),r=jt(f9,0),o=se(()=>{let c=H(r);const{matched:u}=s.value;let d;for(;(d=u[c])&&!d.components;)c++;return c}),a=se(()=>s.value.matched[o.value]);es(f9,se(()=>o.value+1)),es(bge,a),es(EC,s);const l=Se();return Dt(()=>[l.value,a.value,t.name],([c,u,d],[f,p,m])=>{u&&(u.instances[d]=c,p&&p!==u&&c&&c===f&&(u.leaveGuards.size||(u.leaveGuards=p.leaveGuards),u.updateGuards.size||(u.updateGuards=p.updateGuards))),c&&u&&(!p||!lm(u,p)||!f)&&(u.enterCallbacks[d]||[]).forEach(v=>v(c))},{flush:"post"}),()=>{const c=s.value,u=t.name,d=a.value,f=d&&d.components[u];if(!f)return v9(e.default,{Component:f,route:c});const p=d.props[u],m=p?p===!0?c.params:typeof p=="function"?p(c):p:null,y=Xt(f,gi({},m,n,{onVnodeUnmounted:_=>{_.component.isUnmounted&&(d.instances[u]=null)},ref:l}));return v9(e.default,{Component:y,route:c})||y}}});function v9(t,n){if(!t)return null;const e=t(n);return e.length===1?e[0]:e}const Sge=Ege;function Tge(t){const n=uge(t.routes,t),e=t.parseQuery||gge,i=t.stringifyQuery||h9,s=t.history,r=hp(),o=hp(),a=hp(),l=ac(Qc);let c=Qc;bf&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=l5.bind(null,ne=>""+ne),d=l5.bind(null,Fpe),f=l5.bind(null,Jg);function p(ne,me){let pe,ge;return uN(ne)?(pe=n.getRecordMatcher(ne),ge=me):ge=ne,n.addRoute(ge,pe)}function m(ne){const me=n.getRecordMatcher(ne);me&&n.removeRoute(me)}function v(){return n.getRoutes().map(ne=>ne.record)}function y(ne){return!!n.getRecordMatcher(ne)}function _(ne,me){if(me=gi({},me||l.value),typeof ne=="string"){const $=c5(e,ne,me.path),X=n.resolve({path:$.path},me),le=s.createHref($.fullPath);return gi($,X,{params:f(X.params),hash:Jg($.hash),redirectedFrom:void 0,href:le})}let pe;if(ne.path!=null)pe=gi({},ne,{path:c5(e,ne.path,me.path).path});else{const $=gi({},ne.params);for(const X in $)$[X]==null&&delete $[X];pe=gi({},ne,{params:d($)}),me.params=d(me.params)}const ge=n.resolve(pe,me),rt=ne.hash||"";ge.params=u(f(ge.params));const wt=Dpe(i,gi({},ne,{hash:Ope(rt),path:ge.path})),D=s.createHref(wt);return gi({fullPath:wt,hash:rt,query:i===h9?vge(ne.query):ne.query||{}},ge,{redirectedFrom:void 0,href:D})}function b(ne){return typeof ne=="string"?c5(e,ne,l.value.path):gi({},ne)}function E(ne,me){if(c!==ne)return cm(8,{from:me,to:ne})}function x(ne){return k(ne)}function A(ne){return x(gi(b(ne),{replace:!0}))}function I(ne){const me=ne.matched[ne.matched.length-1];if(me&&me.redirect){const{redirect:pe}=me;let ge=typeof pe=="function"?pe(ne):pe;return typeof ge=="string"&&(ge=ge.includes("?")||ge.includes("#")?ge=b(ge):{path:ge},ge.params={}),gi({query:ne.query,hash:ne.hash,params:ge.path!=null?{}:ne.params},ge)}}function k(ne,me){const pe=c=_(ne),ge=l.value,rt=ne.state,wt=ne.force,D=ne.replace===!0,$=I(pe);if($)return k(gi(b($),{state:typeof $=="object"?gi({},rt,$.state):rt,force:wt,replace:D}),me||pe);const X=pe;X.redirectedFrom=me;let le;return!wt&&$pe(i,ge,pe)&&(le=cm(16,{to:X,from:ge}),V(ge,ge,!0,!1)),(le?Promise.resolve(le):T(X,ge)).catch(ie=>Ul(ie)?Ul(ie,2)?ie:S(ie):q(ie,X,ge)).then(ie=>{if(ie){if(Ul(ie,2))return k(gi({replace:D},b(ie.to),{state:typeof ie.to=="object"?gi({},rt,ie.to.state):rt,force:wt}),me||X)}else ie=R(X,ge,!0,D,rt);return P(X,ge,ie),ie})}function O(ne,me){const pe=E(ne,me);return pe?Promise.reject(pe):Promise.resolve()}function M(ne){const me=Pe.values().next().value;return me&&typeof me.runWithContext=="function"?me.runWithContext(ne):ne()}function T(ne,me){let pe;const[ge,rt,wt]=xge(ne,me);pe=u5(ge.reverse(),"beforeRouteLeave",ne,me);for(const $ of ge)$.leaveGuards.forEach(X=>{pe.push(_u(X,ne,me))});const D=O.bind(null,ne,me);return pe.push(D),Ne(pe).then(()=>{pe=[];for(const $ of r.list())pe.push(_u($,ne,me));return pe.push(D),Ne(pe)}).then(()=>{pe=u5(rt,"beforeRouteUpdate",ne,me);for(const $ of rt)$.updateGuards.forEach(X=>{pe.push(_u(X,ne,me))});return pe.push(D),Ne(pe)}).then(()=>{pe=[];for(const $ of wt)if($.beforeEnter)if(Na($.beforeEnter))for(const X of $.beforeEnter)pe.push(_u(X,ne,me));else pe.push(_u($.beforeEnter,ne,me));return pe.push(D),Ne(pe)}).then(()=>(ne.matched.forEach($=>$.enterCallbacks={}),pe=u5(wt,"beforeRouteEnter",ne,me,M),pe.push(D),Ne(pe))).then(()=>{pe=[];for(const $ of o.list())pe.push(_u($,ne,me));return pe.push(D),Ne(pe)}).catch($=>Ul($,8)?$:Promise.reject($))}function P(ne,me,pe){a.list().forEach(ge=>M(()=>ge(ne,me,pe)))}function R(ne,me,pe,ge,rt){const wt=E(ne,me);if(wt)return wt;const D=me===Qc,$=bf?history.state:{};pe&&(ge||D?s.replace(ne.fullPath,gi({scroll:D&&$&&$.scroll},rt)):s.push(ne.fullPath,rt)),l.value=ne,V(ne,me,pe,D),S()}let L;function F(){L||(L=s.listen((ne,me,pe)=>{if(!Fe.listening)return;const ge=_(ne),rt=I(ge);if(rt){k(gi(rt,{replace:!0}),ge).catch(pg);return}c=ge;const wt=l.value;bf&&Gpe(s9(wt.fullPath,pe.delta),Ow()),T(ge,wt).catch(D=>Ul(D,12)?D:Ul(D,2)?(k(D.to,ge).then($=>{Ul($,20)&&!pe.delta&&pe.type===Qg.pop&&s.go(-1,!1)}).catch(pg),Promise.reject()):(pe.delta&&s.go(-pe.delta,!1),q(D,ge,wt))).then(D=>{D=D||R(ge,wt,!1),D&&(pe.delta&&!Ul(D,8)?s.go(-pe.delta,!1):pe.type===Qg.pop&&Ul(D,20)&&s.go(-1,!1)),P(ge,wt,D)}).catch(pg)}))}let B=hp(),z=hp(),J;function q(ne,me,pe){S(ne);const ge=z.list();return ge.length?ge.forEach(rt=>rt(ne,me,pe)):console.error(ne),Promise.reject(ne)}function G(){return J&&l.value!==Qc?Promise.resolve():new Promise((ne,me)=>{B.add([ne,me])})}function S(ne){return J||(J=!ne,F(),B.list().forEach(([me,pe])=>ne?pe(ne):me()),B.reset()),ne}function V(ne,me,pe,ge){const{scrollBehavior:rt}=t;if(!bf||!rt)return Promise.resolve();const wt=!pe&&Ype(s9(ne.fullPath,0))||(ge||!pe)&&history.state&&history.state.scroll||null;return Jn().then(()=>rt(ne,me,wt)).then(D=>D&&Kpe(D)).catch(D=>q(D,ne,me))}const re=ne=>s.go(ne);let U;const Pe=new Set,Fe={currentRoute:l,listening:!0,addRoute:p,removeRoute:m,clearRoutes:n.clearRoutes,hasRoute:y,getRoutes:v,resolve:_,options:t,push:x,replace:A,go:re,back:()=>re(-1),forward:()=>re(1),beforeEach:r.add,beforeResolve:o.add,afterEach:a.add,onError:z.add,isReady:G,install(ne){const me=this;ne.component("RouterLink",yge),ne.component("RouterView",Sge),ne.config.globalProperties.$router=me,Object.defineProperty(ne.config.globalProperties,"$route",{enumerable:!0,get:()=>H(l)}),bf&&!U&&l.value===Qc&&(U=!0,x(s.location).catch(rt=>{}));const pe={};for(const rt in Qc)Object.defineProperty(pe,rt,{get:()=>l.value[rt],enumerable:!0});ne.provide(Lw,me),ne.provide(kE,b4(pe)),ne.provide(EC,l);const ge=ne.unmount;Pe.add(ne),ne.unmount=function(){Pe.delete(ne),Pe.size<1&&(c=Qc,L&&L(),L=null,l.value=Qc,U=!1,J=!1),ge()}}};function Ne(ne){return ne.reduce((me,pe)=>me.then(()=>M(pe)),Promise.resolve())}return Fe}function xge(t,n){const e=[],i=[],s=[],r=Math.max(n.matched.length,t.matched.length);for(let o=0;o<r;o++){const a=n.matched[o];a&&(t.matched.find(c=>lm(c,a))?i.push(a):e.push(a));const l=t.matched[o];l&&(n.matched.find(c=>lm(c,l))||s.push(l))}return[e,i,s]}function mN(){return jt(Lw)}function Age(t){return jt(kE)}function pN(t,n){return function(){return t.apply(n,arguments)}}const{toString:Ige}=Object.prototype,{getPrototypeOf:EE}=Object,Bw=(t=>n=>{const e=Ige.call(n);return t[e]||(t[e]=e.slice(8,-1).toLowerCase())})(Object.create(null)),qa=t=>(t=t.toLowerCase(),n=>Bw(n)===t),Fw=t=>n=>typeof n===t,{isArray:Pm}=Array,e1=Fw("undefined");function Rge(t){return t!==null&&!e1(t)&&t.constructor!==null&&!e1(t.constructor)&&yo(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const gN=qa("ArrayBuffer");function Mge(t){let n;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?n=ArrayBuffer.isView(t):n=t&&t.buffer&&gN(t.buffer),n}const Pge=Fw("string"),yo=Fw("function"),vN=Fw("number"),Nw=t=>t!==null&&typeof t=="object",Oge=t=>t===!0||t===!1,Eb=t=>{if(Bw(t)!=="object")return!1;const n=EE(t);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Lge=qa("Date"),Bge=qa("File"),Fge=qa("Blob"),Nge=qa("FileList"),Vge=t=>Nw(t)&&yo(t.pipe),Dge=t=>{let n;return t&&(typeof FormData=="function"&&t instanceof FormData||yo(t.append)&&((n=Bw(t))==="formdata"||n==="object"&&yo(t.toString)&&t.toString()==="[object FormData]"))},$ge=qa("URLSearchParams"),[zge,Hge,Uge,Wge]=["ReadableStream","Request","Response","Headers"].map(qa),jge=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function H1(t,n,{allOwnKeys:e=!1}={}){if(t===null||typeof t>"u")return;let i,s;if(typeof t!="object"&&(t=[t]),Pm(t))for(i=0,s=t.length;i<s;i++)n.call(null,t[i],i,t);else{const r=e?Object.getOwnPropertyNames(t):Object.keys(t),o=r.length;let a;for(i=0;i<o;i++)a=r[i],n.call(null,t[a],a,t)}}function bN(t,n){n=n.toLowerCase();const e=Object.keys(t);let i=e.length,s;for(;i-- >0;)if(s=e[i],n===s.toLowerCase())return s;return null}const Gd=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,_N=t=>!e1(t)&&t!==Gd;function SC(){const{caseless:t}=_N(this)&&this||{},n={},e=(i,s)=>{const r=t&&bN(n,s)||s;Eb(n[r])&&Eb(i)?n[r]=SC(n[r],i):Eb(i)?n[r]=SC({},i):Pm(i)?n[r]=i.slice():n[r]=i};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&H1(arguments[i],e);return n}const qge=(t,n,e,{allOwnKeys:i}={})=>(H1(n,(s,r)=>{e&&yo(s)?t[r]=pN(s,e):t[r]=s},{allOwnKeys:i}),t),Kge=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Gge=(t,n,e,i)=>{t.prototype=Object.create(n.prototype,i),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:n.prototype}),e&&Object.assign(t.prototype,e)},Yge=(t,n,e,i)=>{let s,r,o;const a={};if(n=n||{},t==null)return n;do{for(s=Object.getOwnPropertyNames(t),r=s.length;r-- >0;)o=s[r],(!i||i(o,t,n))&&!a[o]&&(n[o]=t[o],a[o]=!0);t=e!==!1&&EE(t)}while(t&&(!e||e(t,n))&&t!==Object.prototype);return n},Zge=(t,n,e)=>{t=String(t),(e===void 0||e>t.length)&&(e=t.length),e-=n.length;const i=t.indexOf(n,e);return i!==-1&&i===e},Xge=t=>{if(!t)return null;if(Pm(t))return t;let n=t.length;if(!vN(n))return null;const e=new Array(n);for(;n-- >0;)e[n]=t[n];return e},Jge=(t=>n=>t&&n instanceof t)(typeof Uint8Array<"u"&&EE(Uint8Array)),Qge=(t,n)=>{const i=(t&&t[Symbol.iterator]).call(t);let s;for(;(s=i.next())&&!s.done;){const r=s.value;n.call(t,r[0],r[1])}},e1e=(t,n)=>{let e;const i=[];for(;(e=t.exec(n))!==null;)i.push(e);return i},t1e=qa("HTMLFormElement"),n1e=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,i,s){return i.toUpperCase()+s}),b9=(({hasOwnProperty:t})=>(n,e)=>t.call(n,e))(Object.prototype),i1e=qa("RegExp"),wN=(t,n)=>{const e=Object.getOwnPropertyDescriptors(t),i={};H1(e,(s,r)=>{let o;(o=n(s,r,t))!==!1&&(i[r]=o||s)}),Object.defineProperties(t,i)},s1e=t=>{wN(t,(n,e)=>{if(yo(t)&&["arguments","caller","callee"].indexOf(e)!==-1)return!1;const i=t[e];if(yo(i)){if(n.enumerable=!1,"writable"in n){n.writable=!1;return}n.set||(n.set=()=>{throw Error("Can not rewrite read-only method '"+e+"'")})}})},r1e=(t,n)=>{const e={},i=s=>{s.forEach(r=>{e[r]=!0})};return Pm(t)?i(t):i(String(t).split(n)),e},o1e=()=>{},a1e=(t,n)=>t!=null&&Number.isFinite(t=+t)?t:n,d5="abcdefghijklmnopqrstuvwxyz",_9="0123456789",yN={DIGIT:_9,ALPHA:d5,ALPHA_DIGIT:d5+d5.toUpperCase()+_9},l1e=(t=16,n=yN.ALPHA_DIGIT)=>{let e="";const{length:i}=n;for(;t--;)e+=n[Math.random()*i|0];return e};function c1e(t){return!!(t&&yo(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const u1e=t=>{const n=new Array(10),e=(i,s)=>{if(Nw(i)){if(n.indexOf(i)>=0)return;if(!("toJSON"in i)){n[s]=i;const r=Pm(i)?[]:{};return H1(i,(o,a)=>{const l=e(o,s+1);!e1(l)&&(r[a]=l)}),n[s]=void 0,r}}return i};return e(t,0)},d1e=qa("AsyncFunction"),h1e=t=>t&&(Nw(t)||yo(t))&&yo(t.then)&&yo(t.catch),CN=((t,n)=>t?setImmediate:n?((e,i)=>(Gd.addEventListener("message",({source:s,data:r})=>{s===Gd&&r===e&&i.length&&i.shift()()},!1),s=>{i.push(s),Gd.postMessage(e,"*")}))(`axios@${Math.random()}`,[]):e=>setTimeout(e))(typeof setImmediate=="function",yo(Gd.postMessage)),f1e=typeof queueMicrotask<"u"?queueMicrotask.bind(Gd):typeof process<"u"&&process.nextTick||CN,tt={isArray:Pm,isArrayBuffer:gN,isBuffer:Rge,isFormData:Dge,isArrayBufferView:Mge,isString:Pge,isNumber:vN,isBoolean:Oge,isObject:Nw,isPlainObject:Eb,isReadableStream:zge,isRequest:Hge,isResponse:Uge,isHeaders:Wge,isUndefined:e1,isDate:Lge,isFile:Bge,isBlob:Fge,isRegExp:i1e,isFunction:yo,isStream:Vge,isURLSearchParams:$ge,isTypedArray:Jge,isFileList:Nge,forEach:H1,merge:SC,extend:qge,trim:jge,stripBOM:Kge,inherits:Gge,toFlatObject:Yge,kindOf:Bw,kindOfTest:qa,endsWith:Zge,toArray:Xge,forEachEntry:Qge,matchAll:e1e,isHTMLForm:t1e,hasOwnProperty:b9,hasOwnProp:b9,reduceDescriptors:wN,freezeMethods:s1e,toObjectSet:r1e,toCamelCase:n1e,noop:o1e,toFiniteNumber:a1e,findKey:bN,global:Gd,isContextDefined:_N,ALPHABET:yN,generateString:l1e,isSpecCompliantForm:c1e,toJSONObject:u1e,isAsyncFn:d1e,isThenable:h1e,setImmediate:CN,asap:f1e};function Sn(t,n,e,i,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",n&&(this.code=n),e&&(this.config=e),i&&(this.request=i),s&&(this.response=s,this.status=s.status?s.status:null)}tt.inherits(Sn,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:tt.toJSONObject(this.config),code:this.code,status:this.status}}});const kN=Sn.prototype,EN={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{EN[t]={value:t}});Object.defineProperties(Sn,EN);Object.defineProperty(kN,"isAxiosError",{value:!0});Sn.from=(t,n,e,i,s,r)=>{const o=Object.create(kN);return tt.toFlatObject(t,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),Sn.call(o,t.message,n,e,i,s),o.cause=t,o.name=t.name,r&&Object.assign(o,r),o};const m1e=null;function TC(t){return tt.isPlainObject(t)||tt.isArray(t)}function SN(t){return tt.endsWith(t,"[]")?t.slice(0,-2):t}function w9(t,n,e){return t?t.concat(n).map(function(s,r){return s=SN(s),!e&&r?"["+s+"]":s}).join(e?".":""):n}function p1e(t){return tt.isArray(t)&&!t.some(TC)}const g1e=tt.toFlatObject(tt,{},null,function(n){return/^is[A-Z]/.test(n)});function Vw(t,n,e){if(!tt.isObject(t))throw new TypeError("target must be an object");n=n||new FormData,e=tt.toFlatObject(e,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,y){return!tt.isUndefined(y[v])});const i=e.metaTokens,s=e.visitor||u,r=e.dots,o=e.indexes,l=(e.Blob||typeof Blob<"u"&&Blob)&&tt.isSpecCompliantForm(n);if(!tt.isFunction(s))throw new TypeError("visitor must be a function");function c(m){if(m===null)return"";if(tt.isDate(m))return m.toISOString();if(!l&&tt.isBlob(m))throw new Sn("Blob is not supported. Use a Buffer instead.");return tt.isArrayBuffer(m)||tt.isTypedArray(m)?l&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function u(m,v,y){let _=m;if(m&&!y&&typeof m=="object"){if(tt.endsWith(v,"{}"))v=i?v:v.slice(0,-2),m=JSON.stringify(m);else if(tt.isArray(m)&&p1e(m)||(tt.isFileList(m)||tt.endsWith(v,"[]"))&&(_=tt.toArray(m)))return v=SN(v),_.forEach(function(E,x){!(tt.isUndefined(E)||E===null)&&n.append(o===!0?w9([v],x,r):o===null?v:v+"[]",c(E))}),!1}return TC(m)?!0:(n.append(w9(y,v,r),c(m)),!1)}const d=[],f=Object.assign(g1e,{defaultVisitor:u,convertValue:c,isVisitable:TC});function p(m,v){if(!tt.isUndefined(m)){if(d.indexOf(m)!==-1)throw Error("Circular reference detected in "+v.join("."));d.push(m),tt.forEach(m,function(_,b){(!(tt.isUndefined(_)||_===null)&&s.call(n,_,tt.isString(b)?b.trim():b,v,f))===!0&&p(_,v?v.concat(b):[b])}),d.pop()}}if(!tt.isObject(t))throw new TypeError("data must be an object");return p(t),n}function y9(t){const n={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(i){return n[i]})}function SE(t,n){this._pairs=[],t&&Vw(t,this,n)}const TN=SE.prototype;TN.append=function(n,e){this._pairs.push([n,e])};TN.toString=function(n){const e=n?function(i){return n.call(this,i,y9)}:y9;return this._pairs.map(function(s){return e(s[0])+"="+e(s[1])},"").join("&")};function v1e(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function xN(t,n,e){if(!n)return t;const i=e&&e.encode||v1e,s=e&&e.serialize;let r;if(s?r=s(n,e):r=tt.isURLSearchParams(n)?n.toString():new SE(n,e).toString(i),r){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+r}return t}class C9{constructor(){this.handlers=[]}use(n,e,i){return this.handlers.push({fulfilled:n,rejected:e,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(n){this.handlers[n]&&(this.handlers[n]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(n){tt.forEach(this.handlers,function(i){i!==null&&n(i)})}}const AN={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},b1e=typeof URLSearchParams<"u"?URLSearchParams:SE,_1e=typeof FormData<"u"?FormData:null,w1e=typeof Blob<"u"?Blob:null,y1e={isBrowser:!0,classes:{URLSearchParams:b1e,FormData:_1e,Blob:w1e},protocols:["http","https","file","blob","url","data"]},TE=typeof window<"u"&&typeof document<"u",xC=typeof navigator=="object"&&navigator||void 0,C1e=TE&&(!xC||["ReactNative","NativeScript","NS"].indexOf(xC.product)<0),k1e=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",E1e=TE&&window.location.href||"http://localhost",S1e=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:TE,hasStandardBrowserEnv:C1e,hasStandardBrowserWebWorkerEnv:k1e,navigator:xC,origin:E1e},Symbol.toStringTag,{value:"Module"})),Co={...S1e,...y1e};function T1e(t,n){return Vw(t,new Co.classes.URLSearchParams,Object.assign({visitor:function(e,i,s,r){return Co.isNode&&tt.isBuffer(e)?(this.append(i,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},n))}function x1e(t){return tt.matchAll(/\w+|\[(\w*)]/g,t).map(n=>n[0]==="[]"?"":n[1]||n[0])}function A1e(t){const n={},e=Object.keys(t);let i;const s=e.length;let r;for(i=0;i<s;i++)r=e[i],n[r]=t[r];return n}function IN(t){function n(e,i,s,r){let o=e[r++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=r>=e.length;return o=!o&&tt.isArray(s)?s.length:o,l?(tt.hasOwnProp(s,o)?s[o]=[s[o],i]:s[o]=i,!a):((!s[o]||!tt.isObject(s[o]))&&(s[o]=[]),n(e,i,s[o],r)&&tt.isArray(s[o])&&(s[o]=A1e(s[o])),!a)}if(tt.isFormData(t)&&tt.isFunction(t.entries)){const e={};return tt.forEachEntry(t,(i,s)=>{n(x1e(i),s,e,0)}),e}return null}function I1e(t,n,e){if(tt.isString(t))try{return(n||JSON.parse)(t),tt.trim(t)}catch(i){if(i.name!=="SyntaxError")throw i}return(e||JSON.stringify)(t)}const U1={transitional:AN,adapter:["xhr","http","fetch"],transformRequest:[function(n,e){const i=e.getContentType()||"",s=i.indexOf("application/json")>-1,r=tt.isObject(n);if(r&&tt.isHTMLForm(n)&&(n=new FormData(n)),tt.isFormData(n))return s?JSON.stringify(IN(n)):n;if(tt.isArrayBuffer(n)||tt.isBuffer(n)||tt.isStream(n)||tt.isFile(n)||tt.isBlob(n)||tt.isReadableStream(n))return n;if(tt.isArrayBufferView(n))return n.buffer;if(tt.isURLSearchParams(n))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),n.toString();let a;if(r){if(i.indexOf("application/x-www-form-urlencoded")>-1)return T1e(n,this.formSerializer).toString();if((a=tt.isFileList(n))||i.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Vw(a?{"files[]":n}:n,l&&new l,this.formSerializer)}}return r||s?(e.setContentType("application/json",!1),I1e(n)):n}],transformResponse:[function(n){const e=this.transitional||U1.transitional,i=e&&e.forcedJSONParsing,s=this.responseType==="json";if(tt.isResponse(n)||tt.isReadableStream(n))return n;if(n&&tt.isString(n)&&(i&&!this.responseType||s)){const o=!(e&&e.silentJSONParsing)&&s;try{return JSON.parse(n)}catch(a){if(o)throw a.name==="SyntaxError"?Sn.from(a,Sn.ERR_BAD_RESPONSE,this,null,this.response):a}}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Co.classes.FormData,Blob:Co.classes.Blob},validateStatus:function(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};tt.forEach(["delete","get","head","post","put","patch"],t=>{U1.headers[t]={}});const R1e=tt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),M1e=t=>{const n={};let e,i,s;return t&&t.split(`
`).forEach(function(o){s=o.indexOf(":"),e=o.substring(0,s).trim().toLowerCase(),i=o.substring(s+1).trim(),!(!e||n[e]&&R1e[e])&&(e==="set-cookie"?n[e]?n[e].push(i):n[e]=[i]:n[e]=n[e]?n[e]+", "+i:i)}),n},k9=Symbol("internals");function fp(t){return t&&String(t).trim().toLowerCase()}function Sb(t){return t===!1||t==null?t:tt.isArray(t)?t.map(Sb):String(t)}function P1e(t){const n=Object.create(null),e=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=e.exec(t);)n[i[1]]=i[2];return n}const O1e=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function h5(t,n,e,i,s){if(tt.isFunction(i))return i.call(this,n,e);if(s&&(n=e),!!tt.isString(n)){if(tt.isString(i))return n.indexOf(i)!==-1;if(tt.isRegExp(i))return i.test(n)}}function L1e(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(n,e,i)=>e.toUpperCase()+i)}function B1e(t,n){const e=tt.toCamelCase(" "+n);["get","set","has"].forEach(i=>{Object.defineProperty(t,i+e,{value:function(s,r,o){return this[i].call(this,n,s,r,o)},configurable:!0})})}class Xr{constructor(n){n&&this.set(n)}set(n,e,i){const s=this;function r(a,l,c){const u=fp(l);if(!u)throw new Error("header name must be a non-empty string");const d=tt.findKey(s,u);(!d||s[d]===void 0||c===!0||c===void 0&&s[d]!==!1)&&(s[d||l]=Sb(a))}const o=(a,l)=>tt.forEach(a,(c,u)=>r(c,u,l));if(tt.isPlainObject(n)||n instanceof this.constructor)o(n,e);else if(tt.isString(n)&&(n=n.trim())&&!O1e(n))o(M1e(n),e);else if(tt.isHeaders(n))for(const[a,l]of n.entries())r(l,a,i);else n!=null&&r(e,n,i);return this}get(n,e){if(n=fp(n),n){const i=tt.findKey(this,n);if(i){const s=this[i];if(!e)return s;if(e===!0)return P1e(s);if(tt.isFunction(e))return e.call(this,s,i);if(tt.isRegExp(e))return e.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(n,e){if(n=fp(n),n){const i=tt.findKey(this,n);return!!(i&&this[i]!==void 0&&(!e||h5(this,this[i],i,e)))}return!1}delete(n,e){const i=this;let s=!1;function r(o){if(o=fp(o),o){const a=tt.findKey(i,o);a&&(!e||h5(i,i[a],a,e))&&(delete i[a],s=!0)}}return tt.isArray(n)?n.forEach(r):r(n),s}clear(n){const e=Object.keys(this);let i=e.length,s=!1;for(;i--;){const r=e[i];(!n||h5(this,this[r],r,n,!0))&&(delete this[r],s=!0)}return s}normalize(n){const e=this,i={};return tt.forEach(this,(s,r)=>{const o=tt.findKey(i,r);if(o){e[o]=Sb(s),delete e[r];return}const a=n?L1e(r):String(r).trim();a!==r&&delete e[r],e[a]=Sb(s),i[a]=!0}),this}concat(...n){return this.constructor.concat(this,...n)}toJSON(n){const e=Object.create(null);return tt.forEach(this,(i,s)=>{i!=null&&i!==!1&&(e[s]=n&&tt.isArray(i)?i.join(", "):i)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([n,e])=>n+": "+e).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(n){return n instanceof this?n:new this(n)}static concat(n,...e){const i=new this(n);return e.forEach(s=>i.set(s)),i}static accessor(n){const i=(this[k9]=this[k9]={accessors:{}}).accessors,s=this.prototype;function r(o){const a=fp(o);i[a]||(B1e(s,o),i[a]=!0)}return tt.isArray(n)?n.forEach(r):r(n),this}}Xr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);tt.reduceDescriptors(Xr.prototype,({value:t},n)=>{let e=n[0].toUpperCase()+n.slice(1);return{get:()=>t,set(i){this[e]=i}}});tt.freezeMethods(Xr);function f5(t,n){const e=this||U1,i=n||e,s=Xr.from(i.headers);let r=i.data;return tt.forEach(t,function(a){r=a.call(e,r,s.normalize(),n?n.status:void 0)}),s.normalize(),r}function RN(t){return!!(t&&t.__CANCEL__)}function Om(t,n,e){Sn.call(this,t??"canceled",Sn.ERR_CANCELED,n,e),this.name="CanceledError"}tt.inherits(Om,Sn,{__CANCEL__:!0});function MN(t,n,e){const i=e.config.validateStatus;!e.status||!i||i(e.status)?t(e):n(new Sn("Request failed with status code "+e.status,[Sn.ERR_BAD_REQUEST,Sn.ERR_BAD_RESPONSE][Math.floor(e.status/100)-4],e.config,e.request,e))}function F1e(t){const n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return n&&n[1]||""}function N1e(t,n){t=t||10;const e=new Array(t),i=new Array(t);let s=0,r=0,o;return n=n!==void 0?n:1e3,function(l){const c=Date.now(),u=i[r];o||(o=c),e[s]=l,i[s]=c;let d=r,f=0;for(;d!==s;)f+=e[d++],d=d%t;if(s=(s+1)%t,s===r&&(r=(r+1)%t),c-o<n)return;const p=u&&c-u;return p?Math.round(f*1e3/p):void 0}}function V1e(t,n){let e=0,i=1e3/n,s,r;const o=(c,u=Date.now())=>{e=u,s=null,r&&(clearTimeout(r),r=null),t.apply(null,c)};return[(...c)=>{const u=Date.now(),d=u-e;d>=i?o(c,u):(s=c,r||(r=setTimeout(()=>{r=null,o(s)},i-d)))},()=>s&&o(s)]}const g_=(t,n,e=3)=>{let i=0;const s=N1e(50,250);return V1e(r=>{const o=r.loaded,a=r.lengthComputable?r.total:void 0,l=o-i,c=s(l),u=o<=a;i=o;const d={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&u?(a-o)/c:void 0,event:r,lengthComputable:a!=null,[n?"download":"upload"]:!0};t(d)},e)},E9=(t,n)=>{const e=t!=null;return[i=>n[0]({lengthComputable:e,total:t,loaded:i}),n[1]]},S9=t=>(...n)=>tt.asap(()=>t(...n)),D1e=Co.hasStandardBrowserEnv?function(){const n=Co.navigator&&/(msie|trident)/i.test(Co.navigator.userAgent),e=document.createElement("a");let i;function s(r){let o=r;return n&&(e.setAttribute("href",o),o=e.href),e.setAttribute("href",o),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:e.pathname.charAt(0)==="/"?e.pathname:"/"+e.pathname}}return i=s(window.location.href),function(o){const a=tt.isString(o)?s(o):o;return a.protocol===i.protocol&&a.host===i.host}}():function(){return function(){return!0}}(),$1e=Co.hasStandardBrowserEnv?{write(t,n,e,i,s,r){const o=[t+"="+encodeURIComponent(n)];tt.isNumber(e)&&o.push("expires="+new Date(e).toGMTString()),tt.isString(i)&&o.push("path="+i),tt.isString(s)&&o.push("domain="+s),r===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const n=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function z1e(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function H1e(t,n){return n?t.replace(/\/?\/$/,"")+"/"+n.replace(/^\/+/,""):t}function PN(t,n){return t&&!z1e(n)?H1e(t,n):n}const T9=t=>t instanceof Xr?{...t}:t;function gh(t,n){n=n||{};const e={};function i(c,u,d){return tt.isPlainObject(c)&&tt.isPlainObject(u)?tt.merge.call({caseless:d},c,u):tt.isPlainObject(u)?tt.merge({},u):tt.isArray(u)?u.slice():u}function s(c,u,d){if(tt.isUndefined(u)){if(!tt.isUndefined(c))return i(void 0,c,d)}else return i(c,u,d)}function r(c,u){if(!tt.isUndefined(u))return i(void 0,u)}function o(c,u){if(tt.isUndefined(u)){if(!tt.isUndefined(c))return i(void 0,c)}else return i(void 0,u)}function a(c,u,d){if(d in n)return i(c,u);if(d in t)return i(void 0,c)}const l={url:r,method:r,data:r,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,u)=>s(T9(c),T9(u),!0)};return tt.forEach(Object.keys(Object.assign({},t,n)),function(u){const d=l[u]||s,f=d(t[u],n[u],u);tt.isUndefined(f)&&d!==a||(e[u]=f)}),e}const ON=t=>{const n=gh({},t);let{data:e,withXSRFToken:i,xsrfHeaderName:s,xsrfCookieName:r,headers:o,auth:a}=n;n.headers=o=Xr.from(o),n.url=xN(PN(n.baseURL,n.url),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(tt.isFormData(e)){if(Co.hasStandardBrowserEnv||Co.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((l=o.getContentType())!==!1){const[c,...u]=l?l.split(";").map(d=>d.trim()).filter(Boolean):[];o.setContentType([c||"multipart/form-data",...u].join("; "))}}if(Co.hasStandardBrowserEnv&&(i&&tt.isFunction(i)&&(i=i(n)),i||i!==!1&&D1e(n.url))){const c=s&&r&&$1e.read(r);c&&o.set(s,c)}return n},U1e=typeof XMLHttpRequest<"u",W1e=U1e&&function(t){return new Promise(function(e,i){const s=ON(t);let r=s.data;const o=Xr.from(s.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:c}=s,u,d,f,p,m;function v(){p&&p(),m&&m(),s.cancelToken&&s.cancelToken.unsubscribe(u),s.signal&&s.signal.removeEventListener("abort",u)}let y=new XMLHttpRequest;y.open(s.method.toUpperCase(),s.url,!0),y.timeout=s.timeout;function _(){if(!y)return;const E=Xr.from("getAllResponseHeaders"in y&&y.getAllResponseHeaders()),A={data:!a||a==="text"||a==="json"?y.responseText:y.response,status:y.status,statusText:y.statusText,headers:E,config:t,request:y};MN(function(k){e(k),v()},function(k){i(k),v()},A),y=null}"onloadend"in y?y.onloadend=_:y.onreadystatechange=function(){!y||y.readyState!==4||y.status===0&&!(y.responseURL&&y.responseURL.indexOf("file:")===0)||setTimeout(_)},y.onabort=function(){y&&(i(new Sn("Request aborted",Sn.ECONNABORTED,t,y)),y=null)},y.onerror=function(){i(new Sn("Network Error",Sn.ERR_NETWORK,t,y)),y=null},y.ontimeout=function(){let x=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const A=s.transitional||AN;s.timeoutErrorMessage&&(x=s.timeoutErrorMessage),i(new Sn(x,A.clarifyTimeoutError?Sn.ETIMEDOUT:Sn.ECONNABORTED,t,y)),y=null},r===void 0&&o.setContentType(null),"setRequestHeader"in y&&tt.forEach(o.toJSON(),function(x,A){y.setRequestHeader(A,x)}),tt.isUndefined(s.withCredentials)||(y.withCredentials=!!s.withCredentials),a&&a!=="json"&&(y.responseType=s.responseType),c&&([f,m]=g_(c,!0),y.addEventListener("progress",f)),l&&y.upload&&([d,p]=g_(l),y.upload.addEventListener("progress",d),y.upload.addEventListener("loadend",p)),(s.cancelToken||s.signal)&&(u=E=>{y&&(i(!E||E.type?new Om(null,t,y):E),y.abort(),y=null)},s.cancelToken&&s.cancelToken.subscribe(u),s.signal&&(s.signal.aborted?u():s.signal.addEventListener("abort",u)));const b=F1e(s.url);if(b&&Co.protocols.indexOf(b)===-1){i(new Sn("Unsupported protocol "+b+":",Sn.ERR_BAD_REQUEST,t));return}y.send(r||null)})},j1e=(t,n)=>{let e=new AbortController,i;const s=function(l){if(!i){i=!0,o();const c=l instanceof Error?l:this.reason;e.abort(c instanceof Sn?c:new Om(c instanceof Error?c.message:c))}};let r=n&&setTimeout(()=>{s(new Sn(`timeout ${n} of ms exceeded`,Sn.ETIMEDOUT))},n);const o=()=>{t&&(r&&clearTimeout(r),r=null,t.forEach(l=>{l&&(l.removeEventListener?l.removeEventListener("abort",s):l.unsubscribe(s))}),t=null)};t.forEach(l=>l&&l.addEventListener&&l.addEventListener("abort",s));const{signal:a}=e;return a.unsubscribe=o,[a,()=>{r&&clearTimeout(r),r=null}]},q1e=function*(t,n){let e=t.byteLength;if(!n||e<n){yield t;return}let i=0,s;for(;i<e;)s=i+n,yield t.slice(i,s),i=s},K1e=async function*(t,n,e){for await(const i of t)yield*q1e(ArrayBuffer.isView(i)?i:await e(String(i)),n)},x9=(t,n,e,i,s)=>{const r=K1e(t,n,s);let o=0,a,l=c=>{a||(a=!0,i&&i(c))};return new ReadableStream({async pull(c){try{const{done:u,value:d}=await r.next();if(u){l(),c.close();return}let f=d.byteLength;if(e){let p=o+=f;e(p)}c.enqueue(new Uint8Array(d))}catch(u){throw l(u),u}},cancel(c){return l(c),r.return()}},{highWaterMark:2})},Dw=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",LN=Dw&&typeof ReadableStream=="function",AC=Dw&&(typeof TextEncoder=="function"?(t=>n=>t.encode(n))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),BN=(t,...n)=>{try{return!!t(...n)}catch{return!1}},G1e=LN&&BN(()=>{let t=!1;const n=new Request(Co.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!n}),A9=64*1024,IC=LN&&BN(()=>tt.isReadableStream(new Response("").body)),v_={stream:IC&&(t=>t.body)};Dw&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(n=>{!v_[n]&&(v_[n]=tt.isFunction(t[n])?e=>e[n]():(e,i)=>{throw new Sn(`Response type '${n}' is not supported`,Sn.ERR_NOT_SUPPORT,i)})})})(new Response);const Y1e=async t=>{if(t==null)return 0;if(tt.isBlob(t))return t.size;if(tt.isSpecCompliantForm(t))return(await new Request(t).arrayBuffer()).byteLength;if(tt.isArrayBufferView(t)||tt.isArrayBuffer(t))return t.byteLength;if(tt.isURLSearchParams(t)&&(t=t+""),tt.isString(t))return(await AC(t)).byteLength},Z1e=async(t,n)=>{const e=tt.toFiniteNumber(t.getContentLength());return e??Y1e(n)},X1e=Dw&&(async t=>{let{url:n,method:e,data:i,signal:s,cancelToken:r,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:c,headers:u,withCredentials:d="same-origin",fetchOptions:f}=ON(t);c=c?(c+"").toLowerCase():"text";let[p,m]=s||r||o?j1e([s,r],o):[],v,y;const _=()=>{!v&&setTimeout(()=>{p&&p.unsubscribe()}),v=!0};let b;try{if(l&&G1e&&e!=="get"&&e!=="head"&&(b=await Z1e(u,i))!==0){let k=new Request(n,{method:"POST",body:i,duplex:"half"}),O;if(tt.isFormData(i)&&(O=k.headers.get("content-type"))&&u.setContentType(O),k.body){const[M,T]=E9(b,g_(S9(l)));i=x9(k.body,A9,M,T,AC)}}tt.isString(d)||(d=d?"include":"omit");const E="credentials"in Request.prototype;y=new Request(n,{...f,signal:p,method:e.toUpperCase(),headers:u.normalize().toJSON(),body:i,duplex:"half",credentials:E?d:void 0});let x=await fetch(y);const A=IC&&(c==="stream"||c==="response");if(IC&&(a||A)){const k={};["status","statusText","headers"].forEach(P=>{k[P]=x[P]});const O=tt.toFiniteNumber(x.headers.get("content-length")),[M,T]=a&&E9(O,g_(S9(a),!0))||[];x=new Response(x9(x.body,A9,M,()=>{T&&T(),A&&_()},AC),k)}c=c||"text";let I=await v_[tt.findKey(v_,c)||"text"](x,t);return!A&&_(),m&&m(),await new Promise((k,O)=>{MN(k,O,{data:I,headers:Xr.from(x.headers),status:x.status,statusText:x.statusText,config:t,request:y})})}catch(E){throw _(),E&&E.name==="TypeError"&&/fetch/i.test(E.message)?Object.assign(new Sn("Network Error",Sn.ERR_NETWORK,t,y),{cause:E.cause||E}):Sn.from(E,E&&E.code,t,y)}}),RC={http:m1e,xhr:W1e,fetch:X1e};tt.forEach(RC,(t,n)=>{if(t){try{Object.defineProperty(t,"name",{value:n})}catch{}Object.defineProperty(t,"adapterName",{value:n})}});const I9=t=>`- ${t}`,J1e=t=>tt.isFunction(t)||t===null||t===!1,FN={getAdapter:t=>{t=tt.isArray(t)?t:[t];const{length:n}=t;let e,i;const s={};for(let r=0;r<n;r++){e=t[r];let o;if(i=e,!J1e(e)&&(i=RC[(o=String(e)).toLowerCase()],i===void 0))throw new Sn(`Unknown adapter '${o}'`);if(i)break;s[o||"#"+r]=i}if(!i){const r=Object.entries(s).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=n?r.length>1?`since :
`+r.map(I9).join(`
`):" "+I9(r[0]):"as no adapter specified";throw new Sn("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return i},adapters:RC};function m5(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Om(null,t)}function R9(t){return m5(t),t.headers=Xr.from(t.headers),t.data=f5.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),FN.getAdapter(t.adapter||U1.adapter)(t).then(function(i){return m5(t),i.data=f5.call(t,t.transformResponse,i),i.headers=Xr.from(i.headers),i},function(i){return RN(i)||(m5(t),i&&i.response&&(i.response.data=f5.call(t,t.transformResponse,i.response),i.response.headers=Xr.from(i.response.headers))),Promise.reject(i)})}const NN="1.7.5",xE={};["object","boolean","number","function","string","symbol"].forEach((t,n)=>{xE[t]=function(i){return typeof i===t||"a"+(n<1?"n ":" ")+t}});const M9={};xE.transitional=function(n,e,i){function s(r,o){return"[Axios v"+NN+"] Transitional option '"+r+"'"+o+(i?". "+i:"")}return(r,o,a)=>{if(n===!1)throw new Sn(s(o," has been removed"+(e?" in "+e:"")),Sn.ERR_DEPRECATED);return e&&!M9[o]&&(M9[o]=!0,console.warn(s(o," has been deprecated since v"+e+" and will be removed in the near future"))),n?n(r,o,a):!0}};function Q1e(t,n,e){if(typeof t!="object")throw new Sn("options must be an object",Sn.ERR_BAD_OPTION_VALUE);const i=Object.keys(t);let s=i.length;for(;s-- >0;){const r=i[s],o=n[r];if(o){const a=t[r],l=a===void 0||o(a,r,t);if(l!==!0)throw new Sn("option "+r+" must be "+l,Sn.ERR_BAD_OPTION_VALUE);continue}if(e!==!0)throw new Sn("Unknown option "+r,Sn.ERR_BAD_OPTION)}}const MC={assertOptions:Q1e,validators:xE},eu=MC.validators;class th{constructor(n){this.defaults=n,this.interceptors={request:new C9,response:new C9}}async request(n,e){try{return await this._request(n,e)}catch(i){if(i instanceof Error){let s;Error.captureStackTrace?Error.captureStackTrace(s={}):s=new Error;const r=s.stack?s.stack.replace(/^.+\n/,""):"";try{i.stack?r&&!String(i.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+r):i.stack=r}catch{}}throw i}}_request(n,e){typeof n=="string"?(e=e||{},e.url=n):e=n||{},e=gh(this.defaults,e);const{transitional:i,paramsSerializer:s,headers:r}=e;i!==void 0&&MC.assertOptions(i,{silentJSONParsing:eu.transitional(eu.boolean),forcedJSONParsing:eu.transitional(eu.boolean),clarifyTimeoutError:eu.transitional(eu.boolean)},!1),s!=null&&(tt.isFunction(s)?e.paramsSerializer={serialize:s}:MC.assertOptions(s,{encode:eu.function,serialize:eu.function},!0)),e.method=(e.method||this.defaults.method||"get").toLowerCase();let o=r&&tt.merge(r.common,r[e.method]);r&&tt.forEach(["delete","get","head","post","put","patch","common"],m=>{delete r[m]}),e.headers=Xr.concat(o,r);const a=[];let l=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(e)===!1||(l=l&&v.synchronous,a.unshift(v.fulfilled,v.rejected))});const c=[];this.interceptors.response.forEach(function(v){c.push(v.fulfilled,v.rejected)});let u,d=0,f;if(!l){const m=[R9.bind(this),void 0];for(m.unshift.apply(m,a),m.push.apply(m,c),f=m.length,u=Promise.resolve(e);d<f;)u=u.then(m[d++],m[d++]);return u}f=a.length;let p=e;for(d=0;d<f;){const m=a[d++],v=a[d++];try{p=m(p)}catch(y){v.call(this,y);break}}try{u=R9.call(this,p)}catch(m){return Promise.reject(m)}for(d=0,f=c.length;d<f;)u=u.then(c[d++],c[d++]);return u}getUri(n){n=gh(this.defaults,n);const e=PN(n.baseURL,n.url);return xN(e,n.params,n.paramsSerializer)}}tt.forEach(["delete","get","head","options"],function(n){th.prototype[n]=function(e,i){return this.request(gh(i||{},{method:n,url:e,data:(i||{}).data}))}});tt.forEach(["post","put","patch"],function(n){function e(i){return function(r,o,a){return this.request(gh(a||{},{method:n,headers:i?{"Content-Type":"multipart/form-data"}:{},url:r,data:o}))}}th.prototype[n]=e(),th.prototype[n+"Form"]=e(!0)});class AE{constructor(n){if(typeof n!="function")throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(r){e=r});const i=this;this.promise.then(s=>{if(!i._listeners)return;let r=i._listeners.length;for(;r-- >0;)i._listeners[r](s);i._listeners=null}),this.promise.then=s=>{let r;const o=new Promise(a=>{i.subscribe(a),r=a}).then(s);return o.cancel=function(){i.unsubscribe(r)},o},n(function(r,o,a){i.reason||(i.reason=new Om(r,o,a),e(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]}unsubscribe(n){if(!this._listeners)return;const e=this._listeners.indexOf(n);e!==-1&&this._listeners.splice(e,1)}static source(){let n;return{token:new AE(function(s){n=s}),cancel:n}}}function e0e(t){return function(e){return t.apply(null,e)}}function t0e(t){return tt.isObject(t)&&t.isAxiosError===!0}const PC={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(PC).forEach(([t,n])=>{PC[n]=t});function VN(t){const n=new th(t),e=pN(th.prototype.request,n);return tt.extend(e,th.prototype,n,{allOwnKeys:!0}),tt.extend(e,n,null,{allOwnKeys:!0}),e.create=function(s){return VN(gh(t,s))},e}const hi=VN(U1);hi.Axios=th;hi.CanceledError=Om;hi.CancelToken=AE;hi.isCancel=RN;hi.VERSION=NN;hi.toFormData=Vw;hi.AxiosError=Sn;hi.Cancel=hi.CanceledError;hi.all=function(n){return Promise.all(n)};hi.spread=e0e;hi.isAxiosError=t0e;hi.mergeConfig=gh;hi.AxiosHeaders=Xr;hi.formToJSON=t=>IN(tt.isHTMLForm(t)?new FormData(t):t);hi.getAdapter=FN.getAdapter;hi.HttpStatusCode=PC;hi.default=hi;const Pc=(t,n)=>{const e=t.__vccOpts||t;for(const[i,s]of n)e[i]=s;return e},n0e={props:{visible:{type:Boolean,default:!1}},data(){return{name:"",country:"",committee:"junior",id:"",errorMessage:""}},methods:{handleLogin(){hi.post("http://127.0.0.1:8000/api/login",{name:this.name,country:this.country}).then(t=>{if(t.data.success){const n={name:this.name,country:this.country,committee:t.data.committee,id:t.data.id};this.$emit("login",n)}else this.errorMessage="Invalid name or country"}).catch(()=>{this.errorMessage="Error connecting to the server"})},refuseLogin(){this.$emit("refuse-login")},updateVisible(t){this.$emit("update:visible",t)}}},i0e={key:0,class:"error-message"};function s0e(t,n,e,i,s,r){const o=nF,a=tF,l=bE,c=vE,u=pce,d=z1,f=eF,p=OF;return ve(),At(p,{"model-value":e.visible,"onUpdate:modelValue":r.updateVisible,title:"Login"},{default:Je(()=>[et(f,{onSubmit:Ui(r.handleLogin,["prevent"]),"label-width":"120px"},{default:Je(()=>[et(a,{label:"Name"},{default:Je(()=>[et(o,{modelValue:s.name,"onUpdate:modelValue":n[0]||(n[0]=m=>s.name=m),placeholder:"Enter your name",required:""},null,8,["modelValue"])]),_:1}),et(a,{label:"Country"},{default:Je(()=>[et(o,{modelValue:s.country,"onUpdate:modelValue":n[1]||(n[1]=m=>s.country=m),placeholder:"Enter your country",required:""},null,8,["modelValue"])]),_:1}),et(a,{label:"Committee"},{default:Je(()=>[et(c,{modelValue:s.committee,"onUpdate:modelValue":n[2]||(n[2]=m=>s.committee=m),placeholder:"Select your committee",required:""},{default:Je(()=>[et(l,{label:"Junior",value:"junior"}),et(l,{label:"Senior",value:"senior"}),et(l,{label:"Security Council",value:"security-council"})]),_:1},8,["modelValue"])]),_:1}),s.errorMessage?(ve(),it("div",i0e,[et(u,{title:s.errorMessage,type:"error","show-icon":""},null,8,["title"])])):_t("",!0),et(a,null,{default:Je(()=>[et(d,{type:"primary",onClick:r.handleLogin},{default:Je(()=>[Rn("Login")]),_:1},8,["onClick"]),et(d,{onClick:r.refuseLogin},{default:Je(()=>[Rn("Cancel")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["onSubmit"])]),_:1},8,["model-value","onUpdate:modelValue"])}const r0e=Pc(n0e,[["render",s0e]]),o0e={id:"app"},a0e={key:1},l0e={key:1},c0e=["src"],u0e=pt({__name:"App",setup(t){const n=Se("1"),e=mN(),i=Se(JSON.parse(localStorage.getItem("delegate")||"null")),s=Se(!1),r=d=>{switch(d){case"0":e.push("/");break;case"1-1":e.push("/clauses_upload");break;case"1-2":e.push("/amendments_upload");break;case"2-1":e.push("/debating/senior");break;case"2-2":e.push("/debating/junior");break;case"2-3":e.push("/debating/security council");break;case"3-1":e.push("/resolution/senior");break;case"3-2":e.push("/resolution/junior");break;case"3-3":e.push("/resolution/security council");break;case"4":const f=i.value?i.value.id:"";f?e.push({name:"ChatComponent",state:{delegateid:JSON.stringify(f)}}):vl({showClose:!0,message:"Warning, this is a warning message.",type:"warning"});break;case"5":e.push("/chair");break}},o=(d,f=null)=>{const p=f||(i.value?i.value.committee:"");p&&e.push(`/${d}/${p}`)},a=()=>{s.value=!0},l=d=>{i.value=d,localStorage.setItem("delegate",JSON.stringify(d)),s.value=!1,e.push({path:"/",query:{t:Date.now()}})},c=()=>{localStorage.removeItem("delegate"),i.value=null,e.push("/")},u=se(()=>!i.value||!i.value.country?"":i.value.country.toLowerCase().replace(/\s/g,"-"));return(d,f)=>{const p=yfe,m=Cfe,v=z1,y=wfe,_=ns("router-view");return ve(),it("div",o0e,[et(y,{"default-active":n.value,class:"el-menu-demo",mode:"horizontal",ellipsis:!1,onSelect:r},{default:Je(()=>[et(p,{index:"0"},{default:Je(()=>[Rn("Home")]),_:1}),et(m,{index:"1"},{title:Je(()=>[Rn("Uploads")]),default:Je(()=>[et(p,{index:"1-1"},{default:Je(()=>[Rn("Clauses")]),_:1}),et(p,{index:"1-2"},{default:Je(()=>[Rn("Amendments")]),_:1})]),_:1}),et(m,{index:"2"},{title:Je(()=>[i.value?(ve(),At(v,{key:0,onClick:f[0]||(f[0]=b=>o("debating")),text:""},{default:Je(()=>[Rn("Debating")]),_:1})):(ve(),it("span",a0e,"Debating"))]),default:Je(()=>[et(p,{index:"2-1",onClick:f[1]||(f[1]=b=>o("debating","senior"))},{default:Je(()=>[Rn("Senior")]),_:1}),et(p,{index:"2-2",onClick:f[2]||(f[2]=b=>o("debating","junior"))},{default:Je(()=>[Rn("Junior")]),_:1}),et(p,{index:"2-3",onClick:f[3]||(f[3]=b=>o("debating","security-council"))},{default:Je(()=>[Rn("Security Council")]),_:1})]),_:1}),et(m,{index:"3"},{title:Je(()=>[i.value?(ve(),At(v,{key:0,onClick:f[4]||(f[4]=b=>o("resolution")),text:""},{default:Je(()=>[Rn("Resolution")]),_:1})):(ve(),it("span",l0e,"Resolution"))]),default:Je(()=>[et(p,{index:"3-1",onClick:f[5]||(f[5]=b=>o("resolution","senior"))},{default:Je(()=>[Rn("Senior")]),_:1}),et(p,{index:"3-2",onClick:f[6]||(f[6]=b=>o("resolution","junior"))},{default:Je(()=>[Rn("Junior")]),_:1}),et(p,{index:"3-3",onClick:f[7]||(f[7]=b=>o("resolution","security council"))},{default:Je(()=>[Rn("Security Council")]),_:1})]),_:1}),et(p,{index:"4"},{default:Je(()=>[Rn("Chat")]),_:1}),et(p,{index:"5"},{default:Je(()=>[Rn("Chair")]),_:1}),i.value?_t("",!0):(ve(),At(p,{key:0},{default:Je(()=>[et(v,{onClick:a,text:""},{default:Je(()=>[Rn("Sign In")]),_:1})]),_:1})),i.value?(ve(),At(m,{key:1,index:"6"},{title:Je(()=>[ot("img",{src:`https://flagcdn.com/16x12/${u.value}.png`,class:"flag-icon",alt:"flag"},null,8,c0e),Rn(" "+vn(i.value.name),1)]),default:Je(()=>[et(p,{onClick:c},{default:Je(()=>[Rn("Sign Out")]),_:1})]),_:1})):_t("",!0)]),_:1},8,["default-active"]),et(r0e,{visible:s.value,onLogin:l,onRefuseLogin:f[8]||(f[8]=b=>s.value=!1)},null,8,["visible"]),(ve(),At(_,{key:d.$route.fullPath}))])}}}),d0e="modulepreload",h0e=function(t,n){return new URL(t,n).href},P9={},f0e=function(n,e,i){let s=Promise.resolve();if(e&&e.length>0){const r=document.getElementsByTagName("link"),o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.all(e.map(l=>{if(l=h0e(l,i),l in P9)return;P9[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(!!i)for(let p=r.length-1;p>=0;p--){const m=r[p];if(m.href===l&&(!c||m.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${l}"]${u}`))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":d0e,c||(f.as="script",f.crossOrigin=""),f.href=l,a&&f.setAttribute("nonce",a),document.head.appendChild(f),c)return new Promise((p,m)=>{f.addEventListener("load",p),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}return s.then(()=>n()).catch(r=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=r,window.dispatchEvent(o),!o.defaultPrevented)throw r})},m0e={key:0},p0e=pt({__name:"home",setup(t){const n=Se(JSON.parse(localStorage.getItem("delegate")||"null"));return(e,i)=>(ve(),it("div",null,[ot("h1",null,[Rn(" Welcome to SPIMUN"),n.value?(ve(),it("span",m0e,", "+vn(n.value.name),1)):_t("",!0),Rn("! ")])]))}}),g0e=Pc(p0e,[["__scopeId","data-v-f6ff4a7f"]]);var b_={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */b_.exports;(function(t,n){(function(){var e,i="4.17.21",s=200,r="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",a="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",c=500,u="__lodash_placeholder__",d=1,f=2,p=4,m=1,v=2,y=1,_=2,b=4,E=8,x=16,A=32,I=64,k=128,O=256,M=512,T=30,P="...",R=800,L=16,F=1,B=2,z=3,J=1/0,q=9007199254740991,G=17976931348623157e292,S=NaN,V=4294967295,re=V-1,U=V>>>1,Pe=[["ary",k],["bind",y],["bindKey",_],["curry",E],["curryRight",x],["flip",M],["partial",A],["partialRight",I],["rearg",O]],Fe="[object Arguments]",Ne="[object Array]",ne="[object AsyncFunction]",me="[object Boolean]",pe="[object Date]",ge="[object DOMException]",rt="[object Error]",wt="[object Function]",D="[object GeneratorFunction]",$="[object Map]",X="[object Number]",le="[object Null]",ie="[object Object]",be="[object Promise]",Ae="[object Proxy]",_e="[object RegExp]",Ee="[object Set]",he="[object String]",He="[object Symbol]",ze="[object Undefined]",de="[object WeakMap]",We="[object WeakSet]",ut="[object ArrayBuffer]",Re="[object DataView]",je="[object Float32Array]",ae="[object Float64Array]",Ue="[object Int8Array]",W="[object Int16Array]",K="[object Int32Array]",te="[object Uint8Array]",oe="[object Uint8ClampedArray]",ue="[object Uint16Array]",ee="[object Uint32Array]",Ce=/\b__p \+= '';/g,xe=/\b(__p \+=) '' \+/g,ke=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ge=/&(?:amp|lt|gt|quot|#39);/g,Te=/[&<>"']/g,Ke=RegExp(Ge.source),Le=RegExp(Te.source),lt=/<%-([\s\S]+?)%>/g,nt=/<%([\s\S]+?)%>/g,Mt=/<%=([\s\S]+?)%>/g,$e=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,yt=/^\w*$/,qt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ct=/[\\^$.*+?()[\]{}|]/g,Pt=RegExp(ct.source),st=/^\s+/,zt=/\s/,ni=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ct=/\{\n\/\* \[wrapped with (.+)\] \*/,Jt=/,? & /,Me=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ht=/[()=,{}\[\]\/\s]/,Qt=/\\(\\)?/g,nn=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Bn=/\w*$/,Vi=/^[-+]0x[0-9a-f]+$/i,ss=/^0b[01]+$/i,Ot=/^\[object .+?Constructor\]$/,we=/^0o[0-7]+$/i,vt=/^(?:0|[1-9]\d*)$/,Lt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,En=/($^)/,ji=/['\n\r\u2028\u2029\\]/g,Di="\\ud800-\\udfff",As="\\u0300-\\u036f",gr="\\ufe20-\\ufe2f",Ga="\\u20d0-\\u20ff",_n=As+gr+Ga,Vc="\\u2700-\\u27bf",Dc="a-z\\xdf-\\xf6\\xf8-\\xff",Hm="\\xac\\xb1\\xd7\\xf7",Um="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",l0="\\u2000-\\u206f",ed=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",c0="A-Z\\xc0-\\xd6\\xd8-\\xde",us="\\ufe0e\\ufe0f",$h=Hm+Um+l0+ed,td="['’]",Wm="["+Di+"]",Ws="["+$h+"]",Ya="["+_n+"]",Za="\\d+",jm="["+Vc+"]",Xa="["+Dc+"]",zh="[^"+Di+$h+Za+Vc+Dc+c0+"]",Pl="\\ud83c[\\udffb-\\udfff]",nd="(?:"+Ya+"|"+Pl+")",id="[^"+Di+"]",$c="(?:\\ud83c[\\udde6-\\uddff]){2}",My="[\\ud800-\\udbff][\\udc00-\\udfff]",Hh="["+c0+"]",pT="\\u200d",gT="(?:"+Xa+"|"+zh+")",DW="(?:"+Hh+"|"+zh+")",vT="(?:"+td+"(?:d|ll|m|re|s|t|ve))?",bT="(?:"+td+"(?:D|LL|M|RE|S|T|VE))?",_T=nd+"?",wT="["+us+"]?",$W="(?:"+pT+"(?:"+[id,$c,My].join("|")+")"+wT+_T+")*",zW="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",HW="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",yT=wT+_T+$W,UW="(?:"+[jm,$c,My].join("|")+")"+yT,WW="(?:"+[id+Ya+"?",Ya,$c,My,Wm].join("|")+")",jW=RegExp(td,"g"),qW=RegExp(Ya,"g"),Py=RegExp(Pl+"(?="+Pl+")|"+WW+yT,"g"),KW=RegExp([Hh+"?"+Xa+"+"+vT+"(?="+[Ws,Hh,"$"].join("|")+")",DW+"+"+bT+"(?="+[Ws,Hh+gT,"$"].join("|")+")",Hh+"?"+gT+"+"+vT,Hh+"+"+bT,HW,zW,Za,UW].join("|"),"g"),GW=RegExp("["+pT+Di+_n+us+"]"),YW=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ZW=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],XW=-1,qi={};qi[je]=qi[ae]=qi[Ue]=qi[W]=qi[K]=qi[te]=qi[oe]=qi[ue]=qi[ee]=!0,qi[Fe]=qi[Ne]=qi[ut]=qi[me]=qi[Re]=qi[pe]=qi[rt]=qi[wt]=qi[$]=qi[X]=qi[ie]=qi[_e]=qi[Ee]=qi[he]=qi[de]=!1;var $i={};$i[Fe]=$i[Ne]=$i[ut]=$i[Re]=$i[me]=$i[pe]=$i[je]=$i[ae]=$i[Ue]=$i[W]=$i[K]=$i[$]=$i[X]=$i[ie]=$i[_e]=$i[Ee]=$i[he]=$i[He]=$i[te]=$i[oe]=$i[ue]=$i[ee]=!0,$i[rt]=$i[wt]=$i[de]=!1;var JW={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},QW={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ej={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},tj={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},nj=parseFloat,ij=parseInt,CT=typeof dp=="object"&&dp&&dp.Object===Object&&dp,sj=typeof self=="object"&&self&&self.Object===Object&&self,js=CT||sj||Function("return this")(),Oy=n&&!n.nodeType&&n,sd=Oy&&!0&&t&&!t.nodeType&&t,kT=sd&&sd.exports===Oy,Ly=kT&&CT.process,Bo=function(){try{var Ie=sd&&sd.require&&sd.require("util").types;return Ie||Ly&&Ly.binding&&Ly.binding("util")}catch{}}(),ET=Bo&&Bo.isArrayBuffer,ST=Bo&&Bo.isDate,TT=Bo&&Bo.isMap,xT=Bo&&Bo.isRegExp,AT=Bo&&Bo.isSet,IT=Bo&&Bo.isTypedArray;function no(Ie,at,Ze){switch(Ze.length){case 0:return Ie.call(at);case 1:return Ie.call(at,Ze[0]);case 2:return Ie.call(at,Ze[0],Ze[1]);case 3:return Ie.call(at,Ze[0],Ze[1],Ze[2])}return Ie.apply(at,Ze)}function rj(Ie,at,Ze,Ht){for(var gn=-1,oi=Ie==null?0:Ie.length;++gn<oi;){var Is=Ie[gn];at(Ht,Is,Ze(Is),Ie)}return Ht}function Fo(Ie,at){for(var Ze=-1,Ht=Ie==null?0:Ie.length;++Ze<Ht&&at(Ie[Ze],Ze,Ie)!==!1;);return Ie}function oj(Ie,at){for(var Ze=Ie==null?0:Ie.length;Ze--&&at(Ie[Ze],Ze,Ie)!==!1;);return Ie}function RT(Ie,at){for(var Ze=-1,Ht=Ie==null?0:Ie.length;++Ze<Ht;)if(!at(Ie[Ze],Ze,Ie))return!1;return!0}function zc(Ie,at){for(var Ze=-1,Ht=Ie==null?0:Ie.length,gn=0,oi=[];++Ze<Ht;){var Is=Ie[Ze];at(Is,Ze,Ie)&&(oi[gn++]=Is)}return oi}function u0(Ie,at){var Ze=Ie==null?0:Ie.length;return!!Ze&&Uh(Ie,at,0)>-1}function By(Ie,at,Ze){for(var Ht=-1,gn=Ie==null?0:Ie.length;++Ht<gn;)if(Ze(at,Ie[Ht]))return!0;return!1}function Ji(Ie,at){for(var Ze=-1,Ht=Ie==null?0:Ie.length,gn=Array(Ht);++Ze<Ht;)gn[Ze]=at(Ie[Ze],Ze,Ie);return gn}function Hc(Ie,at){for(var Ze=-1,Ht=at.length,gn=Ie.length;++Ze<Ht;)Ie[gn+Ze]=at[Ze];return Ie}function Fy(Ie,at,Ze,Ht){var gn=-1,oi=Ie==null?0:Ie.length;for(Ht&&oi&&(Ze=Ie[++gn]);++gn<oi;)Ze=at(Ze,Ie[gn],gn,Ie);return Ze}function aj(Ie,at,Ze,Ht){var gn=Ie==null?0:Ie.length;for(Ht&&gn&&(Ze=Ie[--gn]);gn--;)Ze=at(Ze,Ie[gn],gn,Ie);return Ze}function Ny(Ie,at){for(var Ze=-1,Ht=Ie==null?0:Ie.length;++Ze<Ht;)if(at(Ie[Ze],Ze,Ie))return!0;return!1}var lj=Vy("length");function cj(Ie){return Ie.split("")}function uj(Ie){return Ie.match(Me)||[]}function MT(Ie,at,Ze){var Ht;return Ze(Ie,function(gn,oi,Is){if(at(gn,oi,Is))return Ht=oi,!1}),Ht}function d0(Ie,at,Ze,Ht){for(var gn=Ie.length,oi=Ze+(Ht?1:-1);Ht?oi--:++oi<gn;)if(at(Ie[oi],oi,Ie))return oi;return-1}function Uh(Ie,at,Ze){return at===at?Cj(Ie,at,Ze):d0(Ie,PT,Ze)}function dj(Ie,at,Ze,Ht){for(var gn=Ze-1,oi=Ie.length;++gn<oi;)if(Ht(Ie[gn],at))return gn;return-1}function PT(Ie){return Ie!==Ie}function OT(Ie,at){var Ze=Ie==null?0:Ie.length;return Ze?$y(Ie,at)/Ze:S}function Vy(Ie){return function(at){return at==null?e:at[Ie]}}function Dy(Ie){return function(at){return Ie==null?e:Ie[at]}}function LT(Ie,at,Ze,Ht,gn){return gn(Ie,function(oi,Is,xi){Ze=Ht?(Ht=!1,oi):at(Ze,oi,Is,xi)}),Ze}function hj(Ie,at){var Ze=Ie.length;for(Ie.sort(at);Ze--;)Ie[Ze]=Ie[Ze].value;return Ie}function $y(Ie,at){for(var Ze,Ht=-1,gn=Ie.length;++Ht<gn;){var oi=at(Ie[Ht]);oi!==e&&(Ze=Ze===e?oi:Ze+oi)}return Ze}function zy(Ie,at){for(var Ze=-1,Ht=Array(Ie);++Ze<Ie;)Ht[Ze]=at(Ze);return Ht}function fj(Ie,at){return Ji(at,function(Ze){return[Ze,Ie[Ze]]})}function BT(Ie){return Ie&&Ie.slice(0,DT(Ie)+1).replace(st,"")}function io(Ie){return function(at){return Ie(at)}}function Hy(Ie,at){return Ji(at,function(Ze){return Ie[Ze]})}function qm(Ie,at){return Ie.has(at)}function FT(Ie,at){for(var Ze=-1,Ht=Ie.length;++Ze<Ht&&Uh(at,Ie[Ze],0)>-1;);return Ze}function NT(Ie,at){for(var Ze=Ie.length;Ze--&&Uh(at,Ie[Ze],0)>-1;);return Ze}function mj(Ie,at){for(var Ze=Ie.length,Ht=0;Ze--;)Ie[Ze]===at&&++Ht;return Ht}var pj=Dy(JW),gj=Dy(QW);function vj(Ie){return"\\"+tj[Ie]}function bj(Ie,at){return Ie==null?e:Ie[at]}function Wh(Ie){return GW.test(Ie)}function _j(Ie){return YW.test(Ie)}function wj(Ie){for(var at,Ze=[];!(at=Ie.next()).done;)Ze.push(at.value);return Ze}function Uy(Ie){var at=-1,Ze=Array(Ie.size);return Ie.forEach(function(Ht,gn){Ze[++at]=[gn,Ht]}),Ze}function VT(Ie,at){return function(Ze){return Ie(at(Ze))}}function Uc(Ie,at){for(var Ze=-1,Ht=Ie.length,gn=0,oi=[];++Ze<Ht;){var Is=Ie[Ze];(Is===at||Is===u)&&(Ie[Ze]=u,oi[gn++]=Ze)}return oi}function h0(Ie){var at=-1,Ze=Array(Ie.size);return Ie.forEach(function(Ht){Ze[++at]=Ht}),Ze}function yj(Ie){var at=-1,Ze=Array(Ie.size);return Ie.forEach(function(Ht){Ze[++at]=[Ht,Ht]}),Ze}function Cj(Ie,at,Ze){for(var Ht=Ze-1,gn=Ie.length;++Ht<gn;)if(Ie[Ht]===at)return Ht;return-1}function kj(Ie,at,Ze){for(var Ht=Ze+1;Ht--;)if(Ie[Ht]===at)return Ht;return Ht}function jh(Ie){return Wh(Ie)?Sj(Ie):lj(Ie)}function ma(Ie){return Wh(Ie)?Tj(Ie):cj(Ie)}function DT(Ie){for(var at=Ie.length;at--&&zt.test(Ie.charAt(at)););return at}var Ej=Dy(ej);function Sj(Ie){for(var at=Py.lastIndex=0;Py.test(Ie);)++at;return at}function Tj(Ie){return Ie.match(Py)||[]}function xj(Ie){return Ie.match(KW)||[]}var Aj=function Ie(at){at=at==null?js:qh.defaults(js.Object(),at,qh.pick(js,ZW));var Ze=at.Array,Ht=at.Date,gn=at.Error,oi=at.Function,Is=at.Math,xi=at.Object,Wy=at.RegExp,Ij=at.String,No=at.TypeError,f0=Ze.prototype,Rj=oi.prototype,Kh=xi.prototype,m0=at["__core-js_shared__"],p0=Rj.toString,pi=Kh.hasOwnProperty,Mj=0,$T=function(){var h=/[^.]+$/.exec(m0&&m0.keys&&m0.keys.IE_PROTO||"");return h?"Symbol(src)_1."+h:""}(),g0=Kh.toString,Pj=p0.call(xi),Oj=js._,Lj=Wy("^"+p0.call(pi).replace(ct,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),v0=kT?at.Buffer:e,Wc=at.Symbol,b0=at.Uint8Array,zT=v0?v0.allocUnsafe:e,_0=VT(xi.getPrototypeOf,xi),HT=xi.create,UT=Kh.propertyIsEnumerable,w0=f0.splice,WT=Wc?Wc.isConcatSpreadable:e,Km=Wc?Wc.iterator:e,rd=Wc?Wc.toStringTag:e,y0=function(){try{var h=ud(xi,"defineProperty");return h({},"",{}),h}catch{}}(),Bj=at.clearTimeout!==js.clearTimeout&&at.clearTimeout,Fj=Ht&&Ht.now!==js.Date.now&&Ht.now,Nj=at.setTimeout!==js.setTimeout&&at.setTimeout,C0=Is.ceil,k0=Is.floor,jy=xi.getOwnPropertySymbols,Vj=v0?v0.isBuffer:e,jT=at.isFinite,Dj=f0.join,$j=VT(xi.keys,xi),Rs=Is.max,er=Is.min,zj=Ht.now,Hj=at.parseInt,qT=Is.random,Uj=f0.reverse,qy=ud(at,"DataView"),Gm=ud(at,"Map"),Ky=ud(at,"Promise"),Gh=ud(at,"Set"),Ym=ud(at,"WeakMap"),Zm=ud(xi,"create"),E0=Ym&&new Ym,Yh={},Wj=dd(qy),jj=dd(Gm),qj=dd(Ky),Kj=dd(Gh),Gj=dd(Ym),S0=Wc?Wc.prototype:e,Xm=S0?S0.valueOf:e,KT=S0?S0.toString:e;function Z(h){if(rs(h)&&!wn(h)&&!(h instanceof Un)){if(h instanceof Vo)return h;if(pi.call(h,"__wrapped__"))return Gx(h)}return new Vo(h)}var Zh=function(){function h(){}return function(g){if(!ts(g))return{};if(HT)return HT(g);h.prototype=g;var C=new h;return h.prototype=e,C}}();function T0(){}function Vo(h,g){this.__wrapped__=h,this.__actions__=[],this.__chain__=!!g,this.__index__=0,this.__values__=e}Z.templateSettings={escape:lt,evaluate:nt,interpolate:Mt,variable:"",imports:{_:Z}},Z.prototype=T0.prototype,Z.prototype.constructor=Z,Vo.prototype=Zh(T0.prototype),Vo.prototype.constructor=Vo;function Un(h){this.__wrapped__=h,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=V,this.__views__=[]}function Yj(){var h=new Un(this.__wrapped__);return h.__actions__=Mr(this.__actions__),h.__dir__=this.__dir__,h.__filtered__=this.__filtered__,h.__iteratees__=Mr(this.__iteratees__),h.__takeCount__=this.__takeCount__,h.__views__=Mr(this.__views__),h}function Zj(){if(this.__filtered__){var h=new Un(this);h.__dir__=-1,h.__filtered__=!0}else h=this.clone(),h.__dir__*=-1;return h}function Xj(){var h=this.__wrapped__.value(),g=this.__dir__,C=wn(h),N=g<0,j=C?h.length:0,Q=cK(0,j,this.__views__),ce=Q.start,ye=Q.end,Oe=ye-ce,dt=N?ye:ce-1,ft=this.__iteratees__,bt=ft.length,Vt=0,Gt=er(Oe,this.__takeCount__);if(!C||!N&&j==Oe&&Gt==Oe)return vx(h,this.__actions__);var cn=[];e:for(;Oe--&&Vt<Gt;){dt+=g;for(var In=-1,un=h[dt];++In<bt;){var Vn=ft[In],Kn=Vn.iteratee,oo=Vn.type,_r=Kn(un);if(oo==B)un=_r;else if(!_r){if(oo==F)continue e;break e}}cn[Vt++]=un}return cn}Un.prototype=Zh(T0.prototype),Un.prototype.constructor=Un;function od(h){var g=-1,C=h==null?0:h.length;for(this.clear();++g<C;){var N=h[g];this.set(N[0],N[1])}}function Jj(){this.__data__=Zm?Zm(null):{},this.size=0}function Qj(h){var g=this.has(h)&&delete this.__data__[h];return this.size-=g?1:0,g}function eq(h){var g=this.__data__;if(Zm){var C=g[h];return C===l?e:C}return pi.call(g,h)?g[h]:e}function tq(h){var g=this.__data__;return Zm?g[h]!==e:pi.call(g,h)}function nq(h,g){var C=this.__data__;return this.size+=this.has(h)?0:1,C[h]=Zm&&g===e?l:g,this}od.prototype.clear=Jj,od.prototype.delete=Qj,od.prototype.get=eq,od.prototype.has=tq,od.prototype.set=nq;function Ol(h){var g=-1,C=h==null?0:h.length;for(this.clear();++g<C;){var N=h[g];this.set(N[0],N[1])}}function iq(){this.__data__=[],this.size=0}function sq(h){var g=this.__data__,C=x0(g,h);if(C<0)return!1;var N=g.length-1;return C==N?g.pop():w0.call(g,C,1),--this.size,!0}function rq(h){var g=this.__data__,C=x0(g,h);return C<0?e:g[C][1]}function oq(h){return x0(this.__data__,h)>-1}function aq(h,g){var C=this.__data__,N=x0(C,h);return N<0?(++this.size,C.push([h,g])):C[N][1]=g,this}Ol.prototype.clear=iq,Ol.prototype.delete=sq,Ol.prototype.get=rq,Ol.prototype.has=oq,Ol.prototype.set=aq;function Ll(h){var g=-1,C=h==null?0:h.length;for(this.clear();++g<C;){var N=h[g];this.set(N[0],N[1])}}function lq(){this.size=0,this.__data__={hash:new od,map:new(Gm||Ol),string:new od}}function cq(h){var g=D0(this,h).delete(h);return this.size-=g?1:0,g}function uq(h){return D0(this,h).get(h)}function dq(h){return D0(this,h).has(h)}function hq(h,g){var C=D0(this,h),N=C.size;return C.set(h,g),this.size+=C.size==N?0:1,this}Ll.prototype.clear=lq,Ll.prototype.delete=cq,Ll.prototype.get=uq,Ll.prototype.has=dq,Ll.prototype.set=hq;function ad(h){var g=-1,C=h==null?0:h.length;for(this.__data__=new Ll;++g<C;)this.add(h[g])}function fq(h){return this.__data__.set(h,l),this}function mq(h){return this.__data__.has(h)}ad.prototype.add=ad.prototype.push=fq,ad.prototype.has=mq;function pa(h){var g=this.__data__=new Ol(h);this.size=g.size}function pq(){this.__data__=new Ol,this.size=0}function gq(h){var g=this.__data__,C=g.delete(h);return this.size=g.size,C}function vq(h){return this.__data__.get(h)}function bq(h){return this.__data__.has(h)}function _q(h,g){var C=this.__data__;if(C instanceof Ol){var N=C.__data__;if(!Gm||N.length<s-1)return N.push([h,g]),this.size=++C.size,this;C=this.__data__=new Ll(N)}return C.set(h,g),this.size=C.size,this}pa.prototype.clear=pq,pa.prototype.delete=gq,pa.prototype.get=vq,pa.prototype.has=bq,pa.prototype.set=_q;function GT(h,g){var C=wn(h),N=!C&&hd(h),j=!C&&!N&&Yc(h),Q=!C&&!N&&!j&&ef(h),ce=C||N||j||Q,ye=ce?zy(h.length,Ij):[],Oe=ye.length;for(var dt in h)(g||pi.call(h,dt))&&!(ce&&(dt=="length"||j&&(dt=="offset"||dt=="parent")||Q&&(dt=="buffer"||dt=="byteLength"||dt=="byteOffset")||Vl(dt,Oe)))&&ye.push(dt);return ye}function YT(h){var g=h.length;return g?h[s2(0,g-1)]:e}function wq(h,g){return $0(Mr(h),ld(g,0,h.length))}function yq(h){return $0(Mr(h))}function Gy(h,g,C){(C!==e&&!ga(h[g],C)||C===e&&!(g in h))&&Bl(h,g,C)}function Jm(h,g,C){var N=h[g];(!(pi.call(h,g)&&ga(N,C))||C===e&&!(g in h))&&Bl(h,g,C)}function x0(h,g){for(var C=h.length;C--;)if(ga(h[C][0],g))return C;return-1}function Cq(h,g,C,N){return jc(h,function(j,Q,ce){g(N,j,C(j),ce)}),N}function ZT(h,g){return h&&Qa(g,Ls(g),h)}function kq(h,g){return h&&Qa(g,Or(g),h)}function Bl(h,g,C){g=="__proto__"&&y0?y0(h,g,{configurable:!0,enumerable:!0,value:C,writable:!0}):h[g]=C}function Yy(h,g){for(var C=-1,N=g.length,j=Ze(N),Q=h==null;++C<N;)j[C]=Q?e:I2(h,g[C]);return j}function ld(h,g,C){return h===h&&(C!==e&&(h=h<=C?h:C),g!==e&&(h=h>=g?h:g)),h}function Do(h,g,C,N,j,Q){var ce,ye=g&d,Oe=g&f,dt=g&p;if(C&&(ce=j?C(h,N,j,Q):C(h)),ce!==e)return ce;if(!ts(h))return h;var ft=wn(h);if(ft){if(ce=dK(h),!ye)return Mr(h,ce)}else{var bt=tr(h),Vt=bt==wt||bt==D;if(Yc(h))return wx(h,ye);if(bt==ie||bt==Fe||Vt&&!j){if(ce=Oe||Vt?{}:Dx(h),!ye)return Oe?eK(h,kq(ce,h)):Qq(h,ZT(ce,h))}else{if(!$i[bt])return j?h:{};ce=hK(h,bt,ye)}}Q||(Q=new pa);var Gt=Q.get(h);if(Gt)return Gt;Q.set(h,ce),mA(h)?h.forEach(function(un){ce.add(Do(un,g,C,un,h,Q))}):hA(h)&&h.forEach(function(un,Vn){ce.set(Vn,Do(un,g,C,Vn,h,Q))});var cn=dt?Oe?p2:m2:Oe?Or:Ls,In=ft?e:cn(h);return Fo(In||h,function(un,Vn){In&&(Vn=un,un=h[Vn]),Jm(ce,Vn,Do(un,g,C,Vn,h,Q))}),ce}function Eq(h){var g=Ls(h);return function(C){return XT(C,h,g)}}function XT(h,g,C){var N=C.length;if(h==null)return!N;for(h=xi(h);N--;){var j=C[N],Q=g[j],ce=h[j];if(ce===e&&!(j in h)||!Q(ce))return!1}return!0}function JT(h,g,C){if(typeof h!="function")throw new No(o);return rp(function(){h.apply(e,C)},g)}function Qm(h,g,C,N){var j=-1,Q=u0,ce=!0,ye=h.length,Oe=[],dt=g.length;if(!ye)return Oe;C&&(g=Ji(g,io(C))),N?(Q=By,ce=!1):g.length>=s&&(Q=qm,ce=!1,g=new ad(g));e:for(;++j<ye;){var ft=h[j],bt=C==null?ft:C(ft);if(ft=N||ft!==0?ft:0,ce&&bt===bt){for(var Vt=dt;Vt--;)if(g[Vt]===bt)continue e;Oe.push(ft)}else Q(g,bt,N)||Oe.push(ft)}return Oe}var jc=Sx(Ja),QT=Sx(Xy,!0);function Sq(h,g){var C=!0;return jc(h,function(N,j,Q){return C=!!g(N,j,Q),C}),C}function A0(h,g,C){for(var N=-1,j=h.length;++N<j;){var Q=h[N],ce=g(Q);if(ce!=null&&(ye===e?ce===ce&&!ro(ce):C(ce,ye)))var ye=ce,Oe=Q}return Oe}function Tq(h,g,C,N){var j=h.length;for(C=xn(C),C<0&&(C=-C>j?0:j+C),N=N===e||N>j?j:xn(N),N<0&&(N+=j),N=C>N?0:gA(N);C<N;)h[C++]=g;return h}function ex(h,g){var C=[];return jc(h,function(N,j,Q){g(N,j,Q)&&C.push(N)}),C}function qs(h,g,C,N,j){var Q=-1,ce=h.length;for(C||(C=mK),j||(j=[]);++Q<ce;){var ye=h[Q];g>0&&C(ye)?g>1?qs(ye,g-1,C,N,j):Hc(j,ye):N||(j[j.length]=ye)}return j}var Zy=Tx(),tx=Tx(!0);function Ja(h,g){return h&&Zy(h,g,Ls)}function Xy(h,g){return h&&tx(h,g,Ls)}function I0(h,g){return zc(g,function(C){return Dl(h[C])})}function cd(h,g){g=Kc(g,h);for(var C=0,N=g.length;h!=null&&C<N;)h=h[el(g[C++])];return C&&C==N?h:e}function nx(h,g,C){var N=g(h);return wn(h)?N:Hc(N,C(h))}function vr(h){return h==null?h===e?ze:le:rd&&rd in xi(h)?lK(h):yK(h)}function Jy(h,g){return h>g}function xq(h,g){return h!=null&&pi.call(h,g)}function Aq(h,g){return h!=null&&g in xi(h)}function Iq(h,g,C){return h>=er(g,C)&&h<Rs(g,C)}function Qy(h,g,C){for(var N=C?By:u0,j=h[0].length,Q=h.length,ce=Q,ye=Ze(Q),Oe=1/0,dt=[];ce--;){var ft=h[ce];ce&&g&&(ft=Ji(ft,io(g))),Oe=er(ft.length,Oe),ye[ce]=!C&&(g||j>=120&&ft.length>=120)?new ad(ce&&ft):e}ft=h[0];var bt=-1,Vt=ye[0];e:for(;++bt<j&&dt.length<Oe;){var Gt=ft[bt],cn=g?g(Gt):Gt;if(Gt=C||Gt!==0?Gt:0,!(Vt?qm(Vt,cn):N(dt,cn,C))){for(ce=Q;--ce;){var In=ye[ce];if(!(In?qm(In,cn):N(h[ce],cn,C)))continue e}Vt&&Vt.push(cn),dt.push(Gt)}}return dt}function Rq(h,g,C,N){return Ja(h,function(j,Q,ce){g(N,C(j),Q,ce)}),N}function ep(h,g,C){g=Kc(g,h),h=Ux(h,g);var N=h==null?h:h[el(zo(g))];return N==null?e:no(N,h,C)}function ix(h){return rs(h)&&vr(h)==Fe}function Mq(h){return rs(h)&&vr(h)==ut}function Pq(h){return rs(h)&&vr(h)==pe}function tp(h,g,C,N,j){return h===g?!0:h==null||g==null||!rs(h)&&!rs(g)?h!==h&&g!==g:Oq(h,g,C,N,tp,j)}function Oq(h,g,C,N,j,Q){var ce=wn(h),ye=wn(g),Oe=ce?Ne:tr(h),dt=ye?Ne:tr(g);Oe=Oe==Fe?ie:Oe,dt=dt==Fe?ie:dt;var ft=Oe==ie,bt=dt==ie,Vt=Oe==dt;if(Vt&&Yc(h)){if(!Yc(g))return!1;ce=!0,ft=!1}if(Vt&&!ft)return Q||(Q=new pa),ce||ef(h)?Fx(h,g,C,N,j,Q):oK(h,g,Oe,C,N,j,Q);if(!(C&m)){var Gt=ft&&pi.call(h,"__wrapped__"),cn=bt&&pi.call(g,"__wrapped__");if(Gt||cn){var In=Gt?h.value():h,un=cn?g.value():g;return Q||(Q=new pa),j(In,un,C,N,Q)}}return Vt?(Q||(Q=new pa),aK(h,g,C,N,j,Q)):!1}function Lq(h){return rs(h)&&tr(h)==$}function e2(h,g,C,N){var j=C.length,Q=j,ce=!N;if(h==null)return!Q;for(h=xi(h);j--;){var ye=C[j];if(ce&&ye[2]?ye[1]!==h[ye[0]]:!(ye[0]in h))return!1}for(;++j<Q;){ye=C[j];var Oe=ye[0],dt=h[Oe],ft=ye[1];if(ce&&ye[2]){if(dt===e&&!(Oe in h))return!1}else{var bt=new pa;if(N)var Vt=N(dt,ft,Oe,h,g,bt);if(!(Vt===e?tp(ft,dt,m|v,N,bt):Vt))return!1}}return!0}function sx(h){if(!ts(h)||gK(h))return!1;var g=Dl(h)?Lj:Ot;return g.test(dd(h))}function Bq(h){return rs(h)&&vr(h)==_e}function Fq(h){return rs(h)&&tr(h)==Ee}function Nq(h){return rs(h)&&q0(h.length)&&!!qi[vr(h)]}function rx(h){return typeof h=="function"?h:h==null?Lr:typeof h=="object"?wn(h)?lx(h[0],h[1]):ax(h):xA(h)}function t2(h){if(!sp(h))return $j(h);var g=[];for(var C in xi(h))pi.call(h,C)&&C!="constructor"&&g.push(C);return g}function Vq(h){if(!ts(h))return wK(h);var g=sp(h),C=[];for(var N in h)N=="constructor"&&(g||!pi.call(h,N))||C.push(N);return C}function n2(h,g){return h<g}function ox(h,g){var C=-1,N=Pr(h)?Ze(h.length):[];return jc(h,function(j,Q,ce){N[++C]=g(j,Q,ce)}),N}function ax(h){var g=v2(h);return g.length==1&&g[0][2]?zx(g[0][0],g[0][1]):function(C){return C===h||e2(C,h,g)}}function lx(h,g){return _2(h)&&$x(g)?zx(el(h),g):function(C){var N=I2(C,h);return N===e&&N===g?R2(C,h):tp(g,N,m|v)}}function R0(h,g,C,N,j){h!==g&&Zy(g,function(Q,ce){if(j||(j=new pa),ts(Q))Dq(h,g,ce,C,R0,N,j);else{var ye=N?N(y2(h,ce),Q,ce+"",h,g,j):e;ye===e&&(ye=Q),Gy(h,ce,ye)}},Or)}function Dq(h,g,C,N,j,Q,ce){var ye=y2(h,C),Oe=y2(g,C),dt=ce.get(Oe);if(dt){Gy(h,C,dt);return}var ft=Q?Q(ye,Oe,C+"",h,g,ce):e,bt=ft===e;if(bt){var Vt=wn(Oe),Gt=!Vt&&Yc(Oe),cn=!Vt&&!Gt&&ef(Oe);ft=Oe,Vt||Gt||cn?wn(ye)?ft=ye:ds(ye)?ft=Mr(ye):Gt?(bt=!1,ft=wx(Oe,!0)):cn?(bt=!1,ft=yx(Oe,!0)):ft=[]:op(Oe)||hd(Oe)?(ft=ye,hd(ye)?ft=vA(ye):(!ts(ye)||Dl(ye))&&(ft=Dx(Oe))):bt=!1}bt&&(ce.set(Oe,ft),j(ft,Oe,N,Q,ce),ce.delete(Oe)),Gy(h,C,ft)}function cx(h,g){var C=h.length;if(C)return g+=g<0?C:0,Vl(g,C)?h[g]:e}function ux(h,g,C){g.length?g=Ji(g,function(Q){return wn(Q)?function(ce){return cd(ce,Q.length===1?Q[0]:Q)}:Q}):g=[Lr];var N=-1;g=Ji(g,io(ln()));var j=ox(h,function(Q,ce,ye){var Oe=Ji(g,function(dt){return dt(Q)});return{criteria:Oe,index:++N,value:Q}});return hj(j,function(Q,ce){return Jq(Q,ce,C)})}function $q(h,g){return dx(h,g,function(C,N){return R2(h,N)})}function dx(h,g,C){for(var N=-1,j=g.length,Q={};++N<j;){var ce=g[N],ye=cd(h,ce);C(ye,ce)&&np(Q,Kc(ce,h),ye)}return Q}function zq(h){return function(g){return cd(g,h)}}function i2(h,g,C,N){var j=N?dj:Uh,Q=-1,ce=g.length,ye=h;for(h===g&&(g=Mr(g)),C&&(ye=Ji(h,io(C)));++Q<ce;)for(var Oe=0,dt=g[Q],ft=C?C(dt):dt;(Oe=j(ye,ft,Oe,N))>-1;)ye!==h&&w0.call(ye,Oe,1),w0.call(h,Oe,1);return h}function hx(h,g){for(var C=h?g.length:0,N=C-1;C--;){var j=g[C];if(C==N||j!==Q){var Q=j;Vl(j)?w0.call(h,j,1):a2(h,j)}}return h}function s2(h,g){return h+k0(qT()*(g-h+1))}function Hq(h,g,C,N){for(var j=-1,Q=Rs(C0((g-h)/(C||1)),0),ce=Ze(Q);Q--;)ce[N?Q:++j]=h,h+=C;return ce}function r2(h,g){var C="";if(!h||g<1||g>q)return C;do g%2&&(C+=h),g=k0(g/2),g&&(h+=h);while(g);return C}function Fn(h,g){return C2(Hx(h,g,Lr),h+"")}function Uq(h){return YT(tf(h))}function Wq(h,g){var C=tf(h);return $0(C,ld(g,0,C.length))}function np(h,g,C,N){if(!ts(h))return h;g=Kc(g,h);for(var j=-1,Q=g.length,ce=Q-1,ye=h;ye!=null&&++j<Q;){var Oe=el(g[j]),dt=C;if(Oe==="__proto__"||Oe==="constructor"||Oe==="prototype")return h;if(j!=ce){var ft=ye[Oe];dt=N?N(ft,Oe,ye):e,dt===e&&(dt=ts(ft)?ft:Vl(g[j+1])?[]:{})}Jm(ye,Oe,dt),ye=ye[Oe]}return h}var fx=E0?function(h,g){return E0.set(h,g),h}:Lr,jq=y0?function(h,g){return y0(h,"toString",{configurable:!0,enumerable:!1,value:P2(g),writable:!0})}:Lr;function qq(h){return $0(tf(h))}function $o(h,g,C){var N=-1,j=h.length;g<0&&(g=-g>j?0:j+g),C=C>j?j:C,C<0&&(C+=j),j=g>C?0:C-g>>>0,g>>>=0;for(var Q=Ze(j);++N<j;)Q[N]=h[N+g];return Q}function Kq(h,g){var C;return jc(h,function(N,j,Q){return C=g(N,j,Q),!C}),!!C}function M0(h,g,C){var N=0,j=h==null?N:h.length;if(typeof g=="number"&&g===g&&j<=U){for(;N<j;){var Q=N+j>>>1,ce=h[Q];ce!==null&&!ro(ce)&&(C?ce<=g:ce<g)?N=Q+1:j=Q}return j}return o2(h,g,Lr,C)}function o2(h,g,C,N){var j=0,Q=h==null?0:h.length;if(Q===0)return 0;g=C(g);for(var ce=g!==g,ye=g===null,Oe=ro(g),dt=g===e;j<Q;){var ft=k0((j+Q)/2),bt=C(h[ft]),Vt=bt!==e,Gt=bt===null,cn=bt===bt,In=ro(bt);if(ce)var un=N||cn;else dt?un=cn&&(N||Vt):ye?un=cn&&Vt&&(N||!Gt):Oe?un=cn&&Vt&&!Gt&&(N||!In):Gt||In?un=!1:un=N?bt<=g:bt<g;un?j=ft+1:Q=ft}return er(Q,re)}function mx(h,g){for(var C=-1,N=h.length,j=0,Q=[];++C<N;){var ce=h[C],ye=g?g(ce):ce;if(!C||!ga(ye,Oe)){var Oe=ye;Q[j++]=ce===0?0:ce}}return Q}function px(h){return typeof h=="number"?h:ro(h)?S:+h}function so(h){if(typeof h=="string")return h;if(wn(h))return Ji(h,so)+"";if(ro(h))return KT?KT.call(h):"";var g=h+"";return g=="0"&&1/h==-J?"-0":g}function qc(h,g,C){var N=-1,j=u0,Q=h.length,ce=!0,ye=[],Oe=ye;if(C)ce=!1,j=By;else if(Q>=s){var dt=g?null:sK(h);if(dt)return h0(dt);ce=!1,j=qm,Oe=new ad}else Oe=g?[]:ye;e:for(;++N<Q;){var ft=h[N],bt=g?g(ft):ft;if(ft=C||ft!==0?ft:0,ce&&bt===bt){for(var Vt=Oe.length;Vt--;)if(Oe[Vt]===bt)continue e;g&&Oe.push(bt),ye.push(ft)}else j(Oe,bt,C)||(Oe!==ye&&Oe.push(bt),ye.push(ft))}return ye}function a2(h,g){return g=Kc(g,h),h=Ux(h,g),h==null||delete h[el(zo(g))]}function gx(h,g,C,N){return np(h,g,C(cd(h,g)),N)}function P0(h,g,C,N){for(var j=h.length,Q=N?j:-1;(N?Q--:++Q<j)&&g(h[Q],Q,h););return C?$o(h,N?0:Q,N?Q+1:j):$o(h,N?Q+1:0,N?j:Q)}function vx(h,g){var C=h;return C instanceof Un&&(C=C.value()),Fy(g,function(N,j){return j.func.apply(j.thisArg,Hc([N],j.args))},C)}function l2(h,g,C){var N=h.length;if(N<2)return N?qc(h[0]):[];for(var j=-1,Q=Ze(N);++j<N;)for(var ce=h[j],ye=-1;++ye<N;)ye!=j&&(Q[j]=Qm(Q[j]||ce,h[ye],g,C));return qc(qs(Q,1),g,C)}function bx(h,g,C){for(var N=-1,j=h.length,Q=g.length,ce={};++N<j;){var ye=N<Q?g[N]:e;C(ce,h[N],ye)}return ce}function c2(h){return ds(h)?h:[]}function u2(h){return typeof h=="function"?h:Lr}function Kc(h,g){return wn(h)?h:_2(h,g)?[h]:Kx(ci(h))}var Gq=Fn;function Gc(h,g,C){var N=h.length;return C=C===e?N:C,!g&&C>=N?h:$o(h,g,C)}var _x=Bj||function(h){return js.clearTimeout(h)};function wx(h,g){if(g)return h.slice();var C=h.length,N=zT?zT(C):new h.constructor(C);return h.copy(N),N}function d2(h){var g=new h.constructor(h.byteLength);return new b0(g).set(new b0(h)),g}function Yq(h,g){var C=g?d2(h.buffer):h.buffer;return new h.constructor(C,h.byteOffset,h.byteLength)}function Zq(h){var g=new h.constructor(h.source,Bn.exec(h));return g.lastIndex=h.lastIndex,g}function Xq(h){return Xm?xi(Xm.call(h)):{}}function yx(h,g){var C=g?d2(h.buffer):h.buffer;return new h.constructor(C,h.byteOffset,h.length)}function Cx(h,g){if(h!==g){var C=h!==e,N=h===null,j=h===h,Q=ro(h),ce=g!==e,ye=g===null,Oe=g===g,dt=ro(g);if(!ye&&!dt&&!Q&&h>g||Q&&ce&&Oe&&!ye&&!dt||N&&ce&&Oe||!C&&Oe||!j)return 1;if(!N&&!Q&&!dt&&h<g||dt&&C&&j&&!N&&!Q||ye&&C&&j||!ce&&j||!Oe)return-1}return 0}function Jq(h,g,C){for(var N=-1,j=h.criteria,Q=g.criteria,ce=j.length,ye=C.length;++N<ce;){var Oe=Cx(j[N],Q[N]);if(Oe){if(N>=ye)return Oe;var dt=C[N];return Oe*(dt=="desc"?-1:1)}}return h.index-g.index}function kx(h,g,C,N){for(var j=-1,Q=h.length,ce=C.length,ye=-1,Oe=g.length,dt=Rs(Q-ce,0),ft=Ze(Oe+dt),bt=!N;++ye<Oe;)ft[ye]=g[ye];for(;++j<ce;)(bt||j<Q)&&(ft[C[j]]=h[j]);for(;dt--;)ft[ye++]=h[j++];return ft}function Ex(h,g,C,N){for(var j=-1,Q=h.length,ce=-1,ye=C.length,Oe=-1,dt=g.length,ft=Rs(Q-ye,0),bt=Ze(ft+dt),Vt=!N;++j<ft;)bt[j]=h[j];for(var Gt=j;++Oe<dt;)bt[Gt+Oe]=g[Oe];for(;++ce<ye;)(Vt||j<Q)&&(bt[Gt+C[ce]]=h[j++]);return bt}function Mr(h,g){var C=-1,N=h.length;for(g||(g=Ze(N));++C<N;)g[C]=h[C];return g}function Qa(h,g,C,N){var j=!C;C||(C={});for(var Q=-1,ce=g.length;++Q<ce;){var ye=g[Q],Oe=N?N(C[ye],h[ye],ye,C,h):e;Oe===e&&(Oe=h[ye]),j?Bl(C,ye,Oe):Jm(C,ye,Oe)}return C}function Qq(h,g){return Qa(h,b2(h),g)}function eK(h,g){return Qa(h,Nx(h),g)}function O0(h,g){return function(C,N){var j=wn(C)?rj:Cq,Q=g?g():{};return j(C,h,ln(N,2),Q)}}function Xh(h){return Fn(function(g,C){var N=-1,j=C.length,Q=j>1?C[j-1]:e,ce=j>2?C[2]:e;for(Q=h.length>3&&typeof Q=="function"?(j--,Q):e,ce&&br(C[0],C[1],ce)&&(Q=j<3?e:Q,j=1),g=xi(g);++N<j;){var ye=C[N];ye&&h(g,ye,N,Q)}return g})}function Sx(h,g){return function(C,N){if(C==null)return C;if(!Pr(C))return h(C,N);for(var j=C.length,Q=g?j:-1,ce=xi(C);(g?Q--:++Q<j)&&N(ce[Q],Q,ce)!==!1;);return C}}function Tx(h){return function(g,C,N){for(var j=-1,Q=xi(g),ce=N(g),ye=ce.length;ye--;){var Oe=ce[h?ye:++j];if(C(Q[Oe],Oe,Q)===!1)break}return g}}function tK(h,g,C){var N=g&y,j=ip(h);function Q(){var ce=this&&this!==js&&this instanceof Q?j:h;return ce.apply(N?C:this,arguments)}return Q}function xx(h){return function(g){g=ci(g);var C=Wh(g)?ma(g):e,N=C?C[0]:g.charAt(0),j=C?Gc(C,1).join(""):g.slice(1);return N[h]()+j}}function Jh(h){return function(g){return Fy(SA(EA(g).replace(jW,"")),h,"")}}function ip(h){return function(){var g=arguments;switch(g.length){case 0:return new h;case 1:return new h(g[0]);case 2:return new h(g[0],g[1]);case 3:return new h(g[0],g[1],g[2]);case 4:return new h(g[0],g[1],g[2],g[3]);case 5:return new h(g[0],g[1],g[2],g[3],g[4]);case 6:return new h(g[0],g[1],g[2],g[3],g[4],g[5]);case 7:return new h(g[0],g[1],g[2],g[3],g[4],g[5],g[6])}var C=Zh(h.prototype),N=h.apply(C,g);return ts(N)?N:C}}function nK(h,g,C){var N=ip(h);function j(){for(var Q=arguments.length,ce=Ze(Q),ye=Q,Oe=Qh(j);ye--;)ce[ye]=arguments[ye];var dt=Q<3&&ce[0]!==Oe&&ce[Q-1]!==Oe?[]:Uc(ce,Oe);if(Q-=dt.length,Q<C)return Px(h,g,L0,j.placeholder,e,ce,dt,e,e,C-Q);var ft=this&&this!==js&&this instanceof j?N:h;return no(ft,this,ce)}return j}function Ax(h){return function(g,C,N){var j=xi(g);if(!Pr(g)){var Q=ln(C,3);g=Ls(g),C=function(ye){return Q(j[ye],ye,j)}}var ce=h(g,C,N);return ce>-1?j[Q?g[ce]:ce]:e}}function Ix(h){return Nl(function(g){var C=g.length,N=C,j=Vo.prototype.thru;for(h&&g.reverse();N--;){var Q=g[N];if(typeof Q!="function")throw new No(o);if(j&&!ce&&V0(Q)=="wrapper")var ce=new Vo([],!0)}for(N=ce?N:C;++N<C;){Q=g[N];var ye=V0(Q),Oe=ye=="wrapper"?g2(Q):e;Oe&&w2(Oe[0])&&Oe[1]==(k|E|A|O)&&!Oe[4].length&&Oe[9]==1?ce=ce[V0(Oe[0])].apply(ce,Oe[3]):ce=Q.length==1&&w2(Q)?ce[ye]():ce.thru(Q)}return function(){var dt=arguments,ft=dt[0];if(ce&&dt.length==1&&wn(ft))return ce.plant(ft).value();for(var bt=0,Vt=C?g[bt].apply(this,dt):ft;++bt<C;)Vt=g[bt].call(this,Vt);return Vt}})}function L0(h,g,C,N,j,Q,ce,ye,Oe,dt){var ft=g&k,bt=g&y,Vt=g&_,Gt=g&(E|x),cn=g&M,In=Vt?e:ip(h);function un(){for(var Vn=arguments.length,Kn=Ze(Vn),oo=Vn;oo--;)Kn[oo]=arguments[oo];if(Gt)var _r=Qh(un),ao=mj(Kn,_r);if(N&&(Kn=kx(Kn,N,j,Gt)),Q&&(Kn=Ex(Kn,Q,ce,Gt)),Vn-=ao,Gt&&Vn<dt){var hs=Uc(Kn,_r);return Px(h,g,L0,un.placeholder,C,Kn,hs,ye,Oe,dt-Vn)}var va=bt?C:this,zl=Vt?va[h]:h;return Vn=Kn.length,ye?Kn=CK(Kn,ye):cn&&Vn>1&&Kn.reverse(),ft&&Oe<Vn&&(Kn.length=Oe),this&&this!==js&&this instanceof un&&(zl=In||ip(zl)),zl.apply(va,Kn)}return un}function Rx(h,g){return function(C,N){return Rq(C,h,g(N),{})}}function B0(h,g){return function(C,N){var j;if(C===e&&N===e)return g;if(C!==e&&(j=C),N!==e){if(j===e)return N;typeof C=="string"||typeof N=="string"?(C=so(C),N=so(N)):(C=px(C),N=px(N)),j=h(C,N)}return j}}function h2(h){return Nl(function(g){return g=Ji(g,io(ln())),Fn(function(C){var N=this;return h(g,function(j){return no(j,N,C)})})})}function F0(h,g){g=g===e?" ":so(g);var C=g.length;if(C<2)return C?r2(g,h):g;var N=r2(g,C0(h/jh(g)));return Wh(g)?Gc(ma(N),0,h).join(""):N.slice(0,h)}function iK(h,g,C,N){var j=g&y,Q=ip(h);function ce(){for(var ye=-1,Oe=arguments.length,dt=-1,ft=N.length,bt=Ze(ft+Oe),Vt=this&&this!==js&&this instanceof ce?Q:h;++dt<ft;)bt[dt]=N[dt];for(;Oe--;)bt[dt++]=arguments[++ye];return no(Vt,j?C:this,bt)}return ce}function Mx(h){return function(g,C,N){return N&&typeof N!="number"&&br(g,C,N)&&(C=N=e),g=$l(g),C===e?(C=g,g=0):C=$l(C),N=N===e?g<C?1:-1:$l(N),Hq(g,C,N,h)}}function N0(h){return function(g,C){return typeof g=="string"&&typeof C=="string"||(g=Ho(g),C=Ho(C)),h(g,C)}}function Px(h,g,C,N,j,Q,ce,ye,Oe,dt){var ft=g&E,bt=ft?ce:e,Vt=ft?e:ce,Gt=ft?Q:e,cn=ft?e:Q;g|=ft?A:I,g&=~(ft?I:A),g&b||(g&=~(y|_));var In=[h,g,j,Gt,bt,cn,Vt,ye,Oe,dt],un=C.apply(e,In);return w2(h)&&Wx(un,In),un.placeholder=N,jx(un,h,g)}function f2(h){var g=Is[h];return function(C,N){if(C=Ho(C),N=N==null?0:er(xn(N),292),N&&jT(C)){var j=(ci(C)+"e").split("e"),Q=g(j[0]+"e"+(+j[1]+N));return j=(ci(Q)+"e").split("e"),+(j[0]+"e"+(+j[1]-N))}return g(C)}}var sK=Gh&&1/h0(new Gh([,-0]))[1]==J?function(h){return new Gh(h)}:B2;function Ox(h){return function(g){var C=tr(g);return C==$?Uy(g):C==Ee?yj(g):fj(g,h(g))}}function Fl(h,g,C,N,j,Q,ce,ye){var Oe=g&_;if(!Oe&&typeof h!="function")throw new No(o);var dt=N?N.length:0;if(dt||(g&=~(A|I),N=j=e),ce=ce===e?ce:Rs(xn(ce),0),ye=ye===e?ye:xn(ye),dt-=j?j.length:0,g&I){var ft=N,bt=j;N=j=e}var Vt=Oe?e:g2(h),Gt=[h,g,C,N,j,ft,bt,Q,ce,ye];if(Vt&&_K(Gt,Vt),h=Gt[0],g=Gt[1],C=Gt[2],N=Gt[3],j=Gt[4],ye=Gt[9]=Gt[9]===e?Oe?0:h.length:Rs(Gt[9]-dt,0),!ye&&g&(E|x)&&(g&=~(E|x)),!g||g==y)var cn=tK(h,g,C);else g==E||g==x?cn=nK(h,g,ye):(g==A||g==(y|A))&&!j.length?cn=iK(h,g,C,N):cn=L0.apply(e,Gt);var In=Vt?fx:Wx;return jx(In(cn,Gt),h,g)}function Lx(h,g,C,N){return h===e||ga(h,Kh[C])&&!pi.call(N,C)?g:h}function Bx(h,g,C,N,j,Q){return ts(h)&&ts(g)&&(Q.set(g,h),R0(h,g,e,Bx,Q),Q.delete(g)),h}function rK(h){return op(h)?e:h}function Fx(h,g,C,N,j,Q){var ce=C&m,ye=h.length,Oe=g.length;if(ye!=Oe&&!(ce&&Oe>ye))return!1;var dt=Q.get(h),ft=Q.get(g);if(dt&&ft)return dt==g&&ft==h;var bt=-1,Vt=!0,Gt=C&v?new ad:e;for(Q.set(h,g),Q.set(g,h);++bt<ye;){var cn=h[bt],In=g[bt];if(N)var un=ce?N(In,cn,bt,g,h,Q):N(cn,In,bt,h,g,Q);if(un!==e){if(un)continue;Vt=!1;break}if(Gt){if(!Ny(g,function(Vn,Kn){if(!qm(Gt,Kn)&&(cn===Vn||j(cn,Vn,C,N,Q)))return Gt.push(Kn)})){Vt=!1;break}}else if(!(cn===In||j(cn,In,C,N,Q))){Vt=!1;break}}return Q.delete(h),Q.delete(g),Vt}function oK(h,g,C,N,j,Q,ce){switch(C){case Re:if(h.byteLength!=g.byteLength||h.byteOffset!=g.byteOffset)return!1;h=h.buffer,g=g.buffer;case ut:return!(h.byteLength!=g.byteLength||!Q(new b0(h),new b0(g)));case me:case pe:case X:return ga(+h,+g);case rt:return h.name==g.name&&h.message==g.message;case _e:case he:return h==g+"";case $:var ye=Uy;case Ee:var Oe=N&m;if(ye||(ye=h0),h.size!=g.size&&!Oe)return!1;var dt=ce.get(h);if(dt)return dt==g;N|=v,ce.set(h,g);var ft=Fx(ye(h),ye(g),N,j,Q,ce);return ce.delete(h),ft;case He:if(Xm)return Xm.call(h)==Xm.call(g)}return!1}function aK(h,g,C,N,j,Q){var ce=C&m,ye=m2(h),Oe=ye.length,dt=m2(g),ft=dt.length;if(Oe!=ft&&!ce)return!1;for(var bt=Oe;bt--;){var Vt=ye[bt];if(!(ce?Vt in g:pi.call(g,Vt)))return!1}var Gt=Q.get(h),cn=Q.get(g);if(Gt&&cn)return Gt==g&&cn==h;var In=!0;Q.set(h,g),Q.set(g,h);for(var un=ce;++bt<Oe;){Vt=ye[bt];var Vn=h[Vt],Kn=g[Vt];if(N)var oo=ce?N(Kn,Vn,Vt,g,h,Q):N(Vn,Kn,Vt,h,g,Q);if(!(oo===e?Vn===Kn||j(Vn,Kn,C,N,Q):oo)){In=!1;break}un||(un=Vt=="constructor")}if(In&&!un){var _r=h.constructor,ao=g.constructor;_r!=ao&&"constructor"in h&&"constructor"in g&&!(typeof _r=="function"&&_r instanceof _r&&typeof ao=="function"&&ao instanceof ao)&&(In=!1)}return Q.delete(h),Q.delete(g),In}function Nl(h){return C2(Hx(h,e,Xx),h+"")}function m2(h){return nx(h,Ls,b2)}function p2(h){return nx(h,Or,Nx)}var g2=E0?function(h){return E0.get(h)}:B2;function V0(h){for(var g=h.name+"",C=Yh[g],N=pi.call(Yh,g)?C.length:0;N--;){var j=C[N],Q=j.func;if(Q==null||Q==h)return j.name}return g}function Qh(h){var g=pi.call(Z,"placeholder")?Z:h;return g.placeholder}function ln(){var h=Z.iteratee||O2;return h=h===O2?rx:h,arguments.length?h(arguments[0],arguments[1]):h}function D0(h,g){var C=h.__data__;return pK(g)?C[typeof g=="string"?"string":"hash"]:C.map}function v2(h){for(var g=Ls(h),C=g.length;C--;){var N=g[C],j=h[N];g[C]=[N,j,$x(j)]}return g}function ud(h,g){var C=bj(h,g);return sx(C)?C:e}function lK(h){var g=pi.call(h,rd),C=h[rd];try{h[rd]=e;var N=!0}catch{}var j=g0.call(h);return N&&(g?h[rd]=C:delete h[rd]),j}var b2=jy?function(h){return h==null?[]:(h=xi(h),zc(jy(h),function(g){return UT.call(h,g)}))}:F2,Nx=jy?function(h){for(var g=[];h;)Hc(g,b2(h)),h=_0(h);return g}:F2,tr=vr;(qy&&tr(new qy(new ArrayBuffer(1)))!=Re||Gm&&tr(new Gm)!=$||Ky&&tr(Ky.resolve())!=be||Gh&&tr(new Gh)!=Ee||Ym&&tr(new Ym)!=de)&&(tr=function(h){var g=vr(h),C=g==ie?h.constructor:e,N=C?dd(C):"";if(N)switch(N){case Wj:return Re;case jj:return $;case qj:return be;case Kj:return Ee;case Gj:return de}return g});function cK(h,g,C){for(var N=-1,j=C.length;++N<j;){var Q=C[N],ce=Q.size;switch(Q.type){case"drop":h+=ce;break;case"dropRight":g-=ce;break;case"take":g=er(g,h+ce);break;case"takeRight":h=Rs(h,g-ce);break}}return{start:h,end:g}}function uK(h){var g=h.match(Ct);return g?g[1].split(Jt):[]}function Vx(h,g,C){g=Kc(g,h);for(var N=-1,j=g.length,Q=!1;++N<j;){var ce=el(g[N]);if(!(Q=h!=null&&C(h,ce)))break;h=h[ce]}return Q||++N!=j?Q:(j=h==null?0:h.length,!!j&&q0(j)&&Vl(ce,j)&&(wn(h)||hd(h)))}function dK(h){var g=h.length,C=new h.constructor(g);return g&&typeof h[0]=="string"&&pi.call(h,"index")&&(C.index=h.index,C.input=h.input),C}function Dx(h){return typeof h.constructor=="function"&&!sp(h)?Zh(_0(h)):{}}function hK(h,g,C){var N=h.constructor;switch(g){case ut:return d2(h);case me:case pe:return new N(+h);case Re:return Yq(h,C);case je:case ae:case Ue:case W:case K:case te:case oe:case ue:case ee:return yx(h,C);case $:return new N;case X:case he:return new N(h);case _e:return Zq(h);case Ee:return new N;case He:return Xq(h)}}function fK(h,g){var C=g.length;if(!C)return h;var N=C-1;return g[N]=(C>1?"& ":"")+g[N],g=g.join(C>2?", ":" "),h.replace(ni,`{
/* [wrapped with `+g+`] */
`)}function mK(h){return wn(h)||hd(h)||!!(WT&&h&&h[WT])}function Vl(h,g){var C=typeof h;return g=g??q,!!g&&(C=="number"||C!="symbol"&&vt.test(h))&&h>-1&&h%1==0&&h<g}function br(h,g,C){if(!ts(C))return!1;var N=typeof g;return(N=="number"?Pr(C)&&Vl(g,C.length):N=="string"&&g in C)?ga(C[g],h):!1}function _2(h,g){if(wn(h))return!1;var C=typeof h;return C=="number"||C=="symbol"||C=="boolean"||h==null||ro(h)?!0:yt.test(h)||!$e.test(h)||g!=null&&h in xi(g)}function pK(h){var g=typeof h;return g=="string"||g=="number"||g=="symbol"||g=="boolean"?h!=="__proto__":h===null}function w2(h){var g=V0(h),C=Z[g];if(typeof C!="function"||!(g in Un.prototype))return!1;if(h===C)return!0;var N=g2(C);return!!N&&h===N[0]}function gK(h){return!!$T&&$T in h}var vK=m0?Dl:N2;function sp(h){var g=h&&h.constructor,C=typeof g=="function"&&g.prototype||Kh;return h===C}function $x(h){return h===h&&!ts(h)}function zx(h,g){return function(C){return C==null?!1:C[h]===g&&(g!==e||h in xi(C))}}function bK(h){var g=W0(h,function(N){return C.size===c&&C.clear(),N}),C=g.cache;return g}function _K(h,g){var C=h[1],N=g[1],j=C|N,Q=j<(y|_|k),ce=N==k&&C==E||N==k&&C==O&&h[7].length<=g[8]||N==(k|O)&&g[7].length<=g[8]&&C==E;if(!(Q||ce))return h;N&y&&(h[2]=g[2],j|=C&y?0:b);var ye=g[3];if(ye){var Oe=h[3];h[3]=Oe?kx(Oe,ye,g[4]):ye,h[4]=Oe?Uc(h[3],u):g[4]}return ye=g[5],ye&&(Oe=h[5],h[5]=Oe?Ex(Oe,ye,g[6]):ye,h[6]=Oe?Uc(h[5],u):g[6]),ye=g[7],ye&&(h[7]=ye),N&k&&(h[8]=h[8]==null?g[8]:er(h[8],g[8])),h[9]==null&&(h[9]=g[9]),h[0]=g[0],h[1]=j,h}function wK(h){var g=[];if(h!=null)for(var C in xi(h))g.push(C);return g}function yK(h){return g0.call(h)}function Hx(h,g,C){return g=Rs(g===e?h.length-1:g,0),function(){for(var N=arguments,j=-1,Q=Rs(N.length-g,0),ce=Ze(Q);++j<Q;)ce[j]=N[g+j];j=-1;for(var ye=Ze(g+1);++j<g;)ye[j]=N[j];return ye[g]=C(ce),no(h,this,ye)}}function Ux(h,g){return g.length<2?h:cd(h,$o(g,0,-1))}function CK(h,g){for(var C=h.length,N=er(g.length,C),j=Mr(h);N--;){var Q=g[N];h[N]=Vl(Q,C)?j[Q]:e}return h}function y2(h,g){if(!(g==="constructor"&&typeof h[g]=="function")&&g!="__proto__")return h[g]}var Wx=qx(fx),rp=Nj||function(h,g){return js.setTimeout(h,g)},C2=qx(jq);function jx(h,g,C){var N=g+"";return C2(h,fK(N,kK(uK(N),C)))}function qx(h){var g=0,C=0;return function(){var N=zj(),j=L-(N-C);if(C=N,j>0){if(++g>=R)return arguments[0]}else g=0;return h.apply(e,arguments)}}function $0(h,g){var C=-1,N=h.length,j=N-1;for(g=g===e?N:g;++C<g;){var Q=s2(C,j),ce=h[Q];h[Q]=h[C],h[C]=ce}return h.length=g,h}var Kx=bK(function(h){var g=[];return h.charCodeAt(0)===46&&g.push(""),h.replace(qt,function(C,N,j,Q){g.push(j?Q.replace(Qt,"$1"):N||C)}),g});function el(h){if(typeof h=="string"||ro(h))return h;var g=h+"";return g=="0"&&1/h==-J?"-0":g}function dd(h){if(h!=null){try{return p0.call(h)}catch{}try{return h+""}catch{}}return""}function kK(h,g){return Fo(Pe,function(C){var N="_."+C[0];g&C[1]&&!u0(h,N)&&h.push(N)}),h.sort()}function Gx(h){if(h instanceof Un)return h.clone();var g=new Vo(h.__wrapped__,h.__chain__);return g.__actions__=Mr(h.__actions__),g.__index__=h.__index__,g.__values__=h.__values__,g}function EK(h,g,C){(C?br(h,g,C):g===e)?g=1:g=Rs(xn(g),0);var N=h==null?0:h.length;if(!N||g<1)return[];for(var j=0,Q=0,ce=Ze(C0(N/g));j<N;)ce[Q++]=$o(h,j,j+=g);return ce}function SK(h){for(var g=-1,C=h==null?0:h.length,N=0,j=[];++g<C;){var Q=h[g];Q&&(j[N++]=Q)}return j}function TK(){var h=arguments.length;if(!h)return[];for(var g=Ze(h-1),C=arguments[0],N=h;N--;)g[N-1]=arguments[N];return Hc(wn(C)?Mr(C):[C],qs(g,1))}var xK=Fn(function(h,g){return ds(h)?Qm(h,qs(g,1,ds,!0)):[]}),AK=Fn(function(h,g){var C=zo(g);return ds(C)&&(C=e),ds(h)?Qm(h,qs(g,1,ds,!0),ln(C,2)):[]}),IK=Fn(function(h,g){var C=zo(g);return ds(C)&&(C=e),ds(h)?Qm(h,qs(g,1,ds,!0),e,C):[]});function RK(h,g,C){var N=h==null?0:h.length;return N?(g=C||g===e?1:xn(g),$o(h,g<0?0:g,N)):[]}function MK(h,g,C){var N=h==null?0:h.length;return N?(g=C||g===e?1:xn(g),g=N-g,$o(h,0,g<0?0:g)):[]}function PK(h,g){return h&&h.length?P0(h,ln(g,3),!0,!0):[]}function OK(h,g){return h&&h.length?P0(h,ln(g,3),!0):[]}function LK(h,g,C,N){var j=h==null?0:h.length;return j?(C&&typeof C!="number"&&br(h,g,C)&&(C=0,N=j),Tq(h,g,C,N)):[]}function Yx(h,g,C){var N=h==null?0:h.length;if(!N)return-1;var j=C==null?0:xn(C);return j<0&&(j=Rs(N+j,0)),d0(h,ln(g,3),j)}function Zx(h,g,C){var N=h==null?0:h.length;if(!N)return-1;var j=N-1;return C!==e&&(j=xn(C),j=C<0?Rs(N+j,0):er(j,N-1)),d0(h,ln(g,3),j,!0)}function Xx(h){var g=h==null?0:h.length;return g?qs(h,1):[]}function BK(h){var g=h==null?0:h.length;return g?qs(h,J):[]}function FK(h,g){var C=h==null?0:h.length;return C?(g=g===e?1:xn(g),qs(h,g)):[]}function NK(h){for(var g=-1,C=h==null?0:h.length,N={};++g<C;){var j=h[g];N[j[0]]=j[1]}return N}function Jx(h){return h&&h.length?h[0]:e}function VK(h,g,C){var N=h==null?0:h.length;if(!N)return-1;var j=C==null?0:xn(C);return j<0&&(j=Rs(N+j,0)),Uh(h,g,j)}function DK(h){var g=h==null?0:h.length;return g?$o(h,0,-1):[]}var $K=Fn(function(h){var g=Ji(h,c2);return g.length&&g[0]===h[0]?Qy(g):[]}),zK=Fn(function(h){var g=zo(h),C=Ji(h,c2);return g===zo(C)?g=e:C.pop(),C.length&&C[0]===h[0]?Qy(C,ln(g,2)):[]}),HK=Fn(function(h){var g=zo(h),C=Ji(h,c2);return g=typeof g=="function"?g:e,g&&C.pop(),C.length&&C[0]===h[0]?Qy(C,e,g):[]});function UK(h,g){return h==null?"":Dj.call(h,g)}function zo(h){var g=h==null?0:h.length;return g?h[g-1]:e}function WK(h,g,C){var N=h==null?0:h.length;if(!N)return-1;var j=N;return C!==e&&(j=xn(C),j=j<0?Rs(N+j,0):er(j,N-1)),g===g?kj(h,g,j):d0(h,PT,j,!0)}function jK(h,g){return h&&h.length?cx(h,xn(g)):e}var qK=Fn(Qx);function Qx(h,g){return h&&h.length&&g&&g.length?i2(h,g):h}function KK(h,g,C){return h&&h.length&&g&&g.length?i2(h,g,ln(C,2)):h}function GK(h,g,C){return h&&h.length&&g&&g.length?i2(h,g,e,C):h}var YK=Nl(function(h,g){var C=h==null?0:h.length,N=Yy(h,g);return hx(h,Ji(g,function(j){return Vl(j,C)?+j:j}).sort(Cx)),N});function ZK(h,g){var C=[];if(!(h&&h.length))return C;var N=-1,j=[],Q=h.length;for(g=ln(g,3);++N<Q;){var ce=h[N];g(ce,N,h)&&(C.push(ce),j.push(N))}return hx(h,j),C}function k2(h){return h==null?h:Uj.call(h)}function XK(h,g,C){var N=h==null?0:h.length;return N?(C&&typeof C!="number"&&br(h,g,C)?(g=0,C=N):(g=g==null?0:xn(g),C=C===e?N:xn(C)),$o(h,g,C)):[]}function JK(h,g){return M0(h,g)}function QK(h,g,C){return o2(h,g,ln(C,2))}function eG(h,g){var C=h==null?0:h.length;if(C){var N=M0(h,g);if(N<C&&ga(h[N],g))return N}return-1}function tG(h,g){return M0(h,g,!0)}function nG(h,g,C){return o2(h,g,ln(C,2),!0)}function iG(h,g){var C=h==null?0:h.length;if(C){var N=M0(h,g,!0)-1;if(ga(h[N],g))return N}return-1}function sG(h){return h&&h.length?mx(h):[]}function rG(h,g){return h&&h.length?mx(h,ln(g,2)):[]}function oG(h){var g=h==null?0:h.length;return g?$o(h,1,g):[]}function aG(h,g,C){return h&&h.length?(g=C||g===e?1:xn(g),$o(h,0,g<0?0:g)):[]}function lG(h,g,C){var N=h==null?0:h.length;return N?(g=C||g===e?1:xn(g),g=N-g,$o(h,g<0?0:g,N)):[]}function cG(h,g){return h&&h.length?P0(h,ln(g,3),!1,!0):[]}function uG(h,g){return h&&h.length?P0(h,ln(g,3)):[]}var dG=Fn(function(h){return qc(qs(h,1,ds,!0))}),hG=Fn(function(h){var g=zo(h);return ds(g)&&(g=e),qc(qs(h,1,ds,!0),ln(g,2))}),fG=Fn(function(h){var g=zo(h);return g=typeof g=="function"?g:e,qc(qs(h,1,ds,!0),e,g)});function mG(h){return h&&h.length?qc(h):[]}function pG(h,g){return h&&h.length?qc(h,ln(g,2)):[]}function gG(h,g){return g=typeof g=="function"?g:e,h&&h.length?qc(h,e,g):[]}function E2(h){if(!(h&&h.length))return[];var g=0;return h=zc(h,function(C){if(ds(C))return g=Rs(C.length,g),!0}),zy(g,function(C){return Ji(h,Vy(C))})}function eA(h,g){if(!(h&&h.length))return[];var C=E2(h);return g==null?C:Ji(C,function(N){return no(g,e,N)})}var vG=Fn(function(h,g){return ds(h)?Qm(h,g):[]}),bG=Fn(function(h){return l2(zc(h,ds))}),_G=Fn(function(h){var g=zo(h);return ds(g)&&(g=e),l2(zc(h,ds),ln(g,2))}),wG=Fn(function(h){var g=zo(h);return g=typeof g=="function"?g:e,l2(zc(h,ds),e,g)}),yG=Fn(E2);function CG(h,g){return bx(h||[],g||[],Jm)}function kG(h,g){return bx(h||[],g||[],np)}var EG=Fn(function(h){var g=h.length,C=g>1?h[g-1]:e;return C=typeof C=="function"?(h.pop(),C):e,eA(h,C)});function tA(h){var g=Z(h);return g.__chain__=!0,g}function SG(h,g){return g(h),h}function z0(h,g){return g(h)}var TG=Nl(function(h){var g=h.length,C=g?h[0]:0,N=this.__wrapped__,j=function(Q){return Yy(Q,h)};return g>1||this.__actions__.length||!(N instanceof Un)||!Vl(C)?this.thru(j):(N=N.slice(C,+C+(g?1:0)),N.__actions__.push({func:z0,args:[j],thisArg:e}),new Vo(N,this.__chain__).thru(function(Q){return g&&!Q.length&&Q.push(e),Q}))});function xG(){return tA(this)}function AG(){return new Vo(this.value(),this.__chain__)}function IG(){this.__values__===e&&(this.__values__=pA(this.value()));var h=this.__index__>=this.__values__.length,g=h?e:this.__values__[this.__index__++];return{done:h,value:g}}function RG(){return this}function MG(h){for(var g,C=this;C instanceof T0;){var N=Gx(C);N.__index__=0,N.__values__=e,g?j.__wrapped__=N:g=N;var j=N;C=C.__wrapped__}return j.__wrapped__=h,g}function PG(){var h=this.__wrapped__;if(h instanceof Un){var g=h;return this.__actions__.length&&(g=new Un(this)),g=g.reverse(),g.__actions__.push({func:z0,args:[k2],thisArg:e}),new Vo(g,this.__chain__)}return this.thru(k2)}function OG(){return vx(this.__wrapped__,this.__actions__)}var LG=O0(function(h,g,C){pi.call(h,C)?++h[C]:Bl(h,C,1)});function BG(h,g,C){var N=wn(h)?RT:Sq;return C&&br(h,g,C)&&(g=e),N(h,ln(g,3))}function FG(h,g){var C=wn(h)?zc:ex;return C(h,ln(g,3))}var NG=Ax(Yx),VG=Ax(Zx);function DG(h,g){return qs(H0(h,g),1)}function $G(h,g){return qs(H0(h,g),J)}function zG(h,g,C){return C=C===e?1:xn(C),qs(H0(h,g),C)}function nA(h,g){var C=wn(h)?Fo:jc;return C(h,ln(g,3))}function iA(h,g){var C=wn(h)?oj:QT;return C(h,ln(g,3))}var HG=O0(function(h,g,C){pi.call(h,C)?h[C].push(g):Bl(h,C,[g])});function UG(h,g,C,N){h=Pr(h)?h:tf(h),C=C&&!N?xn(C):0;var j=h.length;return C<0&&(C=Rs(j+C,0)),K0(h)?C<=j&&h.indexOf(g,C)>-1:!!j&&Uh(h,g,C)>-1}var WG=Fn(function(h,g,C){var N=-1,j=typeof g=="function",Q=Pr(h)?Ze(h.length):[];return jc(h,function(ce){Q[++N]=j?no(g,ce,C):ep(ce,g,C)}),Q}),jG=O0(function(h,g,C){Bl(h,C,g)});function H0(h,g){var C=wn(h)?Ji:ox;return C(h,ln(g,3))}function qG(h,g,C,N){return h==null?[]:(wn(g)||(g=g==null?[]:[g]),C=N?e:C,wn(C)||(C=C==null?[]:[C]),ux(h,g,C))}var KG=O0(function(h,g,C){h[C?0:1].push(g)},function(){return[[],[]]});function GG(h,g,C){var N=wn(h)?Fy:LT,j=arguments.length<3;return N(h,ln(g,4),C,j,jc)}function YG(h,g,C){var N=wn(h)?aj:LT,j=arguments.length<3;return N(h,ln(g,4),C,j,QT)}function ZG(h,g){var C=wn(h)?zc:ex;return C(h,j0(ln(g,3)))}function XG(h){var g=wn(h)?YT:Uq;return g(h)}function JG(h,g,C){(C?br(h,g,C):g===e)?g=1:g=xn(g);var N=wn(h)?wq:Wq;return N(h,g)}function QG(h){var g=wn(h)?yq:qq;return g(h)}function eY(h){if(h==null)return 0;if(Pr(h))return K0(h)?jh(h):h.length;var g=tr(h);return g==$||g==Ee?h.size:t2(h).length}function tY(h,g,C){var N=wn(h)?Ny:Kq;return C&&br(h,g,C)&&(g=e),N(h,ln(g,3))}var nY=Fn(function(h,g){if(h==null)return[];var C=g.length;return C>1&&br(h,g[0],g[1])?g=[]:C>2&&br(g[0],g[1],g[2])&&(g=[g[0]]),ux(h,qs(g,1),[])}),U0=Fj||function(){return js.Date.now()};function iY(h,g){if(typeof g!="function")throw new No(o);return h=xn(h),function(){if(--h<1)return g.apply(this,arguments)}}function sA(h,g,C){return g=C?e:g,g=h&&g==null?h.length:g,Fl(h,k,e,e,e,e,g)}function rA(h,g){var C;if(typeof g!="function")throw new No(o);return h=xn(h),function(){return--h>0&&(C=g.apply(this,arguments)),h<=1&&(g=e),C}}var S2=Fn(function(h,g,C){var N=y;if(C.length){var j=Uc(C,Qh(S2));N|=A}return Fl(h,N,g,C,j)}),oA=Fn(function(h,g,C){var N=y|_;if(C.length){var j=Uc(C,Qh(oA));N|=A}return Fl(g,N,h,C,j)});function aA(h,g,C){g=C?e:g;var N=Fl(h,E,e,e,e,e,e,g);return N.placeholder=aA.placeholder,N}function lA(h,g,C){g=C?e:g;var N=Fl(h,x,e,e,e,e,e,g);return N.placeholder=lA.placeholder,N}function cA(h,g,C){var N,j,Q,ce,ye,Oe,dt=0,ft=!1,bt=!1,Vt=!0;if(typeof h!="function")throw new No(o);g=Ho(g)||0,ts(C)&&(ft=!!C.leading,bt="maxWait"in C,Q=bt?Rs(Ho(C.maxWait)||0,g):Q,Vt="trailing"in C?!!C.trailing:Vt);function Gt(hs){var va=N,zl=j;return N=j=e,dt=hs,ce=h.apply(zl,va),ce}function cn(hs){return dt=hs,ye=rp(Vn,g),ft?Gt(hs):ce}function In(hs){var va=hs-Oe,zl=hs-dt,AA=g-va;return bt?er(AA,Q-zl):AA}function un(hs){var va=hs-Oe,zl=hs-dt;return Oe===e||va>=g||va<0||bt&&zl>=Q}function Vn(){var hs=U0();if(un(hs))return Kn(hs);ye=rp(Vn,In(hs))}function Kn(hs){return ye=e,Vt&&N?Gt(hs):(N=j=e,ce)}function oo(){ye!==e&&_x(ye),dt=0,N=Oe=j=ye=e}function _r(){return ye===e?ce:Kn(U0())}function ao(){var hs=U0(),va=un(hs);if(N=arguments,j=this,Oe=hs,va){if(ye===e)return cn(Oe);if(bt)return _x(ye),ye=rp(Vn,g),Gt(Oe)}return ye===e&&(ye=rp(Vn,g)),ce}return ao.cancel=oo,ao.flush=_r,ao}var sY=Fn(function(h,g){return JT(h,1,g)}),rY=Fn(function(h,g,C){return JT(h,Ho(g)||0,C)});function oY(h){return Fl(h,M)}function W0(h,g){if(typeof h!="function"||g!=null&&typeof g!="function")throw new No(o);var C=function(){var N=arguments,j=g?g.apply(this,N):N[0],Q=C.cache;if(Q.has(j))return Q.get(j);var ce=h.apply(this,N);return C.cache=Q.set(j,ce)||Q,ce};return C.cache=new(W0.Cache||Ll),C}W0.Cache=Ll;function j0(h){if(typeof h!="function")throw new No(o);return function(){var g=arguments;switch(g.length){case 0:return!h.call(this);case 1:return!h.call(this,g[0]);case 2:return!h.call(this,g[0],g[1]);case 3:return!h.call(this,g[0],g[1],g[2])}return!h.apply(this,g)}}function aY(h){return rA(2,h)}var lY=Gq(function(h,g){g=g.length==1&&wn(g[0])?Ji(g[0],io(ln())):Ji(qs(g,1),io(ln()));var C=g.length;return Fn(function(N){for(var j=-1,Q=er(N.length,C);++j<Q;)N[j]=g[j].call(this,N[j]);return no(h,this,N)})}),T2=Fn(function(h,g){var C=Uc(g,Qh(T2));return Fl(h,A,e,g,C)}),uA=Fn(function(h,g){var C=Uc(g,Qh(uA));return Fl(h,I,e,g,C)}),cY=Nl(function(h,g){return Fl(h,O,e,e,e,g)});function uY(h,g){if(typeof h!="function")throw new No(o);return g=g===e?g:xn(g),Fn(h,g)}function dY(h,g){if(typeof h!="function")throw new No(o);return g=g==null?0:Rs(xn(g),0),Fn(function(C){var N=C[g],j=Gc(C,0,g);return N&&Hc(j,N),no(h,this,j)})}function hY(h,g,C){var N=!0,j=!0;if(typeof h!="function")throw new No(o);return ts(C)&&(N="leading"in C?!!C.leading:N,j="trailing"in C?!!C.trailing:j),cA(h,g,{leading:N,maxWait:g,trailing:j})}function fY(h){return sA(h,1)}function mY(h,g){return T2(u2(g),h)}function pY(){if(!arguments.length)return[];var h=arguments[0];return wn(h)?h:[h]}function gY(h){return Do(h,p)}function vY(h,g){return g=typeof g=="function"?g:e,Do(h,p,g)}function bY(h){return Do(h,d|p)}function _Y(h,g){return g=typeof g=="function"?g:e,Do(h,d|p,g)}function wY(h,g){return g==null||XT(h,g,Ls(g))}function ga(h,g){return h===g||h!==h&&g!==g}var yY=N0(Jy),CY=N0(function(h,g){return h>=g}),hd=ix(function(){return arguments}())?ix:function(h){return rs(h)&&pi.call(h,"callee")&&!UT.call(h,"callee")},wn=Ze.isArray,kY=ET?io(ET):Mq;function Pr(h){return h!=null&&q0(h.length)&&!Dl(h)}function ds(h){return rs(h)&&Pr(h)}function EY(h){return h===!0||h===!1||rs(h)&&vr(h)==me}var Yc=Vj||N2,SY=ST?io(ST):Pq;function TY(h){return rs(h)&&h.nodeType===1&&!op(h)}function xY(h){if(h==null)return!0;if(Pr(h)&&(wn(h)||typeof h=="string"||typeof h.splice=="function"||Yc(h)||ef(h)||hd(h)))return!h.length;var g=tr(h);if(g==$||g==Ee)return!h.size;if(sp(h))return!t2(h).length;for(var C in h)if(pi.call(h,C))return!1;return!0}function AY(h,g){return tp(h,g)}function IY(h,g,C){C=typeof C=="function"?C:e;var N=C?C(h,g):e;return N===e?tp(h,g,e,C):!!N}function x2(h){if(!rs(h))return!1;var g=vr(h);return g==rt||g==ge||typeof h.message=="string"&&typeof h.name=="string"&&!op(h)}function RY(h){return typeof h=="number"&&jT(h)}function Dl(h){if(!ts(h))return!1;var g=vr(h);return g==wt||g==D||g==ne||g==Ae}function dA(h){return typeof h=="number"&&h==xn(h)}function q0(h){return typeof h=="number"&&h>-1&&h%1==0&&h<=q}function ts(h){var g=typeof h;return h!=null&&(g=="object"||g=="function")}function rs(h){return h!=null&&typeof h=="object"}var hA=TT?io(TT):Lq;function MY(h,g){return h===g||e2(h,g,v2(g))}function PY(h,g,C){return C=typeof C=="function"?C:e,e2(h,g,v2(g),C)}function OY(h){return fA(h)&&h!=+h}function LY(h){if(vK(h))throw new gn(r);return sx(h)}function BY(h){return h===null}function FY(h){return h==null}function fA(h){return typeof h=="number"||rs(h)&&vr(h)==X}function op(h){if(!rs(h)||vr(h)!=ie)return!1;var g=_0(h);if(g===null)return!0;var C=pi.call(g,"constructor")&&g.constructor;return typeof C=="function"&&C instanceof C&&p0.call(C)==Pj}var A2=xT?io(xT):Bq;function NY(h){return dA(h)&&h>=-q&&h<=q}var mA=AT?io(AT):Fq;function K0(h){return typeof h=="string"||!wn(h)&&rs(h)&&vr(h)==he}function ro(h){return typeof h=="symbol"||rs(h)&&vr(h)==He}var ef=IT?io(IT):Nq;function VY(h){return h===e}function DY(h){return rs(h)&&tr(h)==de}function $Y(h){return rs(h)&&vr(h)==We}var zY=N0(n2),HY=N0(function(h,g){return h<=g});function pA(h){if(!h)return[];if(Pr(h))return K0(h)?ma(h):Mr(h);if(Km&&h[Km])return wj(h[Km]());var g=tr(h),C=g==$?Uy:g==Ee?h0:tf;return C(h)}function $l(h){if(!h)return h===0?h:0;if(h=Ho(h),h===J||h===-J){var g=h<0?-1:1;return g*G}return h===h?h:0}function xn(h){var g=$l(h),C=g%1;return g===g?C?g-C:g:0}function gA(h){return h?ld(xn(h),0,V):0}function Ho(h){if(typeof h=="number")return h;if(ro(h))return S;if(ts(h)){var g=typeof h.valueOf=="function"?h.valueOf():h;h=ts(g)?g+"":g}if(typeof h!="string")return h===0?h:+h;h=BT(h);var C=ss.test(h);return C||we.test(h)?ij(h.slice(2),C?2:8):Vi.test(h)?S:+h}function vA(h){return Qa(h,Or(h))}function UY(h){return h?ld(xn(h),-q,q):h===0?h:0}function ci(h){return h==null?"":so(h)}var WY=Xh(function(h,g){if(sp(g)||Pr(g)){Qa(g,Ls(g),h);return}for(var C in g)pi.call(g,C)&&Jm(h,C,g[C])}),bA=Xh(function(h,g){Qa(g,Or(g),h)}),G0=Xh(function(h,g,C,N){Qa(g,Or(g),h,N)}),jY=Xh(function(h,g,C,N){Qa(g,Ls(g),h,N)}),qY=Nl(Yy);function KY(h,g){var C=Zh(h);return g==null?C:ZT(C,g)}var GY=Fn(function(h,g){h=xi(h);var C=-1,N=g.length,j=N>2?g[2]:e;for(j&&br(g[0],g[1],j)&&(N=1);++C<N;)for(var Q=g[C],ce=Or(Q),ye=-1,Oe=ce.length;++ye<Oe;){var dt=ce[ye],ft=h[dt];(ft===e||ga(ft,Kh[dt])&&!pi.call(h,dt))&&(h[dt]=Q[dt])}return h}),YY=Fn(function(h){return h.push(e,Bx),no(_A,e,h)});function ZY(h,g){return MT(h,ln(g,3),Ja)}function XY(h,g){return MT(h,ln(g,3),Xy)}function JY(h,g){return h==null?h:Zy(h,ln(g,3),Or)}function QY(h,g){return h==null?h:tx(h,ln(g,3),Or)}function eZ(h,g){return h&&Ja(h,ln(g,3))}function tZ(h,g){return h&&Xy(h,ln(g,3))}function nZ(h){return h==null?[]:I0(h,Ls(h))}function iZ(h){return h==null?[]:I0(h,Or(h))}function I2(h,g,C){var N=h==null?e:cd(h,g);return N===e?C:N}function sZ(h,g){return h!=null&&Vx(h,g,xq)}function R2(h,g){return h!=null&&Vx(h,g,Aq)}var rZ=Rx(function(h,g,C){g!=null&&typeof g.toString!="function"&&(g=g0.call(g)),h[g]=C},P2(Lr)),oZ=Rx(function(h,g,C){g!=null&&typeof g.toString!="function"&&(g=g0.call(g)),pi.call(h,g)?h[g].push(C):h[g]=[C]},ln),aZ=Fn(ep);function Ls(h){return Pr(h)?GT(h):t2(h)}function Or(h){return Pr(h)?GT(h,!0):Vq(h)}function lZ(h,g){var C={};return g=ln(g,3),Ja(h,function(N,j,Q){Bl(C,g(N,j,Q),N)}),C}function cZ(h,g){var C={};return g=ln(g,3),Ja(h,function(N,j,Q){Bl(C,j,g(N,j,Q))}),C}var uZ=Xh(function(h,g,C){R0(h,g,C)}),_A=Xh(function(h,g,C,N){R0(h,g,C,N)}),dZ=Nl(function(h,g){var C={};if(h==null)return C;var N=!1;g=Ji(g,function(Q){return Q=Kc(Q,h),N||(N=Q.length>1),Q}),Qa(h,p2(h),C),N&&(C=Do(C,d|f|p,rK));for(var j=g.length;j--;)a2(C,g[j]);return C});function hZ(h,g){return wA(h,j0(ln(g)))}var fZ=Nl(function(h,g){return h==null?{}:$q(h,g)});function wA(h,g){if(h==null)return{};var C=Ji(p2(h),function(N){return[N]});return g=ln(g),dx(h,C,function(N,j){return g(N,j[0])})}function mZ(h,g,C){g=Kc(g,h);var N=-1,j=g.length;for(j||(j=1,h=e);++N<j;){var Q=h==null?e:h[el(g[N])];Q===e&&(N=j,Q=C),h=Dl(Q)?Q.call(h):Q}return h}function pZ(h,g,C){return h==null?h:np(h,g,C)}function gZ(h,g,C,N){return N=typeof N=="function"?N:e,h==null?h:np(h,g,C,N)}var yA=Ox(Ls),CA=Ox(Or);function vZ(h,g,C){var N=wn(h),j=N||Yc(h)||ef(h);if(g=ln(g,4),C==null){var Q=h&&h.constructor;j?C=N?new Q:[]:ts(h)?C=Dl(Q)?Zh(_0(h)):{}:C={}}return(j?Fo:Ja)(h,function(ce,ye,Oe){return g(C,ce,ye,Oe)}),C}function bZ(h,g){return h==null?!0:a2(h,g)}function _Z(h,g,C){return h==null?h:gx(h,g,u2(C))}function wZ(h,g,C,N){return N=typeof N=="function"?N:e,h==null?h:gx(h,g,u2(C),N)}function tf(h){return h==null?[]:Hy(h,Ls(h))}function yZ(h){return h==null?[]:Hy(h,Or(h))}function CZ(h,g,C){return C===e&&(C=g,g=e),C!==e&&(C=Ho(C),C=C===C?C:0),g!==e&&(g=Ho(g),g=g===g?g:0),ld(Ho(h),g,C)}function kZ(h,g,C){return g=$l(g),C===e?(C=g,g=0):C=$l(C),h=Ho(h),Iq(h,g,C)}function EZ(h,g,C){if(C&&typeof C!="boolean"&&br(h,g,C)&&(g=C=e),C===e&&(typeof g=="boolean"?(C=g,g=e):typeof h=="boolean"&&(C=h,h=e)),h===e&&g===e?(h=0,g=1):(h=$l(h),g===e?(g=h,h=0):g=$l(g)),h>g){var N=h;h=g,g=N}if(C||h%1||g%1){var j=qT();return er(h+j*(g-h+nj("1e-"+((j+"").length-1))),g)}return s2(h,g)}var SZ=Jh(function(h,g,C){return g=g.toLowerCase(),h+(C?kA(g):g)});function kA(h){return M2(ci(h).toLowerCase())}function EA(h){return h=ci(h),h&&h.replace(Lt,pj).replace(qW,"")}function TZ(h,g,C){h=ci(h),g=so(g);var N=h.length;C=C===e?N:ld(xn(C),0,N);var j=C;return C-=g.length,C>=0&&h.slice(C,j)==g}function xZ(h){return h=ci(h),h&&Le.test(h)?h.replace(Te,gj):h}function AZ(h){return h=ci(h),h&&Pt.test(h)?h.replace(ct,"\\$&"):h}var IZ=Jh(function(h,g,C){return h+(C?"-":"")+g.toLowerCase()}),RZ=Jh(function(h,g,C){return h+(C?" ":"")+g.toLowerCase()}),MZ=xx("toLowerCase");function PZ(h,g,C){h=ci(h),g=xn(g);var N=g?jh(h):0;if(!g||N>=g)return h;var j=(g-N)/2;return F0(k0(j),C)+h+F0(C0(j),C)}function OZ(h,g,C){h=ci(h),g=xn(g);var N=g?jh(h):0;return g&&N<g?h+F0(g-N,C):h}function LZ(h,g,C){h=ci(h),g=xn(g);var N=g?jh(h):0;return g&&N<g?F0(g-N,C)+h:h}function BZ(h,g,C){return C||g==null?g=0:g&&(g=+g),Hj(ci(h).replace(st,""),g||0)}function FZ(h,g,C){return(C?br(h,g,C):g===e)?g=1:g=xn(g),r2(ci(h),g)}function NZ(){var h=arguments,g=ci(h[0]);return h.length<3?g:g.replace(h[1],h[2])}var VZ=Jh(function(h,g,C){return h+(C?"_":"")+g.toLowerCase()});function DZ(h,g,C){return C&&typeof C!="number"&&br(h,g,C)&&(g=C=e),C=C===e?V:C>>>0,C?(h=ci(h),h&&(typeof g=="string"||g!=null&&!A2(g))&&(g=so(g),!g&&Wh(h))?Gc(ma(h),0,C):h.split(g,C)):[]}var $Z=Jh(function(h,g,C){return h+(C?" ":"")+M2(g)});function zZ(h,g,C){return h=ci(h),C=C==null?0:ld(xn(C),0,h.length),g=so(g),h.slice(C,C+g.length)==g}function HZ(h,g,C){var N=Z.templateSettings;C&&br(h,g,C)&&(g=e),h=ci(h),g=G0({},g,N,Lx);var j=G0({},g.imports,N.imports,Lx),Q=Ls(j),ce=Hy(j,Q),ye,Oe,dt=0,ft=g.interpolate||En,bt="__p += '",Vt=Wy((g.escape||En).source+"|"+ft.source+"|"+(ft===Mt?nn:En).source+"|"+(g.evaluate||En).source+"|$","g"),Gt="//# sourceURL="+(pi.call(g,"sourceURL")?(g.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++XW+"]")+`
`;h.replace(Vt,function(un,Vn,Kn,oo,_r,ao){return Kn||(Kn=oo),bt+=h.slice(dt,ao).replace(ji,vj),Vn&&(ye=!0,bt+=`' +
__e(`+Vn+`) +
'`),_r&&(Oe=!0,bt+=`';
`+_r+`;
__p += '`),Kn&&(bt+=`' +
((__t = (`+Kn+`)) == null ? '' : __t) +
'`),dt=ao+un.length,un}),bt+=`';
`;var cn=pi.call(g,"variable")&&g.variable;if(!cn)bt=`with (obj) {
`+bt+`
}
`;else if(ht.test(cn))throw new gn(a);bt=(Oe?bt.replace(Ce,""):bt).replace(xe,"$1").replace(ke,"$1;"),bt="function("+(cn||"obj")+`) {
`+(cn?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ye?", __e = _.escape":"")+(Oe?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+bt+`return __p
}`;var In=TA(function(){return oi(Q,Gt+"return "+bt).apply(e,ce)});if(In.source=bt,x2(In))throw In;return In}function UZ(h){return ci(h).toLowerCase()}function WZ(h){return ci(h).toUpperCase()}function jZ(h,g,C){if(h=ci(h),h&&(C||g===e))return BT(h);if(!h||!(g=so(g)))return h;var N=ma(h),j=ma(g),Q=FT(N,j),ce=NT(N,j)+1;return Gc(N,Q,ce).join("")}function qZ(h,g,C){if(h=ci(h),h&&(C||g===e))return h.slice(0,DT(h)+1);if(!h||!(g=so(g)))return h;var N=ma(h),j=NT(N,ma(g))+1;return Gc(N,0,j).join("")}function KZ(h,g,C){if(h=ci(h),h&&(C||g===e))return h.replace(st,"");if(!h||!(g=so(g)))return h;var N=ma(h),j=FT(N,ma(g));return Gc(N,j).join("")}function GZ(h,g){var C=T,N=P;if(ts(g)){var j="separator"in g?g.separator:j;C="length"in g?xn(g.length):C,N="omission"in g?so(g.omission):N}h=ci(h);var Q=h.length;if(Wh(h)){var ce=ma(h);Q=ce.length}if(C>=Q)return h;var ye=C-jh(N);if(ye<1)return N;var Oe=ce?Gc(ce,0,ye).join(""):h.slice(0,ye);if(j===e)return Oe+N;if(ce&&(ye+=Oe.length-ye),A2(j)){if(h.slice(ye).search(j)){var dt,ft=Oe;for(j.global||(j=Wy(j.source,ci(Bn.exec(j))+"g")),j.lastIndex=0;dt=j.exec(ft);)var bt=dt.index;Oe=Oe.slice(0,bt===e?ye:bt)}}else if(h.indexOf(so(j),ye)!=ye){var Vt=Oe.lastIndexOf(j);Vt>-1&&(Oe=Oe.slice(0,Vt))}return Oe+N}function YZ(h){return h=ci(h),h&&Ke.test(h)?h.replace(Ge,Ej):h}var ZZ=Jh(function(h,g,C){return h+(C?" ":"")+g.toUpperCase()}),M2=xx("toUpperCase");function SA(h,g,C){return h=ci(h),g=C?e:g,g===e?_j(h)?xj(h):uj(h):h.match(g)||[]}var TA=Fn(function(h,g){try{return no(h,e,g)}catch(C){return x2(C)?C:new gn(C)}}),XZ=Nl(function(h,g){return Fo(g,function(C){C=el(C),Bl(h,C,S2(h[C],h))}),h});function JZ(h){var g=h==null?0:h.length,C=ln();return h=g?Ji(h,function(N){if(typeof N[1]!="function")throw new No(o);return[C(N[0]),N[1]]}):[],Fn(function(N){for(var j=-1;++j<g;){var Q=h[j];if(no(Q[0],this,N))return no(Q[1],this,N)}})}function QZ(h){return Eq(Do(h,d))}function P2(h){return function(){return h}}function eX(h,g){return h==null||h!==h?g:h}var tX=Ix(),nX=Ix(!0);function Lr(h){return h}function O2(h){return rx(typeof h=="function"?h:Do(h,d))}function iX(h){return ax(Do(h,d))}function sX(h,g){return lx(h,Do(g,d))}var rX=Fn(function(h,g){return function(C){return ep(C,h,g)}}),oX=Fn(function(h,g){return function(C){return ep(h,C,g)}});function L2(h,g,C){var N=Ls(g),j=I0(g,N);C==null&&!(ts(g)&&(j.length||!N.length))&&(C=g,g=h,h=this,j=I0(g,Ls(g)));var Q=!(ts(C)&&"chain"in C)||!!C.chain,ce=Dl(h);return Fo(j,function(ye){var Oe=g[ye];h[ye]=Oe,ce&&(h.prototype[ye]=function(){var dt=this.__chain__;if(Q||dt){var ft=h(this.__wrapped__),bt=ft.__actions__=Mr(this.__actions__);return bt.push({func:Oe,args:arguments,thisArg:h}),ft.__chain__=dt,ft}return Oe.apply(h,Hc([this.value()],arguments))})}),h}function aX(){return js._===this&&(js._=Oj),this}function B2(){}function lX(h){return h=xn(h),Fn(function(g){return cx(g,h)})}var cX=h2(Ji),uX=h2(RT),dX=h2(Ny);function xA(h){return _2(h)?Vy(el(h)):zq(h)}function hX(h){return function(g){return h==null?e:cd(h,g)}}var fX=Mx(),mX=Mx(!0);function F2(){return[]}function N2(){return!1}function pX(){return{}}function gX(){return""}function vX(){return!0}function bX(h,g){if(h=xn(h),h<1||h>q)return[];var C=V,N=er(h,V);g=ln(g),h-=V;for(var j=zy(N,g);++C<h;)g(C);return j}function _X(h){return wn(h)?Ji(h,el):ro(h)?[h]:Mr(Kx(ci(h)))}function wX(h){var g=++Mj;return ci(h)+g}var yX=B0(function(h,g){return h+g},0),CX=f2("ceil"),kX=B0(function(h,g){return h/g},1),EX=f2("floor");function SX(h){return h&&h.length?A0(h,Lr,Jy):e}function TX(h,g){return h&&h.length?A0(h,ln(g,2),Jy):e}function xX(h){return OT(h,Lr)}function AX(h,g){return OT(h,ln(g,2))}function IX(h){return h&&h.length?A0(h,Lr,n2):e}function RX(h,g){return h&&h.length?A0(h,ln(g,2),n2):e}var MX=B0(function(h,g){return h*g},1),PX=f2("round"),OX=B0(function(h,g){return h-g},0);function LX(h){return h&&h.length?$y(h,Lr):0}function BX(h,g){return h&&h.length?$y(h,ln(g,2)):0}return Z.after=iY,Z.ary=sA,Z.assign=WY,Z.assignIn=bA,Z.assignInWith=G0,Z.assignWith=jY,Z.at=qY,Z.before=rA,Z.bind=S2,Z.bindAll=XZ,Z.bindKey=oA,Z.castArray=pY,Z.chain=tA,Z.chunk=EK,Z.compact=SK,Z.concat=TK,Z.cond=JZ,Z.conforms=QZ,Z.constant=P2,Z.countBy=LG,Z.create=KY,Z.curry=aA,Z.curryRight=lA,Z.debounce=cA,Z.defaults=GY,Z.defaultsDeep=YY,Z.defer=sY,Z.delay=rY,Z.difference=xK,Z.differenceBy=AK,Z.differenceWith=IK,Z.drop=RK,Z.dropRight=MK,Z.dropRightWhile=PK,Z.dropWhile=OK,Z.fill=LK,Z.filter=FG,Z.flatMap=DG,Z.flatMapDeep=$G,Z.flatMapDepth=zG,Z.flatten=Xx,Z.flattenDeep=BK,Z.flattenDepth=FK,Z.flip=oY,Z.flow=tX,Z.flowRight=nX,Z.fromPairs=NK,Z.functions=nZ,Z.functionsIn=iZ,Z.groupBy=HG,Z.initial=DK,Z.intersection=$K,Z.intersectionBy=zK,Z.intersectionWith=HK,Z.invert=rZ,Z.invertBy=oZ,Z.invokeMap=WG,Z.iteratee=O2,Z.keyBy=jG,Z.keys=Ls,Z.keysIn=Or,Z.map=H0,Z.mapKeys=lZ,Z.mapValues=cZ,Z.matches=iX,Z.matchesProperty=sX,Z.memoize=W0,Z.merge=uZ,Z.mergeWith=_A,Z.method=rX,Z.methodOf=oX,Z.mixin=L2,Z.negate=j0,Z.nthArg=lX,Z.omit=dZ,Z.omitBy=hZ,Z.once=aY,Z.orderBy=qG,Z.over=cX,Z.overArgs=lY,Z.overEvery=uX,Z.overSome=dX,Z.partial=T2,Z.partialRight=uA,Z.partition=KG,Z.pick=fZ,Z.pickBy=wA,Z.property=xA,Z.propertyOf=hX,Z.pull=qK,Z.pullAll=Qx,Z.pullAllBy=KK,Z.pullAllWith=GK,Z.pullAt=YK,Z.range=fX,Z.rangeRight=mX,Z.rearg=cY,Z.reject=ZG,Z.remove=ZK,Z.rest=uY,Z.reverse=k2,Z.sampleSize=JG,Z.set=pZ,Z.setWith=gZ,Z.shuffle=QG,Z.slice=XK,Z.sortBy=nY,Z.sortedUniq=sG,Z.sortedUniqBy=rG,Z.split=DZ,Z.spread=dY,Z.tail=oG,Z.take=aG,Z.takeRight=lG,Z.takeRightWhile=cG,Z.takeWhile=uG,Z.tap=SG,Z.throttle=hY,Z.thru=z0,Z.toArray=pA,Z.toPairs=yA,Z.toPairsIn=CA,Z.toPath=_X,Z.toPlainObject=vA,Z.transform=vZ,Z.unary=fY,Z.union=dG,Z.unionBy=hG,Z.unionWith=fG,Z.uniq=mG,Z.uniqBy=pG,Z.uniqWith=gG,Z.unset=bZ,Z.unzip=E2,Z.unzipWith=eA,Z.update=_Z,Z.updateWith=wZ,Z.values=tf,Z.valuesIn=yZ,Z.without=vG,Z.words=SA,Z.wrap=mY,Z.xor=bG,Z.xorBy=_G,Z.xorWith=wG,Z.zip=yG,Z.zipObject=CG,Z.zipObjectDeep=kG,Z.zipWith=EG,Z.entries=yA,Z.entriesIn=CA,Z.extend=bA,Z.extendWith=G0,L2(Z,Z),Z.add=yX,Z.attempt=TA,Z.camelCase=SZ,Z.capitalize=kA,Z.ceil=CX,Z.clamp=CZ,Z.clone=gY,Z.cloneDeep=bY,Z.cloneDeepWith=_Y,Z.cloneWith=vY,Z.conformsTo=wY,Z.deburr=EA,Z.defaultTo=eX,Z.divide=kX,Z.endsWith=TZ,Z.eq=ga,Z.escape=xZ,Z.escapeRegExp=AZ,Z.every=BG,Z.find=NG,Z.findIndex=Yx,Z.findKey=ZY,Z.findLast=VG,Z.findLastIndex=Zx,Z.findLastKey=XY,Z.floor=EX,Z.forEach=nA,Z.forEachRight=iA,Z.forIn=JY,Z.forInRight=QY,Z.forOwn=eZ,Z.forOwnRight=tZ,Z.get=I2,Z.gt=yY,Z.gte=CY,Z.has=sZ,Z.hasIn=R2,Z.head=Jx,Z.identity=Lr,Z.includes=UG,Z.indexOf=VK,Z.inRange=kZ,Z.invoke=aZ,Z.isArguments=hd,Z.isArray=wn,Z.isArrayBuffer=kY,Z.isArrayLike=Pr,Z.isArrayLikeObject=ds,Z.isBoolean=EY,Z.isBuffer=Yc,Z.isDate=SY,Z.isElement=TY,Z.isEmpty=xY,Z.isEqual=AY,Z.isEqualWith=IY,Z.isError=x2,Z.isFinite=RY,Z.isFunction=Dl,Z.isInteger=dA,Z.isLength=q0,Z.isMap=hA,Z.isMatch=MY,Z.isMatchWith=PY,Z.isNaN=OY,Z.isNative=LY,Z.isNil=FY,Z.isNull=BY,Z.isNumber=fA,Z.isObject=ts,Z.isObjectLike=rs,Z.isPlainObject=op,Z.isRegExp=A2,Z.isSafeInteger=NY,Z.isSet=mA,Z.isString=K0,Z.isSymbol=ro,Z.isTypedArray=ef,Z.isUndefined=VY,Z.isWeakMap=DY,Z.isWeakSet=$Y,Z.join=UK,Z.kebabCase=IZ,Z.last=zo,Z.lastIndexOf=WK,Z.lowerCase=RZ,Z.lowerFirst=MZ,Z.lt=zY,Z.lte=HY,Z.max=SX,Z.maxBy=TX,Z.mean=xX,Z.meanBy=AX,Z.min=IX,Z.minBy=RX,Z.stubArray=F2,Z.stubFalse=N2,Z.stubObject=pX,Z.stubString=gX,Z.stubTrue=vX,Z.multiply=MX,Z.nth=jK,Z.noConflict=aX,Z.noop=B2,Z.now=U0,Z.pad=PZ,Z.padEnd=OZ,Z.padStart=LZ,Z.parseInt=BZ,Z.random=EZ,Z.reduce=GG,Z.reduceRight=YG,Z.repeat=FZ,Z.replace=NZ,Z.result=mZ,Z.round=PX,Z.runInContext=Ie,Z.sample=XG,Z.size=eY,Z.snakeCase=VZ,Z.some=tY,Z.sortedIndex=JK,Z.sortedIndexBy=QK,Z.sortedIndexOf=eG,Z.sortedLastIndex=tG,Z.sortedLastIndexBy=nG,Z.sortedLastIndexOf=iG,Z.startCase=$Z,Z.startsWith=zZ,Z.subtract=OX,Z.sum=LX,Z.sumBy=BX,Z.template=HZ,Z.times=bX,Z.toFinite=$l,Z.toInteger=xn,Z.toLength=gA,Z.toLower=UZ,Z.toNumber=Ho,Z.toSafeInteger=UY,Z.toString=ci,Z.toUpper=WZ,Z.trim=jZ,Z.trimEnd=qZ,Z.trimStart=KZ,Z.truncate=GZ,Z.unescape=YZ,Z.uniqueId=wX,Z.upperCase=ZZ,Z.upperFirst=M2,Z.each=nA,Z.eachRight=iA,Z.first=Jx,L2(Z,function(){var h={};return Ja(Z,function(g,C){pi.call(Z.prototype,C)||(h[C]=g)}),h}(),{chain:!1}),Z.VERSION=i,Fo(["bind","bindKey","curry","curryRight","partial","partialRight"],function(h){Z[h].placeholder=Z}),Fo(["drop","take"],function(h,g){Un.prototype[h]=function(C){C=C===e?1:Rs(xn(C),0);var N=this.__filtered__&&!g?new Un(this):this.clone();return N.__filtered__?N.__takeCount__=er(C,N.__takeCount__):N.__views__.push({size:er(C,V),type:h+(N.__dir__<0?"Right":"")}),N},Un.prototype[h+"Right"]=function(C){return this.reverse()[h](C).reverse()}}),Fo(["filter","map","takeWhile"],function(h,g){var C=g+1,N=C==F||C==z;Un.prototype[h]=function(j){var Q=this.clone();return Q.__iteratees__.push({iteratee:ln(j,3),type:C}),Q.__filtered__=Q.__filtered__||N,Q}}),Fo(["head","last"],function(h,g){var C="take"+(g?"Right":"");Un.prototype[h]=function(){return this[C](1).value()[0]}}),Fo(["initial","tail"],function(h,g){var C="drop"+(g?"":"Right");Un.prototype[h]=function(){return this.__filtered__?new Un(this):this[C](1)}}),Un.prototype.compact=function(){return this.filter(Lr)},Un.prototype.find=function(h){return this.filter(h).head()},Un.prototype.findLast=function(h){return this.reverse().find(h)},Un.prototype.invokeMap=Fn(function(h,g){return typeof h=="function"?new Un(this):this.map(function(C){return ep(C,h,g)})}),Un.prototype.reject=function(h){return this.filter(j0(ln(h)))},Un.prototype.slice=function(h,g){h=xn(h);var C=this;return C.__filtered__&&(h>0||g<0)?new Un(C):(h<0?C=C.takeRight(-h):h&&(C=C.drop(h)),g!==e&&(g=xn(g),C=g<0?C.dropRight(-g):C.take(g-h)),C)},Un.prototype.takeRightWhile=function(h){return this.reverse().takeWhile(h).reverse()},Un.prototype.toArray=function(){return this.take(V)},Ja(Un.prototype,function(h,g){var C=/^(?:filter|find|map|reject)|While$/.test(g),N=/^(?:head|last)$/.test(g),j=Z[N?"take"+(g=="last"?"Right":""):g],Q=N||/^find/.test(g);j&&(Z.prototype[g]=function(){var ce=this.__wrapped__,ye=N?[1]:arguments,Oe=ce instanceof Un,dt=ye[0],ft=Oe||wn(ce),bt=function(Vn){var Kn=j.apply(Z,Hc([Vn],ye));return N&&Vt?Kn[0]:Kn};ft&&C&&typeof dt=="function"&&dt.length!=1&&(Oe=ft=!1);var Vt=this.__chain__,Gt=!!this.__actions__.length,cn=Q&&!Vt,In=Oe&&!Gt;if(!Q&&ft){ce=In?ce:new Un(this);var un=h.apply(ce,ye);return un.__actions__.push({func:z0,args:[bt],thisArg:e}),new Vo(un,Vt)}return cn&&In?h.apply(this,ye):(un=this.thru(bt),cn?N?un.value()[0]:un.value():un)})}),Fo(["pop","push","shift","sort","splice","unshift"],function(h){var g=f0[h],C=/^(?:push|sort|unshift)$/.test(h)?"tap":"thru",N=/^(?:pop|shift)$/.test(h);Z.prototype[h]=function(){var j=arguments;if(N&&!this.__chain__){var Q=this.value();return g.apply(wn(Q)?Q:[],j)}return this[C](function(ce){return g.apply(wn(ce)?ce:[],j)})}}),Ja(Un.prototype,function(h,g){var C=Z[g];if(C){var N=C.name+"";pi.call(Yh,N)||(Yh[N]=[]),Yh[N].push({name:g,func:C})}}),Yh[L0(e,_).name]=[{name:"wrapper",func:e}],Un.prototype.clone=Yj,Un.prototype.reverse=Zj,Un.prototype.value=Xj,Z.prototype.at=TG,Z.prototype.chain=xG,Z.prototype.commit=AG,Z.prototype.next=IG,Z.prototype.plant=MG,Z.prototype.reverse=PG,Z.prototype.toJSON=Z.prototype.valueOf=Z.prototype.value=OG,Z.prototype.first=Z.prototype.head,Km&&(Z.prototype[Km]=RG),Z},qh=Aj();sd?((sd.exports=qh)._=qh,Oy._=qh):js._=qh}).call(dp)})(b_,b_.exports);var v0e=b_.exports;const b0e=ot("div",{class:"el-upload__tip"}," Only one .docx file can be uploaded. ",-1),_0e={class:"uploaded-files"},w0e={filters:{capitalize(t){return t?t.charAt(0).toUpperCase()+t.slice(1):""}}},y0e=pt({...w0e,__name:"upload_clauses",setup(t){const n="selectedGroup",e="junior",i=JSON.parse(localStorage.getItem("delegate")||"null"),s=Se((i==null?void 0:i.committee)||localStorage.getItem(n)||e),r=Se(),o=Se([]),a=Se([]),l=Se(`http://127.0.0.1:8000/upload/${s.value}`),c=async()=>{try{const m=await hi.get(`http://127.0.0.1:8000/files/${s.value}`);a.value=m.data}catch{vl.error("Failed to fetch uploaded files")}},u=(m,v)=>{v.length>1?o.value=[m]:o.value=v},d=()=>{o.value.length===0?vl({message:"Please select a file before uploading!",type:"warning"}):r.value.submit()},f=()=>{vl.success("File uploaded successfully!"),c()},p=m=>`/clauses_upload/view/${s.value}/${m}`;return Dt(s,m=>{l.value=`http://127.0.0.1:8000/upload/${m}`,localStorage.setItem(n,m),c()}),ri(()=>{c()}),(m,v)=>{const y=bE,_=vE,b=z1,E=upe,x=efe,A=ns("router-link");return ve(),it("div",null,[et(_,{modelValue:s.value,"onUpdate:modelValue":v[0]||(v[0]=I=>s.value=I),placeholder:"Select Group",onChange:c},{default:Je(()=>[et(y,{label:"Junior",value:"junior"}),et(y,{label:"Senior",value:"senior"}),et(y,{label:"Security Council",value:"security council"})]),_:1},8,["modelValue"]),et(E,{ref_key:"uploadRef",ref:r,class:"upload-demo",action:l.value,"auto-upload":!1,accept:".docx","on-change":u,"file-list":o.value,onSuccess:f},{trigger:Je(()=>[et(b,{type:"primary"},{default:Je(()=>[Rn("Select file")]),_:1})]),tip:Je(()=>[b0e]),default:Je(()=>[et(b,{class:"ml-3",type:"success",onClick:d},{default:Je(()=>[Rn(" Upload to server ")]),_:1})]),_:1},8,["action","file-list"]),ot("div",_0e,[ot("h3",null,"Uploaded Files for "+vn(H(v0e.capitalize)(s.value))+":",1),ot("ul",null,[(ve(!0),it(Wn,null,Fu(a.value,I=>(ve(),it("li",{key:I},[et(A,{to:p(I)},{default:Je(()=>[et(x,{type:"primary"},{default:Je(()=>[Rn(vn(I),1)]),_:2},1024)]),_:2},1032,["to"])]))),128))])])])}}});/*! @license DOMPurify 3.1.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.6/LICENSE */const{entries:DN,setPrototypeOf:O9,isFrozen:C0e,getPrototypeOf:k0e,getOwnPropertyDescriptor:E0e}=Object;let{freeze:Tr,seal:ua,create:$N}=Object,{apply:OC,construct:LC}=typeof Reflect<"u"&&Reflect;Tr||(Tr=function(n){return n});ua||(ua=function(n){return n});OC||(OC=function(n,e,i){return n.apply(e,i)});LC||(LC=function(n,e){return new n(...e)});const mv=xo(Array.prototype.forEach),L9=xo(Array.prototype.pop),mp=xo(Array.prototype.push),Tb=xo(String.prototype.toLowerCase),p5=xo(String.prototype.toString),B9=xo(String.prototype.match),pp=xo(String.prototype.replace),S0e=xo(String.prototype.indexOf),T0e=xo(String.prototype.trim),Ca=xo(Object.prototype.hasOwnProperty),wr=xo(RegExp.prototype.test),gp=x0e(TypeError);function xo(t){return function(n){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];return OC(t,n,i)}}function x0e(t){return function(){for(var n=arguments.length,e=new Array(n),i=0;i<n;i++)e[i]=arguments[i];return LC(t,e)}}function Dn(t,n){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Tb;O9&&O9(t,null);let i=n.length;for(;i--;){let s=n[i];if(typeof s=="string"){const r=e(s);r!==s&&(C0e(n)||(n[i]=r),s=r)}t[s]=!0}return t}function A0e(t){for(let n=0;n<t.length;n++)Ca(t,n)||(t[n]=null);return t}function Bd(t){const n=$N(null);for(const[e,i]of DN(t))Ca(t,e)&&(Array.isArray(i)?n[e]=A0e(i):i&&typeof i=="object"&&i.constructor===Object?n[e]=Bd(i):n[e]=i);return n}function vp(t,n){for(;t!==null;){const i=E0e(t,n);if(i){if(i.get)return xo(i.get);if(typeof i.value=="function")return xo(i.value)}t=k0e(t)}function e(){return null}return e}const F9=Tr(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),g5=Tr(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),v5=Tr(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),I0e=Tr(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),b5=Tr(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),R0e=Tr(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),N9=Tr(["#text"]),V9=Tr(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),_5=Tr(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),D9=Tr(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),pv=Tr(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),M0e=ua(/\{\{[\w\W]*|[\w\W]*\}\}/gm),P0e=ua(/<%[\w\W]*|[\w\W]*%>/gm),O0e=ua(/\${[\w\W]*}/gm),L0e=ua(/^data-[\-\w.\u00B7-\uFFFF]/),B0e=ua(/^aria-[\-\w]+$/),zN=ua(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),F0e=ua(/^(?:\w+script|data):/i),N0e=ua(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),HN=ua(/^html$/i),V0e=ua(/^[a-z][.\w]*(-[.\w]+)+$/i);var $9=Object.freeze({__proto__:null,MUSTACHE_EXPR:M0e,ERB_EXPR:P0e,TMPLIT_EXPR:O0e,DATA_ATTR:L0e,ARIA_ATTR:B0e,IS_ALLOWED_URI:zN,IS_SCRIPT_OR_DATA:F0e,ATTR_WHITESPACE:N0e,DOCTYPE_NAME:HN,CUSTOM_ELEMENT:V0e});const bp={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},D0e=function(){return typeof window>"u"?null:window},$0e=function(n,e){if(typeof n!="object"||typeof n.createPolicy!="function")return null;let i=null;const s="data-tt-policy-suffix";e&&e.hasAttribute(s)&&(i=e.getAttribute(s));const r="dompurify"+(i?"#"+i:"");try{return n.createPolicy(r,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+r+" could not be created."),null}};function UN(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:D0e();const n=Ot=>UN(Ot);if(n.version="3.1.6",n.removed=[],!t||!t.document||t.document.nodeType!==bp.document)return n.isSupported=!1,n;let{document:e}=t;const i=e,s=i.currentScript,{DocumentFragment:r,HTMLTemplateElement:o,Node:a,Element:l,NodeFilter:c,NamedNodeMap:u=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:d,DOMParser:f,trustedTypes:p}=t,m=l.prototype,v=vp(m,"cloneNode"),y=vp(m,"remove"),_=vp(m,"nextSibling"),b=vp(m,"childNodes"),E=vp(m,"parentNode");if(typeof o=="function"){const Ot=e.createElement("template");Ot.content&&Ot.content.ownerDocument&&(e=Ot.content.ownerDocument)}let x,A="";const{implementation:I,createNodeIterator:k,createDocumentFragment:O,getElementsByTagName:M}=e,{importNode:T}=i;let P={};n.isSupported=typeof DN=="function"&&typeof E=="function"&&I&&I.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:R,ERB_EXPR:L,TMPLIT_EXPR:F,DATA_ATTR:B,ARIA_ATTR:z,IS_SCRIPT_OR_DATA:J,ATTR_WHITESPACE:q,CUSTOM_ELEMENT:G}=$9;let{IS_ALLOWED_URI:S}=$9,V=null;const re=Dn({},[...F9,...g5,...v5,...b5,...N9]);let U=null;const Pe=Dn({},[...V9,..._5,...D9,...pv]);let Fe=Object.seal($N(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Ne=null,ne=null,me=!0,pe=!0,ge=!1,rt=!0,wt=!1,D=!0,$=!1,X=!1,le=!1,ie=!1,be=!1,Ae=!1,_e=!0,Ee=!1;const he="user-content-";let He=!0,ze=!1,de={},We=null;const ut=Dn({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Re=null;const je=Dn({},["audio","video","img","source","image","track"]);let ae=null;const Ue=Dn({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),W="http://www.w3.org/1998/Math/MathML",K="http://www.w3.org/2000/svg",te="http://www.w3.org/1999/xhtml";let oe=te,ue=!1,ee=null;const Ce=Dn({},[W,K,te],p5);let xe=null;const ke=["application/xhtml+xml","text/html"],Ge="text/html";let Te=null,Ke=null;const Le=e.createElement("form"),lt=function(we){return we instanceof RegExp||we instanceof Function},nt=function(){let we=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Ke&&Ke===we)){if((!we||typeof we!="object")&&(we={}),we=Bd(we),xe=ke.indexOf(we.PARSER_MEDIA_TYPE)===-1?Ge:we.PARSER_MEDIA_TYPE,Te=xe==="application/xhtml+xml"?p5:Tb,V=Ca(we,"ALLOWED_TAGS")?Dn({},we.ALLOWED_TAGS,Te):re,U=Ca(we,"ALLOWED_ATTR")?Dn({},we.ALLOWED_ATTR,Te):Pe,ee=Ca(we,"ALLOWED_NAMESPACES")?Dn({},we.ALLOWED_NAMESPACES,p5):Ce,ae=Ca(we,"ADD_URI_SAFE_ATTR")?Dn(Bd(Ue),we.ADD_URI_SAFE_ATTR,Te):Ue,Re=Ca(we,"ADD_DATA_URI_TAGS")?Dn(Bd(je),we.ADD_DATA_URI_TAGS,Te):je,We=Ca(we,"FORBID_CONTENTS")?Dn({},we.FORBID_CONTENTS,Te):ut,Ne=Ca(we,"FORBID_TAGS")?Dn({},we.FORBID_TAGS,Te):{},ne=Ca(we,"FORBID_ATTR")?Dn({},we.FORBID_ATTR,Te):{},de=Ca(we,"USE_PROFILES")?we.USE_PROFILES:!1,me=we.ALLOW_ARIA_ATTR!==!1,pe=we.ALLOW_DATA_ATTR!==!1,ge=we.ALLOW_UNKNOWN_PROTOCOLS||!1,rt=we.ALLOW_SELF_CLOSE_IN_ATTR!==!1,wt=we.SAFE_FOR_TEMPLATES||!1,D=we.SAFE_FOR_XML!==!1,$=we.WHOLE_DOCUMENT||!1,ie=we.RETURN_DOM||!1,be=we.RETURN_DOM_FRAGMENT||!1,Ae=we.RETURN_TRUSTED_TYPE||!1,le=we.FORCE_BODY||!1,_e=we.SANITIZE_DOM!==!1,Ee=we.SANITIZE_NAMED_PROPS||!1,He=we.KEEP_CONTENT!==!1,ze=we.IN_PLACE||!1,S=we.ALLOWED_URI_REGEXP||zN,oe=we.NAMESPACE||te,Fe=we.CUSTOM_ELEMENT_HANDLING||{},we.CUSTOM_ELEMENT_HANDLING&&lt(we.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Fe.tagNameCheck=we.CUSTOM_ELEMENT_HANDLING.tagNameCheck),we.CUSTOM_ELEMENT_HANDLING&&lt(we.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Fe.attributeNameCheck=we.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),we.CUSTOM_ELEMENT_HANDLING&&typeof we.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Fe.allowCustomizedBuiltInElements=we.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),wt&&(pe=!1),be&&(ie=!0),de&&(V=Dn({},N9),U=[],de.html===!0&&(Dn(V,F9),Dn(U,V9)),de.svg===!0&&(Dn(V,g5),Dn(U,_5),Dn(U,pv)),de.svgFilters===!0&&(Dn(V,v5),Dn(U,_5),Dn(U,pv)),de.mathMl===!0&&(Dn(V,b5),Dn(U,D9),Dn(U,pv))),we.ADD_TAGS&&(V===re&&(V=Bd(V)),Dn(V,we.ADD_TAGS,Te)),we.ADD_ATTR&&(U===Pe&&(U=Bd(U)),Dn(U,we.ADD_ATTR,Te)),we.ADD_URI_SAFE_ATTR&&Dn(ae,we.ADD_URI_SAFE_ATTR,Te),we.FORBID_CONTENTS&&(We===ut&&(We=Bd(We)),Dn(We,we.FORBID_CONTENTS,Te)),He&&(V["#text"]=!0),$&&Dn(V,["html","head","body"]),V.table&&(Dn(V,["tbody"]),delete Ne.tbody),we.TRUSTED_TYPES_POLICY){if(typeof we.TRUSTED_TYPES_POLICY.createHTML!="function")throw gp('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof we.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw gp('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');x=we.TRUSTED_TYPES_POLICY,A=x.createHTML("")}else x===void 0&&(x=$0e(p,s)),x!==null&&typeof A=="string"&&(A=x.createHTML(""));Tr&&Tr(we),Ke=we}},Mt=Dn({},["mi","mo","mn","ms","mtext"]),$e=Dn({},["foreignobject","annotation-xml"]),yt=Dn({},["title","style","font","a","script"]),qt=Dn({},[...g5,...v5,...I0e]),ct=Dn({},[...b5,...R0e]),Pt=function(we){let vt=E(we);(!vt||!vt.tagName)&&(vt={namespaceURI:oe,tagName:"template"});const Lt=Tb(we.tagName),En=Tb(vt.tagName);return ee[we.namespaceURI]?we.namespaceURI===K?vt.namespaceURI===te?Lt==="svg":vt.namespaceURI===W?Lt==="svg"&&(En==="annotation-xml"||Mt[En]):!!qt[Lt]:we.namespaceURI===W?vt.namespaceURI===te?Lt==="math":vt.namespaceURI===K?Lt==="math"&&$e[En]:!!ct[Lt]:we.namespaceURI===te?vt.namespaceURI===K&&!$e[En]||vt.namespaceURI===W&&!Mt[En]?!1:!ct[Lt]&&(yt[Lt]||!qt[Lt]):!!(xe==="application/xhtml+xml"&&ee[we.namespaceURI]):!1},st=function(we){mp(n.removed,{element:we});try{E(we).removeChild(we)}catch{y(we)}},zt=function(we,vt){try{mp(n.removed,{attribute:vt.getAttributeNode(we),from:vt})}catch{mp(n.removed,{attribute:null,from:vt})}if(vt.removeAttribute(we),we==="is"&&!U[we])if(ie||be)try{st(vt)}catch{}else try{vt.setAttribute(we,"")}catch{}},ni=function(we){let vt=null,Lt=null;if(le)we="<remove></remove>"+we;else{const Di=B9(we,/^[\r\n\t ]+/);Lt=Di&&Di[0]}xe==="application/xhtml+xml"&&oe===te&&(we='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+we+"</body></html>");const En=x?x.createHTML(we):we;if(oe===te)try{vt=new f().parseFromString(En,xe)}catch{}if(!vt||!vt.documentElement){vt=I.createDocument(oe,"template",null);try{vt.documentElement.innerHTML=ue?A:En}catch{}}const ji=vt.body||vt.documentElement;return we&&Lt&&ji.insertBefore(e.createTextNode(Lt),ji.childNodes[0]||null),oe===te?M.call(vt,$?"html":"body")[0]:$?vt.documentElement:ji},Ct=function(we){return k.call(we.ownerDocument||we,we,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},Jt=function(we){return we instanceof d&&(typeof we.nodeName!="string"||typeof we.textContent!="string"||typeof we.removeChild!="function"||!(we.attributes instanceof u)||typeof we.removeAttribute!="function"||typeof we.setAttribute!="function"||typeof we.namespaceURI!="string"||typeof we.insertBefore!="function"||typeof we.hasChildNodes!="function")},Me=function(we){return typeof a=="function"&&we instanceof a},ht=function(we,vt,Lt){P[we]&&mv(P[we],En=>{En.call(n,vt,Lt,Ke)})},Qt=function(we){let vt=null;if(ht("beforeSanitizeElements",we,null),Jt(we))return st(we),!0;const Lt=Te(we.nodeName);if(ht("uponSanitizeElement",we,{tagName:Lt,allowedTags:V}),we.hasChildNodes()&&!Me(we.firstElementChild)&&wr(/<[/\w]/g,we.innerHTML)&&wr(/<[/\w]/g,we.textContent)||we.nodeType===bp.progressingInstruction||D&&we.nodeType===bp.comment&&wr(/<[/\w]/g,we.data))return st(we),!0;if(!V[Lt]||Ne[Lt]){if(!Ne[Lt]&&Bn(Lt)&&(Fe.tagNameCheck instanceof RegExp&&wr(Fe.tagNameCheck,Lt)||Fe.tagNameCheck instanceof Function&&Fe.tagNameCheck(Lt)))return!1;if(He&&!We[Lt]){const En=E(we)||we.parentNode,ji=b(we)||we.childNodes;if(ji&&En){const Di=ji.length;for(let As=Di-1;As>=0;--As){const gr=v(ji[As],!0);gr.__removalCount=(we.__removalCount||0)+1,En.insertBefore(gr,_(we))}}}return st(we),!0}return we instanceof l&&!Pt(we)||(Lt==="noscript"||Lt==="noembed"||Lt==="noframes")&&wr(/<\/no(script|embed|frames)/i,we.innerHTML)?(st(we),!0):(wt&&we.nodeType===bp.text&&(vt=we.textContent,mv([R,L,F],En=>{vt=pp(vt,En," ")}),we.textContent!==vt&&(mp(n.removed,{element:we.cloneNode()}),we.textContent=vt)),ht("afterSanitizeElements",we,null),!1)},nn=function(we,vt,Lt){if(_e&&(vt==="id"||vt==="name")&&(Lt in e||Lt in Le))return!1;if(!(pe&&!ne[vt]&&wr(B,vt))){if(!(me&&wr(z,vt))){if(!U[vt]||ne[vt]){if(!(Bn(we)&&(Fe.tagNameCheck instanceof RegExp&&wr(Fe.tagNameCheck,we)||Fe.tagNameCheck instanceof Function&&Fe.tagNameCheck(we))&&(Fe.attributeNameCheck instanceof RegExp&&wr(Fe.attributeNameCheck,vt)||Fe.attributeNameCheck instanceof Function&&Fe.attributeNameCheck(vt))||vt==="is"&&Fe.allowCustomizedBuiltInElements&&(Fe.tagNameCheck instanceof RegExp&&wr(Fe.tagNameCheck,Lt)||Fe.tagNameCheck instanceof Function&&Fe.tagNameCheck(Lt))))return!1}else if(!ae[vt]){if(!wr(S,pp(Lt,q,""))){if(!((vt==="src"||vt==="xlink:href"||vt==="href")&&we!=="script"&&S0e(Lt,"data:")===0&&Re[we])){if(!(ge&&!wr(J,pp(Lt,q,"")))){if(Lt)return!1}}}}}}return!0},Bn=function(we){return we!=="annotation-xml"&&B9(we,G)},Vi=function(we){ht("beforeSanitizeAttributes",we,null);const{attributes:vt}=we;if(!vt)return;const Lt={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:U};let En=vt.length;for(;En--;){const ji=vt[En],{name:Di,namespaceURI:As,value:gr}=ji,Ga=Te(Di);let _n=Di==="value"?gr:T0e(gr);if(Lt.attrName=Ga,Lt.attrValue=_n,Lt.keepAttr=!0,Lt.forceKeepAttr=void 0,ht("uponSanitizeAttribute",we,Lt),_n=Lt.attrValue,D&&wr(/((--!?|])>)|<\/(style|title)/i,_n)){zt(Di,we);continue}if(Lt.forceKeepAttr||(zt(Di,we),!Lt.keepAttr))continue;if(!rt&&wr(/\/>/i,_n)){zt(Di,we);continue}wt&&mv([R,L,F],Dc=>{_n=pp(_n,Dc," ")});const Vc=Te(we.nodeName);if(nn(Vc,Ga,_n)){if(Ee&&(Ga==="id"||Ga==="name")&&(zt(Di,we),_n=he+_n),x&&typeof p=="object"&&typeof p.getAttributeType=="function"&&!As)switch(p.getAttributeType(Vc,Ga)){case"TrustedHTML":{_n=x.createHTML(_n);break}case"TrustedScriptURL":{_n=x.createScriptURL(_n);break}}try{As?we.setAttributeNS(As,Di,_n):we.setAttribute(Di,_n),Jt(we)?st(we):L9(n.removed)}catch{}}}ht("afterSanitizeAttributes",we,null)},ss=function Ot(we){let vt=null;const Lt=Ct(we);for(ht("beforeSanitizeShadowDOM",we,null);vt=Lt.nextNode();)ht("uponSanitizeShadowNode",vt,null),!Qt(vt)&&(vt.content instanceof r&&Ot(vt.content),Vi(vt));ht("afterSanitizeShadowDOM",we,null)};return n.sanitize=function(Ot){let we=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},vt=null,Lt=null,En=null,ji=null;if(ue=!Ot,ue&&(Ot="<!-->"),typeof Ot!="string"&&!Me(Ot))if(typeof Ot.toString=="function"){if(Ot=Ot.toString(),typeof Ot!="string")throw gp("dirty is not a string, aborting")}else throw gp("toString is not a function");if(!n.isSupported)return Ot;if(X||nt(we),n.removed=[],typeof Ot=="string"&&(ze=!1),ze){if(Ot.nodeName){const gr=Te(Ot.nodeName);if(!V[gr]||Ne[gr])throw gp("root node is forbidden and cannot be sanitized in-place")}}else if(Ot instanceof a)vt=ni("<!---->"),Lt=vt.ownerDocument.importNode(Ot,!0),Lt.nodeType===bp.element&&Lt.nodeName==="BODY"||Lt.nodeName==="HTML"?vt=Lt:vt.appendChild(Lt);else{if(!ie&&!wt&&!$&&Ot.indexOf("<")===-1)return x&&Ae?x.createHTML(Ot):Ot;if(vt=ni(Ot),!vt)return ie?null:Ae?A:""}vt&&le&&st(vt.firstChild);const Di=Ct(ze?Ot:vt);for(;En=Di.nextNode();)Qt(En)||(En.content instanceof r&&ss(En.content),Vi(En));if(ze)return Ot;if(ie){if(be)for(ji=O.call(vt.ownerDocument);vt.firstChild;)ji.appendChild(vt.firstChild);else ji=vt;return(U.shadowroot||U.shadowrootmode)&&(ji=T.call(i,ji,!0)),ji}let As=$?vt.outerHTML:vt.innerHTML;return $&&V["!doctype"]&&vt.ownerDocument&&vt.ownerDocument.doctype&&vt.ownerDocument.doctype.name&&wr(HN,vt.ownerDocument.doctype.name)&&(As="<!DOCTYPE "+vt.ownerDocument.doctype.name+`>
`+As),wt&&mv([R,L,F],gr=>{As=pp(As,gr," ")}),x&&Ae?x.createHTML(As):As},n.setConfig=function(){let Ot=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};nt(Ot),X=!0},n.clearConfig=function(){Ke=null,X=!1},n.isValidAttribute=function(Ot,we,vt){Ke||nt({});const Lt=Te(Ot),En=Te(we);return nn(Lt,En,vt)},n.addHook=function(Ot,we){typeof we=="function"&&(P[Ot]=P[Ot]||[],mp(P[Ot],we))},n.removeHook=function(Ot){if(P[Ot])return L9(P[Ot])},n.removeHooks=function(Ot){P[Ot]&&(P[Ot]=[])},n.removeAllHooks=function(){P={}},n}var BC=UN();const z0e={style:{height:"83vh"}},H0e={class:"header"},U0e=["innerHTML"],W0e=pt({__name:"document_viewer",setup(t){const n=Age(),e=mN(),i=n.params.group,s=n.params.filename,r=Se(""),o=se(()=>BC.sanitize(r.value)),a=()=>{e.push("/clauses_upload")};return ri(async()=>{try{const l=await hi.get(`http://127.0.0.1:8000/uploads/${i}/${s}`,{headers:{"Content-Type":"text/html"}});r.value=l.data}catch(l){vl.error("Failed to load document content."),console.error(l)}}),(l,c)=>{const u=z1;return ve(),it("div",z0e,[ot("div",H0e,[ot("h1",null,vn(H(s)),1),et(u,{type:"primary",onClick:a},{default:Je(()=>[Rn("Back")]),_:1})]),ot("div",{innerHTML:o.value,class:"document-content"},null,8,U0e)])}}}),j0e=Pc(W0e,[["__scopeId","data-v-09154914"]]);/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 *//**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let FC;try{FC={window,document}}catch{/* istanbul ignore next -- @preserve */FC={window:{},document:{}}}var $t=FC;function q0e(){try{return navigator.userAgent.toLowerCase()}catch{return""}}const vd=q0e(),sn={isMac:WN(vd),isWindows:K0e(vd),isGecko:G0e(vd),isSafari:Y0e(vd),isiOS:Z0e(vd),isAndroid:X0e(vd),isBlink:J0e(vd),get isMediaForcedColors(){return eve()},get isMotionReduced(){return tve()},features:{isRegExpUnicodePropertySupported:Q0e()}};function WN(t){return t.indexOf("macintosh")>-1}function K0e(t){return t.indexOf("windows")>-1}function G0e(t){return!!t.match(/gecko\/\d+/)}function Y0e(t){return t.indexOf(" applewebkit/")>-1&&t.indexOf("chrome")===-1}function Z0e(t){return!!t.match(/iphone|ipad/i)||WN(t)&&navigator.maxTouchPoints>0}function X0e(t){return t.indexOf("android")>-1}function J0e(t){return t.indexOf("chrome/")>-1&&t.indexOf("edge/")<0}function Q0e(){let t=!1;try{t="ć".search(new RegExp("[\\p{L}]","u"))===0}catch{}return t}function eve(){return $t.window.matchMedia?$t.window.matchMedia("(forced-colors: active)").matches:!1}function tve(){return $t.window.matchMedia?$t.window.matchMedia("(prefers-reduced-motion)").matches:!1}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function jN(t,n,e,i){e=e||function(l,c){return l===c};const s=Array.isArray(t)?t:Array.prototype.slice.call(t),r=Array.isArray(n)?n:Array.prototype.slice.call(n),o=nve(s,r,e);return i?sve(o,r.length):ive(r,o)}function nve(t,n,e){const i=z9(t,n,e);if(i===-1)return{firstIndex:-1,lastIndexOld:-1,lastIndexNew:-1};const s=H9(t,i),r=H9(n,i),o=z9(s,r,e),a=t.length-o,l=n.length-o;return{firstIndex:i,lastIndexOld:a,lastIndexNew:l}}function z9(t,n,e){for(let i=0;i<Math.max(t.length,n.length);i++)if(t[i]===void 0||n[i]===void 0||!e(t[i],n[i]))return i;return-1}function H9(t,n){return t.slice(n).reverse()}function ive(t,n){const e=[],{firstIndex:i,lastIndexOld:s,lastIndexNew:r}=n;return r-i>0&&e.push({index:i,type:"insert",values:t.slice(i,r)}),s-i>0&&e.push({index:i+(r-i),type:"delete",howMany:s-i}),e}function sve(t,n){const{firstIndex:e,lastIndexOld:i,lastIndexNew:s}=t;if(e===-1)return Array(n).fill("equal");let r=[];return e>0&&(r=r.concat(Array(e).fill("equal"))),s-e>0&&(r=r.concat(Array(s-e).fill("insert"))),i-e>0&&(r=r.concat(Array(i-e).fill("delete"))),s<n&&(r=r.concat(Array(n-s).fill("equal"))),r}function vg(t,n,e){e=e||function(v,y){return v===y};const i=t.length,s=n.length;if(i>200||s>200||i+s>300)return vg.fastDiff(t,n,e,!0);let r,o;if(s<i){const v=t;t=n,n=v,r="delete",o="insert"}else r="insert",o="delete";const a=t.length,l=n.length,c=l-a,u={},d={};function f(v){const y=(d[v-1]!==void 0?d[v-1]:-1)+1,_=d[v+1]!==void 0?d[v+1]:-1,b=y>_?-1:1;u[v+b]&&(u[v]=u[v+b].slice(0)),u[v]||(u[v]=[]),u[v].push(y>_?r:o);let E=Math.max(y,_),x=E-v;for(;x<a&&E<l&&e(t[x],n[E]);)x++,E++,u[v].push("equal");return E}let p=0,m;do{for(m=-p;m<c;m++)d[m]=f(m);for(m=c+p;m>c;m--)d[m]=f(m);d[c]=f(c),p++}while(d[c]!==l);return u[c].slice(1)}vg.fastDiff=jN;/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function U9(){return function t(){t.called=!0}}class vc{constructor(n,e){w(this,"source");w(this,"name");w(this,"path");w(this,"stop");w(this,"off");w(this,"return");this.source=n,this.name=e,this.path=[],this.stop=U9(),this.off=U9()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const nr=new Array(256).fill("").map((t,n)=>("0"+n.toString(16)).slice(-2));function to(){const t=Math.random()*4294967296>>>0,n=Math.random()*4294967296>>>0,e=Math.random()*4294967296>>>0,i=Math.random()*4294967296>>>0;return"e"+nr[t>>0&255]+nr[t>>8&255]+nr[t>>16&255]+nr[t>>24&255]+nr[n>>0&255]+nr[n>>8&255]+nr[n>>16&255]+nr[n>>24&255]+nr[e>>0&255]+nr[e>>8&255]+nr[e>>16&255]+nr[e>>24&255]+nr[i>>0&255]+nr[i>>8&255]+nr[i>>16&255]+nr[i>>24&255]}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Ru={get(t="normal"){return typeof t!="number"?this[t]||this.normal:t},highest:1e5,high:1e3,normal:0,low:-1e3,lowest:-1e5};function qN(t,n){const e=Ru.get(n.priority);for(let i=0;i<t.length;i++)if(Ru.get(t[i].priority)<e){t.splice(i,0,n);return}t.push(n)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const rve="https://ckeditor.com/docs/ckeditor5/latest/support/error-codes.html";class fe extends Error{constructor(e,i,s){super(ove(e,s));w(this,"context");w(this,"data");this.name="CKEditorError",this.context=i,this.data=s}is(e){return e==="CKEditorError"}static rethrowUnexpectedError(e,i){if(e.is&&e.is("CKEditorError"))throw e;const s=new fe(e.message,i);throw s.stack=e.stack,s}}function qn(t,n){console.warn(...ave(t,n))}function KN(t){return`
Read more: ${rve}#error-${t}`}function ove(t,n){const e=new WeakSet,s=n?` ${JSON.stringify(n,(o,a)=>{if(typeof a=="object"&&a!==null){if(e.has(a))return`[object ${a.constructor.name}]`;e.add(a)}return a})}`:"",r=KN(t);return t+s+r}function ave(t,n){const e=KN(t);return n?[t,n,e]:[t,e]}const lve="43.0.0",cve=new Date(2024,7,7);/* istanbul ignore next -- @preserve */if(globalThis.CKEDITOR_VERSION)throw new fe("ckeditor-duplicated-modules",null);globalThis.CKEDITOR_VERSION=lve;const _f=Symbol("listeningTo"),NC=Symbol("emitterId"),Wl=Symbol("delegations"),GN=Ti(Object);function Ti(t){if(!t)return GN;class n extends t{on(i,s,r){this.listenTo(this,i,s,r)}once(i,s,r){let o=!1;const a=(l,...c)=>{o||(o=!0,l.off(),s.call(this,l,...c))};this.listenTo(this,i,a,r)}off(i,s){this.stopListening(this,i,s)}listenTo(i,s,r,o={}){let a,l;this[_f]||(this[_f]={});const c=this[_f];w5(i)||YN(i);const u=w5(i);(a=c[u])||(a=c[u]={emitter:i,callbacks:{}}),(l=a.callbacks[s])||(l=a.callbacks[s]=[]),l.push(r),fve(this,i,s,r,o)}stopListening(i,s,r){const o=this[_f];let a=i&&w5(i);const l=o&&a?o[a]:void 0,c=l&&s?l.callbacks[s]:void 0;if(!(!o||i&&!l||s&&!c))if(r)y5(this,i,s,r),c.indexOf(r)!==-1&&(c.length===1?delete l.callbacks[s]:y5(this,i,s,r));else if(c){for(;r=c.pop();)y5(this,i,s,r);delete l.callbacks[s]}else if(l){for(s in l.callbacks)this.stopListening(i,s);delete o[a]}else{for(a in o)this.stopListening(o[a].emitter);delete this[_f]}}fire(i,...s){try{const r=i instanceof vc?i:new vc(this,i),o=r.name;let a=XN(this,o);if(r.path.push(this),a){const c=[r,...s];a=Array.from(a);for(let u=0;u<a.length&&(a[u].callback.apply(this,c),r.off.called&&(delete r.off.called,this._removeEventListener(o,a[u].callback)),!r.stop.called);u++);}const l=this[Wl];if(l){const c=l.get(o),u=l.get("*");c&&W9(c,r,s),u&&W9(u,r,s)}return r.return}catch(r){/* istanbul ignore next -- @preserve */fe.rethrowUnexpectedError(r,this)}}delegate(...i){return{to:(s,r)=>{this[Wl]||(this[Wl]=new Map),i.forEach(o=>{const a=this[Wl].get(o);a?a.set(s,r):this[Wl].set(o,new Map([[s,r]]))})}}}stopDelegating(i,s){if(this[Wl])if(!i)this[Wl].clear();else if(!s)this[Wl].delete(i);else{const r=this[Wl].get(i);r&&r.delete(s)}}_addEventListener(i,s,r){hve(this,i);const o=VC(this,i),a=Ru.get(r.priority),l={callback:s,priority:a};for(const c of o)qN(c,l)}_removeEventListener(i,s){const r=VC(this,i);for(const o of r)for(let a=0;a<o.length;a++)o[a].callback==s&&(o.splice(a,1),a--)}}return n}["on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(t=>{Ti[t]=GN.prototype[t]});function uve(t,n){const e=t[_f];return e&&e[n]?e[n].emitter:null}function YN(t,n){t[NC]||(t[NC]=n||to())}function w5(t){return t[NC]}function ZN(t){return t._events||Object.defineProperty(t,"_events",{value:{}}),t._events}function dve(){return{callbacks:[],childEvents:[]}}function hve(t,n){const e=ZN(t);if(e[n])return;let i=n,s=null;const r=[];for(;i!==""&&!e[i];)e[i]=dve(),r.push(e[i]),s&&e[i].childEvents.push(s),s=i,i=i.substr(0,i.lastIndexOf(":"));if(i!==""){for(const o of r)o.callbacks=e[i].callbacks.slice();e[i].childEvents.push(s)}}function VC(t,n){const e=ZN(t)[n];if(!e)return[];let i=[e.callbacks];for(let s=0;s<e.childEvents.length;s++){const r=VC(t,e.childEvents[s]);i=i.concat(r)}return i}function XN(t,n){let e;return!t._events||!(e=t._events[n])||!e.callbacks.length?n.indexOf(":")>-1?XN(t,n.substr(0,n.lastIndexOf(":"))):null:e.callbacks}function W9(t,n,e){for(let[i,s]of t){s?typeof s=="function"&&(s=s(n.name)):s=n.name;const r=new vc(n.source,s);r.path=[...n.path],i.fire(r,...e)}}function fve(t,n,e,i,s){n._addEventListener?n._addEventListener(e,i,s):t._addEventListener.call(n,e,i,s)}function y5(t,n,e,i){n._removeEventListener?n._removeEventListener(e,i):t._removeEventListener.call(n,e,i)}const bg=Symbol("observableProperties"),t1=Symbol("boundObservables"),_g=Symbol("boundProperties"),bd=Symbol("decoratedMethods"),j9=Symbol("decoratedOriginal"),JN=li(Ti());function li(t){var e,i,s,r,o;if(!t)return JN;class n extends(o=t,r=bg,s=bd,i=_g,e=t1,o){constructor(){super(...arguments);w(this,r);w(this,s);w(this,i);w(this,e)}set(c,u){if(Li(c)){Object.keys(c).forEach(f=>{this.set(f,c[f])},this);return}C5(this);const d=this[bg];if(c in this&&!d.has(c))throw new fe("observable-set-cannot-override",this);Object.defineProperty(this,c,{enumerable:!0,configurable:!0,get(){return d.get(c)},set(f){const p=d.get(c);let m=this.fire(`set:${c}`,c,f,p);m===void 0&&(m=f),(p!==m||!d.has(c))&&(d.set(c,m),this.fire(`change:${c}`,c,m,p))}}),this[c]=u}bind(...c){if(!c.length||!q9(c))throw new fe("observable-bind-wrong-properties",this);if(new Set(c).size!==c.length)throw new fe("observable-bind-duplicate-properties",this);C5(this);const u=this[_g];c.forEach(f=>{if(u.has(f))throw new fe("observable-bind-rebind",this)});const d=new Map;return c.forEach(f=>{const p={property:f,to:[]};u.set(f,p),d.set(f,p)}),{to:mve,toMany:pve,_observable:this,_bindProperties:c,_to:[],_bindings:d}}unbind(...c){if(!this[bg])return;const u=this[_g],d=this[t1];if(c.length){if(!q9(c))throw new fe("observable-unbind-wrong-properties",this);c.forEach(f=>{const p=u.get(f);p&&(p.to.forEach(([m,v])=>{const y=d.get(m),_=y[v];_.delete(p),_.size||delete y[v],Object.keys(y).length||(d.delete(m),this.stopListening(m,"change"))}),u.delete(f))})}else d.forEach((f,p)=>{this.stopListening(p,"change")}),d.clear(),u.clear()}decorate(c){C5(this);const u=this[c];if(!u)throw new fe("observablemixin-cannot-decorate-undefined",this,{object:this,methodName:c});this.on(c,(d,f)=>{d.return=u.apply(this,f)}),this[c]=function(...d){return this.fire(c,d)},this[c][j9]=u,this[bd]||(this[bd]=[]),this[bd].push(c)}stopListening(c,u,d){if(!c&&this[bd]){for(const f of this[bd])this[f]=this[f][j9];delete this[bd]}super.stopListening(c,u,d)}}return n}["set","bind","unbind","decorate","on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(t=>{li[t]=JN.prototype[t]});function C5(t){t[bg]||(Object.defineProperty(t,bg,{value:new Map}),Object.defineProperty(t,t1,{value:new Map}),Object.defineProperty(t,_g,{value:new Map}))}function mve(...t){const n=vve(...t),e=Array.from(this._bindings.keys()),i=e.length;if(!n.callback&&n.to.length>1)throw new fe("observable-bind-to-no-callback",this);if(i>1&&n.callback)throw new fe("observable-bind-to-extra-callback",this);n.to.forEach(s=>{if(s.properties.length&&s.properties.length!==i)throw new fe("observable-bind-to-properties-length",this);s.properties.length||(s.properties=this._bindProperties)}),this._to=n.to,n.callback&&(this._bindings.get(e[0]).callback=n.callback),wve(this._observable,this._to),_ve(this),this._bindProperties.forEach(s=>{QN(this._observable,s)})}function pve(t,n,e){if(this._bindings.size>1)throw new fe("observable-bind-to-many-not-one-binding",this);this.to(...gve(t,n),e)}function gve(t,n){const e=t.map(i=>[i,n]);return Array.prototype.concat.apply([],e)}function q9(t){return t.every(n=>typeof n=="string")}function vve(...t){if(!t.length)throw new fe("observable-bind-to-parse-error",null);const n={to:[]};let e;return typeof t[t.length-1]=="function"&&(n.callback=t.pop()),t.forEach(i=>{if(typeof i=="string")e.properties.push(i);else if(typeof i=="object")e={observable:i,properties:[]},n.to.push(e);else throw new fe("observable-bind-to-parse-error",null)}),n}function bve(t,n,e,i){const s=t[t1],r=s.get(e),o=r||{};o[i]||(o[i]=new Set),o[i].add(n),r||s.set(e,o)}function _ve(t){let n;t._bindings.forEach((e,i)=>{t._to.forEach(s=>{n=s.properties[e.callback?0:t._bindProperties.indexOf(i)],e.to.push([s.observable,n]),bve(t._observable,e,s.observable,n)})})}function QN(t,n){const i=t[_g].get(n);let s;i.callback?s=i.callback.apply(t,i.to.map(r=>r[0][r[1]])):(s=i.to[0],s=s[0][s[1]]),Object.prototype.hasOwnProperty.call(t,n)?t[n]=s:t.set(n,s)}function wve(t,n){n.forEach(e=>{const i=t[t1];let s;i.get(e.observable)||t.listenTo(e.observable,"change",(r,o)=>{s=i.get(e.observable)[o],s&&s.forEach(a=>{QN(t,a.property)})})})}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function DC(t){let n=0;for(const e of t)n++;return n}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function sr(t,n){const e=Math.min(t.length,n.length);for(let i=0;i<e;i++)if(t[i]!=n[i])return i;return t.length==n.length?"same":t.length<n.length?"prefix":"extension"}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Ao(t){return!!(t&&t[Symbol.iterator])}function ka(t,n,e={},i=[]){const s=e&&e.xmlns,r=s?t.createElementNS(s,n):t.createElement(n);for(const o in e)r.setAttribute(o,e[o]);(G6(i)||!Ao(i))&&(i=[i]);for(let o of i)G6(o)&&(o=t.createTextNode(o)),r.appendChild(o);return r}class eV{constructor(n,e){w(this,"_config");this._config={},e&&this.define(K9(e)),n&&this._setObjectToTarget(this._config,n)}set(n,e){this._setToTarget(this._config,n,e)}define(n,e){this._setToTarget(this._config,n,e,!0)}get(n){return this._getFromSource(this._config,n)}*names(){for(const n of Object.keys(this._config))yield n}_setToTarget(n,e,i,s=!1){if(po(e)){this._setObjectToTarget(n,e,s);return}const r=e.split(".");e=r.pop();for(const o of r)po(n[o])||(n[o]={}),n=n[o];if(po(i)){po(n[e])||(n[e]={}),n=n[e],this._setObjectToTarget(n,i,s);return}s&&typeof n[e]<"u"||(n[e]=i)}_getFromSource(n,e){const i=e.split(".");e=i.pop();for(const s of i){if(!po(n[s])){n=null;break}n=n[s]}return n?K9(n[e]):void 0}_setObjectToTarget(n,e,i){Object.keys(e).forEach(s=>{this._setToTarget(n,s,e[s],i)})}}function K9(t){return W4(t,yve)}function yve(t){return hh(t)||typeof t=="function"?t:void 0}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Du(t){if(t){if(t.defaultView)return t instanceof t.defaultView.Document;if(t.ownerDocument&&t.ownerDocument.defaultView)return t instanceof t.ownerDocument.defaultView.Node}return!1}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function __(t){const n=Object.prototype.toString.apply(t);return n=="[object Window]"||n=="[object global]"}const tV=Rr(Ti());function Rr(t){if(!t)return tV;class n extends t{listenTo(i,s,r,o={}){if(Du(i)||__(i)){const a={capture:!!o.useCapture,passive:!!o.usePassive},l=this._getProxyEmitter(i,a)||new Cve(i,a);this.listenTo(l,s,r,o)}else super.listenTo(i,s,r,o)}stopListening(i,s,r){if(Du(i)||__(i)){const o=this._getAllProxyEmitters(i);for(const a of o)this.stopListening(a,s,r)}else super.stopListening(i,s,r)}_getProxyEmitter(i,s){return uve(this,nV(i,s))}_getAllProxyEmitters(i){return[{capture:!1,passive:!1},{capture:!1,passive:!0},{capture:!0,passive:!1},{capture:!0,passive:!0}].map(s=>this._getProxyEmitter(i,s)).filter(s=>!!s)}}return n}["_getProxyEmitter","_getAllProxyEmitters","on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(t=>{Rr[t]=tV.prototype[t]});class Cve extends Ti(){constructor(e,i){super();w(this,"_domNode");w(this,"_options");w(this,"_domListeners");YN(this,nV(e,i)),this._domNode=e,this._options=i}attach(e){if(this._domListeners&&this._domListeners[e])return;const i=this._createDomListener(e);this._domNode.addEventListener(e,i,this._options),this._domListeners||(this._domListeners={}),this._domListeners[e]=i}detach(e){let i;this._domListeners[e]&&(!(i=this._events[e])||!i.callbacks.length)&&this._domListeners[e].removeListener()}_addEventListener(e,i,s){this.attach(e),Ti().prototype._addEventListener.call(this,e,i,s)}_removeEventListener(e,i){Ti().prototype._removeEventListener.call(this,e,i),this.detach(e)}_createDomListener(e){const i=s=>{this.fire(e,s)};return i.removeListener=()=>{this._domNode.removeEventListener(e,i,this._options),delete this._domListeners[e]},i}}function kve(t){return t["data-ck-expando"]||(t["data-ck-expando"]=to())}function nV(t,n){let e=kve(t);for(const i of Object.keys(n).sort())n[i]&&(e+="-"+i);return e}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Eve(t){const n=[];let e=t;for(;e&&e.nodeType!=Node.DOCUMENT_NODE;)n.unshift(e),e=e.parentNode;return n}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Sve(t){return t instanceof HTMLTextAreaElement?t.value:t.innerHTML}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function iV(t){const n=t.ownerDocument.defaultView.getComputedStyle(t);return{top:parseInt(n.borderTopWidth,10),right:parseInt(n.borderRightWidth,10),bottom:parseInt(n.borderBottomWidth,10),left:parseInt(n.borderLeftWidth,10)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function fs(t){return Object.prototype.toString.call(t)=="[object Text]"}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function $w(t){return Object.prototype.toString.apply(t)=="[object Range]"}function sV(t){return!t||!t.parentNode||t.offsetParent===$t.document.body?null:t.offsetParent}const rV=["top","right","bottom","left","width","height"];class mn{constructor(n){w(this,"top");w(this,"right");w(this,"bottom");w(this,"left");w(this,"width");w(this,"height");w(this,"_source");const e=$w(n);if(Object.defineProperty(this,"_source",{value:n._source||n,writable:!0,enumerable:!1}),$C(n)||e)if(e){const i=mn.getDomRangeRects(n);gv(this,mn.getBoundingRect(i))}else gv(this,n.getBoundingClientRect());else if(__(n)){const{innerWidth:i,innerHeight:s}=n;gv(this,{top:0,right:i,bottom:s,left:0,width:i,height:s})}else gv(this,n)}clone(){return new mn(this)}moveTo(n,e){return this.top=e,this.right=n+this.width,this.bottom=e+this.height,this.left=n,this}moveBy(n,e){return this.top+=e,this.right+=n,this.left+=n,this.bottom+=e,this}getIntersection(n){const e={top:Math.max(this.top,n.top),right:Math.min(this.right,n.right),bottom:Math.min(this.bottom,n.bottom),left:Math.max(this.left,n.left),width:0,height:0};if(e.width=e.right-e.left,e.height=e.bottom-e.top,e.width<0||e.height<0)return null;{const i=new mn(e);return i._source=this._source,i}}getIntersectionArea(n){const e=this.getIntersection(n);return e?e.getArea():0}getArea(){return this.width*this.height}getVisible(){const n=this._source;let e=this.clone();if(G9(n))return e;let i=n,s=n.parentNode||n.commonAncestorContainer,r;for(;s&&!G9(s);){const o=Tve(s)==="visible";i instanceof HTMLElement&&Y9(i)==="absolute"&&(r=i);const a=Y9(s);if(o||r&&(a==="relative"&&o||a!=="relative")){i=s,s=s.parentNode;continue}const l=new mn(s),c=e.getIntersection(l);if(c)c.getArea()<e.getArea()&&(e=c);else return null;i=s,s=s.parentNode}return e}isEqual(n){for(const e of rV)if(this[e]!==n[e])return!1;return!0}contains(n){const e=this.getIntersection(n);return!!(e&&e.isEqual(n))}toAbsoluteRect(){const{scrollX:n,scrollY:e}=$t.window,i=this.clone().moveBy(n,e);if($C(i._source)){const s=sV(i._source);s&&xve(i,s)}return i}excludeScrollbarsAndBorders(){const n=this._source;let e,i,s;if(__(n))e=n.innerWidth-n.document.documentElement.clientWidth,i=n.innerHeight-n.document.documentElement.clientHeight,s=n.getComputedStyle(n.document.documentElement).direction;else{const r=iV(n);e=n.offsetWidth-n.clientWidth-r.left-r.right,i=n.offsetHeight-n.clientHeight-r.top-r.bottom,s=n.ownerDocument.defaultView.getComputedStyle(n).direction,this.left+=r.left,this.top+=r.top,this.right-=r.right,this.bottom-=r.bottom,this.width=this.right-this.left,this.height=this.bottom-this.top}return this.width-=e,s==="ltr"?this.right-=e:this.left+=e,this.height-=i,this.bottom-=i,this}static getDomRangeRects(n){const e=[],i=Array.from(n.getClientRects());if(i.length)for(const s of i)e.push(new mn(s));else{let s=n.startContainer;fs(s)&&(s=s.parentNode);const r=new mn(s.getBoundingClientRect());r.right=r.left,r.width=0,e.push(r)}return e}static getBoundingRect(n){const e={left:Number.POSITIVE_INFINITY,top:Number.POSITIVE_INFINITY,right:Number.NEGATIVE_INFINITY,bottom:Number.NEGATIVE_INFINITY,width:0,height:0};let i=0;for(const s of n)i++,e.left=Math.min(e.left,s.left),e.top=Math.min(e.top,s.top),e.right=Math.max(e.right,s.right),e.bottom=Math.max(e.bottom,s.bottom);return i==0?null:(e.width=e.right-e.left,e.height=e.bottom-e.top,new mn(e))}}function gv(t,n){for(const e of rV)t[e]=n[e]}function G9(t){return $C(t)?t===t.ownerDocument.body:!1}function $C(t){return t!==null&&typeof t=="object"&&t.nodeType===1&&typeof t.getBoundingClientRect=="function"}function Y9(t){return t instanceof HTMLElement?t.ownerDocument.defaultView.getComputedStyle(t).position:"static"}function Tve(t){return t instanceof HTMLElement?t.ownerDocument.defaultView.getComputedStyle(t).overflow:"visible"}function xve(t,n){const e=new mn(n),i=iV(n);let s=0,r=0;s-=e.left,r-=e.top,s+=n.scrollLeft,r+=n.scrollTop,s-=i.left,r-=i.top,t.moveBy(s,r)}var Ri;let zw=(Ri=class{constructor(n,e){w(this,"_element");w(this,"_callback");Ri._observerInstance||Ri._createObserver(),this._element=n,this._callback=e,Ri._addElementCallback(n,e),Ri._observerInstance.observe(n)}get element(){return this._element}destroy(){Ri._deleteElementCallback(this._element,this._callback)}static _addElementCallback(n,e){Ri._elementCallbacks||(Ri._elementCallbacks=new Map);let i=Ri._elementCallbacks.get(n);i||(i=new Set,Ri._elementCallbacks.set(n,i)),i.add(e)}static _deleteElementCallback(n,e){const i=Ri._getElementCallbacks(n);i&&(i.delete(e),i.size||(Ri._elementCallbacks.delete(n),Ri._observerInstance.unobserve(n))),Ri._elementCallbacks&&!Ri._elementCallbacks.size&&(Ri._observerInstance=null,Ri._elementCallbacks=null)}static _getElementCallbacks(n){return Ri._elementCallbacks?Ri._elementCallbacks.get(n):null}static _createObserver(){Ri._observerInstance=new $t.window.ResizeObserver(n=>{for(const e of n){const i=Ri._getElementCallbacks(e.target);if(i)for(const s of i)s(e)}})}},w(Ri,"_observerInstance",null),w(Ri,"_elementCallbacks",null),Ri);/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Z9(t,n){t instanceof HTMLTextAreaElement&&(t.value=n),t.innerHTML=n}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function W1(t){return n=>n+t}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Hp(t){let n=0;for(;t.previousSibling;)t=t.previousSibling,n++;return n}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function oV(t,n,e){t.insertBefore(e,t.childNodes[n]||null)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function wg(t){return t&&t.nodeType===Node.COMMENT_NODE}function Ave(t){try{$t.document.createAttribute(t)}catch{return!1}return!0}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function bc(t){return!!(t&&t.getClientRects&&t.getClientRects().length)}function IE({element:t,target:n,positions:e,limiter:i,fitInViewport:s,viewportOffsetConfig:r}){Hg(n)&&(n=n()),Hg(i)&&(i=i());const o=sV(t),a=Ive(r),l=new mn(t),c=X9(n,a);let u;if(!c||!a.getIntersection(c))return null;const d={targetRect:c,elementRect:l,positionedElementAncestor:o,viewportRect:a};if(!i&&!s)u=new aV(e[0],d);else{if(i){const f=X9(i,a);f&&(d.limiterRect=f)}u=Rve(e,d)}return u}function X9(t,n){const e=new mn(t).getVisible();return e?e.getIntersection(n):null}function Ive(t){t=Object.assign({top:0,bottom:0,left:0,right:0},t);const n=new mn($t.window);return n.top+=t.top,n.height-=t.top,n.bottom-=t.bottom,n.height-=t.bottom,n}function Rve(t,n){const{elementRect:e}=n,i=e.getArea(),s=t.map(a=>new aV(a,n)).filter(a=>!!a.name);let r=0,o=null;for(const a of s){const{limiterIntersectionArea:l,viewportIntersectionArea:c}=a;if(l===i)return a;const u=c**2+l**2;u>r&&(r=u,o=a)}return o}class aV{constructor(n,e){w(this,"name");w(this,"config");w(this,"_positioningFunctionCoordinates");w(this,"_options");w(this,"_cachedRect");w(this,"_cachedAbsoluteRect");const i=n(e.targetRect,e.elementRect,e.viewportRect,e.limiterRect);if(!i)return;const{left:s,top:r,name:o,config:a}=i;this.name=o,this.config=a,this._positioningFunctionCoordinates={left:s,top:r},this._options=e}get left(){return this._absoluteRect.left}get top(){return this._absoluteRect.top}get limiterIntersectionArea(){const n=this._options.limiterRect;return n?n.getIntersectionArea(this._rect):0}get viewportIntersectionArea(){return this._options.viewportRect.getIntersectionArea(this._rect)}get _rect(){return this._cachedRect?this._cachedRect:(this._cachedRect=this._options.elementRect.clone().moveTo(this._positioningFunctionCoordinates.left,this._positioningFunctionCoordinates.top),this._cachedRect)}get _absoluteRect(){return this._cachedAbsoluteRect?this._cachedAbsoluteRect:(this._cachedAbsoluteRect=this._rect.toAbsoluteRect(),this._cachedAbsoluteRect)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function J9(t){const n=t.parentNode;n&&n.removeChild(t)}function lV({target:t,viewportOffset:n=0,ancestorOffset:e=0,alignToTop:i,forceScroll:s}){const r=RE(t);let o=r,a=null;for(n=Ove(n);o;){let l;o==r?l=Q9(t):l=Q9(a),Pve({parent:l,getRect:()=>eI(t,o),alignToTop:i,ancestorOffset:e,forceScroll:s});const c=eI(t,o);if(Mve({window:o,rect:c,viewportOffset:n,alignToTop:i,forceScroll:s}),o.parent!=o){if(a=o.frameElement,o=o.parent,!a)return}else o=null}}function Mve({window:t,rect:n,alignToTop:e,forceScroll:i,viewportOffset:s}){const r=n.clone().moveBy(0,s.bottom),o=n.clone().moveBy(0,-s.top),a=new mn(t).excludeScrollbarsAndBorders(),l=[o,r],c=e&&i,u=l.every(v=>a.contains(v));let{scrollX:d,scrollY:f}=t;const p=d,m=f;c?f-=a.top-n.top+s.top:u||(uV(o,a)?f-=a.top-n.top+s.top:cV(r,a)&&(e?f+=n.top-a.top-s.top:f+=n.bottom-a.bottom+s.bottom)),u||(dV(n,a)?d-=a.left-n.left+s.left:hV(n,a)&&(d+=n.right-a.right+s.right)),(d!=p||f!==m)&&t.scrollTo(d,f)}function Pve({parent:t,getRect:n,alignToTop:e,forceScroll:i,ancestorOffset:s=0,limiterElement:r}){const o=RE(t),a=e&&i;let l,c,u;const d=r||o.document.body;for(;t!=d;)c=n(),l=new mn(t).excludeScrollbarsAndBorders(),u=l.contains(c),a?t.scrollTop-=l.top-c.top+s:u||(uV(c,l)?t.scrollTop-=l.top-c.top+s:cV(c,l)&&(e?t.scrollTop+=c.top-l.top-s:t.scrollTop+=c.bottom-l.bottom+s)),u||(dV(c,l)?t.scrollLeft-=l.left-c.left+s:hV(c,l)&&(t.scrollLeft+=c.right-l.right+s)),t=t.parentNode}function cV(t,n){return t.bottom>n.bottom}function uV(t,n){return t.top<n.top}function dV(t,n){return t.left<n.left}function hV(t,n){return t.right>n.right}function RE(t){return $w(t)?t.startContainer.ownerDocument.defaultView:t.ownerDocument.defaultView}function Q9(t){if($w(t)){let n=t.commonAncestorContainer;return fs(n)&&(n=n.parentNode),n}else return t.parentNode}function eI(t,n){const e=RE(t),i=new mn(t);if(e===n)return i;{let s=e;for(;s!=n;){const r=s.frameElement,o=new mn(r).excludeScrollbarsAndBorders();i.moveBy(o.left,o.top),s=s.parent}}return i}function Ove(t){return typeof t=="number"?{top:t,bottom:t,left:t,right:t}:t}const Lve={ctrl:"⌃",cmd:"⌘",alt:"⌥",shift:"⇧"},Bve={ctrl:"Ctrl+",alt:"Alt+",shift:"Shift+"},tI={37:"←",38:"↑",39:"→",40:"↓",9:"⇥",33:"Page Up",34:"Page Down"},Cn=$ve(),Fve=Object.fromEntries(Object.entries(Cn).map(([t,n])=>{let e;return n in tI?e=tI[n]:e=t.charAt(0).toUpperCase()+t.slice(1),[n,e]}));function vh(t){let n;if(typeof t=="string"){if(n=Cn[t.toLowerCase()],!n)throw new fe("keyboard-unknown-key",null,{key:t})}else n=t.keyCode+(t.altKey?Cn.alt:0)+(t.ctrlKey?Cn.ctrl:0)+(t.shiftKey?Cn.shift:0)+(t.metaKey?Cn.cmd:0);return n}function Hw(t){return typeof t=="string"&&(t=zve(t)),t.map(n=>typeof n=="string"?Vve(n):n).reduce((n,e)=>e+n,0)}function w_(t){let n=Hw(t);return Object.entries(sn.isMac||sn.isiOS?Lve:Bve).reduce((s,[r,o])=>(n&Cn[r]&&(n&=~Cn[r],s+=o),s),"")+(n?Fve[n]:"")}function Nve(t){return t==Cn.arrowright||t==Cn.arrowleft||t==Cn.arrowup||t==Cn.arrowdown}function Uw(t,n){const e=n==="ltr";switch(t){case Cn.arrowleft:return e?"left":"right";case Cn.arrowright:return e?"right":"left";case Cn.arrowup:return"up";case Cn.arrowdown:return"down"}}function Vve(t){if(t.endsWith("!"))return vh(t.slice(0,-1));const n=vh(t);return(sn.isMac||sn.isiOS)&&n==Cn.ctrl?Cn.cmd:n}function Dve(t,n){const e=Uw(t,n);return e==="down"||e==="right"}function $ve(){const t={pageup:33,pagedown:34,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,backspace:8,delete:46,enter:13,space:32,esc:27,tab:9,ctrl:1114112,shift:2228224,alt:4456448,cmd:8912896};for(let n=65;n<=90;n++){const e=String.fromCharCode(n);t[e.toLowerCase()]=n}for(let n=48;n<=57;n++)t[n-48]=n;for(let n=112;n<=123;n++)t["f"+(n-111)]=n;return Object.assign(t,{"'":222,",":108,"-":109,".":110,"/":111,";":186,"=":187,"[":219,"\\":220,"]":221,"`":223}),t}function zve(t){return t.split("+").map(n=>n.trim())}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Hve=["ar","ara","dv","div","fa","per","fas","he","heb","ku","kur","ug","uig"];function nI(t){return Hve.includes(t)?"rtl":"ltr"}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Si(t){return Array.isArray(t)?t:[t]}/* istanbul ignore else -- @preserve */$t.window.CKEDITOR_TRANSLATIONS||($t.window.CKEDITOR_TRANSLATIONS={});function Uve(t,n,e=1,i){if(typeof e!="number")throw new fe("translation-service-quantity-not-a-number",null,{quantity:e});const s=i||$t.window.CKEDITOR_TRANSLATIONS,r=qve(s);r===1&&(t=Object.keys(s)[0]);const o=n.id||n.string;if(r===0||!jve(t,o,s))return e!==1?n.plural:n.string;const a=s[t].dictionary,l=s[t].getPluralForm||(d=>d===1?0:1),c=a[o];if(typeof c=="string")return c;const u=Number(l(e));return c[u]}function Wve(t){return Array.isArray(t)?t.reduce((n,e)=>Cw(n,e)):t}function jve(t,n,e){return!!e[t]&&!!e[t].dictionary[n]}function qve(t){return Object.keys(t).length}class Kve{constructor({uiLanguage:n="en",contentLanguage:e,translations:i}={}){w(this,"uiLanguage");w(this,"uiLanguageDirection");w(this,"contentLanguage");w(this,"contentLanguageDirection");w(this,"t");w(this,"translations");this.uiLanguage=n,this.contentLanguage=e||this.uiLanguage,this.uiLanguageDirection=nI(this.uiLanguage),this.contentLanguageDirection=nI(this.contentLanguage),this.translations=Wve(i),this.t=(s,r)=>this._t(s,r)}get language(){return console.warn("locale-deprecated-language-property: The Locale#language property has been deprecated and will be removed in the near future. Please use #uiLanguage and #contentLanguage properties instead."),this.uiLanguage}_t(n,e=[]){e=Si(e),typeof n=="string"&&(n={string:n});const s=!!n.plural?e[0]:1,r=Uve(this.uiLanguage,n,s,this.translations);return Gve(r,e)}}function Gve(t,n){return t.replace(/%(\d+)/g,(e,i)=>i<n.length?n[i]:e)}class _s extends Ti(){constructor(e={},i={}){super();w(this,"_items");w(this,"_itemMap");w(this,"_idProperty");w(this,"_bindToCollection");w(this,"_bindToExternalToInternalMap");w(this,"_bindToInternalToExternalMap");w(this,"_skippedIndexesFromExternal");const s=Ao(e);if(s||(i=e),this._items=[],this._itemMap=new Map,this._idProperty=i.idProperty||"id",this._bindToExternalToInternalMap=new WeakMap,this._bindToInternalToExternalMap=new WeakMap,this._skippedIndexesFromExternal=[],s)for(const r of e)this._items.push(r),this._itemMap.set(this._getItemIdBeforeAdding(r),r)}get length(){return this._items.length}get first(){return this._items[0]||null}get last(){return this._items[this.length-1]||null}add(e,i){return this.addMany([e],i)}addMany(e,i){if(i===void 0)i=this._items.length;else if(i>this._items.length||i<0)throw new fe("collection-add-item-invalid-index",this);let s=0;for(const r of e){const o=this._getItemIdBeforeAdding(r),a=i+s;this._items.splice(a,0,r),this._itemMap.set(o,r),this.fire("add",r,a),s++}return this.fire("change",{added:e,removed:[],index:i}),this}get(e){let i;if(typeof e=="string")i=this._itemMap.get(e);else if(typeof e=="number")i=this._items[e];else throw new fe("collection-get-invalid-arg",this);return i||null}has(e){if(typeof e=="string")return this._itemMap.has(e);{const i=this._idProperty,s=e[i];return s&&this._itemMap.has(s)}}getIndex(e){let i;return typeof e=="string"?i=this._itemMap.get(e):i=e,i?this._items.indexOf(i):-1}remove(e){const[i,s]=this._remove(e);return this.fire("change",{added:[],removed:[i],index:s}),i}map(e,i){return this._items.map(e,i)}forEach(e,i){this._items.forEach(e,i)}find(e,i){return this._items.find(e,i)}filter(e,i){return this._items.filter(e,i)}clear(){this._bindToCollection&&(this.stopListening(this._bindToCollection),this._bindToCollection=null);const e=Array.from(this._items);for(;this.length;)this._remove(0);this.fire("change",{added:[],removed:e,index:0})}bindTo(e){if(this._bindToCollection)throw new fe("collection-bind-to-rebind",this);return this._bindToCollection=e,{as:i=>{this._setUpBindToBinding(s=>new i(s))},using:i=>{typeof i=="function"?this._setUpBindToBinding(i):this._setUpBindToBinding(s=>s[i])}}}_setUpBindToBinding(e){const i=this._bindToCollection,s=(r,o,a)=>{const l=i._bindToCollection==this,c=i._bindToInternalToExternalMap.get(o);if(l&&c)this._bindToExternalToInternalMap.set(o,c),this._bindToInternalToExternalMap.set(c,o);else{const u=e(o);if(!u){this._skippedIndexesFromExternal.push(a);return}let d=a;for(const f of this._skippedIndexesFromExternal)a>f&&d--;for(const f of i._skippedIndexesFromExternal)d>=f&&d++;this._bindToExternalToInternalMap.set(o,u),this._bindToInternalToExternalMap.set(u,o),this.add(u,d);for(let f=0;f<i._skippedIndexesFromExternal.length;f++)d<=i._skippedIndexesFromExternal[f]&&i._skippedIndexesFromExternal[f]++}};for(const r of i)s(null,r,i.getIndex(r));this.listenTo(i,"add",s),this.listenTo(i,"remove",(r,o,a)=>{const l=this._bindToExternalToInternalMap.get(o);l&&this.remove(l),this._skippedIndexesFromExternal=this._skippedIndexesFromExternal.reduce((c,u)=>(a<u&&c.push(u-1),a>u&&c.push(u),c),[])})}_getItemIdBeforeAdding(e){const i=this._idProperty;let s;if(i in e){if(s=e[i],typeof s!="string")throw new fe("collection-add-invalid-id",this);if(this.get(s))throw new fe("collection-add-item-already-exists",this)}else e[i]=s=to();return s}_remove(e){let i,s,r,o=!1;const a=this._idProperty;if(typeof e=="string"?(s=e,r=this._itemMap.get(s),o=!r,r&&(i=this._items.indexOf(r))):typeof e=="number"?(i=e,r=this._items[i],o=!r,r&&(s=r[a])):(r=e,s=r[a],i=this._items.indexOf(r),o=i==-1||!this._itemMap.get(s)),o)throw new fe("collection-remove-404",this);this._items.splice(i,1),this._itemMap.delete(s);const l=this._bindToInternalToExternalMap.get(r);return this._bindToInternalToExternalMap.delete(r),this._bindToExternalToInternalMap.delete(l),this.fire("remove",r,i),[r,i]}[Symbol.iterator](){return this._items[Symbol.iterator]()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function bs(t){const n=t.next();return n.done?null:n.value}class Bi extends Rr(li()){constructor(){super();w(this,"_elements",new Set);w(this,"_nextEventLoopTimeout",null);this.set("isFocused",!1),this.set("focusedElement",null)}add(e){if(this._elements.has(e))throw new fe("focustracker-add-element-already-exist",this);this.listenTo(e,"focus",()=>this._focus(e),{useCapture:!0}),this.listenTo(e,"blur",()=>this._blur(),{useCapture:!0}),this._elements.add(e)}remove(e){e===this.focusedElement&&this._blur(),this._elements.has(e)&&(this.stopListening(e),this._elements.delete(e))}destroy(){this.stopListening()}_focus(e){clearTimeout(this._nextEventLoopTimeout),this.focusedElement=e,this.isFocused=!0}_blur(){clearTimeout(this._nextEventLoopTimeout),this._nextEventLoopTimeout=setTimeout(()=>{this.focusedElement=null,this.isFocused=!1},0)}}class Zi{constructor(){w(this,"_listener");this._listener=new(Rr())}listenTo(n){this._listener.listenTo(n,"keydown",(e,i)=>{this._listener.fire("_keydown:"+vh(i),i)})}set(n,e,i={}){const s=Hw(n),r=i.priority;this._listener.listenTo(this._listener,"_keydown:"+s,(o,a)=>{i.filter&&!i.filter(a)||(e(a,()=>{a.preventDefault(),a.stopPropagation(),o.stop()}),o.return=!0)},{priority:r})}press(n){return!!this._listener.fire("_keydown:"+vh(n),n)}stopListening(n){this._listener.stopListening(n)}destroy(){this.stopListening()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Yve(t){const n=new Map;for(const e in t)n.set(e,t[e]);return n}function Va(t){return Ao(t)?new Map(t):Yve(t)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Zve=1e4;function Xve(t,n,e,i){if(Math.max(n.length,t.length)>Zve)return t.slice(0,e).concat(n).concat(t.slice(e+i,t.length));{const s=Array.from(t);return s.splice(e,i,...n),s}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function ME(t,n){let e;function i(...s){i.cancel(),e=setTimeout(()=>t(...s),n)}return i.cancel=()=>{clearTimeout(e)},i}function Jve(t){function n(d){return d.length>=40&&d.length<=255?"VALID":"INVALID"}if(!t)return"INVALID";let e="";try{e=atob(t)}catch{return"INVALID"}const i=e.split("-"),s=i[0],r=i[1];if(!r)return n(t);try{atob(r)}catch{try{if(atob(s),!atob(s).length)return n(t)}catch{return n(t)}}if(s.length<40||s.length>255)return"INVALID";let o="";try{atob(s),o=atob(r)}catch{return"INVALID"}if(o.length!==8)return"INVALID";const a=Number(o.substring(0,4)),l=Number(o.substring(4,6))-1,c=Number(o.substring(6,8)),u=new Date(a,l,c);return u<cve||isNaN(Number(u))?"INVALID":"VALID"}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Qve(t){return!!t&&t.length==1&&/[\u0300-\u036f\u1ab0-\u1aff\u1dc0-\u1dff\u20d0-\u20ff\ufe20-\ufe2f]/.test(t)}function ebe(t){return!!t&&t.length==1&&/[\ud800-\udbff]/.test(t)}function tbe(t){return!!t&&t.length==1&&/[\udc00-\udfff]/.test(t)}function PE(t,n){return ebe(t.charAt(n-1))&&tbe(t.charAt(n))}function OE(t,n){return Qve(t.charAt(n))}const nbe=ibe();function fV(t,n){const e=String(t).matchAll(nbe);return Array.from(e).some(i=>i.index<n&&n<i.index+i[0].length)}function ibe(){const t=[new RegExp("\\p{Emoji}[\\u{E0020}-\\u{E007E}]+\\u{E007F}","u"),new RegExp("\\p{Emoji}\\u{FE0F}?\\u{20E3}","u"),new RegExp("\\p{Emoji}\\u{FE0F}","u"),new RegExp("(?=\\p{General_Category=Other_Symbol})\\p{Emoji}\\p{Emoji_Modifier}*","u")],n=new RegExp("\\p{Regional_Indicator}{2}","u").source,e="(?:"+t.map(s=>s.source).join("|")+")",i=`${n}|${e}(?:‍${e})*`;return new RegExp(i,"ug")}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const xb=new WeakMap;let iI=!1;function LE({view:t,element:n,text:e,isDirectHost:i=!0,keepOnFocus:s=!1}){const r=t.document;xb.has(r)||(xb.set(r,new Map),r.registerPostFixer(a=>k5(r,a)),r.on("change:isComposing",()=>{t.change(a=>k5(r,a))},{priority:"high"})),n.is("editableElement")&&n.on("change:placeholder",(a,l,c)=>{o(c)}),n.placeholder?o(n.placeholder):e&&o(e),e&&lbe();function o(a){xb.get(r).set(n,{text:a,isDirectHost:i,keepOnFocus:s,hostElement:i?n:null}),t.change(l=>k5(r,l))}}function sbe(t,n){return n.hasClass("ck-placeholder")?!1:(t.addClass("ck-placeholder",n),!0)}function rbe(t,n){return n.hasClass("ck-placeholder")?(t.removeClass("ck-placeholder",n),!0):!1}function obe(t,n){if(!t.isAttached()||Array.from(t.getChildren()).some(o=>!o.is("uiElement")))return!1;const i=t.document,r=i.selection.anchor;return i.isComposing&&r&&r.parent===t?!1:n||!i.isFocused?!0:!!r&&r.parent!==t}function k5(t,n){const e=xb.get(t),i=[];let s=!1;for(const[r,o]of e)o.isDirectHost&&(i.push(r),sI(n,r,o)&&(s=!0));for(const[r,o]of e){if(o.isDirectHost)continue;const a=abe(r);a&&(i.includes(a)||(o.hostElement=a,sI(n,r,o)&&(s=!0)))}return s}function sI(t,n,e){const{text:i,isDirectHost:s,hostElement:r}=e;let o=!1;return r.getAttribute("data-placeholder")!==i&&(t.setAttribute("data-placeholder",i,r),o=!0),(s||n.childCount==1)&&obe(r,e.keepOnFocus)?sbe(t,r)&&(o=!0):rbe(t,r)&&(o=!0),o}function abe(t){if(t.childCount){const n=t.getChild(0);if(n.is("element")&&!n.is("uiElement")&&!n.is("attributeElement"))return n}return null}function lbe(){iI||qn("enableplaceholder-deprecated-text-option"),iI=!0}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let Th=class{is(){throw new Error("is() method is abstract")}},xh=class extends Ti(Th){constructor(e){super();w(this,"document");w(this,"parent");this.document=e,this.parent=null}get index(){let e;if(!this.parent)return null;if((e=this.parent.getChildIndex(this))==-1)throw new fe("view-node-not-found-in-parent",this);return e}get nextSibling(){const e=this.index;return e!==null&&this.parent.getChild(e+1)||null}get previousSibling(){const e=this.index;return e!==null&&this.parent.getChild(e-1)||null}get root(){let e=this;for(;e.parent;)e=e.parent;return e}isAttached(){return this.root.is("rootElement")}getPath(){const e=[];let i=this;for(;i.parent;)e.unshift(i.index),i=i.parent;return e}getAncestors(e={}){const i=[];let s=e.includeSelf?this:this.parent;for(;s;)i[e.parentFirst?"push":"unshift"](s),s=s.parent;return i}getCommonAncestor(e,i={}){const s=this.getAncestors(i),r=e.getAncestors(i);let o=0;for(;s[o]==r[o]&&s[o];)o++;return o===0?null:s[o-1]}isBefore(e){if(this==e||this.root!==e.root)return!1;const i=this.getPath(),s=e.getPath(),r=sr(i,s);switch(r){case"prefix":return!0;case"extension":return!1;default:return i[r]<s[r]}}isAfter(e){return this==e||this.root!==e.root?!1:!this.isBefore(e)}_remove(){this.parent._removeChildren(this.index)}_fireChange(e,i){this.fire(`change:${e}`,i),this.parent&&this.parent._fireChange(e,i)}toJSON(){const e=l_(this);return delete e.parent,e}};xh.prototype.is=function(t){return t==="node"||t==="view:node"};let Yi=class zC extends xh{constructor(e,i){super(e);w(this,"_textData");this._textData=i}get data(){return this._textData}get _data(){return this.data}set _data(e){this._fireChange("text",this),this._textData=e}isSimilar(e){return e instanceof zC?this===e||this.data===e.data:!1}_clone(){return new zC(this.document,this.data)}};Yi.prototype.is=function(t){return t==="$text"||t==="view:$text"||t==="text"||t==="view:text"||t==="node"||t==="view:node"};let ul=class extends Th{constructor(e,i,s){super();w(this,"textNode");w(this,"data");w(this,"offsetInText");if(this.textNode=e,i<0||i>e.data.length)throw new fe("view-textproxy-wrong-offsetintext",this);if(s<0||i+s>e.data.length)throw new fe("view-textproxy-wrong-length",this);this.data=e.data.substring(i,i+s),this.offsetInText=i}get offsetSize(){return this.data.length}get isPartial(){return this.data.length!==this.textNode.data.length}get parent(){return this.textNode.parent}get root(){return this.textNode.root}get document(){return this.textNode.document}getAncestors(e={}){const i=[];let s=e.includeSelf?this.textNode:this.parent;for(;s!==null;)i[e.parentFirst?"push":"unshift"](s),s=s.parent;return i}};ul.prototype.is=function(t){return t==="$textProxy"||t==="view:$textProxy"||t==="textProxy"||t==="view:textProxy"};class Io{constructor(...n){w(this,"_patterns",[]);this.add(...n)}add(...n){for(let e of n)(typeof e=="string"||e instanceof RegExp)&&(e={name:e}),this._patterns.push(e)}match(...n){for(const e of n)for(const i of this._patterns){const s=rI(e,i);if(s)return{element:e,pattern:i,match:s}}return null}matchAll(...n){const e=[];for(const i of n)for(const s of this._patterns){const r=rI(i,s);r&&e.push({element:i,pattern:s,match:r})}return e.length>0?e:null}getElementName(){if(this._patterns.length!==1)return null;const n=this._patterns[0],e=n.name;return typeof n!="function"&&e&&!(e instanceof RegExp)?e:null}}function rI(t,n){if(typeof n=="function")return n(t);const e={};return n.name&&(e.name=cbe(n.name,t.name),!e.name)||n.attributes&&(e.attributes=fbe(n.attributes,t),!e.attributes)||n.classes&&(e.classes=mbe(n.classes,t),!e.classes)||n.styles&&(e.styles=pbe(n.styles,t),!e.styles)?null:e}function cbe(t,n){return t instanceof RegExp?!!n.match(t):t===n}function BE(t,n,e){const i=ube(t),s=Array.from(n),r=[];if(i.forEach(([o,a])=>{s.forEach(l=>{dbe(o,l)&&hbe(a,l,e)&&r.push(l)})}),!(!i.length||r.length<i.length))return r}function ube(t){return Array.isArray(t)?t.map(n=>po(n)?((n.key===void 0||n.value===void 0)&&qn("matcher-pattern-missing-key-or-value",n),[n.key,n.value]):[n,!0]):po(t)?Object.entries(t):[[t,!0]]}function dbe(t,n){return t===!0||t===n||t instanceof RegExp&&n.match(t)}function hbe(t,n,e){if(t===!0)return!0;const i=e(n);return t===i||t instanceof RegExp&&!!String(i).match(t)}function fbe(t,n){const e=new Set(n.getAttributeKeys());return po(t)?(t.style!==void 0&&qn("matcher-pattern-deprecated-attributes-style-key",t),t.class!==void 0&&qn("matcher-pattern-deprecated-attributes-class-key",t)):(e.delete("style"),e.delete("class")),BE(t,e,i=>n.getAttribute(i))}function mbe(t,n){return BE(t,n.getClassNames(),()=>{})}function pbe(t,n){return BE(t,n.getStyleNames(!0),e=>n.getStyle(e))}class HC{constructor(n){w(this,"_styles");w(this,"_styleProcessor");this._styles={},this._styleProcessor=n}get isEmpty(){return!Object.entries(this._styles).length}get size(){return this.isEmpty?0:this.getStyleNames().length}setTo(n){this.clear();const e=vbe(n);for(const[i,s]of e)this._styleProcessor.toNormalizedForm(i,s,this._styles)}has(n){if(this.isEmpty)return!1;const i=this._styleProcessor.getReducedForm(n,this._styles).find(([s])=>s===n);return Array.isArray(i)}set(n,e){if(Li(n))for(const[i,s]of Object.entries(n))this._styleProcessor.toNormalizedForm(i,s,this._styles);else this._styleProcessor.toNormalizedForm(n,e,this._styles)}remove(n){const e=UC(n);coe(this._styles,e),delete this._styles[n],this._cleanEmptyObjectsOnPath(e)}getNormalized(n){return this._styleProcessor.getNormalized(n,this._styles)}toString(){return this.isEmpty?"":this.getStylesEntries().map(n=>n.join(":")).sort().join(";")+";"}getAsString(n){if(this.isEmpty)return;if(this._styles[n]&&!Li(this._styles[n]))return this._styles[n];const i=this._styleProcessor.getReducedForm(n,this._styles).find(([s])=>s===n);if(Array.isArray(i))return i[1]}getStyleNames(n=!1){return this.isEmpty?[]:n?this._styleProcessor.getStyleNames(this._styles):this.getStylesEntries().map(([i])=>i)}clear(){this._styles={}}getStylesEntries(){const n=[],e=Object.keys(this._styles);for(const i of e)n.push(...this._styleProcessor.getReducedForm(i,this._styles));return n}_cleanEmptyObjectsOnPath(n){const e=n.split(".");if(!(e.length>1))return;const s=e.splice(0,e.length-1).join("."),r=cr(this._styles,s);if(!r)return;!Object.keys(r).length&&this.remove(s)}}class gbe{constructor(){w(this,"_normalizers");w(this,"_extractors");w(this,"_reducers");w(this,"_consumables");this._normalizers=new Map,this._extractors=new Map,this._reducers=new Map,this._consumables=new Map}toNormalizedForm(n,e,i){if(Li(e)){E5(i,UC(n),e);return}if(this._normalizers.has(n)){const s=this._normalizers.get(n),{path:r,value:o}=s(e);E5(i,r,o)}else E5(i,n,e)}getNormalized(n,e){if(!n)return Cw({},e);if(e[n]!==void 0)return e[n];if(this._extractors.has(n)){const i=this._extractors.get(n);if(typeof i=="string")return cr(e,i);const s=i(n,e);if(s)return s}return cr(e,UC(n))}getReducedForm(n,e){const i=this.getNormalized(n,e);return i===void 0?[]:this._reducers.has(n)?this._reducers.get(n)(i):[[n,i]]}getStyleNames(n){const e=Array.from(this._consumables.keys()).filter(s=>{const r=this.getNormalized(s,n);return r&&typeof r=="object"?Object.keys(r).length:r}),i=new Set([...e,...Object.keys(n)]);return Array.from(i)}getRelatedStyles(n){return this._consumables.get(n)||[]}setNormalizer(n,e){this._normalizers.set(n,e)}setExtractor(n,e){this._extractors.set(n,e)}setReducer(n,e){this._reducers.set(n,e)}setStyleRelation(n,e){this._mapStyleNames(n,e);for(const i of e)this._mapStyleNames(i,[n])}_mapStyleNames(n,e){this._consumables.has(n)||this._consumables.set(n,[]),this._consumables.get(n).push(...e)}}function vbe(t){let n=null,e=0,i=0,s=null;const r=new Map;if(t==="")return r;t.charAt(t.length-1)!=";"&&(t=t+";");for(let o=0;o<t.length;o++){const a=t.charAt(o);if(n===null)switch(a){case":":s||(s=t.substr(e,o-e),i=o+1);break;case'"':case"'":n=a;break;case";":{const l=t.substr(i,o-i);s&&r.set(s.trim(),l.trim()),s=null,e=o+1;break}}else a===n&&(n=null)}return r}function UC(t){return t.replace("-",".")}function E5(t,n,e){let i=e;Li(e)&&(i=Cw({},cr(t,n),e)),pB(t,n,i)}let Da=class mV extends xh{constructor(e,i,s,r){super(e);w(this,"name");w(this,"_unsafeAttributesToRender",[]);w(this,"_attrs");w(this,"_children");w(this,"_classes");w(this,"_styles");w(this,"_customProperties",new Map);if(this.name=i,this._attrs=bbe(s),this._children=[],r&&this._insertChild(0,r),this._classes=new Set,this._attrs.has("class")){const o=this._attrs.get("class");oI(this._classes,o),this._attrs.delete("class")}this._styles=new HC(this.document.stylesProcessor),this._attrs.has("style")&&(this._styles.setTo(this._attrs.get("style")),this._attrs.delete("style"))}get childCount(){return this._children.length}get isEmpty(){return this._children.length===0}getChild(e){return this._children[e]}getChildIndex(e){return this._children.indexOf(e)}getChildren(){return this._children[Symbol.iterator]()}*getAttributeKeys(){this._classes.size>0&&(yield"class"),this._styles.isEmpty||(yield"style"),yield*this._attrs.keys()}*getAttributes(){yield*this._attrs.entries(),this._classes.size>0&&(yield["class",this.getAttribute("class")]),this._styles.isEmpty||(yield["style",this.getAttribute("style")])}getAttribute(e){if(e=="class")return this._classes.size>0?[...this._classes].join(" "):void 0;if(e=="style"){const i=this._styles.toString();return i==""?void 0:i}return this._attrs.get(e)}hasAttribute(e){return e=="class"?this._classes.size>0:e=="style"?!this._styles.isEmpty:this._attrs.has(e)}isSimilar(e){if(!(e instanceof mV))return!1;if(this===e)return!0;if(this.name!=e.name||this._attrs.size!==e._attrs.size||this._classes.size!==e._classes.size||this._styles.size!==e._styles.size)return!1;for(const[i,s]of this._attrs)if(!e._attrs.has(i)||e._attrs.get(i)!==s)return!1;for(const i of this._classes)if(!e._classes.has(i))return!1;for(const i of this._styles.getStyleNames())if(!e._styles.has(i)||e._styles.getAsString(i)!==this._styles.getAsString(i))return!1;return!0}hasClass(...e){for(const i of e)if(!this._classes.has(i))return!1;return!0}getClassNames(){return this._classes.keys()}getStyle(e){return this._styles.getAsString(e)}getNormalizedStyle(e){return this._styles.getNormalized(e)}getStyleNames(e){return this._styles.getStyleNames(e)}hasStyle(...e){for(const i of e)if(!this._styles.has(i))return!1;return!0}findAncestor(...e){const i=new Io(...e);let s=this.parent;for(;s&&!s.is("documentFragment");){if(i.match(s))return s;s=s.parent}return null}getCustomProperty(e){return this._customProperties.get(e)}*getCustomProperties(){yield*this._customProperties.entries()}getIdentity(){const e=Array.from(this._classes).sort().join(","),i=this._styles.toString(),s=Array.from(this._attrs).map(r=>`${r[0]}="${r[1]}"`).sort().join(" ");return this.name+(e==""?"":` class="${e}"`)+(i?` style="${i}"`:"")+(s==""?"":` ${s}`)}shouldRenderUnsafeAttribute(e){return this._unsafeAttributesToRender.includes(e)}_clone(e=!1){const i=[];if(e)for(const r of this.getChildren())i.push(r._clone(e));const s=new this.constructor(this.document,this.name,this._attrs,i);return s._classes=new Set(this._classes),s._styles.set(this._styles.getNormalized()),s._customProperties=new Map(this._customProperties),s.getFillerOffset=this.getFillerOffset,s._unsafeAttributesToRender=this._unsafeAttributesToRender,s}_appendChild(e){return this._insertChild(this.childCount,e)}_insertChild(e,i){this._fireChange("children",this);let s=0;const r=_be(this.document,i);for(const o of r)o.parent!==null&&o._remove(),o.parent=this,o.document=this.document,this._children.splice(e,0,o),e++,s++;return s}_removeChildren(e,i=1){this._fireChange("children",this);for(let s=e;s<e+i;s++)this._children[s].parent=null;return this._children.splice(e,i)}_setAttribute(e,i){const s=String(i);this._fireChange("attributes",this),e=="class"?oI(this._classes,s):e=="style"?this._styles.setTo(s):this._attrs.set(e,s)}_removeAttribute(e){return this._fireChange("attributes",this),e=="class"?this._classes.size>0?(this._classes.clear(),!0):!1:e=="style"?this._styles.isEmpty?!1:(this._styles.clear(),!0):this._attrs.delete(e)}_addClass(e){this._fireChange("attributes",this);for(const i of Si(e))this._classes.add(i)}_removeClass(e){this._fireChange("attributes",this);for(const i of Si(e))this._classes.delete(i)}_setStyle(e,i){this._fireChange("attributes",this),typeof e!="string"?this._styles.set(e):this._styles.set(e,i)}_removeStyle(e){this._fireChange("attributes",this);for(const i of Si(e))this._styles.remove(i)}_setCustomProperty(e,i){this._customProperties.set(e,i)}_removeCustomProperty(e){return this._customProperties.delete(e)}};Da.prototype.is=function(t,n){return n?n===this.name&&(t==="element"||t==="view:element"):t==="element"||t==="view:element"||t==="node"||t==="view:node"};function bbe(t){const n=Va(t);for(const[e,i]of n)i===null?n.delete(e):typeof i!="string"&&n.set(e,String(i));return n}function oI(t,n){const e=n.split(/\s+/);t.clear(),e.forEach(i=>t.add(i))}function _be(t,n){return typeof n=="string"?[new Yi(t,n)]:(Ao(n)||(n=[n]),Array.from(n).map(e=>typeof e=="string"?new Yi(t,e):e instanceof ul?new Yi(t,e.data):e))}class n1 extends Da{constructor(n,e,i,s){super(n,e,i,s),this.getFillerOffset=wbe}}n1.prototype.is=function(t,n){return n?n===this.name&&(t==="containerElement"||t==="view:containerElement"||t==="element"||t==="view:element"):t==="containerElement"||t==="view:containerElement"||t==="element"||t==="view:element"||t==="node"||t==="view:node"};function wbe(){const t=[...this.getChildren()],n=t[this.childCount-1];if(n&&n.is("element","br"))return this.childCount;for(const e of t)if(!e.is("uiElement"))return null;return this.childCount}class Ww extends li(n1){constructor(n,e,i,s){super(n,e,i,s),this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("placeholder",void 0),this.bind("isReadOnly").to(n),this.bind("isFocused").to(n,"isFocused",r=>r&&n.selection.editableElement==this),this.listenTo(n.selection,"change",()=>{this.isFocused=n.isFocused&&n.selection.editableElement==this})}destroy(){this.stopListening()}}Ww.prototype.is=function(t,n){return n?n===this.name&&(t==="editableElement"||t==="view:editableElement"||t==="containerElement"||t==="view:containerElement"||t==="element"||t==="view:element"):t==="editableElement"||t==="view:editableElement"||t==="containerElement"||t==="view:containerElement"||t==="element"||t==="view:element"||t==="node"||t==="view:node"};const aI=Symbol("rootName");class pV extends Ww{constructor(n,e){super(n,e),this.rootName="main"}get rootName(){return this.getCustomProperty(aI)}set rootName(n){this._setCustomProperty(aI,n)}set _name(n){this.name=n}}pV.prototype.is=function(t,n){return n?n===this.name&&(t==="rootElement"||t==="view:rootElement"||t==="editableElement"||t==="view:editableElement"||t==="containerElement"||t==="view:containerElement"||t==="element"||t==="view:element"):t==="rootElement"||t==="view:rootElement"||t==="editableElement"||t==="view:editableElement"||t==="containerElement"||t==="view:containerElement"||t==="element"||t==="view:element"||t==="node"||t==="view:node"};let Yd=class{constructor(n={}){w(this,"direction");w(this,"boundaries");w(this,"singleCharacters");w(this,"shallow");w(this,"ignoreElementEnd");w(this,"_position");w(this,"_boundaryStartParent");w(this,"_boundaryEndParent");if(!n.boundaries&&!n.startPosition)throw new fe("view-tree-walker-no-start-position",null);if(n.direction&&n.direction!="forward"&&n.direction!="backward")throw new fe("view-tree-walker-unknown-direction",n.startPosition,{direction:n.direction});this.boundaries=n.boundaries||null,n.startPosition?this._position=Nt._createAt(n.startPosition):this._position=Nt._createAt(n.boundaries[n.direction=="backward"?"end":"start"]),this.direction=n.direction||"forward",this.singleCharacters=!!n.singleCharacters,this.shallow=!!n.shallow,this.ignoreElementEnd=!!n.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null}[Symbol.iterator](){return this}get position(){return this._position}skip(n){let e,i;do i=this.position,e=this.next();while(!e.done&&n(e.value));e.done||(this._position=i)}next(){return this.direction=="forward"?this._next():this._previous()}_next(){let n=this.position.clone();const e=this.position,i=n.parent;if(i.parent===null&&n.offset===i.childCount)return{done:!0,value:void 0};if(i===this._boundaryEndParent&&n.offset==this.boundaries.end.offset)return{done:!0,value:void 0};let s;if(i instanceof Yi){if(n.isAtEnd)return this._position=Nt._createAfter(i),this._next();s=i.data[n.offset]}else s=i.getChild(n.offset);if(s instanceof Da){if(!this.shallow)n=new Nt(s,0);else{if(this.boundaries&&this.boundaries.end.isBefore(n))return{done:!0,value:void 0};n.offset++}return this._position=n,this._formatReturnValue("elementStart",s,e,n,1)}if(s instanceof Yi){if(this.singleCharacters)return n=new Nt(s,0),this._position=n,this._next();let r=s.data.length,o;return s==this._boundaryEndParent?(r=this.boundaries.end.offset,o=new ul(s,0,r),n=Nt._createAfter(o)):(o=new ul(s,0,s.data.length),n.offset++),this._position=n,this._formatReturnValue("text",o,e,n,r)}if(typeof s=="string"){let r;this.singleCharacters?r=1:r=(i===this._boundaryEndParent?this.boundaries.end.offset:i.data.length)-n.offset;const o=new ul(i,n.offset,r);return n.offset+=r,this._position=n,this._formatReturnValue("text",o,e,n,r)}return n=Nt._createAfter(i),this._position=n,this.ignoreElementEnd?this._next():this._formatReturnValue("elementEnd",i,e,n)}_previous(){let n=this.position.clone();const e=this.position,i=n.parent;if(i.parent===null&&n.offset===0)return{done:!0,value:void 0};if(i==this._boundaryStartParent&&n.offset==this.boundaries.start.offset)return{done:!0,value:void 0};let s;if(i instanceof Yi){if(n.isAtStart)return this._position=Nt._createBefore(i),this._previous();s=i.data[n.offset-1]}else s=i.getChild(n.offset-1);if(s instanceof Da)return this.shallow?(n.offset--,this._position=n,this._formatReturnValue("elementStart",s,e,n,1)):(n=new Nt(s,s.childCount),this._position=n,this.ignoreElementEnd?this._previous():this._formatReturnValue("elementEnd",s,e,n));if(s instanceof Yi){if(this.singleCharacters)return n=new Nt(s,s.data.length),this._position=n,this._previous();let r=s.data.length,o;if(s==this._boundaryStartParent){const a=this.boundaries.start.offset;o=new ul(s,a,s.data.length-a),r=o.data.length,n=Nt._createBefore(o)}else o=new ul(s,0,s.data.length),n.offset--;return this._position=n,this._formatReturnValue("text",o,e,n,r)}if(typeof s=="string"){let r;if(this.singleCharacters)r=1;else{const a=i===this._boundaryStartParent?this.boundaries.start.offset:0;r=n.offset-a}n.offset-=r;const o=new ul(i,n.offset,r);return this._position=n,this._formatReturnValue("text",o,e,n,r)}return n=Nt._createBefore(i),this._position=n,this._formatReturnValue("elementStart",i,e,n,1)}_formatReturnValue(n,e,i,s,r){return e instanceof ul&&(e.offsetInText+e.data.length==e.textNode.data.length&&(this.direction=="forward"&&!(this.boundaries&&this.boundaries.end.isEqual(this.position))?(s=Nt._createAfter(e.textNode),this._position=s):i=Nt._createAfter(e.textNode)),e.offsetInText===0&&(this.direction=="backward"&&!(this.boundaries&&this.boundaries.start.isEqual(this.position))?(s=Nt._createBefore(e.textNode),this._position=s):i=Nt._createBefore(e.textNode))),{done:!1,value:{type:n,item:e,previousPosition:i,nextPosition:s,length:r}}}},Nt=class Kl extends Th{constructor(e,i){super();w(this,"parent");w(this,"offset");this.parent=e,this.offset=i}get nodeAfter(){return this.parent.is("$text")?null:this.parent.getChild(this.offset)||null}get nodeBefore(){return this.parent.is("$text")?null:this.parent.getChild(this.offset-1)||null}get isAtStart(){return this.offset===0}get isAtEnd(){const e=this.parent.is("$text")?this.parent.data.length:this.parent.childCount;return this.offset===e}get root(){return this.parent.root}get editableElement(){let e=this.parent;for(;!(e instanceof Ww);)if(e.parent)e=e.parent;else return null;return e}getShiftedBy(e){const i=Kl._createAt(this),s=i.offset+e;return i.offset=s<0?0:s,i}getLastMatchingPosition(e,i={}){i.startPosition=this;const s=new Yd(i);return s.skip(e),s.position}getAncestors(){return this.parent.is("documentFragment")?[this.parent]:this.parent.getAncestors({includeSelf:!0})}getCommonAncestor(e){const i=this.getAncestors(),s=e.getAncestors();let r=0;for(;i[r]==s[r]&&i[r];)r++;return r===0?null:i[r-1]}isEqual(e){return this.parent==e.parent&&this.offset==e.offset}isBefore(e){return this.compareWith(e)=="before"}isAfter(e){return this.compareWith(e)=="after"}compareWith(e){if(this.root!==e.root)return"different";if(this.isEqual(e))return"same";const i=this.parent.is("node")?this.parent.getPath():[],s=e.parent.is("node")?e.parent.getPath():[];i.push(this.offset),s.push(e.offset);const r=sr(i,s);switch(r){case"prefix":return"before";case"extension":return"after";default:return i[r]<s[r]?"before":"after"}}getWalker(e={}){return e.startPosition=this,new Yd(e)}clone(){return new Kl(this.parent,this.offset)}static _createAt(e,i){if(e instanceof Kl)return new this(e.parent,e.offset);{const s=e;if(i=="end")i=s.is("$text")?s.data.length:s.childCount;else{if(i=="before")return this._createBefore(s);if(i=="after")return this._createAfter(s);if(i!==0&&!i)throw new fe("view-createpositionat-offset-required",s)}return new Kl(s,i)}}static _createAfter(e){if(e.is("$textProxy"))return new Kl(e.textNode,e.offsetInText+e.data.length);if(!e.parent)throw new fe("view-position-after-root",e,{root:e});return new Kl(e.parent,e.index+1)}static _createBefore(e){if(e.is("$textProxy"))return new Kl(e.textNode,e.offsetInText);if(!e.parent)throw new fe("view-position-before-root",e,{root:e});return new Kl(e.parent,e.index)}};Nt.prototype.is=function(t){return t==="position"||t==="view:position"};let An=class hu extends Th{constructor(e,i=null){super();w(this,"start");w(this,"end");this.start=e.clone(),this.end=i?i.clone():e.clone()}*[Symbol.iterator](){yield*new Yd({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){return this.start.parent===this.end.parent}get root(){return this.start.root}getEnlarged(){let e=this.start.getLastMatchingPosition(vv,{direction:"backward"}),i=this.end.getLastMatchingPosition(vv);return e.parent.is("$text")&&e.isAtStart&&(e=Nt._createBefore(e.parent)),i.parent.is("$text")&&i.isAtEnd&&(i=Nt._createAfter(i.parent)),new hu(e,i)}getTrimmed(){let e=this.start.getLastMatchingPosition(vv);if(e.isAfter(this.end)||e.isEqual(this.end))return new hu(e,e);let i=this.end.getLastMatchingPosition(vv,{direction:"backward"});const s=e.nodeAfter,r=i.nodeBefore;return s&&s.is("$text")&&(e=new Nt(s,0)),r&&r.is("$text")&&(i=new Nt(r,r.data.length)),new hu(e,i)}isEqual(e){return this==e||this.start.isEqual(e.start)&&this.end.isEqual(e.end)}containsPosition(e){return e.isAfter(this.start)&&e.isBefore(this.end)}containsRange(e,i=!1){e.isCollapsed&&(i=!1);const s=this.containsPosition(e.start)||i&&this.start.isEqual(e.start),r=this.containsPosition(e.end)||i&&this.end.isEqual(e.end);return s&&r}getDifference(e){const i=[];return this.isIntersecting(e)?(this.containsPosition(e.start)&&i.push(new hu(this.start,e.start)),this.containsPosition(e.end)&&i.push(new hu(e.end,this.end))):i.push(this.clone()),i}getIntersection(e){if(this.isIntersecting(e)){let i=this.start,s=this.end;return this.containsPosition(e.start)&&(i=e.start),this.containsPosition(e.end)&&(s=e.end),new hu(i,s)}return null}getWalker(e={}){return e.boundaries=this,new Yd(e)}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;let e=this.start.nodeAfter,i=this.end.nodeBefore;return this.start.parent.is("$text")&&this.start.isAtEnd&&this.start.parent.nextSibling&&(e=this.start.parent.nextSibling),this.end.parent.is("$text")&&this.end.isAtStart&&this.end.parent.previousSibling&&(i=this.end.parent.previousSibling),e&&e.is("element")&&e===i?e:null}clone(){return new hu(this.start,this.end)}*getItems(e={}){e.boundaries=this,e.ignoreElementEnd=!0;const i=new Yd(e);for(const s of i)yield s.item}*getPositions(e={}){e.boundaries=this;const i=new Yd(e);yield i.position;for(const s of i)yield s.nextPosition}isIntersecting(e){return this.start.isBefore(e.end)&&this.end.isAfter(e.start)}static _createFromParentsAndOffsets(e,i,s,r){return new this(new Nt(e,i),new Nt(s,r))}static _createFromPositionAndShift(e,i){const s=e,r=e.getShiftedBy(i);return i>0?new this(s,r):new this(r,s)}static _createIn(e){return this._createFromParentsAndOffsets(e,0,e,e.childCount)}static _createOn(e){const i=e.is("$textProxy")?e.offsetSize:1;return this._createFromPositionAndShift(Nt._createBefore(e),i)}};An.prototype.is=function(t){return t==="range"||t==="view:range"};function vv(t){return!!(t.item.is("attributeElement")||t.item.is("uiElement"))}let cc=class gV extends Ti(Th){constructor(...e){super();w(this,"_ranges");w(this,"_lastRangeBackward");w(this,"_isFake");w(this,"_fakeSelectionLabel");this._ranges=[],this._lastRangeBackward=!1,this._isFake=!1,this._fakeSelectionLabel="",e.length&&this.setTo(...e)}get isFake(){return this._isFake}get fakeSelectionLabel(){return this._fakeSelectionLabel}get anchor(){if(!this._ranges.length)return null;const e=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?e.end:e.start).clone()}get focus(){if(!this._ranges.length)return null;const e=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?e.start:e.end).clone()}get isCollapsed(){return this.rangeCount===1&&this._ranges[0].isCollapsed}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}get editableElement(){return this.anchor?this.anchor.editableElement:null}*getRanges(){for(const e of this._ranges)yield e.clone()}getFirstRange(){let e=null;for(const i of this._ranges)(!e||i.start.isBefore(e.start))&&(e=i);return e?e.clone():null}getLastRange(){let e=null;for(const i of this._ranges)(!e||i.end.isAfter(e.end))&&(e=i);return e?e.clone():null}getFirstPosition(){const e=this.getFirstRange();return e?e.start.clone():null}getLastPosition(){const e=this.getLastRange();return e?e.end.clone():null}isEqual(e){if(this.isFake!=e.isFake||this.isFake&&this.fakeSelectionLabel!=e.fakeSelectionLabel||this.rangeCount!=e.rangeCount)return!1;if(this.rangeCount===0)return!0;if(!this.anchor.isEqual(e.anchor)||!this.focus.isEqual(e.focus))return!1;for(const i of this._ranges){let s=!1;for(const r of e._ranges)if(i.isEqual(r)){s=!0;break}if(!s)return!1}return!0}isSimilar(e){if(this.isBackward!=e.isBackward)return!1;const i=DC(this.getRanges()),s=DC(e.getRanges());if(i!=s)return!1;if(i==0)return!0;for(let r of this.getRanges()){r=r.getTrimmed();let o=!1;for(let a of e.getRanges())if(a=a.getTrimmed(),r.start.isEqual(a.start)&&r.end.isEqual(a.end)){o=!0;break}if(!o)return!1}return!0}getSelectedElement(){return this.rangeCount!==1?null:this.getFirstRange().getContainedElement()}setTo(...e){let[i,s,r]=e;if(typeof s=="object"&&(r=s,s=void 0),i===null)this._setRanges([]),this._setFakeOptions(r);else if(i instanceof gV||i instanceof FE)this._setRanges(i.getRanges(),i.isBackward),this._setFakeOptions({fake:i.isFake,label:i.fakeSelectionLabel});else if(i instanceof An)this._setRanges([i],r&&r.backward),this._setFakeOptions(r);else if(i instanceof Nt)this._setRanges([new An(i)]),this._setFakeOptions(r);else if(i instanceof xh){const o=!!r&&!!r.backward;let a;if(s===void 0)throw new fe("view-selection-setto-required-second-parameter",this);s=="in"?a=An._createIn(i):s=="on"?a=An._createOn(i):a=new An(Nt._createAt(i,s)),this._setRanges([a],o),this._setFakeOptions(r)}else if(Ao(i))this._setRanges(i,r&&r.backward),this._setFakeOptions(r);else throw new fe("view-selection-setto-not-selectable",this);this.fire("change")}setFocus(e,i){if(this.anchor===null)throw new fe("view-selection-setfocus-no-ranges",this);const s=Nt._createAt(e,i);if(s.compareWith(this.focus)=="same")return;const r=this.anchor;this._ranges.pop(),s.compareWith(r)=="before"?this._addRange(new An(s,r),!0):this._addRange(new An(r,s)),this.fire("change")}_setRanges(e,i=!1){e=Array.from(e),this._ranges=[];for(const s of e)this._addRange(s);this._lastRangeBackward=!!i}_setFakeOptions(e={}){this._isFake=!!e.fake,this._fakeSelectionLabel=e.fake&&e.label||""}_addRange(e,i=!1){if(!(e instanceof An))throw new fe("view-selection-add-range-not-range",this);this._pushRange(e),this._lastRangeBackward=!!i}_pushRange(e){for(const i of this._ranges)if(e.isIntersecting(i))throw new fe("view-selection-range-intersects",this,{addedRange:e,intersectingRange:i});this._ranges.push(new An(e.start,e.end))}};cc.prototype.is=function(t){return t==="selection"||t==="view:selection"};let FE=class extends Ti(Th){constructor(...e){super();w(this,"_selection");this._selection=new cc,this._selection.delegate("change").to(this),e.length&&this._selection.setTo(...e)}get isFake(){return this._selection.isFake}get fakeSelectionLabel(){return this._selection.fakeSelectionLabel}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get isCollapsed(){return this._selection.isCollapsed}get rangeCount(){return this._selection.rangeCount}get isBackward(){return this._selection.isBackward}get editableElement(){return this._selection.editableElement}get _ranges(){return this._selection._ranges}*getRanges(){yield*this._selection.getRanges()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getSelectedElement(){return this._selection.getSelectedElement()}isEqual(e){return this._selection.isEqual(e)}isSimilar(e){return this._selection.isSimilar(e)}_setTo(...e){this._selection.setTo(...e)}_setFocus(e,i){this._selection.setFocus(e,i)}};FE.prototype.is=function(t){return t==="selection"||t=="documentSelection"||t=="view:selection"||t=="view:documentSelection"};class Lm extends vc{constructor(e,i,s){super(e,i);w(this,"startRange");w(this,"_eventPhase");w(this,"_currentTarget");this.startRange=s,this._eventPhase="none",this._currentTarget=null}get eventPhase(){return this._eventPhase}get currentTarget(){return this._currentTarget}}const S5=Symbol("bubbling contexts");function WC(t){class n extends t{fire(i,...s){try{const r=i instanceof vc?i:new vc(this,i),o=T5(this);if(!o.size)return;if(_p(r,"capturing",this),of(o,"$capture",r,...s))return r.return;const a=r.startRange||this.selection.getFirstRange(),l=a?a.getContainedElement():null,c=l?!!vV(o,l):!1;let u=l||ybe(a);if(_p(r,"atTarget",u),!c){if(of(o,"$text",r,...s))return r.return;_p(r,"bubbling",u)}for(;u;){if(u.is("rootElement")){if(of(o,"$root",r,...s))return r.return}else if(u.is("element")&&of(o,u.name,r,...s))return r.return;if(of(o,u,r,...s))return r.return;u=u.parent,_p(r,"bubbling",u)}return _p(r,"bubbling",this),of(o,"$document",r,...s),r.return}catch(r){/* istanbul ignore next -- @preserve */fe.rethrowUnexpectedError(r,this)}}_addEventListener(i,s,r){const o=Si(r.context||"$document"),a=T5(this);for(const l of o){let c=a.get(l);c||(c=new(Ti()),a.set(l,c)),this.listenTo(c,i,s,r)}}_removeEventListener(i,s){const r=T5(this);for(const o of r.values())this.stopListening(o,i,s)}}return n}{const t=WC(Object);["fire","_addEventListener","_removeEventListener"].forEach(n=>{WC[n]=t.prototype[n]})}function _p(t,n,e){t instanceof Lm&&(t._eventPhase=n,t._currentTarget=e)}function of(t,n,e,...i){const s=typeof n=="string"?t.get(n):vV(t,n);return s?(s.fire(e,...i),e.stop.called):!1}function vV(t,n){for(const[e,i]of t)if(typeof e=="function"&&e(n))return i;return null}function T5(t){return t[S5]||(t[S5]=new Map),t[S5]}function ybe(t){if(!t)return null;const n=t.start.parent,e=t.end.parent,i=n.getPath(),s=e.getPath();return i.length>s.length?n:e}let jw=class extends WC(li()){constructor(e){super();w(this,"selection");w(this,"roots");w(this,"stylesProcessor");w(this,"_postFixers",new Set);this.selection=new FE,this.roots=new _s({idProperty:"rootName"}),this.stylesProcessor=e,this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("isSelecting",!1),this.set("isComposing",!1)}getRoot(e="main"){return this.roots.get(e)}registerPostFixer(e){this._postFixers.add(e)}destroy(){this.roots.forEach(e=>e.destroy()),this.stopListening()}_callPostFixers(e){let i=!1;do for(const s of this._postFixers)if(i=s(e),i)break;while(i)}};const lI=10;class nh extends Da{constructor(e,i,s,r){super(e,i,s,r);w(this,"_priority",lI);w(this,"_id",null);w(this,"_clonesGroup",null);this.getFillerOffset=Cbe}get priority(){return this._priority}get id(){return this._id}getElementsWithSameId(){if(this.id===null)throw new fe("attribute-element-get-elements-with-same-id-no-id",this);return new Set(this._clonesGroup)}isSimilar(e){return this.id!==null||e.id!==null?this.id===e.id:super.isSimilar(e)&&this.priority==e.priority}_clone(e=!1){const i=super._clone(e);return i._priority=this._priority,i._id=this._id,i}}w(nh,"DEFAULT_PRIORITY",lI);nh.prototype.is=function(t,n){return n?n===this.name&&(t==="attributeElement"||t==="view:attributeElement"||t==="element"||t==="view:element"):t==="attributeElement"||t==="view:attributeElement"||t==="element"||t==="view:element"||t==="node"||t==="view:node"};function Cbe(){if(x5(this))return null;let t=this.parent;for(;t&&t.is("attributeElement");){if(x5(t)>1)return null;t=t.parent}return!t||x5(t)>1?null:this.childCount}function x5(t){return Array.from(t.getChildren()).filter(n=>!n.is("uiElement")).length}class NE extends Da{constructor(n,e,i,s){super(n,e,i,s),this.getFillerOffset=kbe}_insertChild(n,e){if(e&&(e instanceof xh||Array.from(e).length>0))throw new fe("view-emptyelement-cannot-add",[this,e]);return 0}}NE.prototype.is=function(t,n){return n?n===this.name&&(t==="emptyElement"||t==="view:emptyElement"||t==="element"||t==="view:element"):t==="emptyElement"||t==="view:emptyElement"||t==="element"||t==="view:element"||t==="node"||t==="view:node"};function kbe(){return null}class qw extends Da{constructor(n,e,i,s){super(n,e,i,s),this.getFillerOffset=Sbe}_insertChild(n,e){if(e&&(e instanceof xh||Array.from(e).length>0))throw new fe("view-uielement-cannot-add",[this,e]);return 0}render(n,e){return this.toDomElement(n)}toDomElement(n){const e=n.createElement(this.name);for(const i of this.getAttributeKeys())e.setAttribute(i,this.getAttribute(i));return e}}qw.prototype.is=function(t,n){return n?n===this.name&&(t==="uiElement"||t==="view:uiElement"||t==="element"||t==="view:element"):t==="uiElement"||t==="view:uiElement"||t==="element"||t==="view:element"||t==="node"||t==="view:node"};function Ebe(t){t.document.on("arrowKey",(n,e)=>Tbe(n,e,t.domConverter),{priority:"low"})}function Sbe(){return null}function Tbe(t,n,e){if(n.keyCode==Cn.arrowright){const i=n.domTarget.ownerDocument.defaultView.getSelection(),s=i.rangeCount==1&&i.getRangeAt(0).collapsed;if(s||n.shiftKey){const r=i.focusNode,o=i.focusOffset,a=e.domPositionToView(r,o);if(a===null)return;let l=!1;const c=a.getLastMatchingPosition(u=>(u.item.is("uiElement")&&(l=!0),!!(u.item.is("uiElement")||u.item.is("attributeElement"))));if(l){const u=e.viewPositionToDom(c);s?i.collapse(u.parent,u.offset):i.extend(u.parent,u.offset)}}}}class VE extends Da{constructor(n,e,i,s){super(n,e,i,s),this.getFillerOffset=xbe}_insertChild(n,e){if(e&&(e instanceof xh||Array.from(e).length>0))throw new fe("view-rawelement-cannot-add",[this,e]);return 0}render(n,e){}}VE.prototype.is=function(t,n){return n?n===this.name&&(t==="rawElement"||t==="view:rawElement"||t==="element"||t==="view:element"):t==="rawElement"||t==="view:rawElement"||t===this.name||t==="view:"+this.name||t==="element"||t==="view:element"||t==="node"||t==="view:node"};function xbe(){return null}let ih=class extends Ti(Th){constructor(e,i){super();w(this,"document");w(this,"_children",[]);w(this,"_customProperties",new Map);this.document=e,i&&this._insertChild(0,i)}[Symbol.iterator](){return this._children[Symbol.iterator]()}get childCount(){return this._children.length}get isEmpty(){return this.childCount===0}get root(){return this}get parent(){return null}get name(){}get getFillerOffset(){}getCustomProperty(e){return this._customProperties.get(e)}*getCustomProperties(){yield*this._customProperties.entries()}_appendChild(e){return this._insertChild(this.childCount,e)}getChild(e){return this._children[e]}getChildIndex(e){return this._children.indexOf(e)}getChildren(){return this._children[Symbol.iterator]()}_insertChild(e,i){this._fireChange("children",this);let s=0;const r=Abe(this.document,i);for(const o of r)o.parent!==null&&o._remove(),o.parent=this,this._children.splice(e,0,o),e++,s++;return s}_removeChildren(e,i=1){this._fireChange("children",this);for(let s=e;s<e+i;s++)this._children[s].parent=null;return this._children.splice(e,i)}_fireChange(e,i){this.fire("change:"+e,i)}_setCustomProperty(e,i){this._customProperties.set(e,i)}_removeCustomProperty(e){return this._customProperties.delete(e)}};ih.prototype.is=function(t){return t==="documentFragment"||t==="view:documentFragment"};function Abe(t,n){return typeof n=="string"?[new Yi(t,n)]:(Ao(n)||(n=[n]),Array.from(n).map(e=>typeof e=="string"?new Yi(t,e):e instanceof ul?new Yi(t,e.data):e))}class bV{constructor(n){w(this,"document");w(this,"_cloneGroups",new Map);w(this,"_slotFactory",null);this.document=n}setSelection(...n){this.document.selection._setTo(...n)}setSelectionFocus(n,e){this.document.selection._setFocus(n,e)}createDocumentFragment(n){return new ih(this.document,n)}createText(n){return new Yi(this.document,n)}createAttributeElement(n,e,i={}){const s=new nh(this.document,n,e);return typeof i.priority=="number"&&(s._priority=i.priority),i.id&&(s._id=i.id),i.renderUnsafeAttributes&&s._unsafeAttributesToRender.push(...i.renderUnsafeAttributes),s}createContainerElement(n,e,i={},s={}){let r=null;po(i)?s=i:r=i;const o=new n1(this.document,n,e,r);return s.renderUnsafeAttributes&&o._unsafeAttributesToRender.push(...s.renderUnsafeAttributes),o}createEditableElement(n,e,i={}){const s=new Ww(this.document,n,e);return i.renderUnsafeAttributes&&s._unsafeAttributesToRender.push(...i.renderUnsafeAttributes),s}createEmptyElement(n,e,i={}){const s=new NE(this.document,n,e);return i.renderUnsafeAttributes&&s._unsafeAttributesToRender.push(...i.renderUnsafeAttributes),s}createUIElement(n,e,i){const s=new qw(this.document,n,e);return i&&(s.render=i),s}createRawElement(n,e,i,s={}){const r=new VE(this.document,n,e);return i&&(r.render=i),s.renderUnsafeAttributes&&r._unsafeAttributesToRender.push(...s.renderUnsafeAttributes),r}setAttribute(n,e,i){i._setAttribute(n,e)}removeAttribute(n,e){e._removeAttribute(n)}addClass(n,e){e._addClass(n)}removeClass(n,e){e._removeClass(n)}setStyle(n,e,i){po(n)&&i===void 0?e._setStyle(n):i._setStyle(n,e)}removeStyle(n,e){e._removeStyle(n)}setCustomProperty(n,e,i){i._setCustomProperty(n,e)}removeCustomProperty(n,e){return e._removeCustomProperty(n)}breakAttributes(n){return n instanceof Nt?this._breakAttributes(n):this._breakAttributesRange(n)}breakContainer(n){const e=n.parent;if(!e.is("containerElement"))throw new fe("view-writer-break-non-container-element",this.document);if(!e.parent)throw new fe("view-writer-break-root",this.document);if(n.isAtStart)return Nt._createBefore(e);if(!n.isAtEnd){const i=e._clone(!1);this.insert(Nt._createAfter(e),i);const s=new An(n,Nt._createAt(e,"end")),r=new Nt(i,0);this.move(s,r)}return Nt._createAfter(e)}mergeAttributes(n){const e=n.offset,i=n.parent;if(i.is("$text"))return n;if(i.is("attributeElement")&&i.childCount===0){const o=i.parent,a=i.index;return i._remove(),this._removeFromClonedElementsGroup(i),this.mergeAttributes(new Nt(o,a))}const s=i.getChild(e-1),r=i.getChild(e);if(!s||!r)return n;if(s.is("$text")&&r.is("$text"))return uI(s,r);if(s.is("attributeElement")&&r.is("attributeElement")&&s.isSimilar(r)){const o=s.childCount;return s._appendChild(r.getChildren()),r._remove(),this._removeFromClonedElementsGroup(r),this.mergeAttributes(new Nt(s,o))}return n}mergeContainers(n){const e=n.nodeBefore,i=n.nodeAfter;if(!e||!i||!e.is("containerElement")||!i.is("containerElement"))throw new fe("view-writer-merge-containers-invalid-position",this.document);const s=e.getChild(e.childCount-1),r=s instanceof Yi?Nt._createAt(s,"end"):Nt._createAt(e,"end");return this.move(An._createIn(i),Nt._createAt(e,"end")),this.remove(An._createOn(i)),r}insert(n,e){e=Ao(e)?[...e]:[e],_V(e,this.document);const i=e.reduce((o,a)=>{const l=o[o.length-1],c=!a.is("uiElement");return!l||l.breakAttributes!=c?o.push({breakAttributes:c,nodes:[a]}):l.nodes.push(a),o},[]);let s=null,r=n;for(const{nodes:o,breakAttributes:a}of i){const l=this._insertNodes(r,o,a);s||(s=l.start),r=l.end}return s?new An(s,r):new An(n)}remove(n){const e=n instanceof An?n:An._createOn(n);if(wp(e,this.document),e.isCollapsed)return new ih(this.document);const{start:i,end:s}=this._breakAttributesRange(e,!0),r=i.parent,o=s.offset-i.offset,a=r._removeChildren(i.offset,o);for(const c of a)this._removeFromClonedElementsGroup(c);const l=this.mergeAttributes(i);return e.start=l,e.end=l.clone(),new ih(this.document,a)}clear(n,e){wp(n,this.document);const i=n.getWalker({direction:"backward",ignoreElementEnd:!0});for(const s of i){const r=s.item;let o;if(r.is("element")&&e.isSimilar(r))o=An._createOn(r);else if(!s.nextPosition.isAfter(n.start)&&r.is("$textProxy")){const a=r.getAncestors().find(l=>l.is("element")&&e.isSimilar(l));a&&(o=An._createIn(a))}o&&(o.end.isAfter(n.end)&&(o.end=n.end),o.start.isBefore(n.start)&&(o.start=n.start),this.remove(o))}}move(n,e){let i;if(e.isAfter(n.end)){e=this._breakAttributes(e,!0);const s=e.parent,r=s.childCount;n=this._breakAttributesRange(n,!0),i=this.remove(n),e.offset+=s.childCount-r}else i=this.remove(n);return this.insert(e,i)}wrap(n,e){if(!(e instanceof nh))throw new fe("view-writer-wrap-invalid-attribute",this.document);if(wp(n,this.document),n.isCollapsed){let i=n.start;i.parent.is("element")&&!Ibe(i.parent)&&(i=i.getLastMatchingPosition(r=>r.item.is("uiElement"))),i=this._wrapPosition(i,e);const s=this.document.selection;return s.isCollapsed&&s.getFirstPosition().isEqual(n.start)&&this.setSelection(i),new An(i)}else return this._wrapRange(n,e)}unwrap(n,e){if(!(e instanceof nh))throw new fe("view-writer-unwrap-invalid-attribute",this.document);if(wp(n,this.document),n.isCollapsed)return n;const{start:i,end:s}=this._breakAttributesRange(n,!0),r=i.parent,o=this._unwrapChildren(r,i.offset,s.offset,e),a=this.mergeAttributes(o.start);a.isEqual(o.start)||o.end.offset--;const l=this.mergeAttributes(o.end);return new An(a,l)}rename(n,e){const i=new n1(this.document,n,e.getAttributes());return this.insert(Nt._createAfter(e),i),this.move(An._createIn(e),Nt._createAt(i,0)),this.remove(An._createOn(e)),i}clearClonedElementsGroup(n){this._cloneGroups.delete(n)}createPositionAt(n,e){return Nt._createAt(n,e)}createPositionAfter(n){return Nt._createAfter(n)}createPositionBefore(n){return Nt._createBefore(n)}createRange(n,e){return new An(n,e)}createRangeOn(n){return An._createOn(n)}createRangeIn(n){return An._createIn(n)}createSelection(...n){return new cc(...n)}createSlot(n="children"){if(!this._slotFactory)throw new fe("view-writer-invalid-create-slot-context",this.document);return this._slotFactory(this,n)}_registerSlotFactory(n){this._slotFactory=n}_clearSlotFactory(){this._slotFactory=null}_insertNodes(n,e,i){let s;if(i?s=jC(n):s=n.parent.is("$text")?n.parent.parent:n.parent,!s)throw new fe("view-writer-invalid-position-container",this.document);let r;i?r=this._breakAttributes(n,!0):r=n.parent.is("$text")?A5(n):n;const o=s._insertChild(r.offset,e);for(const u of e)this._addToClonedElementsGroup(u);const a=r.getShiftedBy(o),l=this.mergeAttributes(r);l.isEqual(r)||a.offset--;const c=this.mergeAttributes(a);return new An(l,c)}_wrapChildren(n,e,i,s){let r=e;const o=[];for(;r<i;){const l=n.getChild(r),c=l.is("$text"),u=l.is("attributeElement");if(u&&this._wrapAttributeElement(s,l))o.push(new Nt(n,r));else if(c||!u||Rbe(s,l)){const d=s._clone();l._remove(),d._appendChild(l),n._insertChild(r,d),this._addToClonedElementsGroup(d),o.push(new Nt(n,r))}else this._wrapChildren(l,0,l.childCount,s);r++}let a=0;for(const l of o){if(l.offset-=a,l.offset==e)continue;this.mergeAttributes(l).isEqual(l)||(a++,i--)}return An._createFromParentsAndOffsets(n,e,n,i)}_unwrapChildren(n,e,i,s){let r=e;const o=[];for(;r<i;){const l=n.getChild(r);if(!l.is("attributeElement")){r++;continue}if(l.isSimilar(s)){const c=l.getChildren(),u=l.childCount;l._remove(),n._insertChild(r,c),this._removeFromClonedElementsGroup(l),o.push(new Nt(n,r),new Nt(n,r+u)),r+=u,i+=u-1;continue}if(this._unwrapAttributeElement(s,l)){o.push(new Nt(n,r),new Nt(n,r+1)),r++;continue}this._unwrapChildren(l,0,l.childCount,s),r++}let a=0;for(const l of o){if(l.offset-=a,l.offset==e||l.offset==i)continue;this.mergeAttributes(l).isEqual(l)||(a++,i--)}return An._createFromParentsAndOffsets(n,e,n,i)}_wrapRange(n,e){const{start:i,end:s}=this._breakAttributesRange(n,!0),r=i.parent,o=this._wrapChildren(r,i.offset,s.offset,e),a=this.mergeAttributes(o.start);a.isEqual(o.start)||o.end.offset--;const l=this.mergeAttributes(o.end);return new An(a,l)}_wrapPosition(n,e){if(e.isSimilar(n.parent))return cI(n.clone());n.parent.is("$text")&&(n=A5(n));const i=this.createAttributeElement("_wrapPosition-fake-element");i._priority=Number.POSITIVE_INFINITY,i.isSimilar=()=>!1,n.parent._insertChild(n.offset,i);const s=new An(n,n.getShiftedBy(1));this.wrap(s,e);const r=new Nt(i.parent,i.index);i._remove();const o=r.nodeBefore,a=r.nodeAfter;return o instanceof Yi&&a instanceof Yi?uI(o,a):cI(r)}_wrapAttributeElement(n,e){if(!dI(n,e)||n.name!==e.name||n.priority!==e.priority)return!1;for(const i of n.getAttributeKeys())if(!(i==="class"||i==="style")&&e.hasAttribute(i)&&e.getAttribute(i)!==n.getAttribute(i))return!1;for(const i of n.getStyleNames())if(e.hasStyle(i)&&e.getStyle(i)!==n.getStyle(i))return!1;for(const i of n.getAttributeKeys())i==="class"||i==="style"||e.hasAttribute(i)||this.setAttribute(i,n.getAttribute(i),e);for(const i of n.getStyleNames())e.hasStyle(i)||this.setStyle(i,n.getStyle(i),e);for(const i of n.getClassNames())e.hasClass(i)||this.addClass(i,e);return!0}_unwrapAttributeElement(n,e){if(!dI(n,e)||n.name!==e.name||n.priority!==e.priority)return!1;for(const i of n.getAttributeKeys())if(!(i==="class"||i==="style")&&(!e.hasAttribute(i)||e.getAttribute(i)!==n.getAttribute(i)))return!1;if(!e.hasClass(...n.getClassNames()))return!1;for(const i of n.getStyleNames())if(!e.hasStyle(i)||e.getStyle(i)!==n.getStyle(i))return!1;for(const i of n.getAttributeKeys())i==="class"||i==="style"||this.removeAttribute(i,e);return this.removeClass(Array.from(n.getClassNames()),e),this.removeStyle(Array.from(n.getStyleNames()),e),!0}_breakAttributesRange(n,e=!1){const i=n.start,s=n.end;if(wp(n,this.document),n.isCollapsed){const l=this._breakAttributes(n.start,e);return new An(l,l)}const r=this._breakAttributes(s,e),o=r.parent.childCount,a=this._breakAttributes(i,e);return r.offset+=r.parent.childCount-o,new An(a,r)}_breakAttributes(n,e=!1){const i=n.offset,s=n.parent;if(n.parent.is("emptyElement"))throw new fe("view-writer-cannot-break-empty-element",this.document);if(n.parent.is("uiElement"))throw new fe("view-writer-cannot-break-ui-element",this.document);if(n.parent.is("rawElement"))throw new fe("view-writer-cannot-break-raw-element",this.document);if(!e&&s.is("$text")&&qC(s.parent)||qC(s))return n.clone();if(s.is("$text"))return this._breakAttributes(A5(n),e);const r=s.childCount;if(i==r){const o=new Nt(s.parent,s.index+1);return this._breakAttributes(o,e)}else if(i===0){const o=new Nt(s.parent,s.index);return this._breakAttributes(o,e)}else{const o=s.index+1,a=s._clone();s.parent._insertChild(o,a),this._addToClonedElementsGroup(a);const l=s.childCount-i,c=s._removeChildren(i,l);a._appendChild(c);const u=new Nt(s.parent,o);return this._breakAttributes(u,e)}}_addToClonedElementsGroup(n){if(!n.root.is("rootElement"))return;if(n.is("element"))for(const s of n.getChildren())this._addToClonedElementsGroup(s);const e=n.id;if(!e)return;let i=this._cloneGroups.get(e);i||(i=new Set,this._cloneGroups.set(e,i)),i.add(n),n._clonesGroup=i}_removeFromClonedElementsGroup(n){if(n.is("element"))for(const s of n.getChildren())this._removeFromClonedElementsGroup(s);const e=n.id;if(!e)return;const i=this._cloneGroups.get(e);i&&i.delete(n)}}function Ibe(t){return Array.from(t.getChildren()).some(n=>!n.is("uiElement"))}function jC(t){let n=t.parent;for(;!qC(n);){if(!n)return;n=n.parent}return n}function Rbe(t,n){return t.priority<n.priority?!0:t.priority>n.priority?!1:t.getIdentity()<n.getIdentity()}function cI(t){const n=t.nodeBefore;if(n&&n.is("$text"))return new Nt(n,n.data.length);const e=t.nodeAfter;return e&&e.is("$text")?new Nt(e,0):t}function A5(t){if(t.offset==t.parent.data.length)return new Nt(t.parent.parent,t.parent.index+1);if(t.offset===0)return new Nt(t.parent.parent,t.parent.index);const n=t.parent.data.slice(t.offset);return t.parent._data=t.parent.data.slice(0,t.offset),t.parent.parent._insertChild(t.parent.index+1,new Yi(t.root.document,n)),new Nt(t.parent.parent,t.parent.index+1)}function uI(t,n){const e=t.data.length;return t._data+=n.data,n._remove(),new Nt(t,e)}const Mbe=[Yi,nh,n1,NE,VE,qw];function _V(t,n){for(const e of t){if(!Mbe.some(i=>e instanceof i))throw new fe("view-writer-insert-invalid-node-type",n);e.is("$text")||_V(e.getChildren(),n)}}function qC(t){return t&&(t.is("containerElement")||t.is("documentFragment"))}function wp(t,n){const e=jC(t.start),i=jC(t.end);if(!e||!i||e!==i)throw new fe("view-writer-invalid-range-container",n)}function dI(t,n){return t.id===null&&n.id===null}const wV=t=>t.createTextNode(" "),yV=t=>{const n=t.createElement("span");return n.dataset.ckeFiller="true",n.innerText=" ",n},CV=t=>{const n=t.createElement("br");return n.dataset.ckeFiller="true",n},Ra=7,i1="⁠".repeat(Ra);function mo(t){return typeof t=="string"?t.substr(0,Ra)===i1:fs(t)&&t.data.substr(0,Ra)===i1}function Mf(t){return t.data.length==Ra&&mo(t)}function hI(t){const n=typeof t=="string"?t:t.data;return mo(t)?n.slice(Ra):n}function Pbe(t){t.document.on("arrowKey",Obe,{priority:"low"})}function Obe(t,n){if(n.keyCode==Cn.arrowleft){const e=n.domTarget.ownerDocument.defaultView.getSelection();if(e.rangeCount==1&&e.getRangeAt(0).collapsed){const i=e.getRangeAt(0).startContainer,s=e.getRangeAt(0).startOffset;mo(i)&&s<=Ra&&e.collapse(i,0)}}}let Lbe=class extends li(){constructor(e,i){super();w(this,"domDocuments",new Set);w(this,"domConverter");w(this,"markedAttributes",new Set);w(this,"markedChildren",new Set);w(this,"markedTexts",new Set);w(this,"selection");w(this,"_inlineFiller",null);w(this,"_fakeSelectionContainer",null);this.domConverter=e,this.selection=i,this.set("isFocused",!1),this.set("isSelecting",!1),this.set("isComposing",!1),sn.isBlink&&!sn.isAndroid&&this.on("change:isSelecting",()=>{this.isSelecting||this.render()})}markToSync(e,i){if(e==="text")this.domConverter.mapViewToDom(i.parent)&&this.markedTexts.add(i);else{if(!this.domConverter.mapViewToDom(i))return;if(e==="attributes")this.markedAttributes.add(i);else if(e==="children")this.markedChildren.add(i);else throw new fe("view-renderer-unknown-type",this)}}render(){if(this.isComposing&&!sn.isAndroid)return;let e=null;const i=sn.isBlink&&!sn.isAndroid?!this.isSelecting:!0;for(const s of this.markedChildren)this._updateChildrenMappings(s);i?(this._inlineFiller&&!this._isSelectionInInlineFiller()&&this._removeInlineFiller(),this._inlineFiller?e=this._getInlineFillerPosition():this._needsInlineFillerAtSelection()&&(e=this.selection.getFirstPosition(),this.markedChildren.add(e.parent))):this._inlineFiller&&this._inlineFiller.parentNode&&(e=this.domConverter.domPositionToView(this._inlineFiller),e&&e.parent.is("$text")&&(e=Nt._createBefore(e.parent)));for(const s of this.markedAttributes)this._updateAttrs(s);for(const s of this.markedChildren)this._updateChildren(s,{inlineFillerPosition:e});for(const s of this.markedTexts)!this.markedChildren.has(s.parent)&&this.domConverter.mapViewToDom(s.parent)&&this._updateText(s,{inlineFillerPosition:e});if(i)if(e){const s=this.domConverter.viewPositionToDom(e),r=s.parent.ownerDocument;mo(s.parent)?this._inlineFiller=s.parent:this._inlineFiller=fI(r,s.parent,s.offset)}else this._inlineFiller=null;this._updateFocus(),this._updateSelection(),this.domConverter._clearTemporaryCustomProperties(),this.markedTexts.clear(),this.markedAttributes.clear(),this.markedChildren.clear()}_updateChildrenMappings(e){const i=this.domConverter.mapViewToDom(e);if(!i)return;const s=Array.from(i.childNodes),r=Array.from(this.domConverter.viewChildrenToDom(e,{withChildren:!1})),o=this._diffNodeLists(s,r),a=this._findUpdateActions(o,s,r,Fbe);if(a.indexOf("update")!==-1){const l={equal:0,insert:0,delete:0};for(const c of a)if(c==="update"){const u=l.equal+l.insert,d=l.equal+l.delete,f=e.getChild(u);f&&!f.is("uiElement")&&!f.is("rawElement")&&this._updateElementMappings(f,s[d]),J9(r[u]),l.equal++}else l[c]++}}_updateElementMappings(e,i){this.domConverter.unbindDomElement(i),this.domConverter.bindElements(i,e),this.markedChildren.add(e),this.markedAttributes.add(e)}_getInlineFillerPosition(){const e=this.selection.getFirstPosition();return e.parent.is("$text")?Nt._createBefore(e.parent):e}_isSelectionInInlineFiller(){if(this.selection.rangeCount!=1||!this.selection.isCollapsed)return!1;const e=this.selection.getFirstPosition(),i=this.domConverter.viewPositionToDom(e);return!!(i&&fs(i.parent)&&mo(i.parent))}_removeInlineFiller(){const e=this._inlineFiller;if(!mo(e))throw new fe("view-renderer-filler-was-lost",this);Mf(e)?e.remove():e.data=e.data.substr(Ra),this._inlineFiller=null}_needsInlineFillerAtSelection(){if(this.selection.rangeCount!=1||!this.selection.isCollapsed)return!1;const e=this.selection.getFirstPosition(),i=e.parent,s=e.offset;if(!this.domConverter.mapViewToDom(i.root)||!i.is("element")||!Bbe(i))return!1;const r=e.nodeBefore,o=e.nodeAfter;return!(r instanceof Yi||o instanceof Yi||s===i.getFillerOffset()&&(!r||!r.is("element","br"))||sn.isAndroid&&(r||o))}_updateText(e,i){const s=this.domConverter.findCorrespondingDomText(e);let o=this.domConverter.viewToDom(e).data;const a=i.inlineFillerPosition;a&&a.parent==e.parent&&a.offset==e.index&&(o=i1+o),this._updateTextNode(s,o)}_updateAttrs(e){const i=this.domConverter.mapViewToDom(e);if(!i)return;const s=Array.from(i.attributes).map(o=>o.name),r=e.getAttributeKeys();for(const o of r)this.domConverter.setDomElementAttribute(i,o,e.getAttribute(o),e);for(const o of s)e.hasAttribute(o)||this.domConverter.removeDomElementAttribute(i,o)}_updateChildren(e,i){const s=this.domConverter.mapViewToDom(e);if(!s)return;if(sn.isAndroid){let f=null;for(const p of Array.from(s.childNodes)){if(f&&fs(f)&&fs(p)){s.normalize();break}f=p}}const r=i.inlineFillerPosition,o=s.childNodes,a=Array.from(this.domConverter.viewChildrenToDom(e,{bind:!0}));r&&r.parent===e&&fI(s.ownerDocument,a,r.offset);const l=this._diffNodeLists(o,a),c=this._findUpdateActions(l,o,a,Nbe);let u=0;const d=new Set;for(const f of c)f==="delete"?(d.add(o[u]),J9(o[u])):(f==="equal"||f==="update")&&u++;u=0;for(const f of c)f==="insert"?(oV(s,u,a[u]),u++):f==="update"?(this._updateTextNode(o[u],a[u].data),u++):f==="equal"&&(this._markDescendantTextToSync(this.domConverter.domToView(a[u])),u++);for(const f of d)f.parentNode||this.domConverter.unbindDomElement(f)}_diffNodeLists(e,i){return e=$be(e,this._fakeSelectionContainer),vg(e,i,Vbe.bind(null,this.domConverter))}_findUpdateActions(e,i,s,r){if(e.indexOf("insert")===-1||e.indexOf("delete")===-1)return e;let o=[],a=[],l=[];const c={equal:0,insert:0,delete:0};for(const u of e)u==="insert"?l.push(s[c.equal+c.insert]):u==="delete"?a.push(i[c.equal+c.delete]):(o=o.concat(vg(a,l,r).map(d=>d==="equal"?"update":d)),o.push("equal"),a=[],l=[]),c[u]++;return o.concat(vg(a,l,r).map(u=>u==="equal"?"update":u))}_updateTextNode(e,i){const s=e.data;s!=i&&(sn.isAndroid&&this.isComposing&&s.replace(/\u00A0/g," ")==i.replace(/\u00A0/g," ")||this._updateTextNodeInternal(e,i))}_updateTextNodeInternal(e,i){const s=jN(e.data,i);for(const r of s)r.type==="insert"?e.insertData(r.index,r.values.join("")):e.deleteData(r.index,r.howMany)}_markDescendantTextToSync(e){if(e){if(e.is("$text"))this.markedTexts.add(e);else if(e.is("element"))for(const i of e.getChildren())this._markDescendantTextToSync(i)}}_updateSelection(){if(sn.isBlink&&!sn.isAndroid&&this.isSelecting&&!this.markedChildren.size)return;if(this.selection.rangeCount===0){this._removeDomSelection(),this._removeFakeSelection();return}const e=this.domConverter.mapViewToDom(this.selection.editableElement);!this.isFocused||!e||(this.selection.isFake?this._updateFakeSelection(e):this._fakeSelectionContainer&&this._fakeSelectionContainer.isConnected?(this._removeFakeSelection(),this._updateDomSelection(e)):this.isComposing&&sn.isAndroid||this._updateDomSelection(e))}_updateFakeSelection(e){const i=e.ownerDocument;this._fakeSelectionContainer||(this._fakeSelectionContainer=zbe(i));const s=this._fakeSelectionContainer;if(this.domConverter.bindFakeSelection(s,this.selection),!this._fakeSelectionNeedsUpdate(e))return;(!s.parentElement||s.parentElement!=e)&&e.appendChild(s),s.textContent=this.selection.fakeSelectionLabel||" ";const r=i.getSelection(),o=i.createRange();r.removeAllRanges(),o.selectNodeContents(s),r.addRange(o)}_updateDomSelection(e){const i=e.ownerDocument.defaultView.getSelection();if(!this._domSelectionNeedsUpdate(i))return;const s=this.domConverter.viewPositionToDom(this.selection.anchor),r=this.domConverter.viewPositionToDom(this.selection.focus);i.setBaseAndExtent(s.parent,s.offset,r.parent,r.offset),sn.isGecko&&Dbe(r,i)}_domSelectionNeedsUpdate(e){if(!this.domConverter.isDomSelectionCorrect(e))return!0;const i=e&&this.domConverter.domSelectionToView(e);return!(i&&this.selection.isEqual(i)||!this.selection.isCollapsed&&this.selection.isSimilar(i))}_fakeSelectionNeedsUpdate(e){const i=this._fakeSelectionContainer,s=e.ownerDocument.getSelection();return!i||i.parentElement!==e||s.anchorNode!==i&&!i.contains(s.anchorNode)?!0:i.textContent!==this.selection.fakeSelectionLabel}_removeDomSelection(){for(const e of this.domDocuments){const i=e.getSelection();if(i.rangeCount){const s=e.activeElement,r=this.domConverter.mapDomToView(s);s&&r&&i.removeAllRanges()}}}_removeFakeSelection(){const e=this._fakeSelectionContainer;e&&e.remove()}_updateFocus(){if(this.isFocused){const e=this.selection.editableElement;e&&this.domConverter.focus(e)}}};function Bbe(t){if(t.getAttribute("contenteditable")=="false")return!1;const n=t.findAncestor(e=>e.hasAttribute("contenteditable"));return!n||n.getAttribute("contenteditable")=="true"}function fI(t,n,e){const i=n instanceof Array?n:n.childNodes,s=i[e];if(fs(s))return s.data=i1+s.data,s;{const r=t.createTextNode(i1);return Array.isArray(n)?i.splice(e,0,r):oV(n,e,r),r}}function Fbe(t,n){return Du(t)&&Du(n)&&!fs(t)&&!fs(n)&&!wg(t)&&!wg(n)&&t.tagName.toLowerCase()===n.tagName.toLowerCase()}function Nbe(t,n){return Du(t)&&Du(n)&&fs(t)&&fs(n)}function Vbe(t,n,e){return n===e?!0:fs(n)&&fs(e)?n.data===e.data:!!(t.isBlockFiller(n)&&t.isBlockFiller(e))}function Dbe(t,n){let e=t.parent,i=t.offset;if(fs(e)&&Mf(e)&&(i=Hp(e)+1,e=e.parentNode),e.nodeType!=Node.ELEMENT_NODE||i!=e.childNodes.length-1)return;const s=e.childNodes[i];s&&s.tagName=="BR"&&n.addRange(n.getRangeAt(0))}function $be(t,n){const e=Array.from(t);return e.length==0||!n||e[e.length-1]==n&&e.pop(),e}function zbe(t){const n=t.createElement("div");return n.className="ck-fake-selection-container",Object.assign(n.style,{position:"fixed",top:0,left:"-9999px",width:"42px"}),n.textContent=" ",n}const Hbe=CV($t.document),Ube=wV($t.document),Wbe=yV($t.document),bv="data-ck-unsafe-attribute-",mI="data-ck-unsafe-element";class Kw{constructor(n,{blockFillerMode:e,renderingMode:i="editing"}={}){w(this,"document");w(this,"renderingMode");w(this,"blockFillerMode");w(this,"preElements");w(this,"blockElements");w(this,"inlineObjectElements");w(this,"unsafeElements");w(this,"_domDocument");w(this,"_domToViewMapping",new WeakMap);w(this,"_viewToDomMapping",new WeakMap);w(this,"_fakeSelectionMapping",new WeakMap);w(this,"_rawContentElementMatcher",new Io);w(this,"_inlineObjectElementMatcher",new Io);w(this,"_elementsWithTemporaryCustomProperties",new Set);this.document=n,this.renderingMode=i,this.blockFillerMode=e||(i==="editing"?"br":"nbsp"),this.preElements=["pre"],this.blockElements=["address","article","aside","blockquote","caption","center","dd","details","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","legend","li","main","menu","nav","ol","p","pre","section","summary","table","tbody","td","tfoot","th","thead","tr","ul"],this.inlineObjectElements=["object","iframe","input","button","textarea","select","option","video","embed","audio","img","canvas"],this.unsafeElements=["script","style"],this._domDocument=this.renderingMode==="editing"?$t.document:$t.document.implementation.createHTMLDocument("")}bindFakeSelection(n,e){this._fakeSelectionMapping.set(n,new cc(e))}fakeSelectionToView(n){return this._fakeSelectionMapping.get(n)}bindElements(n,e){this._domToViewMapping.set(n,e),this._viewToDomMapping.set(e,n)}unbindDomElement(n){const e=this._domToViewMapping.get(n);if(e){this._domToViewMapping.delete(n),this._viewToDomMapping.delete(e);for(const i of Array.from(n.children))this.unbindDomElement(i)}}bindDocumentFragments(n,e){this._domToViewMapping.set(n,e),this._viewToDomMapping.set(e,n)}shouldRenderAttribute(n,e,i){return this.renderingMode==="data"?!0:(n=n.toLowerCase(),n.startsWith("on")||n==="srcdoc"&&e.match(/\bon\S+\s*=|javascript:|<\s*\/*script/i)?!1:i==="img"&&(n==="src"||n==="srcset")||i==="source"&&n==="srcset"?!0:!e.match(/^\s*(javascript:|data:(image\/svg|text\/x?html))/i))}setContentOf(n,e){if(this.renderingMode==="data"){n.innerHTML=e;return}const i=new DOMParser().parseFromString(e,"text/html"),s=i.createDocumentFragment(),r=i.body.childNodes;for(;r.length>0;)s.appendChild(r[0]);const o=i.createTreeWalker(s,NodeFilter.SHOW_ELEMENT),a=[];let l;for(;l=o.nextNode();)a.push(l);for(const c of a){for(const d of c.getAttributeNames())this.setDomElementAttribute(c,d,c.getAttribute(d));const u=c.tagName.toLowerCase();this._shouldRenameElement(u)&&(gI(u),c.replaceWith(this._createReplacementDomElement(u,c)))}for(;n.firstChild;)n.firstChild.remove();n.append(s)}viewToDom(n,e={}){if(n.is("$text")){const i=this._processDataFromViewText(n);return this._domDocument.createTextNode(i)}else{const i=n;if(this.mapViewToDom(i))if(i.getCustomProperty("editingPipeline:doNotReuseOnce"))this._elementsWithTemporaryCustomProperties.add(i);else return this.mapViewToDom(i);let s;if(i.is("documentFragment"))s=this._domDocument.createDocumentFragment(),e.bind&&this.bindDocumentFragments(s,i);else{if(i.is("uiElement"))return i.name==="$comment"?s=this._domDocument.createComment(i.getCustomProperty("$rawContent")):s=i.render(this._domDocument,this),e.bind&&this.bindElements(s,i),s;this._shouldRenameElement(i.name)?(gI(i.name),s=this._createReplacementDomElement(i.name)):i.hasAttribute("xmlns")?s=this._domDocument.createElementNS(i.getAttribute("xmlns"),i.name):s=this._domDocument.createElement(i.name),i.is("rawElement")&&i.render(s,this),e.bind&&this.bindElements(s,i);for(const r of i.getAttributeKeys())this.setDomElementAttribute(s,r,i.getAttribute(r),i)}if(e.withChildren!==!1)for(const r of this.viewChildrenToDom(i,e))s instanceof HTMLTemplateElement?s.content.appendChild(r):s.appendChild(r);return s}}setDomElementAttribute(n,e,i,s){const r=this.shouldRenderAttribute(e,i,n.tagName.toLowerCase())||s&&s.shouldRenderUnsafeAttribute(e);if(r||qn("domconverter-unsafe-attribute-detected",{domElement:n,key:e,value:i}),!Ave(e)){qn("domconverter-invalid-attribute-detected",{domElement:n,key:e,value:i});return}n.hasAttribute(e)&&!r?n.removeAttribute(e):n.hasAttribute(bv+e)&&r&&n.removeAttribute(bv+e),n.setAttribute(r?e:bv+e,i)}removeDomElementAttribute(n,e){e!=mI&&(n.removeAttribute(e),n.removeAttribute(bv+e))}*viewChildrenToDom(n,e={}){const i=n.getFillerOffset&&n.getFillerOffset();let s=0;for(const r of n.getChildren()){i===s&&(yield this._getBlockFiller());const o=r.is("element")&&!!r.getCustomProperty("dataPipeline:transparentRendering")&&!bs(r.getAttributes());if(o&&this.renderingMode=="data")if(r.is("rawElement")){const a=this._domDocument.createElement(r.name);r.render(a,this),yield*[...a.childNodes]}else yield*this.viewChildrenToDom(r,e);else o&&qn("domconverter-transparent-rendering-unsupported-in-editing-pipeline",{viewElement:r}),yield this.viewToDom(r,e);s++}i===s&&(yield this._getBlockFiller())}viewRangeToDom(n){const e=this.viewPositionToDom(n.start),i=this.viewPositionToDom(n.end),s=this._domDocument.createRange();return s.setStart(e.parent,e.offset),s.setEnd(i.parent,i.offset),s}viewPositionToDom(n){const e=n.parent;if(e.is("$text")){const i=this.findCorrespondingDomText(e);if(!i)return null;let s=n.offset;return mo(i)&&(s+=Ra),{parent:i,offset:s}}else{let i,s,r;if(n.offset===0){if(i=this.mapViewToDom(e),!i)return null;r=i.childNodes[0]}else{const a=n.nodeBefore;if(s=a.is("$text")?this.findCorrespondingDomText(a):this.mapViewToDom(a),!s)return null;i=s.parentNode,r=s.nextSibling}if(fs(r)&&mo(r))return{parent:r,offset:Ra};const o=s?Hp(s)+1:0;return{parent:i,offset:o}}}domToView(n,e={}){const i=[],s=this._domToView(n,e,i),r=s.next().value;return!r||(s.next(),this._processDomInlineNodes(null,i,e),r.is("$text")&&r.data.length==0)?null:r}*domChildrenToView(n,e={},i=[]){let s=[];n instanceof HTMLTemplateElement?s=[...n.content.childNodes]:s=[...n.childNodes];for(let r=0;r<s.length;r++){const o=s[r],a=this._domToView(o,e,i),l=a.next().value;l!==null&&(this._isBlockViewElement(l)&&this._processDomInlineNodes(n,i,e),yield l,a.next())}this._processDomInlineNodes(n,i,e)}domSelectionToView(n){if(Kbe(n))return new cc([]);if(n.rangeCount===1){let s=n.getRangeAt(0).startContainer;fs(s)&&(s=s.parentNode);const r=this.fakeSelectionToView(s);if(r)return r}const e=this.isDomSelectionBackward(n),i=[];for(let s=0;s<n.rangeCount;s++){const r=n.getRangeAt(s),o=this.domRangeToView(r);o&&i.push(o)}return new cc(i,{backward:e})}domRangeToView(n){const e=this.domPositionToView(n.startContainer,n.startOffset),i=this.domPositionToView(n.endContainer,n.endOffset);return e&&i?new An(e,i):null}domPositionToView(n,e=0){if(this.isBlockFiller(n))return this.domPositionToView(n.parentNode,Hp(n));const i=this.mapDomToView(n);if(i&&(i.is("uiElement")||i.is("rawElement")))return Nt._createBefore(i);if(fs(n)){if(Mf(n))return this.domPositionToView(n.parentNode,Hp(n));const s=this.findCorrespondingViewText(n);let r=e;return s?(mo(n)&&(r-=Ra,r=r<0?0:r),new Nt(s,r)):null}else{if(e===0){const s=this.mapDomToView(n);if(s)return new Nt(s,0)}else{const s=n.childNodes[e-1];if(fs(s)&&Mf(s)||s&&this.isBlockFiller(s))return this.domPositionToView(s.parentNode,Hp(s));const r=fs(s)?this.findCorrespondingViewText(s):this.mapDomToView(s);if(r&&r.parent)return new Nt(r.parent,r.index+1)}return null}}mapDomToView(n){return this.getHostViewElement(n)||this._domToViewMapping.get(n)}findCorrespondingViewText(n){if(Mf(n))return null;const e=this.getHostViewElement(n);if(e)return e;const i=n.previousSibling;if(i){if(!this.isElement(i))return null;const s=this.mapDomToView(i);if(s){const r=s.nextSibling;return r instanceof Yi?r:null}}else{const s=this.mapDomToView(n.parentNode);if(s){const r=s.getChild(0);return r instanceof Yi?r:null}}return null}mapViewToDom(n){return this._viewToDomMapping.get(n)}findCorrespondingDomText(n){const e=n.previousSibling;return e&&this.mapViewToDom(e)?this.mapViewToDom(e).nextSibling:!e&&n.parent&&this.mapViewToDom(n.parent)?this.mapViewToDom(n.parent).childNodes[0]:null}focus(n){const e=this.mapViewToDom(n);if(e&&e.ownerDocument.activeElement!==e){const{scrollX:i,scrollY:s}=$t.window,r=[];pI(e,o=>{const{scrollLeft:a,scrollTop:l}=o;r.push([a,l])}),e.focus(),pI(e,o=>{const[a,l]=r.shift();o.scrollLeft=a,o.scrollTop=l}),$t.window.scrollTo(i,s)}}_clearDomSelection(){const n=this.mapViewToDom(this.document.selection.editableElement);if(!n)return;const e=n.ownerDocument.defaultView.getSelection(),i=this.domSelectionToView(e);i&&i.rangeCount>0&&e.removeAllRanges()}isElement(n){return n&&n.nodeType==Node.ELEMENT_NODE}isDocumentFragment(n){return n&&n.nodeType==Node.DOCUMENT_FRAGMENT_NODE}isBlockFiller(n){return this.blockFillerMode=="br"?n.isEqualNode(Hbe):n.tagName==="BR"&&kV(n,this.blockElements)&&n.parentNode.childNodes.length===1?!0:n.isEqualNode(Wbe)||qbe(n,this.blockElements)}isDomSelectionBackward(n){if(n.isCollapsed)return!1;const e=this._domDocument.createRange();try{e.setStart(n.anchorNode,n.anchorOffset),e.setEnd(n.focusNode,n.focusOffset)}catch{return!1}const i=e.collapsed;return e.detach(),i}getHostViewElement(n){const e=Eve(n);for(e.pop();e.length;){const i=e.pop(),s=this._domToViewMapping.get(i);if(s&&(s.is("uiElement")||s.is("rawElement")))return s}return null}isDomSelectionCorrect(n){return this._isDomSelectionPositionCorrect(n.anchorNode,n.anchorOffset)&&this._isDomSelectionPositionCorrect(n.focusNode,n.focusOffset)}registerRawContentMatcher(n){this._rawContentElementMatcher.add(n)}registerInlineObjectMatcher(n){this._inlineObjectElementMatcher.add(n)}_clearTemporaryCustomProperties(){for(const n of this._elementsWithTemporaryCustomProperties)n._removeCustomProperty("editingPipeline:doNotReuseOnce");this._elementsWithTemporaryCustomProperties.clear()}_getBlockFiller(){switch(this.blockFillerMode){case"nbsp":return wV(this._domDocument);case"markedNbsp":return yV(this._domDocument);case"br":return CV(this._domDocument)}}_isDomSelectionPositionCorrect(n,e){if(fs(n)&&mo(n)&&e<Ra||this.isElement(n)&&mo(n.childNodes[e]))return!1;const i=this.mapDomToView(n);return!(i&&(i.is("uiElement")||i.is("rawElement")))}*_domToView(n,e,i){if(this.isBlockFiller(n))return null;const s=this.getHostViewElement(n);if(s)return s;if(wg(n)&&e.skipComments)return null;if(fs(n)){if(Mf(n))return null;{const r=n.data;if(r==="")return null;const o=new Yi(this.document,r);return i.push(o),o}}else{let r=this.mapDomToView(n);if(r)return this._isInlineObjectElement(r)&&i.push(r),r;if(this.isDocumentFragment(n))r=new ih(this.document),e.bind&&this.bindDocumentFragments(n,r);else{r=this._createViewElement(n,e),e.bind&&this.bindElements(n,r);const a=n.attributes;if(a)for(let l=a.length,c=0;c<l;c++)r._setAttribute(a[c].name,a[c].value);if(this._isViewElementWithRawContent(r,e))return r._setCustomProperty("$rawContent",n.innerHTML),this._isBlockViewElement(r)||i.push(r),r;if(wg(n))return r._setCustomProperty("$rawContent",n.data),r}yield r;const o=[];if(e.withChildren!==!1)for(const a of this.domChildrenToView(n,e,o))r._appendChild(a);if(this._isInlineObjectElement(r))i.push(r);else for(const a of o)i.push(a)}}_processDomInlineNodes(n,e,i){if(!e.length||n&&!this.isDocumentFragment(n)&&!this._isBlockDomElement(n))return;let s=!1;for(let r=0;r<e.length;r++){const o=e[r];if(!o.is("$text")){s=!1;continue}let a,l=!1;if(this._isPreFormatted(o))a=hI(o.data);else{a=o.data.replace(/[ \n\t\r]{1,}/g," "),l=/[^\S\u00A0]/.test(a.charAt(a.length-1));const c=r>0?e[r-1]:null,u=r+1<e.length?e[r+1]:null,d=!c||c.is("element")&&c.name=="br"||s,f=u?!1:!mo(o.data);i.withChildren!==!1&&(d&&(a=a.replace(/^ /,"")),f&&(a=a.replace(/ $/,""))),a=hI(a),a=a.replace(/ \u00A0/g,"  ");const p=u&&u.is("element")&&u.name!="br",m=u&&u.is("$text")&&u.data.charAt(0)==" ";(/[ \u00A0]\u00A0$/.test(a)||!u||p||m)&&(a=a.replace(/\u00A0$/," ")),(d||c&&c.is("element")&&c.name!="br")&&(a=a.replace(/^\u00A0/," "))}a.length==0&&o.parent?(o._remove(),e.splice(r,1),r--):(o._data=a,s=l)}e.length=0}_processDataFromViewText(n){let e=n.data;if(this._isPreFormatted(n))return e;if(e.charAt(0)==" "){const i=this._getTouchingInlineViewNode(n,!1);(i&&i.is("$textProxy")&&this._nodeEndsWithSpace(i)||!i)&&(e=" "+e.substr(1))}if(e.charAt(e.length-1)==" "){const i=this._getTouchingInlineViewNode(n,!0),s=i&&i.is("$textProxy")&&i.data.charAt(0)==" ";(e.charAt(e.length-2)==" "||!i||s)&&(e=e.substr(0,e.length-1)+" ")}return e.replace(/ {2}/g,"  ")}_nodeEndsWithSpace(n){if(this._isPreFormatted(n))return!1;const e=this._processDataFromViewText(n);return e.charAt(e.length-1)==" "}_isPreFormatted(n){if(jbe(n,this.preElements))return!0;for(const e of n.getAncestors({parentFirst:!0}))if(!(!e.is("element")||!e.hasStyle("white-space")||e.getStyle("white-space")==="inherit"))return["pre","pre-wrap","break-spaces"].includes(e.getStyle("white-space"));return!1}_getTouchingInlineViewNode(n,e){const i=new Yd({startPosition:e?Nt._createAfter(n):Nt._createBefore(n),direction:e?"forward":"backward"});for(const{item:s}of i){if(s.is("$textProxy"))return s;if(s.is("element")&&s.getCustomProperty("dataPipeline:transparentRendering"))continue;if(s.is("element","br"))return null;if(this._isInlineObjectElement(s))return s;if(s.is("containerElement"))return null}return null}_isBlockDomElement(n){return this.isElement(n)&&this.blockElements.includes(n.tagName.toLowerCase())}_isBlockViewElement(n){return n.is("element")&&this.blockElements.includes(n.name)}_isInlineObjectElement(n){return n.is("element")?n.name=="br"||this.inlineObjectElements.includes(n.name)||!!this._inlineObjectElementMatcher.match(n):!1}_createViewElement(n,e){if(wg(n))return new qw(this.document,"$comment");const i=e.keepOriginalCase?n.tagName:n.tagName.toLowerCase();return new Da(this.document,i)}_isViewElementWithRawContent(n,e){return e.withChildren!==!1&&n.is("element")&&!!this._rawContentElementMatcher.match(n)}_shouldRenameElement(n){const e=n.toLowerCase();return this.renderingMode==="editing"&&this.unsafeElements.includes(e)}_createReplacementDomElement(n,e){const i=this._domDocument.createElement("span");if(i.setAttribute(mI,n),e){for(;e.firstChild;)i.appendChild(e.firstChild);for(const s of e.getAttributeNames())i.setAttribute(s,e.getAttribute(s))}return i}}function jbe(t,n){return t.getAncestors().some(e=>e.is("element")&&n.includes(e.name))}function pI(t,n){let e=t;for(;e;)n(e),e=e.parentElement}function qbe(t,n){return t.isEqualNode(Ube)&&kV(t,n)&&t.parentNode.childNodes.length===1}function kV(t,n){const e=t.parentNode;return!!e&&!!e.tagName&&n.includes(e.tagName.toLowerCase())}function gI(t){t==="script"&&qn("domconverter-unsafe-script-element-detected"),t==="style"&&qn("domconverter-unsafe-style-element-detected")}function Kbe(t){if(!sn.isGecko||!t.rangeCount)return!1;const n=t.getRangeAt(0).startContainer;try{Object.prototype.toString.call(n)}catch{return!0}return!1}class Rl extends Rr(){constructor(e){super();w(this,"view");w(this,"document");w(this,"_isEnabled",!1);this.view=e,this.document=e.document}get isEnabled(){return this._isEnabled}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}destroy(){this.disable(),this.stopListening()}checkShouldIgnoreEventFromTarget(e){return e&&e.nodeType===3&&(e=e.parentNode),!e||e.nodeType!==1?!1:e.matches("[data-cke-ignore-events], [data-cke-ignore-events] *")}}class um{constructor(n,e,i){w(this,"view");w(this,"document");w(this,"domEvent");w(this,"domTarget");this.view=n,this.document=n.document,this.domEvent=e,this.domTarget=e.target,BL(this,i)}get target(){return this.view.domConverter.mapDomToView(this.domTarget)}preventDefault(){this.domEvent.preventDefault()}stopPropagation(){this.domEvent.stopPropagation()}}class Oc extends Rl{constructor(){super(...arguments);w(this,"useCapture",!1)}observe(e){(typeof this.domEventType=="string"?[this.domEventType]:this.domEventType).forEach(s=>{this.listenTo(e,s,(r,o)=>{this.isEnabled&&!this.checkShouldIgnoreEventFromTarget(o.target)&&this.onDomEvent(o)},{useCapture:this.useCapture})})}stopObserving(e){this.stopListening(e)}fire(e,i,s){this.isEnabled&&this.document.fire(e,new um(this.view,i,s))}}class Gbe extends Oc{constructor(){super(...arguments);w(this,"domEventType",["keydown","keyup"])}onDomEvent(e){const i={keyCode:e.keyCode,altKey:e.altKey,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,metaKey:e.metaKey,get keystroke(){return vh(this)}};this.fire(e.type,e,i)}}class Ybe extends Rl{constructor(e){super(e);w(this,"_fireSelectionChangeDoneDebounced");this._fireSelectionChangeDoneDebounced=Ss(i=>{this.document.fire("selectionChangeDone",i)},200)}observe(){const e=this.document;e.on("arrowKey",(i,s)=>{e.selection.isFake&&this.isEnabled&&s.preventDefault()},{context:"$capture"}),e.on("arrowKey",(i,s)=>{e.selection.isFake&&this.isEnabled&&this._handleSelectionMove(s.keyCode)},{priority:"lowest"})}stopObserving(){}destroy(){super.destroy(),this._fireSelectionChangeDoneDebounced.cancel()}_handleSelectionMove(e){const i=this.document.selection,s=new cc(i.getRanges(),{backward:i.isBackward,fake:!1});(e==Cn.arrowleft||e==Cn.arrowup)&&s.setTo(s.getFirstPosition()),(e==Cn.arrowright||e==Cn.arrowdown)&&s.setTo(s.getLastPosition());const r={oldSelection:i,newSelection:s,domSelection:null};this.document.fire("selectionChange",r),this._fireSelectionChangeDoneDebounced(r)}}let EV=class extends Rl{constructor(e){super(e);w(this,"domConverter");w(this,"_config");w(this,"_domElements");w(this,"_mutationObserver");this._config={childList:!0,characterData:!0,subtree:!0},this.domConverter=e.domConverter,this._domElements=new Set,this._mutationObserver=new window.MutationObserver(this._onMutations.bind(this))}flush(){this._onMutations(this._mutationObserver.takeRecords())}observe(e){this._domElements.add(e),this.isEnabled&&this._mutationObserver.observe(e,this._config)}stopObserving(e){if(this._domElements.delete(e),this.isEnabled){this._mutationObserver.disconnect();for(const i of this._domElements)this._mutationObserver.observe(i,this._config)}}enable(){super.enable();for(const e of this._domElements)this._mutationObserver.observe(e,this._config)}disable(){super.disable(),this._mutationObserver.disconnect()}destroy(){super.destroy(),this._mutationObserver.disconnect()}_onMutations(e){if(e.length===0)return;const i=this.domConverter,s=new Set,r=new Set;for(const a of e){const l=i.mapDomToView(a.target);l&&(l.is("uiElement")||l.is("rawElement")||a.type==="childList"&&!this._isBogusBrMutation(a)&&r.add(l))}for(const a of e){const l=i.mapDomToView(a.target);if(!(l&&(l.is("uiElement")||l.is("rawElement")))&&a.type==="characterData"){const c=i.findCorrespondingViewText(a.target);c&&!r.has(c.parent)?s.add(c):!c&&mo(a.target)&&r.add(i.mapDomToView(a.target.parentNode))}}const o=[];for(const a of s)o.push({type:"text",node:a});for(const a of r){const l=i.mapViewToDom(a),c=Array.from(a.getChildren()),u=Array.from(i.domChildrenToView(l,{withChildren:!1}));ioe(c,u,Zbe)||o.push({type:"children",node:a})}o.length&&this.document.fire("mutations",{mutations:o})}_isBogusBrMutation(e){let i=null;return e.nextSibling===null&&e.removedNodes.length===0&&e.addedNodes.length==1&&(i=this.domConverter.domToView(e.addedNodes[0],{withChildren:!1})),i&&i.is("element","br")}};function Zbe(t,n){if(!Array.isArray(t))return t===n?!0:t.is("$text")&&n.is("$text")?t.data===n.data:!1}class y_ extends Oc{constructor(e){super(e);w(this,"_renderTimeoutId",null);w(this,"_isFocusChanging",!1);w(this,"domEventType",["focus","blur"]);this.useCapture=!0;const i=this.document;i.on("focus",()=>this._handleFocus()),i.on("blur",(s,r)=>this._handleBlur(r)),i.on("beforeinput",()=>{i.isFocused||this._handleFocus()},{priority:"highest"})}flush(){this._isFocusChanging&&(this._isFocusChanging=!1,this.document.isFocused=!0)}onDomEvent(e){this.fire(e.type,e)}destroy(){this._clearTimeout(),super.destroy()}_handleFocus(){this._clearTimeout(),this._isFocusChanging=!0,this._renderTimeoutId=setTimeout(()=>{this._renderTimeoutId=null,this.flush(),this.view.change(()=>{})},50)}_handleBlur(e){const i=this.document.selection.editableElement;(i===null||i===e.target)&&(this.document.isFocused=!1,this._isFocusChanging=!1,this.view.change(()=>{}))}_clearTimeout(){this._renderTimeoutId&&(clearTimeout(this._renderTimeoutId),this._renderTimeoutId=null)}}class Xbe extends Rl{constructor(e){super(e);w(this,"mutationObserver");w(this,"focusObserver");w(this,"selection");w(this,"domConverter");w(this,"_documents");w(this,"_fireSelectionChangeDoneDebounced");w(this,"_clearInfiniteLoopInterval");w(this,"_documentIsSelectingInactivityTimeoutDebounced");w(this,"_loopbackCounter");this.mutationObserver=e.getObserver(EV),this.focusObserver=e.getObserver(y_),this.selection=this.document.selection,this.domConverter=e.domConverter,this._documents=new WeakSet,this._fireSelectionChangeDoneDebounced=Ss(i=>{this.document.fire("selectionChangeDone",i)},200),this._clearInfiniteLoopInterval=setInterval(()=>this._clearInfiniteLoop(),1e3),this._documentIsSelectingInactivityTimeoutDebounced=Ss(()=>this.document.isSelecting=!1,5e3),this._loopbackCounter=0}observe(e){const i=e.ownerDocument,s=()=>{this.document.isSelecting=!0,this._documentIsSelectingInactivityTimeoutDebounced()},r=()=>{this.document.isSelecting&&(this._handleSelectionChange(i),this.document.isSelecting=!1,this._documentIsSelectingInactivityTimeoutDebounced.cancel())};this.listenTo(e,"selectstart",s,{priority:"highest"}),this.listenTo(e,"keydown",r,{priority:"highest",useCapture:!0}),this.listenTo(e,"keyup",r,{priority:"highest",useCapture:!0}),!this._documents.has(i)&&(this.listenTo(i,"mouseup",r,{priority:"highest",useCapture:!0}),this.listenTo(i,"selectionchange",(o,a)=>{this.document.isComposing&&!sn.isAndroid||(this._handleSelectionChange(i),this._documentIsSelectingInactivityTimeoutDebounced())}),this.listenTo(this.view.document,"compositionstart",()=>{this._handleSelectionChange(i)},{priority:"lowest"}),this._documents.add(i))}stopObserving(e){this.stopListening(e)}destroy(){super.destroy(),clearInterval(this._clearInfiniteLoopInterval),this._fireSelectionChangeDoneDebounced.cancel(),this._documentIsSelectingInactivityTimeoutDebounced.cancel()}_reportInfiniteLoop(){}_handleSelectionChange(e){if(!this.isEnabled)return;const i=e.defaultView.getSelection();if(this.checkShouldIgnoreEventFromTarget(i.anchorNode))return;this.mutationObserver.flush();const s=this.domConverter.domSelectionToView(i);if(s.rangeCount==0){this.view.hasDomSelection=!1;return}if(this.view.hasDomSelection=!0,this.focusObserver.flush(),!(this.selection.isEqual(s)&&this.domConverter.isDomSelectionCorrect(i))){if(++this._loopbackCounter>60){this._reportInfiniteLoop();return}if(this.selection.isSimilar(s))this.view.forceRender();else{const r={oldSelection:this.selection,newSelection:s,domSelection:i};this.document.fire("selectionChange",r),this._fireSelectionChangeDoneDebounced(r)}}}_clearInfiniteLoop(){this._loopbackCounter=0}}class Jbe extends Oc{constructor(e){super(e);w(this,"domEventType",["compositionstart","compositionupdate","compositionend"]);const i=this.document;i.on("compositionstart",()=>{i.isComposing=!0},{priority:"low"}),i.on("compositionend",()=>{i.isComposing=!1},{priority:"low"})}onDomEvent(e){this.fire(e.type,e,{data:e.data})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class SV{constructor(n,e={}){w(this,"_files");w(this,"_native");this._files=e.cacheFiles?vI(n):null,this._native=n}get files(){return this._files||(this._files=vI(this._native)),this._files}get types(){return this._native.types}getData(n){return this._native.getData(n)}setData(n,e){this._native.setData(n,e)}set effectAllowed(n){this._native.effectAllowed=n}get effectAllowed(){return this._native.effectAllowed}set dropEffect(n){this._native.dropEffect=n}get dropEffect(){return this._native.dropEffect}setDragImage(n,e,i){this._native.setDragImage(n,e,i)}get isCanceled(){return this._native.dropEffect=="none"||!!this._native.mozUserCancelled}}function vI(t){const n=Array.from(t.files||[]),e=Array.from(t.items||[]);return n.length?n:e.filter(i=>i.kind==="file").map(i=>i.getAsFile())}class Qbe extends Oc{constructor(){super(...arguments);w(this,"domEventType","beforeinput")}onDomEvent(e){const i=e.getTargetRanges(),s=this.view,r=s.document;let o=null,a=null,l=[];if(e.dataTransfer&&(o=new SV(e.dataTransfer)),e.data!==null?a=e.data:o&&(a=o.getData("text/plain")),r.selection.isFake)l=Array.from(r.selection.getRanges());else if(i.length)l=i.map(c=>{const u=s.domConverter.domPositionToView(c.startContainer,c.startOffset),d=s.domConverter.domPositionToView(c.endContainer,c.endOffset);if(u)return s.createRange(u,d);if(d)return s.createRange(d)}).filter(c=>!!c);else if(sn.isAndroid){const c=e.target.ownerDocument.defaultView.getSelection();l=Array.from(s.domConverter.domSelectionToView(c).getRanges())}if(sn.isAndroid&&e.inputType=="insertCompositionText"&&a&&a.endsWith(`
`)){this.fire(e.type,e,{inputType:"insertParagraph",targetRanges:[s.createRange(l[0].end)]});return}if(e.inputType=="insertText"&&a&&a.includes(`
`)){const c=a.split(/\n{1,2}/g);let u=l;for(let d=0;d<c.length;d++){const f=c[d];f!=""&&(this.fire(e.type,e,{data:f,dataTransfer:o,targetRanges:u,inputType:e.inputType,isComposing:e.isComposing}),u=[r.selection.getFirstRange()]),d+1<c.length&&(this.fire(e.type,e,{inputType:"insertParagraph",targetRanges:u}),u=[r.selection.getFirstRange()])}return}this.fire(e.type,e,{data:a,dataTransfer:o,targetRanges:l,inputType:e.inputType,isComposing:e.isComposing})}}class e_e extends Rl{constructor(n){super(n),this.document.on("keydown",(e,i)=>{if(this.isEnabled&&Nve(i.keyCode)){const s=new Lm(this.document,"arrowKey",this.document.selection.getFirstRange());this.document.fire(s,i),s.stop.called&&e.stop()}})}observe(){}stopObserving(){}}class t_e extends Rl{constructor(n){super(n);const e=this.document;e.on("keydown",(i,s)=>{if(!this.isEnabled||s.keyCode!=Cn.tab||s.ctrlKey)return;const r=new Lm(e,"tab",e.selection.getFirstRange());e.fire(r,s),r.stop.called&&i.stop()})}observe(){}stopObserving(){}}let n_e=class extends li(){constructor(e){super();w(this,"document");w(this,"domConverter");w(this,"domRoots",new Map);w(this,"_renderer");w(this,"_initialDomRootAttributes",new WeakMap);w(this,"_observers",new Map);w(this,"_writer");w(this,"_ongoingChange",!1);w(this,"_postFixersInProgress",!1);w(this,"_renderingDisabled",!1);w(this,"_hasChangedSinceTheLastRendering",!1);this.document=new jw(e),this.domConverter=new Kw(this.document),this.set("isRenderingInProgress",!1),this.set("hasDomSelection",!1),this._renderer=new Lbe(this.domConverter,this.document.selection),this._renderer.bind("isFocused","isSelecting","isComposing").to(this.document,"isFocused","isSelecting","isComposing"),this._writer=new bV(this.document),this.addObserver(EV),this.addObserver(y_),this.addObserver(Xbe),this.addObserver(Gbe),this.addObserver(Ybe),this.addObserver(Jbe),this.addObserver(e_e),this.addObserver(Qbe),this.addObserver(t_e),Pbe(this),Ebe(this),this.on("render",()=>{this._render(),this.document.fire("layoutChanged"),this._hasChangedSinceTheLastRendering=!1}),this.listenTo(this.document.selection,"change",()=>{this._hasChangedSinceTheLastRendering=!0}),this.listenTo(this.document,"change:isFocused",()=>{this._hasChangedSinceTheLastRendering=!0}),sn.isiOS&&this.listenTo(this.document,"blur",(i,s)=>{this.domConverter.mapDomToView(s.domEvent.relatedTarget)||this.domConverter._clearDomSelection()}),this.listenTo(this.document,"mutations",(i,{mutations:s})=>{s.forEach(r=>this._renderer.markToSync(r.type,r.node))},{priority:"low"}),this.listenTo(this.document,"mutations",()=>{this.forceRender()},{priority:"lowest"})}attachDomRoot(e,i="main"){const s=this.document.getRoot(i);s._name=e.tagName.toLowerCase();const r={};for(const{name:a,value:l}of Array.from(e.attributes))r[a]=l,a==="class"?this._writer.addClass(l.split(" "),s):this._writer.setAttribute(a,l,s);this._initialDomRootAttributes.set(e,r);const o=()=>{this._writer.setAttribute("contenteditable",(!s.isReadOnly).toString(),s),s.isReadOnly?this._writer.addClass("ck-read-only",s):this._writer.removeClass("ck-read-only",s)};o(),this.domRoots.set(i,e),this.domConverter.bindElements(e,s),this._renderer.markToSync("children",s),this._renderer.markToSync("attributes",s),this._renderer.domDocuments.add(e.ownerDocument),s.on("change:children",(a,l)=>this._renderer.markToSync("children",l)),s.on("change:attributes",(a,l)=>this._renderer.markToSync("attributes",l)),s.on("change:text",(a,l)=>this._renderer.markToSync("text",l)),s.on("change:isReadOnly",()=>this.change(o)),s.on("change",()=>{this._hasChangedSinceTheLastRendering=!0});for(const a of this._observers.values())a.observe(e,i)}detachDomRoot(e){const i=this.domRoots.get(e);Array.from(i.attributes).forEach(({name:r})=>i.removeAttribute(r));const s=this._initialDomRootAttributes.get(i);for(const r in s)i.setAttribute(r,s[r]);this.domRoots.delete(e),this.domConverter.unbindDomElement(i);for(const r of this._observers.values())r.stopObserving(i)}getDomRoot(e="main"){return this.domRoots.get(e)}addObserver(e){let i=this._observers.get(e);if(i)return i;i=new e(this),this._observers.set(e,i);for(const[s,r]of this.domRoots)i.observe(r,s);return i.enable(),i}getObserver(e){return this._observers.get(e)}disableObservers(){for(const e of this._observers.values())e.disable()}enableObservers(){for(const e of this._observers.values())e.enable()}scrollToTheSelection({alignToTop:e,forceScroll:i,viewportOffset:s=20,ancestorOffset:r=20}={}){const o=this.document.selection.getFirstRange();if(!o)return;const a=To({alignToTop:e,forceScroll:i,viewportOffset:s,ancestorOffset:r});typeof s=="number"&&(s={top:s,bottom:s,left:s,right:s});const l={target:this.domConverter.viewRangeToDom(o),viewportOffset:s,ancestorOffset:r,alignToTop:e,forceScroll:i};this.fire("scrollToTheSelection",l,a),lV(l)}focus(){if(!this.document.isFocused){const e=this.document.selection.editableElement;e&&(this.domConverter.focus(e),this.forceRender())}}change(e){if(this.isRenderingInProgress||this._postFixersInProgress)throw new fe("cannot-change-view-tree",this);try{if(this._ongoingChange)return e(this._writer);this._ongoingChange=!0;const i=e(this._writer);return this._ongoingChange=!1,!this._renderingDisabled&&this._hasChangedSinceTheLastRendering&&(this._postFixersInProgress=!0,this.document._callPostFixers(this._writer),this._postFixersInProgress=!1,this.fire("render")),i}catch(i){/* istanbul ignore next -- @preserve */fe.rethrowUnexpectedError(i,this)}}forceRender(){this._hasChangedSinceTheLastRendering=!0,this.getObserver(y_).flush(),this.change(()=>{})}destroy(){for(const e of this._observers.values())e.destroy();this.document.destroy(),this.stopListening()}createPositionAt(e,i){return Nt._createAt(e,i)}createPositionAfter(e){return Nt._createAfter(e)}createPositionBefore(e){return Nt._createBefore(e)}createRange(e,i){return new An(e,i)}createRangeOn(e){return An._createOn(e)}createRangeIn(e){return An._createIn(e)}createSelection(...e){return new cc(...e)}_disableRendering(e){this._renderingDisabled=e,e==!1&&this.change(()=>{})}_render(){this.isRenderingInProgress=!0,this.disableObservers(),this._renderer.render(),this.enableObservers(),this.isRenderingInProgress=!1}};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Yu{is(){throw new Error("is() method is abstract")}}let Ah=class extends Yu{constructor(e){super();w(this,"parent",null);w(this,"_attrs");this._attrs=Va(e)}get document(){return null}get index(){let e;if(!this.parent)return null;if((e=this.parent.getChildIndex(this))===null)throw new fe("model-node-not-found-in-parent",this);return e}get startOffset(){let e;if(!this.parent)return null;if((e=this.parent.getChildStartOffset(this))===null)throw new fe("model-node-not-found-in-parent",this);return e}get offsetSize(){return 1}get endOffset(){return this.parent?this.startOffset+this.offsetSize:null}get nextSibling(){const e=this.index;return e!==null&&this.parent.getChild(e+1)||null}get previousSibling(){const e=this.index;return e!==null&&this.parent.getChild(e-1)||null}get root(){let e=this;for(;e.parent;)e=e.parent;return e}isAttached(){return this.parent===null?!1:this.root.isAttached()}getPath(){const e=[];let i=this;for(;i.parent;)e.unshift(i.startOffset),i=i.parent;return e}getAncestors(e={}){const i=[];let s=e.includeSelf?this:this.parent;for(;s;)i[e.parentFirst?"push":"unshift"](s),s=s.parent;return i}getCommonAncestor(e,i={}){const s=this.getAncestors(i),r=e.getAncestors(i);let o=0;for(;s[o]==r[o]&&s[o];)o++;return o===0?null:s[o-1]}isBefore(e){if(this==e||this.root!==e.root)return!1;const i=this.getPath(),s=e.getPath(),r=sr(i,s);switch(r){case"prefix":return!0;case"extension":return!1;default:return i[r]<s[r]}}isAfter(e){return this==e||this.root!==e.root?!1:!this.isBefore(e)}hasAttribute(e){return this._attrs.has(e)}getAttribute(e){return this._attrs.get(e)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}toJSON(){const e={};return this._attrs.size&&(e.attributes=Array.from(this._attrs).reduce((i,s)=>(i[s[0]]=s[1],i),{})),e}_clone(e){return new this.constructor(this._attrs)}_remove(){this.parent._removeChildren(this.index)}_setAttribute(e,i){this._attrs.set(e,i)}_setAttributesTo(e){this._attrs=Va(e)}_removeAttribute(e){return this._attrs.delete(e)}_clearAttributes(){this._attrs.clear()}};Ah.prototype.is=function(t){return t==="node"||t==="model:node"};class yg{constructor(n){w(this,"_nodes",[]);n&&this._insertNodes(0,n)}[Symbol.iterator](){return this._nodes[Symbol.iterator]()}get length(){return this._nodes.length}get maxOffset(){return this._nodes.reduce((n,e)=>n+e.offsetSize,0)}getNode(n){return this._nodes[n]||null}getNodeIndex(n){const e=this._nodes.indexOf(n);return e==-1?null:e}getNodeStartOffset(n){const e=this.getNodeIndex(n);return e===null?null:this._nodes.slice(0,e).reduce((i,s)=>i+s.offsetSize,0)}indexToOffset(n){if(n==this._nodes.length)return this.maxOffset;const e=this._nodes[n];if(!e)throw new fe("model-nodelist-index-out-of-bounds",this);return this.getNodeStartOffset(e)}offsetToIndex(n){let e=0;for(const i of this._nodes){if(n>=e&&n<e+i.offsetSize)return this.getNodeIndex(i);e+=i.offsetSize}if(e!=n)throw new fe("model-nodelist-offset-out-of-bounds",this,{offset:n,nodeList:this});return this.length}_insertNodes(n,e){for(const i of e)if(!(i instanceof Ah))throw new fe("model-nodelist-insertnodes-not-node",this);this._nodes=Xve(this._nodes,Array.from(e),n,0)}_removeNodes(n,e=1){return this._nodes.splice(n,e)}toJSON(){return this._nodes.map(n=>n.toJSON())}}let Gi=class KC extends Ah{constructor(e,i){super(i);w(this,"_data");this._data=e||""}get offsetSize(){return this.data.length}get data(){return this._data}toJSON(){const e=super.toJSON();return e.data=this.data,e}_clone(){return new KC(this.data,this.getAttributes())}static fromJSON(e){return new KC(e.data,e.attributes)}};Gi.prototype.is=function(t){return t==="$text"||t==="model:$text"||t==="text"||t==="model:text"||t==="node"||t==="model:node"};class Ma extends Yu{constructor(e,i,s){super();w(this,"textNode");w(this,"data");w(this,"offsetInText");if(this.textNode=e,i<0||i>e.offsetSize)throw new fe("model-textproxy-wrong-offsetintext",this);if(s<0||i+s>e.offsetSize)throw new fe("model-textproxy-wrong-length",this);this.data=e.data.substring(i,i+s),this.offsetInText=i}get startOffset(){return this.textNode.startOffset!==null?this.textNode.startOffset+this.offsetInText:null}get offsetSize(){return this.data.length}get endOffset(){return this.startOffset!==null?this.startOffset+this.offsetSize:null}get isPartial(){return this.offsetSize!==this.textNode.offsetSize}get parent(){return this.textNode.parent}get root(){return this.textNode.root}getPath(){const e=this.textNode.getPath();return e.length>0&&(e[e.length-1]+=this.offsetInText),e}getAncestors(e={}){const i=[];let s=e.includeSelf?this:this.parent;for(;s;)i[e.parentFirst?"push":"unshift"](s),s=s.parent;return i}hasAttribute(e){return this.textNode.hasAttribute(e)}getAttribute(e){return this.textNode.getAttribute(e)}getAttributes(){return this.textNode.getAttributes()}getAttributeKeys(){return this.textNode.getAttributeKeys()}}Ma.prototype.is=function(t){return t==="$textProxy"||t==="model:$textProxy"||t==="textProxy"||t==="model:textProxy"};let Hi=class Ab extends Ah{constructor(e,i,s){super(i);w(this,"name");w(this,"_children",new yg);this.name=e,s&&this._insertChild(0,s)}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return this.childCount===0}getChild(e){return this._children.getNode(e)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(e){return this._children.getNodeIndex(e)}getChildStartOffset(e){return this._children.getNodeStartOffset(e)}offsetToIndex(e){return this._children.offsetToIndex(e)}getNodeByPath(e){let i=this;for(const s of e)i=i.getChild(i.offsetToIndex(s));return i}findAncestor(e,i={}){let s=i.includeSelf?this:this.parent;for(;s;){if(s.name===e)return s;s=s.parent}return null}toJSON(){const e=super.toJSON();if(e.name=this.name,this._children.length>0){e.children=[];for(const i of this._children)e.children.push(i.toJSON())}return e}_clone(e=!1){const i=e?Array.from(this._children).map(s=>s._clone(!0)):void 0;return new Ab(this.name,this.getAttributes(),i)}_appendChild(e){this._insertChild(this.childCount,e)}_insertChild(e,i){const s=i_e(i);for(const r of s)r.parent!==null&&r._remove(),r.parent=this;this._children._insertNodes(e,s)}_removeChildren(e,i=1){const s=this._children._removeNodes(e,i);for(const r of s)r.parent=null;return s}static fromJSON(e){let i;if(e.children){i=[];for(const s of e.children)s.name?i.push(Ab.fromJSON(s)):i.push(Gi.fromJSON(s))}return new Ab(e.name,e.attributes,i)}};Hi.prototype.is=function(t,n){return n?n===this.name&&(t==="element"||t==="model:element"):t==="element"||t==="model:element"||t==="node"||t==="model:node"};function i_e(t){return typeof t=="string"?[new Gi(t)]:(Ao(t)||(t=[t]),Array.from(t).map(n=>typeof n=="string"?new Gi(n):n instanceof Ma?new Gi(n.data,n.getAttributes()):n))}class rc{constructor(n){w(this,"direction");w(this,"boundaries");w(this,"singleCharacters");w(this,"shallow");w(this,"ignoreElementEnd");w(this,"_position");w(this,"_boundaryStartParent");w(this,"_boundaryEndParent");w(this,"_visitedParent");if(!n||!n.boundaries&&!n.startPosition)throw new fe("model-tree-walker-no-start-position",null);const e=n.direction||"forward";if(e!="forward"&&e!="backward")throw new fe("model-tree-walker-unknown-direction",n,{direction:e});this.direction=e,this.boundaries=n.boundaries||null,n.startPosition?this._position=n.startPosition.clone():this._position=mt._createAt(this.boundaries[this.direction=="backward"?"end":"start"]),this.position.stickiness="toNone",this.singleCharacters=!!n.singleCharacters,this.shallow=!!n.shallow,this.ignoreElementEnd=!!n.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null,this._visitedParent=this.position.parent}[Symbol.iterator](){return this}get position(){return this._position}skip(n){let e,i,s,r;do s=this.position,r=this._visitedParent,{done:e,value:i}=this.next();while(!e&&n(i));e||(this._position=s,this._visitedParent=r)}next(){return this.direction=="forward"?this._next():this._previous()}_next(){const n=this.position,e=this.position.clone(),i=this._visitedParent;if(i.parent===null&&e.offset===i.maxOffset)return{done:!0,value:void 0};if(i===this._boundaryEndParent&&e.offset==this.boundaries.end.offset)return{done:!0,value:void 0};const s=Cg(e,i),r=s||TV(e,i,s);if(r instanceof Hi){if(!this.shallow)e.path.push(0),this._visitedParent=r;else{if(this.boundaries&&this.boundaries.end.isBefore(e))return{done:!0,value:void 0};e.offset++}return this._position=e,_d("elementStart",r,n,e,1)}if(r instanceof Gi){let o;if(this.singleCharacters)o=1;else{let c=r.endOffset;this._boundaryEndParent==i&&this.boundaries.end.offset<c&&(c=this.boundaries.end.offset),o=c-e.offset}const a=e.offset-r.startOffset,l=new Ma(r,a,o);return e.offset+=o,this._position=e,_d("text",l,n,e,o)}return e.path.pop(),e.offset++,this._position=e,this._visitedParent=i.parent,this.ignoreElementEnd?this._next():_d("elementEnd",i,n,e)}_previous(){const n=this.position,e=this.position.clone(),i=this._visitedParent;if(i.parent===null&&e.offset===0)return{done:!0,value:void 0};if(i==this._boundaryStartParent&&e.offset==this.boundaries.start.offset)return{done:!0,value:void 0};const s=e.parent,r=Cg(e,s),o=r||xV(e,s,r);if(o instanceof Hi)return e.offset--,this.shallow?(this._position=e,_d("elementStart",o,n,e,1)):(e.path.push(o.maxOffset),this._position=e,this._visitedParent=o,this.ignoreElementEnd?this._previous():_d("elementEnd",o,n,e));if(o instanceof Gi){let a;if(this.singleCharacters)a=1;else{let u=o.startOffset;this._boundaryStartParent==i&&this.boundaries.start.offset>u&&(u=this.boundaries.start.offset),a=e.offset-u}const l=e.offset-o.startOffset,c=new Ma(o,l-a,a);return e.offset-=a,this._position=e,_d("text",c,n,e,a)}return e.path.pop(),this._position=e,this._visitedParent=i.parent,_d("elementStart",i,n,e,1)}}function _d(t,n,e,i,s){return{done:!1,value:{type:t,item:n,previousPosition:e,nextPosition:i,length:s}}}class mt extends Yu{constructor(e,i,s="toNone"){super();w(this,"root");w(this,"path");w(this,"stickiness");if(!e.is("element")&&!e.is("documentFragment"))throw new fe("model-position-root-invalid",e);if(!(i instanceof Array)||i.length===0)throw new fe("model-position-path-incorrect-format",e,{path:i});e.is("rootElement")?i=i.slice():(i=[...e.getPath(),...i],e=e.root),this.root=e,this.path=i,this.stickiness=s}get offset(){return this.path[this.path.length-1]}set offset(e){this.path[this.path.length-1]=e}get parent(){let e=this.root;for(let i=0;i<this.path.length-1;i++)if(e=e.getChild(e.offsetToIndex(this.path[i])),!e)throw new fe("model-position-path-incorrect",this,{position:this});if(e.is("$text"))throw new fe("model-position-path-incorrect",this,{position:this});return e}get index(){return this.parent.offsetToIndex(this.offset)}get textNode(){return Cg(this,this.parent)}get nodeAfter(){const e=this.parent;return TV(this,e,Cg(this,e))}get nodeBefore(){const e=this.parent;return xV(this,e,Cg(this,e))}get isAtStart(){return this.offset===0}get isAtEnd(){return this.offset==this.parent.maxOffset}compareWith(e){if(this.root!=e.root)return"different";const i=sr(this.path,e.path);switch(i){case"same":return"same";case"prefix":return"before";case"extension":return"after";default:return this.path[i]<e.path[i]?"before":"after"}}getLastMatchingPosition(e,i={}){i.startPosition=this;const s=new rc(i);return s.skip(e),s.position}getParentPath(){return this.path.slice(0,-1)}getAncestors(){const e=this.parent;return e.is("documentFragment")?[e]:e.getAncestors({includeSelf:!0})}findAncestor(e){const i=this.parent;return i.is("element")?i.findAncestor(e,{includeSelf:!0}):null}getCommonPath(e){if(this.root!=e.root)return[];const i=sr(this.path,e.path),s=typeof i=="string"?Math.min(this.path.length,e.path.length):i;return this.path.slice(0,s)}getCommonAncestor(e){const i=this.getAncestors(),s=e.getAncestors();let r=0;for(;i[r]==s[r]&&i[r];)r++;return r===0?null:i[r-1]}getShiftedBy(e){const i=this.clone(),s=i.offset+e;return i.offset=s<0?0:s,i}isAfter(e){return this.compareWith(e)=="after"}isBefore(e){return this.compareWith(e)=="before"}isEqual(e){return this.compareWith(e)=="same"}isTouching(e){if(this.root!==e.root)return!1;const i=Math.min(this.path.length,e.path.length);for(let s=0;s<i;s++){const r=this.path[s]-e.path[s];if(r<-1||r>1)return!1;if(r===1)return bI(e,this,s);if(r===-1)return bI(this,e,s)}return this.path.length===e.path.length?!0:this.path.length>e.path.length?GC(this.path,i):GC(e.path,i)}hasSameParentAs(e){if(this.root!==e.root)return!1;const i=this.getParentPath(),s=e.getParentPath();return sr(i,s)=="same"}getTransformedByOperation(e){let i;switch(e.type){case"insert":i=this._getTransformedByInsertOperation(e);break;case"move":case"remove":case"reinsert":i=this._getTransformedByMoveOperation(e);break;case"split":i=this._getTransformedBySplitOperation(e);break;case"merge":i=this._getTransformedByMergeOperation(e);break;default:i=mt._createAt(this);break}return i}_getTransformedByInsertOperation(e){return this._getTransformedByInsertion(e.position,e.howMany)}_getTransformedByMoveOperation(e){return this._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany)}_getTransformedBySplitOperation(e){const i=e.movedRange;return i.containsPosition(this)||i.start.isEqual(this)&&this.stickiness=="toNext"?this._getCombined(e.splitPosition,e.moveTargetPosition):e.graveyardPosition?this._getTransformedByMove(e.graveyardPosition,e.insertionPosition,1):this._getTransformedByInsertion(e.insertionPosition,1)}_getTransformedByMergeOperation(e){const i=e.movedRange,s=i.containsPosition(this)||i.start.isEqual(this);let r;return s?(r=this._getCombined(e.sourcePosition,e.targetPosition),e.sourcePosition.isBefore(e.targetPosition)&&(r=r._getTransformedByDeletion(e.deletionPosition,1))):this.isEqual(e.deletionPosition)?r=mt._createAt(e.deletionPosition):r=this._getTransformedByMove(e.deletionPosition,e.graveyardPosition,1),r}_getTransformedByDeletion(e,i){const s=mt._createAt(this);if(this.root!=e.root)return s;if(sr(e.getParentPath(),this.getParentPath())=="same"){if(e.offset<this.offset){if(e.offset+i>this.offset)return null;s.offset-=i}}else if(sr(e.getParentPath(),this.getParentPath())=="prefix"){const r=e.path.length-1;if(e.offset<=this.path[r]){if(e.offset+i>this.path[r])return null;s.path[r]-=i}}return s}_getTransformedByInsertion(e,i){const s=mt._createAt(this);if(this.root!=e.root)return s;if(sr(e.getParentPath(),this.getParentPath())=="same")(e.offset<this.offset||e.offset==this.offset&&this.stickiness!="toPrevious")&&(s.offset+=i);else if(sr(e.getParentPath(),this.getParentPath())=="prefix"){const r=e.path.length-1;e.offset<=this.path[r]&&(s.path[r]+=i)}return s}_getTransformedByMove(e,i,s){if(i=i._getTransformedByDeletion(e,s),e.isEqual(i))return mt._createAt(this);const r=this._getTransformedByDeletion(e,s);return r===null||e.isEqual(this)&&this.stickiness=="toNext"||e.getShiftedBy(s).isEqual(this)&&this.stickiness=="toPrevious"?this._getCombined(e,i):r._getTransformedByInsertion(i,s)}_getCombined(e,i){const s=e.path.length-1,r=mt._createAt(i);return r.stickiness=this.stickiness,r.offset=r.offset+this.path[s]-e.offset,r.path=[...r.path,...this.path.slice(s+1)],r}toJSON(){return{root:this.root.toJSON(),path:Array.from(this.path),stickiness:this.stickiness}}clone(){return new this.constructor(this.root,this.path,this.stickiness)}static _createAt(e,i,s="toNone"){if(e instanceof mt)return new mt(e.root,e.path,e.stickiness);{const r=e;if(i=="end")i=r.maxOffset;else{if(i=="before")return this._createBefore(r,s);if(i=="after")return this._createAfter(r,s);if(i!==0&&!i)throw new fe("model-createpositionat-offset-required",[this,e])}if(!r.is("element")&&!r.is("documentFragment"))throw new fe("model-position-parent-incorrect",[this,e]);const o=r.getPath();return o.push(i),new this(r.root,o,s)}}static _createAfter(e,i){if(!e.parent)throw new fe("model-position-after-root",[this,e],{root:e});return this._createAt(e.parent,e.endOffset,i)}static _createBefore(e,i){if(!e.parent)throw new fe("model-position-before-root",e,{root:e});return this._createAt(e.parent,e.startOffset,i)}static fromJSON(e,i){if(e.root==="$graveyard"){const s=new mt(i.graveyard,e.path);return s.stickiness=e.stickiness,s}if(!i.getRoot(e.root))throw new fe("model-position-fromjson-no-root",i,{rootName:e.root});return new mt(i.getRoot(e.root),e.path,e.stickiness)}}mt.prototype.is=function(t){return t==="position"||t==="model:position"};function Cg(t,n){const e=n.getChild(n.offsetToIndex(t.offset));return e&&e.is("$text")&&e.startOffset<t.offset?e:null}function TV(t,n,e){return e!==null?null:n.getChild(n.offsetToIndex(t.offset))}function xV(t,n,e){return e!==null?null:n.getChild(n.offsetToIndex(t.offset)-1)}function bI(t,n,e){return!(e+1===t.path.length||!GC(n.path,e+1)||!s_e(t,e+1))}function GC(t,n){for(;n<t.length;){if(t[n]!==0)return!1;n++}return!0}function s_e(t,n){let e=t.parent,i=t.path.length-1,s=0;for(;i>=n;){if(t.path[i]+s!==e.maxOffset)return!1;s=1,i--,e=e.parent}return!0}class qe extends Yu{constructor(e,i){super();w(this,"start");w(this,"end");this.start=mt._createAt(e),this.end=i?mt._createAt(i):mt._createAt(e),this.start.stickiness=this.isCollapsed?"toNone":"toNext",this.end.stickiness=this.isCollapsed?"toNone":"toPrevious"}*[Symbol.iterator](){yield*new rc({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){const e=this.start.getParentPath(),i=this.end.getParentPath();return sr(e,i)=="same"}get root(){return this.start.root}containsPosition(e){return e.isAfter(this.start)&&e.isBefore(this.end)}containsRange(e,i=!1){e.isCollapsed&&(i=!1);const s=this.containsPosition(e.start)||i&&this.start.isEqual(e.start),r=this.containsPosition(e.end)||i&&this.end.isEqual(e.end);return s&&r}containsItem(e){const i=mt._createBefore(e);return this.containsPosition(i)||this.start.isEqual(i)}isEqual(e){return this.start.isEqual(e.start)&&this.end.isEqual(e.end)}isIntersecting(e){return this.start.isBefore(e.end)&&this.end.isAfter(e.start)}getDifference(e){const i=[];return this.isIntersecting(e)?(this.containsPosition(e.start)&&i.push(new qe(this.start,e.start)),this.containsPosition(e.end)&&i.push(new qe(e.end,this.end))):i.push(new qe(this.start,this.end)),i}getIntersection(e){if(this.isIntersecting(e)){let i=this.start,s=this.end;return this.containsPosition(e.start)&&(i=e.start),this.containsPosition(e.end)&&(s=e.end),new qe(i,s)}return null}getJoined(e,i=!1){let s=this.isIntersecting(e);if(s||(this.start.isBefore(e.start)?s=i?this.end.isTouching(e.start):this.end.isEqual(e.start):s=i?e.end.isTouching(this.start):e.end.isEqual(this.start)),!s)return null;let r=this.start,o=this.end;return e.start.isBefore(r)&&(r=e.start),e.end.isAfter(o)&&(o=e.end),new qe(r,o)}getMinimalFlatRanges(){const e=[],i=this.start.getCommonPath(this.end).length,s=mt._createAt(this.start);let r=s.parent;for(;s.path.length>i+1;){const o=r.maxOffset-s.offset;o!==0&&e.push(new qe(s,s.getShiftedBy(o))),s.path=s.path.slice(0,-1),s.offset++,r=r.parent}for(;s.path.length<=this.end.path.length;){const o=this.end.path[s.path.length-1],a=o-s.offset;a!==0&&e.push(new qe(s,s.getShiftedBy(a))),s.offset=o,s.path.push(0)}return e}getWalker(e={}){return e.boundaries=this,new rc(e)}*getItems(e={}){e.boundaries=this,e.ignoreElementEnd=!0;const i=new rc(e);for(const s of i)yield s.item}*getPositions(e={}){e.boundaries=this;const i=new rc(e);yield i.position;for(const s of i)yield s.nextPosition}getTransformedByOperation(e){switch(e.type){case"insert":return this._getTransformedByInsertOperation(e);case"move":case"remove":case"reinsert":return this._getTransformedByMoveOperation(e);case"split":return[this._getTransformedBySplitOperation(e)];case"merge":return[this._getTransformedByMergeOperation(e)]}return[new qe(this.start,this.end)]}getTransformedByOperations(e){const i=[new qe(this.start,this.end)];for(const s of e)for(let r=0;r<i.length;r++){const o=i[r].getTransformedByOperation(s);i.splice(r,1,...o),r+=o.length-1}for(let s=0;s<i.length;s++){const r=i[s];for(let o=s+1;o<i.length;o++){const a=i[o];(r.containsRange(a)||a.containsRange(r)||r.isEqual(a))&&i.splice(o,1)}}return i}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;const e=this.start.nodeAfter,i=this.end.nodeBefore;return e&&e.is("element")&&e===i?e:null}toJSON(){return{start:this.start.toJSON(),end:this.end.toJSON()}}clone(){return new this.constructor(this.start,this.end)}_getTransformedByInsertOperation(e,i=!1){return this._getTransformedByInsertion(e.position,e.howMany,i)}_getTransformedByMoveOperation(e,i=!1){const s=e.sourcePosition,r=e.howMany,o=e.targetPosition;return this._getTransformedByMove(s,o,r,i)}_getTransformedBySplitOperation(e){const i=this.start._getTransformedBySplitOperation(e);let s=this.end._getTransformedBySplitOperation(e);return this.end.isEqual(e.insertionPosition)&&(s=this.end.getShiftedBy(1)),i.root!=s.root&&(s=this.end.getShiftedBy(-1)),new qe(i,s)}_getTransformedByMergeOperation(e){if(this.start.isEqual(e.targetPosition)&&this.end.isEqual(e.deletionPosition))return new qe(this.start);let i=this.start._getTransformedByMergeOperation(e),s=this.end._getTransformedByMergeOperation(e);return i.root!=s.root&&(s=this.end.getShiftedBy(-1)),i.isAfter(s)?(e.sourcePosition.isBefore(e.targetPosition)?(i=mt._createAt(s),i.offset=0):(e.deletionPosition.isEqual(i)||(s=e.deletionPosition),i=e.targetPosition),new qe(i,s)):new qe(i,s)}_getTransformedByInsertion(e,i,s=!1){if(s&&this.containsPosition(e))return[new qe(this.start,e),new qe(e.getShiftedBy(i),this.end._getTransformedByInsertion(e,i))];{const r=new qe(this.start,this.end);return r.start=r.start._getTransformedByInsertion(e,i),r.end=r.end._getTransformedByInsertion(e,i),[r]}}_getTransformedByMove(e,i,s,r=!1){if(this.isCollapsed){const f=this.start._getTransformedByMove(e,i,s);return[new qe(f)]}const o=qe._createFromPositionAndShift(e,s),a=i._getTransformedByDeletion(e,s);if(this.containsPosition(i)&&!r&&(o.containsPosition(this.start)||o.containsPosition(this.end))){const f=this.start._getTransformedByMove(e,i,s),p=this.end._getTransformedByMove(e,i,s);return[new qe(f,p)]}let l;const c=this.getDifference(o);let u=null;const d=this.getIntersection(o);if(c.length==1?u=new qe(c[0].start._getTransformedByDeletion(e,s),c[0].end._getTransformedByDeletion(e,s)):c.length==2&&(u=new qe(this.start,this.end._getTransformedByDeletion(e,s))),u?l=u._getTransformedByInsertion(a,s,d!==null||r):l=[],d){const f=new qe(d.start._getCombined(o.start,a),d.end._getCombined(o.start,a));l.length==2?l.splice(1,0,f):l.push(f)}return l}_getTransformedByDeletion(e,i){let s=this.start._getTransformedByDeletion(e,i),r=this.end._getTransformedByDeletion(e,i);return s==null&&r==null?null:(s==null&&(s=e),r==null&&(r=e),new qe(s,r))}static _createFromPositionAndShift(e,i){const s=e,r=e.getShiftedBy(i);return i>0?new this(s,r):new this(r,s)}static _createIn(e){return new this(mt._createAt(e,0),mt._createAt(e,e.maxOffset))}static _createOn(e){return this._createFromPositionAndShift(mt._createBefore(e),e.offsetSize)}static _createFromRanges(e){if(e.length===0)throw new fe("range-create-from-ranges-empty-array",null);if(e.length==1)return e[0].clone();const i=e[0];e.sort((o,a)=>o.start.isAfter(a.start)?1:-1);const s=e.indexOf(i),r=new this(i.start,i.end);if(s>0)for(let o=s-1;e[o].end.isEqual(r.start);o++)r.start=mt._createAt(e[o].start);for(let o=s+1;o<e.length&&e[o].start.isEqual(r.end);o++)r.end=mt._createAt(e[o].end);return r}static fromJSON(e,i){return new this(mt.fromJSON(e.start,i),mt.fromJSON(e.end,i))}}qe.prototype.is=function(t){return t==="range"||t==="model:range"};class AV extends Ti(){constructor(){super();w(this,"_modelToViewMapping",new WeakMap);w(this,"_viewToModelMapping",new WeakMap);w(this,"_viewToModelLengthCallbacks",new Map);w(this,"_markerNameToElements",new Map);w(this,"_elementToMarkerNames",new Map);w(this,"_deferredBindingRemovals",new Map);w(this,"_unboundMarkerNames",new Set);this.on("modelToViewPosition",(e,i)=>{if(i.viewPosition)return;const s=this._modelToViewMapping.get(i.modelPosition.parent);if(!s)throw new fe("mapping-model-position-view-parent-not-found",this,{modelPosition:i.modelPosition});i.viewPosition=this.findPositionIn(s,i.modelPosition.offset)},{priority:"low"}),this.on("viewToModelPosition",(e,i)=>{if(i.modelPosition)return;const s=this.findMappedViewAncestor(i.viewPosition),r=this._viewToModelMapping.get(s),o=this._toModelOffset(i.viewPosition.parent,i.viewPosition.offset,s);i.modelPosition=mt._createAt(r,o)},{priority:"low"})}bindElements(e,i){this._modelToViewMapping.set(e,i),this._viewToModelMapping.set(i,e)}unbindViewElement(e,i={}){const s=this.toModelElement(e);if(this._elementToMarkerNames.has(e))for(const r of this._elementToMarkerNames.get(e))this._unboundMarkerNames.add(r);i.defer?this._deferredBindingRemovals.set(e,e.root):(this._viewToModelMapping.delete(e),this._modelToViewMapping.get(s)==e&&this._modelToViewMapping.delete(s))}unbindModelElement(e){const i=this.toViewElement(e);this._modelToViewMapping.delete(e),this._viewToModelMapping.get(i)==e&&this._viewToModelMapping.delete(i)}bindElementToMarker(e,i){const s=this._markerNameToElements.get(i)||new Set;s.add(e);const r=this._elementToMarkerNames.get(e)||new Set;r.add(i),this._markerNameToElements.set(i,s),this._elementToMarkerNames.set(e,r)}unbindElementFromMarkerName(e,i){const s=this._markerNameToElements.get(i);s&&(s.delete(e),s.size==0&&this._markerNameToElements.delete(i));const r=this._elementToMarkerNames.get(e);r&&(r.delete(i),r.size==0&&this._elementToMarkerNames.delete(e))}flushUnboundMarkerNames(){const e=Array.from(this._unboundMarkerNames);return this._unboundMarkerNames.clear(),e}flushDeferredBindings(){for(const[e,i]of this._deferredBindingRemovals)e.root==i&&this.unbindViewElement(e);this._deferredBindingRemovals=new Map}clearBindings(){this._modelToViewMapping=new WeakMap,this._viewToModelMapping=new WeakMap,this._markerNameToElements=new Map,this._elementToMarkerNames=new Map,this._unboundMarkerNames=new Set,this._deferredBindingRemovals=new Map}toModelElement(e){return this._viewToModelMapping.get(e)}toViewElement(e){return this._modelToViewMapping.get(e)}toModelRange(e){return new qe(this.toModelPosition(e.start),this.toModelPosition(e.end))}toViewRange(e){return new An(this.toViewPosition(e.start),this.toViewPosition(e.end))}toModelPosition(e){const i={viewPosition:e,mapper:this};return this.fire("viewToModelPosition",i),i.modelPosition}toViewPosition(e,i={}){const s={modelPosition:e,mapper:this,isPhantom:i.isPhantom};return this.fire("modelToViewPosition",s),s.viewPosition}markerNameToElements(e){const i=this._markerNameToElements.get(e);if(!i)return null;const s=new Set;for(const r of i)if(r.is("attributeElement"))for(const o of r.getElementsWithSameId())s.add(o);else s.add(r);return s}registerViewToModelLength(e,i){this._viewToModelLengthCallbacks.set(e,i)}findMappedViewAncestor(e){let i=e.parent;for(;!this._viewToModelMapping.has(i);)i=i.parent;return i}_toModelOffset(e,i,s){if(s!=e){const o=this._toModelOffset(e.parent,e.index,s),a=this._toModelOffset(e,i,e);return o+a}if(e.is("$text"))return i;let r=0;for(let o=0;o<i;o++)r+=this.getModelLength(e.getChild(o));return r}getModelLength(e){if(this._viewToModelLengthCallbacks.get(e.name))return this._viewToModelLengthCallbacks.get(e.name)(e);if(this._viewToModelMapping.has(e))return 1;if(e.is("$text"))return e.data.length;if(e.is("uiElement"))return 0;{let i=0;for(const s of e.getChildren())i+=this.getModelLength(s);return i}}findPositionIn(e,i){let s,r=0,o=0,a=0;if(e.is("$text"))return new Nt(e,i);for(;o<i;)s=e.getChild(a),r=this.getModelLength(s),o+=r,a++;return o==i?this._moveViewPositionToTextNode(new Nt(e,a)):this.findPositionIn(s,i-(o-r))}_moveViewPositionToTextNode(e){const i=e.nodeBefore,s=e.nodeAfter;return i instanceof Yi?new Nt(i,i.data.length):s instanceof Yi?new Nt(s,0):e}}class r_e{constructor(){w(this,"_consumable",new Map);w(this,"_textProxyRegistry",new Map)}add(n,e){e=_v(e),n instanceof Ma&&(n=this._getSymbolForTextProxy(n)),this._consumable.has(n)||this._consumable.set(n,new Map),this._consumable.get(n).set(e,!0)}consume(n,e){return e=_v(e),n instanceof Ma&&(n=this._getSymbolForTextProxy(n)),this.test(n,e)?(this._consumable.get(n).set(e,!1),!0):!1}test(n,e){e=_v(e),n instanceof Ma&&(n=this._getSymbolForTextProxy(n));const i=this._consumable.get(n);if(i===void 0)return null;const s=i.get(e);return s===void 0?null:s}revert(n,e){e=_v(e),n instanceof Ma&&(n=this._getSymbolForTextProxy(n));const i=this.test(n,e);return i===!1?(this._consumable.get(n).set(e,!0),!0):i===!0?!1:null}verifyAllConsumed(n){const e=[];for(const[i,s]of this._consumable)for(const[r,o]of s){const a=r.split(":")[0];o&&n==a&&e.push({event:r,item:i.name||i.description})}if(e.length)throw new fe("conversion-model-consumable-not-consumed",null,{items:e})}_getSymbolForTextProxy(n){let e=null;const i=this._textProxyRegistry.get(n.startOffset);if(i){const s=i.get(n.endOffset);s&&(e=s.get(n.parent))}return e||(e=this._addSymbolForTextProxy(n)),e}_addSymbolForTextProxy(n){const e=n.startOffset,i=n.endOffset,s=n.parent,r=Symbol("$textProxy:"+n.data);let o,a;return o=this._textProxyRegistry.get(e),o||(o=new Map,this._textProxyRegistry.set(e,o)),a=o.get(i),a||(a=new Map,o.set(i,a)),a.set(s,r),r}}function _v(t){const n=t.split(":");return n[0]=="insert"?n[0]:n[0]=="addMarker"||n[0]=="removeMarker"?t:n.length>1?n[0]+":"+n[1]:n[0]}class IV extends Ti(){constructor(e){super();w(this,"_conversionApi");w(this,"_firedEventsMap");this._conversionApi={dispatcher:this,...e},this._firedEventsMap=new WeakMap}convertChanges(e,i,s){const r=this._createConversionApi(s,e.getRefreshedItems());for(const a of e.getMarkersToRemove())this._convertMarkerRemove(a.name,a.range,r);const o=this._reduceChanges(e.getChanges());for(const a of o)a.type==="insert"?this._convertInsert(qe._createFromPositionAndShift(a.position,a.length),r):a.type==="reinsert"?this._convertReinsert(qe._createFromPositionAndShift(a.position,a.length),r):a.type==="remove"?this._convertRemove(a.position,a.length,a.name,r):this._convertAttribute(a.range,a.attributeKey,a.attributeOldValue,a.attributeNewValue,r);r.mapper.flushDeferredBindings();for(const a of r.mapper.flushUnboundMarkerNames()){const l=i.get(a).getRange();this._convertMarkerRemove(a,l,r),this._convertMarkerAdd(a,l,r)}for(const a of e.getMarkersToAdd())this._convertMarkerAdd(a.name,a.range,r);r.consumable.verifyAllConsumed("insert")}convert(e,i,s,r={}){const o=this._createConversionApi(s,void 0,r);this._convertInsert(e,o);for(const[a,l]of i)this._convertMarkerAdd(a,l,o);o.consumable.verifyAllConsumed("insert")}convertSelection(e,i,s){const r=this._createConversionApi(s);this.fire("cleanSelection",{selection:e},r);const o=e.getFirstPosition().root;if(!r.mapper.toViewElement(o))return;const a=Array.from(i.getMarkersAtPosition(e.getFirstPosition()));if(this._addConsumablesForSelection(r.consumable,e,a),this.fire("selection",{selection:e},r),!!e.isCollapsed){for(const l of a)if(r.consumable.test(e,"addMarker:"+l.name)){const c=l.getRange();if(!o_e(e.getFirstPosition(),l,r.mapper))continue;const u={item:e,markerName:l.name,markerRange:c};this.fire(`addMarker:${l.name}`,u,r)}for(const l of e.getAttributeKeys())if(r.consumable.test(e,"attribute:"+l)){const c={item:e,range:e.getFirstRange(),attributeKey:l,attributeOldValue:null,attributeNewValue:e.getAttribute(l)};this.fire(`attribute:${l}:$text`,c,r)}}}_convertInsert(e,i,s={}){s.doNotAddConsumables||this._addConsumablesForInsert(i.consumable,e);for(const r of Array.from(e.getWalker({shallow:!0})).map(_I))this._testAndFire("insert",r,i)}_convertRemove(e,i,s,r){this.fire(`remove:${s}`,{position:e,length:i},r)}_convertAttribute(e,i,s,r,o){this._addConsumablesForRange(o.consumable,e,`attribute:${i}`);for(const a of e){const l={item:a.item,range:qe._createFromPositionAndShift(a.previousPosition,a.length),attributeKey:i,attributeOldValue:s,attributeNewValue:r};this._testAndFire(`attribute:${i}`,l,o)}}_convertReinsert(e,i){const s=Array.from(e.getWalker({shallow:!0}));this._addConsumablesForInsert(i.consumable,s);for(const r of s.map(_I))this._testAndFire("insert",{...r,reconversion:!0},i)}_convertMarkerAdd(e,i,s){if(i.root.rootName=="$graveyard")return;const r=`addMarker:${e}`;if(s.consumable.add(i,r),this.fire(r,{markerName:e,markerRange:i},s),!!s.consumable.consume(i,r)){this._addConsumablesForRange(s.consumable,i,r);for(const o of i.getItems()){if(!s.consumable.test(o,r))continue;const a={item:o,range:qe._createOn(o),markerName:e,markerRange:i};this.fire(r,a,s)}}}_convertMarkerRemove(e,i,s){i.root.rootName!="$graveyard"&&this.fire(`removeMarker:${e}`,{markerName:e,markerRange:i},s)}_reduceChanges(e){const i={changes:e};return this.fire("reduceChanges",i),i.changes}_addConsumablesForInsert(e,i){for(const s of i){const r=s.item;if(e.test(r,"insert")===null){e.add(r,"insert");for(const o of r.getAttributeKeys())e.add(r,"attribute:"+o)}}return e}_addConsumablesForRange(e,i,s){for(const r of i.getItems())e.add(r,s);return e}_addConsumablesForSelection(e,i,s){e.add(i,"selection");for(const r of s)e.add(i,"addMarker:"+r.name);for(const r of i.getAttributeKeys())e.add(i,"attribute:"+r);return e}_testAndFire(e,i,s){const r=a_e(e,i),o=i.item.is("$textProxy")?s.consumable._getSymbolForTextProxy(i.item):i.item,a=this._firedEventsMap.get(s),l=a.get(o);if(!l)a.set(o,new Set([r]));else if(!l.has(r))l.add(r);else return;this.fire(r,i,s)}_testAndFireAddAttributes(e,i){const s={item:e,range:qe._createOn(e)};for(const r of s.item.getAttributeKeys())s.attributeKey=r,s.attributeOldValue=null,s.attributeNewValue=s.item.getAttribute(r),this._testAndFire(`attribute:${r}`,s,i)}_createConversionApi(e,i=new Set,s={}){const r={...this._conversionApi,consumable:new r_e,writer:e,options:s,convertItem:o=>this._convertInsert(qe._createOn(o),r),convertChildren:o=>this._convertInsert(qe._createIn(o),r,{doNotAddConsumables:!0}),convertAttributes:o=>this._testAndFireAddAttributes(o,r),canReuseView:o=>!i.has(r.mapper.toModelElement(o))};return this._firedEventsMap.set(r,new Map),r}}function o_e(t,n,e){const i=n.getRange(),s=Array.from(t.getAncestors());return s.shift(),s.reverse(),!s.some(o=>{if(i.containsItem(o))return!!e.toViewElement(o).getCustomProperty("addHighlight")})}function a_e(t,n){const e=n.item.is("element")?n.item.name:"$text";return`${t}:${e}`}function _I(t){const n=t.item,e=qe._createFromPositionAndShift(t.previousPosition,t.length);return{item:n,range:e}}class go extends Ti(Yu){constructor(...e){super();w(this,"_lastRangeBackward",!1);w(this,"_attrs",new Map);w(this,"_ranges",[]);e.length&&this.setTo(...e)}get anchor(){if(this._ranges.length>0){const e=this._ranges[this._ranges.length-1];return this._lastRangeBackward?e.end:e.start}return null}get focus(){if(this._ranges.length>0){const e=this._ranges[this._ranges.length-1];return this._lastRangeBackward?e.start:e.end}return null}get isCollapsed(){return this._ranges.length===1?this._ranges[0].isCollapsed:!1}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}isEqual(e){if(this.rangeCount!=e.rangeCount)return!1;if(this.rangeCount===0)return!0;if(!this.anchor.isEqual(e.anchor)||!this.focus.isEqual(e.focus))return!1;for(const i of this._ranges){let s=!1;for(const r of e._ranges)if(i.isEqual(r)){s=!0;break}if(!s)return!1}return!0}*getRanges(){for(const e of this._ranges)yield new qe(e.start,e.end)}getFirstRange(){let e=null;for(const i of this._ranges)(!e||i.start.isBefore(e.start))&&(e=i);return e?new qe(e.start,e.end):null}getLastRange(){let e=null;for(const i of this._ranges)(!e||i.end.isAfter(e.end))&&(e=i);return e?new qe(e.start,e.end):null}getFirstPosition(){const e=this.getFirstRange();return e?e.start.clone():null}getLastPosition(){const e=this.getLastRange();return e?e.end.clone():null}setTo(...e){let[i,s,r]=e;if(typeof s=="object"&&(r=s,s=void 0),i===null)this._setRanges([]);else if(i instanceof go)this._setRanges(i.getRanges(),i.isBackward);else if(i&&typeof i.getRanges=="function")this._setRanges(i.getRanges(),i.isBackward);else if(i instanceof qe)this._setRanges([i],!!r&&!!r.backward);else if(i instanceof mt)this._setRanges([new qe(i)]);else if(i instanceof Ah){const o=!!r&&!!r.backward;let a;if(s=="in")a=qe._createIn(i);else if(s=="on")a=qe._createOn(i);else if(s!==void 0)a=new qe(mt._createAt(i,s));else throw new fe("model-selection-setto-required-second-parameter",[this,i]);this._setRanges([a],o)}else if(Ao(i))this._setRanges(i,r&&!!r.backward);else throw new fe("model-selection-setto-not-selectable",[this,i])}_setRanges(e,i=!1){const s=Array.from(e),r=s.some(o=>{if(!(o instanceof qe))throw new fe("model-selection-set-ranges-not-range",[this,e]);return this._ranges.every(a=>!a.isEqual(o))});s.length===this._ranges.length&&!r||(this._replaceAllRanges(s),this._lastRangeBackward=!!i,this.fire("change:range",{directChange:!0}))}setFocus(e,i){if(this.anchor===null)throw new fe("model-selection-setfocus-no-ranges",[this,e]);const s=mt._createAt(e,i);if(s.compareWith(this.focus)=="same")return;const r=this.anchor;this._ranges.length&&this._popRange(),s.compareWith(r)=="before"?(this._pushRange(new qe(s,r)),this._lastRangeBackward=!0):(this._pushRange(new qe(r,s)),this._lastRangeBackward=!1),this.fire("change:range",{directChange:!0})}getAttribute(e){return this._attrs.get(e)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}hasAttribute(e){return this._attrs.has(e)}removeAttribute(e){this.hasAttribute(e)&&(this._attrs.delete(e),this.fire("change:attribute",{attributeKeys:[e],directChange:!0}))}setAttribute(e,i){this.getAttribute(e)!==i&&(this._attrs.set(e,i),this.fire("change:attribute",{attributeKeys:[e],directChange:!0}))}getSelectedElement(){return this.rangeCount!==1?null:this.getFirstRange().getContainedElement()}*getSelectedBlocks(){const e=new WeakSet;for(const i of this.getRanges()){const s=wI(i.start,e);c_e(s,i)&&(yield s);for(const o of i.getWalker()){const a=o.item;o.type=="elementEnd"&&l_e(a,e,i)&&(yield a)}const r=wI(i.end,e);u_e(r,i)&&(yield r)}}containsEntireContent(e=this.anchor.root){const i=mt._createAt(e,0),s=mt._createAt(e,"end");return i.isTouching(this.getFirstPosition())&&s.isTouching(this.getLastPosition())}_pushRange(e){this._checkRange(e),this._ranges.push(new qe(e.start,e.end))}_checkRange(e){for(let i=0;i<this._ranges.length;i++)if(e.isIntersecting(this._ranges[i]))throw new fe("model-selection-range-intersects",[this,e],{addedRange:e,intersectingRange:this._ranges[i]})}_replaceAllRanges(e){this._removeAllRanges();for(const i of e)this._pushRange(i)}_removeAllRanges(){for(;this._ranges.length>0;)this._popRange()}_popRange(){this._ranges.pop()}}go.prototype.is=function(t){return t==="selection"||t==="model:selection"};function RV(t,n){return n.has(t)?!1:(n.add(t),t.root.document.model.schema.isBlock(t)&&!!t.parent)}function l_e(t,n,e){return RV(t,n)&&DE(t,e)}function wI(t,n){const i=t.parent.root.document.model.schema,s=t.parent.getAncestors({parentFirst:!0,includeSelf:!0});let r=!1;const o=s.find(a=>r?!1:(r=i.isLimit(a),!r&&RV(a,n)));return s.forEach(a=>n.add(a)),o}function DE(t,n){const e=d_e(t);return e?!n.containsRange(qe._createOn(e),!0):!0}function c_e(t,n){return t?n.isCollapsed||t.isEmpty?!0:n.start.isTouching(mt._createAt(t,t.maxOffset))?!1:DE(t,n):!1}function u_e(t,n){return t?n.isCollapsed||t.isEmpty?!0:n.end.isTouching(mt._createAt(t,0))?!1:DE(t,n):!1}function d_e(t){const n=t.root.document.model.schema;let e=t.parent;for(;e;){if(n.isBlock(e))return e;e=e.parent}}class Kr extends Ti(qe){constructor(n,e){super(n,e),h_e.call(this)}detach(){this.stopListening()}toRange(){return new qe(this.start,this.end)}static fromRange(n){return new Kr(n.start,n.end)}}Kr.prototype.is=function(t){return t==="liveRange"||t==="model:liveRange"||t=="range"||t==="model:range"};function h_e(){this.listenTo(this.root.document.model,"applyOperation",(t,n)=>{const e=n[0];e.isDocumentOperation&&f_e.call(this,e)},{priority:"low"})}function f_e(t){const n=this.getTransformedByOperation(t),e=qe._createFromRanges(n),i=!e.isEqual(this),s=m_e(this,t);let r=null;if(i){e.root.rootName=="$graveyard"&&(t.type=="remove"?r=t.sourcePosition:r=t.deletionPosition);const o=this.toRange();this.start=e.start,this.end=e.end,this.fire("change:range",o,{deletionPosition:r})}else s&&this.fire("change:content",this.toRange(),{deletionPosition:r})}function m_e(t,n){switch(n.type){case"insert":return t.containsPosition(n.position);case"move":case"remove":case"reinsert":case"merge":return t.containsPosition(n.sourcePosition)||t.start.isEqual(n.sourcePosition)||t.containsPosition(n.targetPosition);case"split":return t.containsPosition(n.splitPosition)||t.containsPosition(n.insertionPosition)}return!1}const s1="selection:";class $a extends Ti(Yu){constructor(e){super();w(this,"_selection");this._selection=new p_e(e),this._selection.delegate("change:range").to(this),this._selection.delegate("change:attribute").to(this),this._selection.delegate("change:marker").to(this)}get isCollapsed(){return this._selection.isCollapsed}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get rangeCount(){return this._selection.rangeCount}get hasOwnRange(){return this._selection.hasOwnRange}get isBackward(){return this._selection.isBackward}get isGravityOverridden(){return this._selection.isGravityOverridden}get markers(){return this._selection.markers}get _ranges(){return this._selection._ranges}getRanges(){return this._selection.getRanges()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getSelectedBlocks(){return this._selection.getSelectedBlocks()}getSelectedElement(){return this._selection.getSelectedElement()}containsEntireContent(e){return this._selection.containsEntireContent(e)}destroy(){this._selection.destroy()}getAttributeKeys(){return this._selection.getAttributeKeys()}getAttributes(){return this._selection.getAttributes()}getAttribute(e){return this._selection.getAttribute(e)}hasAttribute(e){return this._selection.hasAttribute(e)}refresh(){this._selection.updateMarkers(),this._selection._updateAttributes(!1)}observeMarkers(e){this._selection.observeMarkers(e)}_setFocus(e,i){this._selection.setFocus(e,i)}_setTo(...e){this._selection.setTo(...e)}_setAttribute(e,i){this._selection.setAttribute(e,i)}_removeAttribute(e){this._selection.removeAttribute(e)}_getStoredAttributes(){return this._selection.getStoredAttributes()}_overrideGravity(){return this._selection.overrideGravity()}_restoreGravity(e){this._selection.restoreGravity(e)}static _getStoreAttributeKey(e){return s1+e}static _isStoreAttributeKey(e){return e.startsWith(s1)}}$a.prototype.is=function(t){return t==="selection"||t=="model:selection"||t=="documentSelection"||t=="model:documentSelection"};class p_e extends go{constructor(e){super();w(this,"markers",new _s({idProperty:"name"}));w(this,"_model");w(this,"_document");w(this,"_attributePriority",new Map);w(this,"_selectionRestorePosition",null);w(this,"_hasChangedRange",!1);w(this,"_overriddenGravityRegister",new Set);w(this,"_observedMarkers",new Set);this._model=e.model,this._document=e,this.listenTo(this._model,"applyOperation",(i,s)=>{const r=s[0];!r.isDocumentOperation||r.type=="marker"||r.type=="rename"||r.type=="noop"||(this._ranges.length==0&&this._selectionRestorePosition&&this._fixGraveyardSelection(this._selectionRestorePosition),this._selectionRestorePosition=null,this._hasChangedRange&&(this._hasChangedRange=!1,this.fire("change:range",{directChange:!1})))},{priority:"lowest"}),this.on("change:range",()=>{this._validateSelectionRanges(this.getRanges())}),this.listenTo(this._model.markers,"update",(i,s,r,o)=>{this._updateMarker(s,o)}),this.listenTo(this._document,"change",(i,s)=>{g_e(this._model,s)})}get isCollapsed(){return this._ranges.length===0?this._document._getDefaultRange().isCollapsed:super.isCollapsed}get anchor(){return super.anchor||this._document._getDefaultRange().start}get focus(){return super.focus||this._document._getDefaultRange().end}get rangeCount(){return this._ranges.length?this._ranges.length:1}get hasOwnRange(){return this._ranges.length>0}get isGravityOverridden(){return!!this._overriddenGravityRegister.size}destroy(){for(let e=0;e<this._ranges.length;e++)this._ranges[e].detach();this.stopListening()}*getRanges(){this._ranges.length?yield*super.getRanges():yield this._document._getDefaultRange()}getFirstRange(){return super.getFirstRange()||this._document._getDefaultRange()}getLastRange(){return super.getLastRange()||this._document._getDefaultRange()}setTo(...e){super.setTo(...e),this._updateAttributes(!0),this.updateMarkers()}setFocus(e,i){super.setFocus(e,i),this._updateAttributes(!0),this.updateMarkers()}setAttribute(e,i){if(this._setAttribute(e,i)){const s=[e];this.fire("change:attribute",{attributeKeys:s,directChange:!0})}}removeAttribute(e){if(this._removeAttribute(e)){const i=[e];this.fire("change:attribute",{attributeKeys:i,directChange:!0})}}overrideGravity(){const e=to();return this._overriddenGravityRegister.add(e),this._overriddenGravityRegister.size===1&&this._updateAttributes(!0),e}restoreGravity(e){if(!this._overriddenGravityRegister.has(e))throw new fe("document-selection-gravity-wrong-restore",this,{uid:e});this._overriddenGravityRegister.delete(e),this.isGravityOverridden||this._updateAttributes(!0)}observeMarkers(e){this._observedMarkers.add(e),this.updateMarkers()}_replaceAllRanges(e){this._validateSelectionRanges(e),super._replaceAllRanges(e)}_popRange(){this._ranges.pop().detach()}_pushRange(e){const i=this._prepareRange(e);i&&this._ranges.push(i)}_validateSelectionRanges(e){for(const i of e)if(!this._document._validateSelectionRange(i))throw new fe("document-selection-wrong-position",this,{range:i})}_prepareRange(e){if(this._checkRange(e),e.root==this._document.graveyard)return;const i=Kr.fromRange(e);return i.on("change:range",(s,r,o)=>{if(this._hasChangedRange=!0,i.root==this._document.graveyard){this._selectionRestorePosition=o.deletionPosition;const a=this._ranges.indexOf(i);this._ranges.splice(a,1),i.detach()}}),i}updateMarkers(){if(!this._observedMarkers.size)return;const e=[];let i=!1;for(const r of this._model.markers){const o=r.name.split(":",1)[0];if(!this._observedMarkers.has(o))continue;const a=r.getRange();for(const l of this.getRanges())a.containsRange(l,!l.isCollapsed)&&e.push(r)}const s=Array.from(this.markers);for(const r of e)this.markers.has(r)||(this.markers.add(r),i=!0);for(const r of Array.from(this.markers))e.includes(r)||(this.markers.remove(r),i=!0);i&&this.fire("change:marker",{oldMarkers:s,directChange:!1})}_updateMarker(e,i){const s=e.name.split(":",1)[0];if(!this._observedMarkers.has(s))return;let r=!1;const o=Array.from(this.markers),a=this.markers.has(e);if(!i)a&&(this.markers.remove(e),r=!0);else{let l=!1;for(const c of this.getRanges())if(i.containsRange(c,!c.isCollapsed)){l=!0;break}l&&!a?(this.markers.add(e),r=!0):!l&&a&&(this.markers.remove(e),r=!0)}r&&this.fire("change:marker",{oldMarkers:o,directChange:!1})}_updateAttributes(e){const i=Va(this._getSurroundingAttributes()),s=Va(this.getAttributes());if(e)this._attributePriority=new Map,this._attrs=new Map;else for(const[o,a]of this._attributePriority)a=="low"&&(this._attrs.delete(o),this._attributePriority.delete(o));this._setAttributesTo(i);const r=[];for(const[o,a]of this.getAttributes())(!s.has(o)||s.get(o)!==a)&&r.push(o);for(const[o]of s)this.hasAttribute(o)||r.push(o);r.length>0&&this.fire("change:attribute",{attributeKeys:r,directChange:!1})}_setAttribute(e,i,s=!0){const r=s?"normal":"low";return r=="low"&&this._attributePriority.get(e)=="normal"||super.getAttribute(e)===i?!1:(this._attrs.set(e,i),this._attributePriority.set(e,r),!0)}_removeAttribute(e,i=!0){const s=i?"normal":"low";return s=="low"&&this._attributePriority.get(e)=="normal"||(this._attributePriority.set(e,s),!super.hasAttribute(e))?!1:(this._attrs.delete(e),!0)}_setAttributesTo(e){const i=new Set;for(const[s,r]of this.getAttributes())e.get(s)!==r&&this._removeAttribute(s,!1);for(const[s,r]of e)this._setAttribute(s,r,!1)&&i.add(s);return i}*getStoredAttributes(){const e=this.getFirstPosition().parent;if(this.isCollapsed&&e.isEmpty)for(const i of e.getAttributeKeys())i.startsWith(s1)&&(yield[i.substr(s1.length),e.getAttribute(i)])}_getSurroundingAttributes(){const e=this.getFirstPosition(),i=this._model.schema;if(e.root.rootName=="$graveyard")return null;let s=null;if(this.isCollapsed){const r=e.textNode?e.textNode:e.nodeBefore,o=e.textNode?e.textNode:e.nodeAfter;if(this.isGravityOverridden||(s=yp(r,i)),s||(s=yp(o,i)),!this.isGravityOverridden&&!s){let a=r;for(;a&&!s;)a=a.previousSibling,s=yp(a,i)}if(!s){let a=o;for(;a&&!s;)a=a.nextSibling,s=yp(a,i)}s||(s=this.getStoredAttributes())}else{const r=this.getFirstRange();for(const o of r){if(o.item.is("element")&&i.isObject(o.item)){s=yp(o.item,i);break}if(o.type=="text"){s=o.item.getAttributes();break}}}return s}_fixGraveyardSelection(e){const i=this._model.schema.getNearestSelectionRange(e);i&&this._pushRange(i)}}function yp(t,n){if(!t)return null;if(t instanceof Ma||t instanceof Gi)return t.getAttributes();if(!n.isInline(t))return null;if(!n.isObject(t))return[];const e=[];for(const[i,s]of t.getAttributes())n.checkAttribute("$text",i)&&n.getAttributeProperties(i).copyFromObject!==!1&&e.push([i,s]);return e}function g_e(t,n){const e=t.document.differ;for(const i of e.getChanges()){if(i.type!="insert")continue;const s=i.position.parent;i.length===s.maxOffset&&t.enqueueChange(n,o=>{const a=Array.from(s.getAttributeKeys()).filter(l=>l.startsWith(s1));for(const l of a)o.removeAttribute(l,s)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class MV{constructor(n){w(this,"_dispatchers");this._dispatchers=n}add(n){for(const e of this._dispatchers)n(e);return this}}class v_e extends MV{elementToElement(n){return this.add(B_e(n))}elementToStructure(n){return this.add(F_e(n))}attributeToElement(n){return this.add(N_e(n))}attributeToAttribute(n){return this.add(V_e(n))}markerToElement(n){return this.add(D_e(n))}markerToHighlight(n){return this.add(z_e(n))}markerToData(n){return this.add($_e(n))}}function PV(){return(t,n,e)=>{if(!e.consumable.consume(n.item,t.name))return;const i=e.writer,s=e.mapper.toViewPosition(n.range.start),r=i.createText(n.item.data);i.insert(s,r)}}function OV(){return(t,n,e)=>{e.convertAttributes(n.item),!n.reconversion&&n.item.is("element")&&!n.item.isEmpty&&e.convertChildren(n.item)}}function b_e(){return(t,n,e)=>{const i=e.mapper.toViewPosition(n.position),s=n.position.getShiftedBy(n.length),r=e.mapper.toViewPosition(s,{isPhantom:!0}),o=e.writer.createRange(i,r),a=e.writer.remove(o.getTrimmed());for(const l of e.writer.createRangeIn(a).getItems())e.mapper.unbindViewElement(l,{defer:!0})}}function LV(t,n){const e=t.createAttributeElement("span",n.attributes);return n.classes&&e._addClass(n.classes),typeof n.priority=="number"&&(e._priority=n.priority),e._id=n.id,e}function __e(){return(t,n,e)=>{const i=n.selection;if(i.isCollapsed||!e.consumable.consume(i,"selection"))return;const s=[];for(const r of i.getRanges())s.push(e.mapper.toViewRange(r));e.writer.setSelection(s,{backward:i.isBackward})}}function w_e(){return(t,n,e)=>{const i=n.selection;if(!i.isCollapsed||!e.consumable.consume(i,"selection"))return;const s=e.writer,r=i.getFirstPosition(),o=e.mapper.toViewPosition(r),a=s.breakAttributes(o);s.setSelection(a)}}function y_e(){return(t,n,e)=>{const i=e.writer,s=i.document.selection;for(const r of s.getRanges())r.isCollapsed&&r.end.parent.isAttached()&&e.writer.mergeAttributes(r.start);i.setSelection(null)}}function C_e(t){return(n,e,i)=>{if(!i.consumable.test(e.item,n.name))return;const s=t(e.attributeOldValue,i,e),r=t(e.attributeNewValue,i,e);if(!s&&!r)return;i.consumable.consume(e.item,n.name);const o=i.writer,a=o.document.selection;if(e.item instanceof go||e.item instanceof $a)o.wrap(a.getFirstRange(),r);else{let l=i.mapper.toViewRange(e.range);e.attributeOldValue!==null&&s&&(l=o.unwrap(l,s)),e.attributeNewValue!==null&&r&&o.wrap(l,r)}}}function k_e(t,n=G_e){return(e,i,s)=>{if(!n(i.item,s.consumable,{preflight:!0}))return;const r=t(i.item,s,i);if(!r)return;n(i.item,s.consumable);const o=s.mapper.toViewPosition(i.range.start);s.mapper.bindElements(i.item,r),s.writer.insert(o,r),s.convertAttributes(i.item),DV(r,i.item.getChildren(),s,{reconversion:i.reconversion})}}function E_e(t,n){return(e,i,s)=>{if(!n(i.item,s.consumable,{preflight:!0}))return;const r=new Map;s.writer._registerSlotFactory(W_e(i.item,r,s));const o=t(i.item,s,i);if(s.writer._clearSlotFactory(),!o)return;j_e(i.item,r,s),n(i.item,s.consumable);const a=s.mapper.toViewPosition(i.range.start);s.mapper.bindElements(i.item,o),s.writer.insert(a,o),s.convertAttributes(i.item),q_e(o,r,s,{reconversion:i.reconversion})}}function S_e(t){return(n,e,i)=>{e.isOpening=!0;const s=t(e,i);e.isOpening=!1;const r=t(e,i);if(!s||!r)return;const o=e.markerRange;if(o.isCollapsed&&!i.consumable.consume(o,n.name))return;for(const c of o)if(!i.consumable.consume(c.item,n.name))return;const a=i.mapper,l=i.writer;l.insert(a.toViewPosition(o.start),s),i.mapper.bindElementToMarker(s,e.markerName),o.isCollapsed||(l.insert(a.toViewPosition(o.end),r),i.mapper.bindElementToMarker(r,e.markerName)),n.stop()}}function T_e(){return(t,n,e)=>{const i=e.mapper.markerNameToElements(n.markerName);if(i){for(const s of i)e.mapper.unbindElementFromMarkerName(s,n.markerName),e.writer.clear(e.writer.createRangeOn(s),s);e.writer.clearClonedElementsGroup(n.markerName),t.stop()}}}function x_e(t){return(n,e,i)=>{const s=t(e.markerName,i);if(!s)return;const r=e.markerRange;i.consumable.consume(r,n.name)&&(yI(r,!1,i,e,s),yI(r,!0,i,e,s),n.stop())}}function yI(t,n,e,i,s){const r=n?t.start:t.end,o=r.nodeAfter&&r.nodeAfter.is("element")?r.nodeAfter:null,a=r.nodeBefore&&r.nodeBefore.is("element")?r.nodeBefore:null;if(o||a){let c,u;n&&o||!n&&!a?(c=o,u=!0):(c=a,u=!1);const d=e.mapper.toViewElement(c);if(d){A_e(d,n,u,e,i,s);return}}const l=e.mapper.toViewPosition(r);I_e(l,n,e,i,s)}function A_e(t,n,e,i,s,r){const o=`data-${r.group}-${n?"start":"end"}-${e?"before":"after"}`,a=t.hasAttribute(o)?t.getAttribute(o).split(","):[];a.unshift(r.name),i.writer.setAttribute(o,a.join(","),t),i.mapper.bindElementToMarker(t,s.markerName)}function I_e(t,n,e,i,s){const r=`${s.group}-${n?"start":"end"}`,o=s.name?{name:s.name}:null,a=e.writer.createUIElement(r,o);e.writer.insert(t,a),e.mapper.bindElementToMarker(a,i.markerName)}function R_e(t){return(n,e,i)=>{const s=t(e.markerName,i);if(!s)return;const r=i.mapper.markerNameToElements(e.markerName);if(!r)return;for(const a of r)i.mapper.unbindElementFromMarkerName(a,e.markerName),a.is("containerElement")?(o(`data-${s.group}-start-before`,a),o(`data-${s.group}-start-after`,a),o(`data-${s.group}-end-before`,a),o(`data-${s.group}-end-after`,a)):i.writer.clear(i.writer.createRangeOn(a),a);i.writer.clearClonedElementsGroup(e.markerName),n.stop();function o(a,l){if(l.hasAttribute(a)){const c=new Set(l.getAttribute(a).split(","));c.delete(s.name),c.size==0?i.writer.removeAttribute(a,l):i.writer.setAttribute(a,Array.from(c).join(","),l)}}}}function M_e(t){return(n,e,i)=>{if(!i.consumable.test(e.item,n.name))return;const s=t(e.attributeOldValue,i,e),r=t(e.attributeNewValue,i,e);if(!s&&!r)return;i.consumable.consume(e.item,n.name);const o=i.mapper.toViewElement(e.item),a=i.writer;if(!o)throw new fe("conversion-attribute-to-attribute-on-text",i.dispatcher,e);if(e.attributeOldValue!==null&&s)if(s.key=="class"){const l=typeof s.value=="string"?s.value.split(/\s+/):s.value;for(const c of l)a.removeClass(c,o)}else if(s.key=="style")if(typeof s.value=="string"){const l=new HC(a.document.stylesProcessor);l.setTo(s.value);for(const[c]of l.getStylesEntries())a.removeStyle(c,o)}else{const l=Object.keys(s.value);for(const c of l)a.removeStyle(c,o)}else a.removeAttribute(s.key,o);if(e.attributeNewValue!==null&&r)if(r.key=="class"){const l=typeof r.value=="string"?r.value.split(/\s+/):r.value;for(const c of l)a.addClass(c,o)}else if(r.key=="style")if(typeof r.value=="string"){const l=new HC(a.document.stylesProcessor);l.setTo(r.value);for(const[c,u]of l.getStylesEntries())a.setStyle(c,u,o)}else{const l=Object.keys(r.value);for(const c of l)a.setStyle(c,r.value[c],o)}else a.setAttribute(r.key,r.value,o)}}function P_e(t){return(n,e,i)=>{if(!e.item||!(e.item instanceof go||e.item instanceof $a)&&!e.item.is("$textProxy"))return;const s=$E(t,e,i);if(!s||!i.consumable.consume(e.item,n.name))return;const r=i.writer,o=LV(r,s),a=r.document.selection;if(e.item instanceof go||e.item instanceof $a)r.wrap(a.getFirstRange(),o);else{const l=i.mapper.toViewRange(e.range),c=r.wrap(l,o);for(const u of c.getItems())if(u.is("attributeElement")&&u.isSimilar(o)){i.mapper.bindElementToMarker(u,e.markerName);break}}}}function O_e(t){return(n,e,i)=>{if(!e.item||!(e.item instanceof Hi))return;const s=$E(t,e,i);if(!s||!i.consumable.test(e.item,n.name))return;const r=i.mapper.toViewElement(e.item);if(r&&r.getCustomProperty("addHighlight")){i.consumable.consume(e.item,n.name);for(const a of qe._createIn(e.item))i.consumable.consume(a.item,n.name);r.getCustomProperty("addHighlight")(r,s,i.writer),i.mapper.bindElementToMarker(r,e.markerName)}}}function L_e(t){return(n,e,i)=>{if(e.markerRange.isCollapsed)return;const s=$E(t,e,i);if(!s)return;const r=LV(i.writer,s),o=i.mapper.markerNameToElements(e.markerName);if(o){for(const a of o)i.mapper.unbindElementFromMarkerName(a,e.markerName),a.is("attributeElement")?i.writer.unwrap(i.writer.createRangeOn(a),r):a.getCustomProperty("removeHighlight")(a,s.id,i.writer);i.writer.clearClonedElementsGroup(e.markerName),n.stop()}}}function B_e(t){const n=BV(t.model),e=r1(t.view,"container");return n.attributes.length&&(n.children=!0),i=>{i.on(`insert:${n.name}`,k_e(e,VV(n)),{priority:t.converterPriority||"normal"}),(n.children||n.attributes.length)&&i.on("reduceChanges",NV(n),{priority:"low"})}}function F_e(t){const n=BV(t.model),e=r1(t.view,"container");return n.children=!0,i=>{if(i._conversionApi.schema.checkChild(n.name,"$text"))throw new fe("conversion-element-to-structure-disallowed-text",i,{elementName:n.name});i.on(`insert:${n.name}`,E_e(e,VV(n)),{priority:t.converterPriority||"normal"}),i.on("reduceChanges",NV(n),{priority:"low"})}}function N_e(t){t=To(t);let n=t.model;typeof n=="string"&&(n={key:n});let e=`attribute:${n.key}`;if(n.name&&(e+=":"+n.name),n.values)for(const s of n.values)t.view[s]=r1(t.view[s],"attribute");else t.view=r1(t.view,"attribute");const i=FV(t);return s=>{s.on(e,C_e(i),{priority:t.converterPriority||"normal"})}}function V_e(t){t=To(t);let n=t.model;typeof n=="string"&&(n={key:n});let e=`attribute:${n.key}`;if(n.name&&(e+=":"+n.name),n.values)for(const s of n.values)t.view[s]=CI(t.view[s]);else t.view=CI(t.view);const i=FV(t);return s=>{s.on(e,M_e(i),{priority:t.converterPriority||"normal"})}}function D_e(t){const n=r1(t.view,"ui");return e=>{e.on(`addMarker:${t.model}`,S_e(n),{priority:t.converterPriority||"normal"}),e.on(`removeMarker:${t.model}`,T_e(),{priority:t.converterPriority||"normal"})}}function $_e(t){t=To(t);const n=t.model;let e=t.view;return e||(e=i=>({group:n,name:i.substr(t.model.length+1)})),i=>{i.on(`addMarker:${n}`,x_e(e),{priority:t.converterPriority||"normal"}),i.on(`removeMarker:${n}`,R_e(e),{priority:t.converterPriority||"normal"})}}function z_e(t){return n=>{n.on(`addMarker:${t.model}`,P_e(t.view),{priority:t.converterPriority||"normal"}),n.on(`addMarker:${t.model}`,O_e(t.view),{priority:t.converterPriority||"normal"}),n.on(`removeMarker:${t.model}`,L_e(t.view),{priority:t.converterPriority||"normal"})}}function BV(t){return typeof t=="string"&&(t={name:t}),{name:t.name,attributes:t.attributes?Si(t.attributes):[],children:!!t.children}}function r1(t,n){return typeof t=="function"?t:(e,i)=>H_e(t,i,n)}function H_e(t,n,e){typeof t=="string"&&(t={name:t});let i;const s=n.writer,r=Object.assign({},t.attributes);if(e=="container")i=s.createContainerElement(t.name,r);else if(e=="attribute"){const o={priority:t.priority||nh.DEFAULT_PRIORITY};i=s.createAttributeElement(t.name,r,o)}else i=s.createUIElement(t.name,r);if(t.styles){const o=Object.keys(t.styles);for(const a of o)s.setStyle(a,t.styles[a],i)}if(t.classes){const o=t.classes;if(typeof o=="string")s.addClass(o,i);else for(const a of o)s.addClass(a,i)}return i}function FV(t){return t.model.values?(n,e,i)=>{const s=t.view[n];return s?s(n,e,i):null}:t.view}function CI(t){return typeof t=="string"?n=>({key:t,value:n}):typeof t=="object"?t.value?()=>t:n=>({key:t.key,value:n}):t}function $E(t,n,e){const i=typeof t=="function"?t(n,e):t;return i?(i.priority||(i.priority=10),i.id||(i.id=n.markerName),i):null}function U_e(t){return(n,e)=>{if(!n.is("element",t.name))return!1;if(e.type=="attribute"){if(t.attributes.includes(e.attributeKey))return!0}else{/* istanbul ignore else: This is always true because otherwise it would not register a reducer callback. -- @preserve */if(t.children)return!0}return!1}}function NV(t){const n=U_e(t);return(e,i)=>{const s=[];i.reconvertedElements||(i.reconvertedElements=new Set);for(const r of i.changes){const o=r.type=="attribute"?r.range.start.nodeAfter:r.position.parent;if(!o||!n(o,r)){s.push(r);continue}if(!i.reconvertedElements.has(o)){i.reconvertedElements.add(o);const a=mt._createBefore(o);let l=s.length;for(let c=s.length-1;c>=0;c--){const u=s[c],f=(u.type=="attribute"?u.range.start:u.position).compareWith(a);if(f=="before"||u.type=="remove"&&f=="same")break;l=c}s.splice(l,0,{type:"remove",name:o.name,position:a,length:1},{type:"reinsert",name:o.name,position:a,length:1})}}i.changes=s}}function VV(t){return(n,e,i={})=>{const s=["insert"];for(const r of t.attributes)n.hasAttribute(r)&&s.push(`attribute:${r}`);return s.every(r=>e.test(n,r))?(i.preflight||s.forEach(r=>e.consume(n,r)),!0):!1}}function W_e(t,n,e){return(i,s)=>{const r=i.createContainerElement("$slot");let o=null;if(s==="children")o=Array.from(t.getChildren());else if(typeof s=="function")o=Array.from(t.getChildren()).filter(a=>s(a));else throw new fe("conversion-slot-mode-unknown",e.dispatcher,{modeOrFilter:s});return n.set(r,o),r}}function j_e(t,n,e){const i=Array.from(n.values()).flat(),s=new Set(i);if(s.size!=i.length)throw new fe("conversion-slot-filter-overlap",e.dispatcher,{element:t});if(s.size!=t.childCount)throw new fe("conversion-slot-filter-incomplete",e.dispatcher,{element:t})}function q_e(t,n,e,i){e.mapper.on("modelToViewPosition",o,{priority:"highest"});let s=null,r=null;for([s,r]of n)DV(t,r,e,i),e.writer.move(e.writer.createRangeIn(s),e.writer.createPositionBefore(s)),e.writer.remove(s);e.mapper.off("modelToViewPosition",o);function o(a,l){const c=l.modelPosition.nodeAfter,u=r.indexOf(c);u<0||(l.viewPosition=l.mapper.findPositionIn(s,u))}}function DV(t,n,e,i){for(const s of n)K_e(t.root,s,e,i)||e.convertItem(s)}function K_e(t,n,e,i){const{writer:s,mapper:r}=e;if(!i.reconversion)return!1;const o=r.toViewElement(n);return!o||o.root==t||!e.canReuseView(o)?!1:(s.move(s.createRangeOn(o),r.toViewPosition(mt._createBefore(n))),!0)}function G_e(t,n,{preflight:e}={}){return e?n.test(t,"insert"):n.consume(t,"insert")}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function $V(t){const{schema:n,document:e}=t.model;for(const i of e.getRoots())if(i.isEmpty&&!n.checkChild(i,"$text")&&n.checkChild(i,"paragraph"))return t.insertElement("paragraph",i),!0;return!1}function zV(t,n,e){const i=e.createContext(t);return!(!e.checkChild(i,"paragraph")||!e.checkChild(i.push("paragraph"),n))}function HV(t,n){const e=n.createElement("paragraph");return n.insert(e,t),n.createPositionAt(e,0)}class Y_e extends MV{elementToElement(n){return this.add(UV(n))}elementToAttribute(n){return this.add(J_e(n))}attributeToAttribute(n){return this.add(Q_e(n))}elementToMarker(n){return this.add(ewe(n))}dataToMarker(n){return this.add(twe(n))}}function kI(){return(t,n,e)=>{if(!n.modelRange&&e.consumable.consume(n.viewItem,{name:!0})){const{modelRange:i,modelCursor:s}=e.convertChildren(n.viewItem,n.modelCursor);n.modelRange=i,n.modelCursor=s}}}function Z_e(){return(t,n,{schema:e,consumable:i,writer:s})=>{let r=n.modelCursor;if(!i.test(n.viewItem))return;if(!e.checkChild(r,"$text")){if(!zV(r,"$text",e)||n.viewItem.data.trim().length==0)return;r=HV(r,s)}i.consume(n.viewItem);const o=s.createText(n.viewItem.data);s.insert(o,r),n.modelRange=s.createRange(r,r.getShiftedBy(o.offsetSize)),n.modelCursor=n.modelRange.end}}function X_e(t,n){return(e,i)=>{const s=i.newSelection,r=[];for(const a of s.getRanges())r.push(n.toModelRange(a));const o=t.createSelection(r,{backward:s.isBackward});o.isEqual(t.document.selection)||t.change(a=>{a.setSelection(o)})}}function UV(t){t=To(t);const n=YC(t),e=zE(t.view),i=e?`element:${e}`:"element";return s=>{s.on(i,n,{priority:t.converterPriority||"normal"})}}function J_e(t){t=To(t),WV(t);const n=jV(t,!1),e=zE(t.view),i=e?`element:${e}`:"element";return s=>{s.on(i,n,{priority:t.converterPriority||"low"})}}function Q_e(t){t=To(t);let n=null;(typeof t.view=="string"||t.view.key)&&(n=swe(t)),WV(t,n);const e=jV(t,!0);return i=>{i.on("element",e,{priority:t.converterPriority||"low"})}}function ewe(t){const n=awe(t.model);return UV({...t,model:n})}function twe(t){t=To(t),t.model||(t.model=s=>s?t.view+":"+s:t.view);const n={view:t.view,model:t.model},e=YC(EI(n,"start")),i=YC(EI(n,"end"));return s=>{s.on(`element:${t.view}-start`,e,{priority:t.converterPriority||"normal"}),s.on(`element:${t.view}-end`,i,{priority:t.converterPriority||"normal"});const r=Ru.low,o=Ru.highest,a=Ru.get(t.converterPriority)/o;s.on("element",nwe(n),{priority:r+a})}}function nwe(t){return(n,e,i)=>{const s=`data-${t.view}`;if(!i.consumable.test(e.viewItem,{attributes:s+"-end-after"})&&!i.consumable.test(e.viewItem,{attributes:s+"-start-after"})&&!i.consumable.test(e.viewItem,{attributes:s+"-end-before"})&&!i.consumable.test(e.viewItem,{attributes:s+"-start-before"}))return;e.modelRange||Object.assign(e,i.convertChildren(e.viewItem,e.modelCursor)),i.consumable.consume(e.viewItem,{attributes:s+"-end-after"})&&r(e.modelRange.end,e.viewItem.getAttribute(s+"-end-after").split(",")),i.consumable.consume(e.viewItem,{attributes:s+"-start-after"})&&r(e.modelRange.end,e.viewItem.getAttribute(s+"-start-after").split(",")),i.consumable.consume(e.viewItem,{attributes:s+"-end-before"})&&r(e.modelRange.start,e.viewItem.getAttribute(s+"-end-before").split(",")),i.consumable.consume(e.viewItem,{attributes:s+"-start-before"})&&r(e.modelRange.start,e.viewItem.getAttribute(s+"-start-before").split(","));function r(o,a){for(const l of a){const c=t.model(l,i),u=i.writer.createElement("$marker",{"data-name":c});i.writer.insert(u,o),e.modelCursor.isEqual(o)?e.modelCursor=e.modelCursor.getShiftedBy(1):e.modelCursor=e.modelCursor._getTransformedByInsertion(o,1),e.modelRange=e.modelRange._getTransformedByInsertion(o,1)[0]}}}}function zE(t){return typeof t=="string"?t:typeof t=="object"&&typeof t.name=="string"?t.name:null}function YC(t){const n=new Io(t.view);return(e,i,s)=>{const r=n.match(i.viewItem);if(!r)return;const o=r.match;if(o.name=!0,!s.consumable.test(i.viewItem,o))return;const a=iwe(t.model,i.viewItem,s);a&&s.safeInsert(a,i.modelCursor)&&(s.consumable.consume(i.viewItem,o),s.convertChildren(i.viewItem,a),s.updateConversionResult(a,i))}}function iwe(t,n,e){return t instanceof Function?t(n,e):e.writer.createElement(t)}function swe(t){typeof t.view=="string"&&(t.view={key:t.view});const n=t.view.key,e=typeof t.view.value>"u"?/[\s\S]*/:t.view.value;let i;return n=="class"||n=="style"?i={[n=="class"?"classes":"styles"]:e}:i={attributes:{[n]:e}},t.view.name&&(i.name=t.view.name),t.view=i,n}function WV(t,n=null){const e=n===null?!0:r=>r.getAttribute(n),i=typeof t.model!="object"?t.model:t.model.key,s=typeof t.model!="object"||typeof t.model.value>"u"?e:t.model.value;t.model={key:i,value:s}}function jV(t,n){const e=new Io(t.view);return(i,s,r)=>{if(!s.modelRange&&n)return;const o=e.match(s.viewItem);if(!o||(rwe(t.view,s.viewItem)?o.match.name=!0:delete o.match.name,!r.consumable.test(s.viewItem,o.match)))return;const a=t.model.key,l=typeof t.model.value=="function"?t.model.value(s.viewItem,r):t.model.value;if(l===null)return;s.modelRange||Object.assign(s,r.convertChildren(s.viewItem,s.modelCursor)),owe(s.modelRange,{key:a,value:l},n,r)&&(r.consumable.test(s.viewItem,{name:!0})&&(o.match.name=!0),r.consumable.consume(s.viewItem,o.match))}}function rwe(t,n){const e=typeof t=="function"?t(n):t;return typeof e=="object"&&!zE(e)?!1:!e.classes&&!e.attributes&&!e.styles}function owe(t,n,e,i){let s=!1;for(const r of Array.from(t.getItems({shallow:e})))i.schema.checkAttribute(r,n.key)&&(s=!0,!r.hasAttribute(n.key)&&i.writer.setAttribute(n.key,n.value,r));return s}function awe(t){return(n,e)=>{const i=typeof t=="string"?t:t(n,e);return e.writer.createElement("$marker",{"data-name":i})}}function EI(t,n){const e=(i,s)=>{const r=i.getAttribute("name"),o=t.model(r,s);return s.writer.createElement("$marker",{"data-name":o})};return{view:`${t.view}-${n}`,model:e}}function lwe(t){t.document.registerPostFixer(n=>cwe(n,t))}function cwe(t,n){const e=n.document.selection,i=n.schema,s=[];let r=!1;for(const o of e.getRanges()){const a=qV(o,i);a&&!a.isEqual(o)?(s.push(a),r=!0):s.push(o)}return r&&t.setSelection(fwe(s),{backward:e.isBackward}),!1}function qV(t,n){return t.isCollapsed?uwe(t,n):dwe(t,n)}function uwe(t,n){const e=t.start,i=n.getNearestSelectionRange(e);if(!i){const r=e.getAncestors().reverse().find(o=>n.isObject(o));return r?qe._createOn(r):null}if(!i.isCollapsed)return i;const s=i.start;return e.isEqual(s)?null:new qe(s)}function dwe(t,n){const{start:e,end:i}=t,s=n.checkChild(e,"$text"),r=n.checkChild(i,"$text"),o=n.getLimitElement(e),a=n.getLimitElement(i);if(o===a){if(s&&r)return null;if(hwe(e,i,n)){const d=e.nodeAfter&&n.isSelectable(e.nodeAfter)?null:n.getNearestSelectionRange(e,"forward"),p=i.nodeBefore&&n.isSelectable(i.nodeBefore)?null:n.getNearestSelectionRange(i,"backward"),m=d?d.start:e,v=p?p.end:i;return new qe(m,v)}}const l=o&&!o.is("rootElement"),c=a&&!a.is("rootElement");if(l||c){const u=e.nodeAfter&&i.nodeBefore&&e.nodeAfter.parent===i.nodeBefore.parent,d=l&&(!u||!TI(e.nodeAfter,n)),f=c&&(!u||!TI(i.nodeBefore,n));let p=e,m=i;return d&&(p=mt._createBefore(SI(o,n))),f&&(m=mt._createAfter(SI(a,n))),new qe(p,m)}return null}function SI(t,n){let e=t,i=e;for(;n.isLimit(i)&&i.parent;)e=i,i=i.parent;return e}function hwe(t,n,e){const i=t.nodeAfter&&!e.isLimit(t.nodeAfter)||e.checkChild(t,"$text"),s=n.nodeBefore&&!e.isLimit(n.nodeBefore)||e.checkChild(n,"$text");return i||s}function fwe(t){const n=[...t],e=new Set;let i=1;for(;i<n.length;){const r=n[i],o=n.slice(0,i);for(const[a,l]of o.entries())if(!e.has(a)){if(r.isEqual(l))e.add(a);else if(r.isIntersecting(l)){e.add(a),e.add(i);const c=r.getJoined(l);n.push(c)}}i++}return n.filter((r,o)=>!e.has(o))}function TI(t,n){return t&&n.isSelectable(t)}class mwe extends li(){constructor(e,i){super();w(this,"model");w(this,"view");w(this,"mapper");w(this,"downcastDispatcher");this.model=e,this.view=new n_e(i),this.mapper=new AV,this.downcastDispatcher=new IV({mapper:this.mapper,schema:e.schema});const s=this.model.document,r=s.selection,o=this.model.markers;this.listenTo(this.model,"_beforeChanges",()=>{this.view._disableRendering(!0)},{priority:"highest"}),this.listenTo(this.model,"_afterChanges",()=>{this.view._disableRendering(!1)},{priority:"lowest"}),this.listenTo(s,"change",()=>{this.view.change(a=>{this.downcastDispatcher.convertChanges(s.differ,o,a),this.downcastDispatcher.convertSelection(r,o,a)})},{priority:"low"}),this.listenTo(this.view.document,"selectionChange",X_e(this.model,this.mapper)),this.listenTo(this.view.document,"beforeinput",pwe(this.mapper,this.model.schema,this.view),{priority:"high"}),this.downcastDispatcher.on("insert:$text",PV(),{priority:"lowest"}),this.downcastDispatcher.on("insert",OV(),{priority:"lowest"}),this.downcastDispatcher.on("remove",b_e(),{priority:"low"}),this.downcastDispatcher.on("cleanSelection",y_e()),this.downcastDispatcher.on("selection",__e(),{priority:"low"}),this.downcastDispatcher.on("selection",w_e(),{priority:"low"}),this.view.document.roots.bindTo(this.model.document.roots).using(a=>{if(a.rootName=="$graveyard")return null;const l=new pV(this.view.document,a.name);return l.rootName=a.rootName,this.mapper.bindElements(a,l),l})}destroy(){this.view.destroy(),this.stopListening()}reconvertMarker(e){const i=typeof e=="string"?e:e.name,s=this.model.markers.get(i);if(!s)throw new fe("editingcontroller-reconvertmarker-marker-not-exist",this,{markerName:i});this.model.change(()=>{this.model.markers._refresh(s)})}reconvertItem(e){this.model.change(()=>{this.model.document.differ._refreshItem(e)})}}function pwe(t,n,e){return(i,s)=>{if(!(e.document.isComposing&&!sn.isAndroid))for(let r=0;r<s.targetRanges.length;r++){const o=s.targetRanges[r],a=t.toModelRange(o),l=qV(a,n);!l||l.isEqual(a)||(s.targetRanges[r]=t.toViewRange(l))}}}class kg{constructor(){w(this,"_consumables",new Map)}add(n,e){let i;if(n.is("$text")||n.is("documentFragment")){this._consumables.set(n,!0);return}this._consumables.has(n)?i=this._consumables.get(n):(i=new gwe(n),this._consumables.set(n,i)),i.add(e)}test(n,e){const i=this._consumables.get(n);return i===void 0?null:n.is("$text")||n.is("documentFragment")?i:i.test(e)}consume(n,e){return this.test(n,e)?(n.is("$text")||n.is("documentFragment")?this._consumables.set(n,!1):this._consumables.get(n).consume(e),!0):!1}revert(n,e){const i=this._consumables.get(n);i!==void 0&&(n.is("$text")||n.is("documentFragment")?this._consumables.set(n,!0):i.revert(e))}static consumablesFromElement(n){const e={element:n,name:!0,attributes:[],classes:[],styles:[]},i=n.getAttributeKeys();for(const o of i)o=="style"||o=="class"||e.attributes.push(o);const s=n.getClassNames();for(const o of s)e.classes.push(o);const r=n.getStyleNames();for(const o of r)e.styles.push(o);return e}static createFrom(n,e){if(e||(e=new kg),n.is("$text"))return e.add(n),e;n.is("element")&&e.add(n,kg.consumablesFromElement(n)),n.is("documentFragment")&&e.add(n);for(const i of n.getChildren())e=kg.createFrom(i,e);return e}}const wv=["attributes","classes","styles"];class gwe{constructor(n){w(this,"element");w(this,"_canConsumeName");w(this,"_consumables");this.element=n,this._canConsumeName=null,this._consumables={attributes:new Map,styles:new Map,classes:new Map}}add(n){n.name&&(this._canConsumeName=!0);for(const e of wv)e in n&&this._add(e,n[e])}test(n){if(n.name&&!this._canConsumeName)return this._canConsumeName;for(const e of wv)if(e in n){const i=this._test(e,n[e]);if(i!==!0)return i}return!0}consume(n){n.name&&(this._canConsumeName=!1);for(const e of wv)e in n&&this._consume(e,n[e])}revert(n){n.name&&(this._canConsumeName=!0);for(const e of wv)e in n&&this._revert(e,n[e])}_add(n,e){const i=Si(e),s=this._consumables[n];for(const r of i){if(n==="attributes"&&(r==="class"||r==="style"))throw new fe("viewconsumable-invalid-attribute",this);if(s.set(r,!0),n==="styles")for(const o of this.element.document.stylesProcessor.getRelatedStyles(r))s.set(o,!0)}}_test(n,e){const i=Si(e),s=this._consumables[n];for(const r of i)if(n==="attributes"&&(r==="class"||r==="style")){const o=r=="class"?"classes":"styles",a=this._test(o,[...this._consumables[o].keys()]);if(a!==!0)return a}else{const o=s.get(r);if(o===void 0)return null;if(!o)return!1}return!0}_consume(n,e){const i=Si(e),s=this._consumables[n];for(const r of i)if(n==="attributes"&&(r==="class"||r==="style")){const o=r=="class"?"classes":"styles";this._consume(o,[...this._consumables[o].keys()])}else if(s.set(r,!1),n=="styles")for(const o of this.element.document.stylesProcessor.getRelatedStyles(r))s.set(o,!1)}_revert(n,e){const i=Si(e),s=this._consumables[n];for(const r of i)if(n==="attributes"&&(r==="class"||r==="style")){const o=r=="class"?"classes":"styles";this._revert(o,[...this._consumables[o].keys()])}else s.get(r)===!1&&s.set(r,!0)}}class vwe extends li(){constructor(){super();w(this,"_sourceDefinitions",{});w(this,"_attributeProperties",{});w(this,"_customChildChecks",new Map);w(this,"_customAttributeChecks",new Map);w(this,"_genericCheckSymbol",Symbol("$generic"));w(this,"_compiledDefinitions");this.decorate("checkChild"),this.decorate("checkAttribute"),this.on("checkAttribute",(e,i)=>{i[0]=new Mu(i[0])},{priority:"highest"}),this.on("checkChild",(e,i)=>{i[0]=new Mu(i[0]),i[1]=this.getDefinition(i[1])},{priority:"highest"})}register(e,i){if(this._sourceDefinitions[e])throw new fe("schema-cannot-register-item-twice",this,{itemName:e});this._sourceDefinitions[e]=[Object.assign({},i)],this._clearCache()}extend(e,i){if(!this._sourceDefinitions[e])throw new fe("schema-cannot-extend-missing-item",this,{itemName:e});this._sourceDefinitions[e].push(Object.assign({},i)),this._clearCache()}getDefinitions(){return this._compiledDefinitions||this._compile(),this._compiledDefinitions}getDefinition(e){let i;return typeof e=="string"?i=e:"is"in e&&(e.is("$text")||e.is("$textProxy"))?i="$text":i=e.name,this.getDefinitions()[i]}isRegistered(e){return!!this.getDefinition(e)}isBlock(e){const i=this.getDefinition(e);return!!(i&&i.isBlock)}isLimit(e){const i=this.getDefinition(e);return i?!!(i.isLimit||i.isObject):!1}isObject(e){const i=this.getDefinition(e);return i?!!(i.isObject||i.isLimit&&i.isSelectable&&i.isContent):!1}isInline(e){const i=this.getDefinition(e);return!!(i&&i.isInline)}isSelectable(e){const i=this.getDefinition(e);return i?!!(i.isSelectable||i.isObject):!1}isContent(e){const i=this.getDefinition(e);return i?!!(i.isContent||i.isObject):!1}checkChild(e,i){return i?this._checkContextMatch(e,i):!1}checkAttribute(e,i){const s=this.getDefinition(e.last);if(!s)return!1;const r=this._evaluateAttributeChecks(e,i);return r!==void 0?r:s.allowAttributes.includes(i)}checkMerge(e,i){if(e instanceof mt){const s=e.nodeBefore,r=e.nodeAfter;if(!(s instanceof Hi))throw new fe("schema-check-merge-no-element-before",this);if(!(r instanceof Hi))throw new fe("schema-check-merge-no-element-after",this);return this.checkMerge(s,r)}if(this.isLimit(e)||this.isLimit(i))return!1;for(const s of i.getChildren())if(!this.checkChild(e,s))return!1;return!0}addChildCheck(e,i){const s=i!==void 0?i:this._genericCheckSymbol,r=this._customChildChecks.get(s)||[];r.push(e),this._customChildChecks.set(s,r)}addAttributeCheck(e,i){const s=i!==void 0?i:this._genericCheckSymbol,r=this._customAttributeChecks.get(s)||[];r.push(e),this._customAttributeChecks.set(s,r)}setAttributeProperties(e,i){this._attributeProperties[e]=Object.assign(this.getAttributeProperties(e),i)}getAttributeProperties(e){return this._attributeProperties[e]||{}}getLimitElement(e){let i;for(e instanceof mt?i=e.parent:i=(e instanceof qe?[e]:Array.from(e.getRanges())).reduce((r,o)=>{const a=o.getCommonAncestor();return r?r.getCommonAncestor(a,{includeSelf:!0}):a},null);!this.isLimit(i)&&i.parent;)i=i.parent;return i}checkAttributeInSelection(e,i){if(e.isCollapsed){const r=[...e.getFirstPosition().getAncestors(),new Gi("",e.getAttributes())];return this.checkAttribute(r,i)}else{const s=e.getRanges();for(const r of s)for(const o of r)if(this.checkAttribute(o.item,i))return!0}return!1}*getValidRanges(e,i){e=Owe(e);for(const s of e)yield*this._getValidRangesForRange(s,i)}getNearestSelectionRange(e,i="both"){if(e.root.rootName=="$graveyard")return null;if(this.checkChild(e,"$text"))return new qe(e);let s,r;const o=e.getAncestors().reverse().find(a=>this.isLimit(a))||e.root;(i=="both"||i=="backward")&&(s=new rc({boundaries:qe._createIn(o),startPosition:e,direction:"backward"})),(i=="both"||i=="forward")&&(r=new rc({boundaries:qe._createIn(o),startPosition:e}));for(const a of Pwe(s,r)){const l=a.walker==s?"elementEnd":"elementStart",c=a.value;if(c.type==l&&this.isObject(c.item))return qe._createOn(c.item);if(this.checkChild(c.nextPosition,"$text"))return new qe(c.nextPosition)}return null}findAllowedParent(e,i){let s=e.parent;for(;s;){if(this.checkChild(s,i))return s;if(this.isLimit(s))return null;s=s.parent}return null}setAllowedAttributes(e,i,s){const r=s.model;for(const[o,a]of Object.entries(i))r.schema.checkAttribute(e,o)&&s.setAttribute(o,a,e)}removeDisallowedAttributes(e,i){for(const s of e)if(s.is("$text"))xI(this,s,i);else{const o=qe._createIn(s).getPositions();for(const a of o){const l=a.nodeBefore||a.parent;xI(this,l,i)}}}getAttributesWithProperty(e,i,s){const r={};for(const[o,a]of e.getAttributes()){const l=this.getAttributeProperties(o);l[i]!==void 0&&(s===void 0||s===l[i])&&(r[o]=a)}return r}createContext(e){return new Mu(e)}_clearCache(){this._compiledDefinitions=null}_compile(){const e={},i=this._sourceDefinitions,s=Object.keys(i);for(const o of s)e[o]=bwe(i[o],o);const r=Object.values(e);for(const o of r)_we(e,o),wwe(e,o),ywe(e,o),Cwe(e,o);for(const o of r)kwe(e,o);for(const o of r)Ewe(e,o);for(const o of r)Swe(e,o);for(const o of r)xwe(e,o);for(const o of r)Awe(e,o);this._compiledDefinitions=Twe(e)}_checkContextMatch(e,i){const s=e.last;let r=this._evaluateChildChecks(e,i);if(r=r!==void 0?r:i.allowIn.includes(s.name),!r)return!1;const o=this.getDefinition(s),a=e.trimLast();return o?a.length==0?!0:this._checkContextMatch(a,o):!1}_evaluateChildChecks(e,i){const s=this._customChildChecks.get(this._genericCheckSymbol)||[],r=this._customChildChecks.get(i.name)||[];for(const o of[...s,...r]){const a=o(e,i);if(a!==void 0)return a}}_evaluateAttributeChecks(e,i){const s=this._customAttributeChecks.get(this._genericCheckSymbol)||[],r=this._customAttributeChecks.get(i)||[];for(const o of[...s,...r]){const a=o(e,i);if(a!==void 0)return a}}*_getValidRangesForRange(e,i){let s=e.start,r=e.start;for(const o of e.getItems({shallow:!0}))o.is("element")&&(yield*this._getValidRangesForRange(qe._createIn(o),i)),this.checkAttribute(o,i)||(s.isEqual(r)||(yield new qe(s,r)),s=mt._createAfter(o)),r=mt._createAfter(o);s.isEqual(r)||(yield new qe(s,r))}findOptimalInsertionRange(e,i){const s=e.getSelectedElement();if(s&&this.isObject(s)&&!this.isInline(s))return i=="before"||i=="after"?new qe(mt._createAt(s,i)):qe._createOn(s);const r=bs(e.getSelectedBlocks());if(!r)return new qe(e.focus);if(r.isEmpty)return new qe(mt._createAt(r,0));const o=mt._createAfter(r);return e.focus.isTouching(o)?new qe(o):new qe(mt._createBefore(r))}}class Mu{constructor(n){w(this,"_items");if(n instanceof Mu)return n;let e;typeof n=="string"?e=[n]:Array.isArray(n)?e=n:e=n.getAncestors({includeSelf:!0}),this._items=e.map(Mwe)}get length(){return this._items.length}get last(){return this._items[this._items.length-1]}[Symbol.iterator](){return this._items[Symbol.iterator]()}push(n){const e=new Mu([n]);return e._items=[...this._items,...e._items],e}trimLast(){const n=new Mu([]);return n._items=this._items.slice(0,-1),n}getItem(n){return this._items[n]}*getNames(){yield*this._items.map(n=>n.name)}endsWith(n){return Array.from(this.getNames()).join(" ").endsWith(n)}startsWith(n){return Array.from(this.getNames()).join(" ").startsWith(n)}}function bwe(t,n){const e={name:n,allowIn:new Set,allowChildren:new Set,disallowIn:new Set,disallowChildren:new Set,allowContentOf:new Set,allowWhere:new Set,allowAttributes:new Set,disallowAttributes:new Set,allowAttributesOf:new Set,inheritTypesFrom:new Set};return Iwe(t,e),nl(t,e,"allowIn"),nl(t,e,"allowChildren"),nl(t,e,"disallowIn"),nl(t,e,"disallowChildren"),nl(t,e,"allowContentOf"),nl(t,e,"allowWhere"),nl(t,e,"allowAttributes"),nl(t,e,"disallowAttributes"),nl(t,e,"allowAttributesOf"),nl(t,e,"inheritTypesFrom"),Rwe(t,e),e}function _we(t,n){for(const e of n.allowIn){const i=t[e];i?i.allowChildren.add(n.name):n.allowIn.delete(e)}}function wwe(t,n){for(const e of n.allowChildren){const i=t[e];i?i.allowIn.add(n.name):n.allowChildren.delete(e)}}function ywe(t,n){for(const e of n.disallowIn){const i=t[e];i?i.disallowChildren.add(n.name):n.disallowIn.delete(e)}}function Cwe(t,n){for(const e of n.disallowChildren){const i=t[e];i?i.disallowIn.add(n.name):n.disallowChildren.delete(e)}}function kwe(t,n){for(const e of n.disallowChildren)n.allowChildren.delete(e);for(const e of n.disallowIn)n.allowIn.delete(e);for(const e of n.disallowAttributes)n.allowAttributes.delete(e)}function Ewe(t,n){for(const e of n.allowContentOf){const i=t[e];i&&(i.disallowChildren.forEach(s=>{n.allowChildren.has(s)||(n.disallowChildren.add(s),t[s].disallowIn.add(n.name))}),i.allowChildren.forEach(s=>{n.disallowChildren.has(s)||(n.allowChildren.add(s),t[s].allowIn.add(n.name))}))}}function Swe(t,n){for(const e of n.allowWhere){const i=t[e];i&&(i.disallowIn.forEach(s=>{n.allowIn.has(s)||(n.disallowIn.add(s),t[s].disallowChildren.add(n.name))}),i.allowIn.forEach(s=>{n.disallowIn.has(s)||(n.allowIn.add(s),t[s].allowChildren.add(n.name))}))}}function Twe(t){const n={};for(const e of Object.values(t))n[e.name]={name:e.name,isBlock:!!e.isBlock,isContent:!!e.isContent,isInline:!!e.isInline,isLimit:!!e.isLimit,isObject:!!e.isObject,isSelectable:!!e.isSelectable,allowIn:Array.from(e.allowIn).filter(i=>!!t[i]),allowChildren:Array.from(e.allowChildren).filter(i=>!!t[i]),allowAttributes:Array.from(e.allowAttributes)};return n}function xwe(t,n){for(const e of n.allowAttributesOf){const i=t[e];if(!i)return;i.allowAttributes.forEach(s=>{n.disallowAttributes.has(s)||n.allowAttributes.add(s)})}}function Awe(t,n){for(const e of n.inheritTypesFrom){const i=t[e];if(i){const s=Object.keys(i).filter(r=>r.startsWith("is"));for(const r of s)r in n||(n[r]=i[r])}}}function Iwe(t,n){for(const e of t){const i=Object.keys(e).filter(s=>s.startsWith("is"));for(const s of i)n[s]=!!e[s]}}function nl(t,n,e){for(const i of t){let s=i[e];typeof s=="string"&&(s=[s]),Array.isArray(s)&&s.forEach(r=>n[e].add(r))}}function Rwe(t,n){for(const e of t){const i=e.inheritAllFrom;i&&(n.allowContentOf.add(i),n.allowWhere.add(i),n.allowAttributesOf.add(i),n.inheritTypesFrom.add(i))}}function Mwe(t){return typeof t=="string"||t.is("documentFragment")?{name:typeof t=="string"?t:"$documentFragment",*getAttributeKeys(){},getAttribute(){}}:{name:t.is("element")?t.name:"$text",*getAttributeKeys(){yield*t.getAttributeKeys()},getAttribute(n){return t.getAttribute(n)}}}function*Pwe(t,n){let e=!1;for(;!e;){if(e=!0,t){const i=t.next();i.done||(e=!1,yield{walker:t,value:i.value})}if(n){const i=n.next();i.done||(e=!1,yield{walker:n,value:i.value})}}}function*Owe(t){for(const n of t)yield*n.getMinimalFlatRanges()}function xI(t,n,e){for(const i of n.getAttributeKeys())t.checkAttribute(n,i)||e.removeAttribute(i,n)}class Lwe extends Ti(){constructor(e){super();w(this,"conversionApi");w(this,"_splitParts",new Map);w(this,"_cursorParents",new Map);w(this,"_modelCursor",null);w(this,"_emptyElementsToKeep",new Set);this.conversionApi={...e,consumable:null,writer:null,store:null,convertItem:(i,s)=>this._convertItem(i,s),convertChildren:(i,s)=>this._convertChildren(i,s),safeInsert:(i,s)=>this._safeInsert(i,s),updateConversionResult:(i,s)=>this._updateConversionResult(i,s),splitToAllowedParent:(i,s)=>this._splitToAllowedParent(i,s),getSplitParts:i=>this._getSplitParts(i),keepEmptyElement:i=>this._keepEmptyElement(i)}}convert(e,i,s=["$root"]){this.fire("viewCleanup",e),this._modelCursor=Fwe(s,i),this.conversionApi.writer=i,this.conversionApi.consumable=kg.createFrom(e),this.conversionApi.store={};const{modelRange:r}=this._convertItem(e,this._modelCursor),o=i.createDocumentFragment();if(r){this._removeEmptyElements();for(const a of Array.from(this._modelCursor.parent.getChildren()))i.append(a,o);o.markers=Bwe(o,i)}return this._modelCursor=null,this._splitParts.clear(),this._cursorParents.clear(),this._emptyElementsToKeep.clear(),this.conversionApi.writer=null,this.conversionApi.store=null,o}_convertItem(e,i){const s={viewItem:e,modelCursor:i,modelRange:null};if(e.is("element")?this.fire(`element:${e.name}`,s,this.conversionApi):e.is("$text")?this.fire("text",s,this.conversionApi):this.fire("documentFragment",s,this.conversionApi),s.modelRange&&!(s.modelRange instanceof qe))throw new fe("view-conversion-dispatcher-incorrect-result",this);return{modelRange:s.modelRange,modelCursor:s.modelCursor}}_convertChildren(e,i){let s=i.is("position")?i:mt._createAt(i,0);const r=new qe(s);for(const o of Array.from(e.getChildren())){const a=this._convertItem(o,s);a.modelRange instanceof qe&&(r.end=a.modelRange.end,s=a.modelCursor)}return{modelRange:r,modelCursor:s}}_safeInsert(e,i){const s=this._splitToAllowedParent(e,i);return s?(this.conversionApi.writer.insert(e,s.position),!0):!1}_updateConversionResult(e,i){const s=this._getSplitParts(e),r=this.conversionApi.writer;i.modelRange||(i.modelRange=r.createRange(r.createPositionBefore(e),r.createPositionAfter(s[s.length-1])));const o=this._cursorParents.get(e);o?i.modelCursor=r.createPositionAt(o,0):i.modelCursor=i.modelRange.end}_splitToAllowedParent(e,i){const{schema:s,writer:r}=this.conversionApi;let o=s.findAllowedParent(i,e);if(o){if(o===i.parent)return{position:i};this._modelCursor.parent.getAncestors().includes(o)&&(o=null)}if(!o)return zV(i,e,s)?{position:HV(i,r)}:null;const a=this.conversionApi.writer.split(i,o),l=[];for(const u of a.range.getWalker())if(u.type=="elementEnd")l.push(u.item);else{const d=l.pop(),f=u.item;this._registerSplitPair(d,f)}const c=a.range.end.parent;return this._cursorParents.set(e,c),{position:a.position,cursorParent:c}}_registerSplitPair(e,i){this._splitParts.has(e)||this._splitParts.set(e,[e]);const s=this._splitParts.get(e);this._splitParts.set(i,s),s.push(i)}_getSplitParts(e){let i;return this._splitParts.has(e)?i=this._splitParts.get(e):i=[e],i}_keepEmptyElement(e){this._emptyElementsToKeep.add(e)}_removeEmptyElements(){let e=!1;for(const i of this._splitParts.keys())i.isEmpty&&!this._emptyElementsToKeep.has(i)&&(this.conversionApi.writer.remove(i),this._splitParts.delete(i),e=!0);e&&this._removeEmptyElements()}}function Bwe(t,n){const e=new Set,i=new Map,s=qe._createIn(t).getItems();for(const r of s)r.is("element","$marker")&&e.add(r);for(const r of e){const o=r.getAttribute("data-name"),a=n.createPositionBefore(r);i.has(o)?i.get(o).end=a.clone():i.set(o,new qe(a.clone())),n.remove(r)}return i}function Fwe(t,n){let e;for(const i of new Mu(t)){const s={};for(const o of i.getAttributeKeys())s[o]=i.getAttribute(o);const r=n.createElement(i.name,s);e&&n.insert(r,e),e=mt._createAt(r,0)}return e}class Nwe{getHtml(n){const i=$t.document.implementation.createHTMLDocument("").createElement("div");return i.appendChild(n),i.innerHTML}}class Vwe{constructor(n){w(this,"domParser");w(this,"domConverter");w(this,"htmlWriter");w(this,"skipComments",!0);this.domParser=new DOMParser,this.domConverter=new Kw(n,{renderingMode:"data"}),this.htmlWriter=new Nwe}toData(n){const e=this.domConverter.viewToDom(n);return this.htmlWriter.getHtml(e)}toView(n){const e=this._toDom(n);return this.domConverter.domToView(e,{skipComments:this.skipComments})}registerRawContentMatcher(n){this.domConverter.registerRawContentMatcher(n)}useFillerType(n){this.domConverter.blockFillerMode=n=="marked"?"markedNbsp":"nbsp"}_toDom(n){n.match(/<(?:html|body|head|meta)(?:\s[^>]*)?>/i)||(n=`<body>${n}</body>`);const e=this.domParser.parseFromString(n,"text/html"),i=e.createDocumentFragment(),s=e.body.childNodes;for(;s.length>0;)i.appendChild(s[0]);return i}}class Dwe extends Ti(){constructor(e,i){super();w(this,"model");w(this,"mapper");w(this,"downcastDispatcher");w(this,"upcastDispatcher");w(this,"viewDocument");w(this,"stylesProcessor");w(this,"htmlProcessor");w(this,"processor");w(this,"_viewWriter");this.model=e,this.mapper=new AV,this.downcastDispatcher=new IV({mapper:this.mapper,schema:e.schema}),this.downcastDispatcher.on("insert:$text",PV(),{priority:"lowest"}),this.downcastDispatcher.on("insert",OV(),{priority:"lowest"}),this.upcastDispatcher=new Lwe({schema:e.schema}),this.viewDocument=new jw(i),this.stylesProcessor=i,this.htmlProcessor=new Vwe(this.viewDocument),this.processor=this.htmlProcessor,this._viewWriter=new bV(this.viewDocument),this.upcastDispatcher.on("text",Z_e(),{priority:"lowest"}),this.upcastDispatcher.on("element",kI(),{priority:"lowest"}),this.upcastDispatcher.on("documentFragment",kI(),{priority:"lowest"}),li().prototype.decorate.call(this,"init"),li().prototype.decorate.call(this,"set"),li().prototype.decorate.call(this,"get"),li().prototype.decorate.call(this,"toView"),li().prototype.decorate.call(this,"toModel"),this.on("init",()=>{this.fire("ready")},{priority:"lowest"}),this.on("ready",()=>{this.model.enqueueChange({isUndoable:!1},$V)},{priority:"lowest"})}get(e={}){const{rootName:i="main",trim:s="empty"}=e;if(!this._checkIfRootsExists([i]))throw new fe("datacontroller-get-non-existent-root",this);const r=this.model.document.getRoot(i);return r.isAttached()||qn("datacontroller-get-detached-root",this),s==="empty"&&!this.model.hasContent(r,{ignoreWhitespaces:!0})?"":this.stringify(r,e)}stringify(e,i={}){const s=this.toView(e,i);return this.processor.toData(s)}toView(e,i={}){const s=this.viewDocument,r=this._viewWriter;this.mapper.clearBindings();const o=qe._createIn(e),a=new ih(s);this.mapper.bindElements(e,a);const l=e.is("documentFragment")?e.markers:$we(e);return this.downcastDispatcher.convert(o,l,r,i),a}init(e){if(this.model.document.version)throw new fe("datacontroller-init-document-not-empty",this);let i={};if(typeof e=="string"?i.main=e:i=e,!this._checkIfRootsExists(Object.keys(i)))throw new fe("datacontroller-init-non-existent-root",this);return this.model.enqueueChange({isUndoable:!1},s=>{for(const r of Object.keys(i)){const o=this.model.document.getRoot(r);s.insert(this.parse(i[r],o),o,0)}}),Promise.resolve()}set(e,i={}){let s={};if(typeof e=="string"?s.main=e:s=e,!this._checkIfRootsExists(Object.keys(s)))throw new fe("datacontroller-set-non-existent-root",this);this.model.enqueueChange(i.batchType||{},r=>{r.setSelection(null),r.removeSelectionAttribute(this.model.document.selection.getAttributeKeys());for(const o of Object.keys(s)){const a=this.model.document.getRoot(o);r.remove(r.createRangeIn(a)),r.insert(this.parse(s[o],a),a,0)}})}parse(e,i="$root"){const s=this.processor.toView(e);return this.toModel(s,i)}toModel(e,i="$root"){return this.model.change(s=>this.upcastDispatcher.convert(e,s,i))}addStyleProcessorRules(e){e(this.stylesProcessor)}registerRawContentMatcher(e){this.processor&&this.processor!==this.htmlProcessor&&this.processor.registerRawContentMatcher(e),this.htmlProcessor.registerRawContentMatcher(e)}destroy(){this.stopListening()}_checkIfRootsExists(e){for(const i of e)if(!this.model.document.getRoot(i))return!1;return!0}}function $we(t){const n=[],e=t.root.document;if(!e)return new Map;const i=qe._createIn(t);for(const s of e.model.markers){const r=s.getRange(),o=r.isCollapsed,a=r.start.isEqual(i.start)||r.end.isEqual(i.end);if(o&&a)n.push([s.name,r]);else{const l=i.getIntersection(r);l&&n.push([s.name,l])}}return n.sort(([s,r],[o,a])=>{if(r.end.compareWith(a.start)!=="after")return 1;if(r.start.compareWith(a.end)!=="before")return-1;switch(r.start.compareWith(a.start)){case"before":return 1;case"after":return-1;default:switch(r.end.compareWith(a.end)){case"before":return 1;case"after":return-1;default:return o.localeCompare(s)}}}),new Map(n)}class zwe{constructor(n,e){w(this,"_helpers",new Map);w(this,"_downcast");w(this,"_upcast");this._downcast=Si(n),this._createConversionHelpers({name:"downcast",dispatchers:this._downcast,isDowncast:!0}),this._upcast=Si(e),this._createConversionHelpers({name:"upcast",dispatchers:this._upcast,isDowncast:!1})}addAlias(n,e){const i=this._downcast.includes(e);if(!this._upcast.includes(e)&&!i)throw new fe("conversion-add-alias-dispatcher-not-registered",this);this._createConversionHelpers({name:n,dispatchers:[e],isDowncast:i})}for(n){if(!this._helpers.has(n))throw new fe("conversion-for-unknown-group",this);return this._helpers.get(n)}elementToElement(n){this.for("downcast").elementToElement(n);for(const{model:e,view:i}of I5(n))this.for("upcast").elementToElement({model:e,view:i,converterPriority:n.converterPriority})}attributeToElement(n){this.for("downcast").attributeToElement(n);for(const{model:e,view:i}of I5(n))this.for("upcast").elementToAttribute({view:i,model:e,converterPriority:n.converterPriority})}attributeToAttribute(n){this.for("downcast").attributeToAttribute(n);for(const{model:e,view:i}of I5(n))this.for("upcast").attributeToAttribute({view:i,model:e})}_createConversionHelpers({name:n,dispatchers:e,isDowncast:i}){if(this._helpers.has(n))throw new fe("conversion-group-exists",this);const s=i?new v_e(e):new Y_e(e);this._helpers.set(n,s)}}function*I5(t){if(t.model.values)for(const n of t.model.values){const e={key:t.model.key,value:n},i=t.view[n],s=t.upcastAlso?t.upcastAlso[n]:void 0;yield*AI(e,i,s)}else yield*AI(t.model,t.view,t.upcastAlso)}function*AI(t,n,e){if(yield{model:t,view:n},e)for(const i of Si(e))yield{model:t,view:i}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ro{constructor(n){w(this,"baseVersion");w(this,"isDocumentOperation");w(this,"batch");this.baseVersion=n,this.isDocumentOperation=this.baseVersion!==null,this.batch=null}_validate(){}toJSON(){const n=Object.assign({},this);return n.__className=this.constructor.className,delete n.batch,delete n.isDocumentOperation,n}static get className(){return"Operation"}static fromJSON(n,e){return new this(n.baseVersion)}}function HE(t,n){const e=GV(n),i=e.reduce((o,a)=>o+a.offsetSize,0),s=t.parent;l1(t);const r=t.index;return s._insertChild(r,e),a1(s,r+e.length),a1(s,r),new qe(t,t.getShiftedBy(i))}function KV(t){if(!t.isFlat)throw new fe("operation-utils-remove-range-not-flat",this);const n=t.start.parent;l1(t.start),l1(t.end);const e=n._removeChildren(t.start.index,t.end.index-t.start.index);return a1(n,t.start.index),e}function o1(t,n){if(!t.isFlat)throw new fe("operation-utils-move-range-not-flat",this);const e=KV(t);return n=n._getTransformedByDeletion(t.start,t.end.offset-t.start.offset),HE(n,e)}function Hwe(t,n,e){l1(t.start),l1(t.end);for(const i of t.getItems({shallow:!0})){const s=i.is("$textProxy")?i.textNode:i;e!==null?s._setAttribute(n,e):s._removeAttribute(n),a1(s.parent,s.index)}a1(t.end.parent,t.end.index)}function GV(t){const n=[];function e(i){if(typeof i=="string")n.push(new Gi(i));else if(i instanceof Ma)n.push(new Gi(i.data,i.getAttributes()));else if(i instanceof Ah)n.push(i);else if(Ao(i))for(const s of i)e(s)}e(t);for(let i=1;i<n.length;i++){const s=n[i],r=n[i-1];s instanceof Gi&&r instanceof Gi&&YV(s,r)&&(n.splice(i-1,2,new Gi(r.data+s.data,r.getAttributes())),i--)}return n}function a1(t,n){const e=t.getChild(n-1),i=t.getChild(n);if(e&&i&&e.is("$text")&&i.is("$text")&&YV(e,i)){const s=new Gi(e.data+i.data,e.getAttributes());t._removeChildren(n-1,2),t._insertChild(n-1,s)}}function l1(t){const n=t.textNode,e=t.parent;if(n){const i=t.offset-n.startOffset,s=n.index;e._removeChildren(s,1);const r=new Gi(n.data.substr(0,i),n.getAttributes()),o=new Gi(n.data.substr(i),n.getAttributes());e._insertChild(s,[r,o])}}function YV(t,n){const e=t.getAttributes(),i=n.getAttributes();for(const s of e){if(s[1]!==n.getAttribute(s[0]))return!1;i.next()}return i.next().done}class si extends Ro{constructor(e,i,s,r){super(r);w(this,"sourcePosition");w(this,"howMany");w(this,"targetPosition");this.sourcePosition=e.clone(),this.sourcePosition.stickiness="toNext",this.howMany=i,this.targetPosition=s.clone(),this.targetPosition.stickiness="toNone"}get type(){return this.targetPosition.root.rootName=="$graveyard"?"remove":this.sourcePosition.root.rootName=="$graveyard"?"reinsert":"move"}get affectedSelectable(){return[qe._createFromPositionAndShift(this.sourcePosition,this.howMany),qe._createFromPositionAndShift(this.targetPosition,0)]}clone(){return new si(this.sourcePosition,this.howMany,this.targetPosition,this.baseVersion)}getMovedRangeStart(){return this.targetPosition._getTransformedByDeletion(this.sourcePosition,this.howMany)}getReversed(){const e=this.sourcePosition._getTransformedByInsertion(this.targetPosition,this.howMany);return new si(this.getMovedRangeStart(),this.howMany,e,this.baseVersion+1)}_validate(){const e=this.sourcePosition.parent,i=this.targetPosition.parent,s=this.sourcePosition.offset,r=this.targetPosition.offset;if(s+this.howMany>e.maxOffset)throw new fe("move-operation-nodes-do-not-exist",this);if(e===i&&s<r&&r<s+this.howMany)throw new fe("move-operation-range-into-itself",this);if(this.sourcePosition.root==this.targetPosition.root&&sr(this.sourcePosition.getParentPath(),this.targetPosition.getParentPath())=="prefix"){const o=this.sourcePosition.path.length-1;if(this.targetPosition.path[o]>=s&&this.targetPosition.path[o]<s+this.howMany)throw new fe("move-operation-node-into-itself",this)}}_execute(){o1(qe._createFromPositionAndShift(this.sourcePosition,this.howMany),this.targetPosition)}toJSON(){const e=super.toJSON();return e.sourcePosition=this.sourcePosition.toJSON(),e.targetPosition=this.targetPosition.toJSON(),e}static get className(){return"MoveOperation"}static fromJSON(e,i){const s=mt.fromJSON(e.sourcePosition,i),r=mt.fromJSON(e.targetPosition,i);return new this(s,e.howMany,r,e.baseVersion)}}class Hs extends Ro{constructor(e,i,s){super(s);w(this,"position");w(this,"nodes");w(this,"shouldReceiveAttributes");this.position=e.clone(),this.position.stickiness="toNone",this.nodes=new yg(GV(i)),this.shouldReceiveAttributes=!1}get type(){return"insert"}get howMany(){return this.nodes.maxOffset}get affectedSelectable(){return this.position.clone()}clone(){const e=new yg([...this.nodes].map(s=>s._clone(!0))),i=new Hs(this.position,e,this.baseVersion);return i.shouldReceiveAttributes=this.shouldReceiveAttributes,i}getReversed(){const e=this.position.root.document.graveyard,i=new mt(e,[0]);return new si(this.position,this.nodes.maxOffset,i,this.baseVersion+1)}_validate(){const e=this.position.parent;if(!e||e.maxOffset<this.position.offset)throw new fe("insert-operation-position-invalid",this)}_execute(){const e=this.nodes;this.nodes=new yg([...e].map(i=>i._clone(!0))),HE(this.position,e)}toJSON(){const e=super.toJSON();return e.position=this.position.toJSON(),e.nodes=this.nodes.toJSON(),e}static get className(){return"InsertOperation"}static fromJSON(e,i){const s=[];for(const o of e.nodes)o.name?s.push(Hi.fromJSON(o)):s.push(Gi.fromJSON(o));const r=new Hs(mt.fromJSON(e.position,i),s,e.baseVersion);return r.shouldReceiveAttributes=e.shouldReceiveAttributes,r}}class Ei extends Ro{constructor(e,i,s,r,o){super(o);w(this,"splitPosition");w(this,"howMany");w(this,"insertionPosition");w(this,"graveyardPosition");this.splitPosition=e.clone(),this.splitPosition.stickiness="toNext",this.howMany=i,this.insertionPosition=s,this.graveyardPosition=r?r.clone():null,this.graveyardPosition&&(this.graveyardPosition.stickiness="toNext")}get type(){return"split"}get moveTargetPosition(){const e=this.insertionPosition.path.slice();return e.push(0),new mt(this.insertionPosition.root,e)}get movedRange(){const e=this.splitPosition.getShiftedBy(Number.POSITIVE_INFINITY);return new qe(this.splitPosition,e)}get affectedSelectable(){const e=[qe._createFromPositionAndShift(this.splitPosition,0),qe._createFromPositionAndShift(this.insertionPosition,0)];return this.graveyardPosition&&e.push(qe._createFromPositionAndShift(this.graveyardPosition,0)),e}clone(){return new Ei(this.splitPosition,this.howMany,this.insertionPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const e=this.splitPosition.root.document.graveyard,i=new mt(e,[0]);return new ls(this.moveTargetPosition,this.howMany,this.splitPosition,i,this.baseVersion+1)}_validate(){const e=this.splitPosition.parent,i=this.splitPosition.offset;if(!e||e.maxOffset<i)throw new fe("split-operation-position-invalid",this);if(e.parent){if(this.howMany!=e.maxOffset-this.splitPosition.offset)throw new fe("split-operation-how-many-invalid",this);if(this.graveyardPosition&&!this.graveyardPosition.nodeAfter)throw new fe("split-operation-graveyard-position-invalid",this)}else throw new fe("split-operation-split-in-root",this)}_execute(){const e=this.splitPosition.parent;if(this.graveyardPosition)o1(qe._createFromPositionAndShift(this.graveyardPosition,1),this.insertionPosition);else{const s=e._clone();HE(this.insertionPosition,s)}const i=new qe(mt._createAt(e,this.splitPosition.offset),mt._createAt(e,e.maxOffset));o1(i,this.moveTargetPosition)}toJSON(){const e=super.toJSON();return e.splitPosition=this.splitPosition.toJSON(),e.insertionPosition=this.insertionPosition.toJSON(),this.graveyardPosition&&(e.graveyardPosition=this.graveyardPosition.toJSON()),e}static get className(){return"SplitOperation"}static getInsertionPosition(e){const i=e.path.slice(0,-1);return i[i.length-1]++,new mt(e.root,i,"toPrevious")}static fromJSON(e,i){const s=mt.fromJSON(e.splitPosition,i),r=mt.fromJSON(e.insertionPosition,i),o=e.graveyardPosition?mt.fromJSON(e.graveyardPosition,i):null;return new this(s,e.howMany,r,o,e.baseVersion)}}class ls extends Ro{constructor(e,i,s,r,o){super(o);w(this,"sourcePosition");w(this,"howMany");w(this,"targetPosition");w(this,"graveyardPosition");this.sourcePosition=e.clone(),this.sourcePosition.stickiness="toPrevious",this.howMany=i,this.targetPosition=s.clone(),this.targetPosition.stickiness="toNext",this.graveyardPosition=r.clone()}get type(){return"merge"}get deletionPosition(){return new mt(this.sourcePosition.root,this.sourcePosition.path.slice(0,-1))}get movedRange(){const e=this.sourcePosition.getShiftedBy(Number.POSITIVE_INFINITY);return new qe(this.sourcePosition,e)}get affectedSelectable(){const e=this.sourcePosition.parent;return[qe._createOn(e),qe._createFromPositionAndShift(this.targetPosition,0),qe._createFromPositionAndShift(this.graveyardPosition,0)]}clone(){return new ls(this.sourcePosition,this.howMany,this.targetPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const e=this.targetPosition._getTransformedByMergeOperation(this),i=this.sourcePosition.path.slice(0,-1),s=new mt(this.sourcePosition.root,i)._getTransformedByMergeOperation(this);return new Ei(e,this.howMany,s,this.graveyardPosition,this.baseVersion+1)}_validate(){const e=this.sourcePosition.parent,i=this.targetPosition.parent;if(e.parent)if(i.parent){if(this.howMany!=e.maxOffset)throw new fe("merge-operation-how-many-invalid",this)}else throw new fe("merge-operation-target-position-invalid",this);else throw new fe("merge-operation-source-position-invalid",this)}_execute(){const e=this.sourcePosition.parent,i=qe._createIn(e);o1(i,this.targetPosition),o1(qe._createOn(e),this.graveyardPosition)}toJSON(){const e=super.toJSON();return e.sourcePosition=e.sourcePosition.toJSON(),e.targetPosition=e.targetPosition.toJSON(),e.graveyardPosition=e.graveyardPosition.toJSON(),e}static get className(){return"MergeOperation"}static fromJSON(e,i){const s=mt.fromJSON(e.sourcePosition,i),r=mt.fromJSON(e.targetPosition,i),o=mt.fromJSON(e.graveyardPosition,i);return new this(s,e.howMany,r,o,e.baseVersion)}}class Jr extends Ro{constructor(e,i,s,r,o,a){super(a);w(this,"name");w(this,"oldRange");w(this,"newRange");w(this,"affectsData");w(this,"_markers");this.name=e,this.oldRange=i?i.clone():null,this.newRange=s?s.clone():null,this.affectsData=o,this._markers=r}get type(){return"marker"}get affectedSelectable(){const e=[];return this.oldRange&&e.push(this.oldRange.clone()),this.newRange&&(this.oldRange?e.push(...this.newRange.getDifference(this.oldRange)):e.push(this.newRange.clone())),e}clone(){return new Jr(this.name,this.oldRange,this.newRange,this._markers,this.affectsData,this.baseVersion)}getReversed(){return new Jr(this.name,this.newRange,this.oldRange,this._markers,this.affectsData,this.baseVersion+1)}_execute(){this.newRange?this._markers._set(this.name,this.newRange,!0,this.affectsData):this._markers._remove(this.name)}toJSON(){const e=super.toJSON();return this.oldRange&&(e.oldRange=this.oldRange.toJSON()),this.newRange&&(e.newRange=this.newRange.toJSON()),delete e._markers,e}static get className(){return"MarkerOperation"}static fromJSON(e,i){return new Jr(e.name,e.oldRange?qe.fromJSON(e.oldRange,i):null,e.newRange?qe.fromJSON(e.newRange,i):null,i.model.markers,e.affectsData,e.baseVersion)}}class gs extends Ro{constructor(e,i,s,r,o){super(o);w(this,"range");w(this,"key");w(this,"oldValue");w(this,"newValue");this.range=e.clone(),this.key=i,this.oldValue=s===void 0?null:s,this.newValue=r===void 0?null:r}get type(){return this.oldValue===null?"addAttribute":this.newValue===null?"removeAttribute":"changeAttribute"}get affectedSelectable(){return this.range.clone()}clone(){return new gs(this.range,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new gs(this.range,this.key,this.newValue,this.oldValue,this.baseVersion+1)}toJSON(){const e=super.toJSON();return e.range=this.range.toJSON(),e}_validate(){if(!this.range.isFlat)throw new fe("attribute-operation-range-not-flat",this);for(const e of this.range.getItems({shallow:!0})){if(this.oldValue!==null&&!Cl(e.getAttribute(this.key),this.oldValue))throw new fe("attribute-operation-wrong-old-value",this,{item:e,key:this.key,value:this.oldValue});if(this.oldValue===null&&this.newValue!==null&&e.hasAttribute(this.key))throw new fe("attribute-operation-attribute-exists",this,{node:e,key:this.key})}}_execute(){Cl(this.oldValue,this.newValue)||Hwe(this.range,this.key,this.newValue)}static get className(){return"AttributeOperation"}static fromJSON(e,i){return new gs(qe.fromJSON(e.range,i),e.key,e.oldValue,e.newValue,e.baseVersion)}}class Ps extends Ro{get type(){return"noop"}get affectedSelectable(){return null}clone(){return new Ps(this.baseVersion)}getReversed(){return new Ps(this.baseVersion+1)}_execute(){}static get className(){return"NoOperation"}}class Qr extends Ro{constructor(e,i,s,r){super(r);w(this,"position");w(this,"oldName");w(this,"newName");this.position=e,this.position.stickiness="toNext",this.oldName=i,this.newName=s}get type(){return"rename"}get affectedSelectable(){return this.position.nodeAfter}clone(){return new Qr(this.position.clone(),this.oldName,this.newName,this.baseVersion)}getReversed(){return new Qr(this.position.clone(),this.newName,this.oldName,this.baseVersion+1)}_validate(){const e=this.position.nodeAfter;if(e instanceof Hi){if(e.name!==this.oldName)throw new fe("rename-operation-wrong-name",this)}else throw new fe("rename-operation-wrong-position",this)}_execute(){const e=this.position.nodeAfter;e.name=this.newName}toJSON(){const e=super.toJSON();return e.position=this.position.toJSON(),e}static get className(){return"RenameOperation"}static fromJSON(e,i){return new Qr(mt.fromJSON(e.position,i),e.oldName,e.newName,e.baseVersion)}}class uc extends Ro{constructor(e,i,s,r,o){super(o);w(this,"root");w(this,"key");w(this,"oldValue");w(this,"newValue");this.root=e,this.key=i,this.oldValue=s===void 0?null:s,this.newValue=r===void 0?null:r}get type(){return this.oldValue===null?"addRootAttribute":this.newValue===null?"removeRootAttribute":"changeRootAttribute"}get affectedSelectable(){return this.root}clone(){return new uc(this.root,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new uc(this.root,this.key,this.newValue,this.oldValue,this.baseVersion+1)}_validate(){if(this.root!=this.root.root||this.root.is("documentFragment"))throw new fe("rootattribute-operation-not-a-root",this,{root:this.root,key:this.key});if(this.oldValue!==null&&this.root.getAttribute(this.key)!==this.oldValue)throw new fe("rootattribute-operation-wrong-old-value",this,{root:this.root,key:this.key});if(this.oldValue===null&&this.newValue!==null&&this.root.hasAttribute(this.key))throw new fe("rootattribute-operation-attribute-exists",this,{root:this.root,key:this.key})}_execute(){this.newValue!==null?this.root._setAttribute(this.key,this.newValue):this.root._removeAttribute(this.key)}toJSON(){const e=super.toJSON();return e.root=this.root.toJSON(),e}static get className(){return"RootAttributeOperation"}static fromJSON(e,i){if(!i.getRoot(e.root))throw new fe("rootattribute-operation-fromjson-no-root",this,{rootName:e.root});return new uc(i.getRoot(e.root),e.key,e.oldValue,e.newValue,e.baseVersion)}}class wl extends Ro{constructor(e,i,s,r,o){super(o);w(this,"rootName");w(this,"elementName");w(this,"isAdd");w(this,"_document");if(this.rootName=e,this.elementName=i,this.isAdd=s,this._document=r,!this._document.getRoot(this.rootName)){const a=this._document.createRoot(this.elementName,this.rootName);a._isAttached=!1}}get type(){return this.isAdd?"addRoot":"detachRoot"}get affectedSelectable(){return this._document.getRoot(this.rootName)}clone(){return new wl(this.rootName,this.elementName,this.isAdd,this._document,this.baseVersion)}getReversed(){return new wl(this.rootName,this.elementName,!this.isAdd,this._document,this.baseVersion+1)}_execute(){this._document.getRoot(this.rootName)._isAttached=this.isAdd}toJSON(){const e=super.toJSON();return delete e._document,e}static get className(){return"RootOperation"}static fromJSON(e,i){return new wl(e.rootName,e.elementName,e.isAdd,i,e.baseVersion)}}const fa={};fa[gs.className]=gs;fa[Hs.className]=Hs;fa[Jr.className]=Jr;fa[si.className]=si;fa[Ps.className]=Ps;fa[Ro.className]=Ro;fa[Qr.className]=Qr;fa[uc.className]=uc;fa[wl.className]=wl;fa[Ei.className]=Ei;fa[ls.className]=ls;class Uwe{static fromJSON(n,e){return fa[n.__className].fromJSON(n,e)}}const ZC=new Map;function ti(t,n,e){let i=ZC.get(t);i||(i=new Map,ZC.set(t,i)),i.set(n,e)}function Wwe(t,n){const e=ZC.get(t);return e&&e.has(n)?e.get(n):jwe}function jwe(t){return[t]}function II(t,n,e={}){const i=Wwe(t.constructor,n.constructor);try{return t=t.clone(),i(t,n,e)}catch(s){throw s}}function qwe(t,n,e){t=t.slice(),n=n.slice();const i=new Kwe(e.document,e.useRelations,e.forceWeakRemove);i.setOriginalOperations(t),i.setOriginalOperations(n);const s=i.originalOperations;if(t.length==0||n.length==0)return{operationsA:t,operationsB:n,originalOperations:s};const r=new WeakMap;for(const l of t)r.set(l,0);const o={nextBaseVersionA:t[t.length-1].baseVersion+1,nextBaseVersionB:n[n.length-1].baseVersion+1,originalOperationsACount:t.length,originalOperationsBCount:n.length};let a=0;for(;a<t.length;){const l=t[a],c=r.get(l);if(c==n.length){a++;continue}const u=n[c],d=II(l,u,i.getContext(l,u,!0)),f=II(u,l,i.getContext(u,l,!1));i.updateRelation(l,u),i.setOriginalOperations(d,l),i.setOriginalOperations(f,u);for(const p of d)r.set(p,c+f.length);t.splice(a,1,...d),n.splice(c,1,...f)}return RI(t,o.nextBaseVersionB),RI(n,o.nextBaseVersionA),{operationsA:t,operationsB:n,originalOperations:s}}class Kwe{constructor(n,e,i=!1){w(this,"originalOperations");w(this,"_history");w(this,"_useRelations");w(this,"_forceWeakRemove");w(this,"_relations");this.originalOperations=new Map,this._history=n.history,this._useRelations=e,this._forceWeakRemove=!!i,this._relations=new Map}setOriginalOperations(n,e=null){const i=e?this.originalOperations.get(e):null;for(const s of n)this.originalOperations.set(s,i||s)}updateRelation(n,e){if(n instanceof si)e instanceof ls?n.targetPosition.isEqual(e.sourcePosition)||e.movedRange.containsPosition(n.targetPosition)?this._setRelation(n,e,"insertAtSource"):n.targetPosition.isEqual(e.deletionPosition)?this._setRelation(n,e,"insertBetween"):n.targetPosition.isAfter(e.sourcePosition)&&this._setRelation(n,e,"moveTargetAfter"):e instanceof si&&(n.targetPosition.isEqual(e.sourcePosition)||n.targetPosition.isBefore(e.sourcePosition)?this._setRelation(n,e,"insertBefore"):this._setRelation(n,e,"insertAfter"));else if(n instanceof Ei){if(e instanceof ls)n.splitPosition.isBefore(e.sourcePosition)&&this._setRelation(n,e,"splitBefore");else if(e instanceof si)if(n.splitPosition.isEqual(e.sourcePosition)||n.splitPosition.isBefore(e.sourcePosition))this._setRelation(n,e,"splitBefore");else{const i=qe._createFromPositionAndShift(e.sourcePosition,e.howMany);if(n.splitPosition.hasSameParentAs(e.sourcePosition)&&i.containsPosition(n.splitPosition)){const s=i.end.offset-n.splitPosition.offset,r=n.splitPosition.offset-i.start.offset;this._setRelation(n,e,{howMany:s,offset:r})}}}else if(n instanceof ls)e instanceof ls?(n.targetPosition.isEqual(e.sourcePosition)||this._setRelation(n,e,"mergeTargetNotMoved"),n.sourcePosition.isEqual(e.targetPosition)&&this._setRelation(n,e,"mergeSourceNotMoved"),n.sourcePosition.isEqual(e.sourcePosition)&&this._setRelation(n,e,"mergeSameElement")):e instanceof Ei?n.sourcePosition.isEqual(e.splitPosition)&&this._setRelation(n,e,"splitAtSource"):e instanceof si&&e.howMany>0&&(n.sourcePosition.isEqual(e.sourcePosition.getShiftedBy(e.howMany))&&this._setRelation(n,e,"mergeSourceAffected"),n.targetPosition.isEqual(e.sourcePosition)&&this._setRelation(n,e,"mergeTargetWasBefore"));else if(n instanceof Jr){const i=n.newRange;if(!i)return;if(e instanceof si){const s=qe._createFromPositionAndShift(e.sourcePosition,e.howMany),r=s.containsPosition(i.start)||s.start.isEqual(i.start),o=s.containsPosition(i.end)||s.end.isEqual(i.end);(r||o)&&!s.containsRange(i)&&this._setRelation(n,e,{side:r?"left":"right",path:r?i.start.path.slice():i.end.path.slice()})}else if(e instanceof ls){const s=i.start.isEqual(e.targetPosition),r=i.start.isEqual(e.deletionPosition),o=i.end.isEqual(e.deletionPosition),a=i.end.isEqual(e.sourcePosition);(s||r||o||a)&&this._setRelation(n,e,{wasInLeftElement:s,wasStartBeforeMergedElement:r,wasEndBeforeMergedElement:o,wasInRightElement:a})}}}getContext(n,e,i){return{aIsStrong:i,aWasUndone:this._wasUndone(n),bWasUndone:this._wasUndone(e),abRelation:this._useRelations?this._getRelation(n,e):null,baRelation:this._useRelations?this._getRelation(e,n):null,forceWeakRemove:this._forceWeakRemove}}_wasUndone(n){const e=this.originalOperations.get(n);return e.wasUndone||this._history.isUndoneOperation(e)}_getRelation(n,e){const i=this.originalOperations.get(e),s=this._history.getUndoneOperation(i);if(!s)return null;const r=this.originalOperations.get(n),o=this._relations.get(r);return o&&o.get(s)||null}_setRelation(n,e,i){const s=this.originalOperations.get(n),r=this.originalOperations.get(e);let o=this._relations.get(s);o||(o=new Map,this._relations.set(s,o)),o.set(r,i)}}function RI(t,n){for(const e of t)e.baseVersion=n++}ti(gs,gs,(t,n,e)=>{if(t.key===n.key&&t.range.start.hasSameParentAs(n.range.start)){const i=t.range.getDifference(n.range).map(r=>new gs(r,t.key,t.oldValue,t.newValue,0)),s=t.range.getIntersection(n.range);return s&&e.aIsStrong&&i.push(new gs(s,n.key,n.newValue,t.newValue,0)),i.length==0?[new Ps(0)]:i}else return[t]});ti(gs,Hs,(t,n)=>{if(t.range.start.hasSameParentAs(n.position)&&t.range.containsPosition(n.position)){const i=t.range._getTransformedByInsertion(n.position,n.howMany,!n.shouldReceiveAttributes).map(s=>new gs(s,t.key,t.oldValue,t.newValue,t.baseVersion));if(n.shouldReceiveAttributes){const s=ZV(n,t.key,t.oldValue);s&&i.unshift(s)}return i}return t.range=t.range._getTransformedByInsertion(n.position,n.howMany,!1)[0],[t]});function ZV(t,n,e){const s=t.nodes.getNode(0).getAttribute(n);if(s==e)return null;const r=new qe(t.position,t.position.getShiftedBy(t.howMany));return new gs(r,n,s,e,0)}ti(gs,ls,(t,n)=>{const e=[];t.range.start.hasSameParentAs(n.deletionPosition)&&(t.range.containsPosition(n.deletionPosition)||t.range.start.isEqual(n.deletionPosition))&&e.push(qe._createFromPositionAndShift(n.graveyardPosition,1));const i=t.range._getTransformedByMergeOperation(n);return i.isCollapsed||e.push(i),e.map(s=>new gs(s,t.key,t.oldValue,t.newValue,t.baseVersion))});ti(gs,si,(t,n)=>Gwe(t.range,n).map(i=>new gs(i,t.key,t.oldValue,t.newValue,t.baseVersion)));function Gwe(t,n){const e=qe._createFromPositionAndShift(n.sourcePosition,n.howMany);let i=null,s=[];e.containsRange(t,!0)?i=t:t.start.hasSameParentAs(e.start)?(s=t.getDifference(e),i=t.getIntersection(e)):s=[t];const r=[];for(let o of s){o=o._getTransformedByDeletion(n.sourcePosition,n.howMany);const a=n.getMovedRangeStart(),l=o.start.hasSameParentAs(a),c=o._getTransformedByInsertion(a,n.howMany,l);r.push(...c)}return i&&r.push(i._getTransformedByMove(n.sourcePosition,n.targetPosition,n.howMany,!1)[0]),r}ti(gs,Ei,(t,n)=>{if(t.range.end.isEqual(n.insertionPosition))return n.graveyardPosition||t.range.end.offset++,[t];if(t.range.start.hasSameParentAs(n.splitPosition)&&t.range.containsPosition(n.splitPosition)){const e=t.clone();return e.range=new qe(n.moveTargetPosition.clone(),t.range.end._getCombined(n.splitPosition,n.moveTargetPosition)),t.range.end=n.splitPosition.clone(),t.range.end.stickiness="toPrevious",[t,e]}return t.range=t.range._getTransformedBySplitOperation(n),[t]});ti(Hs,gs,(t,n)=>{const e=[t];if(t.shouldReceiveAttributes&&t.position.hasSameParentAs(n.range.start)&&n.range.containsPosition(t.position)){const i=ZV(t,n.key,n.newValue);i&&e.push(i)}return e});ti(Hs,Hs,(t,n,e)=>t.position.isEqual(n.position)&&e.aIsStrong?[t]:(t.position=t.position._getTransformedByInsertOperation(n),[t]));ti(Hs,si,(t,n)=>(t.position=t.position._getTransformedByMoveOperation(n),[t]));ti(Hs,Ei,(t,n)=>(t.position=t.position._getTransformedBySplitOperation(n),[t]));ti(Hs,ls,(t,n)=>(t.position=t.position._getTransformedByMergeOperation(n),[t]));ti(Jr,Hs,(t,n)=>(t.oldRange&&(t.oldRange=t.oldRange._getTransformedByInsertOperation(n)[0]),t.newRange&&(t.newRange=t.newRange._getTransformedByInsertOperation(n)[0]),[t]));ti(Jr,Jr,(t,n,e)=>{if(t.name==n.name)if(e.aIsStrong)t.oldRange=n.newRange?n.newRange.clone():null;else return[new Ps(0)];return[t]});ti(Jr,ls,(t,n)=>(t.oldRange&&(t.oldRange=t.oldRange._getTransformedByMergeOperation(n)),t.newRange&&(t.newRange=t.newRange._getTransformedByMergeOperation(n)),[t]));ti(Jr,si,(t,n,e)=>{if(t.oldRange&&(t.oldRange=qe._createFromRanges(t.oldRange._getTransformedByMoveOperation(n))),t.newRange){if(e.abRelation){const i=qe._createFromRanges(t.newRange._getTransformedByMoveOperation(n));if(e.abRelation.side=="left"&&n.targetPosition.isEqual(t.newRange.start))return t.newRange.end=i.end,t.newRange.start.path=e.abRelation.path,[t];if(e.abRelation.side=="right"&&n.targetPosition.isEqual(t.newRange.end))return t.newRange.start=i.start,t.newRange.end.path=e.abRelation.path,[t]}t.newRange=qe._createFromRanges(t.newRange._getTransformedByMoveOperation(n))}return[t]});ti(Jr,Ei,(t,n,e)=>{if(t.oldRange&&(t.oldRange=t.oldRange._getTransformedBySplitOperation(n)),t.newRange){if(e.abRelation){const i=t.newRange._getTransformedBySplitOperation(n);return t.newRange.start.isEqual(n.splitPosition)&&e.abRelation.wasStartBeforeMergedElement?t.newRange.start=mt._createAt(n.insertionPosition):t.newRange.start.isEqual(n.splitPosition)&&!e.abRelation.wasInLeftElement&&(t.newRange.start=mt._createAt(n.moveTargetPosition)),t.newRange.end.isEqual(n.splitPosition)&&e.abRelation.wasInRightElement?t.newRange.end=mt._createAt(n.moveTargetPosition):t.newRange.end.isEqual(n.splitPosition)&&e.abRelation.wasEndBeforeMergedElement?t.newRange.end=mt._createAt(n.insertionPosition):t.newRange.end=i.end,[t]}t.newRange=t.newRange._getTransformedBySplitOperation(n)}return[t]});ti(ls,Hs,(t,n)=>(t.sourcePosition.hasSameParentAs(n.position)&&(t.howMany+=n.howMany),t.sourcePosition=t.sourcePosition._getTransformedByInsertOperation(n),t.targetPosition=t.targetPosition._getTransformedByInsertOperation(n),[t]));ti(ls,ls,(t,n,e)=>{if(t.sourcePosition.isEqual(n.sourcePosition)&&t.targetPosition.isEqual(n.targetPosition))if(e.bWasUndone){const i=n.graveyardPosition.path.slice();return i.push(0),t.sourcePosition=new mt(n.graveyardPosition.root,i),t.howMany=0,[t]}else return[new Ps(0)];if(t.sourcePosition.isEqual(n.sourcePosition)&&!t.targetPosition.isEqual(n.targetPosition)&&!e.bWasUndone&&e.abRelation!="splitAtSource"){const i=t.targetPosition.root.rootName=="$graveyard",s=n.targetPosition.root.rootName=="$graveyard";if(s&&!i||!(i&&!s)&&e.aIsStrong){const l=n.targetPosition._getTransformedByMergeOperation(n),c=t.targetPosition._getTransformedByMergeOperation(n);return[new si(l,t.howMany,c,0)]}else return[new Ps(0)]}return t.sourcePosition.hasSameParentAs(n.targetPosition)&&(t.howMany+=n.howMany),t.sourcePosition=t.sourcePosition._getTransformedByMergeOperation(n),t.targetPosition=t.targetPosition._getTransformedByMergeOperation(n),(!t.graveyardPosition.isEqual(n.graveyardPosition)||!e.aIsStrong)&&(t.graveyardPosition=t.graveyardPosition._getTransformedByMergeOperation(n)),[t]});ti(ls,si,(t,n,e)=>{const i=qe._createFromPositionAndShift(n.sourcePosition,n.howMany);return n.type=="remove"&&!e.bWasUndone&&!e.forceWeakRemove&&t.deletionPosition.hasSameParentAs(n.sourcePosition)&&i.containsPosition(t.sourcePosition)?[new Ps(0)]:(n.sourcePosition.getShiftedBy(n.howMany).isEqual(t.sourcePosition)?t.sourcePosition.stickiness="toNone":n.targetPosition.isEqual(t.sourcePosition)&&e.abRelation=="mergeSourceAffected"?t.sourcePosition.stickiness="toNext":n.sourcePosition.isEqual(t.targetPosition)?(t.targetPosition.stickiness="toNone",t.howMany-=n.howMany):n.targetPosition.isEqual(t.targetPosition)&&e.abRelation=="mergeTargetWasBefore"?(t.targetPosition.stickiness="toPrevious",t.howMany+=n.howMany):(t.sourcePosition.hasSameParentAs(n.targetPosition)&&(t.howMany+=n.howMany),t.sourcePosition.hasSameParentAs(n.sourcePosition)&&(t.howMany-=n.howMany)),t.sourcePosition=t.sourcePosition._getTransformedByMoveOperation(n),t.targetPosition=t.targetPosition._getTransformedByMoveOperation(n),t.sourcePosition.stickiness="toPrevious",t.targetPosition.stickiness="toNext",t.graveyardPosition.isEqual(n.targetPosition)||(t.graveyardPosition=t.graveyardPosition._getTransformedByMoveOperation(n)),[t])});ti(ls,Ei,(t,n,e)=>{if(n.graveyardPosition&&(t.graveyardPosition=t.graveyardPosition._getTransformedByDeletion(n.graveyardPosition,1),t.deletionPosition.isEqual(n.graveyardPosition)&&(t.howMany=n.howMany)),t.targetPosition.isEqual(n.splitPosition)){const i=n.howMany!=0,s=n.graveyardPosition&&t.deletionPosition.isEqual(n.graveyardPosition);if(i||s||e.abRelation=="mergeTargetNotMoved")return t.sourcePosition=t.sourcePosition._getTransformedBySplitOperation(n),[t]}if(t.sourcePosition.isEqual(n.splitPosition)){if(e.abRelation=="mergeSourceNotMoved")return t.howMany=0,t.targetPosition=t.targetPosition._getTransformedBySplitOperation(n),[t];if(e.abRelation=="mergeSameElement"||t.sourcePosition.offset>0)return t.sourcePosition=n.moveTargetPosition.clone(),t.targetPosition=t.targetPosition._getTransformedBySplitOperation(n),[t]}return t.sourcePosition.hasSameParentAs(n.splitPosition)&&(t.howMany=n.splitPosition.offset),t.sourcePosition=t.sourcePosition._getTransformedBySplitOperation(n),t.targetPosition=t.targetPosition._getTransformedBySplitOperation(n),[t]});ti(si,Hs,(t,n)=>{const i=qe._createFromPositionAndShift(t.sourcePosition,t.howMany)._getTransformedByInsertOperation(n,!1)[0];return t.sourcePosition=i.start,t.howMany=i.end.offset-i.start.offset,t.targetPosition.isEqual(n.position)||(t.targetPosition=t.targetPosition._getTransformedByInsertOperation(n)),[t]});ti(si,si,(t,n,e)=>{const i=qe._createFromPositionAndShift(t.sourcePosition,t.howMany),s=qe._createFromPositionAndShift(n.sourcePosition,n.howMany);let r=e.aIsStrong,o=!e.aIsStrong;e.abRelation=="insertBefore"||e.baRelation=="insertAfter"?o=!0:(e.abRelation=="insertAfter"||e.baRelation=="insertBefore")&&(o=!1);let a;if(t.targetPosition.isEqual(n.targetPosition)&&o?a=t.targetPosition._getTransformedByDeletion(n.sourcePosition,n.howMany):a=t.targetPosition._getTransformedByMove(n.sourcePosition,n.targetPosition,n.howMany),MI(t,n)&&MI(n,t))return[n.getReversed()];if(i.containsPosition(n.targetPosition)&&i.containsRange(s,!0))return i.start=i.start._getTransformedByMove(n.sourcePosition,n.targetPosition,n.howMany),i.end=i.end._getTransformedByMove(n.sourcePosition,n.targetPosition,n.howMany),Pf([i],a);if(s.containsPosition(t.targetPosition)&&s.containsRange(i,!0))return i.start=i.start._getCombined(n.sourcePosition,n.getMovedRangeStart()),i.end=i.end._getCombined(n.sourcePosition,n.getMovedRangeStart()),Pf([i],a);const u=sr(t.sourcePosition.getParentPath(),n.sourcePosition.getParentPath());if(u=="prefix"||u=="extension")return i.start=i.start._getTransformedByMove(n.sourcePosition,n.targetPosition,n.howMany),i.end=i.end._getTransformedByMove(n.sourcePosition,n.targetPosition,n.howMany),Pf([i],a);t.type=="remove"&&n.type!="remove"&&!e.aWasUndone&&!e.forceWeakRemove?r=!0:t.type!="remove"&&n.type=="remove"&&!e.bWasUndone&&!e.forceWeakRemove&&(r=!1);const d=[],f=i.getDifference(s);for(const m of f){m.start=m.start._getTransformedByDeletion(n.sourcePosition,n.howMany),m.end=m.end._getTransformedByDeletion(n.sourcePosition,n.howMany);const v=sr(m.start.getParentPath(),n.getMovedRangeStart().getParentPath())=="same",y=m._getTransformedByInsertion(n.getMovedRangeStart(),n.howMany,v);d.push(...y)}const p=i.getIntersection(s);return p!==null&&r&&(p.start=p.start._getCombined(n.sourcePosition,n.getMovedRangeStart()),p.end=p.end._getCombined(n.sourcePosition,n.getMovedRangeStart()),d.length===0?d.push(p):d.length==1?s.start.isBefore(i.start)||s.start.isEqual(i.start)?d.unshift(p):d.push(p):d.splice(1,0,p)),d.length===0?[new Ps(t.baseVersion)]:Pf(d,a)});ti(si,Ei,(t,n,e)=>{let i=t.targetPosition.clone();(!t.targetPosition.isEqual(n.insertionPosition)||!n.graveyardPosition||e.abRelation=="moveTargetAfter")&&(i=t.targetPosition._getTransformedBySplitOperation(n));const s=qe._createFromPositionAndShift(t.sourcePosition,t.howMany);if(s.end.isEqual(n.insertionPosition))return n.graveyardPosition||t.howMany++,t.targetPosition=i,[t];if(s.start.hasSameParentAs(n.splitPosition)&&s.containsPosition(n.splitPosition)){let a=new qe(n.splitPosition,s.end);a=a._getTransformedBySplitOperation(n);const l=[new qe(s.start,n.splitPosition),a];return Pf(l,i)}t.targetPosition.isEqual(n.splitPosition)&&e.abRelation=="insertAtSource"&&(i=n.moveTargetPosition),t.targetPosition.isEqual(n.insertionPosition)&&e.abRelation=="insertBetween"&&(i=t.targetPosition);const o=[s._getTransformedBySplitOperation(n)];if(n.graveyardPosition){const a=s.start.isEqual(n.graveyardPosition)||s.containsPosition(n.graveyardPosition);t.howMany>1&&a&&!e.aWasUndone&&o.push(qe._createFromPositionAndShift(n.insertionPosition,1))}return Pf(o,i)});ti(si,ls,(t,n,e)=>{const i=qe._createFromPositionAndShift(t.sourcePosition,t.howMany);if(n.deletionPosition.hasSameParentAs(t.sourcePosition)&&i.containsPosition(n.sourcePosition)){if(t.type=="remove"&&!e.forceWeakRemove){if(!e.aWasUndone){const o=[];let a=n.graveyardPosition.clone(),l=n.targetPosition._getTransformedByMergeOperation(n);t.howMany>1&&(o.push(new si(t.sourcePosition,t.howMany-1,t.targetPosition,0)),a=a._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany-1),l=l._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany-1));const c=n.deletionPosition._getCombined(t.sourcePosition,t.targetPosition),u=new si(a,1,c,0),d=u.getMovedRangeStart().path.slice();d.push(0);const f=new mt(u.targetPosition.root,d);l=l._getTransformedByMove(a,c,1);const p=new si(l,n.howMany,f,0);return o.push(u),o.push(p),o}}else if(t.howMany==1)return e.bWasUndone?(t.sourcePosition=n.graveyardPosition.clone(),t.targetPosition=t.targetPosition._getTransformedByMergeOperation(n),[t]):[new Ps(0)]}const r=qe._createFromPositionAndShift(t.sourcePosition,t.howMany)._getTransformedByMergeOperation(n);return t.sourcePosition=r.start,t.howMany=r.end.offset-r.start.offset,t.targetPosition=t.targetPosition._getTransformedByMergeOperation(n),[t]});ti(Qr,Hs,(t,n)=>(t.position=t.position._getTransformedByInsertOperation(n),[t]));ti(Qr,ls,(t,n)=>t.position.isEqual(n.deletionPosition)?(t.position=n.graveyardPosition.clone(),t.position.stickiness="toNext",[t]):(t.position=t.position._getTransformedByMergeOperation(n),[t]));ti(Qr,si,(t,n)=>(t.position=t.position._getTransformedByMoveOperation(n),[t]));ti(Qr,Qr,(t,n,e)=>{if(t.position.isEqual(n.position))if(e.aIsStrong)t.oldName=n.newName;else return[new Ps(0)];return[t]});ti(Qr,Ei,(t,n)=>{const e=t.position.path,i=n.splitPosition.getParentPath();if(sr(e,i)=="same"&&!n.graveyardPosition){const s=new Qr(t.position.getShiftedBy(1),t.oldName,t.newName,0);return[t,s]}return t.position=t.position._getTransformedBySplitOperation(n),[t]});ti(uc,uc,(t,n,e)=>{if(t.root===n.root&&t.key===n.key){if(!e.aIsStrong||t.newValue===n.newValue)return[new Ps(0)];t.oldValue=n.newValue}return[t]});ti(wl,wl,(t,n)=>t.rootName===n.rootName&&t.isAdd===n.isAdd?[new Ps(0)]:[t]);ti(Ei,Hs,(t,n)=>(t.splitPosition.hasSameParentAs(n.position)&&t.splitPosition.offset<n.position.offset&&(t.howMany+=n.howMany),t.splitPosition=t.splitPosition._getTransformedByInsertOperation(n),t.insertionPosition=t.insertionPosition._getTransformedByInsertOperation(n),[t]));ti(Ei,ls,(t,n,e)=>{if(!t.graveyardPosition&&!e.bWasUndone&&t.splitPosition.hasSameParentAs(n.sourcePosition)){const i=n.graveyardPosition.path.slice();i.push(0);const s=new mt(n.graveyardPosition.root,i),r=Ei.getInsertionPosition(new mt(n.graveyardPosition.root,i)),o=new Ei(s,0,r,null,0);return t.splitPosition=t.splitPosition._getTransformedByMergeOperation(n),t.insertionPosition=Ei.getInsertionPosition(t.splitPosition),t.graveyardPosition=o.insertionPosition.clone(),t.graveyardPosition.stickiness="toNext",[o,t]}return t.splitPosition.hasSameParentAs(n.deletionPosition)&&!t.splitPosition.isAfter(n.deletionPosition)&&t.howMany--,t.splitPosition.hasSameParentAs(n.targetPosition)&&(t.howMany+=n.howMany),t.splitPosition=t.splitPosition._getTransformedByMergeOperation(n),t.insertionPosition=Ei.getInsertionPosition(t.splitPosition),t.graveyardPosition&&(t.graveyardPosition=t.graveyardPosition._getTransformedByMergeOperation(n)),[t]});ti(Ei,si,(t,n,e)=>{const i=qe._createFromPositionAndShift(n.sourcePosition,n.howMany);if(t.graveyardPosition){const r=i.start.isEqual(t.graveyardPosition)||i.containsPosition(t.graveyardPosition);if(!e.bWasUndone&&r){const o=t.splitPosition._getTransformedByMoveOperation(n),a=t.graveyardPosition._getTransformedByMoveOperation(n),l=a.path.slice();l.push(0);const c=new mt(a.root,l);return[new si(o,t.howMany,c,0)]}t.graveyardPosition=t.graveyardPosition._getTransformedByMoveOperation(n)}const s=t.splitPosition.isEqual(n.targetPosition);if(s&&(e.baRelation=="insertAtSource"||e.abRelation=="splitBefore"))return t.howMany+=n.howMany,t.splitPosition=t.splitPosition._getTransformedByDeletion(n.sourcePosition,n.howMany),t.insertionPosition=Ei.getInsertionPosition(t.splitPosition),[t];if(s&&e.abRelation&&e.abRelation.howMany){const{howMany:r,offset:o}=e.abRelation;return t.howMany+=r,t.splitPosition=t.splitPosition.getShiftedBy(o),[t]}if(t.splitPosition.hasSameParentAs(n.sourcePosition)&&i.containsPosition(t.splitPosition)){const r=n.howMany-(t.splitPosition.offset-n.sourcePosition.offset);return t.howMany-=r,t.splitPosition.hasSameParentAs(n.targetPosition)&&t.splitPosition.offset<n.targetPosition.offset&&(t.howMany+=n.howMany),t.splitPosition=n.sourcePosition.clone(),t.insertionPosition=Ei.getInsertionPosition(t.splitPosition),[t]}return n.sourcePosition.isEqual(n.targetPosition)||(t.splitPosition.hasSameParentAs(n.sourcePosition)&&t.splitPosition.offset<=n.sourcePosition.offset&&(t.howMany-=n.howMany),t.splitPosition.hasSameParentAs(n.targetPosition)&&t.splitPosition.offset<n.targetPosition.offset&&(t.howMany+=n.howMany)),t.splitPosition.stickiness="toNone",t.splitPosition=t.splitPosition._getTransformedByMoveOperation(n),t.splitPosition.stickiness="toNext",t.graveyardPosition?t.insertionPosition=t.insertionPosition._getTransformedByMoveOperation(n):t.insertionPosition=Ei.getInsertionPosition(t.splitPosition),[t]});ti(Ei,Ei,(t,n,e)=>{if(t.splitPosition.isEqual(n.splitPosition)){if(!t.graveyardPosition&&!n.graveyardPosition)return[new Ps(0)];if(t.graveyardPosition&&n.graveyardPosition&&t.graveyardPosition.isEqual(n.graveyardPosition))return[new Ps(0)];if(e.abRelation=="splitBefore")return t.howMany=0,t.graveyardPosition=t.graveyardPosition._getTransformedBySplitOperation(n),[t]}if(t.graveyardPosition&&n.graveyardPosition&&t.graveyardPosition.isEqual(n.graveyardPosition)){const i=t.splitPosition.root.rootName=="$graveyard",s=n.splitPosition.root.rootName=="$graveyard";if(s&&!i||!(i&&!s)&&e.aIsStrong){const l=[];return n.howMany&&l.push(new si(n.moveTargetPosition,n.howMany,n.splitPosition,0)),t.howMany&&l.push(new si(t.splitPosition,t.howMany,t.moveTargetPosition,0)),l}else return[new Ps(0)]}if(t.graveyardPosition&&(t.graveyardPosition=t.graveyardPosition._getTransformedBySplitOperation(n)),t.splitPosition.isEqual(n.insertionPosition)&&e.abRelation=="splitBefore")return t.howMany++,[t];if(n.splitPosition.isEqual(t.insertionPosition)&&e.baRelation=="splitBefore"){const i=n.insertionPosition.path.slice();i.push(0);const s=new mt(n.insertionPosition.root,i),r=new si(t.insertionPosition,1,s,0);return[t,r]}return t.splitPosition.hasSameParentAs(n.splitPosition)&&t.splitPosition.offset<n.splitPosition.offset&&(t.howMany-=n.howMany),t.splitPosition=t.splitPosition._getTransformedBySplitOperation(n),t.insertionPosition=Ei.getInsertionPosition(t.splitPosition),[t]});function MI(t,n){return t.targetPosition._getTransformedByDeletion(n.sourcePosition,n.howMany)===null}function Pf(t,n){const e=[];for(let i=0;i<t.length;i++){const s=t[i],r=new si(s.start,s.end.offset-s.start.offset,n,0);e.push(r);for(let o=i+1;o<t.length;o++)t[o]=t[o]._getTransformedByMove(r.sourcePosition,r.targetPosition,r.howMany)[0];n=n._getTransformedByMove(r.sourcePosition,r.targetPosition,r.howMany)}return e}class Ks extends Ti(mt){constructor(n,e,i="toNone"){if(super(n,e,i),!this.root.is("rootElement"))throw new fe("model-liveposition-root-not-rootelement",n);Ywe.call(this)}detach(){this.stopListening()}toPosition(){return new mt(this.root,this.path.slice(),this.stickiness)}static fromPosition(n,e){return new this(n.root,n.path.slice(),e||n.stickiness)}}Ks.prototype.is=function(t){return t==="livePosition"||t==="model:livePosition"||t=="position"||t==="model:position"};function Ywe(){this.listenTo(this.root.document.model,"applyOperation",(t,n)=>{const e=n[0];e.isDocumentOperation&&Zwe.call(this,e)},{priority:"low"})}function Zwe(t){const n=this.getTransformedByOperation(t);if(!this.isEqual(n)){const e=this.toPosition();this.path=n.path,this.root=n.root,this.fire("change",e)}}class af{constructor(n={}){w(this,"operations");w(this,"isUndoable");w(this,"isLocal");w(this,"isUndo");w(this,"isTyping");typeof n=="string"&&(n=n==="transparent"?{isUndoable:!1}:{},qn("batch-constructor-deprecated-string-type"));const{isUndoable:e=!0,isLocal:i=!0,isUndo:s=!1,isTyping:r=!1}=n;this.operations=[],this.isUndoable=e,this.isLocal=i,this.isUndo=s,this.isTyping=r}get type(){return qn("batch-type-deprecated"),"default"}get baseVersion(){for(const n of this.operations)if(n.baseVersion!==null)return n.baseVersion;return null}addOperation(n){return n.batch=this,this.operations.push(n),n}}const Fg=class Fg{constructor(n){w(this,"_markerCollection");w(this,"_changesInElement",new Map);w(this,"_elementsSnapshots",new Map);w(this,"_elementChildrenSnapshots",new Map);w(this,"_elementState",new Map);w(this,"_changedMarkers",new Map);w(this,"_changedRoots",new Map);w(this,"_changeCount",0);w(this,"_cachedChanges",null);w(this,"_cachedChangesWithGraveyard",null);w(this,"_refreshedItems",new Set);this._markerCollection=n}get isEmpty(){return this._changesInElement.size==0&&this._changedMarkers.size==0&&this._changedRoots.size==0}bufferOperation(n){const e=n;switch(e.type){case"insert":{if(this._isInInsertedElement(e.position.parent))return;this._markInsert(e.position.parent,e.position.offset,e.nodes.maxOffset);break}case"addAttribute":case"removeAttribute":case"changeAttribute":{for(const i of e.range.getItems({shallow:!0}))this._isInInsertedElement(i.parent)||this._markAttribute(i);break}case"remove":case"move":case"reinsert":{if(e.sourcePosition.isEqual(e.targetPosition)||e.sourcePosition.getShiftedBy(e.howMany).isEqual(e.targetPosition))return;const i=this._isInInsertedElement(e.sourcePosition.parent),s=this._isInInsertedElement(e.targetPosition.parent);i||this._markRemove(e.sourcePosition.parent,e.sourcePosition.offset,e.howMany),s||this._markInsert(e.targetPosition.parent,e.getMovedRangeStart().offset,e.howMany);const r=qe._createFromPositionAndShift(e.sourcePosition,e.howMany);for(const o of r.getItems({shallow:!0}))this._setElementState(o,"move");break}case"rename":{if(this._isInInsertedElement(e.position.parent))return;this._markRemove(e.position.parent,e.position.offset,1),this._markInsert(e.position.parent,e.position.offset,1);const i=qe._createFromPositionAndShift(e.position,1);for(const s of this._markerCollection.getMarkersIntersectingRange(i)){const r=s.getData();this.bufferMarkerChange(s.name,r,r)}this._setElementState(e.position.nodeAfter,"rename");break}case"split":{const i=e.splitPosition.parent;if(!this._isInInsertedElement(i)){this._markRemove(i,e.splitPosition.offset,e.howMany);const s=qe._createFromPositionAndShift(e.splitPosition,e.howMany);for(const r of s.getItems({shallow:!0}))this._setElementState(r,"move")}this._isInInsertedElement(e.insertionPosition.parent)||this._markInsert(e.insertionPosition.parent,e.insertionPosition.offset,1),e.graveyardPosition&&(this._markRemove(e.graveyardPosition.parent,e.graveyardPosition.offset,1),this._setElementState(e.graveyardPosition.nodeAfter,"move"));break}case"merge":{const i=e.sourcePosition.parent;this._isInInsertedElement(i.parent)||this._markRemove(i.parent,i.startOffset,1);const s=e.graveyardPosition.parent;this._markInsert(s,e.graveyardPosition.offset,1),this._setElementState(i,"move");const r=e.targetPosition.parent;if(!this._isInInsertedElement(r)){this._markInsert(r,e.targetPosition.offset,i.maxOffset);const o=qe._createFromPositionAndShift(e.sourcePosition,e.howMany);for(const a of o.getItems({shallow:!0}))this._setElementState(a,"move")}break}case"detachRoot":case"addRoot":{const i=e.affectedSelectable;if(!i._isLoaded||i.isAttached()==e.isAdd)return;this._bufferRootStateChange(e.rootName,e.isAdd);break}case"addRootAttribute":case"removeRootAttribute":case"changeRootAttribute":{if(!e.root._isLoaded)return;const i=e.root.rootName;this._bufferRootAttributeChange(i,e.key,e.oldValue,e.newValue);break}}this._cachedChanges=null}bufferMarkerChange(n,e,i){e.range&&e.range.root.is("rootElement")&&!e.range.root._isLoaded&&(e.range=null),i.range&&i.range.root.is("rootElement")&&!i.range.root._isLoaded&&(i.range=null);let s=this._changedMarkers.get(n);s?s.newMarkerData=i:(s={newMarkerData:i,oldMarkerData:e},this._changedMarkers.set(n,s)),s.oldMarkerData.range==null&&i.range==null&&this._changedMarkers.delete(n)}getMarkersToRemove(){const n=[];for(const[e,i]of this._changedMarkers)i.oldMarkerData.range!=null&&n.push({name:e,range:i.oldMarkerData.range});return n}getMarkersToAdd(){const n=[];for(const[e,i]of this._changedMarkers)i.newMarkerData.range!=null&&n.push({name:e,range:i.newMarkerData.range});return n}getChangedMarkers(){return Array.from(this._changedMarkers).map(([n,e])=>({name:n,data:{oldRange:e.oldMarkerData.range,newRange:e.newMarkerData.range}}))}hasDataChanges(){if(this.getChanges().length||this._changedRoots.size>0)return!0;for(const{newMarkerData:n,oldMarkerData:e}of this._changedMarkers.values()){if(n.affectsData!==e.affectsData)return!0;if(n.affectsData){const i=n.range&&!e.range,s=!n.range&&e.range,r=n.range&&e.range&&!n.range.isEqual(e.range);if(i||s||r)return!0}}return!1}getChanges(n={}){if(this._cachedChanges)return n.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice();let e=[];for(const i of this._changesInElement.keys()){const s=this._changesInElement.get(i).sort((u,d)=>u.offset===d.offset?u.type!=d.type?u.type=="remove"?-1:1:0:u.offset<d.offset?-1:1),r=this._elementChildrenSnapshots.get(i),o=OI(i.getChildren()),a=Xwe(r.length,s);let l=0,c=0;for(const u of a)if(u==="i"){const d=this._getDiffActionForNode(o[l].node,"insert"),f=this._elementsSnapshots.get(o[l].node),p=this._getInsertDiff(i,l,d,o[l],f);e.push(p),l++}else if(u==="r"){const d=this._getDiffActionForNode(r[c].node,"remove"),f=this._getRemoveDiff(i,l,d,r[c]);e.push(f),c++}else if(u==="a"){const d=r[c].attributes,f=o[l].attributes;let p;if(o[l].name=="$text")p=new qe(mt._createAt(i,l),mt._createAt(i,l+1));else{const v=i.offsetToIndex(l);p=new qe(mt._createAt(i,l),mt._createAt(i.getChild(v),0))}const m=this._getAttributesDiff(p,d,f);e.push(...m),l++,c++}else l++,c++}e.sort((i,s)=>i.position.root!=s.position.root?i.position.root.rootName<s.position.root.rootName?-1:1:i.position.isEqual(s.position)?i.changeCount-s.changeCount:i.position.isBefore(s.position)?-1:1);for(let i=1,s=0;i<e.length;i++){const r=e[s],o=e[i],a=r.type=="remove"&&o.type=="remove"&&r.name=="$text"&&o.name=="$text"&&r.position.isEqual(o.position),l=r.type=="insert"&&o.type=="insert"&&r.name=="$text"&&o.name=="$text"&&r.position.parent==o.position.parent&&r.position.offset+r.length==o.position.offset,c=r.type=="attribute"&&o.type=="attribute"&&r.position.parent==o.position.parent&&r.range.isFlat&&o.range.isFlat&&r.position.offset+r.length==o.position.offset&&r.attributeKey==o.attributeKey&&r.attributeOldValue==o.attributeOldValue&&r.attributeNewValue==o.attributeNewValue;a||l||c?(r.length++,c&&(r.range.end=r.range.end.getShiftedBy(1)),e[i]=null):s=i}e=e.filter(i=>i);for(const i of e)delete i.changeCount,i.type=="attribute"&&(delete i.position,delete i.length);return this._changeCount=0,this._cachedChangesWithGraveyard=e,this._cachedChanges=e.filter(Jwe),n.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice()}getChangedRoots(){return Array.from(this._changedRoots.values()).map(n=>{const e={...n};return e.state!==void 0&&delete e.attributes,e})}getRefreshedItems(){return new Set(this._refreshedItems)}reset(){this._changesInElement.clear(),this._elementChildrenSnapshots.clear(),this._elementsSnapshots.clear(),this._elementState.clear(),this._changedMarkers.clear(),this._changedRoots.clear(),this._refreshedItems.clear(),this._cachedChanges=null}_refreshItem(n){if(this._isInInsertedElement(n.parent))return;this._markRemove(n.parent,n.startOffset,n.offsetSize),this._markInsert(n.parent,n.startOffset,n.offsetSize),this._refreshedItems.add(n),this._setElementState(n,"refresh");const e=qe._createOn(n);for(const i of this._markerCollection.getMarkersIntersectingRange(e)){const s=i.getData();this.bufferMarkerChange(i.name,s,s)}this._cachedChanges=null}_bufferRootLoad(n){if(n.isAttached()){this._bufferRootStateChange(n.rootName,!0),this._markInsert(n,0,n.maxOffset);for(const e of n.getAttributeKeys())this._bufferRootAttributeChange(n.rootName,e,null,n.getAttribute(e));for(const e of this._markerCollection)if(e.getRange().root==n){const i=e.getData();this.bufferMarkerChange(e.name,{...i,range:null},i)}}}_bufferRootStateChange(n,e){if(!this._changedRoots.has(n)){this._changedRoots.set(n,{name:n,state:e?"attached":"detached"});return}const i=this._changedRoots.get(n);i.state!==void 0?(delete i.state,i.attributes===void 0&&this._changedRoots.delete(n)):i.state=e?"attached":"detached"}_bufferRootAttributeChange(n,e,i,s){const r=this._changedRoots.get(n)||{name:n},o=r.attributes||{};if(o[e]){const a=o[e];s===a.oldValue?delete o[e]:a.newValue=s}else o[e]={oldValue:i,newValue:s};Object.entries(o).length===0?(delete r.attributes,r.state===void 0&&this._changedRoots.delete(n)):(r.attributes=o,this._changedRoots.set(n,r))}_markInsert(n,e,i){if(n.root.is("rootElement")&&!n.root._isLoaded)return;const s={type:"insert",offset:e,howMany:i,count:this._changeCount++};this._markChange(n,s)}_markRemove(n,e,i){if(n.root.is("rootElement")&&!n.root._isLoaded)return;const s={type:"remove",offset:e,howMany:i,count:this._changeCount++};this._markChange(n,s),this._removeAllNestedChanges(n,e,i)}_markAttribute(n){if(n.root.is("rootElement")&&!n.root._isLoaded)return;const e={type:"attribute",offset:n.startOffset,howMany:n.offsetSize,count:this._changeCount++};this._markChange(n.parent,e)}_markChange(n,e){this._makeSnapshots(n);const i=this._getChangesForElement(n);this._handleChange(e,i),i.push(e);for(let s=0;s<i.length;s++)i[s].howMany<1&&(i.splice(s,1),s--)}_setElementState(n,e){if(!n.is("element"))return;const i=Fg._statesPriority.indexOf(this._elementState.get(n));Fg._statesPriority.indexOf(e)>i&&this._elementState.set(n,e)}_getDiffActionForNode(n,e){if(!n.is("element")||!this._elementsSnapshots.has(n))return e;const i=this._elementState.get(n);return!i||i=="move"?e:i}_getChangesForElement(n){let e;return this._changesInElement.has(n)?e=this._changesInElement.get(n):(e=[],this._changesInElement.set(n,e)),e}_makeSnapshots(n){if(this._elementChildrenSnapshots.has(n))return;const e=OI(n.getChildren());this._elementChildrenSnapshots.set(n,e);for(const i of e)this._elementsSnapshots.set(i.node,i)}_handleChange(n,e){n.nodesToHandle=n.howMany;for(const i of e){const s=n.offset+n.howMany,r=i.offset+i.howMany;if(n.type=="insert"&&(i.type=="insert"&&(n.offset<=i.offset?i.offset+=n.howMany:n.offset<r&&(i.howMany+=n.nodesToHandle,n.nodesToHandle=0)),i.type=="remove"&&n.offset<i.offset&&(i.offset+=n.howMany),i.type=="attribute")){if(n.offset<=i.offset)i.offset+=n.howMany;else if(n.offset<r){const o=i.howMany;i.howMany=n.offset-i.offset,e.unshift({type:"attribute",offset:s,howMany:o-i.howMany,count:this._changeCount++})}}if(n.type=="remove"){if(i.type=="insert"){if(s<=i.offset)i.offset-=n.howMany;else if(s<=r)if(n.offset<i.offset){const o=s-i.offset;i.offset=n.offset,i.howMany-=o,n.nodesToHandle-=o}else i.howMany-=n.nodesToHandle,n.nodesToHandle=0;else if(n.offset<=i.offset)n.nodesToHandle-=i.howMany,i.howMany=0;else if(n.offset<r){const o=r-n.offset;i.howMany-=o,n.nodesToHandle-=o}}if(i.type=="remove"&&(s<=i.offset?i.offset-=n.howMany:n.offset<i.offset&&(n.nodesToHandle+=i.howMany,i.howMany=0)),i.type=="attribute"){if(s<=i.offset)i.offset-=n.howMany;else if(n.offset<i.offset){const o=s-i.offset;i.offset=n.offset,i.howMany-=o}else if(n.offset<r)if(s<=r){const o=i.howMany;i.howMany=n.offset-i.offset;const a=o-i.howMany-n.nodesToHandle;e.unshift({type:"attribute",offset:n.offset,howMany:a,count:this._changeCount++})}else i.howMany-=r-n.offset}}if(n.type=="attribute"){if(i.type=="insert")if(n.offset<i.offset&&s>i.offset){if(s>r){const o={type:"attribute",offset:r,howMany:s-r,count:this._changeCount++};this._handleChange(o,e),e.push(o)}n.nodesToHandle=i.offset-n.offset,n.howMany=n.nodesToHandle}else n.offset>=i.offset&&n.offset<r&&(s>r?(n.nodesToHandle=s-r,n.offset=r):n.nodesToHandle=0);if(i.type=="remove"&&n.offset<i.offset&&s>i.offset){const o={type:"attribute",offset:i.offset,howMany:s-i.offset,count:this._changeCount++};this._handleChange(o,e),e.push(o),n.nodesToHandle=i.offset-n.offset,n.howMany=n.nodesToHandle}i.type=="attribute"&&(n.offset>=i.offset&&s<=r?(n.nodesToHandle=0,n.howMany=0,n.offset=0):n.offset<=i.offset&&s>=r&&(i.howMany=0))}}n.howMany=n.nodesToHandle,delete n.nodesToHandle}_getInsertDiff(n,e,i,s,r){const o={type:"insert",position:mt._createAt(n,e),name:s.name,attributes:new Map(s.attributes),length:1,changeCount:this._changeCount++,action:i};return i!="insert"&&r&&(o.before={name:r.name,attributes:new Map(r.attributes)}),o}_getRemoveDiff(n,e,i,s){return{type:"remove",action:i,position:mt._createAt(n,e),name:s.name,attributes:new Map(s.attributes),length:1,changeCount:this._changeCount++}}_getAttributesDiff(n,e,i){const s=[];i=new Map(i);for(const[r,o]of e){const a=i.has(r)?i.get(r):null;a!==o&&s.push({type:"attribute",position:n.start,range:n.clone(),length:1,attributeKey:r,attributeOldValue:o,attributeNewValue:a,changeCount:this._changeCount++}),i.delete(r)}for(const[r,o]of i)s.push({type:"attribute",position:n.start,range:n.clone(),length:1,attributeKey:r,attributeOldValue:null,attributeNewValue:o,changeCount:this._changeCount++});return s}_isInInsertedElement(n){const e=n.parent;if(!e)return!1;const i=this._changesInElement.get(e),s=n.startOffset;if(i){for(const r of i)if(r.type=="insert"&&s>=r.offset&&s<r.offset+r.howMany)return!0}return this._isInInsertedElement(e)}_removeAllNestedChanges(n,e,i){const s=new qe(mt._createAt(n,e),mt._createAt(n,e+i));for(const r of s.getItems({shallow:!0}))r.is("element")&&(this._changesInElement.delete(r),this._removeAllNestedChanges(r,0,r.maxOffset))}};w(Fg,"_statesPriority",[void 0,"refresh","rename","move"]);let XC=Fg;function PI(t){return{node:t,name:t.is("$text")?"$text":t.name,attributes:new Map(t.getAttributes())}}function OI(t){const n=[];for(const e of t)if(e.is("$text"))for(let i=0;i<e.data.length;++i)n.push(PI(e));else n.push(PI(e));return n}function Xwe(t,n){const e=[];let i=0,s=0;for(const r of n){if(r.offset>i){for(let o=0;o<r.offset-i;o++)e.push("e");s+=r.offset-i}if(r.type=="insert"){for(let o=0;o<r.howMany;o++)e.push("i");i=r.offset+r.howMany}else if(r.type=="remove"){for(let o=0;o<r.howMany;o++)e.push("r");i=r.offset,s+=r.howMany}else e.push(..."a".repeat(r.howMany).split("")),i=r.offset+r.howMany,s+=r.howMany}if(s<t)for(let r=0;r<t-s-i;r++)e.push("e");return e}function Jwe(t){const n="position"in t&&t.position.root.rootName=="$graveyard",e="range"in t&&t.range.root.rootName=="$graveyard";return!n&&!e}class Qwe{constructor(){w(this,"_operations",[]);w(this,"_undoPairs",new Map);w(this,"_undoneOperations",new Set);w(this,"_baseVersionToOperationIndex",new Map);w(this,"_version",0);w(this,"_gaps",new Map)}get version(){return this._version}set version(n){this._operations.length&&n>this._version+1&&this._gaps.set(this._version,n),this._version=n}get lastOperation(){return this._operations[this._operations.length-1]}addOperation(n){if(n.baseVersion!==this.version)throw new fe("model-document-history-addoperation-incorrect-version",this,{operation:n,historyVersion:this.version});this._operations.push(n),this._version++,this._baseVersionToOperationIndex.set(n.baseVersion,this._operations.length-1)}getOperations(n,e=this.version){if(!this._operations.length)return[];const i=this._operations[0];n===void 0&&(n=i.baseVersion);let s=e-1;for(const[a,l]of this._gaps)n>a&&n<l&&(n=l),s>a&&s<l&&(s=a-1);if(s<i.baseVersion||n>this.lastOperation.baseVersion)return[];let r=this._baseVersionToOperationIndex.get(n);r===void 0&&(r=0);let o=this._baseVersionToOperationIndex.get(s);return o===void 0&&(o=this._operations.length-1),this._operations.slice(r,o+1)}getOperation(n){const e=this._baseVersionToOperationIndex.get(n);if(e!==void 0)return this._operations[e]}setOperationAsUndone(n,e){this._undoPairs.set(e,n),this._undoneOperations.add(n)}isUndoingOperation(n){return this._undoPairs.has(n)}isUndoneOperation(n){return this._undoneOperations.has(n)}getUndoneOperation(n){return this._undoPairs.get(n)}reset(){this._version=0,this._undoPairs=new Map,this._operations=[],this._undoneOperations=new Set,this._gaps=new Map,this._baseVersionToOperationIndex=new Map}}class C_ extends Hi{constructor(e,i,s="main"){super(i);w(this,"rootName");w(this,"_document");w(this,"_isAttached",!0);w(this,"_isLoaded",!0);this._document=e,this.rootName=s}get document(){return this._document}isAttached(){return this._isAttached}toJSON(){return this.rootName}}C_.prototype.is=function(t,n){return n?n===this.name&&(t==="rootElement"||t==="model:rootElement"||t==="element"||t==="model:element"):t==="rootElement"||t==="model:rootElement"||t==="element"||t==="model:element"||t==="node"||t==="model:node"};const LI="$graveyard";class eye extends Ti(){constructor(e){super();w(this,"model");w(this,"history");w(this,"selection");w(this,"roots");w(this,"differ");w(this,"isReadOnly");w(this,"_postFixers");w(this,"_hasSelectionChangedFromTheLastChangeBlock");this.model=e,this.history=new Qwe,this.selection=new $a(this),this.roots=new _s({idProperty:"rootName"}),this.differ=new XC(e.markers),this.isReadOnly=!1,this._postFixers=new Set,this._hasSelectionChangedFromTheLastChangeBlock=!1,this.createRoot("$root",LI),this.listenTo(e,"applyOperation",(i,s)=>{const r=s[0];r.isDocumentOperation&&this.differ.bufferOperation(r)},{priority:"high"}),this.listenTo(e,"applyOperation",(i,s)=>{const r=s[0];r.isDocumentOperation&&this.history.addOperation(r)},{priority:"low"}),this.listenTo(this.selection,"change",()=>{this._hasSelectionChangedFromTheLastChangeBlock=!0}),this.listenTo(e.markers,"update",(i,s,r,o,a)=>{const l={...s.getData(),range:o};this.differ.bufferMarkerChange(s.name,a,l),r===null&&s.on("change",(c,u)=>{const d=s.getData();this.differ.bufferMarkerChange(s.name,{...d,range:u},d)})}),this.registerPostFixer(i=>{let s=!1;for(const r of this.roots)!r.isAttached()&&!r.isEmpty&&(i.remove(i.createRangeIn(r)),s=!0);for(const r of this.model.markers)r.getRange().root.isAttached()||(i.removeMarker(r),s=!0);return s})}get version(){return this.history.version}set version(e){this.history.version=e}get graveyard(){return this.getRoot(LI)}createRoot(e="$root",i="main"){if(this.roots.get(i))throw new fe("model-document-createroot-name-exists",this,{name:i});const s=new C_(this,e,i);return this.roots.add(s),s}destroy(){this.selection.destroy(),this.stopListening()}getRoot(e="main"){return this.roots.get(e)}getRootNames(e=!1){return this.getRoots(e).map(i=>i.rootName)}getRoots(e=!1){return this.roots.filter(i=>i!=this.graveyard&&(e||i.isAttached())&&i._isLoaded)}registerPostFixer(e){this._postFixers.add(e)}toJSON(){const e=l_(this);return e.selection="[engine.model.DocumentSelection]",e.model="[engine.model.Model]",e}_handleChangeBlock(e){this._hasDocumentChangedFromTheLastChangeBlock()&&(this._callPostFixers(e),this.selection.refresh(),this.differ.hasDataChanges()?this.fire("change:data",e.batch):this.fire("change",e.batch),this.selection.refresh(),this.differ.reset()),this._hasSelectionChangedFromTheLastChangeBlock=!1}_hasDocumentChangedFromTheLastChangeBlock(){return!this.differ.isEmpty||this._hasSelectionChangedFromTheLastChangeBlock}_getDefaultRoot(){const e=this.getRoots();return e.length?e[0]:this.graveyard}_getDefaultRange(){const e=this._getDefaultRoot(),i=this.model,s=i.schema,r=i.createPositionFromPath(e,[0]);return s.getNearestSelectionRange(r)||i.createRange(r)}_validateSelectionRange(e){return BI(e.start)&&BI(e.end)}_callPostFixers(e){let i=!1;do for(const s of this._postFixers)if(this.selection.refresh(),i=s(e),i)break;while(i)}}function BI(t){const n=t.textNode;if(n){const e=n.data,i=t.offset-n.startOffset;return!PE(e,i)&&!OE(e,i)}return!0}class tye extends Ti(){constructor(){super(...arguments);w(this,"_markers",new Map)}[Symbol.iterator](){return this._markers.values()}has(e){const i=e instanceof wf?e.name:e;return this._markers.has(i)}get(e){return this._markers.get(e)||null}_set(e,i,s=!1,r=!1){const o=e instanceof wf?e.name:e;if(o.includes(","))throw new fe("markercollection-incorrect-marker-name",this);const a=this._markers.get(o);if(a){const u=a.getData(),d=a.getRange();let f=!1;return d.isEqual(i)||(a._attachLiveRange(Kr.fromRange(i)),f=!0),s!=a.managedUsingOperations&&(a._managedUsingOperations=s,f=!0),typeof r=="boolean"&&r!=a.affectsData&&(a._affectsData=r,f=!0),f&&this.fire(`update:${o}`,a,d,i,u),a}const l=Kr.fromRange(i),c=new wf(o,l,s,r);return this._markers.set(o,c),this.fire(`update:${o}`,c,null,i,{...c.getData(),range:null}),c}_remove(e){const i=e instanceof wf?e.name:e,s=this._markers.get(i);return s?(this._markers.delete(i),this.fire(`update:${i}`,s,s.getRange(),null,s.getData()),this._destroyMarker(s),!0):!1}_refresh(e){const i=e instanceof wf?e.name:e,s=this._markers.get(i);if(!s)throw new fe("markercollection-refresh-marker-not-exists",this);const r=s.getRange();this.fire(`update:${i}`,s,r,r,s.getData())}*getMarkersAtPosition(e){for(const i of this)i.getRange().containsPosition(e)&&(yield i)}*getMarkersIntersectingRange(e){for(const i of this)i.getRange().getIntersection(e)!==null&&(yield i)}destroy(){for(const e of this._markers.values())this._destroyMarker(e);this._markers=null,this.stopListening()}*getMarkersGroup(e){for(const i of this._markers.values())i.name.startsWith(e+":")&&(yield i)}_destroyMarker(e){e.stopListening(),e._detachLiveRange()}}class wf extends Ti(Yu){constructor(e,i,s,r){super();w(this,"name");w(this,"_managedUsingOperations");w(this,"_affectsData");w(this,"_liveRange");this.name=e,this._liveRange=this._attachLiveRange(i),this._managedUsingOperations=s,this._affectsData=r}get managedUsingOperations(){if(!this._liveRange)throw new fe("marker-destroyed",this);return this._managedUsingOperations}get affectsData(){if(!this._liveRange)throw new fe("marker-destroyed",this);return this._affectsData}getData(){return{range:this.getRange(),affectsData:this.affectsData,managedUsingOperations:this.managedUsingOperations}}getStart(){if(!this._liveRange)throw new fe("marker-destroyed",this);return this._liveRange.start.clone()}getEnd(){if(!this._liveRange)throw new fe("marker-destroyed",this);return this._liveRange.end.clone()}getRange(){if(!this._liveRange)throw new fe("marker-destroyed",this);return this._liveRange.toRange()}_attachLiveRange(e){return this._liveRange&&this._detachLiveRange(),e.delegate("change:range").to(this),e.delegate("change:content").to(this),this._liveRange=e,e}_detachLiveRange(){this._liveRange.stopDelegating("change:range",this),this._liveRange.stopDelegating("change:content",this),this._liveRange.detach(),this._liveRange=null}}wf.prototype.is=function(t){return t==="marker"||t==="model:marker"};class nye extends Ro{constructor(e,i){super(null);w(this,"sourcePosition");w(this,"howMany");this.sourcePosition=e.clone(),this.howMany=i}get type(){return"detach"}get affectedSelectable(){return null}toJSON(){const e=super.toJSON();return e.sourcePosition=this.sourcePosition.toJSON(),e}_validate(){if(this.sourcePosition.root.document)throw new fe("detach-operation-on-document-node",this)}_execute(){KV(qe._createFromPositionAndShift(this.sourcePosition,this.howMany))}static get className(){return"DetachOperation"}}class Jl extends Yu{constructor(e){super();w(this,"markers",new Map);w(this,"_children",new yg);e&&this._insertChild(0,e)}[Symbol.iterator](){return this.getChildren()}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return this.childCount===0}get nextSibling(){return null}get previousSibling(){return null}get root(){return this}get parent(){return null}get document(){return null}isAttached(){return!1}getAncestors(){return[]}getChild(e){return this._children.getNode(e)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(e){return this._children.getNodeIndex(e)}getChildStartOffset(e){return this._children.getNodeStartOffset(e)}getPath(){return[]}getNodeByPath(e){let i=this;for(const s of e)i=i.getChild(i.offsetToIndex(s));return i}offsetToIndex(e){return this._children.offsetToIndex(e)}toJSON(){const e=[];for(const i of this._children)e.push(i.toJSON());return e}static fromJSON(e){const i=[];for(const s of e)s.name?i.push(Hi.fromJSON(s)):i.push(Gi.fromJSON(s));return new Jl(i)}_appendChild(e){this._insertChild(this.childCount,e)}_insertChild(e,i){const s=iye(i);for(const r of s)r.parent!==null&&r._remove(),r.parent=this;this._children._insertNodes(e,s)}_removeChildren(e,i=1){const s=this._children._removeNodes(e,i);for(const r of s)r.parent=null;return s}}Jl.prototype.is=function(t){return t==="documentFragment"||t==="model:documentFragment"};function iye(t){return typeof t=="string"?[new Gi(t)]:(Ao(t)||(t=[t]),Array.from(t).map(n=>typeof n=="string"?new Gi(n):n instanceof Ma?new Gi(n.data,n.getAttributes()):n))}class sye{constructor(n,e){w(this,"model");w(this,"batch");this.model=n,this.batch=e}createText(n,e){return new Gi(n,e)}createElement(n,e){return new Hi(n,e)}createDocumentFragment(){return new Jl}cloneElement(n,e=!0){return n._clone(e)}insert(n,e,i=0){if(this._assertWriterUsedCorrectly(),n instanceof Gi&&n.data=="")return;const s=mt._createAt(e,i);if(n.parent)if(VI(n.root,s.root)){this.move(qe._createOn(n),s);return}else{if(n.root.document)throw new fe("model-writer-insert-forbidden-move",this);this.remove(n)}const r=s.root.document?s.root.document.version:null,o=new Hs(s,n,r);if(n instanceof Gi&&(o.shouldReceiveAttributes=!0),this.batch.addOperation(o),this.model.applyOperation(o),n instanceof Jl)for(const[a,l]of n.markers){const c=mt._createAt(l.root,0),d={range:new qe(l.start._getCombined(c,s),l.end._getCombined(c,s)),usingOperation:!0,affectsData:!0};this.model.markers.has(a)?this.updateMarker(a,d):this.addMarker(a,d)}}insertText(n,e,i,s){e instanceof Jl||e instanceof Hi||e instanceof mt?this.insert(this.createText(n),e,i):this.insert(this.createText(n,e),i,s)}insertElement(n,e,i,s){e instanceof Jl||e instanceof Hi||e instanceof mt?this.insert(this.createElement(n),e,i):this.insert(this.createElement(n,e),i,s)}append(n,e){this.insert(n,e,"end")}appendText(n,e,i){e instanceof Jl||e instanceof Hi?this.insert(this.createText(n),e,"end"):this.insert(this.createText(n,e),i,"end")}appendElement(n,e,i){e instanceof Jl||e instanceof Hi?this.insert(this.createElement(n),e,"end"):this.insert(this.createElement(n,e),i,"end")}setAttribute(n,e,i){if(this._assertWriterUsedCorrectly(),i instanceof qe){const s=i.getMinimalFlatRanges();for(const r of s)FI(this,n,e,r)}else NI(this,n,e,i)}setAttributes(n,e){for(const[i,s]of Va(n))this.setAttribute(i,s,e)}removeAttribute(n,e){if(this._assertWriterUsedCorrectly(),e instanceof qe){const i=e.getMinimalFlatRanges();for(const s of i)FI(this,n,null,s)}else NI(this,n,null,e)}clearAttributes(n){this._assertWriterUsedCorrectly();const e=i=>{for(const s of i.getAttributeKeys())this.removeAttribute(s,i)};if(!(n instanceof qe))e(n);else for(const i of n.getItems())e(i)}move(n,e,i){if(this._assertWriterUsedCorrectly(),!(n instanceof qe))throw new fe("writer-move-invalid-range",this);if(!n.isFlat)throw new fe("writer-move-range-not-flat",this);const s=mt._createAt(e,i);if(s.isEqual(n.start))return;if(this._addOperationForAffectedMarkers("move",n),!VI(n.root,s.root))throw new fe("writer-move-different-document",this);const r=n.root.document?n.root.document.version:null,o=new si(n.start,n.end.offset-n.start.offset,s,r);this.batch.addOperation(o),this.model.applyOperation(o)}remove(n){this._assertWriterUsedCorrectly();const i=(n instanceof qe?n:qe._createOn(n)).getMinimalFlatRanges().reverse();for(const s of i)this._addOperationForAffectedMarkers("move",s),rye(s.start,s.end.offset-s.start.offset,this.batch,this.model)}merge(n){this._assertWriterUsedCorrectly();const e=n.nodeBefore,i=n.nodeAfter;if(this._addOperationForAffectedMarkers("merge",n),!(e instanceof Hi))throw new fe("writer-merge-no-element-before",this);if(!(i instanceof Hi))throw new fe("writer-merge-no-element-after",this);n.root.document?this._merge(n):this._mergeDetached(n)}createPositionFromPath(n,e,i){return this.model.createPositionFromPath(n,e,i)}createPositionAt(n,e){return this.model.createPositionAt(n,e)}createPositionAfter(n){return this.model.createPositionAfter(n)}createPositionBefore(n){return this.model.createPositionBefore(n)}createRange(n,e){return this.model.createRange(n,e)}createRangeIn(n){return this.model.createRangeIn(n)}createRangeOn(n){return this.model.createRangeOn(n)}createSelection(...n){return this.model.createSelection(...n)}_mergeDetached(n){const e=n.nodeBefore,i=n.nodeAfter;this.move(qe._createIn(i),mt._createAt(e,"end")),this.remove(i)}_merge(n){const e=mt._createAt(n.nodeBefore,"end"),i=mt._createAt(n.nodeAfter,0),s=n.root.document.graveyard,r=new mt(s,[0]),o=n.root.document.version,a=new ls(i,n.nodeAfter.maxOffset,e,r,o);this.batch.addOperation(a),this.model.applyOperation(a)}rename(n,e){if(this._assertWriterUsedCorrectly(),!(n instanceof Hi))throw new fe("writer-rename-not-element-instance",this);const i=n.root.document?n.root.document.version:null,s=new Qr(mt._createBefore(n),n.name,e,i);this.batch.addOperation(s),this.model.applyOperation(s)}split(n,e){this._assertWriterUsedCorrectly();let i=n.parent;if(!i.parent)throw new fe("writer-split-element-no-parent",this);if(e||(e=i.parent),!n.parent.getAncestors({includeSelf:!0}).includes(e))throw new fe("writer-split-invalid-limit-element",this);let s,r;do{const o=i.root.document?i.root.document.version:null,a=i.maxOffset-n.offset,l=Ei.getInsertionPosition(n),c=new Ei(n,a,l,null,o);this.batch.addOperation(c),this.model.applyOperation(c),!s&&!r&&(s=i,r=n.parent.nextSibling),n=this.createPositionAfter(n.parent),i=n.parent}while(i!==e);return{position:n,range:new qe(mt._createAt(s,"end"),mt._createAt(r,0))}}wrap(n,e){if(this._assertWriterUsedCorrectly(),!n.isFlat)throw new fe("writer-wrap-range-not-flat",this);const i=e instanceof Hi?e:new Hi(e);if(i.childCount>0)throw new fe("writer-wrap-element-not-empty",this);if(i.parent!==null)throw new fe("writer-wrap-element-attached",this);this.insert(i,n.start);const s=new qe(n.start.getShiftedBy(1),n.end.getShiftedBy(1));this.move(s,mt._createAt(i,0))}unwrap(n){if(this._assertWriterUsedCorrectly(),n.parent===null)throw new fe("writer-unwrap-element-no-parent",this);this.move(qe._createIn(n),this.createPositionAfter(n)),this.remove(n)}addMarker(n,e){if(this._assertWriterUsedCorrectly(),!e||typeof e.usingOperation!="boolean")throw new fe("writer-addmarker-no-usingoperation",this);const i=e.usingOperation,s=e.range,r=e.affectsData===void 0?!1:e.affectsData;if(this.model.markers.has(n))throw new fe("writer-addmarker-marker-exists",this);if(!s)throw new fe("writer-addmarker-no-range",this);return i?(Cp(this,n,null,s,r),this.model.markers.get(n)):this.model.markers._set(n,s,i,r)}updateMarker(n,e){this._assertWriterUsedCorrectly();const i=typeof n=="string"?n:n.name,s=this.model.markers.get(i);if(!s)throw new fe("writer-updatemarker-marker-not-exists",this);if(!e){qn("writer-updatemarker-reconvert-using-editingcontroller",{markerName:i}),this.model.markers._refresh(s);return}const r=typeof e.usingOperation=="boolean",o=typeof e.affectsData=="boolean",a=o?e.affectsData:s.affectsData;if(!r&&!e.range&&!o)throw new fe("writer-updatemarker-wrong-options",this);const l=s.getRange(),c=e.range?e.range:l;if(r&&e.usingOperation!==s.managedUsingOperations){e.usingOperation?Cp(this,i,null,c,a):(Cp(this,i,l,null,a),this.model.markers._set(i,c,void 0,a));return}s.managedUsingOperations?Cp(this,i,l,c,a):this.model.markers._set(i,c,void 0,a)}removeMarker(n){this._assertWriterUsedCorrectly();const e=typeof n=="string"?n:n.name;if(!this.model.markers.has(e))throw new fe("writer-removemarker-no-marker",this);const i=this.model.markers.get(e);if(!i.managedUsingOperations){this.model.markers._remove(e);return}const s=i.getRange();Cp(this,e,s,null,i.affectsData)}addRoot(n,e="$root"){this._assertWriterUsedCorrectly();const i=this.model.document.getRoot(n);if(i&&i.isAttached())throw new fe("writer-addroot-root-exists",this);const s=this.model.document,r=new wl(n,e,!0,s,s.version);return this.batch.addOperation(r),this.model.applyOperation(r),this.model.document.getRoot(n)}detachRoot(n){this._assertWriterUsedCorrectly();const e=typeof n=="string"?this.model.document.getRoot(n):n;if(!e||!e.isAttached())throw new fe("writer-detachroot-no-root",this);for(const r of this.model.markers)r.getRange().root===e&&this.removeMarker(r);for(const r of e.getAttributeKeys())this.removeAttribute(r,e);this.remove(this.createRangeIn(e));const i=this.model.document,s=new wl(e.rootName,e.name,!1,i,i.version);this.batch.addOperation(s),this.model.applyOperation(s)}setSelection(...n){this._assertWriterUsedCorrectly(),this.model.document.selection._setTo(...n)}setSelectionFocus(n,e){this._assertWriterUsedCorrectly(),this.model.document.selection._setFocus(n,e)}setSelectionAttribute(n,e){if(this._assertWriterUsedCorrectly(),typeof n=="string")this._setSelectionAttribute(n,e);else for(const[i,s]of Va(n))this._setSelectionAttribute(i,s)}removeSelectionAttribute(n){if(this._assertWriterUsedCorrectly(),typeof n=="string")this._removeSelectionAttribute(n);else for(const e of n)this._removeSelectionAttribute(e)}overrideSelectionGravity(){return this.model.document.selection._overrideGravity()}restoreSelectionGravity(n){this.model.document.selection._restoreGravity(n)}_setSelectionAttribute(n,e){const i=this.model.document.selection;if(i.isCollapsed&&i.anchor.parent.isEmpty){const s=$a._getStoreAttributeKey(n);this.setAttribute(s,e,i.anchor.parent)}i._setAttribute(n,e)}_removeSelectionAttribute(n){const e=this.model.document.selection;if(e.isCollapsed&&e.anchor.parent.isEmpty){const i=$a._getStoreAttributeKey(n);this.removeAttribute(i,e.anchor.parent)}e._removeAttribute(n)}_assertWriterUsedCorrectly(){if(this.model._currentWriter!==this)throw new fe("writer-incorrect-use",this)}_addOperationForAffectedMarkers(n,e){for(const i of this.model.markers){if(!i.managedUsingOperations)continue;const s=i.getRange();let r=!1;if(n==="move"){const o=e;r=o.containsPosition(s.start)||o.start.isEqual(s.start)||o.containsPosition(s.end)||o.end.isEqual(s.end)}else{const o=e,a=o.nodeBefore,l=o.nodeAfter,c=s.start.parent==a&&s.start.isAtEnd,u=s.end.parent==l&&s.end.offset==0,d=s.end.nodeAfter==l,f=s.start.nodeAfter==l;r=c||u||d||f}r&&this.updateMarker(i.name,{range:s})}}}function FI(t,n,e,i){const s=t.model,r=s.document;let o=i.start,a,l,c;for(const d of i.getWalker({shallow:!0}))c=d.item.getAttribute(n),a&&l!=c&&(l!=e&&u(),o=a),a=d.nextPosition,l=c;a instanceof mt&&a!=o&&l!=e&&u();function u(){const d=new qe(o,a),f=d.root.document?r.version:null,p=new gs(d,n,l,e,f);t.batch.addOperation(p),s.applyOperation(p)}}function NI(t,n,e,i){const s=t.model,r=s.document,o=i.getAttribute(n);let a,l;if(o!=e){if(i.root===i){const u=i.document?r.version:null;l=new uc(i,n,o,e,u)}else{a=new qe(mt._createBefore(i),t.createPositionAfter(i));const u=a.root.document?r.version:null;l=new gs(a,n,o,e,u)}t.batch.addOperation(l),s.applyOperation(l)}}function Cp(t,n,e,i,s){const r=t.model,o=r.document,a=new Jr(n,e,i,r.markers,!!s,o.version);t.batch.addOperation(a),r.applyOperation(a)}function rye(t,n,e,i){let s;if(t.root.document){const r=i.document,o=new mt(r.graveyard,[0]);s=new si(t,n,o,r.version)}else s=new nye(t,n);e.addOperation(s),i.applyOperation(s)}function VI(t,n){return t===n||t instanceof C_&&n instanceof C_}function oye(t,n,e={}){if(n.isCollapsed)return;const i=n.getFirstRange();if(i.root.rootName=="$graveyard")return;const s=t.schema;t.change(r=>{if(!e.doNotResetEntireContent&&pye(s,n)){mye(r,n);return}const o={};if(!e.doNotAutoparagraph){const c=n.getSelectedElement();c&&Object.assign(o,s.getAttributesWithProperty(c,"copyOnReplace",!0))}const[a,l]=aye(i);a.isTouching(l)||r.remove(r.createRange(a,l)),e.leaveUnmerged||(cye(r,a,l),s.removeDisallowedAttributes(a.parent.getChildren(),r)),eD(r,n,a),!e.doNotAutoparagraph&&hye(s,a)&&QV(r,a,n,o),a.detach(),l.detach()})}function aye(t){const n=t.root.document.model,e=t.start;let i=t.end;if(n.hasContent(t,{ignoreMarkers:!0})){const s=lye(i);if(s&&i.isTouching(n.createPositionAt(s,0))){const r=n.createSelection(t);n.modifySelection(r,{direction:"backward"});const o=r.getLastPosition(),a=n.createRange(o,i);n.hasContent(a,{ignoreMarkers:!0})||(i=o)}}return[Ks.fromPosition(e,"toPrevious"),Ks.fromPosition(i,"toNext")]}function lye(t){const n=t.parent,e=n.root.document.model.schema,i=n.getAncestors({parentFirst:!0,includeSelf:!0});for(const s of i){if(e.isLimit(s))return null;if(e.isBlock(s))return s}}function cye(t,n,e){const i=t.model;if(!UE(t.model.schema,n,e))return;const[s,r]=dye(n,e);!s||!r||(!i.hasContent(s,{ignoreMarkers:!0})&&i.hasContent(r,{ignoreMarkers:!0})?JV(t,n,e,s.parent):XV(t,n,e,s.parent))}function XV(t,n,e,i){const s=n.parent,r=e.parent;if(!(s==i||r==i)){for(n=t.createPositionAfter(s),e=t.createPositionBefore(r),e.isEqual(n)||t.insert(r,n),t.merge(n);e.parent.isEmpty;){const o=e.parent;e=t.createPositionBefore(o),t.remove(o)}UE(t.model.schema,n,e)&&XV(t,n,e,i)}}function JV(t,n,e,i){const s=n.parent,r=e.parent;if(!(s==i||r==i)){for(n=t.createPositionAfter(s),e=t.createPositionBefore(r),e.isEqual(n)||t.insert(s,e);n.parent.isEmpty;){const o=n.parent;n=t.createPositionBefore(o),t.remove(o)}e=t.createPositionBefore(r),uye(t,e),UE(t.model.schema,n,e)&&JV(t,n,e,i)}}function uye(t,n){const e=n.nodeBefore,i=n.nodeAfter;e.name!=i.name&&t.rename(e,i.name),t.clearAttributes(e),t.setAttributes(Object.fromEntries(i.getAttributes()),e),t.merge(n)}function UE(t,n,e){const i=n.parent,s=e.parent;return i==s||t.isLimit(i)||t.isLimit(s)?!1:fye(n,e,t)}function dye(t,n){const e=t.getAncestors(),i=n.getAncestors();let s=0;for(;e[s]&&e[s]==i[s];)s++;return[e[s],i[s]]}function hye(t,n){const e=t.checkChild(n,"$text"),i=t.checkChild(n,"paragraph");return!e&&i}function fye(t,n,e){const i=new qe(t,n);for(const s of i.getWalker())if(e.isLimit(s.item))return!1;return!0}function QV(t,n,e,i={}){const s=t.createElement("paragraph");t.model.schema.setAllowedAttributes(s,i,t),t.insert(s,n),eD(t,e,t.createPositionAt(s,0))}function mye(t,n){const e=t.model.schema.getLimitElement(n);t.remove(t.createRangeIn(e)),QV(t,t.createPositionAt(e,0),n)}function pye(t,n){const e=t.getLimitElement(n);if(!n.containsEntireContent(e))return!1;const i=n.getFirstRange();return i.start.parent==i.end.parent?!1:t.checkChild(e,"paragraph")}function eD(t,n,e){n instanceof $a?t.setSelection(e):n.setTo(e)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function gye(t,n){return t.change(e=>{const i=e.createDocumentFragment(),s=n.getFirstRange();if(!s||s.isCollapsed)return i;const r=s.start.root,o=s.start.getCommonPath(s.end),a=r.getNodeByPath(o);let l;s.start.parent==s.end.parent?l=s:l=e.createRange(e.createPositionAt(a,s.start.path[o.length]),e.createPositionAt(a,s.end.path[o.length]+1));const c=l.end.offset-l.start.offset;for(const u of l.getItems({shallow:!0}))u.is("$textProxy")?e.appendText(u.data,u.getAttributes(),i):e.append(e.cloneElement(u,!0),i);if(l!=s){const u=s._getTransformedByMove(l.start,e.createPositionAt(i,0),c)[0],d=e.createRange(e.createPositionAt(i,0),u.start),f=e.createRange(u.end,e.createPositionAt(i,"end"));DI(f,e),DI(d,e)}return i})}function DI(t,n){const e=[];Array.from(t.getItems({direction:"backward"})).map(i=>n.createRangeOn(i)).filter(i=>(i.start.isAfter(t.start)||i.start.isEqual(t.start))&&(i.end.isBefore(t.end)||i.end.isEqual(t.end))).forEach(i=>{e.push(i.start.parent),n.remove(i)}),e.forEach(i=>{let s=i;for(;s.parent&&s.isEmpty;){const r=n.createRangeOn(s);s=s.parent,n.remove(r)}})}function vye(t,n,e){return t.change(i=>{const s=e||t.document.selection;s.isCollapsed||t.deleteContent(s,{doNotAutoparagraph:!0});const r=new bye(t,i,s.anchor),o=[];let a;if(n.is("documentFragment")){if(n.markers.size){const u=[];for(const[d,f]of n.markers){const{start:p,end:m}=f,v=p.isEqual(m);u.push({position:p,name:d,isCollapsed:v},{position:m,name:d,isCollapsed:v})}u.sort(({position:d},{position:f})=>d.isBefore(f)?1:-1);for(const{position:d,name:f,isCollapsed:p}of u){let m=null,v=null;const y=d.parent===n&&d.isAtStart,_=d.parent===n&&d.isAtEnd;!y&&!_?(m=i.createElement("$marker"),i.insert(m,d)):p&&(v=y?"start":"end"),o.push({name:f,element:m,collapsed:v})}}a=n.getChildren()}else a=[n];r.handleNodes(a);let l=r.getSelectionRange();if(n.is("documentFragment")&&o.length){const u=l?Kr.fromRange(l):null,d={};for(let f=o.length-1;f>=0;f--){const{name:p,element:m,collapsed:v}=o[f],y=!d[p];if(y&&(d[p]=[]),m){const _=i.createPositionAt(m,"before");d[p].push(_),i.remove(m)}else{const _=r.getAffectedRange();if(!_){v&&d[p].push(r.position);continue}v?d[p].push(_[v]):d[p].push(y?_.start:_.end)}}for(const[f,[p,m]]of Object.entries(d))p&&m&&p.root===m.root&&p.root.document&&!i.model.markers.has(f)&&i.addMarker(f,{usingOperation:!0,affectsData:!0,range:new qe(p,m)});u&&(l=u.toRange(),u.detach())}/* istanbul ignore else -- @preserve */l&&(s instanceof $a?i.setSelection(l):s.setTo(l));const c=r.getAffectedRange()||t.createRange(s.anchor);return r.destroy(),c})}class bye{constructor(n,e,i){w(this,"model");w(this,"writer");w(this,"position");w(this,"canMergeWith");w(this,"schema");w(this,"_documentFragment");w(this,"_documentFragmentPosition");w(this,"_firstNode",null);w(this,"_lastNode",null);w(this,"_lastAutoParagraph",null);w(this,"_filterAttributesOf",[]);w(this,"_affectedStart",null);w(this,"_affectedEnd",null);w(this,"_nodeToSelect",null);this.model=n,this.writer=e,this.position=i,this.canMergeWith=new Set([this.position.parent]),this.schema=n.schema,this._documentFragment=e.createDocumentFragment(),this._documentFragmentPosition=e.createPositionAt(this._documentFragment,0)}handleNodes(n){for(const e of Array.from(n))this._handleNode(e);this._insertPartialFragment(),this._lastAutoParagraph&&this._updateLastNodeFromAutoParagraph(this._lastAutoParagraph),this._mergeOnRight(),this.schema.removeDisallowedAttributes(this._filterAttributesOf,this.writer),this._filterAttributesOf=[]}_updateLastNodeFromAutoParagraph(n){const e=this.writer.createPositionAfter(this._lastNode),i=this.writer.createPositionAfter(n);if(i.isAfter(e)){this._lastNode=n;/* istanbul ignore if -- @preserve */if(this.position.parent!=n||!this.position.isAtEnd)throw new fe("insertcontent-invalid-insertion-position",this);this.position=i,this._setAffectedBoundaries(this.position)}}getSelectionRange(){return this._nodeToSelect?qe._createOn(this._nodeToSelect):this.model.schema.getNearestSelectionRange(this.position)}getAffectedRange(){return this._affectedStart?new qe(this._affectedStart,this._affectedEnd):null}destroy(){this._affectedStart&&this._affectedStart.detach(),this._affectedEnd&&this._affectedEnd.detach()}_handleNode(n){if(!this._checkAndSplitToAllowedPosition(n)){this.schema.isObject(n)||this._handleDisallowedNode(n);return}this._appendToFragment(n),this._firstNode||(this._firstNode=n),this._lastNode=n}_insertPartialFragment(){if(this._documentFragment.isEmpty)return;const n=Ks.fromPosition(this.position,"toNext");this._setAffectedBoundaries(this.position),this._documentFragment.getChild(0)==this._firstNode&&(this.writer.insert(this._firstNode,this.position),this._mergeOnLeft(),this.position=n.toPosition()),this._documentFragment.isEmpty||this.writer.insert(this._documentFragment,this.position),this._documentFragmentPosition=this.writer.createPositionAt(this._documentFragment,0),this.position=n.toPosition(),n.detach()}_handleDisallowedNode(n){n.is("element")&&this.handleNodes(n.getChildren())}_appendToFragment(n){/* istanbul ignore if -- @preserve */if(!this.schema.checkChild(this.position,n))throw new fe("insertcontent-wrong-position",this,{node:n,position:this.position});this.writer.insert(n,this._documentFragmentPosition),this._documentFragmentPosition=this._documentFragmentPosition.getShiftedBy(n.offsetSize),this.schema.isObject(n)&&!this.schema.checkChild(this.position,"$text")?this._nodeToSelect=n:this._nodeToSelect=null,this._filterAttributesOf.push(n)}_setAffectedBoundaries(n){this._affectedStart||(this._affectedStart=Ks.fromPosition(n,"toPrevious")),(!this._affectedEnd||this._affectedEnd.isBefore(n))&&(this._affectedEnd&&this._affectedEnd.detach(),this._affectedEnd=Ks.fromPosition(n,"toNext"))}_mergeOnLeft(){const n=this._firstNode;if(!(n instanceof Hi)||!this._canMergeLeft(n))return;const e=Ks._createBefore(n);e.stickiness="toNext";const i=Ks.fromPosition(this.position,"toNext");this._affectedStart.isEqual(e)&&(this._affectedStart.detach(),this._affectedStart=Ks._createAt(e.nodeBefore,"end","toPrevious")),this._firstNode===this._lastNode&&(this._firstNode=e.nodeBefore,this._lastNode=e.nodeBefore),this.writer.merge(e),e.isEqual(this._affectedEnd)&&this._firstNode===this._lastNode&&(this._affectedEnd.detach(),this._affectedEnd=Ks._createAt(e.nodeBefore,"end","toNext")),this.position=i.toPosition(),i.detach(),this._filterAttributesOf.push(this.position.parent),e.detach()}_mergeOnRight(){const n=this._lastNode;if(!(n instanceof Hi)||!this._canMergeRight(n))return;const e=Ks._createAfter(n);e.stickiness="toNext";/* istanbul ignore if -- @preserve */if(!this.position.isEqual(e))throw new fe("insertcontent-invalid-insertion-position",this);this.position=mt._createAt(e.nodeBefore,"end");const i=Ks.fromPosition(this.position,"toPrevious");this._affectedEnd.isEqual(e)&&(this._affectedEnd.detach(),this._affectedEnd=Ks._createAt(e.nodeBefore,"end","toNext")),this._firstNode===this._lastNode&&(this._firstNode=e.nodeBefore,this._lastNode=e.nodeBefore),this.writer.merge(e),e.getShiftedBy(-1).isEqual(this._affectedStart)&&this._firstNode===this._lastNode&&(this._affectedStart.detach(),this._affectedStart=Ks._createAt(e.nodeBefore,0,"toPrevious")),this.position=i.toPosition(),i.detach(),this._filterAttributesOf.push(this.position.parent),e.detach()}_canMergeLeft(n){const e=n.previousSibling;return e instanceof Hi&&this.canMergeWith.has(e)&&this.model.schema.checkMerge(e,n)}_canMergeRight(n){const e=n.nextSibling;return e instanceof Hi&&this.canMergeWith.has(e)&&this.model.schema.checkMerge(n,e)}_insertAutoParagraph(){this._insertPartialFragment();const n=this.writer.createElement("paragraph");this.writer.insert(n,this.position),this._setAffectedBoundaries(this.position),this._lastAutoParagraph=n,this.position=this.writer.createPositionAt(n,0)}_checkAndSplitToAllowedPosition(n){const e=this._getAllowedIn(this.position.parent,n);if(!e)return!1;for(e!=this.position.parent&&this._insertPartialFragment();e!=this.position.parent;)if(this.position.isAtStart){const i=this.position.parent;this.position=this.writer.createPositionBefore(i),i.isEmpty&&i.parent===e&&this.writer.remove(i)}else if(this.position.isAtEnd)this.position=this.writer.createPositionAfter(this.position.parent);else{const i=this.writer.createPositionAfter(this.position.parent);this._setAffectedBoundaries(this.position),this.writer.split(this.position),this.position=i,this.canMergeWith.add(this.position.nodeAfter)}return this.schema.checkChild(this.position.parent,n)||this._insertAutoParagraph(),!0}_getAllowedIn(n,e){return this.schema.checkChild(n,e)||this.schema.checkChild(n,"paragraph")&&this.schema.checkChild("paragraph",e)?n:this.schema.isLimit(n)?null:this._getAllowedIn(n.parent,e)}}function _ye(t,n,e,i={}){if(!t.schema.isObject(n))throw new fe("insertobject-element-not-an-object",t,{object:n});const s=e||t.document.selection;let r=s;i.findOptimalPosition&&t.schema.isBlock(n)&&(r=t.createSelection(t.schema.findOptimalInsertionRange(s,i.findOptimalPosition)));const o=bs(s.getSelectedBlocks()),a={};return o&&Object.assign(a,t.schema.getAttributesWithProperty(o,"copyOnReplace",!0)),t.change(l=>{r.isCollapsed||t.deleteContent(r,{doNotAutoparagraph:!0});let c=n;const u=r.anchor.parent;!t.schema.checkChild(u,n)&&t.schema.checkChild(u,"paragraph")&&t.schema.checkChild("paragraph",n)&&(c=l.createElement("paragraph"),l.insert(n,c)),t.schema.setAllowedAttributes(c,a,l);const d=t.insertContent(c,r);return d.isCollapsed||i.setSelection&&wye(l,n,i.setSelection,a),d})}function wye(t,n,e,i){const s=t.model;if(e=="on"){t.setSelection(n,"on");return}if(e!="after")throw new fe("insertobject-invalid-place-parameter-value",s);let r=n.nextSibling;if(s.schema.isInline(n)){t.setSelection(n,"after");return}!(r&&s.schema.checkChild(r,"$text"))&&s.schema.checkChild(n.parent,"paragraph")&&(r=t.createElement("paragraph"),s.schema.setAllowedAttributes(r,i,t),s.insertContent(r,t.createPositionAfter(n))),r&&t.setSelection(r,0)}const yye=' ,.?!:;"-()';function Cye(t,n,e={}){const i=t.schema,s=e.direction!="backward",r=e.unit?e.unit:"character",o=!!e.treatEmojiAsSingleUnit,a=n.focus,l=new rc({boundaries:Tye(a,s),singleCharacters:!0,direction:s?"forward":"backward"}),c={walker:l,schema:i,isForward:s,unit:r,treatEmojiAsSingleUnit:o};let u;for(;u=l.next();){if(u.done)return;const d=kye(c,u.value);if(d){n instanceof $a?t.change(f=>{f.setSelectionFocus(d)}):n.setFocus(d);return}}}function kye(t,n){const{isForward:e,walker:i,unit:s,schema:r,treatEmojiAsSingleUnit:o}=t,{type:a,item:l,nextPosition:c}=n;if(a=="text")return t.unit==="word"?Sye(i,e):Eye(i,s,o);if(a==(e?"elementStart":"elementEnd")){if(r.isSelectable(l))return mt._createAt(l,e?"after":"before");if(r.checkChild(c,"$text"))return c}else{if(r.isLimit(l)){i.skip(()=>!0);return}if(r.checkChild(c,"$text"))return c}}function Eye(t,n,e){const i=t.position.textNode;if(i){const s=i.data;let r=t.position.offset-i.startOffset;for(;PE(s,r)||n=="character"&&OE(s,r)||e&&fV(s,r);)t.next(),r=t.position.offset-i.startOffset}return t.position}function Sye(t,n){let e=t.position.textNode;for(e||(e=n?t.position.nodeAfter:t.position.nodeBefore);e&&e.is("$text");){const i=t.position.offset-e.startOffset;if(Aye(e,i,n))e=n?t.position.nodeAfter:t.position.nodeBefore;else{if(xye(e.data,i,n))break;t.next()}}return t.position}function Tye(t,n){const e=t.root,i=mt._createAt(e,n?"end":0);return n?new qe(t,i):new qe(i,t)}function xye(t,n,e){const i=n+(e?0:-1);return yye.includes(t.charAt(i))}function Aye(t,n,e){return n===(e?t.offsetSize:0)}let Iye=class extends li(){constructor(){super();w(this,"markers");w(this,"document");w(this,"schema");w(this,"_pendingChanges");w(this,"_currentWriter");this.markers=new tye,this.document=new eye(this),this.schema=new vwe,this._pendingChanges=[],this._currentWriter=null,["deleteContent","modifySelection","getSelectedContent","applyOperation"].forEach(e=>this.decorate(e)),this.on("applyOperation",(e,i)=>{i[0]._validate()},{priority:"highest"}),this.schema.register("$root",{isLimit:!0}),this.schema.register("$container",{allowIn:["$root","$container"]}),this.schema.register("$block",{allowIn:["$root","$container"],isBlock:!0}),this.schema.register("$blockObject",{allowWhere:"$block",isBlock:!0,isObject:!0}),this.schema.register("$inlineObject",{allowWhere:"$text",allowAttributesOf:"$text",isInline:!0,isObject:!0}),this.schema.register("$text",{allowIn:"$block",isInline:!0,isContent:!0}),this.schema.register("$clipboardHolder",{allowContentOf:"$root",allowChildren:"$text",isLimit:!0}),this.schema.register("$documentFragment",{allowContentOf:"$root",allowChildren:"$text",isLimit:!0}),this.schema.register("$marker"),this.schema.addChildCheck(()=>!0,"$marker"),lwe(this),this.document.registerPostFixer($V),this.on("insertContent",(e,[i,s])=>{e.return=vye(this,i,s)}),this.on("insertObject",(e,[i,s,r])=>{e.return=_ye(this,i,s,r)}),this.on("canEditAt",e=>{const i=!this.document.isReadOnly;e.return=i,i||e.stop()})}change(e){try{return this._pendingChanges.length===0?(this._pendingChanges.push({batch:new af,callback:e}),this._runPendingChanges()[0]):e(this._currentWriter)}catch(i){/* istanbul ignore next -- @preserve */fe.rethrowUnexpectedError(i,this)}}enqueueChange(e,i){try{e?typeof e=="function"?(i=e,e=new af):e instanceof af||(e=new af(e)):e=new af,this._pendingChanges.push({batch:e,callback:i}),this._pendingChanges.length==1&&this._runPendingChanges()}catch(s){/* istanbul ignore next -- @preserve */fe.rethrowUnexpectedError(s,this)}}applyOperation(e){e._execute()}insertContent(e,i,s,...r){const o=R5(i,s);return this.fire("insertContent",[e,o,s,...r])}insertObject(e,i,s,r,...o){const a=R5(i,s);return this.fire("insertObject",[e,a,r,r,...o])}deleteContent(e,i){oye(this,e,i)}modifySelection(e,i){Cye(this,e,i)}getSelectedContent(e){return gye(this,e)}hasContent(e,i={}){const s=e instanceof qe?e:qe._createIn(e);if(s.isCollapsed)return!1;const{ignoreWhitespaces:r=!1,ignoreMarkers:o=!1}=i;if(!o){for(const a of this.markers.getMarkersIntersectingRange(s))if(a.affectsData)return!0}for(const a of s.getItems())if(this.schema.isContent(a))if(a.is("$textProxy"))if(r){if(a.data.search(/\S/)!==-1)return!0}else return!0;else return!0;return!1}canEditAt(e){const i=R5(e);return this.fire("canEditAt",[i])}createPositionFromPath(e,i,s){return new mt(e,i,s)}createPositionAt(e,i){return mt._createAt(e,i)}createPositionAfter(e){return mt._createAfter(e)}createPositionBefore(e){return mt._createBefore(e)}createRange(e,i){return new qe(e,i)}createRangeIn(e){return qe._createIn(e)}createRangeOn(e){return qe._createOn(e)}createSelection(...e){return new go(...e)}createBatch(e){return new af(e)}createOperationFromJSON(e){return Uwe.fromJSON(e,this.document)}destroy(){this.document.destroy(),this.stopListening()}_runPendingChanges(){const e=[];this.fire("_beforeChanges");try{for(;this._pendingChanges.length;){const i=this._pendingChanges[0].batch;this._currentWriter=new sye(this,i);const s=this._pendingChanges[0].callback(this._currentWriter);e.push(s),this.document._handleChangeBlock(this._currentWriter),this._pendingChanges.shift(),this._currentWriter=null}}finally{this._pendingChanges.length=0,this._currentWriter=null,this.fire("_afterChanges")}return e}};function R5(t,n){if(t)return t instanceof go||t instanceof $a?t:t instanceof Ah?n||n===0?new go(t,n):t.is("rootElement")?new go(t,"in"):new go(t,"on"):new go(t)}class Rye extends Oc{constructor(){super(...arguments);w(this,"domEventType","click")}onDomEvent(e){this.fire(e.type,e)}}class Gw extends Oc{constructor(){super(...arguments);w(this,"domEventType",["mousedown","mouseup","mouseover","mouseout"])}onDomEvent(e){this.fire(e.type,e)}}class Zu{constructor(n){w(this,"document");this.document=n}createDocumentFragment(n){return new ih(this.document,n)}createElement(n,e,i){return new Da(this.document,n,e,i)}createText(n){return new Yi(this.document,n)}clone(n,e=!1){return n._clone(e)}appendChild(n,e){return e._appendChild(n)}insertChild(n,e,i){return i._insertChild(n,e)}removeChildren(n,e,i){return i._removeChildren(n,e)}remove(n){const e=n.parent;return e?this.removeChildren(e.getChildIndex(n),1,e):[]}replace(n,e){const i=n.parent;if(i){const s=i.getChildIndex(n);return this.removeChildren(s,1,i),this.insertChild(s,e,i),!0}return!1}unwrapElement(n){const e=n.parent;if(e){const i=e.getChildIndex(n);this.remove(n),this.insertChild(i,n.getChildren(),e)}}rename(n,e){const i=new Da(this.document,n,e.getAttributes(),e.getChildren());return this.replace(e,i)?i:null}setAttribute(n,e,i){i._setAttribute(n,e)}removeAttribute(n,e){e._removeAttribute(n)}addClass(n,e){e._addClass(n)}removeClass(n,e){e._removeClass(n)}setStyle(n,e,i){po(n)&&i===void 0?e._setStyle(n):i._setStyle(n,e)}removeStyle(n,e){e._removeStyle(n)}setCustomProperty(n,e,i){i._setCustomProperty(n,e)}removeCustomProperty(n,e){return e._removeCustomProperty(n)}createPositionAt(n,e){return Nt._createAt(n,e)}createPositionAfter(n){return Nt._createAfter(n)}createPositionBefore(n){return Nt._createBefore(n)}createRange(n,e){return new An(n,e)}createRangeOn(n){return An._createOn(n)}createRangeIn(n){return An._createIn(n)}createSelection(...n){return new cc(...n)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Mye=/^#([0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/i,Pye=/^rgb\([ ]?([0-9]{1,3}[ %]?,[ ]?){2,3}[0-9]{1,3}[ %]?\)$/i,Oye=/^rgba\([ ]?([0-9]{1,3}[ %]?,[ ]?){3}(1|[0-9]+%|[0]?\.?[0-9]+)\)$/i,Lye=/^hsl\([ ]?([0-9]{1,3}[ %]?[,]?[ ]*){3}(1|[0-9]+%|[0]?\.?[0-9]+)?\)$/i,Bye=/^hsla\([ ]?([0-9]{1,3}[ %]?,[ ]?){2,3}(1|[0-9]+%|[0]?\.?[0-9]+)\)$/i,Fye=/\w+\((?:[^()]|\([^()]*\))*\)|\S+/gi,Nye=new Set(["black","silver","gray","white","maroon","red","purple","fuchsia","green","lime","olive","yellow","navy","blue","teal","aqua","orange","aliceblue","antiquewhite","aquamarine","azure","beige","bisque","blanchedalmond","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","gainsboro","ghostwhite","gold","goldenrod","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","limegreen","linen","magenta","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","oldlace","olivedrab","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","thistle","tomato","turquoise","violet","wheat","whitesmoke","yellowgreen","activeborder","activecaption","appworkspace","background","buttonface","buttonhighlight","buttonshadow","buttontext","captiontext","graytext","highlight","highlighttext","inactiveborder","inactivecaption","inactivecaptiontext","infobackground","infotext","menu","menutext","scrollbar","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","window","windowframe","windowtext","rebeccapurple","currentcolor","transparent"]);function tD(t){return t.startsWith("#")?Mye.test(t):t.startsWith("rgb")?Pye.test(t)||Oye.test(t):t.startsWith("hsl")?Lye.test(t)||Bye.test(t):Nye.has(t.toLowerCase())}const Vye=["none","hidden","dotted","dashed","solid","double","groove","ridge","inset","outset"];function Dye(t){return Vye.includes(t)}const $ye=/^([+-]?[0-9]*([.][0-9]+)?(px|cm|mm|in|pc|pt|ch|em|ex|rem|vh|vw|vmin|vmax)|0)$/;function Yw(t){return $ye.test(t)}const zye=/^[+-]?[0-9]*([.][0-9]+)?%$/;function nD(t){return zye.test(t)}const Hye=["repeat-x","repeat-y","repeat","space","round","no-repeat"];function Uye(t){return Hye.includes(t)}const Wye=["center","top","bottom","left","right"];function jye(t){return Wye.includes(t)}const qye=["fixed","scroll","local"];function Kye(t){return qye.includes(t)}const Gye=/^url\(/;function Yye(t){return Gye.test(t)}function Eg(t=""){if(t==="")return{top:void 0,right:void 0,bottom:void 0,left:void 0};const n=WE(t),e=n[0],i=n[2]||e,s=n[1]||e,r=n[3]||s;return{top:e,bottom:i,right:s,left:r}}function Sg(t){return n=>{const{top:e,right:i,bottom:s,left:r}=n,o=[];return[e,i,r,s].every(a=>!!a)?o.push([t,Zye(n)]):(e&&o.push([t+"-top",e]),i&&o.push([t+"-right",i]),s&&o.push([t+"-bottom",s]),r&&o.push([t+"-left",r])),o}}function Zye({top:t,right:n,bottom:e,left:i}){const s=[];return i!==n?s.push(t,n,e,i):e!==t?s.push(t,n,e):n!==t?s.push(t,n):s.push(t),s.join(" ")}function iD(t){return n=>({path:t,value:Eg(n)})}function WE(t){const n=t.matchAll(Fye);return Array.from(n).map(e=>e[0])}function jE(t){t.setNormalizer("background",Xye()),t.setNormalizer("background-color",Jye()),t.setReducer("background",Qye()),t.setStyleRelation("background",["background-color"])}function Xye(){return t=>{const n={},e=WE(t);for(const i of e)Uye(i)?(n.repeat=n.repeat||[],n.repeat.push(i)):jye(i)?(n.position=n.position||[],n.position.push(i)):Kye(i)?n.attachment=i:tD(i)?n.color=i:Yye(i)&&(n.image=i);return{path:"background",value:n}}}function Jye(){return t=>({path:"background.color",value:t})}function Qye(){return t=>{const n=[];return n.push(["background-color",t.color]),n}}function sD(t){t.setNormalizer("border",e2e()),t.setNormalizer("border-top",yv("top")),t.setNormalizer("border-right",yv("right")),t.setNormalizer("border-bottom",yv("bottom")),t.setNormalizer("border-left",yv("left")),t.setNormalizer("border-color",M5("color")),t.setNormalizer("border-width",M5("width")),t.setNormalizer("border-style",M5("style")),t.setNormalizer("border-top-color",Wo("color","top")),t.setNormalizer("border-top-style",Wo("style","top")),t.setNormalizer("border-top-width",Wo("width","top")),t.setNormalizer("border-right-color",Wo("color","right")),t.setNormalizer("border-right-style",Wo("style","right")),t.setNormalizer("border-right-width",Wo("width","right")),t.setNormalizer("border-bottom-color",Wo("color","bottom")),t.setNormalizer("border-bottom-style",Wo("style","bottom")),t.setNormalizer("border-bottom-width",Wo("width","bottom")),t.setNormalizer("border-left-color",Wo("color","left")),t.setNormalizer("border-left-style",Wo("style","left")),t.setNormalizer("border-left-width",Wo("width","left")),t.setExtractor("border-top",Cv("top")),t.setExtractor("border-right",Cv("right")),t.setExtractor("border-bottom",Cv("bottom")),t.setExtractor("border-left",Cv("left")),t.setExtractor("border-top-color","border.color.top"),t.setExtractor("border-right-color","border.color.right"),t.setExtractor("border-bottom-color","border.color.bottom"),t.setExtractor("border-left-color","border.color.left"),t.setExtractor("border-top-width","border.width.top"),t.setExtractor("border-right-width","border.width.right"),t.setExtractor("border-bottom-width","border.width.bottom"),t.setExtractor("border-left-width","border.width.left"),t.setExtractor("border-top-style","border.style.top"),t.setExtractor("border-right-style","border.style.right"),t.setExtractor("border-bottom-style","border.style.bottom"),t.setExtractor("border-left-style","border.style.left"),t.setReducer("border-color",Sg("border-color")),t.setReducer("border-style",Sg("border-style")),t.setReducer("border-width",Sg("border-width")),t.setReducer("border-top",kv("top")),t.setReducer("border-right",kv("right")),t.setReducer("border-bottom",kv("bottom")),t.setReducer("border-left",kv("left")),t.setReducer("border",n2e()),t.setStyleRelation("border",["border-color","border-style","border-width","border-top","border-right","border-bottom","border-left","border-top-color","border-right-color","border-bottom-color","border-left-color","border-top-style","border-right-style","border-bottom-style","border-left-style","border-top-width","border-right-width","border-bottom-width","border-left-width"]),t.setStyleRelation("border-color",["border-top-color","border-right-color","border-bottom-color","border-left-color"]),t.setStyleRelation("border-style",["border-top-style","border-right-style","border-bottom-style","border-left-style"]),t.setStyleRelation("border-width",["border-top-width","border-right-width","border-bottom-width","border-left-width"]),t.setStyleRelation("border-top",["border-top-color","border-top-style","border-top-width"]),t.setStyleRelation("border-right",["border-right-color","border-right-style","border-right-width"]),t.setStyleRelation("border-bottom",["border-bottom-color","border-bottom-style","border-bottom-width"]),t.setStyleRelation("border-left",["border-left-color","border-left-style","border-left-width"])}function e2e(){return t=>{const{color:n,style:e,width:i}=rD(t);return{path:"border",value:{color:Eg(n),style:Eg(e),width:Eg(i)}}}}function yv(t){return n=>{const{color:e,style:i,width:s}=rD(n),r={};return e!==void 0&&(r.color={[t]:e}),i!==void 0&&(r.style={[t]:i}),s!==void 0&&(r.width={[t]:s}),{path:"border",value:r}}}function M5(t){return n=>({path:"border",value:t2e(n,t)})}function t2e(t,n){return{[n]:Eg(t)}}function Wo(t,n){return e=>({path:"border",value:{[t]:{[n]:e}}})}function Cv(t){return(n,e)=>{if(e.border)return Up(e.border,t)}}function Up(t,n){const e={};return t.width&&t.width[n]&&(e.width=t.width[n]),t.style&&t.style[n]&&(e.style=t.style[n]),t.color&&t.color[n]&&(e.color=t.color[n]),e}function rD(t){const n={},e=WE(t);for(const i of e)Yw(i)||/thin|medium|thick/.test(i)?n.width=i:Dye(i)?n.style=i:n.color=i;return n}function n2e(){return n=>{const e=Up(n,"top"),i=Up(n,"right"),s=Up(n,"bottom"),r=Up(n,"left"),o=[e,i,s,r],a={width:t(o,"width"),style:t(o,"style"),color:t(o,"color")},l=yf(a,"all");return l.length?l:[...Object.entries(a).reduce((u,[d,f])=>(f&&(u.push([`border-${d}`,f]),o.forEach(p=>delete p[d])),u),[]),...yf(e,"top"),...yf(i,"right"),...yf(s,"bottom"),...yf(r,"left")]};function t(n,e){return n.map(i=>i[e]).reduce((i,s)=>i==s?i:null)}}function kv(t){return n=>yf(n,t)}function yf(t,n){const e=[];if(t&&t.width&&e.push("width"),t&&t.style&&e.push("style"),t&&t.color&&e.push("color"),e.length==3){const i=e.map(s=>t[s]).join(" ");return[n=="all"?["border",i]:[`border-${n}`,i]]}return n=="all"?[]:e.map(i=>[`border-${n}-${i}`,t[i]])}function i2e(t){t.setNormalizer("margin",iD("margin")),t.setNormalizer("margin-top",n=>({path:"margin.top",value:n})),t.setNormalizer("margin-right",n=>({path:"margin.right",value:n})),t.setNormalizer("margin-bottom",n=>({path:"margin.bottom",value:n})),t.setNormalizer("margin-left",n=>({path:"margin.left",value:n})),t.setReducer("margin",Sg("margin")),t.setStyleRelation("margin",["margin-top","margin-right","margin-bottom","margin-left"])}function s2e(t){t.setNormalizer("padding",iD("padding")),t.setNormalizer("padding-top",n=>({path:"padding.top",value:n})),t.setNormalizer("padding-right",n=>({path:"padding.right",value:n})),t.setNormalizer("padding-bottom",n=>({path:"padding.bottom",value:n})),t.setNormalizer("padding-left",n=>({path:"padding.left",value:n})),t.setReducer("padding",Sg("padding")),t.setStyleRelation("padding",["padding-top","padding-right","padding-bottom","padding-left"])}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 *//**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class oD{constructor(n){w(this,"crashes",[]);w(this,"state","initializing");w(this,"_crashNumberLimit");w(this,"_now",Date.now);w(this,"_minimumNonErrorTimePeriod");w(this,"_boundErrorHandler");w(this,"_listeners");if(this.crashes=[],this._crashNumberLimit=typeof n.crashNumberLimit=="number"?n.crashNumberLimit:3,this._minimumNonErrorTimePeriod=typeof n.minimumNonErrorTimePeriod=="number"?n.minimumNonErrorTimePeriod:5e3,this._boundErrorHandler=e=>{const i="error"in e?e.error:e.reason;i instanceof Error&&this._handleError(i,e)},this._listeners={},!this._restart)throw new Error("The Watchdog class was split into the abstract `Watchdog` class and the `EditorWatchdog` class. Please, use `EditorWatchdog` if you have used the `Watchdog` class previously.")}destroy(){this._stopErrorHandling(),this._listeners={}}on(n,e){this._listeners[n]||(this._listeners[n]=[]),this._listeners[n].push(e)}off(n,e){this._listeners[n]=this._listeners[n].filter(i=>i!==e)}_fire(n,...e){const i=this._listeners[n]||[];for(const s of i)s.apply(this,[null,...e])}_startErrorHandling(){window.addEventListener("error",this._boundErrorHandler),window.addEventListener("unhandledrejection",this._boundErrorHandler)}_stopErrorHandling(){window.removeEventListener("error",this._boundErrorHandler),window.removeEventListener("unhandledrejection",this._boundErrorHandler)}_handleError(n,e){if(this._shouldReactToError(n)){this.crashes.push({message:n.message,stack:n.stack,filename:e instanceof ErrorEvent?e.filename:void 0,lineno:e instanceof ErrorEvent?e.lineno:void 0,colno:e instanceof ErrorEvent?e.colno:void 0,date:this._now()});const i=this._shouldRestart();this.state="crashed",this._fire("stateChange"),this._fire("error",{error:n,causesRestart:i}),i?this._restart():(this.state="crashedPermanently",this._fire("stateChange"))}}_shouldReactToError(n){return n.is&&n.is("CKEditorError")&&n.context!==void 0&&n.context!==null&&this.state==="ready"&&this._isErrorComingFromThisItem(n)}_shouldRestart(){if(this.crashes.length<=this._crashNumberLimit)return!0;const n=this.crashes[this.crashes.length-1].date,e=this.crashes[this.crashes.length-1-this._crashNumberLimit].date;return(n-e)/this._crashNumberLimit>this._minimumNonErrorTimePeriod}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function JC(t,n=new Set){const e=[t],i=new Set;let s=0;for(;e.length>s;){const r=e[s++];if(!(i.has(r)||!r2e(r)||n.has(r)))if(i.add(r),Symbol.iterator in r)try{for(const o of r)e.push(o)}catch{}else for(const o in r)o!=="defaultValue"&&e.push(r[o])}return i}function r2e(t){const n=Object.prototype.toString.call(t),e=typeof t;return!(e==="number"||e==="boolean"||e==="string"||e==="symbol"||e==="function"||n==="[object Date]"||n==="[object RegExp]"||n==="[object Module]"||t===void 0||t===null||t._watchdogExcluded||t instanceof EventTarget||t instanceof Event)}function aD(t,n,e=new Set){if(t===n&&o2e(t))return!0;const i=JC(t,e),s=JC(n,e);for(const r of i)if(s.has(r))return!0;return!1}function o2e(t){return typeof t=="object"&&t!==null}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class lD extends oD{constructor(e,i={}){super(i);w(this,"_editor",null);w(this,"_lifecyclePromise",null);w(this,"_throttledSave");w(this,"_data");w(this,"_lastDocumentVersion");w(this,"_elementOrData");w(this,"_initUsingData",!0);w(this,"_editables",{});w(this,"_config");w(this,"_excludedProps");this._throttledSave=Jf(this._save.bind(this),typeof i.saveInterval=="number"?i.saveInterval:5e3),e&&(this._creator=(s,r)=>e.create(s,r)),this._destructor=s=>s.destroy()}get editor(){return this._editor}get _item(){return this._editor}setCreator(e){this._creator=e}setDestructor(e){this._destructor=e}_restart(){return Promise.resolve().then(()=>(this.state="initializing",this._fire("stateChange"),this._destroy())).catch(e=>{console.error("An error happened during the editor destroying.",e)}).then(()=>{const e={},i=[],s=this._config.rootsAttributes||{},r={};for(const[a,l]of Object.entries(this._data.roots))l.isLoaded?(e[a]="",r[a]=s[a]||{}):i.push(a);const o={...this._config,extraPlugins:this._config.extraPlugins||[],lazyRoots:i,rootsAttributes:r,_watchdogInitialData:this._data};return delete o.initialData,o.extraPlugins.push(a2e),this._initUsingData?this.create(e,o,o.context):hh(this._elementOrData)?this.create(this._elementOrData,o,o.context):this.create(this._editables,o,o.context)}).then(()=>{this._fire("restart")})}create(e=this._elementOrData,i=this._config,s){return this._lifecyclePromise=Promise.resolve(this._lifecyclePromise).then(()=>(super._startErrorHandling(),this._elementOrData=e,this._initUsingData=typeof e=="string"||Object.keys(e).length>0&&typeof Object.values(e)[0]=="string",this._config=this._cloneEditorConfiguration(i)||{},this._config.context=s,this._creator(e,this._config))).then(r=>{this._editor=r,r.model.document.on("change:data",this._throttledSave),this._lastDocumentVersion=r.model.document.version,this._data=this._getData(),this._initUsingData||(this._editables=this._getEditables()),this.state="ready",this._fire("stateChange")}).finally(()=>{this._lifecyclePromise=null}),this._lifecyclePromise}destroy(){return this._lifecyclePromise=Promise.resolve(this._lifecyclePromise).then(()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy())).finally(()=>{this._lifecyclePromise=null}),this._lifecyclePromise}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling(),this._throttledSave.cancel();const e=this._editor;return this._editor=null,e.model.document.off("change:data",this._throttledSave),this._destructor(e)})}_save(){const e=this._editor.model.document.version;try{this._data=this._getData(),this._initUsingData||(this._editables=this._getEditables()),this._lastDocumentVersion=e}catch(i){console.error(i,"An error happened during restoring editor data. Editor will be restored from the previously saved data.")}}_setExcludedProperties(e){this._excludedProps=e}_getData(){const e=this._editor,i=e.model.document.roots.filter(l=>l.isAttached()&&l.rootName!="$graveyard"),{plugins:s}=e,r=s.has("CommentsRepository")&&s.get("CommentsRepository"),o=s.has("TrackChanges")&&s.get("TrackChanges"),a={roots:{},markers:{},commentThreads:JSON.stringify([]),suggestions:JSON.stringify([])};i.forEach(l=>{a.roots[l.rootName]={content:JSON.stringify(Array.from(l.getChildren())),attributes:JSON.stringify(Array.from(l.getAttributes())),isLoaded:l._isLoaded}});for(const l of e.model.markers)l._affectsData&&(a.markers[l.name]={rangeJSON:l.getRange().toJSON(),usingOperation:l._managedUsingOperations,affectsData:l._affectsData});return r&&(a.commentThreads=JSON.stringify(r.getCommentThreads({toJSON:!0,skipNotAttached:!0}))),o&&(a.suggestions=JSON.stringify(o.getSuggestions({toJSON:!0,skipNotAttached:!0}))),a}_getEditables(){const e={};for(const i of this.editor.model.document.getRootNames()){const s=this.editor.ui.getEditableElement(i);s&&(e[i]=s)}return e}_isErrorComingFromThisItem(e){return aD(this._editor,e.context,this._excludedProps)}_cloneEditorConfiguration(e){return W4(e,(i,s)=>{if(hh(i)||s==="context")return i})}}class a2e{constructor(n){w(this,"editor");w(this,"_data");this.editor=n,this._data=n.config.get("_watchdogInitialData")}init(){this.editor.data.on("init",n=>{n.stop(),this.editor.model.enqueueChange({isUndoable:!1},e=>{this._restoreCollaborationData(),this._restoreEditorData(e)}),this.editor.data.fire("ready")},{priority:999})}_createNode(n,e){if("name"in e){const i=n.createElement(e.name,e.attributes);if(e.children)for(const s of e.children)i._appendChild(this._createNode(n,s));return i}else return n.createText(e.data,e.attributes)}_restoreEditorData(n){const e=this.editor;Object.entries(this._data.roots).forEach(([i,{content:s,attributes:r}])=>{const o=JSON.parse(s),a=JSON.parse(r),l=e.model.document.getRoot(i);for(const[c,u]of a)n.setAttribute(c,u,l);for(const c of o){const u=this._createNode(n,c);n.insert(u,l,"end")}}),Object.entries(this._data.markers).forEach(([i,s])=>{const{document:r}=e.model,{rangeJSON:{start:o,end:a},...l}=s,c=r.getRoot(o.root),u=n.createPositionFromPath(c,o.path,o.stickiness),d=n.createPositionFromPath(c,a.path,a.stickiness),f=n.createRange(u,d);n.addMarker(i,{range:f,...l})})}_restoreCollaborationData(){const n=JSON.parse(this._data.commentThreads),e=JSON.parse(this._data.suggestions);n.forEach(i=>{const s=this.editor.config.get("collaboration.channelId"),r=this.editor.plugins.get("CommentsRepository");r.hasCommentThread(i.threadId)&&r.getCommentThread(i.threadId).remove(),r.addCommentThread({channelId:s,...i})}),e.forEach(i=>{const s=this.editor.plugins.get("TrackChangesEditing");if(s.hasSuggestion(i.id)){const r=s.getSuggestion(i.id);r.attributes=i.attributes}else s.addSuggestionData(i)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Tg=Symbol("MainQueueId");class l2e extends oD{constructor(e,i={}){super(i);w(this,"_watchdogs",new Map);w(this,"_watchdogConfig");w(this,"_context",null);w(this,"_contextProps",new Set);w(this,"_actionQueues",new c2e);w(this,"_contextConfig");w(this,"_item");this._watchdogConfig=i,this._creator=s=>e.create(s),this._destructor=s=>s.destroy(),this._actionQueues.onEmpty(()=>{this.state==="initializing"&&(this.state="ready",this._fire("stateChange"))})}setCreator(e){this._creator=e}setDestructor(e){this._destructor=e}get context(){return this._context}create(e={}){return this._actionQueues.enqueue(Tg,()=>(this._contextConfig=e,this._create()))}getItem(e){return this._getWatchdog(e)._item}getItemState(e){return this._getWatchdog(e).state}add(e){const i=$I(e);return Promise.all(i.map(s=>this._actionQueues.enqueue(s.id,()=>{if(this.state==="destroyed")throw new Error("Cannot add items to destroyed watchdog.");if(!this._context)throw new Error("Context was not created yet. You should call the `ContextWatchdog#create()` method first.");let r;if(this._watchdogs.has(s.id))throw new Error(`Item with the given id is already added: '${s.id}'.`);if(s.type==="editor")return r=new lD(null,this._watchdogConfig),r.setCreator(s.creator),r._setExcludedProperties(this._contextProps),s.destructor&&r.setDestructor(s.destructor),this._watchdogs.set(s.id,r),r.on("error",(o,{error:a,causesRestart:l})=>{this._fire("itemError",{itemId:s.id,error:a}),l&&this._actionQueues.enqueue(s.id,()=>new Promise(c=>{const u=()=>{r.off("restart",u),this._fire("itemRestart",{itemId:s.id}),c()};r.on("restart",u)}))}),r.create(s.sourceElementOrData,s.config,this._context);throw new Error(`Not supported item type: '${s.type}'.`)})))}remove(e){const i=$I(e);return Promise.all(i.map(s=>this._actionQueues.enqueue(s,()=>{const r=this._getWatchdog(s);return this._watchdogs.delete(s),r.destroy()})))}destroy(){return this._actionQueues.enqueue(Tg,()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy()))}_restart(){return this._actionQueues.enqueue(Tg,()=>(this.state="initializing",this._fire("stateChange"),this._destroy().catch(e=>{console.error("An error happened during destroying the context or items.",e)}).then(()=>this._create()).then(()=>this._fire("restart"))))}_create(){return Promise.resolve().then(()=>(this._startErrorHandling(),this._creator(this._contextConfig))).then(e=>(this._context=e,this._contextProps=JC(this._context),Promise.all(Array.from(this._watchdogs.values()).map(i=>(i._setExcludedProperties(this._contextProps),i.create(void 0,void 0,this._context))))))}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling();const e=this._context;return this._context=null,this._contextProps=new Set,Promise.all(Array.from(this._watchdogs.values()).map(i=>i.destroy())).then(()=>this._destructor(e))})}_getWatchdog(e){const i=this._watchdogs.get(e);if(!i)throw new Error(`Item with the given id was not registered: ${e}.`);return i}_isErrorComingFromThisItem(e){for(const i of this._watchdogs.values())if(i._isErrorComingFromThisItem(e))return!1;return aD(this._context,e.context)}}class c2e{constructor(){w(this,"_onEmptyCallbacks",[]);w(this,"_queues",new Map);w(this,"_activeActions",0)}onEmpty(n){this._onEmptyCallbacks.push(n)}enqueue(n,e){const i=n===Tg;this._activeActions++,this._queues.get(n)||this._queues.set(n,Promise.resolve());const r=(i?Promise.all(this._queues.values()):Promise.all([this._queues.get(Tg),this._queues.get(n)])).then(e),o=r.catch(()=>{});return this._queues.set(n,o),r.finally(()=>{this._activeActions--,this._queues.get(n)===o&&this._activeActions===0&&this._onEmptyCallbacks.forEach(a=>a())})}}function $I(t){return Array.isArray(t)?t:[t]}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Be extends li(){constructor(e){super();w(this,"editor");w(this,"_disableStack",new Set);this.editor=e,this.set("isEnabled",!0)}forceDisabled(e){this._disableStack.add(e),this._disableStack.size==1&&(this.on("set:isEnabled",zI,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(e){this._disableStack.delete(e),this._disableStack.size==0&&(this.off("set:isEnabled",zI),this.isEnabled=!0)}destroy(){this.stopListening()}static get isContextPlugin(){return!1}}function zI(t){t.return=!1,t.stop()}class en extends li(){constructor(e){super();w(this,"editor");w(this,"_isEnabledBasedOnSelection");w(this,"_affectsData");w(this,"_disableStack");this.editor=e,this.set("value",void 0),this.set("isEnabled",!1),this._affectsData=!0,this._isEnabledBasedOnSelection=!0,this._disableStack=new Set,this.decorate("execute"),this.listenTo(this.editor.model.document,"change",()=>{this.refresh()}),this.listenTo(e,"change:isReadOnly",()=>{this.refresh()}),this.on("set:isEnabled",i=>{if(!this.affectsData)return;const s=e.model.document.selection,o=!(s.getFirstPosition().root.rootName=="$graveyard")&&e.model.canEditAt(s);(e.isReadOnly||this._isEnabledBasedOnSelection&&!o)&&(i.return=!1,i.stop())},{priority:"highest"}),this.on("execute",i=>{this.isEnabled||i.stop()},{priority:"high"})}get affectsData(){return this._affectsData}set affectsData(e){this._affectsData=e}refresh(){this.isEnabled=!0}forceDisabled(e){this._disableStack.add(e),this._disableStack.size==1&&(this.on("set:isEnabled",HI,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(e){this._disableStack.delete(e),this._disableStack.size==0&&(this.off("set:isEnabled",HI),this.refresh())}execute(...e){}destroy(){this.stopListening()}}function HI(t){t.return=!1,t.stop()}class UI extends en{constructor(){super(...arguments);w(this,"_childCommandsDefinitions",[])}refresh(){}execute(...e){const i=this._getFirstEnabledCommand();return!!i&&i.execute(e)}registerChildCommand(e,i={}){qN(this._childCommandsDefinitions,{command:e,priority:i.priority||"normal"}),e.on("change:isEnabled",()=>this._checkEnabled()),this._checkEnabled()}_checkEnabled(){this.isEnabled=!!this._getFirstEnabledCommand()}_getFirstEnabledCommand(){const e=this._childCommandsDefinitions.find(({command:i})=>i.isEnabled);return e&&e.command}}class cD extends Ti(){constructor(e,i=[],s=[]){super();w(this,"_context");w(this,"_plugins",new Map);w(this,"_availablePlugins");w(this,"_contextPlugins");this._context=e,this._availablePlugins=new Map;for(const r of i)r.pluginName&&this._availablePlugins.set(r.pluginName,r);this._contextPlugins=new Map;for(const[r,o]of s)this._contextPlugins.set(r,o),this._contextPlugins.set(o,r),r.pluginName&&this._availablePlugins.set(r.pluginName,r)}*[Symbol.iterator](){for(const e of this._plugins)typeof e[0]=="function"&&(yield e)}get(e){const i=this._plugins.get(e);if(!i){let s=e;throw typeof e=="function"&&(s=e.pluginName||e.name),new fe("plugincollection-plugin-not-loaded",this._context,{plugin:s})}return i}has(e){return this._plugins.has(e)}init(e,i=[],s=[]){const r=this,o=this._context;m(e),y(e);const a=e.filter(k=>!f(k,i)),l=[...v(a)];I(l,s);const c=x(l);return A(c,"init").then(()=>A(c,"afterInit")).then(()=>c);function u(k){return typeof k=="function"}function d(k){return u(k)&&!!k.isContextPlugin}function f(k,O){return O.some(M=>M===k||p(k)===M||p(M)===k)}function p(k){return u(k)?k.pluginName||k.name:k}function m(k,O=new Set){k.forEach(M=>{u(M)&&(O.has(M)||(O.add(M),M.pluginName&&!r._availablePlugins.has(M.pluginName)&&r._availablePlugins.set(M.pluginName,M),M.requires&&m(M.requires,O)))})}function v(k,O=new Set){return k.map(M=>u(M)?M:r._availablePlugins.get(M)).reduce((M,T)=>O.has(T)?M:(O.add(T),T.requires&&(y(T.requires,T),v(T.requires,O).forEach(P=>M.add(P))),M.add(T)),new Set)}function y(k,O=null){k.map(M=>u(M)?M:r._availablePlugins.get(M)||M).forEach(M=>{_(M,O),b(M,O),E(M,O)})}function _(k,O){if(!u(k))throw O?new fe("plugincollection-soft-required",o,{missingPlugin:k,requiredBy:p(O)}):new fe("plugincollection-plugin-not-found",o,{plugin:k})}function b(k,O){if(d(O)&&!d(k))throw new fe("plugincollection-context-required",o,{plugin:p(k),requiredBy:p(O)})}function E(k,O){if(O&&f(k,i))throw new fe("plugincollection-required",o,{plugin:p(k),requiredBy:p(O)})}function x(k){return k.map(O=>{let M=r._contextPlugins.get(O);return M=M||new O(o),r._add(O,M),M})}function A(k,O){return k.reduce((M,T)=>!T[O]||r._contextPlugins.has(T)?M:M.then(T[O].bind(T)),Promise.resolve())}function I(k,O){for(const M of O){if(typeof M!="function")throw new fe("plugincollection-replace-plugin-invalid-type",null,{pluginItem:M});const T=M.pluginName;if(!T)throw new fe("plugincollection-replace-plugin-missing-name",null,{pluginItem:M});if(M.requires&&M.requires.length)throw new fe("plugincollection-plugin-for-replacing-cannot-have-dependencies",null,{pluginName:T});const P=r._availablePlugins.get(T);if(!P)throw new fe("plugincollection-plugin-for-replacing-not-exist",null,{pluginName:T});const R=k.indexOf(P);if(R===-1){if(r._contextPlugins.has(P))return;throw new fe("plugincollection-plugin-for-replacing-not-loaded",null,{pluginName:T})}if(P.requires&&P.requires.length)throw new fe("plugincollection-replaced-plugin-cannot-have-dependencies",null,{pluginName:T});k.splice(R,1,M),r._availablePlugins.set(T,M)}}}destroy(){const e=[];for(const[,i]of this)typeof i.destroy=="function"&&!this._contextPlugins.has(i)&&e.push(i.destroy());return Promise.all(e)}_add(e,i){this._plugins.set(e,i);const s=e.pluginName;if(s){if(this._plugins.has(s))throw new fe("plugincollection-plugin-name-conflict",null,{pluginName:s,plugin1:this._plugins.get(s).constructor,plugin2:e});this._plugins.set(s,i)}}}class k_{constructor(n){w(this,"config");w(this,"plugins");w(this,"locale");w(this,"t");w(this,"editors");w(this,"_contextOwner",null);const{translations:e,...i}=n||{};this.config=new eV(i,this.constructor.defaultConfig);const s=this.constructor.builtinPlugins;this.config.define("plugins",s),this.plugins=new cD(this,s);const r=this.config.get("language")||{};this.locale=new Kve({uiLanguage:typeof r=="string"?r:r.ui,contentLanguage:this.config.get("language.content"),translations:e}),this.t=this.locale.t,this.editors=new _s}initPlugins(){const n=this.config.get("plugins")||[],e=this.config.get("substitutePlugins")||[];for(const i of n.concat(e)){if(typeof i!="function")throw new fe("context-initplugins-constructor-only",null,{Plugin:i});if(i.isContextPlugin!==!0)throw new fe("context-initplugins-invalid-plugin",null,{Plugin:i})}return this.plugins.init(n,[],e)}destroy(){return Promise.all(Array.from(this.editors,n=>n.destroy())).then(()=>this.plugins.destroy())}_addEditor(n,e){if(this._contextOwner)throw new fe("context-addeditor-private-context");this.editors.add(n),e&&(this._contextOwner=n)}_removeEditor(n){return this.editors.has(n)&&this.editors.remove(n),this._contextOwner===n?this.destroy():Promise.resolve()}_getEditorConfig(){const n={};for(const e of this.config.names())["plugins","removePlugins","extraPlugins"].includes(e)||(n[e]=this.config.get(e));return n}static create(n){return new Promise(e=>{const i=new this(n);e(i.initPlugins().then(()=>i))})}}w(k_,"defaultConfig"),w(k_,"builtinPlugins");class uD extends li(){constructor(e){super();w(this,"context");this.context=e}destroy(){this.stopListening()}static get isContextPlugin(){return!0}}class u2e{constructor(){w(this,"_commands");this._commands=new Map}add(n,e){this._commands.set(n,e)}get(n){return this._commands.get(n)}execute(n,...e){const i=this.get(n);if(!i)throw new fe("commandcollection-command-not-found",this,{commandName:n});return i.execute(...e)}*names(){yield*this._commands.keys()}*commands(){yield*this._commands.values()}[Symbol.iterator](){return this._commands[Symbol.iterator]()}destroy(){for(const n of this.commands())n.destroy()}}class d2e extends Zi{constructor(e){super();w(this,"editor");this.editor=e}set(e,i,s={}){if(typeof i=="string"){const r=i;i=(o,a)=>{this.editor.execute(r),a()}}super.set(e,i,s)}}const P5="contentEditing",WI="common";class h2e{constructor(n){w(this,"keystrokeInfos",new Map);w(this,"_editor");this._editor=n;const e=n.config.get("menuBar.isVisible"),i=n.locale.t;this.addKeystrokeInfoCategory({id:P5,label:i("Content editing keystrokes"),description:i("These keyboard shortcuts allow for quick access to content editing features.")});const s=[{label:i("Close contextual balloons, dropdowns, and dialogs"),keystroke:"Esc"},{label:i("Open the accessibility help dialog"),keystroke:"Alt+0"},{label:i("Move focus between form fields (inputs, buttons, etc.)"),keystroke:[["Tab"],["Shift+Tab"]]},{label:i("Move focus to the toolbar, navigate between toolbars"),keystroke:"Alt+F10",mayRequireFn:!0},{label:i("Navigate through the toolbar or menu bar"),keystroke:[["arrowup"],["arrowright"],["arrowdown"],["arrowleft"]]},{label:i("Execute the currently focused button. Executing buttons that interact with the editor content moves the focus back to the content."),keystroke:[["Enter"],["Space"]]}];e&&s.push({label:i("Move focus to the menu bar, navigate between menu bars"),keystroke:"Alt+F9",mayRequireFn:!0}),this.addKeystrokeInfoCategory({id:"navigation",label:i("User interface and content navigation keystrokes"),description:i("Use the following keystrokes for more efficient navigation in the CKEditor 5 user interface."),groups:[{id:"common",keystrokes:s}]})}addKeystrokeInfoCategory({id:n,label:e,description:i,groups:s}){this.keystrokeInfos.set(n,{id:n,label:e,description:i,groups:new Map}),this.addKeystrokeInfoGroup({categoryId:n,id:WI}),s&&s.forEach(r=>{this.addKeystrokeInfoGroup({categoryId:n,...r})})}addKeystrokeInfoGroup({categoryId:n=P5,id:e,label:i,keystrokes:s}){const r=this.keystrokeInfos.get(n);if(!r)throw new fe("accessibility-unknown-keystroke-info-category",this._editor,{groupId:e,categoryId:n});r.groups.set(e,{id:e,label:i,keystrokes:s||[]})}addKeystrokeInfos({categoryId:n=P5,groupId:e=WI,keystrokes:i}){if(!this.keystrokeInfos.has(n))throw new fe("accessibility-unknown-keystroke-info-category",this._editor,{categoryId:n,keystrokes:i});const s=this.keystrokeInfos.get(n);if(!s.groups.has(e))throw new fe("accessibility-unknown-keystroke-info-group",this._editor,{groupId:e,categoryId:n,keystrokes:i});s.groups.get(e).keystrokes.push(...i)}}class Cf extends li(){constructor(e={}){super();w(this,"accessibility");w(this,"commands");w(this,"config");w(this,"conversion");w(this,"data");w(this,"editing");w(this,"locale");w(this,"model");w(this,"plugins");w(this,"keystrokes");w(this,"t");w(this,"_context");w(this,"_readOnlyLocks");const i=this.constructor,{translations:s,...r}=i.defaultConfig||{},{translations:o=s,...a}=e,l=e.language||r.language;this._context=e.context||new k_({language:l,translations:o}),this._context._addEditor(this,!e.context);const c=Array.from(i.builtinPlugins||[]);this.config=new eV(a,r),this.config.define("plugins",c),this.config.define(this._context._getEditorConfig()),this.plugins=new cD(this,c,this._context.plugins),this.locale=this._context.locale,this.t=this.locale.t,this._readOnlyLocks=new Set,this.commands=new u2e,this.set("state","initializing"),this.once("ready",()=>this.state="ready",{priority:"high"}),this.once("destroy",()=>this.state="destroyed",{priority:"high"}),this.model=new Iye,this.on("change:isReadOnly",()=>{this.model.document.isReadOnly=this.isReadOnly});const u=new gbe;this.data=new Dwe(this.model,u),this.editing=new mwe(this.model,u),this.editing.view.document.bind("isReadOnly").to(this),this.conversion=new zwe([this.editing.downcastDispatcher,this.data.downcastDispatcher],this.data.upcastDispatcher),this.conversion.addAlias("dataDowncast",this.data.downcastDispatcher),this.conversion.addAlias("editingDowncast",this.editing.downcastDispatcher),this.keystrokes=new d2e(this),this.keystrokes.listenTo(this.editing.view.document),this.accessibility=new h2e(this)}get isReadOnly(){return this._readOnlyLocks.size>0}set isReadOnly(e){throw new fe("editor-isreadonly-has-no-setter")}enableReadOnlyMode(e){if(typeof e!="string"&&typeof e!="symbol")throw new fe("editor-read-only-lock-id-invalid",null,{lockId:e});this._readOnlyLocks.has(e)||(this._readOnlyLocks.add(e),this._readOnlyLocks.size===1&&this.fire("change:isReadOnly","isReadOnly",!0,!1))}disableReadOnlyMode(e){if(typeof e!="string"&&typeof e!="symbol")throw new fe("editor-read-only-lock-id-invalid",null,{lockId:e});this._readOnlyLocks.has(e)&&(this._readOnlyLocks.delete(e),this._readOnlyLocks.size===0&&this.fire("change:isReadOnly","isReadOnly",!1,!0))}setData(e){this.data.set(e)}getData(e){return this.data.get(e)}initPlugins(){const e=this.config,i=e.get("plugins"),s=e.get("removePlugins")||[],r=e.get("extraPlugins")||[],o=e.get("substitutePlugins")||[];return this.plugins.init(i.concat(r),s,o)}destroy(){let e=Promise.resolve();return this.state=="initializing"&&(e=new Promise(i=>this.once("ready",i))),e.then(()=>{this.fire("destroy"),this.stopListening(),this.commands.destroy()}).then(()=>this.plugins.destroy()).then(()=>{this.model.destroy(),this.data.destroy(),this.editing.destroy(),this.keystrokes.destroy()}).then(()=>this._context._removeEditor(this))}execute(e,...i){try{return this.commands.execute(e,...i)}catch(s){/* istanbul ignore next -- @preserve */fe.rethrowUnexpectedError(s,this)}}focus(){this.editing.view.focus()}static create(...e){throw new Error("This is an abstract method.")}}w(Cf,"defaultConfig"),w(Cf,"builtinPlugins"),w(Cf,"Context",k_),w(Cf,"EditorWatchdog",lD),w(Cf,"ContextWatchdog",l2e);function QC(t){class n extends t{constructor(){super(...arguments);w(this,"sourceElement")}updateSourceElement(s){if(!this.sourceElement)throw new fe("editor-missing-sourceelement",this);const r=this.config.get("updateSourceElementOnDestroy"),o=this.sourceElement instanceof HTMLTextAreaElement;if(!r&&!o){Z9(this.sourceElement,"");return}const a=typeof s=="string"?s:this.data.get();Z9(this.sourceElement,a)}}return n}QC.updateSourceElement=QC(Object).prototype.updateSourceElement;function f2e(t,n){if(n.ckeditorInstance)throw new fe("editor-source-element-already-used",t);n.ckeditorInstance=t,t.once("destroy",()=>{delete n.ckeditorInstance})}class E_ extends uD{constructor(){super(...arguments);w(this,"_actions")}static get pluginName(){return"PendingActions"}init(){this.set("hasAny",!1),this._actions=new _s({idProperty:"_id"}),this._actions.delegate("add","remove").to(this)}add(e){if(typeof e!="string")throw new fe("pendingactions-add-invalid-message",this);const i=new(li());return i.set("message",e),this._actions.add(i),this.hasAny=!0,i}remove(e){this._actions.remove(e),this.hasAny=!!this._actions.length}get first(){return this._actions.get(0)}[Symbol.iterator](){return this._actions[Symbol.iterator]()}}var m2e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.591 10.177 4.243 4.242a1 1 0 0 1-1.415 1.415l-4.242-4.243-4.243 4.243a1 1 0 0 1-1.414-1.415l4.243-4.242L4.52 5.934A1 1 0 0 1 5.934 4.52l4.243 4.243 4.242-4.243a1 1 0 1 1 1.415 1.414l-4.243 4.243z"/></svg>',p2e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 16h9a1 1 0 0 1 0 2H2a1 1 0 0 1 0-2z"/><path d="M17 1a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h14zm0 1.5H3a.5.5 0 0 0-.492.41L2.5 3v9a.5.5 0 0 0 .41.492L3 12.5h14a.5.5 0 0 0 .492-.41L17.5 12V3a.5.5 0 0 0-.41-.492L17 2.5z" fill-opacity=".6"/></svg>',g2e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.972 16.615a.997.997 0 0 1-.744-.292l-4.596-4.596a1 1 0 1 1 1.414-1.414l3.926 3.926 9.937-9.937a1 1 0 0 1 1.414 1.415L7.717 16.323a.997.997 0 0 1-.745.292z"/></svg>',v2e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.333 2 .19 2.263a5.899 5.899 0 0 1 1.458.604L14.714 3.4 16.6 5.286l-1.467 1.733c.263.452.468.942.605 1.46L18 8.666v2.666l-2.263.19a5.899 5.899 0 0 1-.604 1.458l1.467 1.733-1.886 1.886-1.733-1.467a5.899 5.899 0 0 1-1.46.605L11.334 18H8.667l-.19-2.263a5.899 5.899 0 0 1-1.458-.604L5.286 16.6 3.4 14.714l1.467-1.733a5.899 5.899 0 0 1-.604-1.458L2 11.333V8.667l2.262-.189a5.899 5.899 0 0 1 .605-1.459L3.4 5.286 5.286 3.4l1.733 1.467a5.899 5.899 0 0 1 1.46-.605L8.666 2h2.666zM10 6.267a3.733 3.733 0 1 0 0 7.466 3.733 3.733 0 0 0 0-7.466z"/></svg>',b2e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.209 18.717A8.5 8.5 0 1 1 18.686 9.6h-.008l.002.12a3 3 0 0 1-2.866 2.997h-.268l-.046-.002v.002h-4.791a2 2 0 1 0 0 4 1 1 0 1 1-.128 1.992 8.665 8.665 0 0 1-.372.008Zm-3.918-7.01a1.25 1.25 0 1 0-2.415-.648 1.25 1.25 0 0 0 2.415.647ZM5.723 8.18a1.25 1.25 0 1 0 .647-2.414 1.25 1.25 0 0 0-.647 2.414ZM9.76 6.155a1.25 1.25 0 1 0 .647-2.415 1.25 1.25 0 0 0-.647 2.415Zm4.028 1.759a1.25 1.25 0 1 0 .647-2.415 1.25 1.25 0 0 0-.647 2.415Z"/></svg>',_2e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m8.636 9.531-2.758 3.94a.5.5 0 0 0 .122.696l3.224 2.284h1.314l2.636-3.736L8.636 9.53zm.288 8.451L5.14 15.396a2 2 0 0 1-.491-2.786l6.673-9.53a2 2 0 0 1 2.785-.49l3.742 2.62a2 2 0 0 1 .491 2.785l-7.269 10.053-2.147-.066z"/><path d="M4 18h5.523v-1H4zm-2 0h1v-1H2z"/></svg>',w2e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11 1a9 9 0 1 1-8.027 13.075l1.128-1.129A7.502 7.502 0 0 0 18.5 10a7.5 7.5 0 1 0-14.962.759l-.745-.746-.76.76A9 9 0 0 1 11 1z"/><path d="M.475 8.17a.75.75 0 0 1 .978.047l.075.082 1.284 1.643 1.681-1.284a.75.75 0 0 1 .978.057l.073.083a.75.75 0 0 1-.057.978l-.083.073-2.27 1.737a.75.75 0 0 1-.973-.052l-.074-.082-1.741-2.23a.75.75 0 0 1 .13-1.052z"/><path d="M11.5 5v4.999l3.196 3.196-1.06 1.06L10.1 10.72l-.1-.113V5z"/></svg>',y2e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5.085 6.22 2.943 4.078a.75.75 0 1 1 1.06-1.06l2.592 2.59A11.094 11.094 0 0 1 10 5.068c4.738 0 8.578 3.101 8.578 5.083 0 1.197-1.401 2.803-3.555 3.887l1.714 1.713a.75.75 0 0 1-.09 1.138.488.488 0 0 1-.15.084.75.75 0 0 1-.821-.16L6.17 7.304c-.258.11-.51.233-.757.365l6.239 6.24-.006.005.78.78c-.388.094-.78.166-1.174.215l-1.11-1.11h.011L4.55 8.197a7.2 7.2 0 0 0-.665.514l-.112.098 4.897 4.897-.005.006 1.276 1.276a10.164 10.164 0 0 1-1.477-.117l-.479-.479-.009.009-4.863-4.863-.022.031a2.563 2.563 0 0 0-.124.2c-.043.077-.08.158-.108.241a.534.534 0 0 0-.028.133.29.29 0 0 0 .008.072.927.927 0 0 0 .082.226c.067.133.145.26.234.379l3.242 3.365.025.01.59.623c-3.265-.918-5.59-3.155-5.59-4.668 0-1.194 1.448-2.838 3.663-3.93zm7.07.531a4.632 4.632 0 0 1 1.108 5.992l.345.344.046-.018a9.313 9.313 0 0 0 2-1.112c.256-.187.5-.392.727-.613.137-.134.27-.277.392-.431.072-.091.141-.185.203-.286.057-.093.107-.19.148-.292a.72.72 0 0 0 .036-.12.29.29 0 0 0 .008-.072.492.492 0 0 0-.028-.133.999.999 0 0 0-.036-.096 2.165 2.165 0 0 0-.071-.145 2.917 2.917 0 0 0-.125-.2 3.592 3.592 0 0 0-.263-.335 5.444 5.444 0 0 0-.53-.523 7.955 7.955 0 0 0-1.054-.768 9.766 9.766 0 0 0-1.879-.891c-.337-.118-.68-.219-1.027-.301zm-2.85.21-.069.002a.508.508 0 0 0-.254.097.496.496 0 0 0-.104.679.498.498 0 0 0 .326.199l.045.005c.091.003.181.003.272.012a2.45 2.45 0 0 1 2.017 1.513c.024.061.043.125.069.185a.494.494 0 0 0 .45.287h.008a.496.496 0 0 0 .35-.158.482.482 0 0 0 .13-.335.638.638 0 0 0-.048-.219 3.379 3.379 0 0 0-.36-.723 3.438 3.438 0 0 0-2.791-1.543l-.028-.001h-.013z"/></svg>',C2e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.035 1C2.446 1 2 1.54 2 2.098V10.5h1.5v-8h13v8H18V2.098C18 1.539 17.48 1 16.9 1H3.035Zm10.453 2.61a1.885 1.885 0 0 0-1.442.736 1.89 1.89 0 0 0 1.011 2.976 1.903 1.903 0 0 0 2.253-1.114 1.887 1.887 0 0 0-1.822-2.598ZM7.463 8.163a.611.611 0 0 0-.432.154L5.071 10.5h5.119L7.88 8.348a.628.628 0 0 0-.417-.185Zm6.236 1.059a.62.62 0 0 0-.42.164L12.07 10.5h2.969l-.92-1.113a.618.618 0 0 0-.42-.165ZM.91 11.5a.91.91 0 0 0-.91.912v6.877c0 .505.405.91.91.91h18.178a.91.91 0 0 0 .912-.91v-6.877a.908.908 0 0 0-.912-.912H.91ZM3.668 13h1.947l2.135 5.7H5.898l-.28-.946H3.601l-.278.945H1.516L3.668 13Zm4.947 0h1.801v4.3h2.7v1.4h-4.5V13h-.001Zm4.5 0h5.4v1.4h-1.798v4.3h-1.701v-4.3h-1.9V13h-.001Zm-8.517 1.457-.614 2.059h1.262l-.648-2.059Z"/></svg>',k2e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.68 13.74h-.001l4.209 4.208a1 1 0 1 0 1.414-1.414l-4.267-4.268a6 6 0 1 0-1.355 1.474ZM13 9a4 4 0 1 1-8 0 4 4 0 0 1 8 0Z"/></svg>',E2e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.463 5.187a.888.888 0 1 1 1.254 1.255L9.16 10l3.557 3.557a.888.888 0 1 1-1.254 1.255L7.26 10.61a.888.888 0 0 1 .16-1.382l4.043-4.042z"/></svg>',S2e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8.537 14.813a.888.888 0 1 1-1.254-1.255L10.84 10 7.283 6.442a.888.888 0 1 1 1.254-1.255L12.74 9.39a.888.888 0 0 1-.16 1.382l-4.043 4.042z"/></svg>',T2e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.66 9.118a.693.693 0 0 1 .956.032l3.65 3.411 2.422-2.238a.695.695 0 0 1 .945 0L17.5 13.6V2.5h-15v11.1l4.16-4.482ZM17.8 1c.652 0 1.2.47 1.2 1.1v14.362c0 .64-.532 1.038-1.184 1.038H2.184C1.532 17.5 1 17.103 1 16.462V2.1C1 1.47 1.537 1 2.2 1h15.6Zm-5.655 6a2.128 2.128 0 0 1 .157-2.364A2.133 2.133 0 1 1 12.145 7Z"/></svg>',x2e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M1.201 1C.538 1 0 1.47 0 2.1v14.363c0 .64.534 1.037 1.186 1.037h9.494a2.97 2.97 0 0 1-.414-.287 2.998 2.998 0 0 1-1.055-2.03 3.003 3.003 0 0 1 .693-2.185l.383-.455-.02.018-3.65-3.41a.695.695 0 0 0-.957-.034L1.5 13.6V2.5h15v5.535a2.97 2.97 0 0 1 1.412.932l.088.105V2.1c0-.63-.547-1.1-1.2-1.1H1.202Zm11.713 2.803a2.146 2.146 0 0 0-2.049 1.992 2.14 2.14 0 0 0 1.28 2.096 2.13 2.13 0 0 0 2.644-3.11 2.134 2.134 0 0 0-1.875-.978Z"/><path d="M15.522 19.1a.79.79 0 0 0 .79-.79v-5.373l2.059 2.455a.79.79 0 1 0 1.211-1.015l-3.352-3.995a.79.79 0 0 0-.995-.179.784.784 0 0 0-.299.221l-3.35 3.99a.79.79 0 1 0 1.21 1.017l1.936-2.306v5.185c0 .436.353.79.79.79Z"/><path d="M15.522 19.1a.79.79 0 0 0 .79-.79v-5.373l2.059 2.455a.79.79 0 1 0 1.211-1.015l-3.352-3.995a.79.79 0 0 0-.995-.179.784.784 0 0 0-.299.221l-3.35 3.99a.79.79 0 1 0 1.21 1.017l1.936-2.306v5.185c0 .436.353.79.79.79Z"/></svg>',A2e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M1.201 1c-.662 0-1.2.47-1.2 1.1v14.248c0 .64.533 1.152 1.185 1.152h6.623v-7.236L6.617 9.15a.694.694 0 0 0-.957-.033L1.602 13.55V2.553l14.798.003V9.7H18V2.1c0-.63-.547-1.1-1.2-1.1H1.202Zm11.723 2.805a2.094 2.094 0 0 0-1.621.832 2.127 2.127 0 0 0 1.136 3.357 2.13 2.13 0 0 0 2.611-1.506 2.133 2.133 0 0 0-.76-2.244 2.13 2.13 0 0 0-1.366-.44Z"/><path clip-rule="evenodd" d="M19.898 12.369v6.187a.844.844 0 0 1-.844.844h-8.719a.844.844 0 0 1-.843-.844v-7.312a.844.844 0 0 1 .843-.844h2.531a.843.843 0 0 1 .597.248l.838.852h4.75c.223 0 .441.114.6.272a.844.844 0 0 1 .247.597Zm-1.52.654-4.377.02-1.1-1.143H11v6h7.4l-.023-4.877Z"/></svg>',I2e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M1.201 1C.538 1 0 1.47 0 2.1v14.363c0 .64.534 1.037 1.186 1.037h7.029a5.401 5.401 0 0 1 .615-4.338l.762-1.232-2.975-2.78a.696.696 0 0 0-.957-.033L1.5 13.6V2.5h15v6.023c.449.131.887.32 1.307.573l.058.033c.046.028.09.057.135.086V2.1c0-.63-.547-1.1-1.2-1.1H1.202Zm11.713 2.803a2.15 2.15 0 0 0-1.611.834 2.118 2.118 0 0 0-.438 1.158 2.14 2.14 0 0 0 1.277 2.096 2.132 2.132 0 0 0 2.645-3.11 2.13 2.13 0 0 0-1.873-.978Z"/><path d="M16.63 10.294a3.003 3.003 0 0 0-4.142.887l-.117.177a.647.647 0 0 0-.096.492.664.664 0 0 0 .278.418.7.7 0 0 0 .944-.234 1.741 1.741 0 0 1 2.478-.463 1.869 1.869 0 0 1 .476 2.55.637.637 0 0 0-.071.5.646.646 0 0 0 .309.396.627.627 0 0 0 .869-.19l.027-.041a3.226 3.226 0 0 0-.956-4.492Zm-6.061 3.78-.044.066a3.228 3.228 0 0 0 .82 4.403 3.005 3.005 0 0 0 4.275-.798l.13-.197a.626.626 0 0 0 .092-.475.638.638 0 0 0-.268-.402.713.713 0 0 0-.99.26l-.018.029a1.741 1.741 0 0 1-2.477.461 1.87 1.87 0 0 1-.475-2.55l.029-.047a.647.647 0 0 0 .086-.485.66.66 0 0 0-.275-.408l-.04-.027a.609.609 0 0 0-.845.17Z"/><path d="M15.312 13.925c.24-.36.154-.838-.19-1.067-.346-.23-.82-.124-1.059.236l-1.268 1.907c-.239.36-.153.838.192 1.067.345.23.818.123 1.057-.236l1.268-1.907Z"/></svg>',R2e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m9.239 13.938-2.88-1.663a.75.75 0 0 1 .75-1.3L9 12.067V4.75a.75.75 0 1 1 1.5 0v7.318l1.89-1.093a.75.75 0 0 1 .75 1.3l-2.879 1.663a.752.752 0 0 1-.511.187.752.752 0 0 1-.511-.187zM4.25 17a.75.75 0 1 1 0-1.5h10.5a.75.75 0 0 1 0 1.5H4.25z"/></svg>',M2e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.75 11.875a.752.752 0 0 1 .508.184l2.883 1.666a.75.75 0 0 1-.659 1.344l-.091-.044-1.892-1.093.001 4.318a.75.75 0 1 1-1.5 0v-4.317l-1.89 1.092a.75.75 0 0 1-.75-1.3l2.879-1.663a.752.752 0 0 1 .51-.187zM15.25 9a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5h10.5zM9.75.375a.75.75 0 0 1 .75.75v4.318l1.89-1.093.092-.045a.75.75 0 0 1 .659 1.344l-2.883 1.667a.752.752 0 0 1-.508.184.752.752 0 0 1-.511-.187L6.359 5.65a.75.75 0 0 1 .75-1.299L9 5.442V1.125a.75.75 0 0 1 .75-.75z"/></svg>',P2e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m10.261 7.062 2.88 1.663a.75.75 0 0 1-.75 1.3L10.5 8.933v7.317a.75.75 0 1 1-1.5 0V8.932l-1.89 1.093a.75.75 0 0 1-.75-1.3l2.879-1.663a.752.752 0 0 1 .511-.187.752.752 0 0 1 .511.187zM15.25 4a.75.75 0 1 1 0 1.5H4.75a.75.75 0 0 1 0-1.5h10.5z"/></svg>',O2e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>',L2e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm2.286 4c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75z"/></svg>',B2e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M18 3.75a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 8a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 4a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75zm0-8a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75z"/></svg>',F2e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>',N2e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',V2e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M15.003 7v5.5a1 1 0 0 1-1 1H5.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H6.5V12h6.997V7.5z"/></svg>',D2e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M18.003 7v5.5a1 1 0 0 1-1 1H8.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H9.5V12h6.997V7.5z"/></svg>',$2e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M18 7v5.5a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1zm-1.505.5H3.504V12h12.991V7.5z"/></svg>',z2e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm11.5 9H18v1.5h-4.5zM2 15h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',H2e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm11.5 9H18v1.5h-4.5zm0-3H18v1.5h-4.5zm0-3H18v1.5h-4.5zM2 15h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',U2e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2zm0-9h5v1.5H2zm0 3h5v1.5H2zm0 3h5v1.5H2z"/><path d="M18.003 7v5.5a1 1 0 0 1-1 1H8.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H9.5V12h6.997V7.5z"/></svg>',W2e='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 17v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zM1 15.5v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm0-2v1h-1v-1h1zm-19 0v1H0v-1h1zM14.5 2v1h-1V2h1zm2 0v1h-1V2h1zm2 0v1h-1V2h1zm-8 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm8 0v1h-1V2h1zm-10 0v1h-1V2h1z"/><path d="M18.095 2H1.905C.853 2 0 2.895 0 4v12c0 1.105.853 2 1.905 2h16.19C19.147 18 20 17.105 20 16V4c0-1.105-.853-2-1.905-2zm0 1.5c.263 0 .476.224.476.5v12c0 .276-.213.5-.476.5H1.905a.489.489 0 0 1-.476-.5V4c0-.276.213-.5.476-.5h16.19z"/></svg>',j2e='<svg xmlns="http://www.w3.org/2000/svg" xmlns:v="https://vecta.io/nano" viewBox="0 0 20 20"><path d="M.95 1.43a.95.95 0 0 0-.95.95v3.1a.95.95 0 0 0 .95.95h.75v6.3H.95a.95.95 0 0 0-.95.95v3.1a.95.95 0 0 0 .95.95h3.1a.95.95 0 0 0 .95-.95v-.65h1.932l1.539-1.5H5v-.95a.95.95 0 0 0-.95-.95H3.2v-6.3h.85A.95.95 0 0 0 5 5.48v-.55h10v.55a.95.95 0 0 0 .95.95h3.1a.95.95 0 0 0 .95-.95v-3.1a.95.95 0 0 0-.95-.95h-3.1a.95.95 0 0 0-.95.95v1.05H5V2.38a.95.95 0 0 0-.95-.95H.95zm.55 3.5v-2h2v2h-2zm0 9.3v2h2v-2h-2zm15-11.3v2h2v-2h-2z"/><path d="M8.139 20.004v-2.388l7.045-7.048 2.391 2.391-7.046 7.046h-2.39zm11.421-9.101a.64.64 0 0 1-.138.206l-1.165 1.168-2.391-2.391 1.167-1.163a.63.63 0 0 1 .206-.138.635.635 0 0 1 .243-.049.63.63 0 0 1 .449.187l1.491 1.488c.059.059.108.129.138.206s.049.16.049.243a.6.6 0 0 1-.049.243z"/></svg>',q2e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 16.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1ZM1 15v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 13v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 11v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 9v1H0V9h1Zm19 0v1h-1V9h1ZM1 7v1H0V7h1Zm19 0v1h-1V7h1ZM1 5v1H0V5h1Zm19 0v1h-1V5h1Zm0-2v1h-1V3h1ZM1 3v1H0V3h1Zm13.5-1.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm-8 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm8 0v1h-1v-1h1Zm-10 0v1h-1v-1h1Z"/><path d="M13 5.5H2a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2v-8a2 2 0 0 0-2-2ZM13 7a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-8A.5.5 0 0 1 2 7h11Z"/></svg>',K2e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 16.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1ZM1 15v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 13v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 11v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 9v1H0V9h1Zm19 0v1h-1V9h1ZM1 7v1H0V7h1Zm19 0v1h-1V7h1ZM1 5v1H0V5h1Zm19 0v1h-1V5h1Zm0-2v1h-1V3h1ZM1 3v1H0V3h1Zm13.5-1.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm-8 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm8 0v1h-1v-1h1Zm-10 0v1h-1v-1h1Z"/><path d="M7 9.5H2a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2ZM7 11a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-4A.5.5 0 0 1 2 11h5Z"/></svg>',G2e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 16.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1ZM1 15v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 13v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 11v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 9v1H0V9h1Zm19 0v1h-1V9h1ZM1 7v1H0V7h1Zm19 0v1h-1V7h1ZM1 5v1H0V5h1Zm19 0v1h-1V5h1Zm0-2v1h-1V3h1ZM1 3v1H0V3h1Zm13.5-1.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm-8 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm8 0v1h-1v-1h1Zm-10 0v1h-1v-1h1Z"/><path d="M10 7.5H2a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2v-6a2 2 0 0 0-2-2ZM10 9a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-6A.5.5 0 0 1 2 9h8Z"/></svg>',Y2e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m7.3 17.37-.061.088a1.518 1.518 0 0 1-.934.535l-4.178.663-.806-4.153a1.495 1.495 0 0 1 .187-1.058l.056-.086L8.77 2.639c.958-1.351 2.803-1.076 4.296-.03 1.497 1.047 2.387 2.693 1.433 4.055L7.3 17.37zM9.14 4.728l-5.545 8.346 3.277 2.294 5.544-8.346L9.14 4.728zM6.07 16.512l-3.276-2.295.53 2.73 2.746-.435zM9.994 3.506 13.271 5.8c.316-.452-.16-1.333-1.065-1.966-.905-.634-1.895-.78-2.212-.328zM8 18.5 9.375 17H19v1.5H8z"/></svg>',Z2e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.999 2H15a1 1 0 0 1 0 2h-1.004v13a1 1 0 1 1-2 0V4H8.999v13a1 1 0 1 1-2 0v-7A4 4 0 0 1 3 6a4 4 0 0 1 3.999-4z"/></svg>',X2e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 10.423a6.5 6.5 0 0 1 6.056-6.408l.038.67C6.448 5.423 5.354 7.663 5.22 10H9c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574zm8 0a6.5 6.5 0 0 1 6.056-6.408l.038.67c-2.646.739-3.74 2.979-3.873 5.315H17c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574z"/></svg>',J2e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><circle cx="9.5" cy="4.5" r="1.5"/><circle cx="9.5" cy="10.5" r="1.5"/><circle cx="9.5" cy="16.5" r="1.5"/></svg>',Q2e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5 3.25a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M12 3.25a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M5 10a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M12 10a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M5 16.75a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M12 16.75a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/></svg>',e5e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.187 17H5.773c-.637 0-1.092-.138-1.364-.415-.273-.277-.409-.718-.409-1.323V4.738c0-.617.14-1.062.419-1.332.279-.27.73-.406 1.354-.406h4.68c.69 0 1.288.041 1.793.124.506.083.96.242 1.36.478.341.197.644.447.906.75a3.262 3.262 0 0 1 .808 2.162c0 1.401-.722 2.426-2.167 3.075C15.05 10.175 16 11.315 16 13.01a3.756 3.756 0 0 1-2.296 3.504 6.1 6.1 0 0 1-1.517.377c-.571.073-1.238.11-2 .11zm-.217-6.217H7v4.087h3.069c1.977 0 2.965-.69 2.965-2.072 0-.707-.256-1.22-.768-1.537-.512-.319-1.277-.478-2.296-.478zM7 5.13v3.619h2.606c.729 0 1.292-.067 1.69-.2a1.6 1.6 0 0 0 .91-.765c.165-.267.247-.566.247-.897 0-.707-.26-1.176-.778-1.409-.519-.232-1.31-.348-2.375-.348H7z"/></svg>',t5e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.5 5.5H7v5h3.5a2.5 2.5 0 1 0 0-5zM5 3h6.5v.025a5 5 0 0 1 0 9.95V13H7v4a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1z"/></svg>',n5e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 2a1 1 0 0 0-1 1v6H3a1 1 0 1 0 0 2h6v6a1 1 0 1 0 2 0v-6h6a1 1 0 1 0 0-2h-6V3a1 1 0 0 0-1-1Z"/></svg>',i5e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.816 11.5 7.038 4.785 4.261 11.5h5.555Zm.62 1.5H3.641l-1.666 4.028H.312l5.789-14h1.875l5.789 14h-1.663L10.436 13Z"/><path d="m12.09 17-.534-1.292.848-1.971.545 1.319L12.113 17h-.023Zm1.142-5.187.545 1.319L15.5 9.13l1.858 4.316h-3.45l.398.965h3.467L18.887 17H20l-3.873-9h-1.254l-1.641 3.813Z"/></svg>',s5e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M19 4.5 14 0H3v12.673l.868-1.041c.185-.222.4-.402.632-.54V1.5h8v5h5v7.626a2.24 2.24 0 0 1 1.5.822V4.5ZM14 5V2l3.3 3H14Zm-3.692 12.5c.062.105.133.206.213.303L11.52 19H8v-.876a2.243 2.243 0 0 0 1.82-.624h.488Zm7.518-.657a.75.75 0 0 0-1.152-.96L15.5 17.29V12H14v5.29l-1.174-1.408a.75.75 0 0 0-1.152.96l2.346 2.816a.95.95 0 0 0 1.46 0l2.346-2.815Zm-15.056-.38a.75.75 0 0 1-.096-1.056l2.346-2.815a.95.95 0 0 1 1.46 0l2.346 2.815a.75.75 0 1 1-1.152.96L6.5 14.96V20H5v-5.04l-1.174 1.408a.75.75 0 0 1-1.056.096Z"/></svg>',r5e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m14.958 9.367-2.189 1.837a.75.75 0 0 0 .965 1.149l3.788-3.18a.747.747 0 0 0 .21-.284.75.75 0 0 0-.17-.945L13.77 4.762a.75.75 0 1 0-.964 1.15l2.331 1.955H6.22A.75.75 0 0 0 6 7.9a4 4 0 1 0 1.477 7.718l-.344-1.489A2.5 2.5 0 1 1 6.039 9.4l-.008-.032h8.927z"/></svg>',o5e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m5.042 9.367 2.189 1.837a.75.75 0 0 1-.965 1.149l-3.788-3.18a.747.747 0 0 1-.21-.284.75.75 0 0 1 .17-.945L6.23 4.762a.75.75 0 1 1 .964 1.15L4.863 7.866h8.917A.75.75 0 0 1 14 7.9a4 4 0 1 1-1.477 7.718l.344-1.489a2.5 2.5 0 1 0 1.094-4.73l.008-.032H5.042z"/></svg>',a5e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0C1 4.784 1.777 4 2.75 4c.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75C1.784 7.5 1 6.723 1 5.75zm6 9c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0c0-.966.777-1.75 1.75-1.75.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75-.966 0-1.75-.777-1.75-1.75z"/></svg>',l5e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM3.5 3v5H2V3.7H1v-1h2.5V3zM.343 17.857l2.59-3.257H2.92a.6.6 0 1 0-1.04 0H.302a2 2 0 1 1 3.995 0h-.001c-.048.405-.16.734-.333.988-.175.254-.59.692-1.244 1.312H4.3v1h-4l.043-.043zM7 14.75a.75.75 0 0 1 .75-.75h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75z"/></svg>',c5e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m2.315 14.705 2.224-2.24a.689.689 0 0 1 .963 0 .664.664 0 0 1 0 .949L2.865 16.07a.682.682 0 0 1-.112.089.647.647 0 0 1-.852-.051L.688 14.886a.635.635 0 0 1 0-.903.647.647 0 0 1 .91 0l.717.722zm5.185.045a.75.75 0 0 1 .75-.75h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75zM2.329 5.745l2.21-2.226a.689.689 0 0 1 .963 0 .664.664 0 0 1 0 .95L2.865 7.125a.685.685 0 0 1-.496.196.644.644 0 0 1-.468-.187L.688 5.912a.635.635 0 0 1 0-.903.647.647 0 0 1 .91 0l.73.736zM7.5 5.75A.75.75 0 0 1 8.25 5h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75z"/></svg>',u5e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.87 12.61a.75.75 0 0 1-.089.976l-.085.07-3.154 2.254 3.412 2.414a.75.75 0 0 1 .237.95l-.057.095a.75.75 0 0 1-.95.237l-.096-.058-4.272-3.022-.003-1.223 4.01-2.867a.75.75 0 0 1 1.047.174zm2.795-.231.095.057 4.011 2.867-.003 1.223-4.272 3.022-.095.058a.75.75 0 0 1-.88-.151l-.07-.086-.058-.095a.75.75 0 0 1 .15-.88l.087-.07 3.412-2.414-3.154-2.253-.085-.071a.75.75 0 0 1 .862-1.207zM16 0a2 2 0 0 1 2 2v9.354l-.663-.492-.837-.001V2a.5.5 0 0 0-.5-.5H2a.5.5 0 0 0-.5.5v15a.5.5 0 0 0 .5.5h3.118L7.156 19H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h14zM5.009 15l.003 1H3v-1h2.009zm2.188-2-1.471 1H5v-1h2.197zM10 11v.095L8.668 12H7v-1h3zm4-2v1H7V9h7zm0-2v1H7V7h7zm-4-2v1H5V5h5zM6 3v1H3V3h3z"/></svg>',d5e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.627 16.5zm5.873-.196zm0-7.001V8h-13v8.5h4.341c.191.54.457 1.044.785 1.5H2a1.5 1.5 0 0 1-1.5-1.5v-13A1.5 1.5 0 0 1 2 2h4.5a1.5 1.5 0 0 1 1.06.44L9.122 4H16a1.5 1.5 0 0 1 1.5 1.5v1A1.5 1.5 0 0 1 19 8v2.531a6.027 6.027 0 0 0-1.5-1.228zM16 6.5v-1H8.5l-2-2H2v13h1V8a1.5 1.5 0 0 1 1.5-1.5H16z"/><path d="M14.5 19.5a5 5 0 1 1 0-10 5 5 0 0 1 0 10zM15 14v-2h-1v2h-2v1h2v2h1v-2h2v-1h-2z"/></svg>',h5e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M19 9v10h-2v-8h-2V9h4zM4 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1H10a1 1 0 0 1-1-1V11H4v4.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1H3a1 1 0 0 1 1 1v4.5z"/></svg>',f5e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1V11H3v4.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1H2a1 1 0 0 1 1 1v4.5zm16.076 8.343V18.5h-6.252c.067-.626.27-1.22.61-1.78.338-.561 1.006-1.305 2.005-2.232.804-.749 1.297-1.257 1.479-1.523.245-.368.368-.732.368-1.092 0-.398-.107-.703-.32-.917-.214-.214-.51-.32-.886-.32-.372 0-.669.111-.889.336-.22.224-.347.596-.38 1.117l-1.778-.178c.106-.982.438-1.686.997-2.114.558-.427 1.257-.64 2.095-.64.918 0 1.64.247 2.164.742.525.495.787 1.11.787 1.847 0 .419-.075.818-.225 1.197-.15.378-.388.775-.714 1.19-.216.275-.605.67-1.168 1.187-.563.516-.92.859-1.07 1.028a3.11 3.11 0 0 0-.365.495h3.542z"/></svg>',m5e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1V11H3v4.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1H2a1 1 0 0 1 1 1v4.5zm9.989 7.53 1.726-.209c.055.44.203.777.445 1.01.24.232.533.349.876.349.368 0 .678-.14.93-.42.251-.279.377-.655.377-1.13 0-.448-.12-.803-.362-1.066a1.153 1.153 0 0 0-.882-.393c-.228 0-.501.044-.819.133l.197-1.453c.482.012.85-.092 1.105-.315.253-.222.38-.517.38-.885 0-.313-.093-.563-.279-.75-.186-.185-.434-.278-.743-.278a1.07 1.07 0 0 0-.78.317c-.216.212-.347.52-.394.927l-1.644-.28c.114-.562.287-1.012.517-1.348.231-.337.553-.601.965-.794a3.24 3.24 0 0 1 1.387-.289c.876 0 1.579.28 2.108.838.436.457.653.973.653 1.549 0 .817-.446 1.468-1.339 1.955.533.114.96.37 1.28.768.319.398.478.878.478 1.441 0 .817-.298 1.513-.895 2.088-.596.576-1.339.864-2.228.864-.842 0-1.54-.243-2.094-.727-.555-.485-.876-1.118-.965-1.901z"/></svg>',p5e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V11h-5v4.5a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v4.5zm13.55 10v-1.873h-3.81v-1.561l4.037-5.91h1.498v5.904h1.156v1.567h-1.156V18.5H17.05zm0-3.44v-3.18l-2.14 3.18h2.14z"/></svg>',g5e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V11h-5v4.5a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v4.5zm9.578 7.607 1.777-.184c.05.402.201.72.45.955a1.223 1.223 0 0 0 1.81-.101c.258-.303.387-.759.387-1.368 0-.572-.128-1-.384-1.286-.256-.285-.59-.428-1-.428-.512 0-.971.226-1.377.679l-1.448-.21.915-4.843h4.716v1.67H15.56l-.28 1.58a2.697 2.697 0 0 1 1.219-.298 2.68 2.68 0 0 1 2.012.863c.55.576.825 1.323.825 2.241a3.36 3.36 0 0 1-.666 2.05c-.605.821-1.445 1.232-2.52 1.232-.86 0-1.56-.23-2.101-.692-.542-.461-.866-1.081-.971-1.86z"/></svg>',v5e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V11h-5v4.5a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v4.5zm15.595 2.973-1.726.19c-.043-.355-.153-.617-.33-.787-.178-.169-.409-.253-.692-.253-.377 0-.695.169-.956.507-.26.339-.424 1.043-.492 2.114.445-.525.997-.787 1.657-.787.745 0 1.383.284 1.914.85.531.568.797 1.3.797 2.197 0 .952-.28 1.716-.838 2.291-.559.576-1.276.864-2.152.864-.94 0-1.712-.365-2.317-1.095-.605-.73-.908-1.927-.908-3.59 0-1.705.316-2.935.946-3.688.63-.753 1.45-1.13 2.457-1.13.706 0 1.291.198 1.755.594.463.395.758.97.885 1.723zm-4.043 3.891c0 .58.133 1.028.4 1.343.266.315.57.473.914.473.33 0 .605-.13.825-.388.22-.258.33-.68.33-1.27 0-.604-.118-1.047-.355-1.329a1.115 1.115 0 0 0-.89-.422c-.342 0-.632.134-.869.403s-.355.666-.355 1.19z"/></svg>',b5e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 9h16v2H2z"/></svg>',_5e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M17 0a2 2 0 0 1 2 2v7a1 1 0 0 1 1 1v5a1 1 0 0 1-.883.993l-.118.006L19 17a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2l-.001-1.001-.116-.006A1 1 0 0 1 0 15v-5a1 1 0 0 1 .999-1L1 2a2 2 0 0 1 2-2h14zm.499 15.999h-15L2.5 17a.5.5 0 0 0 .5.5h14a.5.5 0 0 0 .5-.5l-.001-1.001zm-3.478-6.013-.014.014H14v.007l-1.525 1.525-1.46-1.46-.015.013V10h-1v5h1v-3.53l1.428 1.43.048.043.131-.129L14 11.421V15h1v-5h-.965l-.014-.014zM2 10H1v5h1v-2h2v2h1v-5H4v2H2v-2zm7 0H6v1h1v4h1v-4h1v-1zm8 0h-1v5h3v-1h-2v-4zm0-8.5H3a.5.5 0 0 0-.5.5l-.001 6.999h15L17.5 2a.5.5 0 0 0-.5-.5zM10 7v1H4V7h6zm3-2v1H4V5h9zm-3-2v1H4V3h6z"/></svg>',w5e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm5 6c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM2.75 16.5h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 1 0 0 1.5zM1.632 6.95 5.02 9.358a.4.4 0 0 1-.013.661l-3.39 2.207A.4.4 0 0 1 1 11.892V7.275a.4.4 0 0 1 .632-.326z"/></svg>',y5e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm5 6c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM2.75 16.5h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 1 0 0 1.5zm1.618-9.55L.98 9.358a.4.4 0 0 0 .013.661l3.39 2.207A.4.4 0 0 0 5 11.892V7.275a.4.4 0 0 0-.632-.326z"/></svg>',C5e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 5.5v3h4v-3H3Zm0 4v3h4v-3H3Zm0 4v3h4v-3H3Zm5 3h4v-3H8v3Zm5 0h4v-3h-4v3Zm4-4v-3h-4v3h4Zm0-4v-3h-4v3h4Zm1.5 8A1.5 1.5 0 0 1 17 18H3a1.5 1.5 0 0 1-1.5-1.5V3c.222-.863 1.068-1.5 2-1.5h13c.932 0 1.778.637 2 1.5v13.5Zm-6.5-4v-3H8v3h4Zm0-4v-3H8v3h4Z"/></svg>';const kt={bold:e5e,cancel:m2e,caption:p2e,check:g2e,cog:v2e,colorPalette:b2e,eraser:_2e,history:w2e,image:T2e,imageUpload:x2e,imageAssetManager:A2e,imageUrl:I2e,lowVision:y2e,textAlternative:C2e,loupe:k2e,previousArrow:E2e,nextArrow:S2e,importExport:s5e,paragraph:t5e,plus:n5e,text:i5e,alignBottom:R2e,alignMiddle:M2e,alignTop:P2e,alignLeft:O2e,alignCenter:L2e,alignRight:B2e,alignJustify:F2e,objectLeft:H2e,objectCenter:V2e,objectRight:U2e,objectFullWidth:$2e,objectInline:z2e,objectBlockLeft:N2e,objectBlockRight:D2e,objectSizeCustom:j2e,objectSizeFull:W2e,objectSizeLarge:q2e,objectSizeSmall:K2e,objectSizeMedium:G2e,pencil:Y2e,pilcrow:Z2e,quote:X2e,threeVerticalDots:J2e,dragIndicator:Q2e,redo:r5e,undo:o5e,bulletedList:a5e,numberedList:l5e,todoList:c5e,codeBlock:u5e,browseFiles:d5e,heading1:h5e,heading2:f5e,heading3:m5e,heading4:p5e,heading5:g5e,heading6:v5e,horizontalLine:b5e,html:_5e,indent:w5e,outdent:y5e,table:C5e};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let k5e=class extends li(){constructor(){super();w(this,"total");w(this,"_reader");w(this,"_data");const e=new window.FileReader;this._reader=e,this._data=void 0,this.set("loaded",0),e.onprogress=i=>{this.loaded=i.loaded}}get error(){return this._reader.error}get data(){return this._data}read(e){const i=this._reader;return this.total=e.size,new Promise((s,r)=>{i.onload=()=>{const o=i.result;this._data=o,s(o)},i.onerror=()=>{r("error")},i.onabort=()=>{r("aborted")},this._reader.readAsDataURL(e)})}abort(){this._reader.abort()}};class sh extends Be{constructor(){super(...arguments);w(this,"loaders",new _s);w(this,"_loadersMap",new Map);w(this,"_pendingAction",null)}static get pluginName(){return"FileRepository"}static get requires(){return[E_]}init(){this.loaders.on("change",()=>this._updatePendingAction()),this.set("uploaded",0),this.set("uploadTotal",null),this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",(e,i)=>i?e/i*100:0)}getLoader(e){return this._loadersMap.get(e)||null}createLoader(e){if(!this.createUploadAdapter)return qn("filerepository-no-upload-adapter"),null;const i=new jI(Promise.resolve(e),this.createUploadAdapter);return this.loaders.add(i),this._loadersMap.set(e,i),e instanceof Promise&&i.file.then(s=>{this._loadersMap.set(s,i)}).catch(()=>{}),i.on("change:uploaded",()=>{let s=0;for(const r of this.loaders)s+=r.uploaded;this.uploaded=s}),i.on("change:uploadTotal",()=>{let s=0;for(const r of this.loaders)r.uploadTotal&&(s+=r.uploadTotal);this.uploadTotal=s}),i}destroyLoader(e){const i=e instanceof jI?e:this.getLoader(e);i._destroy(),this.loaders.remove(i),this._loadersMap.forEach((s,r)=>{s===i&&this._loadersMap.delete(r)})}_updatePendingAction(){const e=this.editor.plugins.get(E_);if(this.loaders.length){if(!this._pendingAction){const i=this.editor.t,s=r=>`${i("Upload in progress")} ${parseInt(r)}%.`;this._pendingAction=e.add(s(this.uploadedPercent)),this._pendingAction.bind("message").to(this,"uploadedPercent",s)}}else e.remove(this._pendingAction),this._pendingAction=null}}class jI extends li(){constructor(e,i){super();w(this,"id");w(this,"_filePromiseWrapper");w(this,"_adapter");w(this,"_reader");this.id=to(),this._filePromiseWrapper=this._createFilePromiseWrapper(e),this._adapter=i(this),this._reader=new k5e,this.set("status","idle"),this.set("uploaded",0),this.set("uploadTotal",null),this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",(s,r)=>r?s/r*100:0),this.set("uploadResponse",null)}get file(){return this._filePromiseWrapper?this._filePromiseWrapper.promise.then(e=>this._filePromiseWrapper?e:null):Promise.resolve(null)}get data(){return this._reader.data}read(){if(this.status!="idle")throw new fe("filerepository-read-wrong-status",this);return this.status="reading",this.file.then(e=>this._reader.read(e)).then(e=>{if(this.status!=="reading")throw this.status;return this.status="idle",e}).catch(e=>{throw e==="aborted"?(this.status="aborted","aborted"):(this.status="error",this._reader.error?this._reader.error:e)})}upload(){if(this.status!="idle")throw new fe("filerepository-upload-wrong-status",this);return this.status="uploading",this.file.then(()=>this._adapter.upload()).then(e=>(this.uploadResponse=e,this.status="idle",e)).catch(e=>{throw this.status==="aborted"?"aborted":(this.status="error",e)})}abort(){const e=this.status;this.status="aborted",this._filePromiseWrapper.isFulfilled?e=="reading"?this._reader.abort():e=="uploading"&&this._adapter.abort&&this._adapter.abort():(this._filePromiseWrapper.promise.catch(()=>{}),this._filePromiseWrapper.rejecter("aborted")),this._destroy()}_destroy(){this._filePromiseWrapper=void 0,this._reader=void 0,this._adapter=void 0,this.uploadResponse=void 0}_createFilePromiseWrapper(e){const i={};return i.promise=new Promise((s,r)=>{i.rejecter=r,i.isFulfilled=!1,e.then(o=>{i.isFulfilled=!0,s(o)}).catch(o=>{i.isFulfilled=!0,r(o)})}),i}}class E5e extends Be{static get requires(){return[sh]}static get pluginName(){return"SimpleUploadAdapter"}init(){const n=this.editor.config.get("simpleUpload");if(n){if(!n.uploadUrl){qn("simple-upload-adapter-missing-uploadurl");return}this.editor.plugins.get(sh).createUploadAdapter=e=>new S5e(e,n)}}}class S5e{constructor(n,e){w(this,"loader");w(this,"options");w(this,"xhr");this.loader=n,this.options=e}upload(){return this.loader.file.then(n=>new Promise((e,i)=>{this._initRequest(),this._initListeners(e,i,n),this._sendRequest(n)}))}abort(){this.xhr&&this.xhr.abort()}_initRequest(){const n=this.xhr=new XMLHttpRequest;n.open("POST",this.options.uploadUrl,!0),n.responseType="json"}_initListeners(n,e,i){const s=this.xhr,r=this.loader,o=`Couldn't upload file: ${i.name}.`;s.addEventListener("error",()=>e(o)),s.addEventListener("abort",()=>e()),s.addEventListener("load",()=>{const a=s.response;if(!a||a.error)return e(a&&a.error&&a.error.message?a.error.message:o);const l=a.url?{default:a.url}:a.urls;n({...a,urls:l})});/* istanbul ignore else -- @preserve */s.upload&&s.upload.addEventListener("progress",a=>{a.lengthComputable&&(r.uploadTotal=a.total,r.uploaded=a.loaded)})}_sendRequest(n){const e=this.options.headers||{},i=this.options.withCredentials||!1;for(const r of Object.keys(e))this.xhr.setRequestHeader(r,e[r]);this.xhr.withCredentials=i;const s=new FormData;s.append("upload",n),this.xhr.send(s)}}var dD={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};const qI=bF(dD);var KI={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function GI(t){var n,e=[],i=1,s;if(typeof t=="string")if(qI[t])e=qI[t].slice(),s="rgb";else if(t==="transparent")i=0,s="rgb",e=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(t)){var r=t.slice(1),o=r.length,a=o<=4;i=1,a?(e=[parseInt(r[0]+r[0],16),parseInt(r[1]+r[1],16),parseInt(r[2]+r[2],16)],o===4&&(i=parseInt(r[3]+r[3],16)/255)):(e=[parseInt(r[0]+r[1],16),parseInt(r[2]+r[3],16),parseInt(r[4]+r[5],16)],o===8&&(i=parseInt(r[6]+r[7],16)/255)),e[0]||(e[0]=0),e[1]||(e[1]=0),e[2]||(e[2]=0),s="rgb"}else if(n=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(t)){var l=n[1],c=l==="rgb",r=l.replace(/a$/,"");s=r;var o=r==="cmyk"?4:r==="gray"?1:3;e=n[2].trim().split(/\s*[,\/]\s*|\s+/).map(function(f,p){if(/%$/.test(f))return p===o?parseFloat(f)/100:r==="rgb"?parseFloat(f)*255/100:parseFloat(f);if(r[p]==="h"){if(/deg$/.test(f))return parseFloat(f);if(KI[f]!==void 0)return KI[f]}return parseFloat(f)}),l===r&&e.push(1),i=c||e[o]===void 0?1:e[o],e=e.slice(0,o)}else t.length>10&&/[0-9](?:\s|\/)/.test(t)&&(e=t.match(/([0-9]+)/g).map(function(u){return parseFloat(u)}),s=t.match(/([a-z])/ig).join("").toLowerCase());else isNaN(t)?Array.isArray(t)||t.length?(e=[t[0],t[1],t[2]],s="rgb",i=t.length===4?t[3]:1):t instanceof Object&&(t.r!=null||t.red!=null||t.R!=null?(s="rgb",e=[t.r||t.red||t.R||0,t.g||t.green||t.G||0,t.b||t.blue||t.B||0]):(s="hsl",e=[t.h||t.hue||t.H||0,t.s||t.saturation||t.S||0,t.l||t.lightness||t.L||t.b||t.brightness]),i=t.a||t.alpha||t.opacity||1,t.opacity!=null&&(i/=100)):(s="rgb",e=[t>>>16,(t&65280)>>>8,t&255]);return{space:s,values:e,alpha:i}}const c1=dD,hD={};for(const t of Object.keys(c1))hD[c1[t]]=t;const Kt={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};var fD=Kt;for(const t of Object.keys(Kt)){if(!("channels"in Kt[t]))throw new Error("missing channels property: "+t);if(!("labels"in Kt[t]))throw new Error("missing channel labels property: "+t);if(Kt[t].labels.length!==Kt[t].channels)throw new Error("channel and label counts mismatch: "+t);const{channels:n,labels:e}=Kt[t];delete Kt[t].channels,delete Kt[t].labels,Object.defineProperty(Kt[t],"channels",{value:n}),Object.defineProperty(Kt[t],"labels",{value:e})}Kt.rgb.hsl=function(t){const n=t[0]/255,e=t[1]/255,i=t[2]/255,s=Math.min(n,e,i),r=Math.max(n,e,i),o=r-s;let a,l;r===s?a=0:n===r?a=(e-i)/o:e===r?a=2+(i-n)/o:i===r&&(a=4+(n-e)/o),a=Math.min(a*60,360),a<0&&(a+=360);const c=(s+r)/2;return r===s?l=0:c<=.5?l=o/(r+s):l=o/(2-r-s),[a,l*100,c*100]};Kt.rgb.hsv=function(t){let n,e,i,s,r;const o=t[0]/255,a=t[1]/255,l=t[2]/255,c=Math.max(o,a,l),u=c-Math.min(o,a,l),d=function(f){return(c-f)/6/u+1/2};return u===0?(s=0,r=0):(r=u/c,n=d(o),e=d(a),i=d(l),o===c?s=i-e:a===c?s=1/3+n-i:l===c&&(s=2/3+e-n),s<0?s+=1:s>1&&(s-=1)),[s*360,r*100,c*100]};Kt.rgb.hwb=function(t){const n=t[0],e=t[1];let i=t[2];const s=Kt.rgb.hsl(t)[0],r=1/255*Math.min(n,Math.min(e,i));return i=1-1/255*Math.max(n,Math.max(e,i)),[s,r*100,i*100]};Kt.rgb.cmyk=function(t){const n=t[0]/255,e=t[1]/255,i=t[2]/255,s=Math.min(1-n,1-e,1-i),r=(1-n-s)/(1-s)||0,o=(1-e-s)/(1-s)||0,a=(1-i-s)/(1-s)||0;return[r*100,o*100,a*100,s*100]};function T5e(t,n){return(t[0]-n[0])**2+(t[1]-n[1])**2+(t[2]-n[2])**2}Kt.rgb.keyword=function(t){const n=hD[t];if(n)return n;let e=1/0,i;for(const s of Object.keys(c1)){const r=c1[s],o=T5e(t,r);o<e&&(e=o,i=s)}return i};Kt.keyword.rgb=function(t){return c1[t]};Kt.rgb.xyz=function(t){let n=t[0]/255,e=t[1]/255,i=t[2]/255;n=n>.04045?((n+.055)/1.055)**2.4:n/12.92,e=e>.04045?((e+.055)/1.055)**2.4:e/12.92,i=i>.04045?((i+.055)/1.055)**2.4:i/12.92;const s=n*.4124+e*.3576+i*.1805,r=n*.2126+e*.7152+i*.0722,o=n*.0193+e*.1192+i*.9505;return[s*100,r*100,o*100]};Kt.rgb.lab=function(t){const n=Kt.rgb.xyz(t);let e=n[0],i=n[1],s=n[2];e/=95.047,i/=100,s/=108.883,e=e>.008856?e**(1/3):7.787*e+16/116,i=i>.008856?i**(1/3):7.787*i+16/116,s=s>.008856?s**(1/3):7.787*s+16/116;const r=116*i-16,o=500*(e-i),a=200*(i-s);return[r,o,a]};Kt.hsl.rgb=function(t){const n=t[0]/360,e=t[1]/100,i=t[2]/100;let s,r,o;if(e===0)return o=i*255,[o,o,o];i<.5?s=i*(1+e):s=i+e-i*e;const a=2*i-s,l=[0,0,0];for(let c=0;c<3;c++)r=n+1/3*-(c-1),r<0&&r++,r>1&&r--,6*r<1?o=a+(s-a)*6*r:2*r<1?o=s:3*r<2?o=a+(s-a)*(2/3-r)*6:o=a,l[c]=o*255;return l};Kt.hsl.hsv=function(t){const n=t[0];let e=t[1]/100,i=t[2]/100,s=e;const r=Math.max(i,.01);i*=2,e*=i<=1?i:2-i,s*=r<=1?r:2-r;const o=(i+e)/2,a=i===0?2*s/(r+s):2*e/(i+e);return[n,a*100,o*100]};Kt.hsv.rgb=function(t){const n=t[0]/60,e=t[1]/100;let i=t[2]/100;const s=Math.floor(n)%6,r=n-Math.floor(n),o=255*i*(1-e),a=255*i*(1-e*r),l=255*i*(1-e*(1-r));switch(i*=255,s){case 0:return[i,l,o];case 1:return[a,i,o];case 2:return[o,i,l];case 3:return[o,a,i];case 4:return[l,o,i];case 5:return[i,o,a]}};Kt.hsv.hsl=function(t){const n=t[0],e=t[1]/100,i=t[2]/100,s=Math.max(i,.01);let r,o;o=(2-e)*i;const a=(2-e)*s;return r=e*s,r/=a<=1?a:2-a,r=r||0,o/=2,[n,r*100,o*100]};Kt.hwb.rgb=function(t){const n=t[0]/360;let e=t[1]/100,i=t[2]/100;const s=e+i;let r;s>1&&(e/=s,i/=s);const o=Math.floor(6*n),a=1-i;r=6*n-o,o&1&&(r=1-r);const l=e+r*(a-e);let c,u,d;switch(o){default:case 6:case 0:c=a,u=l,d=e;break;case 1:c=l,u=a,d=e;break;case 2:c=e,u=a,d=l;break;case 3:c=e,u=l,d=a;break;case 4:c=l,u=e,d=a;break;case 5:c=a,u=e,d=l;break}return[c*255,u*255,d*255]};Kt.cmyk.rgb=function(t){const n=t[0]/100,e=t[1]/100,i=t[2]/100,s=t[3]/100,r=1-Math.min(1,n*(1-s)+s),o=1-Math.min(1,e*(1-s)+s),a=1-Math.min(1,i*(1-s)+s);return[r*255,o*255,a*255]};Kt.xyz.rgb=function(t){const n=t[0]/100,e=t[1]/100,i=t[2]/100;let s,r,o;return s=n*3.2406+e*-1.5372+i*-.4986,r=n*-.9689+e*1.8758+i*.0415,o=n*.0557+e*-.204+i*1.057,s=s>.0031308?1.055*s**(1/2.4)-.055:s*12.92,r=r>.0031308?1.055*r**(1/2.4)-.055:r*12.92,o=o>.0031308?1.055*o**(1/2.4)-.055:o*12.92,s=Math.min(Math.max(0,s),1),r=Math.min(Math.max(0,r),1),o=Math.min(Math.max(0,o),1),[s*255,r*255,o*255]};Kt.xyz.lab=function(t){let n=t[0],e=t[1],i=t[2];n/=95.047,e/=100,i/=108.883,n=n>.008856?n**(1/3):7.787*n+16/116,e=e>.008856?e**(1/3):7.787*e+16/116,i=i>.008856?i**(1/3):7.787*i+16/116;const s=116*e-16,r=500*(n-e),o=200*(e-i);return[s,r,o]};Kt.lab.xyz=function(t){const n=t[0],e=t[1],i=t[2];let s,r,o;r=(n+16)/116,s=e/500+r,o=r-i/200;const a=r**3,l=s**3,c=o**3;return r=a>.008856?a:(r-16/116)/7.787,s=l>.008856?l:(s-16/116)/7.787,o=c>.008856?c:(o-16/116)/7.787,s*=95.047,r*=100,o*=108.883,[s,r,o]};Kt.lab.lch=function(t){const n=t[0],e=t[1],i=t[2];let s;s=Math.atan2(i,e)*360/2/Math.PI,s<0&&(s+=360);const o=Math.sqrt(e*e+i*i);return[n,o,s]};Kt.lch.lab=function(t){const n=t[0],e=t[1],s=t[2]/360*2*Math.PI,r=e*Math.cos(s),o=e*Math.sin(s);return[n,r,o]};Kt.rgb.ansi16=function(t,n=null){const[e,i,s]=t;let r=n===null?Kt.rgb.hsv(t)[2]:n;if(r=Math.round(r/50),r===0)return 30;let o=30+(Math.round(s/255)<<2|Math.round(i/255)<<1|Math.round(e/255));return r===2&&(o+=60),o};Kt.hsv.ansi16=function(t){return Kt.rgb.ansi16(Kt.hsv.rgb(t),t[2])};Kt.rgb.ansi256=function(t){const n=t[0],e=t[1],i=t[2];return n===e&&e===i?n<8?16:n>248?231:Math.round((n-8)/247*24)+232:16+36*Math.round(n/255*5)+6*Math.round(e/255*5)+Math.round(i/255*5)};Kt.ansi16.rgb=function(t){let n=t%10;if(n===0||n===7)return t>50&&(n+=3.5),n=n/10.5*255,[n,n,n];const e=(~~(t>50)+1)*.5,i=(n&1)*e*255,s=(n>>1&1)*e*255,r=(n>>2&1)*e*255;return[i,s,r]};Kt.ansi256.rgb=function(t){if(t>=232){const r=(t-232)*10+8;return[r,r,r]}t-=16;let n;const e=Math.floor(t/36)/5*255,i=Math.floor((n=t%36)/6)/5*255,s=n%6/5*255;return[e,i,s]};Kt.rgb.hex=function(t){const e=(((Math.round(t[0])&255)<<16)+((Math.round(t[1])&255)<<8)+(Math.round(t[2])&255)).toString(16).toUpperCase();return"000000".substring(e.length)+e};Kt.hex.rgb=function(t){const n=t.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!n)return[0,0,0];let e=n[0];n[0].length===3&&(e=e.split("").map(a=>a+a).join(""));const i=parseInt(e,16),s=i>>16&255,r=i>>8&255,o=i&255;return[s,r,o]};Kt.rgb.hcg=function(t){const n=t[0]/255,e=t[1]/255,i=t[2]/255,s=Math.max(Math.max(n,e),i),r=Math.min(Math.min(n,e),i),o=s-r;let a,l;return o<1?a=r/(1-o):a=0,o<=0?l=0:s===n?l=(e-i)/o%6:s===e?l=2+(i-n)/o:l=4+(n-e)/o,l/=6,l%=1,[l*360,o*100,a*100]};Kt.hsl.hcg=function(t){const n=t[1]/100,e=t[2]/100,i=e<.5?2*n*e:2*n*(1-e);let s=0;return i<1&&(s=(e-.5*i)/(1-i)),[t[0],i*100,s*100]};Kt.hsv.hcg=function(t){const n=t[1]/100,e=t[2]/100,i=n*e;let s=0;return i<1&&(s=(e-i)/(1-i)),[t[0],i*100,s*100]};Kt.hcg.rgb=function(t){const n=t[0]/360,e=t[1]/100,i=t[2]/100;if(e===0)return[i*255,i*255,i*255];const s=[0,0,0],r=n%1*6,o=r%1,a=1-o;let l=0;switch(Math.floor(r)){case 0:s[0]=1,s[1]=o,s[2]=0;break;case 1:s[0]=a,s[1]=1,s[2]=0;break;case 2:s[0]=0,s[1]=1,s[2]=o;break;case 3:s[0]=0,s[1]=a,s[2]=1;break;case 4:s[0]=o,s[1]=0,s[2]=1;break;default:s[0]=1,s[1]=0,s[2]=a}return l=(1-e)*i,[(e*s[0]+l)*255,(e*s[1]+l)*255,(e*s[2]+l)*255]};Kt.hcg.hsv=function(t){const n=t[1]/100,e=t[2]/100,i=n+e*(1-n);let s=0;return i>0&&(s=n/i),[t[0],s*100,i*100]};Kt.hcg.hsl=function(t){const n=t[1]/100,i=t[2]/100*(1-n)+.5*n;let s=0;return i>0&&i<.5?s=n/(2*i):i>=.5&&i<1&&(s=n/(2*(1-i))),[t[0],s*100,i*100]};Kt.hcg.hwb=function(t){const n=t[1]/100,e=t[2]/100,i=n+e*(1-n);return[t[0],(i-n)*100,(1-i)*100]};Kt.hwb.hcg=function(t){const n=t[1]/100,i=1-t[2]/100,s=i-n;let r=0;return s<1&&(r=(i-s)/(1-s)),[t[0],s*100,r*100]};Kt.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]};Kt.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]};Kt.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]};Kt.gray.hsl=function(t){return[0,0,t[0]]};Kt.gray.hsv=Kt.gray.hsl;Kt.gray.hwb=function(t){return[0,100,t[0]]};Kt.gray.cmyk=function(t){return[0,0,0,t[0]]};Kt.gray.lab=function(t){return[t[0],0,0]};Kt.gray.hex=function(t){const n=Math.round(t[0]/100*255)&255,i=((n<<16)+(n<<8)+n).toString(16).toUpperCase();return"000000".substring(i.length)+i};Kt.rgb.gray=function(t){return[(t[0]+t[1]+t[2])/3/255*100]};const S_=fD;function x5e(){const t={},n=Object.keys(S_);for(let e=n.length,i=0;i<e;i++)t[n[i]]={distance:-1,parent:null};return t}function A5e(t){const n=x5e(),e=[t];for(n[t].distance=0;e.length;){const i=e.pop(),s=Object.keys(S_[i]);for(let r=s.length,o=0;o<r;o++){const a=s[o],l=n[a];l.distance===-1&&(l.distance=n[i].distance+1,l.parent=i,e.unshift(a))}}return n}function I5e(t,n){return function(e){return n(t(e))}}function R5e(t,n){const e=[n[t].parent,t];let i=S_[n[t].parent][t],s=n[t].parent;for(;n[s].parent;)e.unshift(n[s].parent),i=I5e(S_[n[s].parent][s],i),s=n[s].parent;return i.conversion=e,i}var M5e=function(t){const n=A5e(t),e={},i=Object.keys(n);for(let s=i.length,r=0;r<s;r++){const o=i[r];n[o].parent!==null&&(e[o]=R5e(o,n))}return e};const ek=fD,P5e=M5e,kf={},O5e=Object.keys(ek);function L5e(t){const n=function(...e){const i=e[0];return i==null?i:(i.length>1&&(e=i),t(e))};return"conversion"in t&&(n.conversion=t.conversion),n}function B5e(t){const n=function(...e){const i=e[0];if(i==null)return i;i.length>1&&(e=i);const s=t(e);if(typeof s=="object")for(let r=s.length,o=0;o<r;o++)s[o]=Math.round(s[o]);return s};return"conversion"in t&&(n.conversion=t.conversion),n}O5e.forEach(t=>{kf[t]={},Object.defineProperty(kf[t],"channels",{value:ek[t].channels}),Object.defineProperty(kf[t],"labels",{value:ek[t].labels});const n=P5e(t);Object.keys(n).forEach(i=>{const s=n[i];kf[t][i]=B5e(s),kf[t][i].raw=L5e(s)})});var mD=kf;const F5e=bF(mD),pD=VX({__proto__:null,default:F5e},[mD]),u1=(t,n=0,e=1)=>t>e?e:t<n?n:t,Ys=(t,n=0,e=Math.pow(10,n))=>Math.round(e*t)/e,N5e=t=>H5e(tk(t)),tk=t=>(t[0]==="#"&&(t=t.substring(1)),t.length<6?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:t.length===4?Ys(parseInt(t[3]+t[3],16)/255,2):1}:{r:parseInt(t.substring(0,2),16),g:parseInt(t.substring(2,4),16),b:parseInt(t.substring(4,6),16),a:t.length===8?Ys(parseInt(t.substring(6,8),16)/255,2):1}),V5e=t=>z5e($5e(t)),D5e=({h:t,s:n,v:e,a:i})=>{const s=(200-n)*e/100;return{h:Ys(t),s:Ys(s>0&&s<200?n*e/100/(s<=100?s:200-s)*100:0),l:Ys(s/2),a:Ys(i,2)}},nk=t=>{const{h:n,s:e,l:i}=D5e(t);return`hsl(${n}, ${e}%, ${i}%)`},$5e=({h:t,s:n,v:e,a:i})=>{t=t/360*6,n=n/100,e=e/100;const s=Math.floor(t),r=e*(1-n),o=e*(1-(t-s)*n),a=e*(1-(1-t+s)*n),l=s%6;return{r:Ys([e,o,r,r,a,e][l]*255),g:Ys([a,e,e,o,r,r][l]*255),b:Ys([r,r,a,e,e,o][l]*255),a:Ys(i,2)}},Ev=t=>{const n=t.toString(16);return n.length<2?"0"+n:n},z5e=({r:t,g:n,b:e,a:i})=>{const s=i<1?Ev(Ys(i*255)):"";return"#"+Ev(t)+Ev(n)+Ev(e)+s},H5e=({r:t,g:n,b:e,a:i})=>{const s=Math.max(t,n,e),r=s-Math.min(t,n,e),o=r?s===t?(n-e)/r:s===n?2+(e-t)/r:4+(t-n)/r:0;return{h:Ys(60*(o<0?o+6:o)),s:Ys(s?r/s*100:0),v:Ys(s/255*100),a:i}},gD=(t,n)=>{if(t===n)return!0;for(const e in t)if(t[e]!==n[e])return!1;return!0},U5e=(t,n)=>t.toLowerCase()===n.toLowerCase()?!0:gD(tk(t),tk(n)),YI={},vD=t=>{let n=YI[t];return n||(n=document.createElement("template"),n.innerHTML=t,YI[t]=n),n},qE=(t,n,e)=>{t.dispatchEvent(new CustomEvent(n,{bubbles:!0,detail:e}))};let $f=!1;const ik=t=>"touches"in t,W5e=t=>$f&&!ik(t)?!1:($f||($f=ik(t)),!0),ZI=(t,n)=>{const e=ik(n)?n.touches[0]:n,i=t.el.getBoundingClientRect();qE(t.el,"move",t.getMove({x:u1((e.pageX-(i.left+window.pageXOffset))/i.width),y:u1((e.pageY-(i.top+window.pageYOffset))/i.height)}))},j5e=(t,n)=>{const e=n.keyCode;e>40||t.xy&&e<37||e<33||(n.preventDefault(),qE(t.el,"move",t.getMove({x:e===39?.01:e===37?-.01:e===34?.05:e===33?-.05:e===35?1:e===36?-1:0,y:e===40?.01:e===38?-.01:0},!0)))};class bD{constructor(n,e,i,s){const r=vD(`<div role="slider" tabindex="0" part="${e}" ${i}><div part="${e}-pointer"></div></div>`);n.appendChild(r.content.cloneNode(!0));const o=n.querySelector(`[part=${e}]`);o.addEventListener("mousedown",this),o.addEventListener("touchstart",this),o.addEventListener("keydown",this),this.el=o,this.xy=s,this.nodes=[o.firstChild,o]}set dragging(n){const e=n?document.addEventListener:document.removeEventListener;e($f?"touchmove":"mousemove",this),e($f?"touchend":"mouseup",this)}handleEvent(n){switch(n.type){case"mousedown":case"touchstart":if(n.preventDefault(),!W5e(n)||!$f&&n.button!=0)return;this.el.focus(),ZI(this,n),this.dragging=!0;break;case"mousemove":case"touchmove":n.preventDefault(),ZI(this,n);break;case"mouseup":case"touchend":this.dragging=!1;break;case"keydown":j5e(this,n);break}}style(n){n.forEach((e,i)=>{for(const s in e)this.nodes[i].style.setProperty(s,e[s])})}}class q5e extends bD{constructor(n){super(n,"hue",'aria-label="Hue" aria-valuemin="0" aria-valuemax="360"',!1)}update({h:n}){this.h=n,this.style([{left:`${n/360*100}%`,color:nk({h:n,s:100,v:100,a:1})}]),this.el.setAttribute("aria-valuenow",`${Ys(n)}`)}getMove(n,e){return{h:e?u1(this.h+n.x*360,0,360):360*n.x}}}class K5e extends bD{constructor(n){super(n,"saturation",'aria-label="Color"',!0)}update(n){this.hsva=n,this.style([{top:`${100-n.v}%`,left:`${n.s}%`,color:nk(n)},{"background-color":nk({h:n.h,s:100,v:100,a:1})}]),this.el.setAttribute("aria-valuetext",`Saturation ${Ys(n.s)}%, Brightness ${Ys(n.v)}%`)}getMove(n,e){return{s:e?u1(this.hsva.s+n.x*100,0,100):n.x*100,v:e?u1(this.hsva.v-n.y*100,0,100):Math.round(100-n.y*100)}}}const G5e=':host{display:flex;flex-direction:column;position:relative;width:200px;height:200px;user-select:none;-webkit-user-select:none;cursor:default}:host([hidden]){display:none!important}[role=slider]{position:relative;touch-action:none;user-select:none;-webkit-user-select:none;outline:0}[role=slider]:last-child{border-radius:0 0 8px 8px}[part$=pointer]{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;display:flex;place-content:center center;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}[part$=pointer]::after{content:"";width:100%;height:100%;border-radius:inherit;background-color:currentColor}[role=slider]:focus [part$=pointer]{transform:translate(-50%,-50%) scale(1.1)}',Y5e="[part=hue]{flex:0 0 24px;background:linear-gradient(to right,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red 100%)}[part=hue-pointer]{top:50%;z-index:2}",Z5e="[part=saturation]{flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(to top,#000,transparent),linear-gradient(to right,#fff,rgba(255,255,255,0));box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}[part=saturation-pointer]{z-index:3}",Sv=Symbol("same"),O5=Symbol("color"),XI=Symbol("hsva"),L5=Symbol("update"),JI=Symbol("parts"),QI=Symbol("css"),e7=Symbol("sliders");class X5e extends HTMLElement{static get observedAttributes(){return["color"]}get[QI](){return[G5e,Y5e,Z5e]}get[e7](){return[K5e,q5e]}get color(){return this[O5]}set color(n){if(!this[Sv](n)){const e=this.colorModel.toHsva(n);this[L5](e),this[O5]=n}}constructor(){super();const n=vD(`<style>${this[QI].join("")}</style>`),e=this.attachShadow({mode:"open"});e.appendChild(n.content.cloneNode(!0)),e.addEventListener("move",this),this[JI]=this[e7].map(i=>new i(e))}connectedCallback(){if(this.hasOwnProperty("color")){const n=this.color;delete this.color,this.color=n}else this.color||(this.color=this.colorModel.defaultColor)}attributeChangedCallback(n,e,i){const s=this.colorModel.fromAttr(i);this[Sv](s)||(this.color=s)}handleEvent(n){const e=this[XI],i={...e,...n.detail};this[L5](i);let s;!gD(i,e)&&!this[Sv](s=this.colorModel.fromHsva(i))&&(this[O5]=s,qE(this,"color-changed",{value:s}))}[Sv](n){return this.color&&this.colorModel.equal(n,this.color)}[L5](n){this[XI]=n,this[JI].forEach(e=>e.update(n))}}const J5e={defaultColor:"#000",toHsva:N5e,fromHsva:({h:t,s:n,v:e})=>V5e({h:t,s:n,v:e,a:1}),equal:U5e,fromAttr:t=>t};class Q5e extends X5e{get colorModel(){return J5e}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Us extends _s{constructor(e=[]){super(e,{idProperty:"viewUid"});w(this,"_parentElement");this.on("add",(i,s,r)=>{this._renderViewIntoCollectionParent(s,r)}),this.on("remove",(i,s)=>{s.element&&this._parentElement&&s.element.remove()}),this._parentElement=null}destroy(){this.map(e=>e.destroy())}setParent(e){this._parentElement=e;for(const i of this)this._renderViewIntoCollectionParent(i)}delegate(...e){if(!e.length||!e3e(e))throw new fe("ui-viewcollection-delegate-wrong-events",this);return{to:i=>{for(const s of this)for(const r of e)s.delegate(r).to(i);this.on("add",(s,r)=>{for(const o of e)r.delegate(o).to(i)}),this.on("remove",(s,r)=>{for(const o of e)r.stopDelegating(o,i)})}}}_renderViewIntoCollectionParent(e,i){e.isRendered||e.render(),e.element&&this._parentElement&&this._parentElement.insertBefore(e.element,this._parentElement.children[i])}remove(e){return super.remove(e)}}function e3e(t){return t.every(n=>typeof n=="string")}const t3e="http://www.w3.org/1999/xhtml";class Ba extends Ti(){constructor(e){super();w(this,"ns");w(this,"tag");w(this,"text");w(this,"attributes");w(this,"children");w(this,"eventListeners");w(this,"_isRendered");w(this,"_revertData");Object.assign(this,n7(t7(e))),this._isRendered=!1,this._revertData=null}render(){const e=this._renderNode({intoFragment:!0});return this._isRendered=!0,e}apply(e){return this._revertData=r7(),this._renderNode({node:e,intoFragment:!1,isApplying:!0,revertData:this._revertData}),e}revert(e){if(!this._revertData)throw new fe("ui-template-revert-not-applied",[this,e]);this._revertTemplateFromNode(e,this._revertData)}*getViews(){function*e(i){if(i.children)for(const s of i.children)T_(s)?yield s:KE(s)&&(yield*e(s))}yield*e(this)}static bind(e,i){return{to(s,r){return new n3e({eventNameOrFunction:s,attribute:s,observable:e,emitter:i,callback:r})},if(s,r,o){return new _D({observable:e,emitter:i,attribute:s,valueIfTrue:r,callback:o})}}}static extend(e,i){if(e._isRendered)throw new fe("template-extend-render",[this,e]);kD(e,n7(t7(i)))}_renderNode(e){let i;if(e.node?i=this.tag&&this.text:i=this.tag?this.text:!this.text,i)throw new fe("ui-template-wrong-syntax",this);return this.text?this._renderText(e):this._renderElement(e)}_renderElement(e){let i=e.node;return i||(i=e.node=document.createElementNS(this.ns||t3e,this.tag)),this._renderAttributes(e),this._renderElementChildren(e),this._setUpListeners(e),i}_renderText(e){let i=e.node;return i?e.revertData.text=i.textContent:i=e.node=document.createTextNode(""),Ib(this.text)?this._bindToObservable({schema:this.text,updater:s3e(i),data:e}):i.textContent=this.text.join(""),i}_renderAttributes(e){if(!this.attributes)return;const i=e.node,s=e.revertData;for(const r in this.attributes){const o=i.getAttribute(r),a=this.attributes[r];s&&(s.attributes[r]=o);const l=s7(a)?a[0].ns:null;if(Ib(a)){const c=s7(a)?a[0].value:a;s&&o7(r)&&c.unshift(o),this._bindToObservable({schema:c,updater:r3e(i,r,l),data:e})}else if(r=="style"&&typeof a[0]!="string")this._renderStyleAttribute(a[0],e);else{s&&o&&o7(r)&&a.unshift(o);const c=a.map(u=>u&&(u.value||u)).reduce((u,d)=>u.concat(d),[]).reduce(CD,"");dm(c)||i.setAttributeNS(l,r,c)}}}_renderStyleAttribute(e,i){const s=i.node;for(const r in e){const o=e[r];Ib(o)?this._bindToObservable({schema:[o],updater:o3e(s,r),data:i}):s.style[r]=o}}_renderElementChildren(e){const i=e.node,s=e.intoFragment?document.createDocumentFragment():i,r=e.isApplying;let o=0;for(const a of this.children)if(GE(a)){if(!r){a.setParent(i);for(const l of a)s.appendChild(l.element)}}else if(T_(a))r||(a.isRendered||a.render(),s.appendChild(a.element));else if(Du(a))s.appendChild(a);else if(r){const l=e.revertData,c=r7();l.children.push(c),a._renderNode({intoFragment:!1,node:s.childNodes[o++],isApplying:!0,revertData:c})}else s.appendChild(a.render());e.intoFragment&&i.appendChild(s)}_setUpListeners(e){if(this.eventListeners)for(const i in this.eventListeners){const s=this.eventListeners[i].map(r=>{const[o,a]=i.split("@");return r.activateDomEventListener(o,a,e)});e.revertData&&e.revertData.bindings.push(s)}}_bindToObservable({schema:e,updater:i,data:s}){const r=s.revertData;wD(e,i,s);const o=e.filter(a=>!dm(a)).filter(a=>a.observable).map(a=>a.activateAttributeListener(e,i,s));r&&r.bindings.push(o)}_revertTemplateFromNode(e,i){for(const r of i.bindings)for(const o of r)o();if(i.text){e.textContent=i.text;return}const s=e;for(const r in i.attributes){const o=i.attributes[r];o===null?s.removeAttribute(r):s.setAttribute(r,o)}for(let r=0;r<i.children.length;++r)this._revertTemplateFromNode(s.childNodes[r],i.children[r])}}class j1{constructor(n){w(this,"attribute");w(this,"observable");w(this,"emitter");w(this,"callback");this.attribute=n.attribute,this.observable=n.observable,this.emitter=n.emitter,this.callback=n.callback}getValue(n){const e=this.observable[this.attribute];return this.callback?this.callback(e,n):e}activateAttributeListener(n,e,i){const s=()=>wD(n,e,i);return this.emitter.listenTo(this.observable,`change:${this.attribute}`,s),()=>{this.emitter.stopListening(this.observable,`change:${this.attribute}`,s)}}}class n3e extends j1{constructor(e){super(e);w(this,"eventNameOrFunction");this.eventNameOrFunction=e.eventNameOrFunction}activateDomEventListener(e,i,s){const r=(o,a)=>{(!i||a.target.matches(i))&&(typeof this.eventNameOrFunction=="function"?this.eventNameOrFunction(a):this.observable.fire(this.eventNameOrFunction,a))};return this.emitter.listenTo(s.node,e,r),()=>{this.emitter.stopListening(s.node,e,r)}}}class _D extends j1{constructor(e){super(e);w(this,"valueIfTrue");this.valueIfTrue=e.valueIfTrue}getValue(e){const i=super.getValue(e);return dm(i)?!1:this.valueIfTrue||!0}}function Ib(t){return t?(t.value&&(t=t.value),Array.isArray(t)?t.some(Ib):t instanceof j1):!1}function i3e(t,n){return t.map(e=>e instanceof j1?e.getValue(n):e)}function wD(t,n,{node:e}){const i=i3e(t,e);let s;t.length==1&&t[0]instanceof _D?s=i[0]:s=i.reduce(CD,""),dm(s)?n.remove():n.set(s)}function s3e(t){return{set(n){t.textContent=n},remove(){t.textContent=""}}}function r3e(t,n,e){return{set(i){t.setAttributeNS(e,n,i)},remove(){t.removeAttributeNS(e,n)}}}function o3e(t,n){return{set(e){t.style[n]=e},remove(){t.style[n]=null}}}function t7(t){return W4(t,e=>{if(e&&(e instanceof j1||KE(e)||T_(e)||GE(e)))return e})}function n7(t){if(typeof t=="string"?t=c3e(t):t.text&&u3e(t),t.on&&(t.eventListeners=l3e(t.on),delete t.on),!t.text){t.attributes&&a3e(t.attributes);const n=[];if(t.children)if(GE(t.children))n.push(t.children);else for(const e of t.children)KE(e)||T_(e)||Du(e)?n.push(e):n.push(new Ba(e));t.children=n}return t}function a3e(t){for(const n in t)t[n].value&&(t[n].value=Si(t[n].value)),yD(t,n)}function l3e(t){for(const n in t)yD(t,n);return t}function c3e(t){return{text:[t]}}function u3e(t){t.text=Si(t.text)}function yD(t,n){t[n]=Si(t[n])}function CD(t,n){return dm(n)?t:dm(t)?n:`${t} ${n}`}function i7(t,n){for(const e in n)t[e]?t[e].push(...n[e]):t[e]=n[e]}function kD(t,n){if(n.attributes&&(t.attributes||(t.attributes={}),i7(t.attributes,n.attributes)),n.eventListeners&&(t.eventListeners||(t.eventListeners={}),i7(t.eventListeners,n.eventListeners)),n.text&&t.text.push(...n.text),n.children&&n.children.length){if(t.children.length!=n.children.length)throw new fe("ui-template-extend-children-mismatch",t);let e=0;for(const i of n.children)kD(t.children[e++],i)}}function dm(t){return!t&&t!==0}function T_(t){return t instanceof Rt}function KE(t){return t instanceof Ba}function GE(t){return t instanceof Us}function s7(t){return Li(t[0])&&t[0].ns}function r7(){return{children:[],bindings:[],attributes:{}}}function o7(t){return t=="class"||t=="style"}class Rt extends Rr(li()){constructor(e){super();w(this,"element");w(this,"isRendered");w(this,"locale");w(this,"t");w(this,"template");w(this,"_viewCollections");w(this,"_unboundChildren");w(this,"_bindTemplate");this.element=null,this.isRendered=!1,this.locale=e,this.t=e&&e.t,this._viewCollections=new _s,this._unboundChildren=this.createCollection(),this._viewCollections.on("add",(i,s)=>{s.locale=e,s.t=e&&e.t}),this.decorate("render")}get bindTemplate(){return this._bindTemplate?this._bindTemplate:this._bindTemplate=Ba.bind(this,this)}createCollection(e){const i=new Us(e);return this._viewCollections.add(i),i}registerChild(e){Ao(e)||(e=[e]);for(const i of e)this._unboundChildren.add(i)}deregisterChild(e){Ao(e)||(e=[e]);for(const i of e)this._unboundChildren.remove(i)}setTemplate(e){this.template=new Ba(e)}extendTemplate(e){Ba.extend(this.template,e)}render(){if(this.isRendered)throw new fe("ui-view-render-already-rendered",this);this.template&&(this.element=this.template.render(),this.registerChild(this.template.getViews())),this.isRendered=!0}destroy(){this.stopListening(),this._viewCollections.map(e=>e.destroy()),this.template&&this.template._revertData&&this.template.revert(this.element)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Xu({emitter:t,activator:n,callback:e,contextElements:i}){t.listenTo(document,"mousedown",(s,r)=>{if(!n())return;const o=typeof r.composedPath=="function"?r.composedPath():[],a=typeof i=="function"?i():i;for(const l of a)if(l.contains(r.target)||o.includes(l))return;e()})}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Zw(t){class n extends t{disableCssTransitions(){this._isCssTransitionsDisabled=!0}enableCssTransitions(){this._isCssTransitionsDisabled=!1}constructor(...i){super(...i),this.set("_isCssTransitionsDisabled",!1),this.initializeCssTransitionDisablerMixin()}initializeCssTransitionDisablerMixin(){this.extendTemplate({attributes:{class:[this.bindTemplate.if("_isCssTransitionsDisabled","ck-transitions-disabled")]}})}}return n}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Ih({view:t}){t.listenTo(t.element,"submit",(n,e)=>{e.preventDefault(),t.fire("submit")},{useCapture:!0})}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Xw({keystrokeHandler:t,focusTracker:n,gridItems:e,numberOfColumns:i,uiLanguageDirection:s}){const r=typeof i=="number"?()=>i:i;t.set("arrowright",o((c,u)=>s==="rtl"?l(c,u.length):a(c,u.length))),t.set("arrowleft",o((c,u)=>s==="rtl"?a(c,u.length):l(c,u.length))),t.set("arrowup",o((c,u)=>{let d=c-r();return d<0&&(d=c+r()*Math.floor(u.length/r()),d>u.length-1&&(d-=r())),d})),t.set("arrowdown",o((c,u)=>{let d=c+r();return d>u.length-1&&(d=c%r()),d}));function o(c){return u=>{const d=e.find(m=>m.element===n.focusedElement),f=e.getIndex(d),p=c(f,e);e.get(p).focus(),u.stopPropagation(),u.preventDefault()}}function a(c,u){return c===u-1?0:c+1}function l(c,u){return c===0?u-1:c-1}}const J_=class J_ extends Rt{constructor(){super();const n=this.bindTemplate;this.set("content",""),this.set("viewBox","0 0 20 20"),this.set("fillColor",""),this.set("isColorInherited",!0),this.set("isVisible",!0),this.setTemplate({tag:"svg",ns:"http://www.w3.org/2000/svg",attributes:{class:["ck","ck-icon",n.if("isVisible","ck-hidden",e=>!e),"ck-reset_all-excluded",n.if("isColorInherited","ck-icon_inherit-color")],viewBox:n.to("viewBox")}})}render(){super.render(),this._updateXMLContent(),this._colorFillPaths(),this.on("change:content",()=>{this._updateXMLContent(),this._colorFillPaths()}),this.on("change:fillColor",()=>{this._colorFillPaths()})}_updateXMLContent(){if(this.content){const e=new DOMParser().parseFromString(this.content.trim(),"image/svg+xml").querySelector("svg"),i=e.getAttribute("viewBox");i&&(this.viewBox=i);for(const{name:s,value:r}of Array.from(e.attributes))J_.presentationalAttributeNames.includes(s)&&this.element.setAttribute(s,r);for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(;e.childNodes.length>0;)this.element.appendChild(e.childNodes[0])}}_colorFillPaths(){this.fillColor&&this.element.querySelectorAll(".ck-icon__fill").forEach(n=>{n.style.fill=this.fillColor})}};w(J_,"presentationalAttributeNames",["alignment-baseline","baseline-shift","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-rendering","cursor","direction","display","dominant-baseline","fill","fill-opacity","fill-rule","filter","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","mask","opacity","overflow","paint-order","pointer-events","shape-rendering","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-overflow","text-rendering","transform","unicode-bidi","vector-effect","visibility","white-space","word-spacing","writing-mode"]);let _c=J_;class ED extends Rt{constructor(){super(),this.set({style:void 0,text:void 0,id:void 0});const n=this.bindTemplate;this.setTemplate({tag:"span",attributes:{class:["ck","ck-button__label"],style:n.to("style"),id:n.to("id")},children:[{text:n.to("text")}]})}}class Yt extends Rt{constructor(e,i=new ED){super(e);w(this,"children");w(this,"labelView");w(this,"iconView");w(this,"keystrokeView");w(this,"_focusDelayed",null);const s=this.bindTemplate,r=to();this.set("_ariaPressed",!1),this.set("_ariaChecked",!1),this.set("ariaLabel",void 0),this.set("ariaLabelledBy",`ck-editor__aria-label_${r}`),this.set("class",void 0),this.set("labelStyle",void 0),this.set("icon",void 0),this.set("isEnabled",!0),this.set("isOn",!1),this.set("isVisible",!0),this.set("isToggleable",!1),this.set("keystroke",void 0),this.set("label",void 0),this.set("role",void 0),this.set("tabindex",-1),this.set("tooltip",!1),this.set("tooltipPosition","s"),this.set("type","button"),this.set("withText",!1),this.set("withKeystroke",!1),this.children=this.createCollection(),this.labelView=this._setupLabelView(i),this.iconView=new _c,this.iconView.extendTemplate({attributes:{class:"ck-button__icon"}}),this.keystrokeView=this._createKeystrokeView(),this.bind("_tooltipString").to(this,"tooltip",this,"label",this,"keystroke",this._getTooltipString.bind(this));const o={tag:"button",attributes:{class:["ck","ck-button",s.to("class"),s.if("isEnabled","ck-disabled",a=>!a),s.if("isVisible","ck-hidden",a=>!a),s.to("isOn",a=>a?"ck-on":"ck-off"),s.if("withText","ck-button_with-text"),s.if("withKeystroke","ck-button_with-keystroke")],role:s.to("role"),type:s.to("type",a=>a||"button"),tabindex:s.to("tabindex"),"aria-checked":s.to("_ariaChecked"),"aria-pressed":s.to("_ariaPressed"),"aria-label":s.to("ariaLabel"),"aria-labelledby":s.to("ariaLabelledBy"),"aria-disabled":s.if("isEnabled",!0,a=>!a),"data-cke-tooltip-text":s.to("_tooltipString"),"data-cke-tooltip-position":s.to("tooltipPosition")},children:this.children,on:{click:s.to(a=>{this.isEnabled?this.fire("execute"):a.preventDefault()})}};this.bind("_ariaPressed").to(this,"isOn",this,"isToggleable",this,"role",(a,l,c)=>!l||a7(c)?!1:String(!!a)),this.bind("_ariaChecked").to(this,"isOn",this,"isToggleable",this,"role",(a,l,c)=>!l||!a7(c)?!1:String(!!a)),sn.isSafari&&(this._focusDelayed||(this._focusDelayed=ME(()=>this.focus(),0)),o.on.mousedown=s.to(()=>{this._focusDelayed()}),o.on.mouseup=s.to(()=>{this._focusDelayed.cancel()})),this.setTemplate(o)}render(){super.render(),this.icon&&(this.iconView.bind("content").to(this,"icon"),this.children.add(this.iconView)),this.children.add(this.labelView),this.withKeystroke&&this.keystroke&&this.children.add(this.keystrokeView)}focus(){this.element.focus()}destroy(){this._focusDelayed&&this._focusDelayed.cancel(),super.destroy()}_setupLabelView(e){return e.bind("text","style","id").to(this,"label","labelStyle","ariaLabelledBy"),e}_createKeystrokeView(){const e=new Rt;return e.setTemplate({tag:"span",attributes:{class:["ck","ck-button__keystroke"]},children:[{text:this.bindTemplate.to("keystroke",i=>w_(i))}]}),e}_getTooltipString(e,i,s){return e?typeof e=="string"?e:(s&&(s=w_(s)),e instanceof Function?e(i,s):`${i}${s?` (${s})`:""}`):""}}function a7(t){switch(t){case"radio":case"checkbox":case"option":case"switch":case"menuitemcheckbox":case"menuitemradio":return!0;default:return!1}}class Jw extends Rt{constructor(e,i={}){super(e);w(this,"children");w(this,"iconView");const s=this.bindTemplate;this.set("label",i.label||""),this.set("class",i.class||null),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-form__header",s.to("class")]},children:this.children}),i.icon&&(this.iconView=new _c,this.iconView.content=i.icon,this.children.add(this.iconView));const r=new Rt(e);r.setTemplate({tag:"h2",attributes:{class:["ck","ck-form__header__label"],role:"presentation"},children:[{text:s.to("label")}]}),this.children.add(r)}}class Js extends Ti(){constructor(e){super();w(this,"focusables");w(this,"focusTracker");w(this,"keystrokeHandler");w(this,"actions");if(this.focusables=e.focusables,this.focusTracker=e.focusTracker,this.keystrokeHandler=e.keystrokeHandler,this.actions=e.actions,e.actions&&e.keystrokeHandler)for(const i in e.actions){let s=e.actions[i];typeof s=="string"&&(s=[s]);for(const r of s)e.keystrokeHandler.set(r,(o,a)=>{this[i](),a()},e.keystrokeHandlerOptions)}this.on("forwardCycle",()=>this.focusFirst(),{priority:"low"}),this.on("backwardCycle",()=>this.focusLast(),{priority:"low"})}get first(){return this.focusables.find(B5)||null}get last(){return this.focusables.filter(B5).slice(-1)[0]||null}get next(){return this._getDomFocusableItem(1)}get previous(){return this._getDomFocusableItem(-1)}get current(){let e=null;return this.focusTracker.focusedElement===null?null:(this.focusables.find((i,s)=>{const r=i.element===this.focusTracker.focusedElement;return r&&(e=s),r}),e)}focusFirst(){this._focus(this.first,1)}focusLast(){this._focus(this.last,-1)}focusNext(){const e=this.next;if(e&&this.focusables.getIndex(e)===this.current){this.fire("forwardCycle");return}e===this.first?this.fire("forwardCycle"):this._focus(e,1)}focusPrevious(){const e=this.previous;if(e&&this.focusables.getIndex(e)===this.current){this.fire("backwardCycle");return}e===this.last?this.fire("backwardCycle"):this._focus(e,-1)}chain(e){const i=()=>this.current===null?null:this.focusables.get(this.current);this.listenTo(e,"forwardCycle",s=>{const r=i();this.focusNext(),r!==i()&&s.stop()},{priority:"low"}),this.listenTo(e,"backwardCycle",s=>{const r=i();this.focusPrevious(),r!==i()&&s.stop()},{priority:"low"})}unchain(e){this.stopListening(e)}_focus(e,i){e&&this.focusTracker.focusedElement!==e.element&&e.focus(i)}_getDomFocusableItem(e){const i=this.focusables.length;if(!i)return null;const s=this.current;if(s===null)return this[e===1?"first":"last"];let r=this.focusables.get(s),o=(s+i+e)%i;do{const a=this.focusables.get(o);if(B5(a)){r=a;break}o=(o+i+e)%i}while(o!==s);return r}}function B5(t){return q1(t)&&bc(t.element)}function q1(t){return"focus"in t&&typeof t.focus=="function"}function d3e(t){return q1(t)&&"focusCycler"in t&&t.focusCycler instanceof Js}function h3e(t){class n extends t{constructor(...s){super(...s);w(this,"_onDragBound",this._onDrag.bind(this));w(this,"_onDragEndBound",this._onDragEnd.bind(this));w(this,"_lastDraggingCoordinates",{x:0,y:0});this.on("render",()=>{this._attachListeners()}),this.set("isDragging",!1)}_attachListeners(){this.listenTo(this.element,"mousedown",this._onDragStart.bind(this)),this.listenTo(this.element,"touchstart",this._onDragStart.bind(this))}_attachDragListeners(){this.listenTo($t.document,"mouseup",this._onDragEndBound),this.listenTo($t.document,"touchend",this._onDragEndBound),this.listenTo($t.document,"mousemove",this._onDragBound),this.listenTo($t.document,"touchmove",this._onDragBound)}_detachDragListeners(){this.stopListening($t.document,"mouseup",this._onDragEndBound),this.stopListening($t.document,"touchend",this._onDragEndBound),this.stopListening($t.document,"mousemove",this._onDragBound),this.stopListening($t.document,"touchmove",this._onDragBound)}_onDragStart(s,r){if(!this._isHandleElementPressed(r))return;this._attachDragListeners();let o=0,a=0;r instanceof MouseEvent?(o=r.clientX,a=r.clientY):(o=r.touches[0].clientX,a=r.touches[0].clientY),this._lastDraggingCoordinates={x:o,y:a},this.isDragging=!0}_onDrag(s,r){if(!this.isDragging){this._detachDragListeners();return}let o=0,a=0;r instanceof MouseEvent?(o=r.clientX,a=r.clientY):(o=r.touches[0].clientX,a=r.touches[0].clientY),r.preventDefault(),this.fire("drag",{deltaX:Math.round(o-this._lastDraggingCoordinates.x),deltaY:Math.round(a-this._lastDraggingCoordinates.y)}),this._lastDraggingCoordinates={x:o,y:a}}_onDragEnd(){this._detachDragListeners(),this.isDragging=!1}_isHandleElementPressed(s){return this.dragHandleElement?this.dragHandleElement===s.target||s.target instanceof HTMLElement&&this.dragHandleElement.contains(s.target):!1}}return n}class f3e extends Rt{constructor(e){super(e);w(this,"children");w(this,"keystrokes");w(this,"focusCycler");w(this,"_focusTracker");w(this,"_focusables");this.children=this.createCollection(),this.keystrokes=new Zi,this._focusTracker=new Bi,this._focusables=new Us,this.focusCycler=new Js({focusables:this._focusables,focusTracker:this._focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog__actions"]},children:this.children})}render(){super.render(),this.keystrokes.listenTo(this.element)}setButtons(e){for(const i of e){const s=new Yt(this.locale);let r;s.on("execute",()=>i.onExecute()),i.onCreate&&i.onCreate(s);for(r in i)r!="onExecute"&&r!="onCreate"&&s.set(r,i[r]);this.children.add(s)}this._updateFocusCyclableItems()}focus(e){e===-1?this.focusCycler.focusLast():this.focusCycler.focusFirst()}_updateFocusCyclableItems(){Array.from(this.children).forEach(e=>{this._focusables.add(e),this._focusTracker.add(e.element)})}}class m3e extends Rt{constructor(e){super(e);w(this,"children");this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog__content"]},children:this.children})}reset(){for(;this.children.length;)this.children.remove(0)}}const ho={SCREEN_CENTER:"screen-center",EDITOR_CENTER:"editor-center",EDITOR_TOP_SIDE:"editor-top-side",EDITOR_TOP_CENTER:"editor-top-center",EDITOR_BOTTOM_CENTER:"editor-bottom-center",EDITOR_ABOVE_CENTER:"editor-above-center",EDITOR_BELOW_CENTER:"editor-below-center"},l7=W1("px"),Q_=class Q_ extends h3e(Rt){constructor(e,{getCurrentDomRoot:i,getViewportOffset:s}){super(e);w(this,"parts");w(this,"headerView");w(this,"closeButtonView");w(this,"actionsView");w(this,"contentView");w(this,"keystrokes");w(this,"focusTracker");w(this,"wasMoved",!1);w(this,"_getCurrentDomRoot");w(this,"_getViewportOffset");w(this,"_focusables");w(this,"_focusCycler");const r=this.bindTemplate,o=e.t;this.set("className",""),this.set("ariaLabel",o("Editor dialog")),this.set("isModal",!1),this.set("position",ho.SCREEN_CENTER),this.set("_isVisible",!1),this.set("_isTransparent",!1),this.set("_top",0),this.set("_left",0),this._getCurrentDomRoot=i,this._getViewportOffset=s,this.decorate("moveTo"),this.parts=this.createCollection(),this.keystrokes=new Zi,this.focusTracker=new Bi,this._focusables=new Us,this._focusCycler=new Js({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog-overlay",r.if("isModal","ck-dialog-overlay__transparent",a=>!a),r.if("_isVisible","ck-hidden",a=>!a)],tabindex:"-1"},children:[{tag:"div",attributes:{tabindex:"-1",class:["ck","ck-dialog",r.to("className")],role:"dialog","aria-label":r.to("ariaLabel"),style:{top:r.to("_top",a=>l7(a)),left:r.to("_left",a=>l7(a)),visibility:r.if("_isTransparent","hidden")}},children:this.parts}]})}render(){super.render(),this.keystrokes.set("Esc",(e,i)=>{this.fire("close",{source:"escKeyPress"}),i()}),this.on("drag",(e,{deltaX:i,deltaY:s})=>{this.wasMoved=!0,this.moveBy(i,s)}),this.listenTo($t.window,"resize",()=>{this._isVisible&&!this.wasMoved&&this.updatePosition()}),this.listenTo($t.document,"scroll",()=>{this._isVisible&&!this.wasMoved&&this.updatePosition()}),this.on("change:_isVisible",(e,i,s)=>{s&&(this._isTransparent=!0,setTimeout(()=>{this.updatePosition(),this._isTransparent=!1,this.focus()},10))}),this.keystrokes.listenTo(this.element)}get dragHandleElement(){return this.headerView?this.headerView.element:null}setupParts({icon:e,title:i,hasCloseButton:s=!0,content:r,actionButtons:o}){i&&(this.headerView=new Jw(this.locale,{icon:e}),s&&(this.closeButtonView=this._createCloseButton(),this.headerView.children.add(this.closeButtonView)),this.headerView.label=i,this.ariaLabel=i,this.parts.add(this.headerView,0)),r&&(r instanceof Rt&&(r=[r]),this.contentView=new m3e(this.locale),this.contentView.children.addMany(r),this.parts.add(this.contentView)),o&&(this.actionsView=new f3e(this.locale),this.actionsView.setButtons(o),this.parts.add(this.actionsView)),this._updateFocusCyclableItems()}focus(){this._focusCycler.focusFirst()}moveTo(e,i){const s=this._getViewportRect(),r=this._getDialogRect();e+r.width>s.right&&(e=s.right-r.width),e<s.left&&(e=s.left),i<s.top&&(i=s.top),this._moveTo(e,i)}_moveTo(e,i){this._left=e,this._top=i}moveBy(e,i){this.moveTo(this._left+e,this._top+i)}_moveOffScreen(){this._moveTo(-9999,-9999)}updatePosition(){if(!this.element||!this.element.parentNode)return;const e=this._getViewportRect();let i=this.position,s;this._getCurrentDomRoot()?s=this._getVisibleDomRootRect(e):i=ho.SCREEN_CENTER;const r=Q_.defaultOffset,o=this._getDialogRect();switch(i){case ho.EDITOR_TOP_SIDE:{if(s){const a=this.locale.contentLanguageDirection==="ltr"?s.right-o.width-r:s.left+r;this.moveTo(a,s.top+r)}else this._moveOffScreen();break}case ho.EDITOR_CENTER:{s?this.moveTo(Math.round(s.left+s.width/2-o.width/2),Math.round(s.top+s.height/2-o.height/2)):this._moveOffScreen();break}case ho.SCREEN_CENTER:{this.moveTo(Math.round((e.width-o.width)/2),Math.round((e.height-o.height)/2));break}case ho.EDITOR_TOP_CENTER:{s?this.moveTo(Math.round(s.left+s.width/2-o.width/2),s.top+r):this._moveOffScreen();break}case ho.EDITOR_BOTTOM_CENTER:{s?this.moveTo(Math.round(s.left+s.width/2-o.width/2),s.bottom-o.height-r):this._moveOffScreen();break}case ho.EDITOR_ABOVE_CENTER:{s?this.moveTo(Math.round(s.left+s.width/2-o.width/2),s.top-o.height-r):this._moveOffScreen();break}case ho.EDITOR_BELOW_CENTER:{s?this.moveTo(Math.round(s.left+s.width/2-o.width/2),s.bottom+r):this._moveOffScreen();break}}}_getVisibleDomRootRect(e){let i=new mn(this._getCurrentDomRoot()).getVisible();if(i){if(i=e.getIntersection(i),!i)return null}else return null;return i}_getDialogRect(){return new mn(this.element.firstElementChild)}_getViewportRect(){return p3e(this._getViewportOffset())}_updateFocusCyclableItems(){const e=[];if(this.contentView)for(const i of this.contentView.children)q1(i)&&e.push(i);this.actionsView&&e.push(this.actionsView),this.closeButtonView&&e.push(this.closeButtonView),e.forEach(i=>{this._focusables.add(i),this.focusTracker.add(i.element),d3e(i)&&this._focusCycler.chain(i.focusCycler)})}_createCloseButton(){const e=new Yt(this.locale),i=this.locale.t;return e.set({label:i("Close"),tooltip:!0,icon:kt.cancel}),e.on("execute",()=>this.fire("close",{source:"closeButton"})),e}};w(Q_,"defaultOffset",15);let sk=Q_;function p3e(t){t=Object.assign({top:0,bottom:0,left:0,right:0},t);const n=new mn($t.window);return n.top+=t.top,n.height-=t.top,n.bottom-=t.bottom,n.height-=t.bottom,n.left+=t.left,n.right-=t.right,n.width-=t.left+t.right,n}const cl=class cl extends Be{constructor(e){super(e);w(this,"view");w(this,"_onHide");const i=e.t;this._initShowHideListeners(),this._initFocusToggler(),this._initMultiRootIntegration(),this.set({id:null,isOpen:!1}),e.accessibility.addKeystrokeInfos({categoryId:"navigation",keystrokes:[{label:i("Move focus in and out of an active dialog window"),keystroke:"Ctrl+F6",mayRequireFn:!0}]})}static get pluginName(){return"Dialog"}_initShowHideListeners(){this.on("show",(e,i)=>{this._show(i)}),this.on("show",(e,i)=>{i.onShow&&i.onShow(this)},{priority:"low"}),this.on("hide",()=>{cl._visibleDialogPlugin&&cl._visibleDialogPlugin._hide()}),this.on("hide",()=>{this._onHide&&(this._onHide(this),this._onHide=void 0)},{priority:"low"})}_initFocusToggler(){const e=this.editor;e.keystrokes.set("Ctrl+F6",(i,s)=>{!this.isOpen||this.view.isModal||(this.view.focusTracker.isFocused?e.editing.view.focus():this.view.focus(),s())})}_initMultiRootIntegration(){const e=this.editor.model;e.document.on("change:data",()=>{if(!this.view)return;const i=e.document.differ.getChangedRoots();for(const s of i)s.state&&this.view.updatePosition()})}show(e){this.hide(),this.fire(`show:${e.id}`,e)}_show({id:e,icon:i,title:s,hasCloseButton:r=!0,content:o,actionButtons:a,className:l,isModal:c,position:u,onHide:d}){const f=this.editor;this.view=new sk(f.locale,{getCurrentDomRoot:()=>f.editing.view.getDomRoot(f.model.document.selection.anchor.root.rootName),getViewportOffset:()=>f.ui.viewportOffset});const p=this.view;p.on("close",()=>{this.hide()}),f.ui.view.body.add(p),f.ui.focusTracker.add(p.element),f.keystrokes.listenTo(p.element),u||(u=c?ho.SCREEN_CENTER:ho.EDITOR_CENTER),p.set({position:u,_isVisible:!0,className:l,isModal:c}),p.setupParts({icon:i,title:s,hasCloseButton:r,content:o,actionButtons:a}),this.id=e,d&&(this._onHide=d),this.isOpen=!0,cl._visibleDialogPlugin=this}hide(){cl._visibleDialogPlugin&&cl._visibleDialogPlugin.fire(`hide:${cl._visibleDialogPlugin.id}`)}_hide(){if(!this.view)return;const e=this.editor,i=this.view;i.contentView&&i.contentView.reset(),e.ui.view.body.remove(i),e.ui.focusTracker.remove(i.element),e.keystrokes.stopListening(i.element),i.destroy(),e.editing.view.focus(),this.id=null,this.isOpen=!1,cl._visibleDialogPlugin=null}};w(cl,"_visibleDialogPlugin");let hm=cl;class fm extends Yt{constructor(e,i=new ED){super(e,i);w(this,"_checkIconHolderView",new g3e);this.set({hasCheckSpace:!1,_hasCheck:this.isToggleable});const s=this.bindTemplate;this.extendTemplate({attributes:{class:["ck-list-item-button",s.if("isToggleable","ck-list-item-button_toggleable")]}}),this.bind("_hasCheck").to(this,"hasCheckSpace",this,"isToggleable",(r,o)=>r||o)}render(){super.render(),this._hasCheck&&this.children.add(this._checkIconHolderView,0),this._watchCheckIconHolderMount()}_watchCheckIconHolderMount(){this._checkIconHolderView.bind("isOn").to(this,"isOn",e=>this.isToggleable&&e),this.on("change:_hasCheck",(e,i,s)=>{const{children:r,_checkIconHolderView:o}=this;s?r.add(o,0):r.remove(o)})}}class g3e extends Rt{constructor(){super();w(this,"children");w(this,"_checkIconView",this._createCheckIconView());const e=this.bindTemplate;this.children=this.createCollection(),this.set("isOn",!1),this.setTemplate({tag:"span",children:this.children,attributes:{class:["ck","ck-list-item-button__check-holder",e.to("isOn",i=>i?"ck-on":"ck-off")]}})}render(){super.render(),this.isOn&&this.children.add(this._checkIconView,0),this._watchCheckIconMount()}_watchCheckIconMount(){this.on("change:isOn",(e,i,s)=>{const{children:r,_checkIconView:o}=this;s&&!r.has(o)?r.add(o):!s&&r.has(o)&&r.remove(o)})}_createCheckIconView(){const e=new _c;return e.content=kt.check,e.extendTemplate({attributes:{class:"ck-list-item-button__check-icon"}}),e}}class Xi extends fm{constructor(n){super(n),this.set({withText:!0,withKeystroke:!0,tooltip:!1,role:"menuitem"}),this.extendTemplate({attributes:{class:["ck-menu-bar__menu__item__button"]}})}}class Pa extends Rt{constructor(e){super(e);w(this,"id");this.set("text",void 0),this.set("for",void 0),this.id=`ck-editor__label_${to()}`;const i=this.bindTemplate;this.setTemplate({tag:"label",attributes:{class:["ck","ck-label"],id:this.id,for:i.to("for")},children:[{text:i.to("text")}]})}}class v3e extends Rt{constructor(n,e){super(n);const i=n.t,s=new Pa;s.text=i("Help Contents. To close this dialog press ESC."),this.setTemplate({tag:"div",attributes:{class:["ck","ck-accessibility-help-dialog__content"],"aria-labelledby":s.id,role:"document",tabindex:-1},children:[ka(document,"p",{},i("Below, you can find a list of keyboard shortcuts that can be used in the editor.")),...this._createCategories(Array.from(e.values())),s]})}focus(){this.element.focus()}_createCategories(n){return n.map(e=>{const i=[ka(document,"h3",{},e.label),...Array.from(e.groups.values()).map(s=>this._createGroup(s)).flat()];return e.description&&i.splice(1,0,ka(document,"p",{},e.description)),ka(document,"section",{},i)})}_createGroup(n){const e=n.keystrokes.sort((s,r)=>s.label.localeCompare(r.label)).map(s=>this._createGroupRow(s)).flat(),i=[ka(document,"dl",{},e)];return n.label&&i.unshift(ka(document,"h4",{},n.label)),i}_createGroupRow(n){const e=this.locale.t,i=ka(document,"dt"),s=ka(document,"dd"),r=_3e(n.keystroke),o=[];for(const a of r)o.push(a.map(b3e).join(""));return i.innerHTML=n.label,s.innerHTML=o.join(", ")+(n.mayRequireFn&&sn.isMac?` ${e("(may require <kbd>Fn</kbd>)")}`:""),[i,s]}}function b3e(t){return w_(t).split("+").map(n=>`<kbd>${n}</kbd>`).join("+")}function _3e(t){return typeof t=="string"?[[t]]:typeof t[0]=="string"?[t]:t}var c7='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 6.628a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z"/><path d="M8.5 9.125a.3.3 0 0 0-.253-.296L5.11 8.327a.75.75 0 1 1 .388-1.449l4.04.716c.267.072.624.08.893.009l4.066-.724a.75.75 0 1 1 .388 1.45l-3.132.5a.3.3 0 0 0-.253.296v1.357a.3.3 0 0 0 .018.102l1.615 4.438a.75.75 0 0 1-1.41.513l-1.35-3.71a.3.3 0 0 0-.281-.197h-.209a.3.3 0 0 0-.282.198l-1.35 3.711a.75.75 0 0 1-1.41-.513l1.64-4.509a.3.3 0 0 0 .019-.103V9.125Z"/><path clip-rule="evenodd" d="M10 18.5a8.5 8.5 0 1 1 0-17 8.5 8.5 0 0 1 0 17Zm0 1.5c5.523 0 10-4.477 10-10S15.523 0 10 0 0 4.477 0 10s4.477 10 10 10Z"/></svg>';class SD extends Be{constructor(){super(...arguments);w(this,"contentView",null)}static get requires(){return[hm]}static get pluginName(){return"AccessibilityHelp"}init(){const e=this.editor,i=e.locale.t;e.ui.componentFactory.add("accessibilityHelp",()=>{const s=this._createButton(Yt);return s.set({tooltip:!0,withText:!1,label:i("Accessibility help")}),s}),e.ui.componentFactory.add("menuBar:accessibilityHelp",()=>{const s=this._createButton(Xi);return s.label=i("Accessibility"),s}),e.keystrokes.set("Alt+0",(s,r)=>{this._toggleDialog(),r()}),this._setupRootLabels()}_createButton(e){const i=this.editor,s=i.plugins.get("Dialog"),r=i.locale,o=new e(r);return o.set({keystroke:"Alt+0",icon:c7,isToggleable:!0}),o.on("execute",()=>this._toggleDialog()),o.bind("isOn").to(s,"id",a=>a==="accessibilityHelp"),o}_setupRootLabels(){const e=this.editor,i=e.editing.view,s=e.t;e.ui.on("ready",()=>{i.change(o=>{for(const a of i.document.roots)r(o,a)}),e.on("addRoot",(o,a)=>{const l=e.editing.view.document.getRoot(a.rootName);i.change(c=>r(c,l))},{priority:"low"})});function r(o,a){const c=`${a.getAttribute("aria-label")}. ${s("Press %0 for help.",[w_("Alt+0")])}`;o.setAttribute("aria-label",c,a)}}_toggleDialog(){const e=this.editor,i=e.plugins.get("Dialog"),s=e.locale.t;this.contentView||(this.contentView=new v3e(e.locale,e.accessibility.keystrokeInfos)),i.id==="accessibilityHelp"?i.hide():i.show({id:"accessibilityHelp",className:"ck-accessibility-help-dialog",title:s("Accessibility help"),icon:c7,hasCloseButton:!0,content:this.contentView})}}class w3e extends Us{constructor(e,i=[]){super(i);w(this,"locale");w(this,"_bodyCollectionContainer");this.locale=e}get bodyCollectionContainer(){return this._bodyCollectionContainer}attachToDom(){this._bodyCollectionContainer=new Ba({tag:"div",attributes:{class:["ck","ck-reset_all","ck-body","ck-rounded-corners"],dir:this.locale.uiLanguageDirection,role:"application"},children:this}).render();let e=document.querySelector(".ck-body-wrapper");e||(e=ka(document,"div",{class:"ck-body-wrapper"}),document.body.appendChild(e)),e.appendChild(this._bodyCollectionContainer)}detachFromDom(){super.destroy(),this._bodyCollectionContainer&&this._bodyCollectionContainer.remove();const e=document.querySelector(".ck-body-wrapper");e&&e.childElementCount==0&&e.remove()}}class bh extends Yt{constructor(e){super(e);w(this,"toggleSwitchView");this.isToggleable=!0,this.toggleSwitchView=this._createToggleView(),this.extendTemplate({attributes:{class:"ck-switchbutton"}})}render(){super.render(),this.children.add(this.toggleSwitchView)}_createToggleView(){const e=new Rt;return e.setTemplate({tag:"span",attributes:{class:["ck","ck-button__toggle"]},children:[{tag:"span",attributes:{class:["ck","ck-button__toggle__inner"]}}]}),e}}class u7 extends TD(Yt){}class y3e extends TD(fm){}function TD(t){class n extends t{constructor(...s){super(...s);w(this,"buttonView");w(this,"_fileInputView");this.buttonView=this,this._fileInputView=new C3e(this.locale),this._fileInputView.bind("acceptedType").to(this),this._fileInputView.bind("allowMultipleFiles").to(this),this._fileInputView.delegate("done").to(this),this.on("execute",()=>{this._fileInputView.open()}),this.extendTemplate({attributes:{class:"ck-file-dialog-button"}})}render(){super.render(),this.children.add(this._fileInputView)}}return n}class C3e extends Rt{constructor(n){super(n),this.set("acceptedType",void 0),this.set("allowMultipleFiles",!1);const e=this.bindTemplate;this.setTemplate({tag:"input",attributes:{class:["ck-hidden"],type:"file",tabindex:"-1",accept:e.to("acceptedType"),multiple:e.to("allowMultipleFiles")},on:{change:e.to(()=>{this.element&&this.element.files&&this.element.files.length&&this.fire("done",this.element.files),this.element.value=""})}})}open(){this.element.click()}}var Qw='<svg viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg"><path d="M.941 4.523a.75.75 0 1 1 1.06-1.06l3.006 3.005 3.005-3.005a.75.75 0 1 1 1.06 1.06l-3.549 3.55a.75.75 0 0 1-1.168-.136L.941 4.523z"/></svg>';class YE extends Rt{constructor(e,i){super(e);w(this,"buttonView");w(this,"children");const s=this.bindTemplate;this.set("isCollapsed",!1),this.set("label",""),this.buttonView=this._createButtonView(),this.children=this.createCollection(),this.set("_collapsibleAriaLabelUid",void 0),i&&this.children.addMany(i),this.setTemplate({tag:"div",attributes:{class:["ck","ck-collapsible",s.if("isCollapsed","ck-collapsible_collapsed")]},children:[this.buttonView,{tag:"div",attributes:{class:["ck","ck-collapsible__children"],role:"region",hidden:s.if("isCollapsed","hidden"),"aria-labelledby":s.to("_collapsibleAriaLabelUid")},children:this.children}]})}render(){super.render(),this._collapsibleAriaLabelUid=this.buttonView.labelView.element.id}focus(){this.buttonView.focus()}_createButtonView(){const e=new Yt(this.locale),i=e.bindTemplate;return e.set({withText:!0,icon:Qw}),e.extendTemplate({attributes:{"aria-expanded":i.to("isOn",s=>String(s))}}),e.bind("label").to(this),e.bind("isOn").to(this,"isCollapsed",s=>!s),e.on("execute",()=>{this.isCollapsed=!this.isCollapsed}),e}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function d1(t,n){const e=t.t,i={Black:e("Black"),"Dim grey":e("Dim grey"),Grey:e("Grey"),"Light grey":e("Light grey"),White:e("White"),Red:e("Red"),Orange:e("Orange"),Yellow:e("Yellow"),"Light green":e("Light green"),Green:e("Green"),Aquamarine:e("Aquamarine"),Turquoise:e("Turquoise"),"Light blue":e("Light blue"),Blue:e("Blue"),Purple:e("Purple")};return n.map(s=>{const r=i[s.label];return r&&r!=s.label&&(s.label=r),s})}function h1(t){return t.map(k3e).filter(n=>!!n)}function k3e(t){return typeof t=="string"?{model:t,label:t,hasBorder:!1,view:{name:"span",styles:{color:t}}}:{model:t.color,label:t.label||t.color,hasBorder:t.hasBorder===void 0?!1:t.hasBorder,view:{name:"span",styles:{color:`${t.color}`}}}}var E3e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path class="ck-icon__fill" d="M16.935 5.328a2 2 0 0 1 0 2.829l-7.778 7.778a2 2 0 0 1-2.829 0L3.5 13.107a1.999 1.999 0 1 1 2.828-2.829l.707.707a1 1 0 0 0 1.414 0l5.658-5.657a2 2 0 0 1 2.828 0z"/><path d="M14.814 6.035 8.448 12.4a1 1 0 0 1-1.414 0l-1.413-1.415A1 1 0 1 0 4.207 12.4l2.829 2.829a1 1 0 0 0 1.414 0l7.778-7.778a1 1 0 1 0-1.414-1.415z"/></svg>';class xD extends Yt{constructor(n){super(n);const e=this.bindTemplate;this.set("color",void 0),this.set("hasBorder",!1),this.icon=E3e,this.extendTemplate({attributes:{style:{backgroundColor:e.to("color",i=>sn.isMediaForcedColors?null:i)},class:["ck","ck-color-grid__tile",e.if("hasBorder","ck-color-selector__color-tile_bordered")]}})}render(){super.render(),this.iconView.fillColor="hsl(0, 0%, 100%)"}}class d7 extends Rt{constructor(e,i){super(e);w(this,"columns");w(this,"items");w(this,"focusTracker");w(this,"keystrokes");const s=i&&i.colorDefinitions?i.colorDefinitions:[];this.columns=i&&i.columns?i.columns:5;const r={gridTemplateColumns:`repeat( ${this.columns}, 1fr)`};this.set("selectedColor",void 0),this.items=this.createCollection(),this.focusTracker=new Bi,this.keystrokes=new Zi,this.items.on("add",(o,a)=>{a.isOn=a.color===this.selectedColor}),s.forEach(o=>{const a=new xD;a.set({color:o.color,label:o.label,tooltip:!0,hasBorder:o.options.hasBorder}),a.on("execute",()=>{this.fire("execute",{value:o.color,hasBorder:o.options.hasBorder,label:o.label})}),this.items.add(a)}),this.setTemplate({tag:"div",children:this.items,attributes:{class:["ck","ck-color-grid"],style:r}}),this.on("change:selectedColor",(o,a,l)=>{for(const c of this.items)c.isOn=c.color===l})}focus(){this.items.length&&this.items.first.focus()}focusLast(){this.items.length&&this.items.last.focus()}render(){super.render();for(const e of this.items)this.focusTracker.add(e.element);this.items.on("add",(e,i)=>{this.focusTracker.add(i.element)}),this.items.on("remove",(e,i)=>{this.focusTracker.remove(i.element)}),this.keystrokes.listenTo(this.element),Xw({keystrokeHandler:this.keystrokes,focusTracker:this.focusTracker,gridItems:this.items,numberOfColumns:this.columns,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function AD(t,n){if(!t)return"";const e=ID(t);if(!e)return"";if(e.space===n)return t;if(!A3e(e))return"";const s=pD[e.space][n];if(!s)return"";const r=s(e.space==="hex"?e.hexValue:e.values);return x3e(r,n)}function S3e(t){if(!t)return"";const n=ID(t);return n?n.space==="hex"?n.hexValue:AD(t,"hex"):"#000"}function T3e(t,n){customElements.get(t)===void 0&&customElements.define(t,n)}function x3e(t,n){switch(n){case"hex":return`#${t}`;case"rgb":return`rgb( ${t[0]}, ${t[1]}, ${t[2]} )`;case"hsl":return`hsl( ${t[0]}, ${t[1]}%, ${t[2]}% )`;case"hwb":return`hwb( ${t[0]}, ${t[1]}, ${t[2]} )`;case"lab":return`lab( ${t[0]}% ${t[1]} ${t[2]} )`;case"lch":return`lch( ${t[0]}% ${t[1]} ${t[2]} )`;default:return""}}function ID(t){if(t.startsWith("#")){const e=GI(t);return{space:"hex",values:e.values,hexValue:t,alpha:e.alpha}}const n=GI(t);return n.space?n:null}function A3e(t){return Object.keys(pD).includes(t.space)}class ms extends Rt{constructor(e,i){super(e);w(this,"fieldView");w(this,"labelView");w(this,"statusView");w(this,"fieldWrapperChildren");const s=`ck-labeled-field-view-${to()}`,r=`ck-labeled-field-view-status-${to()}`;this.fieldView=i(this,s,r),this.set("label",void 0),this.set("isEnabled",!0),this.set("isEmpty",!0),this.set("isFocused",!1),this.set("errorText",null),this.set("infoText",null),this.set("class",void 0),this.set("placeholder",void 0),this.labelView=this._createLabelView(s),this.statusView=this._createStatusView(r),this.fieldWrapperChildren=this.createCollection([this.fieldView,this.labelView]),this.bind("_statusText").to(this,"errorText",this,"infoText",(a,l)=>a||l);const o=this.bindTemplate;this.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view",o.to("class"),o.if("isEnabled","ck-disabled",a=>!a),o.if("isEmpty","ck-labeled-field-view_empty"),o.if("isFocused","ck-labeled-field-view_focused"),o.if("placeholder","ck-labeled-field-view_placeholder"),o.if("errorText","ck-error")]},children:[{tag:"div",attributes:{class:["ck","ck-labeled-field-view__input-wrapper"]},children:this.fieldWrapperChildren},this.statusView]})}_createLabelView(e){const i=new Pa(this.locale);return i.for=e,i.bind("text").to(this,"label"),i}_createStatusView(e){const i=new Rt(this.locale),s=this.bindTemplate;return i.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view__status",s.if("errorText","ck-labeled-field-view__status_error"),s.if("_statusText","ck-hidden",r=>!r)],id:e,role:s.if("errorText","alert")},children:[{text:s.to("_statusText")}]}),i}focus(e){this.fieldView.focus(e)}}class I3e extends Rt{constructor(e){super(e);w(this,"focusTracker");this.set("value",void 0),this.set("id",void 0),this.set("placeholder",void 0),this.set("tabIndex",void 0),this.set("isReadOnly",!1),this.set("hasError",!1),this.set("ariaDescribedById",void 0),this.set("ariaLabel",void 0),this.focusTracker=new Bi,this.bind("isFocused").to(this.focusTracker),this.set("isEmpty",!0);const i=this.bindTemplate;this.setTemplate({tag:"input",attributes:{class:["ck","ck-input",i.if("isFocused","ck-input_focused"),i.if("isEmpty","ck-input-text_empty"),i.if("hasError","ck-error")],id:i.to("id"),placeholder:i.to("placeholder"),tabindex:i.to("tabIndex"),readonly:i.to("isReadOnly"),"aria-invalid":i.if("hasError",!0),"aria-describedby":i.to("ariaDescribedById"),"aria-label":i.to("ariaLabel")},on:{input:i.to((...s)=>{this.fire("input",...s),this._updateIsEmpty()}),change:i.to(this._updateIsEmpty.bind(this))}})}render(){super.render(),this.focusTracker.add(this.element),this._setDomElementValue(this.value),this._updateIsEmpty(),this.on("change:value",(e,i,s)=>{this._setDomElementValue(s),this._updateIsEmpty()})}destroy(){super.destroy(),this.focusTracker.destroy()}select(){this.element.select()}focus(){this.element.focus()}reset(){this.value=this.element.value="",this._updateIsEmpty()}_updateIsEmpty(){this.isEmpty=R3e(this.element)}_setDomElementValue(e){this.element.value=!e&&e!==0?"":e}}function R3e(t){return!t.value}class RD extends I3e{constructor(n){super(n),this.set("inputMode","text");const e=this.bindTemplate;this.extendTemplate({attributes:{inputmode:e.to("inputMode")}})}}class MD extends RD{constructor(n){super(n),this.extendTemplate({attributes:{type:"text",class:["ck-input-text"]}})}}class M3e extends RD{constructor(n,{min:e,max:i,step:s}={}){super(n);const r=this.bindTemplate;this.set("min",e),this.set("max",i),this.set("step",s),this.extendTemplate({attributes:{type:"number",class:["ck-input-number"],min:r.to("min"),max:r.to("max"),step:r.to("step")}})}}class P3e extends Rt{constructor(e){super(e);w(this,"children");const i=this.bindTemplate;this.set("isVisible",!1),this.set("position","se"),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-dropdown__panel",i.to("position",s=>`ck-dropdown__panel_${s}`),i.if("isVisible","ck-dropdown__panel-visible")],tabindex:"-1"},children:this.children,on:{selectstart:i.to(s=>{s.target.tagName.toLocaleLowerCase()!=="input"&&s.preventDefault()})}})}focus(){if(this.children.length){const e=this.children.first;typeof e.focus=="function"?e.focus():qn("ui-dropdown-panel-focus-child-missing-focus",{childView:this.children.first,dropdownPanel:this})}}focusLast(){if(this.children.length){const e=this.children.last;typeof e.focusLast=="function"?e.focusLast():e.focus()}}}const Lf=class Lf extends Rt{constructor(e,i,s){super(e);w(this,"buttonView");w(this,"panelView");w(this,"focusTracker");w(this,"keystrokes");w(this,"listView");w(this,"toolbarView");const r=this.bindTemplate;this.buttonView=i,this.panelView=s,this.set("isOpen",!1),this.set("isEnabled",!0),this.set("class",void 0),this.set("id",void 0),this.set("panelPosition","auto"),this.panelView.bind("isVisible").to(this,"isOpen"),this.keystrokes=new Zi,this.focusTracker=new Bi,this.setTemplate({tag:"div",attributes:{class:["ck","ck-dropdown",r.to("class"),r.if("isEnabled","ck-disabled",o=>!o)],id:r.to("id"),"aria-describedby":r.to("ariaDescribedById")},children:[i,s]}),i.extendTemplate({attributes:{class:["ck-dropdown__button"],"data-cke-tooltip-disabled":r.to("isOpen")}})}render(){super.render(),this.focusTracker.add(this.buttonView.element),this.focusTracker.add(this.panelView.element),this.listenTo(this.buttonView,"open",()=>{this.isOpen=!this.isOpen}),this.on("change:isOpen",(i,s,r)=>{if(r)if(this.panelPosition==="auto"){const o=Lf._getOptimalPosition({element:this.panelView.element,target:this.buttonView.element,fitInViewport:!0,positions:this._panelPositions});this.panelView.position=o?o.name:this._panelPositions[0].name}else this.panelView.position=this.panelPosition}),this.keystrokes.listenTo(this.element);const e=(i,s)=>{this.isOpen&&(this.isOpen=!1,s())};this.keystrokes.set("arrowdown",(i,s)=>{this.buttonView.isEnabled&&!this.isOpen&&(this.isOpen=!0,s())}),this.keystrokes.set("arrowright",(i,s)=>{this.isOpen&&s()}),this.keystrokes.set("arrowleft",e),this.keystrokes.set("esc",e)}focus(){this.buttonView.focus()}get _panelPositions(){const{south:e,north:i,southEast:s,southWest:r,northEast:o,northWest:a,southMiddleEast:l,southMiddleWest:c,northMiddleEast:u,northMiddleWest:d}=Lf.defaultPanelPositions;return this.locale.uiLanguageDirection!=="rtl"?[s,r,l,c,e,o,a,u,d,i]:[r,s,c,l,e,a,o,d,u,i]}};w(Lf,"defaultPanelPositions",{south:(e,i)=>({top:e.bottom,left:e.left-(i.width-e.width)/2,name:"s"}),southEast:e=>({top:e.bottom,left:e.left,name:"se"}),southWest:(e,i)=>({top:e.bottom,left:e.left-i.width+e.width,name:"sw"}),southMiddleEast:(e,i)=>({top:e.bottom,left:e.left-(i.width-e.width)/4,name:"sme"}),southMiddleWest:(e,i)=>({top:e.bottom,left:e.left-(i.width-e.width)*3/4,name:"smw"}),north:(e,i)=>({top:e.top-i.height,left:e.left-(i.width-e.width)/2,name:"n"}),northEast:(e,i)=>({top:e.top-i.height,left:e.left,name:"ne"}),northWest:(e,i)=>({top:e.top-i.height,left:e.left-i.width+e.width,name:"nw"}),northMiddleEast:(e,i)=>({top:e.top-i.height,left:e.left-(i.width-e.width)/4,name:"nme"}),northMiddleWest:(e,i)=>({top:e.top-i.height,left:e.left-(i.width-e.width)*3/4,name:"nmw"})}),w(Lf,"_getOptimalPosition",IE);let x_=Lf;class PD extends Yt{constructor(e){super(e);w(this,"arrowView");this.arrowView=this._createArrowView(),this.extendTemplate({attributes:{"aria-haspopup":!0,"aria-expanded":this.bindTemplate.to("isOn",i=>String(i))}}),this.delegate("execute").to(this,"open")}render(){super.render(),this.children.add(this.arrowView)}_createArrowView(){const e=new _c;return e.content=Qw,e.extendTemplate({attributes:{class:"ck-dropdown__arrow"}}),e}}class OD extends Rt{constructor(n){super(n),this.setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__separator"]}})}}class O3e extends Rt{constructor(n){super(n),this.setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__line-break"]}})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function L3e(t){return t.bindTemplate.to(n=>{n.target===t.element&&n.preventDefault()})}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function LD(t){if(Array.isArray(t))return{items:t,removeItems:[]};const n={items:[],removeItems:[]};return t?{...n,...t}:n}const B3e={alignLeft:kt.alignLeft,bold:kt.bold,importExport:kt.importExport,paragraph:kt.paragraph,plus:kt.plus,text:kt.text,threeVerticalDots:kt.threeVerticalDots,pilcrow:kt.pilcrow,dragIndicator:kt.dragIndicator};class _h extends Rt{constructor(e,i){super(e);w(this,"options");w(this,"items");w(this,"focusTracker");w(this,"keystrokes");w(this,"itemsView");w(this,"children");w(this,"focusables");w(this,"_focusCycler");w(this,"_behavior");const s=this.bindTemplate,r=this.t;this.options=i||{},this.set("ariaLabel",r("Editor toolbar")),this.set("maxWidth","auto"),this.items=this.createCollection(),this.focusTracker=new Bi,this.keystrokes=new Zi,this.set("class",void 0),this.set("isCompact",!1),this.itemsView=new F3e(e),this.children=this.createCollection(),this.children.add(this.itemsView),this.focusables=this.createCollection();const o=e.uiLanguageDirection==="rtl";this._focusCycler=new Js({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:[o?"arrowright":"arrowleft","arrowup"],focusNext:[o?"arrowleft":"arrowright","arrowdown"]}});const a=["ck","ck-toolbar",s.to("class"),s.if("isCompact","ck-toolbar_compact")];this.options.shouldGroupWhenFull&&this.options.isFloating&&a.push("ck-toolbar_floating"),this.setTemplate({tag:"div",attributes:{class:a,role:"toolbar","aria-label":s.to("ariaLabel"),style:{maxWidth:s.to("maxWidth")},tabindex:-1},children:this.children,on:{mousedown:L3e(this)}}),this._behavior=this.options.shouldGroupWhenFull?new V3e(this):new N3e(this)}render(){super.render(),this.focusTracker.add(this.element);for(const e of this.items)this.focusTracker.add(e.element);this.items.on("add",(e,i)=>{this.focusTracker.add(i.element)}),this.items.on("remove",(e,i)=>{this.focusTracker.remove(i.element)}),this.keystrokes.listenTo(this.element),this._behavior.render(this)}destroy(){return this._behavior.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy(),super.destroy()}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}fillFromConfig(e,i,s){this.items.addMany(this._buildItemsFromConfig(e,i,s))}_buildItemsFromConfig(e,i,s){const r=LD(e),o=s||r.removeItems;return this._cleanItemsConfiguration(r.items,i,o).map(l=>Li(l)?this._createNestedToolbarDropdown(l,i,o):l==="|"?new OD:l==="-"?new O3e:i.create(l)).filter(l=>!!l)}_cleanItemsConfiguration(e,i,s){const r=e.filter((o,a,l)=>o==="|"?!0:s.indexOf(o)!==-1?!1:o==="-"?this.options.shouldGroupWhenFull?(qn("toolbarview-line-break-ignored-when-grouping-items",l),!1):!0:!Li(o)&&!i.has(o)?(qn("toolbarview-item-unavailable",{item:o}),!1):!0);return this._cleanSeparatorsAndLineBreaks(r)}_cleanSeparatorsAndLineBreaks(e){const i=a=>a!=="-"&&a!=="|",s=e.length,r=e.findIndex(i);if(r===-1)return[];const o=s-e.slice().reverse().findIndex(i);return e.slice(r,o).filter((a,l,c)=>i(a)?!0:!(l>0&&c[l-1]===a))}_createNestedToolbarDropdown(e,i,s){let{label:r,icon:o,items:a,tooltip:l=!0,withText:c=!1}=e;if(a=this._cleanItemsConfiguration(a,i,s),!a.length)return null;const u=this.locale,d=Xs(u);return r||qn("toolbarview-nested-toolbar-dropdown-missing-label",e),d.class="ck-toolbar__nested-toolbar-dropdown",d.buttonView.set({label:r,tooltip:l,withText:!!c}),o!==!1?d.buttonView.icon=B3e[o]||o||kt.threeVerticalDots:d.buttonView.withText=!0,ty(d,()=>d.toolbarView._buildItemsFromConfig(a,i,s)),d}}class F3e extends Rt{constructor(e){super(e);w(this,"children");this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-toolbar__items"]},children:this.children})}}class N3e{constructor(n){const e=n.bindTemplate;n.set("isVertical",!1),n.itemsView.children.bindTo(n.items).using(i=>i),n.focusables.bindTo(n.items).using(i=>q1(i)?i:null),n.extendTemplate({attributes:{class:[e.if("isVertical","ck-toolbar_vertical")]}})}render(){}destroy(){}}class V3e{constructor(n){w(this,"view");w(this,"viewChildren");w(this,"viewFocusables");w(this,"viewItemsView");w(this,"viewFocusTracker");w(this,"viewLocale");w(this,"ungroupedItems");w(this,"groupedItems");w(this,"groupedItemsDropdown");w(this,"resizeObserver",null);w(this,"cachedPadding",null);w(this,"shouldUpdateGroupingOnNextResize",!1);w(this,"viewElement");this.view=n,this.viewChildren=n.children,this.viewFocusables=n.focusables,this.viewItemsView=n.itemsView,this.viewFocusTracker=n.focusTracker,this.viewLocale=n.locale,this.ungroupedItems=n.createCollection(),this.groupedItems=n.createCollection(),this.groupedItemsDropdown=this._createGroupedItemsDropdown(),n.itemsView.children.bindTo(this.ungroupedItems).using(e=>e),this.ungroupedItems.on("change",this._updateFocusCyclableItems.bind(this)),n.children.on("change",this._updateFocusCyclableItems.bind(this)),n.items.on("change",(e,i)=>{const s=i.index,r=Array.from(i.added);for(const o of i.removed)s>=this.ungroupedItems.length?this.groupedItems.remove(o):this.ungroupedItems.remove(o);for(let o=s;o<s+r.length;o++){const a=r[o-s];o>this.ungroupedItems.length?this.groupedItems.add(a,o-this.ungroupedItems.length):this.ungroupedItems.add(a,o)}this._updateGrouping()}),n.extendTemplate({attributes:{class:["ck-toolbar_grouping"]}})}render(n){this.viewElement=n.element,this._enableGroupingOnResize(),this._enableGroupingOnMaxWidthChange(n)}destroy(){this.groupedItemsDropdown.destroy(),this.resizeObserver.destroy()}_updateGrouping(){if(!this.viewElement.ownerDocument.body.contains(this.viewElement))return;if(!bc(this.viewElement)){this.shouldUpdateGroupingOnNextResize=!0;return}const n=this.groupedItems.length;let e;for(;this._areItemsOverflowing;)this._groupLastItem(),e=!0;if(!e&&this.groupedItems.length){for(;this.groupedItems.length&&!this._areItemsOverflowing;)this._ungroupFirstItem();this._areItemsOverflowing&&this._groupLastItem()}this.groupedItems.length!==n&&this.view.fire("groupedItemsUpdate")}get _areItemsOverflowing(){if(!this.ungroupedItems.length)return!1;const n=this.viewElement,e=this.viewLocale.uiLanguageDirection,i=new mn(n.lastChild),s=new mn(n);if(!this.cachedPadding){const r=$t.window.getComputedStyle(n),o=e==="ltr"?"paddingRight":"paddingLeft";this.cachedPadding=Number.parseInt(r[o])}return e==="ltr"?i.right>s.right-this.cachedPadding:i.left<s.left+this.cachedPadding}_enableGroupingOnResize(){let n;this.resizeObserver=new zw(this.viewElement,e=>{(!n||n!==e.contentRect.width||this.shouldUpdateGroupingOnNextResize)&&(this.shouldUpdateGroupingOnNextResize=!1,this._updateGrouping(),n=e.contentRect.width)}),this._updateGrouping()}_enableGroupingOnMaxWidthChange(n){n.on("change:maxWidth",()=>{this._updateGrouping()})}_groupLastItem(){this.groupedItems.length||(this.viewChildren.add(new OD),this.viewChildren.add(this.groupedItemsDropdown),this.viewFocusTracker.add(this.groupedItemsDropdown.element)),this.groupedItems.add(this.ungroupedItems.remove(this.ungroupedItems.last),0)}_ungroupFirstItem(){this.ungroupedItems.add(this.groupedItems.remove(this.groupedItems.first)),this.groupedItems.length||(this.viewChildren.remove(this.groupedItemsDropdown),this.viewChildren.remove(this.viewChildren.last),this.viewFocusTracker.remove(this.groupedItemsDropdown.element))}_createGroupedItemsDropdown(){const n=this.viewLocale,e=n.t,i=Xs(n);return i.class="ck-toolbar__grouped-dropdown",i.panelPosition=n.uiLanguageDirection==="ltr"?"sw":"se",ty(i,this.groupedItems),i.buttonView.set({label:e("Show more items"),tooltip:!0,tooltipPosition:n.uiLanguageDirection==="rtl"?"se":"sw",icon:kt.threeVerticalDots}),i}_updateFocusCyclableItems(){this.viewFocusables.clear(),this.ungroupedItems.map(n=>{q1(n)&&this.viewFocusables.add(n)}),this.groupedItems.length&&this.viewFocusables.add(this.groupedItemsDropdown)}}class wc extends Rt{constructor(e){super(e);w(this,"children");const i=this.bindTemplate;this.set("isVisible",!0),this.children=this.createCollection(),this.setTemplate({tag:"li",attributes:{class:["ck","ck-list__item",i.if("isVisible","ck-hidden",s=>!s)],role:"presentation"},children:this.children})}focus(){this.children.first&&this.children.first.focus()}}class ZE extends Rt{constructor(n){super(n),this.setTemplate({tag:"li",attributes:{class:["ck","ck-list__separator"]}})}}class Rb extends Rt{constructor(e,i=new Pa){super(e);w(this,"labelView");w(this,"items");w(this,"children");const s=this.bindTemplate,r=new ey(e);this.set({label:"",isVisible:!0}),this.labelView=i,this.labelView.bind("text").to(this,"label"),this.children=this.createCollection(),this.children.addMany([this.labelView,r]),r.set({role:"group",ariaLabelledBy:i.id}),r.focusTracker.destroy(),r.keystrokes.destroy(),this.items=r.items,this.setTemplate({tag:"li",attributes:{role:"presentation",class:["ck","ck-list__group",s.if("isVisible","ck-hidden",o=>!o)]},children:this.children})}focus(){if(this.items){const e=this.items.find(i=>!(i instanceof ZE));e&&e.focus()}}}class ey extends Rt{constructor(e){super(e);w(this,"focusables");w(this,"items");w(this,"focusTracker");w(this,"keystrokes");w(this,"_focusCycler");w(this,"_listItemGroupToChangeListeners",new WeakMap);const i=this.bindTemplate;this.focusables=new Us,this.items=this.createCollection(),this.focusTracker=new Bi,this.keystrokes=new Zi,this._focusCycler=new Js({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"arrowup",focusNext:"arrowdown"}}),this.set("ariaLabel",void 0),this.set("ariaLabelledBy",void 0),this.set("role",void 0),this.setTemplate({tag:"ul",attributes:{class:["ck","ck-reset","ck-list"],role:i.to("role"),"aria-label":i.to("ariaLabel"),"aria-labelledby":i.to("ariaLabelledBy")},children:this.items})}render(){super.render();for(const e of this.items)e instanceof Rb?this._registerFocusableItemsGroup(e):e instanceof wc&&this._registerFocusableListItem(e);this.items.on("change",(e,i)=>{for(const s of i.removed)s instanceof Rb?this._deregisterFocusableItemsGroup(s):s instanceof wc&&this._deregisterFocusableListItem(s);for(const s of Array.from(i.added).reverse())s instanceof Rb?this._registerFocusableItemsGroup(s,i.index):this._registerFocusableListItem(s,i.index)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}focusFirst(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}_registerFocusableListItem(e,i){this.focusTracker.add(e.element),this.focusables.add(e,i)}_deregisterFocusableListItem(e){this.focusTracker.remove(e.element),this.focusables.remove(e)}_getOnGroupItemsChangeCallback(e){return(i,s)=>{for(const r of s.removed)this._deregisterFocusableListItem(r);for(const r of Array.from(s.added).reverse())this._registerFocusableListItem(r,this.items.getIndex(e)+s.index)}}_registerFocusableItemsGroup(e,i){Array.from(e.items).forEach((r,o)=>{const a=typeof i<"u"?i+o:void 0;this._registerFocusableListItem(r,a)});const s=this._getOnGroupItemsChangeCallback(e);this._listItemGroupToChangeListeners.set(e,s),e.items.on("change",s)}_deregisterFocusableItemsGroup(e){for(const i of e.items)this._deregisterFocusableListItem(i);e.items.off("change",this._listItemGroupToChangeListeners.get(e)),this._listItemGroupToChangeListeners.delete(e)}}class K1 extends Rt{constructor(e,i){super(e);w(this,"children");w(this,"actionView");w(this,"arrowView");w(this,"keystrokes");w(this,"focusTracker");const s=this.bindTemplate;this.set("class",void 0),this.set("labelStyle",void 0),this.set("icon",void 0),this.set("isEnabled",!0),this.set("isOn",!1),this.set("isToggleable",!1),this.set("isVisible",!0),this.set("keystroke",void 0),this.set("withKeystroke",!1),this.set("label",void 0),this.set("tabindex",-1),this.set("tooltip",!1),this.set("tooltipPosition","s"),this.set("type","button"),this.set("withText",!1),this.children=this.createCollection(),this.actionView=this._createActionView(i),this.arrowView=this._createArrowView(),this.keystrokes=new Zi,this.focusTracker=new Bi,this.setTemplate({tag:"div",attributes:{class:["ck","ck-splitbutton",s.to("class"),s.if("isVisible","ck-hidden",r=>!r),this.arrowView.bindTemplate.if("isOn","ck-splitbutton_open")]},children:this.children})}render(){super.render(),this.children.add(this.actionView),this.children.add(this.arrowView),this.focusTracker.add(this.actionView.element),this.focusTracker.add(this.arrowView.element),this.keystrokes.listenTo(this.element),this.keystrokes.set("arrowright",(e,i)=>{this.focusTracker.focusedElement===this.actionView.element&&(this.arrowView.focus(),i())}),this.keystrokes.set("arrowleft",(e,i)=>{this.focusTracker.focusedElement===this.arrowView.element&&(this.actionView.focus(),i())})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this.actionView.focus()}_createActionView(e){const i=e||new Yt;return e||i.bind("icon","isEnabled","isOn","isToggleable","keystroke","label","tabindex","tooltip","tooltipPosition","type","withText").to(this),i.extendTemplate({attributes:{class:"ck-splitbutton__action"}}),i.delegate("execute").to(this),i}_createArrowView(){const e=new Yt,i=e.bindTemplate;return e.icon=Qw,e.extendTemplate({attributes:{class:["ck-splitbutton__arrow"],"data-cke-tooltip-disabled":i.to("isOn"),"aria-haspopup":!0,"aria-expanded":i.to("isOn",s=>String(s))}}),e.bind("isEnabled").to(this),e.bind("label").to(this),e.bind("tooltip").to(this),e.delegate("execute").to(this,"open"),e}}function Xs(t,n=PD){const e=typeof n=="function"?new n(t):n,i=new P3e(t),s=new x_(t,e,i);return e.bind("isEnabled").to(s),e instanceof K1?e.arrowView.bind("isOn").to(s,"isOpen"):e.bind("isOn").to(s,"isOpen"),D3e(s),s}function ty(t,n,e={}){t.extendTemplate({attributes:{class:["ck-toolbar-dropdown"]}}),t.isOpen?h7(t,n,e):t.once("change:isOpen",()=>h7(t,n,e),{priority:"highest"}),e.enableActiveItemFocusOnDropdownOpen&&ny(t,()=>t.toolbarView.items.find(i=>i.isOn))}function h7(t,n,e){const i=t.locale,s=i.t,r=t.toolbarView=new _h(i),o=typeof n=="function"?n():n;r.ariaLabel=e.ariaLabel||s("Dropdown toolbar"),e.maxWidth&&(r.maxWidth=e.maxWidth),e.class&&(r.class=e.class),e.isCompact&&(r.isCompact=e.isCompact),e.isVertical&&(r.isVertical=!0),o instanceof Us?r.items.bindTo(o).using(a=>a):r.items.addMany(o),t.panelView.children.add(r),r.items.delegate("execute").to(t)}function Ju(t,n,e={}){t.isOpen?f7(t,n,e):t.once("change:isOpen",()=>f7(t,n,e),{priority:"highest"}),ny(t,()=>t.listView.items.find(i=>i instanceof wc?i.children.first.isOn:!1))}function f7(t,n,e){const i=t.locale,s=t.listView=new ey(i),r=typeof n=="function"?n():n;s.ariaLabel=e.ariaLabel,s.role=e.role,BD(t,s.items,r,i),t.panelView.children.add(s),s.items.delegate("execute").to(t)}function ny(t,n){t.on("change:isOpen",()=>{if(!t.isOpen)return;const e=n();e&&(typeof e.focus=="function"?e.focus():qn("ui-dropdown-focus-child-on-open-child-missing-focus",{view:e}))},{priority:Ru.low-10})}function D3e(t){$3e(t),z3e(t),H3e(t),U3e(t),W3e(t),j3e(t)}function $3e(t){t.on("render",()=>{Xu({emitter:t,activator:()=>t.isOpen,callback:()=>{t.isOpen=!1},contextElements:()=>[t.element,...t.focusTracker._elements]})})}function z3e(t){t.on("execute",n=>{n.source instanceof bh||(t.isOpen=!1)})}function H3e(t){t.focusTracker.on("change:isFocused",(n,e,i)=>{t.isOpen&&!i&&(t.isOpen=!1)})}function U3e(t){t.keystrokes.set("arrowdown",(n,e)=>{t.isOpen&&(t.panelView.focus(),e())}),t.keystrokes.set("arrowup",(n,e)=>{t.isOpen&&(t.panelView.focusLast(),e())})}function W3e(t){t.on("change:isOpen",(n,e,i)=>{if(i)return;const s=t.panelView.element;s&&s.contains($t.document.activeElement)&&t.buttonView.focus()})}function j3e(t){t.on("change:isOpen",(n,e,i)=>{i&&t.panelView.focus()},{priority:"low"})}function BD(t,n,e,i){n.on("change",()=>{const s=[...n].reduce((o,a)=>(a instanceof wc&&a.children.first instanceof fm&&o.push(a.children.first),o),[]),r=s.some(o=>o.isToggleable);s.forEach(o=>{o.hasCheckSpace=r})}),n.bindTo(e).using(s=>{if(s.type==="separator")return new ZE(i);if(s.type==="group"){const r=new Rb(i);return r.set({label:s.label}),BD(t,r.items,s.items,i),r.items.delegate("execute").to(t),r}else if(s.type==="button"||s.type==="switchbutton"){const r=s.model.role==="menuitemcheckbox"||s.model.role==="menuitemradio",o=new wc(i);let a;return s.type==="button"?(a=new fm(i),a.set({isToggleable:r})):a=new bh(i),a.bind(...Object.keys(s.model)).to(s.model),a.delegate("execute").to(o),o.children.add(a),o}return null})}const Jo=(t,n,e)=>{const i=new MD(t.locale);return i.set({id:n,ariaDescribedById:e}),i.bind("isReadOnly").to(t,"isEnabled",s=>!s),i.bind("hasError").to(t,"errorText",s=>!!s),i.on("input",()=>{t.errorText=null}),t.bind("isEmpty","isFocused","placeholder").to(i),i},FD=(t,n,e)=>{const i=new M3e(t.locale);return i.set({id:n,ariaDescribedById:e,inputMode:"numeric"}),i.bind("isReadOnly").to(t,"isEnabled",s=>!s),i.bind("hasError").to(t,"errorText",s=>!!s),i.on("input",()=>{t.errorText=null}),t.bind("isEmpty","isFocused","placeholder").to(i),i},XE=(t,n,e)=>{const i=Xs(t.locale);return i.set({id:n,ariaDescribedById:e}),i.bind("isEnabled").to(t),i},q3e=150;class K3e extends Rt{constructor(e,i={}){super(e);w(this,"hexInputRow");w(this,"_debounceColorPickerEvent");w(this,"_config");this.set({color:"",_hexColor:""}),this.hexInputRow=this._createInputRow();const s=this.createCollection();i.hideInput||s.add(this.hexInputRow),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-picker"],tabindex:-1},children:s}),this._config=i,this._debounceColorPickerEvent=Ss(r=>{this.set("color",r),this.fire("colorSelected",{color:this.color})},q3e,{leading:!0}),this.on("set:color",(r,o,a)=>{r.return=AD(a,this._config.format||"hsl")}),this.on("change:color",()=>{this._hexColor=F5(this.color)}),this.on("change:_hexColor",()=>{document.activeElement!==this.picker&&this.picker.setAttribute("color",this._hexColor),F5(this.color)!=F5(this._hexColor)&&(this.color=this._hexColor)})}render(){if(super.render(),T3e("hex-color-picker",Q5e),this.picker=$t.document.createElement("hex-color-picker"),this.picker.setAttribute("class","hex-color-picker"),this.picker.setAttribute("tabindex","-1"),this._createSlidersView(),this.element){this.hexInputRow.element?this.element.insertBefore(this.picker,this.hexInputRow.element):this.element.appendChild(this.picker);const e=document.createElement("style");e.textContent='[role="slider"]:focus [part$="pointer"] {border: 1px solid #fff;outline: 1px solid var(--ck-color-focus-border);box-shadow: 0 0 0 2px #fff;}',this.picker.shadowRoot.appendChild(e)}this.picker.addEventListener("color-changed",e=>{const i=e.detail.value;this._debounceColorPickerEvent(i)})}focus(){/* istanbul ignore next -- @preserve */!this._config.hideInput&&(sn.isGecko||sn.isiOS||sn.isSafari)&&this.hexInputRow.children.get(1).focus(),this.slidersView.first.focus()}_createSlidersView(){const s=[...this.picker.shadowRoot.children].filter(r=>r.getAttribute("role")==="slider").map(r=>new G3e(r));this.slidersView=this.createCollection(),s.forEach(r=>{this.slidersView.add(r)})}_createInputRow(){const e=this._createColorInput();return new Z3e(this.locale,e)}_createColorInput(){const e=new ms(this.locale,Jo),{t:i}=this.locale;return e.set({label:i("HEX"),class:"color-picker-hex-input"}),e.fieldView.bind("value").to(this,"_hexColor",s=>e.isFocused?e.fieldView.value:s.startsWith("#")?s.substring(1):s),e.fieldView.on("input",()=>{const s=e.fieldView.element.value;if(s){const r=ND(s);r&&this._debounceColorPickerEvent(r)}}),e}isValid(){const{t:e}=this.locale;return this._config.hideInput?!0:(this.resetValidationStatus(),this.hexInputRow.getParsedColor()?!0:(this.hexInputRow.inputView.errorText=e('Please enter a valid color (e.g. "ff0000").'),!1))}resetValidationStatus(){this.hexInputRow.inputView.errorText=null}}function F5(t){let n=S3e(t);return n||(n="#000"),n.length===4&&(n="#"+[n[1],n[1],n[2],n[2],n[3],n[3]].join("")),n.toLowerCase()}class G3e extends Rt{constructor(n){super(),this.element=n}focus(){this.element.focus()}}class Y3e extends Rt{constructor(n){super(n),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-picker__hash-view"]},children:"#"})}}class Z3e extends Rt{constructor(e,i){super(e);w(this,"children");w(this,"inputView");this.inputView=i,this.children=this.createCollection([new Y3e,this.inputView]),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-picker__row"]},children:this.children})}getParsedColor(){return ND(this.inputView.fieldView.element.value)}}function ND(t){if(!t)return null;const n=t.trim().replace(/^#/,"");return![3,4,6,8].includes(n.length)||!/^(([0-9a-fA-F]{2}){3,4}|([0-9a-fA-F]){3,4})$/.test(n)?null:`#${n}`}class X3e extends li(_s){constructor(n){super(n),this.set("isEmpty",!0),this.on("change",()=>{this.set("isEmpty",this.length===0)})}add(n,e){return this.find(i=>i.color===n.color)?this:super.add(n,e)}hasColor(n){return!!this.find(e=>e.color===n)}}class J3e extends Rt{constructor(e,{colors:i,columns:s,removeButtonLabel:r,documentColorsLabel:o,documentColorsCount:a,colorPickerLabel:l,focusTracker:c,focusables:u}){super(e);w(this,"items");w(this,"colorDefinitions");w(this,"focusTracker");w(this,"columns");w(this,"documentColors");w(this,"documentColorsCount");w(this,"staticColorsGrid");w(this,"documentColorsGrid");w(this,"colorPickerButtonView");w(this,"removeColorButtonView");w(this,"_focusables");w(this,"_documentColorsLabel");w(this,"_removeButtonLabel");w(this,"_colorPickerLabel");const d=this.bindTemplate;this.set("isVisible",!0),this.focusTracker=c,this.items=this.createCollection(),this.colorDefinitions=i,this.columns=s,this.documentColors=new X3e,this.documentColorsCount=a,this._focusables=u,this._removeButtonLabel=r,this._colorPickerLabel=l,this._documentColorsLabel=o,this.setTemplate({tag:"div",attributes:{class:["ck-color-grids-fragment",d.if("isVisible","ck-hidden",f=>!f)]},children:this.items}),this.removeColorButtonView=this._createRemoveColorButton(),this.items.add(this.removeColorButtonView)}updateDocumentColors(e,i){const s=e.document,r=this.documentColorsCount;this.documentColors.clear();for(const o of s.getRoots()){const a=e.createRangeIn(o);for(const l of a.getItems())if(l.is("$textProxy")&&l.hasAttribute(i)&&(this._addColorToDocumentColors(l.getAttribute(i)),this.documentColors.length>=r))return}}updateSelectedColors(){const e=this.documentColorsGrid,i=this.staticColorsGrid,s=this.selectedColor;i.selectedColor=s,e&&(e.selectedColor=s)}render(){if(super.render(),this.staticColorsGrid=this._createStaticColorsGrid(),this.items.add(this.staticColorsGrid),this.documentColorsCount){const e=Ba.bind(this.documentColors,this.documentColors),i=new Rt(this.locale);i.setTemplate({tag:"span",attributes:{class:["ck","ck-color-grid__label",e.if("isEmpty","ck-hidden")]},children:[{text:this._documentColorsLabel}]}),this.items.add(i),this.documentColorsGrid=this._createDocumentColorsGrid(),this.items.add(this.documentColorsGrid)}this._createColorPickerButton(),this._addColorSelectorElementsToFocusTracker()}focus(){this.removeColorButtonView.focus()}destroy(){super.destroy()}addColorPickerButton(){this.colorPickerButtonView&&(this.items.add(this.colorPickerButtonView),this.focusTracker.add(this.colorPickerButtonView.element),this._focusables.add(this.colorPickerButtonView))}_addColorSelectorElementsToFocusTracker(){this.focusTracker.add(this.removeColorButtonView.element),this._focusables.add(this.removeColorButtonView),this.staticColorsGrid&&(this.focusTracker.add(this.staticColorsGrid.element),this._focusables.add(this.staticColorsGrid)),this.documentColorsGrid&&(this.focusTracker.add(this.documentColorsGrid.element),this._focusables.add(this.documentColorsGrid))}_createColorPickerButton(){this.colorPickerButtonView=new Yt,this.colorPickerButtonView.set({label:this._colorPickerLabel,withText:!0,icon:kt.colorPalette,class:"ck-color-selector__color-picker"}),this.colorPickerButtonView.on("execute",()=>{this.fire("colorPicker:show")})}_createRemoveColorButton(){const e=new Yt;return e.set({withText:!0,icon:kt.eraser,label:this._removeButtonLabel}),e.class="ck-color-selector__remove-color",e.on("execute",()=>{this.fire("execute",{value:null,source:"removeColorButton"})}),e.render(),e}_createStaticColorsGrid(){const e=new d7(this.locale,{colorDefinitions:this.colorDefinitions,columns:this.columns});return e.on("execute",(i,s)=>{this.fire("execute",{value:s.value,source:"staticColorsGrid"})}),e}_createDocumentColorsGrid(){const e=Ba.bind(this.documentColors,this.documentColors),i=new d7(this.locale,{columns:this.columns});return i.extendTemplate({attributes:{class:e.if("isEmpty","ck-hidden")}}),i.items.bindTo(this.documentColors).using(s=>{const r=new xD;return r.set({color:s.color,hasBorder:s.options&&s.options.hasBorder}),s.label&&r.set({label:s.label,tooltip:!0}),r.on("execute",()=>{this.fire("execute",{value:s.color,source:"documentColorsGrid"})}),r}),this.documentColors.on("change:isEmpty",(s,r,o)=>{o&&(i.selectedColor=null)}),i}_addColorToDocumentColors(e){const i=this.colorDefinitions.find(s=>s.color===e);i?this.documentColors.add(Object.assign({},i)):this.documentColors.add({color:e,label:e,options:{hasBorder:!1}})}}class Q3e extends Rt{constructor(e,{focusTracker:i,focusables:s,keystrokes:r,colorPickerViewConfig:o}){super(e);w(this,"items");w(this,"colorPickerView");w(this,"saveButtonView");w(this,"cancelButtonView");w(this,"actionBarView");w(this,"focusTracker");w(this,"keystrokes");w(this,"_focusables");w(this,"_colorPickerViewConfig");this.items=this.createCollection(),this.focusTracker=i,this.keystrokes=r,this.set("isVisible",!1),this.set("selectedColor",void 0),this._focusables=s,this._colorPickerViewConfig=o;const a=this.bindTemplate,{saveButtonView:l,cancelButtonView:c}=this._createActionButtons();this.saveButtonView=l,this.cancelButtonView=c,this.actionBarView=this._createActionBarView({saveButtonView:l,cancelButtonView:c}),this.setTemplate({tag:"div",attributes:{class:["ck-color-picker-fragment",a.if("isVisible","ck-hidden",u=>!u)]},children:this.items})}render(){super.render();const e=new K3e(this.locale,{...this._colorPickerViewConfig});this.colorPickerView=e,this.colorPickerView.render(),this.selectedColor&&(e.color=this.selectedColor),this.listenTo(this,"change:selectedColor",(i,s,r)=>{e.color=r}),this.items.add(this.colorPickerView),this.items.add(this.actionBarView),this._addColorPickersElementsToFocusTracker(),this._stopPropagationOnArrowsKeys(),this._executeOnEnterPress(),this._executeUponColorChange()}destroy(){super.destroy()}focus(){this.colorPickerView.focus()}resetValidationStatus(){this.colorPickerView.resetValidationStatus()}_executeOnEnterPress(){this.keystrokes.set("enter",e=>{this.isVisible&&this.focusTracker.focusedElement!==this.cancelButtonView.element&&this.colorPickerView.isValid()&&(this.fire("execute",{value:this.selectedColor}),e.stopPropagation(),e.preventDefault())})}_stopPropagationOnArrowsKeys(){const e=i=>i.stopPropagation();this.keystrokes.set("arrowright",e),this.keystrokes.set("arrowleft",e),this.keystrokes.set("arrowup",e),this.keystrokes.set("arrowdown",e)}_addColorPickersElementsToFocusTracker(){for(const i of this.colorPickerView.slidersView)this.focusTracker.add(i.element),this._focusables.add(i);const e=this.colorPickerView.hexInputRow.children.get(1);e.element&&(this.focusTracker.add(e.element),this._focusables.add(e)),this.focusTracker.add(this.saveButtonView.element),this._focusables.add(this.saveButtonView),this.focusTracker.add(this.cancelButtonView.element),this._focusables.add(this.cancelButtonView)}_createActionBarView({saveButtonView:e,cancelButtonView:i}){const s=new Rt,r=this.createCollection();return r.add(e),r.add(i),s.setTemplate({tag:"div",attributes:{class:["ck","ck-color-selector_action-bar"]},children:r}),s}_createActionButtons(){const e=this.locale,i=e.t,s=new Yt(e),r=new Yt(e);return s.set({icon:kt.check,class:"ck-button-save",type:"button",withText:!1,label:i("Accept")}),r.set({icon:kt.cancel,class:"ck-button-cancel",type:"button",withText:!1,label:i("Cancel")}),s.on("execute",()=>{this.colorPickerView.isValid()&&this.fire("execute",{source:"colorPickerSaveButton",value:this.selectedColor})}),r.on("execute",()=>{this.fire("colorPicker:cancel")}),{saveButtonView:s,cancelButtonView:r}}_executeUponColorChange(){this.colorPickerView.on("colorSelected",(e,i)=>{this.fire("execute",{value:i.color,source:"colorPicker"}),this.set("selectedColor",i.color)})}}class JE extends Rt{constructor(e,{colors:i,columns:s,removeButtonLabel:r,documentColorsLabel:o,documentColorsCount:a,colorPickerLabel:l,colorPickerViewConfig:c}){super(e);w(this,"focusTracker");w(this,"keystrokes");w(this,"items");w(this,"colorGridsFragmentView");w(this,"colorPickerFragmentView");w(this,"_focusCycler");w(this,"_focusables");w(this,"_colorPickerViewConfig");this.items=this.createCollection(),this.focusTracker=new Bi,this.keystrokes=new Zi,this._focusables=new Us,this._colorPickerViewConfig=c,this._focusCycler=new Js({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.colorGridsFragmentView=new J3e(e,{colors:i,columns:s,removeButtonLabel:r,documentColorsLabel:o,documentColorsCount:a,colorPickerLabel:l,focusTracker:this.focusTracker,focusables:this._focusables}),this.colorPickerFragmentView=new Q3e(e,{focusables:this._focusables,focusTracker:this.focusTracker,keystrokes:this.keystrokes,colorPickerViewConfig:c}),this.set("_isColorGridsFragmentVisible",!0),this.set("_isColorPickerFragmentVisible",!1),this.set("selectedColor",void 0),this.colorGridsFragmentView.bind("isVisible").to(this,"_isColorGridsFragmentVisible"),this.colorPickerFragmentView.bind("isVisible").to(this,"_isColorPickerFragmentVisible"),this.on("change:selectedColor",(u,d,f)=>{this.colorGridsFragmentView.set("selectedColor",f),this.colorPickerFragmentView.set("selectedColor",f)}),this.colorGridsFragmentView.on("change:selectedColor",(u,d,f)=>{this.set("selectedColor",f)}),this.colorPickerFragmentView.on("change:selectedColor",(u,d,f)=>{this.set("selectedColor",f)}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-selector"]},children:this.items})}render(){super.render(),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}appendUI(){this._appendColorGridsFragment(),this._colorPickerViewConfig&&this._appendColorPickerFragment()}showColorPickerFragment(){!this.colorPickerFragmentView.colorPickerView||this._isColorPickerFragmentVisible||(this._isColorPickerFragmentVisible=!0,this.colorPickerFragmentView.focus(),this.colorPickerFragmentView.resetValidationStatus(),this._isColorGridsFragmentVisible=!1)}showColorGridsFragment(){this._isColorGridsFragmentVisible||(this._isColorGridsFragmentVisible=!0,this.colorGridsFragmentView.focus(),this._isColorPickerFragmentVisible=!1)}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}updateDocumentColors(e,i){this.colorGridsFragmentView.updateDocumentColors(e,i)}updateSelectedColors(){this.colorGridsFragmentView.updateSelectedColors()}_appendColorGridsFragment(){this.items.length||(this.items.add(this.colorGridsFragmentView),this.colorGridsFragmentView.delegate("execute").to(this),this.colorGridsFragmentView.delegate("colorPicker:show").to(this))}_appendColorPickerFragment(){this.items.length!==2&&(this.items.add(this.colorPickerFragmentView),this.colorGridsFragmentView.colorPickerButtonView&&this.colorGridsFragmentView.colorPickerButtonView.on("execute",()=>{this.showColorPickerFragment()}),this.colorGridsFragmentView.addColorPickerButton(),this.colorPickerFragmentView.delegate("execute").to(this),this.colorPickerFragmentView.delegate("colorPicker:cancel").to(this))}}class eCe{constructor(n){w(this,"editor");w(this,"_components",new Map);this.editor=n}*names(){for(const n of this._components.values())yield n.originalName}add(n,e){this._components.set(N5(n),{callback:e,originalName:n})}create(n){if(!this.has(n))throw new fe("componentfactory-item-missing",this,{name:n});return this._components.get(N5(n)).callback(this.editor.locale)}has(n){return this._components.has(N5(n))}}function N5(t){return String(t).toLowerCase()}const m7=W1("px"),tCe={top:-99999,left:-99999,name:"arrowless",config:{withArrow:!1}},co=class co extends Rt{constructor(e){super(e);w(this,"content");w(this,"_pinWhenIsVisibleCallback");w(this,"_resizeObserver");const i=this.bindTemplate;this.set("top",0),this.set("left",0),this.set("position","arrow_nw"),this.set("isVisible",!1),this.set("withArrow",!0),this.set("class",void 0),this._pinWhenIsVisibleCallback=null,this._resizeObserver=null,this.content=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-panel",i.to("position",s=>`ck-balloon-panel_${s}`),i.if("isVisible","ck-balloon-panel_visible"),i.if("withArrow","ck-balloon-panel_with-arrow"),i.to("class")],style:{top:i.to("top",m7),left:i.to("left",m7)}},children:this.content})}destroy(){this.hide(),super.destroy()}show(){this.isVisible=!0}hide(){this.isVisible=!1}attachTo(e){const i=Mb(e.target);if(i&&!bc(i))return!1;this.show();const s=co.defaultPositions,r=Object.assign({},{element:this.element,positions:[s.southArrowNorth,s.southArrowNorthMiddleWest,s.southArrowNorthMiddleEast,s.southArrowNorthWest,s.southArrowNorthEast,s.northArrowSouth,s.northArrowSouthMiddleWest,s.northArrowSouthMiddleEast,s.northArrowSouthWest,s.northArrowSouthEast,s.viewportStickyNorth],limiter:$t.document.body,fitInViewport:!0},e),o=co._getOptimalPosition(r)||tCe,a=parseInt(o.left),l=parseInt(o.top),c=o.name,u=o.config||{},{withArrow:d=!0}=u;return this.top=l,this.left=a,this.position=c,this.withArrow=d,!0}pin(e){this.unpin(),this._startPinning(e)&&(this._pinWhenIsVisibleCallback=()=>{this.isVisible?this._startPinning(e):this._stopPinning()},this.listenTo(this,"change:isVisible",this._pinWhenIsVisibleCallback))}unpin(){this._pinWhenIsVisibleCallback&&(this._stopPinning(),this.stopListening(this,"change:isVisible",this._pinWhenIsVisibleCallback),this._pinWhenIsVisibleCallback=null,this.hide())}_startPinning(e){if(!this.attachTo(e))return!1;const i=Mb(e.target),s=e.limiter?Mb(e.limiter):$t.document.body;if(this.listenTo($t.document,"scroll",(r,o)=>{const a=o.target,l=i&&a.contains(i),c=s&&a.contains(s);(l||c||!i||!s)&&this.attachTo(e)},{useCapture:!0}),this.listenTo($t.window,"resize",()=>{this.attachTo(e)}),i&&!this._resizeObserver){const r=()=>{bc(i)||this.unpin()};this._resizeObserver=new zw(i,r)}return!0}_stopPinning(){this.stopListening($t.document,"scroll"),this.stopListening($t.window,"resize"),this._resizeObserver&&(this._resizeObserver.destroy(),this._resizeObserver=null)}static generatePositions(e={}){const{sideOffset:i=co.arrowSideOffset,heightOffset:s=co.arrowHeightOffset,stickyVerticalOffset:r=co.stickyVerticalOffset,config:o}=e;return{northWestArrowSouthWest:(c,u)=>({top:a(c,u),left:c.left-i,name:"arrow_sw",...o&&{config:o}}),northWestArrowSouthMiddleWest:(c,u)=>({top:a(c,u),left:c.left-u.width*.25-i,name:"arrow_smw",...o&&{config:o}}),northWestArrowSouth:(c,u)=>({top:a(c,u),left:c.left-u.width/2,name:"arrow_s",...o&&{config:o}}),northWestArrowSouthMiddleEast:(c,u)=>({top:a(c,u),left:c.left-u.width*.75+i,name:"arrow_sme",...o&&{config:o}}),northWestArrowSouthEast:(c,u)=>({top:a(c,u),left:c.left-u.width+i,name:"arrow_se",...o&&{config:o}}),northArrowSouthWest:(c,u)=>({top:a(c,u),left:c.left+c.width/2-i,name:"arrow_sw",...o&&{config:o}}),northArrowSouthMiddleWest:(c,u)=>({top:a(c,u),left:c.left+c.width/2-u.width*.25-i,name:"arrow_smw",...o&&{config:o}}),northArrowSouth:(c,u)=>({top:a(c,u),left:c.left+c.width/2-u.width/2,name:"arrow_s",...o&&{config:o}}),northArrowSouthMiddleEast:(c,u)=>({top:a(c,u),left:c.left+c.width/2-u.width*.75+i,name:"arrow_sme",...o&&{config:o}}),northArrowSouthEast:(c,u)=>({top:a(c,u),left:c.left+c.width/2-u.width+i,name:"arrow_se",...o&&{config:o}}),northEastArrowSouthWest:(c,u)=>({top:a(c,u),left:c.right-i,name:"arrow_sw",...o&&{config:o}}),northEastArrowSouthMiddleWest:(c,u)=>({top:a(c,u),left:c.right-u.width*.25-i,name:"arrow_smw",...o&&{config:o}}),northEastArrowSouth:(c,u)=>({top:a(c,u),left:c.right-u.width/2,name:"arrow_s",...o&&{config:o}}),northEastArrowSouthMiddleEast:(c,u)=>({top:a(c,u),left:c.right-u.width*.75+i,name:"arrow_sme",...o&&{config:o}}),northEastArrowSouthEast:(c,u)=>({top:a(c,u),left:c.right-u.width+i,name:"arrow_se",...o&&{config:o}}),southWestArrowNorthWest:c=>({top:l(c),left:c.left-i,name:"arrow_nw",...o&&{config:o}}),southWestArrowNorthMiddleWest:(c,u)=>({top:l(c),left:c.left-u.width*.25-i,name:"arrow_nmw",...o&&{config:o}}),southWestArrowNorth:(c,u)=>({top:l(c),left:c.left-u.width/2,name:"arrow_n",...o&&{config:o}}),southWestArrowNorthMiddleEast:(c,u)=>({top:l(c),left:c.left-u.width*.75+i,name:"arrow_nme",...o&&{config:o}}),southWestArrowNorthEast:(c,u)=>({top:l(c),left:c.left-u.width+i,name:"arrow_ne",...o&&{config:o}}),southArrowNorthWest:c=>({top:l(c),left:c.left+c.width/2-i,name:"arrow_nw",...o&&{config:o}}),southArrowNorthMiddleWest:(c,u)=>({top:l(c),left:c.left+c.width/2-u.width*.25-i,name:"arrow_nmw",...o&&{config:o}}),southArrowNorth:(c,u)=>({top:l(c),left:c.left+c.width/2-u.width/2,name:"arrow_n",...o&&{config:o}}),southArrowNorthMiddleEast:(c,u)=>({top:l(c),left:c.left+c.width/2-u.width*.75+i,name:"arrow_nme",...o&&{config:o}}),southArrowNorthEast:(c,u)=>({top:l(c),left:c.left+c.width/2-u.width+i,name:"arrow_ne",...o&&{config:o}}),southEastArrowNorthWest:c=>({top:l(c),left:c.right-i,name:"arrow_nw",...o&&{config:o}}),southEastArrowNorthMiddleWest:(c,u)=>({top:l(c),left:c.right-u.width*.25-i,name:"arrow_nmw",...o&&{config:o}}),southEastArrowNorth:(c,u)=>({top:l(c),left:c.right-u.width/2,name:"arrow_n",...o&&{config:o}}),southEastArrowNorthMiddleEast:(c,u)=>({top:l(c),left:c.right-u.width*.75+i,name:"arrow_nme",...o&&{config:o}}),southEastArrowNorthEast:(c,u)=>({top:l(c),left:c.right-u.width+i,name:"arrow_ne",...o&&{config:o}}),westArrowEast:(c,u)=>({top:c.top+c.height/2-u.height/2,left:c.left-u.width-s,name:"arrow_e",...o&&{config:o}}),eastArrowWest:(c,u)=>({top:c.top+c.height/2-u.height/2,left:c.right+s,name:"arrow_w",...o&&{config:o}}),viewportStickyNorth:(c,u,d,f)=>{const p=f||d;return!c.getIntersection(p)||p.height-c.height>r?null:{top:p.top+r,left:c.left+c.width/2-u.width/2,name:"arrowless",config:{withArrow:!1,...o}}}};function a(c,u){return c.top-u.height-s}function l(c){return c.bottom+s}}};w(co,"arrowSideOffset",25),w(co,"arrowHeightOffset",10),w(co,"stickyVerticalOffset",20),w(co,"_getOptimalPosition",IE),w(co,"defaultPositions",co.generatePositions());let Vs=co;function Mb(t){return hh(t)?t:$w(t)?t.commonAncestorContainer:typeof t=="function"?Mb(t()):null}const p7="ck-tooltip",Bs=class Bs extends Rr(){constructor(e){super();w(this,"tooltipTextView");w(this,"balloonPanelView");w(this,"_currentElementWithTooltip",null);w(this,"_currentTooltipPosition",null);w(this,"_mutationObserver",null);w(this,"_pinTooltipDebounced");w(this,"_unpinTooltipDebounced");w(this,"_watchdogExcluded");if(Bs._editors.add(e),Bs._instance)return Bs._instance;Bs._instance=this,this.tooltipTextView=new Rt(e.locale),this.tooltipTextView.set("text",""),this.tooltipTextView.setTemplate({tag:"span",attributes:{class:["ck","ck-tooltip__text"]},children:[{text:this.tooltipTextView.bindTemplate.to("text")}]}),this.balloonPanelView=new Vs(e.locale),this.balloonPanelView.class=p7,this.balloonPanelView.content.add(this.tooltipTextView),this._mutationObserver=nCe(()=>{this._updateTooltipPosition()}),this._pinTooltipDebounced=Ss(this._pinTooltip,600),this._unpinTooltipDebounced=Ss(this._unpinTooltip,400),this.listenTo($t.document,"keydown",this._onKeyDown.bind(this),{useCapture:!0}),this.listenTo($t.document,"mouseenter",this._onEnterOrFocus.bind(this),{useCapture:!0}),this.listenTo($t.document,"mouseleave",this._onLeaveOrBlur.bind(this),{useCapture:!0}),this.listenTo($t.document,"focus",this._onEnterOrFocus.bind(this),{useCapture:!0}),this.listenTo($t.document,"blur",this._onLeaveOrBlur.bind(this),{useCapture:!0}),this.listenTo($t.document,"scroll",this._onScroll.bind(this),{useCapture:!0}),this._watchdogExcluded=!0}destroy(e){const i=e.ui.view&&e.ui.view.body;Bs._editors.delete(e),this.stopListening(e.ui),i&&i.has(this.balloonPanelView)&&i.remove(this.balloonPanelView),Bs._editors.size||(this._unpinTooltip(),this.balloonPanelView.destroy(),this.stopListening(),Bs._instance=null)}static getPositioningFunctions(e){const i=Bs.defaultBalloonPositions;return{s:[i.southArrowNorth,i.southArrowNorthEast,i.southArrowNorthWest],n:[i.northArrowSouth],e:[i.eastArrowWest],w:[i.westArrowEast],sw:[i.southArrowNorthEast],se:[i.southArrowNorthWest]}[e]}_onKeyDown(e,i){i.key==="Escape"&&this._currentElementWithTooltip&&(this._unpinTooltip(),i.stopPropagation())}_onEnterOrFocus(e,{target:i}){const s=V5(i);if(!s){e.name==="focus"&&this._unpinTooltip();return}s!==this._currentElementWithTooltip&&(this._unpinTooltip(),e.name==="focus"&&!s.matches(":hover")?this._pinTooltip(s,D5(s)):this._pinTooltipDebounced(s,D5(s)))}_onLeaveOrBlur(e,{target:i,relatedTarget:s}){if(e.name==="mouseleave"){if(!hh(i))return;const r=this.balloonPanelView.element,o=r&&(r===s||r.contains(s)),a=!o&&i===r;if(o){this._unpinTooltipDebounced.cancel();return}if(!a&&this._currentElementWithTooltip&&i!==this._currentElementWithTooltip)return;const l=V5(i),c=V5(s);(a||l&&l!==c)&&this._unpinTooltipDebounced()}else{if(this._currentElementWithTooltip&&i!==this._currentElementWithTooltip)return;this._unpinTooltipDebounced()}}_onScroll(e,{target:i}){this._currentElementWithTooltip&&(i.contains(this.balloonPanelView.element)&&i.contains(this._currentElementWithTooltip)||this._unpinTooltip())}_pinTooltip(e,{text:i,position:s,cssClass:r}){this._unpinTooltip();const o=bs(Bs._editors.values()).ui.view.body;o.has(this.balloonPanelView)||o.add(this.balloonPanelView),this.tooltipTextView.text=i,this.balloonPanelView.class=[p7,r].filter(a=>a).join(" "),this.balloonPanelView.pin({target:e,positions:Bs.getPositioningFunctions(s)}),this._mutationObserver.attach(e);for(const a of Bs._editors)this.listenTo(a.ui,"update",this._updateTooltipPosition.bind(this),{priority:"low"});this._currentElementWithTooltip=e,this._currentTooltipPosition=s}_unpinTooltip(){this._unpinTooltipDebounced.cancel(),this._pinTooltipDebounced.cancel(),this.balloonPanelView.unpin();for(const e of Bs._editors)this.stopListening(e.ui,"update");this._currentElementWithTooltip=null,this._currentTooltipPosition=null,this.tooltipTextView.text="",this._mutationObserver.detach()}_updateTooltipPosition(){if(!this._currentElementWithTooltip)return;const e=D5(this._currentElementWithTooltip);if(!bc(this._currentElementWithTooltip)||!e.text){this._unpinTooltip();return}this.balloonPanelView.pin({target:this._currentElementWithTooltip,positions:Bs.getPositioningFunctions(e.position)})}};w(Bs,"defaultBalloonPositions",Vs.generatePositions({heightOffset:5,sideOffset:13})),w(Bs,"_editors",new Set),w(Bs,"_instance",null);let rk=Bs;function V5(t){return hh(t)?t.closest("[data-cke-tooltip-text]:not([data-cke-tooltip-disabled])"):null}function D5(t){return{text:t.dataset.ckeTooltipText,position:t.dataset.ckeTooltipPosition||"s",cssClass:t.dataset.ckeTooltipClass||""}}function nCe(t){const n=new MutationObserver(()=>{t()});return{attach(e){n.observe(e,{attributes:!0,attributeFilter:["data-cke-tooltip-text","data-cke-tooltip-position"]})},detach(){n.disconnect()}}}var iCe=`<svg xmlns="http://www.w3.org/2000/svg" width="53" height="10" viewBox="0 0 53 10"><path fill="#1C2331" d="M31.724 1.492a15.139 15.139 0 0 0 .045 1.16 2.434 2.434 0 0 0-.687-.34 3.68 3.68 0 0 0-1.103-.166 2.332 2.332 0 0 0-1.14.255 1.549 1.549 0 0 0-.686.87c-.15.41-.225.98-.225 1.712 0 .939.148 1.659.444 2.161.297.503.792.754 1.487.754.452.015.9-.094 1.294-.316.296-.174.557-.4.771-.669l.14.852h1.282V.007h-1.623v1.485ZM31 6.496a1.77 1.77 0 0 1-.494.061.964.964 0 0 1-.521-.127.758.758 0 0 1-.296-.466 3.984 3.984 0 0 1-.093-.992 4.208 4.208 0 0 1 .098-1.052.753.753 0 0 1 .307-.477 1.08 1.08 0 0 1 .55-.122c.233-.004.466.026.69.089l.483.144v2.553c-.11.076-.213.143-.307.2a1.73 1.73 0 0 1-.417.189ZM35.68 0l-.702.004c-.322.002-.482.168-.48.497l.004.581c.002.33.164.493.486.49l.702-.004c.322-.002.481-.167.48-.496L36.165.49c-.002-.33-.164-.493-.486-.491ZM36.145 2.313l-1.612.01.034 5.482 1.613-.01-.035-5.482ZM39.623.79 37.989.8 38 2.306l-.946.056.006 1.009.949-.006.024 2.983c.003.476.143.844.419 1.106.275.26.658.39 1.148.387.132 0 .293-.01.483-.03.19-.02.38-.046.57-.08.163-.028.324-.068.482-.119l-.183-1.095-.702.004a.664.664 0 0 1-.456-.123.553.553 0 0 1-.14-.422l-.016-2.621 1.513-.01-.006-1.064-1.514.01-.01-1.503ZM46.226 2.388c-.41-.184-.956-.274-1.636-.27-.673.004-1.215.101-1.627.29-.402.179-.72.505-.888.91-.18.419-.268.979-.264 1.68.004.688.1 1.24.285 1.655.172.404.495.724.9.894.414.18.957.268 1.63.264.68-.004 1.224-.099 1.632-.284.4-.176.714-.501.878-.905.176-.418.263-.971.258-1.658-.004-.702-.097-1.261-.28-1.677a1.696 1.696 0 0 0-.888-.9Zm-.613 3.607a.77.77 0 0 1-.337.501 1.649 1.649 0 0 1-1.317.009.776.776 0 0 1-.343-.497 4.066 4.066 0 0 1-.105-1.02 4.136 4.136 0 0 1 .092-1.03.786.786 0 0 1 .337-.507 1.59 1.59 0 0 1 1.316-.008.79.79 0 0 1 .344.502c.078.337.113.683.105 1.03.012.343-.019.685-.092 1.02ZM52.114 2.07a2.67 2.67 0 0 0-1.128.278c-.39.191-.752.437-1.072.73l-.157-.846-1.273.008.036 5.572 1.623-.01-.024-3.78c.35-.124.646-.22.887-.286.26-.075.53-.114.8-.118l.45-.003.144-1.546-.286.001ZM22.083 7.426l-1.576-2.532a2.137 2.137 0 0 0-.172-.253 1.95 1.95 0 0 0-.304-.29.138.138 0 0 1 .042-.04 1.7 1.7 0 0 0 .328-.374l1.75-2.71c.01-.015.025-.028.024-.048-.01-.01-.021-.007-.031-.007L20.49 1.17a.078.078 0 0 0-.075.045l-.868 1.384c-.23.366-.46.732-.688 1.099a.108.108 0 0 1-.112.06c-.098-.005-.196-.001-.294-.002-.018 0-.038.006-.055-.007.002-.02.002-.039.005-.058a4.6 4.6 0 0 0 .046-.701V1.203c0-.02-.009-.032-.03-.03h-.033L16.93 1.17c-.084 0-.073-.01-.073.076v6.491c-.001.018.006.028.025.027h1.494c.083 0 .072.007.072-.071v-2.19c0-.055-.003-.11-.004-.166a3.366 3.366 0 0 0-.05-.417h.06c.104 0 .209.002.313-.002a.082.082 0 0 1 .084.05c.535.913 1.07 1.824 1.607 2.736a.104.104 0 0 0 .103.062c.554-.003 1.107-.002 1.66-.002l.069-.003-.019-.032-.188-.304ZM27.112 6.555c-.005-.08-.004-.08-.082-.08h-2.414c-.053 0-.106-.003-.159-.011a.279.279 0 0 1-.246-.209.558.558 0 0 1-.022-.15c0-.382 0-.762-.002-1.143 0-.032.007-.049.042-.044h2.504c.029.003.037-.012.034-.038V3.814c0-.089.013-.078-.076-.078h-2.44c-.07 0-.062.003-.062-.06v-.837c0-.047.004-.093.013-.14a.283.283 0 0 1 .241-.246.717.717 0 0 1 .146-.011h2.484c.024.002.035-.009.036-.033l.003-.038.03-.496c.01-.183.024-.365.034-.548.005-.085.003-.087-.082-.094-.218-.018-.437-.038-.655-.05a17.845 17.845 0 0 0-.657-.026 72.994 72.994 0 0 0-1.756-.016 1.7 1.7 0 0 0-.471.064 1.286 1.286 0 0 0-.817.655c-.099.196-.149.413-.145.633v3.875c0 .072.003.144.011.216a1.27 1.27 0 0 0 .711 1.029c.228.113.48.167.734.158.757-.005 1.515.002 2.272-.042.274-.016.548-.034.82-.053.03-.002.043-.008.04-.041-.008-.104-.012-.208-.019-.312a69.964 69.964 0 0 1-.05-.768ZM16.14 7.415l-.127-1.075c-.004-.03-.014-.04-.044-.037a13.125 13.125 0 0 1-.998.073c-.336.01-.672.02-1.008.016-.116-.001-.233-.014-.347-.039a.746.746 0 0 1-.45-.262c-.075-.1-.132-.211-.167-.33a3.324 3.324 0 0 1-.126-.773 9.113 9.113 0 0 1-.015-.749c0-.285.022-.57.065-.852.023-.158.066-.312.127-.46a.728.728 0 0 1 .518-.443 1.64 1.64 0 0 1 .397-.048c.628-.001 1.255.003 1.882.05.022.001.033-.006.036-.026l.003-.031.06-.55c.019-.177.036-.355.057-.532.004-.034-.005-.046-.04-.056a5.595 5.595 0 0 0-1.213-.21 10.783 10.783 0 0 0-.708-.02c-.24-.003-.48.01-.719.041a3.477 3.477 0 0 0-.625.14 1.912 1.912 0 0 0-.807.497c-.185.2-.33.433-.424.688a4.311 4.311 0 0 0-.24 1.096c-.031.286-.045.572-.042.86-.006.43.024.86.091 1.286.04.25.104.497.193.734.098.279.26.53.473.734.214.205.473.358.756.446.344.11.702.17 1.063.177a8.505 8.505 0 0 0 1.578-.083 6.11 6.11 0 0 0 .766-.18c.03-.008.047-.023.037-.057a.157.157 0 0 1-.003-.025Z"/><path fill="#AFE229" d="M6.016 6.69a1.592 1.592 0 0 0-.614.21c-.23.132-.422.32-.56.546-.044.072-.287.539-.287.539l-.836 1.528.009.006c.038.025.08.046.123.063.127.046.26.07.395.073.505.023 1.011-.007 1.517-.003.29.009.58.002.869-.022a.886.886 0 0 0 .395-.116.962.962 0 0 0 .312-.286c.056-.083.114-.163.164-.249.24-.408.48-.816.718-1.226.075-.128.148-.257.222-.386l.112-.192a1.07 1.07 0 0 0 .153-.518l-1.304.023s-1.258-.005-1.388.01Z"/><path fill="#771BFF" d="m2.848 9.044.76-1.39.184-.352c-.124-.067-.245-.14-.367-.21-.346-.204-.706-.384-1.045-.6a.984.984 0 0 1-.244-.207c-.108-.134-.136-.294-.144-.46-.021-.409-.002-.818-.009-1.227-.003-.195 0-.39.003-.585.004-.322.153-.553.427-.713l.833-.488c.22-.13.44-.257.662-.385.05-.029.105-.052.158-.077.272-.128.519-.047.76.085l.044.028c.123.06.242.125.358.196.318.178.635.357.952.537.095.056.187.117.275.184.194.144.254.35.266.578.016.284.007.569.006.853-.001.28.004.558 0 .838.592-.003 1.259 0 1.259 0l.723-.013c-.003-.292-.007-.584-.007-.876 0-.524.015-1.048-.016-1.571-.024-.42-.135-.8-.492-1.067a5.02 5.02 0 0 0-.506-.339A400.52 400.52 0 0 0 5.94.787C5.722.664 5.513.524 5.282.423 5.255.406 5.228.388 5.2.373 4.758.126 4.305-.026 3.807.21c-.097.046-.197.087-.29.14A699.896 699.896 0 0 0 .783 1.948c-.501.294-.773.717-.778 1.31-.004.36-.009.718-.001 1.077.016.754-.017 1.508.024 2.261.016.304.07.6.269.848.127.15.279.28.448.382.622.4 1.283.734 1.92 1.11l.183.109Z"/></svg>
`;const sCe=53,rCe=10,oCe=50,aCe=350,lCe="Powered by";class cCe extends Rr(){constructor(e){super();w(this,"editor");w(this,"_balloonView");w(this,"_showBalloonThrottled");w(this,"_lastFocusedEditableElement");this.editor=e,this._balloonView=null,this._lastFocusedEditableElement=null,this._showBalloonThrottled=Jf(this._showBalloon.bind(this),50,{leading:!0}),e.on("ready",this._handleEditorReady.bind(this))}destroy(){const e=this._balloonView;e&&(e.unpin(),this._balloonView=null),this._showBalloonThrottled.cancel(),this.stopListening()}_handleEditorReady(){const e=this.editor,i=!!e.config.get("ui.poweredBy.forceVisible");/* istanbul ignore next -- @preserve */!i&&Jve(e.config.get("licenseKey"))==="VALID"||e.ui.view&&(e.ui.focusTracker.on("change:isFocused",(s,r,o)=>{this._updateLastFocusedEditableElement(),o?this._showBalloon():this._hideBalloon()}),e.ui.focusTracker.on("change:focusedElement",(s,r,o)=>{this._updateLastFocusedEditableElement(),o&&this._showBalloon()}),e.ui.on("update",()=>{this._showBalloonThrottled()}))}_createBalloonView(){const e=this.editor,i=this._balloonView=new Vs,s=DD(e),r=new uCe(e.locale,s.label);i.content.add(r),i.set({class:"ck-powered-by-balloon"}),e.ui.view.body.add(i),e.ui.focusTracker.add(i.element),this._balloonView=i}_showBalloon(){if(!this._lastFocusedEditableElement)return;const e=dCe(this.editor,this._lastFocusedEditableElement);e&&(this._balloonView||this._createBalloonView(),this._balloonView.pin(e))}_hideBalloon(){this._balloonView&&this._balloonView.unpin()}_updateLastFocusedEditableElement(){const e=this.editor,i=e.ui.focusTracker.isFocused,s=e.ui.focusTracker.focusedElement;if(!i||!s){this._lastFocusedEditableElement=null;return}const r=Array.from(e.ui.getEditableElementsNames()).map(o=>e.ui.getEditableElement(o));r.includes(s)?this._lastFocusedEditableElement=s:this._lastFocusedEditableElement=r[0]}}class uCe extends Rt{constructor(n,e){super(n);const i=new _c,s=this.bindTemplate;i.set({content:iCe,isColorInherited:!1}),i.extendTemplate({attributes:{style:{width:sCe+"px",height:rCe+"px"}}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-powered-by"],"aria-hidden":!0},children:[{tag:"a",attributes:{href:"https://ckeditor.com/?utm_source=ckeditor&utm_medium=referral&utm_campaign=701Dn000000hVgmIAE_powered_by_ckeditor_logo",target:"_blank",tabindex:"-1"},children:[...e?[{tag:"span",attributes:{class:["ck","ck-powered-by__label"]},children:[e]}]:[],i],on:{dragstart:s.to(r=>r.preventDefault())}}]})}}function dCe(t,n){const e=DD(t),i=e.side==="right"?hCe(n,e):fCe(n,e);return{target:n,positions:[i]}}function hCe(t,n){return VD(t,n,(e,i)=>e.left+e.width-i.width-n.horizontalOffset)}function fCe(t,n){return VD(t,n,e=>e.left+n.horizontalOffset)}function VD(t,n,e){return(i,s)=>{const r=new mn(t);if(r.width<aCe||r.height<oCe)return null;let o;n.position==="inside"?o=r.bottom-s.height:o=r.bottom-s.height/2,o-=n.verticalOffset;const a=e(r,s),c=i.clone().moveTo(a,o).getIntersection(s.clone().moveTo(a,o)).getVisible();return!c||c.getArea()<s.getArea()?null:{top:o,left:a,name:`position_${n.position}-side_${n.side}`,config:{withArrow:!1}}}}function DD(t){const n=t.config.get("ui.poweredBy"),e=n&&n.position||"border";return{position:e,label:lCe,verticalOffset:e==="inside"?5:0,horizontalOffset:5,side:t.locale.contentLanguageDirection==="ltr"?"right":"left",...n}}const g7={POLITE:"polite",ASSERTIVE:"assertive"};class mCe{constructor(n){w(this,"editor");w(this,"view");this.editor=n,n.once("ready",()=>{for(const e of Object.values(g7))this.announce("",e)})}announce(n,e=g7.POLITE){const i=this.editor;if(!i.ui.view)return;this.view||(this.view=new pCe(i.locale),i.ui.view.body.add(this.view));const{politeness:s,isUnsafeHTML:r}=typeof e=="string"?{politeness:e}:e;let o=this.view.regionViews.find(a=>a.politeness===s);o||(o=new gCe(i,s),this.view.regionViews.add(o)),o.announce({announcement:n,isUnsafeHTML:r})}}class pCe extends Rt{constructor(e){super(e);w(this,"regionViews");this.regionViews=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-aria-live-announcer"]},children:this.regionViews})}}class gCe extends Rt{constructor(e,i){super(e.locale);w(this,"politeness");w(this,"_domConverter");w(this,"_pruneAnnouncementsInterval");this.setTemplate({tag:"div",attributes:{"aria-live":i,"aria-relevant":"additions"},children:[{tag:"ul",attributes:{class:["ck","ck-aria-live-region-list"]}}]}),e.on("destroy",()=>{this._pruneAnnouncementsInterval!==null&&(clearInterval(this._pruneAnnouncementsInterval),this._pruneAnnouncementsInterval=null)}),this.politeness=i,this._domConverter=e.data.htmlProcessor.domConverter,this._pruneAnnouncementsInterval=setInterval(()=>{this.element&&this._listElement.firstChild&&this._listElement.firstChild.remove()},5e3)}announce({announcement:e,isUnsafeHTML:i}){if(!e.trim().length)return;const s=document.createElement("li");i?this._domConverter.setContentOf(s,e):s.innerText=e,this._listElement.appendChild(s)}get _listElement(){return this.element.querySelector("ul")}}class Rh extends wc{constructor(n,e){super(n);const i=this.bindTemplate;this.extendTemplate({attributes:{class:["ck-menu-bar__menu__item"]},on:{mouseenter:i.to("mouseenter")}}),this.delegate("mouseenter").to(e)}}const Tv=5,lf={toggleMenusAndFocusItemsOnHover(t){t.on("menu:mouseenter",n=>{if(!(!t.isFocusBorderEnabled&&!t.isOpen)){if(t.isOpen)for(const e of t.menus){const i=n.path[0],s=i instanceof Rh&&i.children.first===e;e.isOpen=(n.path.includes(e)||s)&&e.isEnabled}n.source.focus()}})},focusCycleMenusOnArrows(t){const n=t.locale.uiLanguageDirection==="rtl";t.on("menu:arrowright",i=>{e(i.source,n?-1:1)}),t.on("menu:arrowleft",i=>{e(i.source,n?1:-1)});function e(i,s){const r=t.children.getIndex(i),o=i.isOpen,a=t.children.length,l=t.children.get((r+a+s)%a);i.isOpen=!1,o&&(l.isOpen=!0),l.buttonView.focus()}},closeMenusWhenTheBarCloses(t){t.on("change:isOpen",()=>{t.isOpen||t.menus.forEach(n=>{n.isOpen=!1})})},closeMenuWhenAnotherOnTheSameLevelOpens(t){t.on("menu:change:isOpen",(n,e,i)=>{i&&t.menus.filter(s=>n.source.parentMenuView===s.parentMenuView&&n.source!==s&&s.isOpen).forEach(s=>{s.isOpen=!1})})},closeOnClickOutside(t){Xu({emitter:t,activator:()=>t.isOpen,callback:()=>t.close(),contextElements:()=>t.children.map(n=>n.element)})},enableFocusHighlightOnInteraction(t){let n=!1;t.on("change:isOpen",(e,i,s)=>{s||(t.isFocusBorderEnabled=!1,n=!1)}),t.listenTo(t.element,"click",()=>{t.isOpen&&t.element.matches(":focus-within")&&(t.isFocusBorderEnabled=!0)},{useCapture:!0}),t.listenTo(t.element,"keydown",()=>{n=!0},{useCapture:!0}),t.listenTo(t.element,"keyup",()=>{n=!1},{useCapture:!0}),t.listenTo(t.element,"focus",()=>{n&&(t.isFocusBorderEnabled=!0)},{useCapture:!0})}},wd={openAndFocusPanelOnArrowDownKey(t){t.keystrokes.set("arrowdown",(n,e)=>{t.focusTracker.focusedElement===t.buttonView.element&&(t.isOpen||(t.isOpen=!0),t.panelView.focus(),e())})},openOnArrowRightKey(t){const n=t.locale.uiLanguageDirection==="rtl"?"arrowleft":"arrowright";t.keystrokes.set(n,(e,i)=>{t.focusTracker.focusedElement!==t.buttonView.element||!t.isEnabled||(t.isOpen||(t.isOpen=!0),t.panelView.focus(),i())})},openOnButtonClick(t){t.buttonView.on("execute",()=>{t.isOpen=!0,t.parentMenuView&&t.panelView.focus()})},toggleOnButtonClick(t){t.buttonView.on("execute",()=>{t.isOpen=!t.isOpen})},closeOnArrowLeftKey(t){const n=t.locale.uiLanguageDirection==="rtl"?"arrowright":"arrowleft";t.keystrokes.set(n,(e,i)=>{t.isOpen&&(t.isOpen=!1,t.focus(),i())})},closeOnEscKey(t){t.keystrokes.set("esc",(n,e)=>{t.isOpen&&(t.isOpen=!1,t.focus(),e())})},closeOnParentClose(t){t.parentMenuView.on("change:isOpen",(n,e,i)=>{!i&&n.source===t.parentMenuView&&(t.isOpen=!1)})}},vCe={southEast:t=>({top:t.bottom,left:t.left,name:"se"}),southWest:(t,n)=>({top:t.bottom,left:t.left-n.width+t.width,name:"sw"}),northEast:(t,n)=>({top:t.top-n.height,left:t.left,name:"ne"}),northWest:(t,n)=>({top:t.top-n.height,left:t.left-n.width+t.width,name:"nw"}),eastSouth:t=>({top:t.top,left:t.right-Tv,name:"es"}),eastNorth:(t,n)=>({top:t.top-n.height,left:t.right-Tv,name:"en"}),westSouth:(t,n)=>({top:t.top,left:t.left-n.width+Tv,name:"ws"}),westNorth:(t,n)=>({top:t.top-n.height,left:t.left-n.width+Tv,name:"wn"})},bCe=[{menuId:"file",label:"File",groups:[{groupId:"export",items:["menuBar:exportPdf","menuBar:exportWord"]},{groupId:"import",items:["menuBar:importWord"]},{groupId:"revisionHistory",items:["menuBar:revisionHistory"]}]},{menuId:"edit",label:"Edit",groups:[{groupId:"undo",items:["menuBar:undo","menuBar:redo"]},{groupId:"selectAll",items:["menuBar:selectAll"]},{groupId:"findAndReplace",items:["menuBar:findAndReplace"]}]},{menuId:"view",label:"View",groups:[{groupId:"sourceEditing",items:["menuBar:sourceEditing"]},{groupId:"showBlocks",items:["menuBar:showBlocks"]},{groupId:"previewMergeFields",items:["menuBar:previewMergeFields"]},{groupId:"restrictedEditing",items:["menuBar:restrictedEditing"]}]},{menuId:"insert",label:"Insert",groups:[{groupId:"insertMainWidgets",items:["menuBar:insertImage","menuBar:ckbox","menuBar:ckfinder","menuBar:insertTable"]},{groupId:"insertInline",items:["menuBar:link","menuBar:comment","menuBar:insertMergeField"]},{groupId:"insertMinorWidgets",items:["menuBar:mediaEmbed","menuBar:insertTemplate","menuBar:specialCharacters","menuBar:blockQuote","menuBar:codeBlock","menuBar:htmlEmbed"]},{groupId:"insertStructureWidgets",items:["menuBar:horizontalLine","menuBar:pageBreak","menuBar:tableOfContents"]},{groupId:"restrictedEditingException",items:["menuBar:restrictedEditingException"]}]},{menuId:"format",label:"Format",groups:[{groupId:"textAndFont",items:[{menuId:"text",label:"Text",groups:[{groupId:"basicStyles",items:["menuBar:bold","menuBar:italic","menuBar:underline","menuBar:strikethrough","menuBar:superscript","menuBar:subscript","menuBar:code"]},{groupId:"textPartLanguage",items:["menuBar:textPartLanguage"]}]},{menuId:"font",label:"Font",groups:[{groupId:"fontProperties",items:["menuBar:fontSize","menuBar:fontFamily"]},{groupId:"fontColors",items:["menuBar:fontColor","menuBar:fontBackgroundColor"]},{groupId:"highlight",items:["menuBar:highlight"]}]},"menuBar:heading"]},{groupId:"list",items:["menuBar:bulletedList","menuBar:numberedList","menuBar:multiLevelList","menuBar:todoList"]},{groupId:"indent",items:["menuBar:alignment","menuBar:indent","menuBar:outdent"]},{groupId:"caseChange",items:["menuBar:caseChange"]},{groupId:"removeFormat",items:["menuBar:removeFormat"]}]},{menuId:"tools",label:"Tools",groups:[{groupId:"aiTools",items:["menuBar:aiAssistant","menuBar:aiCommands"]},{groupId:"tools",items:["menuBar:trackChanges","menuBar:commentsArchive"]}]},{menuId:"help",label:"Help",groups:[{groupId:"help",items:["menuBar:accessibilityHelp"]}]}];function _Ce(t){let n;return!("items"in t)||!t.items?n={items:To(bCe),addItems:[],removeItems:[],isVisible:!0,isUsingDefaultConfig:!0,...t}:n={items:t.items,removeItems:[],addItems:[],isVisible:!0,isUsingDefaultConfig:!1,...t},n}function wCe({normalizedConfig:t,locale:n,componentFactory:e,extraItems:i}){const s=To(t);return v7(t,s,i),yCe(t,s),v7(t,s,s.addItems),CCe(t,s,e),$D(t,s),kCe(s,n),s}function yCe(t,n){const e=n.removeItems,i=[];n.items=n.items.filter(({menuId:s})=>e.includes(s)?(i.push(s),!1):!0),Bm(n.items,s=>{s.groups=s.groups.filter(({groupId:r})=>e.includes(r)?(i.push(r),!1):!0);for(const r of s.groups)r.items=r.items.filter(o=>{const a=zD(o);return e.includes(a)?(i.push(a),!1):!0})});for(const s of e)i.includes(s)||qn("menu-bar-item-could-not-be-removed",{menuBarConfig:t,itemName:s})}function v7(t,n,e){const i=[];if(e.length!=0){for(const s of e){const r=TCe(s.position),o=xCe(s.position);if(ECe(s))if(!o)r==="start"?(n.items.unshift(s.menu),i.push(s)):r==="end"&&(n.items.push(s.menu),i.push(s));else{const a=n.items.findIndex(l=>l.menuId===o);a!=-1?r==="before"?(n.items.splice(a,0,s.menu),i.push(s)):r==="after"&&(n.items.splice(a+1,0,s.menu),i.push(s)):b7(n,s.menu,o,r)&&i.push(s)}else SCe(s)?Bm(n.items,a=>{if(a.menuId===o)r==="start"?(a.groups.unshift(s.group),i.push(s)):r==="end"&&(a.groups.push(s.group),i.push(s));else{const l=a.groups.findIndex(c=>c.groupId===o);l!==-1&&(r==="before"?(a.groups.splice(l,0,s.group),i.push(s)):r==="after"&&(a.groups.splice(l+1,0,s.group),i.push(s)))}}):b7(n,s.item,o,r)&&i.push(s)}for(const s of e)i.includes(s)||qn("menu-bar-item-could-not-be-added",{menuBarConfig:t,addedItemConfig:s})}}function b7(t,n,e,i){let s=!1;return Bm(t.items,r=>{for(const{groupId:o,items:a}of r.groups){if(s)return;if(o===e)i==="start"?(a.unshift(n),s=!0):i==="end"&&(a.push(n),s=!0);else{const l=a.findIndex(c=>zD(c)===e);l!==-1&&(i==="before"?(a.splice(l,0,n),s=!0):i==="after"&&(a.splice(l+1,0,n),s=!0))}}}),s}function CCe(t,n,e){Bm(n.items,i=>{for(const s of i.groups)s.items=s.items.filter(r=>{const o=typeof r=="string"&&!e.has(r);return o&&!n.isUsingDefaultConfig&&qn("menu-bar-item-unavailable",{menuBarConfig:t,parentMenuConfig:To(i),componentName:r}),!o})})}function $D(t,n){const e=n.isUsingDefaultConfig;let i=!1;if(n.items=n.items.filter(s=>s.groups.length?!0:($5(t,s,e),!1)),!n.items.length){$5(t,t,e);return}Bm(n.items,s=>{s.groups=s.groups.filter(r=>r.items.length?!0:(i=!0,!1));for(const r of s.groups)r.items=r.items.filter(o=>HD(o)&&!o.groups.length?($5(t,o,e),i=!0,!1):!0)}),i&&$D(t,n)}function $5(t,n,e){e||qn("menu-bar-menu-empty",{menuBarConfig:t,emptyMenuConfig:n})}function kCe(t,n){const e=n.t,i={File:e({string:"File",id:"MENU_BAR_MENU_FILE"}),Edit:e({string:"Edit",id:"MENU_BAR_MENU_EDIT"}),View:e({string:"View",id:"MENU_BAR_MENU_VIEW"}),Insert:e({string:"Insert",id:"MENU_BAR_MENU_INSERT"}),Format:e({string:"Format",id:"MENU_BAR_MENU_FORMAT"}),Tools:e({string:"Tools",id:"MENU_BAR_MENU_TOOLS"}),Help:e({string:"Help",id:"MENU_BAR_MENU_HELP"}),Text:e({string:"Text",id:"MENU_BAR_MENU_TEXT"}),Font:e({string:"Font",id:"MENU_BAR_MENU_FONT"})};Bm(t.items,s=>{s.label in i&&(s.label=i[s.label])})}function Bm(t,n){if(Array.isArray(t))for(const i of t)e(i);function e(i){n(i);for(const s of i.groups)for(const r of s.items)HD(r)&&e(r)}}function ECe(t){return typeof t=="object"&&"menu"in t}function SCe(t){return typeof t=="object"&&"group"in t}function TCe(t){return t.startsWith("start")?"start":t.startsWith("end")?"end":t.startsWith("after")?"after":"before"}function xCe(t){const n=t.match(/^[^:]+:(.+)/);return n?n[1]:null}function zD(t){return typeof t=="string"?t:t.menuId}function HD(t){return typeof t=="object"&&"menuId"in t}class ACe extends li(){constructor(e){super();w(this,"editor");w(this,"componentFactory");w(this,"focusTracker");w(this,"tooltipManager");w(this,"poweredBy");w(this,"ariaLiveAnnouncer");w(this,"isReady",!1);w(this,"_editableElementsMap",new Map);w(this,"_focusableToolbarDefinitions",[]);w(this,"_extraMenuBarElements",[]);w(this,"_lastFocusedForeignElement",null);const i=e.editing.view;this.editor=e,this.componentFactory=new eCe(e),this.focusTracker=new Bi,this.tooltipManager=new rk(e),this.poweredBy=new cCe(e),this.ariaLiveAnnouncer=new mCe(e),this.set("viewportOffset",this._readViewportOffsetFromConfig()),this.once("ready",()=>{this.isReady=!0}),this.listenTo(i.document,"layoutChanged",this.update.bind(this)),this.listenTo(i,"scrollToTheSelection",this._handleScrollToTheSelection.bind(this)),this._initFocusTracking()}get element(){return null}update(){this.fire("update")}destroy(){this.stopListening(),this.focusTracker.destroy(),this.tooltipManager.destroy(this.editor),this.poweredBy.destroy();for(const e of this._editableElementsMap.values())e.ckeditorInstance=null,this.editor.keystrokes.stopListening(e);this._editableElementsMap=new Map,this._focusableToolbarDefinitions=[]}setEditableElement(e,i){this._editableElementsMap.set(e,i),i.ckeditorInstance||(i.ckeditorInstance=this.editor),this.focusTracker.add(i);const s=()=>{this.editor.editing.view.getDomRoot(e)||this.editor.keystrokes.listenTo(i)};this.isReady?s():this.once("ready",s)}removeEditableElement(e){const i=this._editableElementsMap.get(e);i&&(this._editableElementsMap.delete(e),this.editor.keystrokes.stopListening(i),this.focusTracker.remove(i),i.ckeditorInstance=null)}getEditableElement(e="main"){return this._editableElementsMap.get(e)}getEditableElementsNames(){return this._editableElementsMap.keys()}addToolbar(e,i={}){e.isRendered?(this.focusTracker.add(e.element),this.editor.keystrokes.listenTo(e.element)):e.once("render",()=>{this.focusTracker.add(e.element),this.editor.keystrokes.listenTo(e.element)}),this._focusableToolbarDefinitions.push({toolbarView:e,options:i})}extendMenuBar(e){this._extraMenuBarElements.push(e)}get _editableElements(){return console.warn("editor-ui-deprecated-editable-elements: The EditorUI#_editableElements property has been deprecated and will be removed in the near future.",{editorUI:this}),this._editableElementsMap}_initMenuBar(e){const i=e.element;this.focusTracker.add(i),this.editor.keystrokes.listenTo(i);const s=_Ce(this.editor.config.get("menuBar")||{});e.fillFromConfig(s,this.componentFactory,this._extraMenuBarElements),this.editor.keystrokes.set("Esc",(r,o)=>{i.contains(this.editor.ui.focusTracker.focusedElement)&&(this._lastFocusedForeignElement?(this._lastFocusedForeignElement.focus(),this._lastFocusedForeignElement=null):this.editor.editing.view.focus(),o())}),this.editor.keystrokes.set("Alt+F9",(r,o)=>{i.contains(this.editor.ui.focusTracker.focusedElement)||(this._saveLastFocusedForeignElement(),e.isFocusBorderEnabled=!0,e.focus(),o())})}_readViewportOffsetFromConfig(){const e=this.editor,i=e.config.get("ui.viewportOffset");if(i)return i;const s=e.config.get("toolbar.viewportTopOffset");return s?(console.warn("editor-ui-deprecated-viewport-offset-config: The `toolbar.vieportTopOffset` configuration option is deprecated. It will be removed from future CKEditor versions. Use `ui.viewportOffset.top` instead."),{top:s}):{top:0}}_initFocusTracking(){const e=this.editor;e.editing.view;let i;e.keystrokes.set("Alt+F10",(s,r)=>{this._saveLastFocusedForeignElement();const o=this._getCurrentFocusedToolbarDefinition();(!o||!i)&&(i=this._getFocusableCandidateToolbarDefinitions());for(let a=0;a<i.length;a++){const l=i.shift();if(i.push(l),l!==o&&this._focusFocusableCandidateToolbar(l)){o&&o.options.afterBlur&&o.options.afterBlur();break}}r()}),e.keystrokes.set("Esc",(s,r)=>{const o=this._getCurrentFocusedToolbarDefinition();o&&(this._lastFocusedForeignElement?(this._lastFocusedForeignElement.focus(),this._lastFocusedForeignElement=null):e.editing.view.focus(),o.options.afterBlur&&o.options.afterBlur(),r())})}_saveLastFocusedForeignElement(){const e=this.focusTracker.focusedElement;Array.from(this._editableElementsMap.values()).includes(e)&&!Array.from(this.editor.editing.view.domRoots.values()).includes(e)&&(this._lastFocusedForeignElement=e)}_getFocusableCandidateToolbarDefinitions(){const e=[];for(const i of this._focusableToolbarDefinitions){const{toolbarView:s,options:r}=i;(bc(s.element)||r.beforeFocus)&&e.push(i)}return e.sort((i,s)=>_7(i)-_7(s)),e}_getCurrentFocusedToolbarDefinition(){for(const e of this._focusableToolbarDefinitions)if(e.toolbarView.element&&e.toolbarView.element.contains(this.focusTracker.focusedElement))return e;return null}_focusFocusableCandidateToolbar(e){const{toolbarView:i,options:{beforeFocus:s}}=e;return s&&s(),bc(i.element)?(i.focus(),!0):!1}_handleScrollToTheSelection(e,i){const s={top:0,bottom:0,left:0,right:0,...this.viewportOffset};i.viewportOffset.top+=s.top,i.viewportOffset.bottom+=s.bottom,i.viewportOffset.left+=s.left,i.viewportOffset.right+=s.right}}function _7(t){const{toolbarView:n,options:e}=t;let i=10;return bc(n.element)&&i--,e.isContextual&&i--,i}class ICe extends Rt{constructor(e){super(e);w(this,"body");w(this,"menuBarView");this.body=new w3e(e)}render(){super.render(),this.body.attachToDom()}destroy(){return this.body.detachFromDom(),super.destroy()}}class RCe extends Rt{constructor(e,i,s){super(e);w(this,"name",null);w(this,"_editingView");w(this,"_editableElement");w(this,"_hasExternalElement");this.setTemplate({tag:"div",attributes:{class:["ck","ck-content","ck-editor__editable","ck-rounded-corners"],lang:e.contentLanguage,dir:e.contentLanguageDirection}}),this.set("isFocused",!1),this._editableElement=s,this._hasExternalElement=!!this._editableElement,this._editingView=i}render(){super.render(),this._hasExternalElement?this.template.apply(this.element=this._editableElement):this._editableElement=this.element,this.on("change:isFocused",()=>this._updateIsFocusedClasses()),this._updateIsFocusedClasses()}destroy(){this._hasExternalElement&&this.template.revert(this._editableElement),super.destroy()}get hasExternalElement(){return this._hasExternalElement}_updateIsFocusedClasses(){const e=this._editingView;e.isRenderingInProgress?s(this):i(this);function i(r){e.change(o=>{const a=e.document.getRoot(r.name);o.addClass(r.isFocused?"ck-focused":"ck-blurred",a),o.removeClass(r.isFocused?"ck-blurred":"ck-focused",a)})}function s(r){e.once("change:isRenderingInProgress",(o,a,l)=>{l?s(r):i(r)})}}}class MCe extends RCe{constructor(e,i,s,r={}){super(e,i,s);w(this,"_generateLabel");const o=e.t;this.extendTemplate({attributes:{role:"textbox",class:"ck-editor__editable_inline"}}),this._generateLabel=r.label||(()=>o("Editor editing area: %0",this.name))}render(){super.render();const e=this._editingView;e.change(i=>{const s=e.document.getRoot(this.name);i.setAttribute("aria-label",this._generateLabel(this),s)})}}class w7 extends uD{static get pluginName(){return"Notification"}init(){this.on("show:warning",(n,e)=>{window.alert(e.message)},{priority:"lowest"})}showSuccess(n,e={}){this._showNotification({message:n,type:"success",namespace:e.namespace,title:e.title})}showInfo(n,e={}){this._showNotification({message:n,type:"info",namespace:e.namespace,title:e.title})}showWarning(n,e={}){this._showNotification({message:n,type:"warning",namespace:e.namespace,title:e.title})}_showNotification(n){const e=n.namespace?`show:${n.type}:${n.namespace}`:`show:${n.type}`;this.fire(e,{message:n.message,type:n.type,title:n.title||""})}}class $u extends li(){constructor(n,e){super(),e&&BL(this,e),n&&this.set(n)}}const xv=W1("px");class Mo extends Be{constructor(e){super(e);w(this,"positionLimiter");w(this,"visibleStack");w(this,"_viewToStack",new Map);w(this,"_idToStack",new Map);w(this,"_view",null);w(this,"_rotatorView",null);w(this,"_fakePanelsView",null);this.positionLimiter=()=>{const i=this.editor.editing.view,r=i.document.selection.editableElement;return r?i.domConverter.mapViewToDom(r.root):null},this.set("visibleView",null),this.set("_numberOfStacks",0),this.set("_singleViewMode",!1)}static get pluginName(){return"ContextualBalloon"}destroy(){super.destroy(),this._view&&this._view.destroy(),this._rotatorView&&this._rotatorView.destroy(),this._fakePanelsView&&this._fakePanelsView.destroy()}get view(){return this._view||this._createPanelView(),this._view}hasView(e){return Array.from(this._viewToStack.keys()).includes(e)}add(e){if(this._view||this._createPanelView(),this.hasView(e.view))throw new fe("contextualballoon-add-view-exist",[this,e]);const i=e.stackId||"main";if(!this._idToStack.has(i)){this._idToStack.set(i,new Map([[e.view,e]])),this._viewToStack.set(e.view,this._idToStack.get(i)),this._numberOfStacks=this._idToStack.size,(!this._visibleStack||e.singleViewMode)&&this.showStack(i);return}const s=this._idToStack.get(i);e.singleViewMode&&this.showStack(i),s.set(e.view,e),this._viewToStack.set(e.view,s),s===this._visibleStack&&this._showView(e)}remove(e){if(!this.hasView(e))throw new fe("contextualballoon-remove-view-not-exist",[this,e]);const i=this._viewToStack.get(e);this._singleViewMode&&this.visibleView===e&&(this._singleViewMode=!1),this.visibleView===e&&(i.size===1?this._idToStack.size>1?this._showNextStack():(this.view.hide(),this.visibleView=null,this._rotatorView.hideView()):this._showView(Array.from(i.values())[i.size-2])),i.size===1?(this._idToStack.delete(this._getStackId(i)),this._numberOfStacks=this._idToStack.size):i.delete(e),this._viewToStack.delete(e)}updatePosition(e){e&&(this._visibleStack.get(this.visibleView).position=e),this.view.pin(this._getBalloonPosition()),this._fakePanelsView.updatePosition()}showStack(e){this.visibleStack=e;const i=this._idToStack.get(e);if(!i)throw new fe("contextualballoon-showstack-stack-not-exist",this);this._visibleStack!==i&&this._showView(Array.from(i.values()).pop())}_createPanelView(){this._view=new Vs(this.editor.locale),this.editor.ui.view.body.add(this._view),this.editor.ui.focusTracker.add(this._view.element),this._rotatorView=this._createRotatorView(),this._fakePanelsView=this._createFakePanelsView()}get _visibleStack(){return this._viewToStack.get(this.visibleView)}_getStackId(e){return Array.from(this._idToStack.entries()).find(s=>s[1]===e)[0]}_showNextStack(){const e=Array.from(this._idToStack.values());let i=e.indexOf(this._visibleStack)+1;e[i]||(i=0),this.showStack(this._getStackId(e[i]))}_showPrevStack(){const e=Array.from(this._idToStack.values());let i=e.indexOf(this._visibleStack)-1;e[i]||(i=e.length-1),this.showStack(this._getStackId(e[i]))}_createRotatorView(){const e=new PCe(this.editor.locale),i=this.editor.locale.t;return this.view.content.add(e),e.bind("isNavigationVisible").to(this,"_numberOfStacks",this,"_singleViewMode",(s,r)=>!r&&s>1),e.on("change:isNavigationVisible",()=>this.updatePosition(),{priority:"low"}),e.bind("counter").to(this,"visibleView",this,"_numberOfStacks",(s,r)=>{if(r<2)return"";const o=Array.from(this._idToStack.values()).indexOf(this._visibleStack)+1;return i("%0 of %1",[o,r])}),e.buttonNextView.on("execute",()=>{e.focusTracker.isFocused&&this.editor.editing.view.focus(),this._showNextStack()}),e.buttonPrevView.on("execute",()=>{e.focusTracker.isFocused&&this.editor.editing.view.focus(),this._showPrevStack()}),e}_createFakePanelsView(){const e=new OCe(this.editor.locale,this.view);return e.bind("numberOfPanels").to(this,"_numberOfStacks",this,"_singleViewMode",(i,s)=>!s&&i>=2?Math.min(i-1,2):0),e.listenTo(this.view,"change:top",()=>e.updatePosition()),e.listenTo(this.view,"change:left",()=>e.updatePosition()),this.editor.ui.view.body.add(e),e}_showView({view:e,balloonClassName:i="",withArrow:s=!0,singleViewMode:r=!1}){this.view.class=i,this.view.withArrow=s,this._rotatorView.showView(e),this.visibleView=e,this.view.pin(this._getBalloonPosition()),this._fakePanelsView.updatePosition(),r&&(this._singleViewMode=!0)}_getBalloonPosition(){let e=Array.from(this._visibleStack.values()).pop().position;return e&&(e.limiter||(e=Object.assign({},e,{limiter:this.positionLimiter})),e=Object.assign({},e,{viewportOffsetConfig:this.editor.ui.viewportOffset})),e}}class PCe extends Rt{constructor(e){super(e);w(this,"focusTracker");w(this,"buttonPrevView");w(this,"buttonNextView");w(this,"content");const i=e.t,s=this.bindTemplate;this.set("isNavigationVisible",!0),this.focusTracker=new Bi,this.buttonPrevView=this._createButtonView(i("Previous"),kt.previousArrow),this.buttonNextView=this._createButtonView(i("Next"),kt.nextArrow),this.content=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-rotator"],"z-index":"-1"},children:[{tag:"div",attributes:{class:["ck-balloon-rotator__navigation",s.to("isNavigationVisible",r=>r?"":"ck-hidden")]},children:[this.buttonPrevView,{tag:"span",attributes:{class:["ck-balloon-rotator__counter"]},children:[{text:s.to("counter")}]},this.buttonNextView]},{tag:"div",attributes:{class:"ck-balloon-rotator__content"},children:this.content}]})}render(){super.render(),this.focusTracker.add(this.element)}destroy(){super.destroy(),this.focusTracker.destroy()}showView(e){this.hideView(),this.content.add(e)}hideView(){this.content.clear()}_createButtonView(e,i){const s=new Yt(this.locale);return s.set({label:e,icon:i,tooltip:!0}),s}}class OCe extends Rt{constructor(e,i){super(e);w(this,"content");w(this,"_balloonPanelView");const s=this.bindTemplate;this.set("top",0),this.set("left",0),this.set("height",0),this.set("width",0),this.set("numberOfPanels",0),this.content=this.createCollection(),this._balloonPanelView=i,this.setTemplate({tag:"div",attributes:{class:["ck-fake-panel",s.to("numberOfPanels",r=>r?"":"ck-hidden")],style:{top:s.to("top",xv),left:s.to("left",xv),width:s.to("width",xv),height:s.to("height",xv)}},children:this.content}),this.on("change:numberOfPanels",(r,o,a,l)=>{a>l?this._addPanels(a-l):this._removePanels(l-a),this.updatePosition()})}_addPanels(e){for(;e--;){const i=new Rt;i.setTemplate({tag:"div"}),this.content.add(i),this.registerChild(i)}}_removePanels(e){for(;e--;){const i=this.content.last;this.content.remove(i),this.deregisterChild(i),i.destroy()}}updatePosition(){if(this.numberOfPanels){const{top:e,left:i}=this._balloonPanelView,{width:s,height:r}=new mn(this._balloonPanelView.element);Object.assign(this,{top:e,left:i,width:s,height:r})}}}const LCe=W1("px");class BCe extends Be{constructor(e){super(e);w(this,"toolbarView");w(this,"focusTracker");w(this,"_balloonConfig");w(this,"_resizeObserver",null);w(this,"_balloon");w(this,"_fireSelectionChangeDebounced");this._balloonConfig=LD(e.config.get("balloonToolbar")),this.toolbarView=this._createToolbarView(),this.focusTracker=new Bi,e.ui.once("ready",()=>{this.focusTracker.add(e.ui.getEditableElement()),this.focusTracker.add(this.toolbarView.element)}),e.ui.addToolbar(this.toolbarView,{beforeFocus:()=>this.show(!0),afterBlur:()=>this.hide(),isContextual:!0}),this._balloon=e.plugins.get(Mo),this._fireSelectionChangeDebounced=Ss(()=>this.fire("_selectionChangeDebounced"),200),this.decorate("show")}static get pluginName(){return"BalloonToolbar"}static get requires(){return[Mo]}init(){const e=this.editor,i=e.model.document.selection;this.listenTo(this.focusTracker,"change:isFocused",(s,r,o)=>{const a=this._balloon.visibleView===this.toolbarView;!o&&a?this.hide():o&&this.show()}),this.listenTo(i,"change:range",(s,r)=>{(r.directChange||i.isCollapsed)&&this.hide(),this._fireSelectionChangeDebounced()}),this.listenTo(this,"_selectionChangeDebounced",()=>{this.editor.editing.view.document.isFocused&&this.show()}),this._balloonConfig.shouldNotGroupWhenFull||this.listenTo(e,"ready",()=>{const s=e.ui.view.editable.element;this._resizeObserver=new zw(s,r=>{this.toolbarView.maxWidth=LCe(r.contentRect.width*.9)})}),this.listenTo(this.toolbarView,"groupedItemsUpdate",()=>{this._updatePosition()}),e.ui.once("ready",()=>{this.toolbarView.fillFromConfig(this._balloonConfig,this.editor.ui.componentFactory)})}_createToolbarView(){const e=this.editor.locale.t,i=!this._balloonConfig.shouldNotGroupWhenFull,s=new _h(this.editor.locale,{shouldGroupWhenFull:i,isFloating:!0});return s.ariaLabel=e("Editor contextual toolbar"),s.render(),s}show(e=!1){const i=this.editor,s=i.model.document.selection,r=i.model.schema;this._balloon.hasView(this.toolbarView)||s.isCollapsed&&!e||FCe(s,r)||Array.from(this.toolbarView.items).every(o=>o.isEnabled!==void 0&&!o.isEnabled)||(this.listenTo(this.editor.ui,"update",()=>{this._updatePosition()}),this._balloon.add({view:this.toolbarView,position:this._getBalloonPositionData(),balloonClassName:"ck-toolbar-container"}))}hide(){this._balloon.hasView(this.toolbarView)&&(this.stopListening(this.editor.ui,"update"),this._balloon.remove(this.toolbarView))}_getBalloonPositionData(){const i=this.editor.editing.view,s=i.document,r=s.selection,o=s.selection.isBackward;return{target:()=>{const a=o?r.getFirstRange():r.getLastRange(),l=mn.getDomRangeRects(i.domConverter.viewRangeToDom(a));return o?l[0]:(l.length>1&&l[l.length-1].width===0&&l.pop(),l[l.length-1])},positions:this._getBalloonPositions(o)}}_updatePosition(){this._balloon.updatePosition(this._getBalloonPositionData())}destroy(){super.destroy(),this.stopListening(),this._fireSelectionChangeDebounced.cancel(),this.toolbarView.destroy(),this.focusTracker.destroy(),this._resizeObserver&&this._resizeObserver.destroy()}_getBalloonPositions(e){const s=sn.isSafari&&sn.isiOS?Vs.generatePositions({heightOffset:Math.max(Vs.arrowHeightOffset,Math.round(20/$t.window.visualViewport.scale))}):Vs.defaultPositions;return e?[s.northWestArrowSouth,s.northWestArrowSouthWest,s.northWestArrowSouthEast,s.northWestArrowSouthMiddleEast,s.northWestArrowSouthMiddleWest,s.southWestArrowNorth,s.southWestArrowNorthWest,s.southWestArrowNorthEast,s.southWestArrowNorthMiddleWest,s.southWestArrowNorthMiddleEast]:[s.southEastArrowNorth,s.southEastArrowNorthEast,s.southEastArrowNorthWest,s.southEastArrowNorthMiddleEast,s.southEastArrowNorthMiddleWest,s.northEastArrowSouth,s.northEastArrowSouthEast,s.northEastArrowSouthWest,s.northEastArrowSouthMiddleEast,s.northEastArrowSouthMiddleWest]}}function FCe(t,n){return t.rangeCount===1?!1:[...t.getRanges()].every(e=>{const i=e.getContainedElement();return i&&n.isSelectable(i)})}class NCe extends fm{constructor(e){super(e);w(this,"arrowView");const i=this.bindTemplate;this.set({withText:!0,role:"menuitem"}),this.arrowView=this._createArrowView(),this.extendTemplate({attributes:{class:["ck-menu-bar__menu__button"],"aria-haspopup":!0,"aria-expanded":this.bindTemplate.to("isOn",s=>String(s)),"data-cke-tooltip-disabled":i.to("isOn")},on:{mouseenter:i.to("mouseenter")}})}render(){super.render(),this.children.add(this.arrowView)}_createArrowView(){const e=new _c;return e.content=Qw,e.extendTemplate({attributes:{class:"ck-menu-bar__menu__button__arrow"}}),e}}class VCe extends Rt{constructor(e){super(e);w(this,"children");const i=this.bindTemplate;this.set("isVisible",!1),this.set("position","se"),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-menu-bar__menu__panel",i.to("position",s=>`ck-menu-bar__menu__panel_position_${s}`),i.if("isVisible","ck-hidden",s=>!s)],tabindex:"-1"},children:this.children,on:{selectstart:i.to(s=>{s.target.tagName.toLocaleLowerCase()!=="input"&&s.preventDefault()})}})}focus(e=1){this.children.length&&(e===1?this.children.first.focus():this.children.last.focus())}}const ew=class ew extends Rt{constructor(e){super(e);w(this,"buttonView");w(this,"panelView");w(this,"focusTracker");w(this,"keystrokes");const i=this.bindTemplate;this.buttonView=new NCe(e),this.buttonView.delegate("mouseenter").to(this),this.buttonView.bind("isOn","isEnabled").to(this,"isOpen","isEnabled"),this.panelView=new VCe(e),this.panelView.bind("isVisible").to(this,"isOpen"),this.keystrokes=new Zi,this.focusTracker=new Bi,this.set("isOpen",!1),this.set("isEnabled",!0),this.set("panelPosition","w"),this.set("class",void 0),this.set("parentMenuView",null),this.setTemplate({tag:"div",attributes:{class:["ck","ck-menu-bar__menu",i.to("class"),i.if("isEnabled","ck-disabled",s=>!s),i.if("parentMenuView","ck-menu-bar__menu_top-level",s=>!s)]},children:[this.buttonView,this.panelView]})}render(){super.render(),this.focusTracker.add(this.buttonView.element),this.focusTracker.add(this.panelView.element),this.keystrokes.listenTo(this.element),wd.closeOnEscKey(this),this._repositionPanelOnOpen()}_attachBehaviors(){this.parentMenuView?(wd.openOnButtonClick(this),wd.openOnArrowRightKey(this),wd.closeOnArrowLeftKey(this),wd.closeOnParentClose(this)):(this._propagateArrowKeystrokeEvents(),wd.openAndFocusPanelOnArrowDownKey(this),wd.toggleOnButtonClick(this))}_propagateArrowKeystrokeEvents(){this.keystrokes.set("arrowright",(e,i)=>{this.fire("arrowright"),i()}),this.keystrokes.set("arrowleft",(e,i)=>{this.fire("arrowleft"),i()})}_repositionPanelOnOpen(){this.on("change:isOpen",(e,i,s)=>{if(!s)return;const r=ew._getOptimalPosition({element:this.panelView.element,target:this.buttonView.element,fitInViewport:!0,positions:this._panelPositions});this.panelView.position=r?r.name:this._panelPositions[0].name})}focus(){this.buttonView.focus()}get _panelPositions(){const{southEast:e,southWest:i,northEast:s,northWest:r,westSouth:o,eastSouth:a,westNorth:l,eastNorth:c}=vCe;return this.locale.uiLanguageDirection==="ltr"?this.parentMenuView?[a,c,o,l]:[e,i,s,r]:this.parentMenuView?[o,l,a,c]:[i,e,r,s]}};w(ew,"_getOptimalPosition",IE);let ko=ew;class wh extends ey{constructor(n){super(n),this.role="menu",this.items.on("change",this._setItemsCheckSpace.bind(this))}_setItemsCheckSpace(){const n=Array.from(this.items).some(e=>{const i=y7(e);return i&&i.isToggleable});this.items.forEach(e=>{const i=y7(e);i&&(i.hasCheckSpace=n)})}}function y7(t){return t instanceof wc?t.children.map(n=>DCe(n)?n.buttonView:n).find(n=>n instanceof fm):null}function DCe(t){return typeof t=="object"&&"buttonView"in t&&t.buttonView instanceof Yt}class UD extends y3e{constructor(n){super(n),this.set({withText:!0,withKeystroke:!0,tooltip:!1,role:"menuitem"}),this.extendTemplate({attributes:{class:["ck-menu-bar__menu__item__button"]}})}}const C7=["mouseenter","arrowleft","arrowright","change:isOpen"];class $Ce extends Rt{constructor(e){super(e);w(this,"children");w(this,"menus",[]);const i=e.t,s=this.bindTemplate;this.set({isOpen:!1,isFocusBorderEnabled:!1}),this._setupIsOpenUpdater(),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-menu-bar",s.if("isFocusBorderEnabled","ck-menu-bar_focus-border-enabled")],"aria-label":i("Editor menu bar"),role:"menubar"},children:this.children})}fillFromConfig(e,i,s=[]){const r=this.locale,a=wCe({normalizedConfig:e,locale:r,componentFactory:i,extraItems:s}).items.map(l=>this._createMenu({componentFactory:i,menuDefinition:l}));this.children.addMany(a)}render(){super.render(),lf.toggleMenusAndFocusItemsOnHover(this),lf.closeMenusWhenTheBarCloses(this),lf.closeMenuWhenAnotherOnTheSameLevelOpens(this),lf.focusCycleMenusOnArrows(this),lf.closeOnClickOutside(this),lf.enableFocusHighlightOnInteraction(this)}focus(){this.children.first&&this.children.first.focus()}close(){for(const e of this.children)e.isOpen=!1}registerMenu(e,i=null){i?(e.delegate(...C7).to(i),e.parentMenuView=i):e.delegate(...C7).to(this,s=>"menu:"+s),e._attachBehaviors(),this.menus.push(e)}_createMenu({componentFactory:e,menuDefinition:i,parentMenuView:s}){const r=this.locale,o=new ko(r);return this.registerMenu(o,s),o.buttonView.set({label:i.label}),o.once("change:isOpen",()=>{const a=new wh(r);a.ariaLabel=i.label,o.panelView.children.add(a),a.items.addMany(this._createMenuItems({menuDefinition:i,parentMenuView:o,componentFactory:e}))}),o}_createMenuItems({menuDefinition:e,parentMenuView:i,componentFactory:s}){const r=this.locale,o=[];for(const a of e.groups){for(const l of a.items){const c=new Rh(r,i);if(Li(l))c.children.add(this._createMenu({componentFactory:s,menuDefinition:l,parentMenuView:i}));else{const u=this._createMenuItemContentFromFactory({componentName:l,componentFactory:s,parentMenuView:i});if(!u)continue;c.children.add(u)}o.push(c)}a!==e.groups[e.groups.length-1]&&o.push(new ZE(r))}return o}_createMenuItemContentFromFactory({componentName:e,parentMenuView:i,componentFactory:s}){const r=s.create(e);return r instanceof ko||r instanceof Xi||r instanceof UD?(this._registerMenuTree(r,i),r.on("execute",()=>{this.close()}),r):(qn("menu-bar-component-unsupported",{componentName:e,componentView:r}),null)}_registerMenuTree(e,i){if(!(e instanceof ko)){e.delegate("mouseenter").to(i);return}this.registerMenu(e,i);const s=e.panelView.children.filter(o=>o instanceof wh)[0];if(!s){e.delegate("mouseenter").to(i);return}const r=s.items.filter(o=>o instanceof wc);for(const o of r)this._registerMenuTree(o.children.get(0),e)}_setupIsOpenUpdater(){let e;this.on("menu:change:isOpen",(i,s,r)=>{clearTimeout(e),r?this.isOpen=!0:e=setTimeout(()=>{this.isOpen=Array.from(this.children).some(o=>o.isOpen)},0)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const QE=["left","right","center","justify"];function WD(t){return QE.includes(t)}function jD(t,n){return n.contentLanguageDirection=="rtl"?t==="right":t==="left"}function qD(t){const n=t.map(i=>{let s;return typeof i=="string"?s={name:i}:s=i,s}).filter(i=>{const s=QE.includes(i.name);return s||qn("alignment-config-name-not-recognized",{option:i}),s}),e=n.filter(i=>!!i.className).length;if(e&&e<n.length)throw new fe("alignment-config-classnames-are-missing",{configuredOptions:t});return n.forEach((i,s,r)=>{const o=r.slice(s+1);if(o.some(l=>l.name==i.name))throw new fe("alignment-config-name-already-defined",{option:i,configuredOptions:t});if(i.className&&o.some(c=>c.className==i.className))throw new fe("alignment-config-classname-already-defined",{option:i,configuredOptions:t})}),n}const eS="alignment";class zCe extends en{refresh(){const e=this.editor.locale,i=bs(this.editor.model.document.selection.getSelectedBlocks());this.isEnabled=!!i&&this._canBeAligned(i),this.isEnabled&&i.hasAttribute("alignment")?this.value=i.getAttribute("alignment"):this.value=e.contentLanguageDirection==="rtl"?"right":"left"}execute(n={}){const e=this.editor,i=e.locale,s=e.model,r=s.document,o=n.value;s.change(a=>{const l=Array.from(r.selection.getSelectedBlocks()).filter(d=>this._canBeAligned(d)),c=l[0].getAttribute("alignment");jD(o,i)||c===o||!o?HCe(l,a):UCe(l,a,o)})}_canBeAligned(n){return this.editor.model.schema.checkAttribute(n,eS)}}function HCe(t,n){for(const e of t)n.removeAttribute(eS,e)}function UCe(t,n,e){for(const i of t)n.setAttribute(eS,e,i)}class WCe extends Be{static get pluginName(){return"AlignmentEditing"}constructor(n){super(n),n.config.define("alignment",{options:QE.map(e=>({name:e}))})}init(){const n=this.editor,e=n.locale,i=n.model.schema,r=qD(n.config.get("alignment.options")).filter(c=>WD(c.name)&&!jD(c.name,e)),o=r.some(c=>!!c.className);i.extend("$block",{allowAttributes:"alignment"}),n.model.schema.setAttributeProperties("alignment",{isFormatting:!0}),o?n.conversion.attributeToAttribute(GCe(r)):n.conversion.for("downcast").attributeToAttribute(jCe(r));const a=qCe(r);for(const c of a)n.conversion.for("upcast").attributeToAttribute(c);const l=KCe(r);for(const c of l)n.conversion.for("upcast").attributeToAttribute(c);n.commands.add("alignment",new zCe(n))}}function jCe(t){const n={};for(const{name:i}of t)n[i]={key:"style",value:{"text-align":i}};return{model:{key:"alignment",values:t.map(i=>i.name)},view:n}}function qCe(t){const n=[];for(const{name:e}of t)n.push({view:{key:"style",value:{"text-align":e}},model:{key:"alignment",value:e}});return n}function KCe(t){const n=[];for(const{name:e}of t)n.push({view:{key:"align",value:e},model:{key:"alignment",value:e}});return n}function GCe(t){const n={};for(const i of t)n[i.name]={key:"class",value:i.className};return{model:{key:"alignment",values:t.map(i=>i.name)},view:n}}const kp=new Map([["left",kt.alignLeft],["right",kt.alignRight],["center",kt.alignCenter],["justify",kt.alignJustify]]);class YCe extends Be{get localizedOptionTitles(){const n=this.editor.t;return{left:n("Align left"),right:n("Align right"),center:n("Align center"),justify:n("Justify")}}static get pluginName(){return"AlignmentUI"}init(){const n=this.editor,e=qD(n.config.get("alignment.options"));e.map(i=>i.name).filter(WD).forEach(i=>this._addButton(i)),this._addToolbarDropdown(e),this._addMenuBarMenu(e)}_addButton(n){this.editor.ui.componentFactory.add(`alignment:${n}`,i=>this._createButton(i,n))}_createButton(n,e,i={}){const s=this.editor,r=s.commands.get("alignment"),o=new Yt(n);return o.set({label:this.localizedOptionTitles[e],icon:kp.get(e),tooltip:!0,isToggleable:!0,...i}),o.bind("isEnabled").to(r),o.bind("isOn").to(r,"value",a=>a===e),this.listenTo(o,"execute",()=>{s.execute("alignment",{value:e}),s.editing.view.focus()}),o}_addToolbarDropdown(n){const e=this.editor;e.ui.componentFactory.add("alignment",s=>{const r=Xs(s),o=s.uiLanguageDirection==="rtl"?"w":"e",a=s.t;ty(r,()=>n.map(u=>this._createButton(s,u.name,{tooltipPosition:o})),{enableActiveItemFocusOnDropdownOpen:!0,isVertical:!0,ariaLabel:a("Text alignment toolbar")}),r.buttonView.set({label:a("Text alignment"),tooltip:!0}),r.extendTemplate({attributes:{class:"ck-alignment-dropdown"}});const l=s.contentLanguageDirection==="rtl"?kp.get("right"):kp.get("left"),c=e.commands.get("alignment");return r.buttonView.bind("icon").to(c,"value",u=>kp.get(u)||l),r.bind("isEnabled").to(c,"isEnabled"),this.listenTo(r,"execute",()=>{e.editing.view.focus()}),r})}_addMenuBarMenu(n){const e=this.editor;e.ui.componentFactory.add("menuBar:alignment",i=>{const s=e.commands.get("alignment"),r=i.t,o=new ko(i),a=new wh(i);o.bind("isEnabled").to(s),a.set({ariaLabel:r("Text alignment"),role:"menu"}),o.buttonView.set({label:r("Text alignment")});for(const l of n){const c=new Rh(i,o),u=new Xi(i);u.delegate("execute").to(o),u.set({label:this.localizedOptionTitles[l.name],icon:kp.get(l.name),role:"menuitemcheckbox",isToggleable:!0}),u.on("execute",()=>{e.execute("alignment",{value:l.name}),e.editing.view.focus()}),u.bind("isOn").to(s,"value",d=>d===l.name),u.bind("isEnabled").to(s,"isEnabled"),c.children.add(u),a.items.add(c)}return o.panelView.children.add(a),o})}}class ZCe extends Be{static get requires(){return[WCe,YCe]}static get pluginName(){return"Alignment"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 *//**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class KD{constructor(n,e=20){w(this,"model");w(this,"limit");w(this,"_isLocked");w(this,"_size");w(this,"_batch",null);w(this,"_changeCallback");w(this,"_selectionChangeCallback");this.model=n,this._size=0,this.limit=e,this._isLocked=!1,this._changeCallback=(i,s)=>{s.isLocal&&s.isUndoable&&s!==this._batch&&this._reset(!0)},this._selectionChangeCallback=()=>{this._reset()},this.model.document.on("change",this._changeCallback),this.model.document.selection.on("change:range",this._selectionChangeCallback),this.model.document.selection.on("change:attribute",this._selectionChangeCallback)}get batch(){return this._batch||(this._batch=this.model.createBatch({isTyping:!0})),this._batch}get size(){return this._size}input(n){this._size+=n,this._size>=this.limit&&this._reset(!0)}get isLocked(){return this._isLocked}lock(){this._isLocked=!0}unlock(){this._isLocked=!1}destroy(){this.model.document.off("change",this._changeCallback),this.model.document.selection.off("change:range",this._selectionChangeCallback),this.model.document.selection.off("change:attribute",this._selectionChangeCallback)}_reset(n=!1){(!this.isLocked||n)&&(this._batch=null,this._size=0)}}class XCe extends en{constructor(e,i){super(e);w(this,"_buffer");this._buffer=new KD(e.model,i),this._isEnabledBasedOnSelection=!1}get buffer(){return this._buffer}destroy(){super.destroy(),this._buffer.destroy()}execute(e={}){const i=this.editor.model,s=i.document,r=e.text||"",o=r.length;let a=s.selection;if(e.selection?a=e.selection:e.range&&(a=i.createSelection(e.range)),!i.canEditAt(a))return;const l=e.resultRange;i.enqueueChange(this._buffer.batch,c=>{this._buffer.lock();const u=Array.from(s.selection.getAttributes());i.deleteContent(a),r&&i.insertContent(c.createText(r,u),a),l?c.setSelection(l):a.is("documentSelection")||c.setSelection(a),this._buffer.unlock(),this._buffer.input(o)})}}const GD=["insertText","insertReplacementText"],JCe=[...GD,"insertCompositionText"];class QCe extends Rl{constructor(e){super(e);w(this,"focusObserver");this.focusObserver=e.getObserver(y_);const i=sn.isAndroid?JCe:GD,s=e.document;s.on("beforeinput",(r,o)=>{if(!this.isEnabled)return;const{data:a,targetRanges:l,inputType:c,domEvent:u}=o;if(!i.includes(c))return;this.focusObserver.flush();const d=new vc(s,"insertText");s.fire(d,new um(e,u,{text:a,selection:e.createSelection(l)})),d.stop.called&&r.stop()}),sn.isAndroid||s.on("compositionend",(r,{data:o,domEvent:a})=>{this.isEnabled&&o&&s.fire("insertText",new um(e,a,{text:o}))},{priority:"lowest"})}observe(){}stopObserving(){}}class YD extends Be{constructor(){super(...arguments);w(this,"_compositionQueue")}static get pluginName(){return"Input"}init(){const e=this.editor,i=e.model,s=e.editing.view,r=e.editing.mapper,o=i.document.selection;this._compositionQueue=new eke(e),s.addObserver(QCe);const a=new XCe(e,e.config.get("typing.undoStep")||20);e.commands.add("insertText",a),e.commands.add("input",a),this.listenTo(s.document,"insertText",(l,c)=>{s.document.isComposing||c.preventDefault(),sn.isAndroid&&s.document.isComposing&&this._compositionQueue.flush("next beforeinput");const{text:u,selection:d}=c;let f;d?f=Array.from(d.getRanges()).map(v=>r.toModelRange(v)):f=Array.from(o.getRanges());let p=u;if(sn.isAndroid){const v=Array.from(f[0].getItems()).reduce((y,_)=>y+(_.is("$textProxy")?_.data:""),"");if(v&&(v.length<=p.length?p.startsWith(v)&&(p=p.substring(v.length),f[0].start=f[0].start.getShiftedBy(v.length)):v.startsWith(p)&&(f[0].start=f[0].start.getShiftedBy(p.length),p="")),p.length==0&&f[0].isCollapsed)return}const m={text:p,selection:i.createSelection(f)};sn.isAndroid&&s.document.isComposing?this._compositionQueue.push(m):(e.execute("insertText",m),s.scrollToTheSelection())}),sn.isAndroid?this.listenTo(s.document,"keydown",(l,c)=>{o.isCollapsed||c.keyCode!=229||!s.document.isComposing||k7(i,a)}):this.listenTo(s.document,"compositionstart",()=>{o.isCollapsed||k7(i,a)}),sn.isAndroid?(this.listenTo(s.document,"mutations",(l,{mutations:c})=>{if(s.document.isComposing)for(const{node:u}of c){const d=nke(u,r),f=r.toModelElement(d);if(this._compositionQueue.isComposedElement(f)){this._compositionQueue.flush("mutations");return}}}),this.listenTo(s.document,"compositionend",()=>{this._compositionQueue.flush("composition end")}),this.listenTo(s.document,"compositionend",()=>{const l=[];for(const c of this._compositionQueue.flushComposedElements()){const u=r.toViewElement(c);u&&l.push({type:"children",node:u})}l.length&&s.document.fire("mutations",{mutations:l})},{priority:"lowest"})):this.listenTo(s.document,"compositionend",()=>{s.document.fire("mutations",{mutations:[]})},{priority:"lowest"})}destroy(){super.destroy(),this._compositionQueue.destroy()}}class eke{constructor(n){w(this,"editor");w(this,"flushDebounced",Ss(()=>this.flush("timeout"),50));w(this,"_queue",[]);w(this,"_compositionElements",new Set);this.editor=n}destroy(){for(this.flushDebounced.cancel(),this._compositionElements.clear();this._queue.length;)this.shift()}get length(){return this._queue.length}push(n){const e={text:n.text};if(n.selection){e.selectionRanges=[];for(const i of n.selection.getRanges())e.selectionRanges.push(Kr.fromRange(i)),this._compositionElements.add(i.start.parent)}this._queue.push(e),this.flushDebounced()}shift(){const n=this._queue.shift(),e={text:n.text};if(n.selectionRanges){const i=n.selectionRanges.map(s=>tke(s)).filter(s=>!!s);i.length&&(e.selection=this.editor.model.createSelection(i))}return e}flush(n){const e=this.editor,i=e.model,s=e.editing.view;if(this.flushDebounced.cancel(),!this._queue.length)return;const o=e.commands.get("insertText").buffer;i.enqueueChange(o.batch,()=>{for(o.lock();this._queue.length;){const a=this.shift();e.execute("insertText",a)}o.unlock()}),s.scrollToTheSelection()}isComposedElement(n){return this._compositionElements.has(n)}flushComposedElements(){const n=Array.from(this._compositionElements);return this._compositionElements.clear(),n}}function k7(t,n){if(!n.isEnabled)return;const e=n.buffer;e.lock(),t.enqueueChange(e.batch,()=>{t.deleteContent(t.document.selection)}),e.unlock()}function tke(t){const n=t.toRange();return t.detach(),n.root.rootName=="$graveyard"?null:n}function nke(t,n){let e=t.is("$text")?t.parent:t;for(;!n.toModelElement(e);)e=e.parent;return e}class E7 extends en{constructor(e,i){super(e);w(this,"direction");w(this,"_buffer");this.direction=i,this._buffer=new KD(e.model,e.config.get("typing.undoStep")),this._isEnabledBasedOnSelection=!1}get buffer(){return this._buffer}execute(e={}){const i=this.editor.model,s=i.document;i.enqueueChange(this._buffer.batch,r=>{this._buffer.lock();const o=r.createSelection(e.selection||s.selection);if(!i.canEditAt(o))return;const a=e.sequence||1,l=o.isCollapsed;if(o.isCollapsed&&i.modifySelection(o,{direction:this.direction,unit:e.unit,treatEmojiAsSingleUnit:!0}),this._shouldEntireContentBeReplacedWithParagraph(a)){this._replaceEntireContentWithParagraph(r);return}if(this._shouldReplaceFirstBlockWithParagraph(o,a)){this.editor.execute("paragraph",{selection:o});return}if(o.isCollapsed)return;let c=0;o.getFirstRange().getMinimalFlatRanges().forEach(u=>{c+=DC(u.getWalker({singleCharacters:!0,ignoreElementEnd:!0,shallow:!0}))}),i.deleteContent(o,{doNotResetEntireContent:l,direction:this.direction}),this._buffer.input(c),r.setSelection(o),this._buffer.unlock()})}_shouldEntireContentBeReplacedWithParagraph(e){if(e>1)return!1;const i=this.editor.model,r=i.document.selection,o=i.schema.getLimitElement(r);if(!(r.isCollapsed&&r.containsEntireContent(o))||!i.schema.checkChild(o,"paragraph"))return!1;const l=o.getChild(0);return!(l&&l.is("element","paragraph"))}_replaceEntireContentWithParagraph(e){const i=this.editor.model,r=i.document.selection,o=i.schema.getLimitElement(r),a=e.createElement("paragraph");e.remove(e.createRangeIn(o)),e.insert(a,o),e.setSelection(a,0)}_shouldReplaceFirstBlockWithParagraph(e,i){const s=this.editor.model;if(i>1||this.direction!="backward"||!e.isCollapsed)return!1;const r=e.getFirstPosition(),o=s.schema.getLimitElement(r),a=o.getChild(0);return!(r.parent!=a||!e.containsEntireContent(a)||!s.schema.checkChild(o,"paragraph")||a.name=="paragraph")}}const ike="character",S7="word",ske="codePoint",ku="selection",Ef="backward",Wp="forward",ZD={deleteContent:{unit:ku,direction:Ef},deleteContentBackward:{unit:ske,direction:Ef},deleteWordBackward:{unit:S7,direction:Ef},deleteHardLineBackward:{unit:ku,direction:Ef},deleteSoftLineBackward:{unit:ku,direction:Ef},deleteContentForward:{unit:ike,direction:Wp},deleteWordForward:{unit:S7,direction:Wp},deleteHardLineForward:{unit:ku,direction:Wp},deleteSoftLineForward:{unit:ku,direction:Wp}};class rke extends Rl{constructor(n){super(n);const e=n.document;let i=0;e.on("keydown",()=>{i++}),e.on("keyup",()=>{i=0}),e.on("beforeinput",(s,r)=>{if(!this.isEnabled)return;const{targetRanges:o,domEvent:a,inputType:l}=r,c=ZD[l];if(!c)return;const u={direction:c.direction,unit:c.unit,sequence:i};u.unit==ku&&(u.selectionToRemove=n.createSelection(o[0])),l==="deleteContentBackward"&&(sn.isAndroid&&(u.sequence=1),ake(o)&&(u.unit=ku,u.selectionToRemove=n.createSelection(o)));const d=new Lm(e,"delete",o[0]);e.fire(d,new um(n,a,u)),d.stop.called&&s.stop()}),sn.isBlink&&oke(this)}observe(){}stopObserving(){}}function oke(t){const n=t.view,e=n.document;let i=null,s=!1;e.on("keydown",(a,{keyCode:l})=>{i=l,s=!1}),e.on("keyup",(a,{keyCode:l,domEvent:c})=>{const u=e.selection,d=t.isEnabled&&l==i&&r(l)&&!u.isCollapsed&&!s;if(i=null,d){const f=u.getFirstRange(),p=new Lm(e,"delete",f),m={unit:ku,direction:o(l),selectionToRemove:u};e.fire(p,new um(n,c,m))}}),e.on("beforeinput",(a,{inputType:l})=>{const c=ZD[l];r(i)&&c&&c.direction==o(i)&&(s=!0)},{priority:"high"}),e.on("beforeinput",(a,{inputType:l,data:c})=>{i==Cn.delete&&l=="insertText"&&c==""&&a.stop()},{priority:"high"});function r(a){return a==Cn.backspace||a==Cn.delete}function o(a){return a==Cn.backspace?Ef:Wp}}function ake(t){if(t.length!=1||t[0].isCollapsed)return!1;const n=t[0].getWalker({direction:"backward",singleCharacters:!0,ignoreElementEnd:!0});let e=0;for(const{nextPosition:i,item:s}of n){if(i.parent.is("$text")){const r=i.parent.data,o=i.offset;if(PE(r,o)||OE(r,o)||fV(r,o))continue;e++}else(s.is("containerElement")||s.is("emptyElement"))&&e++;if(e>1)return!0}return!1}class Mh extends Be{constructor(){super(...arguments);w(this,"_undoOnBackspace")}static get pluginName(){return"Delete"}init(){const e=this.editor,i=e.editing.view,s=i.document,r=e.model.document;i.addObserver(rke),this._undoOnBackspace=!1;const o=new E7(e,"forward");e.commands.add("deleteForward",o),e.commands.add("forwardDelete",o),e.commands.add("delete",new E7(e,"backward")),this.listenTo(s,"delete",(a,l)=>{s.isComposing||l.preventDefault();const{direction:c,sequence:u,selectionToRemove:d,unit:f}=l,p=c==="forward"?"deleteForward":"delete",m={sequence:u};if(f=="selection"){const v=Array.from(d.getRanges()).map(y=>e.editing.mapper.toModelRange(y));m.selection=e.model.createSelection(v)}else m.unit=f;e.execute(p,m),i.scrollToTheSelection()},{priority:"low"}),this.editor.plugins.has("UndoEditing")&&(this.listenTo(s,"delete",(a,l)=>{this._undoOnBackspace&&l.direction=="backward"&&l.sequence==1&&l.unit=="codePoint"&&(this._undoOnBackspace=!1,e.execute("undo"),l.preventDefault(),a.stop())},{context:"$capture"}),this.listenTo(r,"change",()=>{this._undoOnBackspace=!1}))}requestUndoOnBackspace(){this.editor.plugins.has("UndoEditing")&&(this._undoOnBackspace=!0)}}class XD extends Be{static get requires(){return[YD,Mh]}static get pluginName(){return"Typing"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function JD(t,n){let e=t.start;return{text:Array.from(t.getWalker({ignoreElementEnd:!1})).reduce((s,{item:r})=>r.is("$text")||r.is("$textProxy")?s+r.data:(e=n.createPositionAfter(r),""),""),range:n.createRange(e,t.end)}}class tS extends li(){constructor(e,i){super();w(this,"model");w(this,"testCallback");w(this,"_hasMatch");this.model=e,this.testCallback=i,this._hasMatch=!1,this.set("isEnabled",!0),this.on("change:isEnabled",()=>{this.isEnabled?this._startListening():(this.stopListening(e.document.selection),this.stopListening(e.document))}),this._startListening()}get hasMatch(){return this._hasMatch}_startListening(){const i=this.model.document;this.listenTo(i.selection,"change:range",(s,{directChange:r})=>{if(r){if(!i.selection.isCollapsed){this.hasMatch&&(this.fire("unmatched"),this._hasMatch=!1);return}this._evaluateTextBeforeSelection("selection")}}),this.listenTo(i,"change:data",(s,r)=>{r.isUndo||!r.isLocal||this._evaluateTextBeforeSelection("data",{batch:r})})}_evaluateTextBeforeSelection(e,i={}){const s=this.model,o=s.document.selection,a=s.createRange(s.createPositionAt(o.focus.parent,0),o.focus),{text:l,range:c}=JD(a,s),u=this.testCallback(l);if(!u&&this.hasMatch&&this.fire("unmatched"),this._hasMatch=!!u,u){const d=Object.assign(i,{text:l,range:c});typeof u=="object"&&Object.assign(d,u),this.fire(`matched:${e}`,d)}}}class A_ extends Be{constructor(e){super(e);w(this,"attributes");w(this,"_overrideUid");w(this,"_isNextGravityRestorationSkipped",!1);this.attributes=new Set,this._overrideUid=null}static get pluginName(){return"TwoStepCaretMovement"}init(){const e=this.editor,i=e.model,s=e.editing.view,r=e.locale,o=i.document.selection;this.listenTo(s.document,"arrowKey",(a,l)=>{if(!o.isCollapsed||l.shiftKey||l.altKey||l.ctrlKey)return;const c=l.keyCode==Cn.arrowright,u=l.keyCode==Cn.arrowleft;if(!c&&!u)return;const d=r.contentLanguageDirection;let f=!1;d==="ltr"&&c||d==="rtl"&&u?f=this._handleForwardMovement(l):f=this._handleBackwardMovement(l),f===!0&&a.stop()},{context:"$text",priority:"highest"}),this.listenTo(o,"change:range",(a,l)=>{if(this._isNextGravityRestorationSkipped){this._isNextGravityRestorationSkipped=!1;return}this._isGravityOverridden&&(!l.directChange&&Yo(o.getFirstPosition(),this.attributes)||this._restoreGravity())}),this._enableClickingAfterNode(),this._enableInsertContentSelectionAttributesFixer(),this._handleDeleteContentAfterNode()}registerAttribute(e){this.attributes.add(e)}_handleForwardMovement(e){const i=this.attributes,s=this.editor.model,r=s.document.selection,o=r.getFirstPosition();return this._isGravityOverridden||o.isAtStart&&jl(r,i)?!1:Yo(o,i)?(Sp(e),jl(r,i)&&Yo(o,i,!0)?Ep(s,i):this._overrideGravity(),!0):!1}_handleBackwardMovement(e){const i=this.attributes,s=this.editor.model,r=s.document.selection,o=r.getFirstPosition();return this._isGravityOverridden?(Sp(e),this._restoreGravity(),Yo(o,i,!0)?Ep(s,i):Av(s,i,o),!0):o.isAtStart?jl(r,i)?(Sp(e),Av(s,i,o),!0):!1:!jl(r,i)&&Yo(o,i,!0)?(Sp(e),Av(s,i,o),!0):T7(o,i)?o.isAtEnd&&!jl(r,i)&&Yo(o,i)?(Sp(e),Av(s,i,o),!0):(this._isNextGravityRestorationSkipped=!0,this._overrideGravity(),!1):!1}_enableClickingAfterNode(){const e=this.editor,i=e.model,s=i.document.selection,r=e.editing.view.document;e.editing.view.addObserver(Gw);let o=!1;this.listenTo(r,"mousedown",()=>{o=!0}),this.listenTo(r,"selectionChange",()=>{const a=this.attributes;if(!o||(o=!1,!s.isCollapsed)||!jl(s,a))return;const l=s.getFirstPosition();Yo(l,a)&&(l.isAtStart||Yo(l,a,!0)?Ep(i,a):this._isGravityOverridden||this._overrideGravity())})}_enableInsertContentSelectionAttributesFixer(){const i=this.editor.model,s=i.document.selection,r=this.attributes;this.listenTo(i,"insertContent",()=>{const o=s.getFirstPosition();jl(s,r)&&Yo(o,r)&&Ep(i,r)},{priority:"low"})}_handleDeleteContentAfterNode(){const e=this.editor,i=e.model,s=i.document.selection,r=e.editing.view;let o=!1,a=!1;this.listenTo(r.document,"delete",(l,c)=>{o=c.direction==="backward"},{priority:"high"}),this.listenTo(i,"deleteContent",()=>{if(!o)return;const l=s.getFirstPosition();a=jl(s,this.attributes)&&!T7(l,this.attributes)},{priority:"high"}),this.listenTo(i,"deleteContent",()=>{o&&(o=!1,!a&&e.model.enqueueChange(()=>{const l=s.getFirstPosition();jl(s,this.attributes)&&Yo(l,this.attributes)&&(l.isAtStart||Yo(l,this.attributes,!0)?Ep(i,this.attributes):this._isGravityOverridden||this._overrideGravity())}))},{priority:"low"})}get _isGravityOverridden(){return!!this._overrideUid}_overrideGravity(){this._overrideUid=this.editor.model.change(e=>e.overrideSelectionGravity())}_restoreGravity(){this.editor.model.change(e=>{e.restoreSelectionGravity(this._overrideUid),this._overrideUid=null})}}function jl(t,n){for(const e of n)if(t.hasAttribute(e))return!0;return!1}function Av(t,n,e){const i=e.nodeBefore;t.change(s=>{if(i){const r=[],o=t.schema.isObject(i)&&t.schema.isInline(i);for(const[a,l]of i.getAttributes())t.schema.checkAttribute("$text",a)&&(!o||t.schema.getAttributeProperties(a).copyFromObject!==!1)&&r.push([a,l]);s.setSelectionAttribute(r)}else s.removeSelectionAttribute(n)})}function Ep(t,n){t.change(e=>{e.removeSelectionAttribute(n)})}function Sp(t){t.preventDefault()}function T7(t,n){const e=t.getShiftedBy(-1);return Yo(e,n)}function Yo(t,n,e=!1){const{nodeBefore:i,nodeAfter:s}=t;for(const r of n){const o=i?i.getAttribute(r):void 0,a=s?s.getAttribute(r):void 0;if(!(e&&(o===void 0||a===void 0))&&a!==o)return!0}return!1}const x7={copyright:{from:"(c)",to:"©"},registeredTrademark:{from:"(r)",to:"®"},trademark:{from:"(tm)",to:"™"},oneHalf:{from:/(^|[^/a-z0-9])(1\/2)([^/a-z0-9])$/i,to:[null,"½",null]},oneThird:{from:/(^|[^/a-z0-9])(1\/3)([^/a-z0-9])$/i,to:[null,"⅓",null]},twoThirds:{from:/(^|[^/a-z0-9])(2\/3)([^/a-z0-9])$/i,to:[null,"⅔",null]},oneForth:{from:/(^|[^/a-z0-9])(1\/4)([^/a-z0-9])$/i,to:[null,"¼",null]},threeQuarters:{from:/(^|[^/a-z0-9])(3\/4)([^/a-z0-9])$/i,to:[null,"¾",null]},lessThanOrEqual:{from:"<=",to:"≤"},greaterThanOrEqual:{from:">=",to:"≥"},notEqual:{from:"!=",to:"≠"},arrowLeft:{from:"<-",to:"←"},arrowRight:{from:"->",to:"→"},horizontalEllipsis:{from:"...",to:"…"},enDash:{from:/(^| )(--)( )$/,to:[null,"–",null]},emDash:{from:/(^| )(---)( )$/,to:[null,"—",null]},quotesPrimary:{from:cf('"'),to:[null,"“",null,"”"]},quotesSecondary:{from:cf("'"),to:[null,"‘",null,"’"]},quotesPrimaryEnGb:{from:cf("'"),to:[null,"‘",null,"’"]},quotesSecondaryEnGb:{from:cf('"'),to:[null,"“",null,"”"]},quotesPrimaryPl:{from:cf('"'),to:[null,"„",null,"”"]},quotesSecondaryPl:{from:cf("'"),to:[null,"‚",null,"’"]}},A7={symbols:["copyright","registeredTrademark","trademark"],mathematical:["oneHalf","oneThird","twoThirds","oneForth","threeQuarters","lessThanOrEqual","greaterThanOrEqual","notEqual","arrowLeft","arrowRight"],typography:["horizontalEllipsis","enDash","emDash"],quotes:["quotesPrimary","quotesSecondary"]},lke=["symbols","mathematical","typography","quotes"];class cke extends Be{static get requires(){return["Delete","Input"]}static get pluginName(){return"TextTransformation"}constructor(n){super(n),n.config.define("typing",{transformations:{include:lke}})}init(){const e=this.editor.model.document.selection;e.on("change:range",()=>{this.isEnabled=!e.anchor.parent.is("element","codeBlock")}),this._enableTransformationWatchers()}_enableTransformationWatchers(){const n=this.editor,e=n.model,i=n.plugins.get("Delete"),s=fke(n.config.get("typing.transformations")),r=a=>{for(const l of s)if(l.from.test(a))return{normalizedTransformation:l}},o=new tS(n.model,r);o.on("matched:data",(a,l)=>{if(!l.batch.isTyping)return;const{from:c,to:u}=l.normalizedTransformation,d=c.exec(l.text),f=u(d.slice(1)),p=l.range;let m=d.index;e.enqueueChange(v=>{for(let y=1;y<d.length;y++){const _=d[y],b=f[y-1];if(b==null){m+=_.length;continue}const E=p.start.getShiftedBy(m),x=e.createRange(E,E.getShiftedBy(_.length)),A=hke(E);e.insertContent(v.createText(b,A),x),m+=b.length}e.enqueueChange(()=>{i.requestUndoOnBackspace()})})}),o.bind("isEnabled").to(this)}}function uke(t){return typeof t=="string"?new RegExp(`(${uB(t)})$`):t}function dke(t){return typeof t=="string"?()=>[t]:t instanceof Array?()=>t:t}function hke(t){return(t.textNode?t.textNode:t.nodeAfter).getAttributes()}function cf(t){return new RegExp(`(^|\\s)(${t})([^${t}]*)(${t})$`)}function fke(t){const n=t.extra||[],e=t.remove||[],i=r=>!e.includes(r),s=t.include.concat(n).filter(i);return mke(s).filter(i).map(r=>typeof r=="string"&&x7[r]?x7[r]:r).filter(r=>typeof r=="object").map(r=>({from:uke(r.from),to:dke(r.to)}))}function mke(t){const n=new Set;for(const e of t)if(typeof e=="string"&&A7[e])for(const i of A7[e])n.add(i);else n.add(e);return Array.from(n)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function iy(t,n,e,i){return i.createRange(I7(t,n,e,!0,i),I7(t,n,e,!1,i))}function I7(t,n,e,i,s){let r=t.textNode||(i?t.nodeBefore:t.nodeAfter),o=null;for(;r&&r.getAttribute(n)==e;)o=r,r=i?r.previousSibling:r.nextSibling;return o?s.createPositionAt(o,i?"before":"after"):t}function QD(t,n,e,i){const s=t.editing.view,r=new Set;s.document.registerPostFixer(o=>{const a=t.model.document.selection;let l=!1;if(a.hasAttribute(n)){const c=iy(a.getFirstPosition(),n,a.getAttribute(n),t.model),u=t.editing.mapper.toViewRange(c);for(const d of u.getItems())d.is("element",e)&&!d.hasClass(i)&&(o.addClass(i,d),r.add(d),l=!0)}return l}),t.conversion.for("editingDowncast").add(o=>{o.on("insert",a,{priority:"highest"}),o.on("remove",a,{priority:"highest"}),o.on("attribute",a,{priority:"highest"}),o.on("selection",a,{priority:"highest"});function a(){s.change(l=>{for(const c of r.values())l.removeClass(i,c),r.delete(c)})}})}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function tu(t,n,e,i){let s,r=null;typeof i=="function"?s=i:(r=t.commands.get(i),s=()=>{t.execute(i)}),t.model.document.on("change:data",(o,a)=>{if(r&&!r.isEnabled||!n.isEnabled)return;const l=bs(t.model.document.selection.getRanges());if(!l.isCollapsed||a.isUndo||!a.isLocal)return;const c=Array.from(t.model.document.differ.getChanges()),u=c[0];if(c.length!=1||u.type!=="insert"||u.name!="$text"||u.length!=1)return;const d=u.position.parent;if(d.is("element","codeBlock")||d.is("element","listItem")&&typeof i!="function"&&!["numberedList","bulletedList","todoList"].includes(i)||r&&r.value===!0)return;const f=d.getChild(0),p=t.model.createRangeOn(f);if(!p.containsRange(l)&&!l.end.isEqual(p.end))return;const m=e.exec(f.data.substr(0,l.end.offset));m&&t.model.enqueueChange(v=>{const y=v.createPositionAt(d,0),_=v.createPositionAt(d,m[0].length),b=new Kr(y,_);if(s({match:m})!==!1){v.remove(b);const x=t.model.document.selection.getFirstRange(),A=v.createRangeIn(d);d.isEmpty&&!A.isEqual(x)&&!A.containsRange(x,!0)&&v.remove(d)}b.detach(),t.model.enqueueChange(()=>{t.plugins.get("Delete").requestUndoOnBackspace()})})})}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function uf(t,n,e,i){let s,r;e instanceof RegExp?s=e:r=e,r=r||(o=>{let a;const l=[],c=[];for(;(a=s.exec(o))!==null&&!(a&&a.length<4);){let{index:u,"1":d,"2":f,"3":p}=a;const m=d+f+p;u+=a[0].length-m.length;const v=[u,u+d.length],y=[u+d.length+f.length,u+d.length+f.length+p.length];l.push(v),l.push(y),c.push([u+d.length,u+d.length+f.length])}return{remove:l,format:c}}),t.model.document.on("change:data",(o,a)=>{if(a.isUndo||!a.isLocal||!n.isEnabled)return;const l=t.model,c=l.document.selection;if(!c.isCollapsed)return;const u=Array.from(l.document.differ.getChanges()),d=u[0];if(u.length!=1||d.type!=="insert"||d.name!="$text"||d.length!=1)return;const f=c.focus,p=f.parent,{text:m,range:v}=pke(l.createRange(l.createPositionAt(p,0),f),l),y=r(m),_=R7(v.start,y.format,l),b=R7(v.start,y.remove,l);_.length&&b.length&&l.enqueueChange(E=>{if(i(E,_)!==!1){for(const A of b.reverse())E.remove(A);l.enqueueChange(()=>{t.plugins.get("Delete").requestUndoOnBackspace()})}})})}function R7(t,n,e){return n.filter(i=>i[0]!==void 0&&i[1]!==void 0).map(i=>e.createRange(t.getShiftedBy(i[0]),t.getShiftedBy(i[1])))}function pke(t,n){let e=t.start;return{text:Array.from(t.getItems()).reduce((s,r)=>!(r.is("$text")||r.is("$textProxy"))||r.getAttribute("code")?(e=n.createPositionAfter(r),""):s+r.data,""),range:n.createRange(e,t.end)}}class gke extends Be{static get requires(){return[Mh]}static get pluginName(){return"Autoformat"}afterInit(){const n=this.editor,e=this.editor.t;this._addListAutoformats(),this._addBasicStylesAutoformats(),this._addHeadingAutoformats(),this._addBlockQuoteAutoformats(),this._addCodeBlockAutoformats(),this._addHorizontalLineAutoformats(),n.accessibility.addKeystrokeInfos({keystrokes:[{label:e("Revert autoformatting action"),keystroke:"Backspace"}]})}_addListAutoformats(){const n=this.editor.commands;n.get("bulletedList")&&tu(this.editor,this,/^[*-]\s$/,"bulletedList"),n.get("numberedList")&&tu(this.editor,this,/^1[.|)]\s$/,"numberedList"),n.get("todoList")&&tu(this.editor,this,/^\[\s?\]\s$/,"todoList"),n.get("checkTodoList")&&tu(this.editor,this,/^\[\s?x\s?\]\s$/,()=>{this.editor.execute("todoList"),this.editor.execute("checkTodoList")})}_addBasicStylesAutoformats(){const n=this.editor.commands;if(n.get("bold")){const e=Iv(this.editor,"bold");uf(this.editor,this,/(?:^|\s)(\*\*)([^*]+)(\*\*)$/g,e),uf(this.editor,this,/(?:^|\s)(__)([^_]+)(__)$/g,e)}if(n.get("italic")){const e=Iv(this.editor,"italic");uf(this.editor,this,/(?:^|\s)(\*)([^*_]+)(\*)$/g,e),uf(this.editor,this,/(?:^|\s)(_)([^_]+)(_)$/g,e)}if(n.get("code")){const e=Iv(this.editor,"code");uf(this.editor,this,/(`)([^`]+)(`)$/g,e)}if(n.get("strikethrough")){const e=Iv(this.editor,"strikethrough");uf(this.editor,this,/(~~)([^~]+)(~~)$/g,e)}}_addHeadingAutoformats(){const n=this.editor.commands.get("heading");n&&n.modelElements.filter(e=>e.match(/^heading[1-6]$/)).forEach(e=>{const i=e[7],s=new RegExp(`^(#{${i}})\\s$`);tu(this.editor,this,s,()=>{if(!n.isEnabled||n.value===e)return!1;this.editor.execute("heading",{value:e})})})}_addBlockQuoteAutoformats(){this.editor.commands.get("blockQuote")&&tu(this.editor,this,/^>\s$/,"blockQuote")}_addCodeBlockAutoformats(){const n=this.editor,e=n.model.document.selection;n.commands.get("codeBlock")&&tu(n,this,/^```$/,()=>{if(e.getFirstPosition().parent.is("element","listItem"))return!1;this.editor.execute("codeBlock",{usePreviousLanguageChoice:!0})})}_addHorizontalLineAutoformats(){this.editor.commands.get("horizontalLine")&&tu(this.editor,this,/^---$/,"horizontalLine")}}function Iv(t,n){return(e,i)=>{if(!t.commands.get(n).isEnabled)return!1;const r=t.model.schema.getValidRanges(i,n);for(const o of r)e.setAttribute(n,!0,o);e.removeSelectionAttribute(n)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class vke extends Be{constructor(e){super(e);w(this,"adapter");w(this,"_debouncedSave");w(this,"_lastDocumentVersion");w(this,"_savePromise");w(this,"_domEmitter");w(this,"_config");w(this,"_pendingActions");w(this,"_makeImmediateSave");w(this,"_action",null);const i=e.config.get("autosave")||{},s=i.waitingTime||1e3;this.set("state","synchronized"),this._debouncedSave=Ss(this._save.bind(this),s),this._lastDocumentVersion=e.model.document.version,this._savePromise=null,this._domEmitter=new(Rr()),this._config=i,this._pendingActions=e.plugins.get(E_),this._makeImmediateSave=!1}static get pluginName(){return"Autosave"}static get requires(){return[E_]}init(){const e=this.editor,i=e.model.document;this.listenTo(e,"ready",()=>{this.listenTo(i,"change:data",(s,r)=>{this._saveCallbacks.length&&r.isLocal&&(this.state==="synchronized"&&(this.state="waiting",this._setPendingAction()),this.state==="waiting"&&this._debouncedSave())})}),this.listenTo(e,"destroy",()=>this._flush(),{priority:"highest"});/* istanbul ignore next -- @preserve */this._domEmitter.listenTo(window,"beforeunload",(s,r)=>{this._pendingActions.hasAny&&(r.returnValue=this._pendingActions.first.message)})}destroy(){this._domEmitter.stopListening(),super.destroy()}save(){return this._debouncedSave.cancel(),this._save()}_flush(){this._debouncedSave.flush()}_save(){return this._savePromise?(this._makeImmediateSave=this.editor.model.document.version>this._lastDocumentVersion,this._savePromise):(this._setPendingAction(),this.state="saving",this._lastDocumentVersion=this.editor.model.document.version,this._savePromise=Promise.resolve().then(()=>Promise.all(this._saveCallbacks.map(e=>e(this.editor)))).finally(()=>{this._savePromise=null}).then(()=>{if(this._makeImmediateSave)return this._makeImmediateSave=!1,this._save();this.editor.model.document.version>this._lastDocumentVersion?(this.state="waiting",this._debouncedSave()):(this.state="synchronized",this._pendingActions.remove(this._action),this._action=null)}).catch(e=>{throw this.state="error",this.state="saving",this._debouncedSave(),e}),this._savePromise)}_setPendingAction(){const e=this.editor.t;this._action||(this._action=this._pendingActions.add(e("Saving changes")))}get _saveCallbacks(){const e=[];return this.adapter&&this.adapter.save&&e.push(this.adapter.save),this._config.save&&e.push(this._config.save),e}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ph extends en{constructor(e,i){super(e);w(this,"attributeKey");this.attributeKey=i}refresh(){const e=this.editor.model,i=e.document;this.value=this._getValueFromFirstAllowedNode(),this.isEnabled=e.schema.checkAttributeInSelection(i.selection,this.attributeKey)}execute(e={}){const i=this.editor.model,r=i.document.selection,o=e.forceValue===void 0?!this.value:e.forceValue;i.change(a=>{if(r.isCollapsed)o?a.setSelectionAttribute(this.attributeKey,!0):a.removeSelectionAttribute(this.attributeKey);else{const l=i.schema.getValidRanges(r.getRanges(),this.attributeKey);for(const c of l)o?a.setAttribute(this.attributeKey,o,c):a.removeAttribute(this.attributeKey,c)}})}_getValueFromFirstAllowedNode(){const e=this.editor.model,i=e.schema,s=e.document.selection;if(s.isCollapsed)return s.hasAttribute(this.attributeKey);for(const r of s.getRanges())for(const o of r.getItems())if(i.checkAttribute(o,this.attributeKey))return o.hasAttribute(this.attributeKey);return!1}}const df="bold";class bke extends Be{static get pluginName(){return"BoldEditing"}init(){const n=this.editor,e=this.editor.t;n.model.schema.extend("$text",{allowAttributes:df}),n.model.schema.setAttributeProperties(df,{isFormatting:!0,copyOnEnter:!0}),n.conversion.attributeToElement({model:df,view:"strong",upcastAlso:["b",i=>{const s=i.getStyle("font-weight");return s&&(s=="bold"||Number(s)>=600)?{name:!0,styles:["font-weight"]}:null}]}),n.commands.add(df,new Ph(n,df)),n.keystrokes.set("CTRL+B",df),n.accessibility.addKeystrokeInfos({keystrokes:[{label:e("Bold text"),keystroke:"CTRL+B"}]})}}function Oh({editor:t,commandName:n,plugin:e,icon:i,label:s,keystroke:r}){return o=>{const a=t.commands.get(n),l=new o(t.locale);return l.set({label:s,icon:i,keystroke:r,isToggleable:!0}),l.bind("isEnabled").to(a,"isEnabled"),l.bind("isOn").to(a,"value"),l instanceof Xi?l.set({role:"menuitemcheckbox"}):l.set({tooltip:!0}),e.listenTo(l,"execute",()=>{t.execute(n),t.editing.view.focus()}),l}}const z5="bold";class _ke extends Be{static get pluginName(){return"BoldUI"}init(){const n=this.editor,e=n.locale.t,i=Oh({editor:n,commandName:z5,plugin:this,icon:kt.bold,label:e("Bold"),keystroke:"CTRL+B"});n.ui.componentFactory.add(z5,()=>i(Yt)),n.ui.componentFactory.add("menuBar:"+z5,()=>i(Xi))}}class wke extends Be{static get requires(){return[bke,_ke]}static get pluginName(){return"Bold"}}const yd="code",yke="ck-code_selected";class Cke extends Be{static get pluginName(){return"CodeEditing"}static get requires(){return[A_]}init(){const n=this.editor,e=this.editor.t;n.model.schema.extend("$text",{allowAttributes:yd}),n.model.schema.setAttributeProperties(yd,{isFormatting:!0,copyOnEnter:!1}),n.conversion.attributeToElement({model:yd,view:"code",upcastAlso:{styles:{"word-wrap":"break-word"}}}),n.commands.add(yd,new Ph(n,yd)),n.plugins.get(A_).registerAttribute(yd),QD(n,yd,"code",yke),n.accessibility.addKeystrokeInfos({keystrokes:[{label:e("Move out of an inline code style"),keystroke:[["arrowleft","arrowleft"],["arrowright","arrowright"]]}]})}}var kke='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m12.5 5.7 5.2 3.9v1.3l-5.6 4c-.1.2-.3.2-.5.2-.3-.1-.6-.7-.6-1l.3-.4 4.7-3.5L11.5 7l-.2-.2c-.1-.3-.1-.6 0-.8.2-.2.5-.4.8-.4a.8.8 0 0 1 .4.1zm-5.2 0L2 9.6v1.3l5.6 4c.1.2.3.2.5.2.3-.1.7-.7.6-1 0-.1 0-.3-.2-.4l-5-3.5L8.2 7l.2-.2c.1-.3.1-.6 0-.8-.2-.2-.5-.4-.8-.4a.8.8 0 0 0-.3.1z"/></svg>';const H5="code";class Eke extends Be{static get pluginName(){return"CodeUI"}init(){const n=this.editor,e=n.locale.t,i=Oh({editor:n,commandName:H5,plugin:this,icon:kke,label:e("Code")});n.ui.componentFactory.add(H5,()=>i(Yt)),n.ui.componentFactory.add("menuBar:"+H5,()=>i(Xi))}}class Ske extends Be{static get requires(){return[Cke,Eke]}static get pluginName(){return"Code"}}const hf="italic";class Tke extends Be{static get pluginName(){return"ItalicEditing"}init(){const n=this.editor,e=this.editor.t;n.model.schema.extend("$text",{allowAttributes:hf}),n.model.schema.setAttributeProperties(hf,{isFormatting:!0,copyOnEnter:!0}),n.conversion.attributeToElement({model:hf,view:"i",upcastAlso:["em",{styles:{"font-style":"italic"}}]}),n.commands.add(hf,new Ph(n,hf)),n.keystrokes.set("CTRL+I",hf),n.accessibility.addKeystrokeInfos({keystrokes:[{label:e("Italic text"),keystroke:"CTRL+I"}]})}}var xke='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m9.586 14.633.021.004c-.036.335.095.655.393.962.082.083.173.15.274.201h1.474a.6.6 0 1 1 0 1.2H5.304a.6.6 0 0 1 0-1.2h1.15c.474-.07.809-.182 1.005-.334.157-.122.291-.32.404-.597l2.416-9.55a1.053 1.053 0 0 0-.281-.823 1.12 1.12 0 0 0-.442-.296H8.15a.6.6 0 0 1 0-1.2h6.443a.6.6 0 1 1 0 1.2h-1.195c-.376.056-.65.155-.823.296-.215.175-.423.439-.623.79l-2.366 9.347z"/></svg>';const U5="italic";class Ake extends Be{static get pluginName(){return"ItalicUI"}init(){const n=this.editor,e=n.locale.t,i=Oh({editor:n,commandName:U5,plugin:this,icon:xke,keystroke:"CTRL+I",label:e("Italic")});n.ui.componentFactory.add(U5,()=>i(Yt)),n.ui.componentFactory.add("menuBar:"+U5,()=>i(Xi))}}class Ike extends Be{static get requires(){return[Tke,Ake]}static get pluginName(){return"Italic"}}const Tp="strikethrough";class Rke extends Be{static get pluginName(){return"StrikethroughEditing"}init(){const n=this.editor,e=this.editor.t;n.model.schema.extend("$text",{allowAttributes:Tp}),n.model.schema.setAttributeProperties(Tp,{isFormatting:!0,copyOnEnter:!0}),n.conversion.attributeToElement({model:Tp,view:"s",upcastAlso:["del","strike",{styles:{"text-decoration":"line-through"}}]}),n.commands.add(Tp,new Ph(n,Tp)),n.keystrokes.set("CTRL+SHIFT+X","strikethrough"),n.accessibility.addKeystrokeInfos({keystrokes:[{label:e("Strikethrough text"),keystroke:"CTRL+SHIFT+X"}]})}}var Mke='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 16.4c-.8-.4-1.5-.9-2.2-1.5a.6.6 0 0 1-.2-.5l.3-.6h1c1 1.2 2.1 1.7 3.7 1.7 1 0 1.8-.3 2.3-.6.6-.4.6-1.2.6-1.3.2-1.2-.9-2.1-.9-2.1h2.1c.3.7.4 1.2.4 1.7v.8l-.6 1.2c-.6.8-1.1 1-1.6 1.2a6 6 0 0 1-2.4.6c-1 0-1.8-.3-2.5-.6zM6.8 9 6 8.3c-.4-.5-.5-.8-.5-1.6 0-.7.1-1.3.5-1.8.4-.6 1-1 1.6-1.3a6.3 6.3 0 0 1 4.7 0 4 4 0 0 1 1.7 1l.3.7c0 .1.2.4-.2.7-.4.2-.9.1-1 0a3 3 0 0 0-1.2-1c-.4-.2-1-.3-2-.4-.7 0-1.4.2-2 .6-.8.6-1 .8-1 1.5 0 .8.5 1 1.2 1.5.6.4 1.1.7 1.9 1H6.8z"/><path d="M3 10.5V9h14v1.5z"/></svg>';const W5="strikethrough";class Pke extends Be{static get pluginName(){return"StrikethroughUI"}init(){const n=this.editor,e=n.locale.t,i=Oh({editor:n,commandName:W5,plugin:this,icon:Mke,keystroke:"CTRL+SHIFT+X",label:e("Strikethrough")});n.ui.componentFactory.add(W5,()=>i(Yt)),n.ui.componentFactory.add("menuBar:"+W5,()=>i(Xi))}}class Oke extends Be{static get requires(){return[Rke,Pke]}static get pluginName(){return"Strikethrough"}}const xp="subscript";class Lke extends Be{static get pluginName(){return"SubscriptEditing"}init(){const n=this.editor;n.model.schema.extend("$text",{allowAttributes:xp}),n.model.schema.setAttributeProperties(xp,{isFormatting:!0,copyOnEnter:!0}),n.conversion.attributeToElement({model:xp,view:"sub",upcastAlso:[{styles:{"vertical-align":"sub"}}]}),n.commands.add(xp,new Ph(n,xp))}}var Bke='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m7.03 10.349 3.818-3.819a.8.8 0 1 1 1.132 1.132L8.16 11.48l3.819 3.818a.8.8 0 1 1-1.132 1.132L7.03 12.61l-3.818 3.82a.8.8 0 1 1-1.132-1.132L5.9 11.48 2.08 7.662A.8.8 0 1 1 3.212 6.53l3.818 3.82zm8.147 7.829h2.549c.254 0 .447.05.58.152a.49.49 0 0 1 .201.413.54.54 0 0 1-.159.393c-.105.108-.266.162-.48.162h-3.594c-.245 0-.435-.066-.572-.197a.621.621 0 0 1-.205-.463c0-.114.044-.265.132-.453a1.62 1.62 0 0 1 .288-.444c.433-.436.824-.81 1.172-1.122.348-.312.597-.517.747-.615.267-.183.49-.368.667-.553.177-.185.312-.375.405-.57.093-.194.139-.384.139-.57a1.008 1.008 0 0 0-.554-.917 1.197 1.197 0 0 0-.56-.133c-.426 0-.761.182-1.005.546a2.332 2.332 0 0 0-.164.39 1.609 1.609 0 0 1-.258.488c-.096.114-.237.17-.423.17a.558.558 0 0 1-.405-.156.568.568 0 0 1-.161-.427c0-.218.05-.446.151-.683.101-.238.252-.453.452-.646s.454-.349.762-.467a2.998 2.998 0 0 1 1.081-.178c.498 0 .923.076 1.274.228a1.916 1.916 0 0 1 1.004 1.032 1.984 1.984 0 0 1-.156 1.794c-.2.32-.405.572-.613.754-.208.182-.558.468-1.048.857-.49.39-.826.691-1.008.906a2.703 2.703 0 0 0-.24.309z"/></svg>';const j5="subscript";class Fke extends Be{static get pluginName(){return"SubscriptUI"}init(){const n=this.editor,e=n.locale.t,i=Oh({editor:n,commandName:j5,plugin:this,icon:Bke,label:e("Subscript")});n.ui.componentFactory.add(j5,()=>i(Yt)),n.ui.componentFactory.add("menuBar:"+j5,()=>i(Xi))}}class Nke extends Be{static get requires(){return[Lke,Fke]}static get pluginName(){return"Subscript"}}const Ap="superscript";class Vke extends Be{static get pluginName(){return"SuperscriptEditing"}init(){const n=this.editor;n.model.schema.extend("$text",{allowAttributes:Ap}),n.model.schema.setAttributeProperties(Ap,{isFormatting:!0,copyOnEnter:!0}),n.conversion.attributeToElement({model:Ap,view:"sup",upcastAlso:[{styles:{"vertical-align":"super"}}]}),n.commands.add(Ap,new Ph(n,Ap))}}var Dke='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M15.677 8.678h2.549c.254 0 .447.05.58.152a.49.49 0 0 1 .201.413.54.54 0 0 1-.159.393c-.105.108-.266.162-.48.162h-3.594c-.245 0-.435-.066-.572-.197a.621.621 0 0 1-.205-.463c0-.114.044-.265.132-.453a1.62 1.62 0 0 1 .288-.444c.433-.436.824-.81 1.172-1.122.348-.312.597-.517.747-.615.267-.183.49-.368.667-.553.177-.185.312-.375.405-.57.093-.194.139-.384.139-.57a1.008 1.008 0 0 0-.554-.917 1.197 1.197 0 0 0-.56-.133c-.426 0-.761.182-1.005.546a2.332 2.332 0 0 0-.164.39 1.609 1.609 0 0 1-.258.488c-.096.114-.237.17-.423.17a.558.558 0 0 1-.405-.156.568.568 0 0 1-.161-.427c0-.218.05-.446.151-.683.101-.238.252-.453.452-.646s.454-.349.762-.467a2.998 2.998 0 0 1 1.081-.178c.498 0 .923.076 1.274.228a1.916 1.916 0 0 1 1.004 1.032 1.984 1.984 0 0 1-.156 1.794c-.2.32-.405.572-.613.754-.208.182-.558.468-1.048.857-.49.39-.826.691-1.008.906a2.703 2.703 0 0 0-.24.309zM7.03 10.349l3.818-3.819a.8.8 0 1 1 1.132 1.132L8.16 11.48l3.819 3.818a.8.8 0 1 1-1.132 1.132L7.03 12.61l-3.818 3.82a.8.8 0 1 1-1.132-1.132L5.9 11.48 2.08 7.662A.8.8 0 1 1 3.212 6.53l3.818 3.82z"/></svg>';const q5="superscript";class $ke extends Be{static get pluginName(){return"SuperscriptUI"}init(){const n=this.editor,e=n.locale.t,i=Oh({editor:n,commandName:q5,plugin:this,icon:Dke,label:e("Superscript")});n.ui.componentFactory.add(q5,()=>i(Yt)),n.ui.componentFactory.add("menuBar:"+q5,()=>i(Xi))}}class zke extends Be{static get requires(){return[Vke,$ke]}static get pluginName(){return"Superscript"}}const Ip="underline";class Hke extends Be{static get pluginName(){return"UnderlineEditing"}init(){const n=this.editor,e=this.editor.t;n.model.schema.extend("$text",{allowAttributes:Ip}),n.model.schema.setAttributeProperties(Ip,{isFormatting:!0,copyOnEnter:!0}),n.conversion.attributeToElement({model:Ip,view:"u",upcastAlso:{styles:{"text-decoration":"underline"}}}),n.commands.add(Ip,new Ph(n,Ip)),n.keystrokes.set("CTRL+U","underline"),n.accessibility.addKeystrokeInfos({keystrokes:[{label:e("Underline text"),keystroke:"CTRL+U"}]})}}var Uke='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 18v-1.5h14V18zm2.2-8V3.6c0-.4.4-.6.8-.6.3 0 .7.2.7.6v6.2c0 2 1.3 2.8 3.2 2.8 1.9 0 3.4-.9 3.4-2.9V3.6c0-.3.4-.5.8-.5.3 0 .7.2.7.5V10c0 2.7-2.2 4-4.9 4-2.6 0-4.7-1.2-4.7-4z"/></svg>';const K5="underline";class Wke extends Be{static get pluginName(){return"UnderlineUI"}init(){const n=this.editor,e=n.locale.t,i=Oh({editor:n,commandName:K5,plugin:this,icon:Uke,label:e("Underline"),keystroke:"CTRL+U"});n.ui.componentFactory.add(K5,()=>i(Yt)),n.ui.componentFactory.add("menuBar:"+K5,()=>i(Xi))}}class jke extends Be{static get requires(){return[Hke,Wke]}static get pluginName(){return"Underline"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 *//**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function*e$(t,n){for(const e of n)e&&t.getAttributeProperties(e[0]).copyOnEnter&&(yield e)}class qke extends en{execute(){this.editor.model.change(n=>{this.enterBlock(n),this.fire("afterExecute",{writer:n})})}enterBlock(n){const e=this.editor.model,i=e.document.selection,s=e.schema,r=i.isCollapsed,o=i.getFirstRange(),a=o.start.parent,l=o.end.parent;if(s.isLimit(a)||s.isLimit(l))return!r&&a==l&&e.deleteContent(i),!1;if(r){const c=e$(n.model.schema,i.getAttributes());return M7(n,o.start),n.setSelectionAttribute(c),!0}else{const c=!(o.start.isAtStart&&o.end.isAtEnd),u=a==l;if(e.deleteContent(i,{leaveUnmerged:c}),c){if(u)return M7(n,i.focus),!0;n.setSelection(l,0)}}return!1}}function M7(t,n){t.split(n),t.setSelection(n.parent.nextSibling,0)}const Kke={insertParagraph:{isSoft:!1},insertLineBreak:{isSoft:!0}};class t$ extends Rl{constructor(n){super(n);const e=this.document;let i=!1;e.on("keydown",(s,r)=>{i=r.shiftKey}),e.on("beforeinput",(s,r)=>{if(!this.isEnabled)return;let o=r.inputType;sn.isSafari&&i&&o=="insertParagraph"&&(o="insertLineBreak");const a=r.domEvent,l=Kke[o];if(!l)return;const c=new Lm(e,"enter",r.targetRanges[0]);e.fire(c,new um(n,a,{isSoft:l.isSoft})),c.stop.called&&s.stop()})}observe(){}stopObserving(){}}class nS extends Be{static get pluginName(){return"Enter"}init(){const n=this.editor,e=n.editing.view,i=e.document,s=this.editor.t;e.addObserver(t$),n.commands.add("enter",new qke(n)),this.listenTo(i,"enter",(r,o)=>{i.isComposing||o.preventDefault(),!o.isSoft&&(n.execute("enter"),e.scrollToTheSelection())},{priority:"low"}),n.accessibility.addKeystrokeInfos({keystrokes:[{label:s("Insert a hard break (a new paragraph)"),keystroke:"Enter"}]})}}class Gke extends en{execute(){const n=this.editor.model,e=n.document;n.change(i=>{Zke(n,i,e.selection),this.fire("afterExecute",{writer:i})})}refresh(){const n=this.editor.model,e=n.document;this.isEnabled=Yke(n.schema,e.selection)}}function Yke(t,n){if(n.rangeCount>1)return!1;const e=n.anchor;if(!e||!t.checkChild(e,"softBreak"))return!1;const i=n.getFirstRange(),s=i.start.parent,r=i.end.parent;return!((ok(s,t)||ok(r,t))&&s!==r)}function Zke(t,n,e){const i=e.isCollapsed,s=e.getFirstRange(),r=s.start.parent,o=s.end.parent,a=r==o;if(i){const l=e$(t.schema,e.getAttributes());P7(t,n,s.end),n.removeSelectionAttribute(e.getAttributeKeys()),n.setSelectionAttribute(l)}else{const l=!(s.start.isAtStart&&s.end.isAtEnd);t.deleteContent(e,{leaveUnmerged:l}),a?P7(t,n,e.focus):l&&n.setSelection(o,0)}}function P7(t,n,e){const i=n.createElement("softBreak");t.insertContent(i,e),n.setSelection(i,"after")}function ok(t,n){return t.is("rootElement")?!1:n.isLimit(t)||ok(t.parent,n)}class Xke extends Be{static get pluginName(){return"ShiftEnter"}init(){const n=this.editor,e=n.model.schema,i=n.conversion,s=n.editing.view,r=s.document,o=this.editor.t;e.register("softBreak",{allowWhere:"$text",isInline:!0}),i.for("upcast").elementToElement({model:"softBreak",view:"br"}),i.for("downcast").elementToElement({model:"softBreak",view:(a,{writer:l})=>l.createEmptyElement("br")}),s.addObserver(t$),n.commands.add("shiftEnter",new Gke(n)),this.listenTo(r,"enter",(a,l)=>{r.isComposing||l.preventDefault(),l.isSoft&&(n.execute("shiftEnter"),s.scrollToTheSelection())},{priority:"low"}),n.accessibility.addKeystrokeInfos({keystrokes:[{label:o("Insert a soft break (a <code>&lt;br&gt;</code> element)"),keystroke:"Shift+Enter"}]})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Jke extends Ti(){constructor(){super(...arguments);w(this,"_stack",[])}add(e,i){const s=this._stack,r=s[0];this._insertDescriptor(e);const o=s[0];r!==o&&!G5(r,o)&&this.fire("change:top",{oldDescriptor:r,newDescriptor:o,writer:i})}remove(e,i){const s=this._stack,r=s[0];this._removeDescriptor(e);const o=s[0];r!==o&&!G5(r,o)&&this.fire("change:top",{oldDescriptor:r,newDescriptor:o,writer:i})}_insertDescriptor(e){const i=this._stack,s=i.findIndex(o=>o.id===e.id);if(G5(e,i[s]))return;s>-1&&i.splice(s,1);let r=0;for(;i[r]&&Qke(i[r],e);)r++;i.splice(r,0,e)}_removeDescriptor(e){const i=this._stack,s=i.findIndex(r=>r.id===e);s>-1&&i.splice(s,1)}}function G5(t,n){return t&&n&&t.priority==n.priority&&I_(t.classes)==I_(n.classes)}function Qke(t,n){return t.priority>n.priority?!0:t.priority<n.priority?!1:I_(t.classes)>I_(n.classes)}function I_(t){return Array.isArray(t)?t.sort().join(","):t}var e4e='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M4 0v1H1v3H0V.5A.5.5 0 0 1 .5 0H4zm8 0h3.5a.5.5 0 0 1 .5.5V4h-1V1h-3V0zM4 16H.5a.5.5 0 0 1-.5-.5V12h1v3h3v1zm8 0v-1h3v-3h1v3.5a.5.5 0 0 1-.5.5H12z"/><path fill-opacity=".256" d="M1 1h14v14H1z"/><g class="ck-icon__selected-indicator"><path d="M7 0h2v1H7V0zM0 7h1v2H0V7zm15 0h1v2h-1V7zm-8 8h2v1H7v-1z"/><path fill-opacity=".254" d="M1 1h14v14H1z"/></g></svg>';const t4e="ck-widget",O7="ck-widget_selected";function ps(t){return t.is("element")?!!t.getCustomProperty("widget"):!1}function sy(t,n,e={}){if(!t.is("containerElement"))throw new fe("widget-to-widget-wrong-element-type",null,{element:t});return n.setAttribute("contenteditable","false",t),n.addClass(t4e,t),n.setCustomProperty("widget",!0,t),t.getFillerOffset=o4e,n.setCustomProperty("widgetLabel",[],t),e.label&&s4e(t,e.label),e.hasSelectionHandle&&a4e(t,n),n$(t,n),t}function n4e(t,n,e){if(n.classes&&e.addClass(Si(n.classes),t),n.attributes)for(const i in n.attributes)e.setAttribute(i,n.attributes[i],t)}function i4e(t,n,e){if(n.classes&&e.removeClass(Si(n.classes),t),n.attributes)for(const i in n.attributes)e.removeAttribute(i,t)}function n$(t,n,e=n4e,i=i4e){const s=new Jke;s.on("change:top",(a,l)=>{l.oldDescriptor&&i(t,l.oldDescriptor,l.writer),l.newDescriptor&&e(t,l.newDescriptor,l.writer)});const r=(a,l,c)=>s.add(l,c),o=(a,l,c)=>s.remove(l,c);n.setCustomProperty("addHighlight",r,t),n.setCustomProperty("removeHighlight",o,t)}function s4e(t,n){t.getCustomProperty("widgetLabel").push(n)}function r4e(t){return t.getCustomProperty("widgetLabel").reduce((e,i)=>typeof i=="function"?e?e+". "+i():i():e?e+". "+i:i,"")}function iS(t,n,e={}){return n.addClass(["ck-editor__editable","ck-editor__nested-editable"],t),n.setAttribute("role","textbox",t),n.setAttribute("tabindex","-1",t),e.label&&n.setAttribute("aria-label",e.label,t),n.setAttribute("contenteditable",t.isReadOnly?"false":"true",t),t.on("change:isReadOnly",(i,s,r)=>{n.setAttribute("contenteditable",r?"false":"true",t)}),t.on("change:isFocused",(i,s,r)=>{r?n.addClass("ck-editor__nested-editable_focused",t):n.removeClass("ck-editor__nested-editable_focused",t)}),n$(t,n),t}function sS(t,n){const e=t.getSelectedElement();if(e){const i=fu(t);if(i)return n.createRange(n.createPositionAt(e,i))}return n.schema.findOptimalInsertionRange(t)}function o4e(){return null}function a4e(t,n){const e=n.createUIElement("div",{class:"ck ck-widget__selection-handle"},function(i){const s=this.toDomElement(i),r=new _c;return r.set("content",e4e),r.render(),s.appendChild(r.element),s});n.insert(n.createPositionAt(t,0),e),n.addClass(["ck-widget_with-selection-handle"],t)}function rS(t){const n=a=>{const{width:l,paddingLeft:c,paddingRight:u}=a.ownerDocument.defaultView.getComputedStyle(a);return parseFloat(l)-(parseFloat(c)||0)-(parseFloat(u)||0)},e=t.parentElement;if(!e)return 0;let i=n(e);const s=5;let r=0,o=e;for(;isNaN(i);){if(o=o.parentElement,++r>s)return 0;i=n(o)}return i}function l4e(t,n=new mn(t)){const e=rS(t);return e?n.width/e*100:0}const Gl="widget-type-around";function Cd(t,n,e){return!!t&&ps(t)&&!e.isInline(n)}function c4e(t){return t.closest(".ck-widget__type-around__button")}function u4e(t){return t.classList.contains("ck-widget__type-around__button_before")?"before":"after"}function d4e(t,n){const e=t.closest(".ck-widget");return n.mapDomToView(e)}function fu(t){return t.getAttribute(Gl)}var h4e='<svg viewBox="0 0 10 8" xmlns="http://www.w3.org/2000/svg"><path d="M9.055.263v3.972h-6.77M1 4.216l2-2.038m-2 2 2 2.038"/></svg>';const i$=["before","after"],f4e=new DOMParser().parseFromString(h4e,"image/svg+xml").firstChild,L7="ck-widget__type-around_disabled";class m4e extends Be{constructor(){super(...arguments);w(this,"_currentFakeCaretModelElement",null)}static get pluginName(){return"WidgetTypeAround"}static get requires(){return[nS,Mh]}init(){const e=this.editor,i=e.editing.view;this.on("change:isEnabled",(s,r,o)=>{i.change(a=>{for(const l of i.document.roots)o?a.removeClass(L7,l):a.addClass(L7,l)}),o||e.model.change(a=>{a.removeSelectionAttribute(Gl)})}),this._enableTypeAroundUIInjection(),this._enableInsertingParagraphsOnButtonClick(),this._enableInsertingParagraphsOnEnterKeypress(),this._enableInsertingParagraphsOnTypingKeystroke(),this._enableTypeAroundFakeCaretActivationUsingKeyboardArrows(),this._enableDeleteIntegration(),this._enableInsertContentIntegration(),this._enableInsertObjectIntegration(),this._enableDeleteContentIntegration()}destroy(){super.destroy(),this._currentFakeCaretModelElement=null}_insertParagraph(e,i){const s=this.editor,r=s.editing.view,o=s.model.schema.getAttributesWithProperty(e,"copyOnReplace",!0);s.execute("insertParagraph",{position:s.model.createPositionAt(e,i),attributes:o}),r.focus(),r.scrollToTheSelection()}_listenToIfEnabled(e,i,s,r){this.listenTo(e,i,(...o)=>{this.isEnabled&&s(...o)},r)}_insertParagraphAccordingToFakeCaretPosition(){const s=this.editor.model.document.selection,r=fu(s);if(!r)return!1;const o=s.getSelectedElement();return this._insertParagraph(o,r),!0}_enableTypeAroundUIInjection(){const e=this.editor,i=e.model.schema,s=e.locale.t,r={before:s("Insert paragraph before block"),after:s("Insert paragraph after block")};e.editing.downcastDispatcher.on("insert",(o,a,l)=>{const c=l.mapper.toViewElement(a.item);c&&Cd(c,a.item,i)&&(p4e(l.writer,r,c),c.getCustomProperty("widgetLabel").push(()=>this.isEnabled?s("Press Enter to type after or press Shift + Enter to type before the widget"):""))},{priority:"low"})}_enableTypeAroundFakeCaretActivationUsingKeyboardArrows(){const e=this.editor,i=e.model,s=i.document.selection,r=i.schema,o=e.editing.view;this._listenToIfEnabled(o.document,"arrowKey",(l,c)=>{this._handleArrowKeyPress(l,c)},{context:[ps,"$text"],priority:"high"}),this._listenToIfEnabled(s,"change:range",(l,c)=>{c.directChange&&e.model.change(u=>{u.removeSelectionAttribute(Gl)})}),this._listenToIfEnabled(i.document,"change:data",()=>{const l=s.getSelectedElement();if(l){const c=e.editing.mapper.toViewElement(l);if(Cd(c,l,r))return}e.model.change(c=>{c.removeSelectionAttribute(Gl)})}),this._listenToIfEnabled(e.editing.downcastDispatcher,"selection",(l,c,u)=>{const d=u.writer;if(this._currentFakeCaretModelElement){const v=u.mapper.toViewElement(this._currentFakeCaretModelElement);v&&(d.removeClass(i$.map(a),v),this._currentFakeCaretModelElement=null)}const f=c.selection.getSelectedElement();if(!f)return;const p=u.mapper.toViewElement(f);if(!Cd(p,f,r))return;const m=fu(c.selection);m&&(d.addClass(a(m),p),this._currentFakeCaretModelElement=f)}),this._listenToIfEnabled(e.ui.focusTracker,"change:isFocused",(l,c,u)=>{u||e.model.change(d=>{d.removeSelectionAttribute(Gl)})});function a(l){return`ck-widget_type-around_show-fake-caret_${l}`}}_handleArrowKeyPress(e,i){const s=this.editor,r=s.model,o=r.document.selection,a=r.schema,l=s.editing.view,c=i.keyCode,u=Dve(c,s.locale.contentLanguageDirection),d=l.document.selection.getSelectedElement(),f=s.editing.mapper.toModelElement(d);let p;Cd(d,f,a)?p=this._handleArrowKeyPressOnSelectedWidget(u):o.isCollapsed?p=this._handleArrowKeyPressWhenSelectionNextToAWidget(u):i.shiftKey||(p=this._handleArrowKeyPressWhenNonCollapsedSelection(u)),p&&(i.preventDefault(),e.stop())}_handleArrowKeyPressOnSelectedWidget(e){const s=this.editor.model,r=s.document.selection,o=fu(r);return s.change(a=>{if(o){if(!(o===(e?"after":"before")))return a.removeSelectionAttribute(Gl),!0}else return a.setSelectionAttribute(Gl,e?"after":"before"),!0;return!1})}_handleArrowKeyPressWhenSelectionNextToAWidget(e){const i=this.editor,s=i.model,r=s.schema,o=i.plugins.get("Widget"),a=o._getObjectElementNextToSelection(e),l=i.editing.mapper.toViewElement(a);return Cd(l,a,r)?(s.change(c=>{o._setSelectionOverElement(a),c.setSelectionAttribute(Gl,e?"before":"after")}),!0):!1}_handleArrowKeyPressWhenNonCollapsedSelection(e){const i=this.editor,s=i.model,r=s.schema,o=i.editing.mapper,a=s.document.selection,l=e?a.getLastPosition().nodeBefore:a.getFirstPosition().nodeAfter,c=o.toViewElement(l);return Cd(c,l,r)?(s.change(u=>{u.setSelection(l,"on"),u.setSelectionAttribute(Gl,e?"after":"before")}),!0):!1}_enableInsertingParagraphsOnButtonClick(){const e=this.editor,i=e.editing.view;this._listenToIfEnabled(i.document,"mousedown",(s,r)=>{const o=c4e(r.domTarget);if(!o)return;const a=u4e(o),l=d4e(o,i.domConverter),c=e.editing.mapper.toModelElement(l);this._insertParagraph(c,a),r.preventDefault(),s.stop()})}_enableInsertingParagraphsOnEnterKeypress(){const e=this.editor,i=e.model.document.selection,s=e.editing.view;this._listenToIfEnabled(s.document,"enter",(r,o)=>{if(r.eventPhase!="atTarget")return;const a=i.getSelectedElement(),l=e.editing.mapper.toViewElement(a),c=e.model.schema;let u;this._insertParagraphAccordingToFakeCaretPosition()?u=!0:Cd(l,a,c)&&(this._insertParagraph(a,o.isSoft?"before":"after"),u=!0),u&&(o.preventDefault(),r.stop())},{context:ps})}_enableInsertingParagraphsOnTypingKeystroke(){const i=this.editor.editing.view.document;this._listenToIfEnabled(i,"insertText",(s,r)=>{this._insertParagraphAccordingToFakeCaretPosition()&&(r.selection=i.selection)},{priority:"high"}),sn.isAndroid?this._listenToIfEnabled(i,"keydown",(s,r)=>{r.keyCode==229&&this._insertParagraphAccordingToFakeCaretPosition()}):this._listenToIfEnabled(i,"compositionstart",()=>{this._insertParagraphAccordingToFakeCaretPosition()},{priority:"high"})}_enableDeleteIntegration(){const e=this.editor,i=e.editing.view,s=e.model,r=s.schema;this._listenToIfEnabled(i.document,"delete",(o,a)=>{if(o.eventPhase!="atTarget")return;const l=fu(s.document.selection);if(!l)return;const c=a.direction,u=s.document.selection.getSelectedElement(),d=l==="before",f=c=="forward";if(d===f)e.execute("delete",{selection:s.createSelection(u,"on")});else{const m=r.getNearestSelectionRange(s.createPositionAt(u,l),c);if(m)if(!m.isCollapsed)s.change(v=>{v.setSelection(m),e.execute(f?"deleteForward":"delete")});else{const v=s.createSelection(m.start);if(s.modifySelection(v,{direction:c}),!v.focus.isEqual(m.start))s.change(y=>{y.setSelection(m),e.execute(f?"deleteForward":"delete")});else{const y=b4e(r,m.start.parent);s.deleteContent(s.createSelection(y,"on"),{doNotAutoparagraph:!0})}}}a.preventDefault(),o.stop()},{context:ps})}_enableInsertContentIntegration(){const e=this.editor,i=this.editor.model,s=i.document.selection;this._listenToIfEnabled(e.model,"insertContent",(r,[o,a])=>{if(a&&!a.is("documentSelection"))return;const l=fu(s);if(l)return r.stop(),i.change(c=>{const u=s.getSelectedElement(),d=i.createPositionAt(u,l),f=c.createSelection(d),p=i.insertContent(o,f);return c.setSelection(f),p})},{priority:"high"})}_enableInsertObjectIntegration(){const e=this.editor,s=this.editor.model.document.selection;this._listenToIfEnabled(e.model,"insertObject",(r,o)=>{const[,a,l={}]=o;if(a&&!a.is("documentSelection"))return;const c=fu(s);c&&(l.findOptimalPosition=c,o[3]=l)},{priority:"high"})}_enableDeleteContentIntegration(){const e=this.editor,s=this.editor.model.document.selection;this._listenToIfEnabled(e.model,"deleteContent",(r,[o])=>{if(o&&!o.is("documentSelection"))return;fu(s)&&r.stop()},{priority:"high"})}}function p4e(t,n,e){const i=t.createUIElement("div",{class:"ck ck-reset_all ck-widget__type-around"},function(s){const r=this.toDomElement(s);return g4e(r,n),v4e(r),r});t.insert(t.createPositionAt(e,"end"),i)}function g4e(t,n){for(const e of i$){const i=new Ba({tag:"div",attributes:{class:["ck","ck-widget__type-around__button",`ck-widget__type-around__button_${e}`],title:n[e],"aria-hidden":"true"},children:[t.ownerDocument.importNode(f4e,!0)]});t.appendChild(i.render())}}function v4e(t){const n=new Ba({tag:"div",attributes:{class:["ck","ck-widget__type-around__fake-caret"]}});t.appendChild(n.render())}function b4e(t,n){let e=n;for(const i of n.getAncestors({parentFirst:!0})){if(i.childCount>1||t.isLimit(i))break;e=i}return e}function _4e(t){const n=t.model;return(e,i)=>{const s=i.keyCode==Cn.arrowup,r=i.keyCode==Cn.arrowdown,o=i.shiftKey,a=n.document.selection;if(!s&&!r)return;const l=r;if(o&&C4e(a,l))return;const c=w4e(t,a,l);if(c){if(c.isCollapsed){if(a.isCollapsed)return;if(o)return}(c.isCollapsed||y4e(t,c,l))&&(n.change(u=>{const d=l?c.end:c.start;if(o){const f=n.createSelection(a.anchor);f.setFocus(d),u.setSelection(f)}else u.setSelection(d)}),e.stop(),i.preventDefault(),i.stopPropagation())}}}function w4e(t,n,e){const i=t.model;if(e){const s=n.isCollapsed?n.focus:n.getLastPosition(),r=B7(i,s,"forward");if(!r)return null;const o=i.createRange(s,r),a=F7(i.schema,o,"backward");return a?i.createRange(s,a):null}else{const s=n.isCollapsed?n.focus:n.getFirstPosition(),r=B7(i,s,"backward");if(!r)return null;const o=i.createRange(r,s),a=F7(i.schema,o,"forward");return a?i.createRange(a,s):null}}function B7(t,n,e){const i=t.schema,s=t.createRangeIn(n.root),r=e=="forward"?"elementStart":"elementEnd";for(const{previousPosition:o,item:a,type:l}of s.getWalker({startPosition:n,direction:e})){if(i.isLimit(a)&&!i.isInline(a))return o;if(l==r&&i.isBlock(a))return null}return null}function F7(t,n,e){const i=e=="backward"?n.end:n.start;if(t.checkChild(i,"$text"))return i;for(const{nextPosition:s}of n.getWalker({direction:e}))if(t.checkChild(s,"$text"))return s;return null}function y4e(t,n,e){const i=t.model,s=t.view.domConverter;if(e){const c=i.createSelection(n.start);i.modifySelection(c),!c.focus.isAtEnd&&!n.start.isEqual(c.focus)&&(n=i.createRange(c.focus,n.end))}const r=t.mapper.toViewRange(n),o=s.viewRangeToDom(r),a=mn.getDomRangeRects(o);let l;for(const c of a){if(l===void 0){l=Math.round(c.bottom);continue}if(Math.round(c.top)>=l)return!1;l=Math.max(l,Math.round(c.bottom))}return!0}function C4e(t,n){return!t.isCollapsed&&t.isBackward==n}class Fm extends Be{constructor(){super(...arguments);w(this,"_previouslySelected",new Set)}static get pluginName(){return"Widget"}static get requires(){return[m4e,Mh]}init(){const e=this.editor,i=e.editing.view,s=i.document,r=e.t;this.editor.editing.downcastDispatcher.on("selection",(o,a,l)=>{const c=l.writer,u=a.selection;if(u.isCollapsed)return;const d=u.getSelectedElement();if(!d)return;const f=e.editing.mapper.toViewElement(d);ps(f)&&l.consumable.consume(u,"selection")&&c.setSelection(c.createRangeOn(f),{fake:!0,label:r4e(f)})}),this.editor.editing.downcastDispatcher.on("selection",(o,a,l)=>{this._clearPreviouslySelectedWidgets(l.writer);const c=l.writer,u=c.document.selection;let d=null;for(const f of u.getRanges())for(const p of f){const m=p.item;ps(m)&&!E4e(m,d)&&(c.addClass(O7,m),this._previouslySelected.add(m),d=m)}},{priority:"low"}),i.addObserver(Gw),this.listenTo(s,"mousedown",(...o)=>this._onMousedown(...o)),this.listenTo(s,"arrowKey",(...o)=>{this._handleSelectionChangeOnArrowKeyPress(...o)},{context:[ps,"$text"]}),this.listenTo(s,"arrowKey",(...o)=>{this._preventDefaultOnArrowKeyPress(...o)},{context:"$root"}),this.listenTo(s,"arrowKey",_4e(this.editor.editing),{context:"$text"}),this.listenTo(s,"delete",(o,a)=>{this._handleDelete(a.direction=="forward")&&(a.preventDefault(),o.stop())},{context:"$root"}),this.listenTo(s,"tab",(o,a)=>{o.eventPhase=="atTarget"&&(a.shiftKey||this._selectFirstNestedEditable()&&(a.preventDefault(),o.stop()))},{context:ps,priority:"low"}),this.listenTo(s,"tab",(o,a)=>{a.shiftKey&&this._selectAncestorWidget()&&(a.preventDefault(),o.stop())},{priority:"low"}),this.listenTo(s,"keydown",(o,a)=>{a.keystroke==Cn.esc&&this._selectAncestorWidget()&&(a.preventDefault(),o.stop())},{priority:"low"}),e.accessibility.addKeystrokeInfoGroup({id:"widget",label:r("Keystrokes that can be used when a widget is selected (for example: image, table, etc.)"),keystrokes:[{label:r("Move focus from an editable area back to the parent widget"),keystroke:"Esc"},{label:r("Insert a new paragraph directly after a widget"),keystroke:"Enter"},{label:r("Insert a new paragraph directly before a widget"),keystroke:"Shift+Enter"},{label:r("Move the caret to allow typing directly before a widget"),keystroke:[["arrowup"],["arrowleft"]]},{label:r("Move the caret to allow typing directly after a widget"),keystroke:[["arrowdown"],["arrowright"]]}]})}_onMousedown(e,i){const s=this.editor,r=s.editing.view,o=r.document;let a=i.target;if(i.domEvent.detail>=3){this._selectBlockContent(a)&&i.preventDefault();return}if(k4e(a)||!ps(a)&&(a=a.findAncestor(ps),!a))return;sn.isAndroid&&i.preventDefault(),o.isFocused||r.focus();const l=s.editing.mapper.toModelElement(a);this._setSelectionOverElement(l)}_selectBlockContent(e){const i=this.editor,s=i.model,r=i.editing.mapper,o=s.schema,a=r.findMappedViewAncestor(this.editor.editing.view.createPositionAt(e,0)),l=S4e(r.toModelElement(a),s.schema);return l?(s.change(c=>{const u=o.isLimit(l)?null:T4e(c.createPositionAfter(l),o),d=c.createPositionAt(l,0),f=u?c.createPositionAt(u,0):c.createPositionAt(l,"end");c.setSelection(c.createRange(d,f))}),!0):!1}_handleSelectionChangeOnArrowKeyPress(e,i){const s=i.keyCode,r=this.editor.model,o=r.schema,a=r.document.selection,l=a.getSelectedElement(),c=Uw(s,this.editor.locale.contentLanguageDirection),u=c=="down"||c=="right",d=c=="up"||c=="down";if(l&&o.isObject(l)){const p=u?a.getLastPosition():a.getFirstPosition(),m=o.getNearestSelectionRange(p,u?"forward":"backward");m&&(r.change(v=>{v.setSelection(m)}),i.preventDefault(),e.stop());return}if(!a.isCollapsed&&!i.shiftKey){const p=a.getFirstPosition(),m=a.getLastPosition(),v=p.nodeAfter,y=m.nodeBefore;(v&&o.isObject(v)||y&&o.isObject(y))&&(r.change(_=>{_.setSelection(u?m:p)}),i.preventDefault(),e.stop());return}if(!a.isCollapsed)return;const f=this._getObjectElementNextToSelection(u);if(f&&o.isObject(f)){if(o.isInline(f)&&d)return;this._setSelectionOverElement(f),i.preventDefault(),e.stop()}}_preventDefaultOnArrowKeyPress(e,i){const s=this.editor.model,r=s.schema,o=s.document.selection.getSelectedElement();o&&r.isObject(o)&&(i.preventDefault(),e.stop())}_handleDelete(e){const s=this.editor.model.document.selection;if(!this.editor.model.canEditAt(s)||!s.isCollapsed)return;const r=this._getObjectElementNextToSelection(e);if(r)return this.editor.model.change(o=>{let a=s.anchor.parent;for(;a.isEmpty;){const l=a;a=l.parent,o.remove(l)}this._setSelectionOverElement(r)}),!0}_setSelectionOverElement(e){this.editor.model.change(i=>{i.setSelection(i.createRangeOn(e))})}_getObjectElementNextToSelection(e){const i=this.editor.model,s=i.schema,r=i.document.selection,o=i.createSelection(r);if(i.modifySelection(o,{direction:e?"forward":"backward"}),o.isEqual(r))return null;const a=e?o.focus.nodeBefore:o.focus.nodeAfter;return a&&s.isObject(a)?a:null}_clearPreviouslySelectedWidgets(e){for(const i of this._previouslySelected)e.removeClass(O7,i);this._previouslySelected.clear()}_selectFirstNestedEditable(){const e=this.editor,s=this.editor.editing.view.document;for(const r of s.selection.getFirstRange().getItems())if(r.is("editableElement")){const o=e.editing.mapper.toModelElement(r);/* istanbul ignore next -- @preserve */if(!o)continue;const a=e.model.createPositionAt(o,0),l=e.model.schema.getNearestSelectionRange(a,"forward");return e.model.change(c=>{c.setSelection(l)}),!0}return!1}_selectAncestorWidget(){const e=this.editor,i=e.editing.mapper,r=e.editing.view.document.selection.getFirstPosition().parent,a=(r.is("$text")?r.parent:r).findAncestor(ps);if(!a)return!1;const l=i.toModelElement(a);/* istanbul ignore next -- @preserve */return l?(e.model.change(c=>{c.setSelection(l,"on")}),!0):!1}}function k4e(t){let n=t;for(;n;){if(n.is("editableElement")&&!n.is("rootElement"))return!0;if(ps(n))return!1;n=n.parent}return!1}function E4e(t,n){return n?Array.from(t.getAncestors()).includes(n):!1}function S4e(t,n){for(const e of t.getAncestors({includeSelf:!0,parentFirst:!0})){if(n.checkChild(e,"$text"))return e;if(n.isLimit(e)&&!n.isObject(e))break}return null}function T4e(t,n){const e=new rc({startPosition:t});for(const{item:i}of e){if(n.isLimit(i)||!i.is("element"))return null;if(n.checkChild(i,"$text"))return i}return null}class R_ extends Be{constructor(){super(...arguments);w(this,"_toolbarDefinitions",new Map);w(this,"_balloon")}static get requires(){return[Mo]}static get pluginName(){return"WidgetToolbarRepository"}init(){const e=this.editor;if(e.plugins.has("BalloonToolbar")){const i=e.plugins.get("BalloonToolbar");this.listenTo(i,"show",s=>{x4e(e.editing.view.document.selection)&&s.stop()},{priority:"high"})}this._balloon=this.editor.plugins.get("ContextualBalloon"),this.on("change:isEnabled",()=>{this._updateToolbarsVisibility()}),this.listenTo(e.ui,"update",()=>{this._updateToolbarsVisibility()}),this.listenTo(e.ui.focusTracker,"change:isFocused",()=>{this._updateToolbarsVisibility()},{priority:"low"})}destroy(){super.destroy();for(const e of this._toolbarDefinitions.values())e.view.destroy()}register(e,{ariaLabel:i,items:s,getRelatedElement:r,balloonClassName:o="ck-toolbar-container"}){if(!s.length){qn("widget-toolbar-no-items",{toolbarId:e});return}const a=this.editor,l=a.t,c=new _h(a.locale);if(c.ariaLabel=i||l("Widget toolbar"),this._toolbarDefinitions.has(e))throw new fe("widget-toolbar-duplicated",this,{toolbarId:e});const u={view:c,getRelatedElement:r,balloonClassName:o,itemsConfig:s,initialized:!1};a.ui.addToolbar(c,{isContextual:!0,beforeFocus:()=>{const d=r(a.editing.view.document.selection);d&&this._showToolbar(u,d)},afterBlur:()=>{this._hideToolbar(u)}}),this._toolbarDefinitions.set(e,u)}_updateToolbarsVisibility(){let e=0,i=null,s=null;for(const r of this._toolbarDefinitions.values()){const o=r.getRelatedElement(this.editor.editing.view.document.selection);if(!this.isEnabled||!o)this._isToolbarInBalloon(r)&&this._hideToolbar(r);else if(!this.editor.ui.focusTracker.isFocused)this._isToolbarVisible(r)&&this._hideToolbar(r);else{const a=o.getAncestors().length;a>e&&(e=a,i=o,s=r)}}s&&this._showToolbar(s,i)}_hideToolbar(e){this._balloon.remove(e.view),this.stopListening(this._balloon,"change:visibleView")}_showToolbar(e,i){this._isToolbarVisible(e)?N7(this.editor,i):this._isToolbarInBalloon(e)||(e.initialized||(e.initialized=!0,e.view.fillFromConfig(e.itemsConfig,this.editor.ui.componentFactory)),this._balloon.add({view:e.view,position:s$(this.editor,i),balloonClassName:e.balloonClassName}),this.listenTo(this._balloon,"change:visibleView",()=>{for(const s of this._toolbarDefinitions.values())if(this._isToolbarVisible(s)){const r=s.getRelatedElement(this.editor.editing.view.document.selection);N7(this.editor,r)}}))}_isToolbarVisible(e){return this._balloon.visibleView===e.view}_isToolbarInBalloon(e){return this._balloon.hasView(e.view)}}function N7(t,n){const e=t.plugins.get("ContextualBalloon"),i=s$(t,n);e.updatePosition(i)}function s$(t,n){const e=t.editing.view,i=Vs.defaultPositions;return{target:e.domConverter.mapViewToDom(n),positions:[i.northArrowSouth,i.northArrowSouthWest,i.northArrowSouthEast,i.southArrowNorth,i.southArrowNorthWest,i.southArrowNorthEast,i.viewportStickyNorth]}}function x4e(t){const n=t.getSelectedElement();return!!(n&&ps(n))}class A4e extends li(){constructor(e){super();w(this,"_referenceCoordinates");w(this,"_options");w(this,"_originalWidth");w(this,"_originalHeight");w(this,"_originalWidthPercents");w(this,"_aspectRatio");this.set("activeHandlePosition",null),this.set("proposedWidthPercents",null),this.set("proposedWidth",null),this.set("proposedHeight",null),this.set("proposedHandleHostWidth",null),this.set("proposedHandleHostHeight",null),this._options=e,this._referenceCoordinates=null}get originalWidth(){return this._originalWidth}get originalHeight(){return this._originalHeight}get originalWidthPercents(){return this._originalWidthPercents}get aspectRatio(){return this._aspectRatio}begin(e,i,s){const r=new mn(i);this.activeHandlePosition=M4e(e),this._referenceCoordinates=I4e(i,P4e(this.activeHandlePosition)),this._originalWidth=r.width,this._originalHeight=r.height,this._aspectRatio=r.width/r.height;const o=s.style.width;o&&o.match(/^\d+(\.\d*)?%$/)?this._originalWidthPercents=parseFloat(o):this._originalWidthPercents=l4e(s,r)}update(e){this.proposedWidth=e.width,this.proposedHeight=e.height,this.proposedWidthPercents=e.widthPercents,this.proposedHandleHostWidth=e.handleHostWidth,this.proposedHandleHostHeight=e.handleHostHeight}}function I4e(t,n){const e=new mn(t),i=n.split("-"),s={x:i[1]=="right"?e.right:e.left,y:i[0]=="bottom"?e.bottom:e.top};return s.x+=t.ownerDocument.defaultView.scrollX,s.y+=t.ownerDocument.defaultView.scrollY,s}function R4e(t){return`ck-widget__resizer__handle-${t}`}function M4e(t){const n=["top-left","top-right","bottom-right","bottom-left"];for(const e of n)if(t.classList.contains(R4e(e)))return e}function P4e(t){const n=t.split("-"),e={top:"bottom",bottom:"top",left:"right",right:"left"};return`${e[n[0]]}-${e[n[1]]}`}class O4e extends Rt{constructor(){super();const n=this.bindTemplate;this.setTemplate({tag:"div",attributes:{class:["ck","ck-size-view",n.to("_viewPosition",e=>e?`ck-orientation-${e}`:"")],style:{display:n.if("_isVisible","none",e=>!e)}},children:[{text:n.to("_label")}]})}_bindToState(n,e){this.bind("_isVisible").to(e,"proposedWidth",e,"proposedHeight",(i,s)=>i!==null&&s!==null),this.bind("_label").to(e,"proposedHandleHostWidth",e,"proposedHandleHostHeight",e,"proposedWidthPercents",(i,s,r)=>n.unit==="px"?`${i}×${s}`:`${r}%`),this.bind("_viewPosition").to(e,"activeHandlePosition",e,"proposedHandleHostWidth",e,"proposedHandleHostHeight",(i,s,r)=>s<50||r<50?"above-center":i)}_dismiss(){this.unbind(),this._isVisible=!1}}class V7 extends li(){constructor(e){super();w(this,"_state");w(this,"_sizeView");w(this,"_options");w(this,"_viewResizerWrapper",null);w(this,"_initialViewWidth");this._options=e,this.set("isEnabled",!0),this.set("isSelected",!1),this.bind("isVisible").to(this,"isEnabled",this,"isSelected",(i,s)=>i&&s),this.decorate("begin"),this.decorate("cancel"),this.decorate("commit"),this.decorate("updateSize"),this.on("commit",i=>{!this.state.proposedWidth&&!this.state.proposedWidthPercents&&(this._cleanup(),i.stop())},{priority:"high"})}get state(){return this._state}show(){this._options.editor.editing.view.change(i=>{i.removeClass("ck-hidden",this._viewResizerWrapper)})}hide(){this._options.editor.editing.view.change(i=>{i.addClass("ck-hidden",this._viewResizerWrapper)})}attach(){const e=this,i=this._options.viewElement;this._options.editor.editing.view.change(r=>{const o=r.createUIElement("div",{class:"ck ck-reset_all ck-widget__resizer"},function(a){const l=this.toDomElement(a);return e._appendHandles(l),e._appendSizeUI(l),l});r.insert(r.createPositionAt(i,"end"),o),r.addClass("ck-widget_with-resizer",i),this._viewResizerWrapper=o,this.isVisible||this.hide()}),this.on("change:isVisible",()=>{this.isVisible?(this.show(),this.redraw()):this.hide()})}begin(e){this._state=new A4e(this._options),this._sizeView._bindToState(this._options,this.state),this._initialViewWidth=this._options.viewElement.getStyle("width"),this.state.begin(e,this._getHandleHost(),this._getResizeHost())}updateSize(e){const i=this._proposeNewSize(e);this._options.editor.editing.view.change(u=>{const d=this._options.unit||"%",f=(d==="%"?i.widthPercents:i.width)+d;u.setStyle("width",f,this._options.viewElement)});const r=this._getHandleHost(),o=new mn(r),a=Math.round(o.width),l=Math.round(o.height),c=new mn(r);i.width=Math.round(c.width),i.height=Math.round(c.height),this.redraw(o),this.state.update({...i,handleHostWidth:a,handleHostHeight:l})}commit(){const e=this._options.unit||"%",i=(e==="%"?this.state.proposedWidthPercents:this.state.proposedWidth)+e;this._options.editor.editing.view.change(()=>{this._cleanup(),this._options.onCommit(i)})}cancel(){this._cleanup()}destroy(){this.cancel()}redraw(e){const i=this._domResizerWrapper;if(!F4e(i))return;const s=i.parentElement,r=this._getHandleHost(),o=this._viewResizerWrapper,a=[o.getStyle("width"),o.getStyle("height"),o.getStyle("left"),o.getStyle("top")];let l;if(s.isSameNode(r)){const c=e||new mn(r);l=[c.width+"px",c.height+"px",void 0,void 0]}else l=[r.offsetWidth+"px",r.offsetHeight+"px",r.offsetLeft+"px",r.offsetTop+"px"];sr(a,l)!=="same"&&this._options.editor.editing.view.change(c=>{c.setStyle({width:l[0],height:l[1],left:l[2],top:l[3]},o)})}containsHandle(e){return this._domResizerWrapper.contains(e)}static isResizeHandle(e){return e.classList.contains("ck-widget__resizer__handle")}_cleanup(){this._sizeView._dismiss(),this._options.editor.editing.view.change(i=>{i.setStyle("width",this._initialViewWidth,this._options.viewElement)})}_proposeNewSize(e){const i=this.state,s=B4e(e),r=this._options.isCentered?this._options.isCentered(this):!0,o={x:i._referenceCoordinates.x-(s.x+i.originalWidth),y:s.y-i.originalHeight-i._referenceCoordinates.y};r&&i.activeHandlePosition.endsWith("-right")&&(o.x=s.x-(i._referenceCoordinates.x+i.originalWidth)),r&&(o.x*=2);let a=Math.abs(i.originalWidth+o.x),l=Math.abs(i.originalHeight+o.y);return(a/i.aspectRatio>l?"width":"height")=="width"?l=a/i.aspectRatio:a=l*i.aspectRatio,{width:Math.round(a),height:Math.round(l),widthPercents:Math.min(Math.round(i.originalWidthPercents/i.originalWidth*a*100)/100,100)}}_getResizeHost(){const e=this._domResizerWrapper.parentElement;return this._options.getResizeHost(e)}_getHandleHost(){const e=this._domResizerWrapper.parentElement;return this._options.getHandleHost(e)}get _domResizerWrapper(){return this._options.editor.editing.view.domConverter.mapViewToDom(this._viewResizerWrapper)}_appendHandles(e){const i=["top-left","top-right","bottom-right","bottom-left"];for(const s of i)e.appendChild(new Ba({tag:"div",attributes:{class:`ck-widget__resizer__handle ${L4e(s)}`}}).render())}_appendSizeUI(e){this._sizeView=new O4e,this._sizeView.render(),e.appendChild(this._sizeView.element)}}function L4e(t){return`ck-widget__resizer__handle-${t}`}function B4e(t){return{x:t.pageX,y:t.pageY}}function F4e(t){return t&&t.ownerDocument&&t.ownerDocument.contains(t)}class Y5 extends Be{constructor(){super(...arguments);w(this,"_resizers",new Map);w(this,"_observer");w(this,"_redrawSelectedResizerThrottled")}static get pluginName(){return"WidgetResize"}init(){const e=this.editor.editing,i=$t.window.document;this.set("selectedResizer",null),this.set("_activeResizer",null),e.view.addObserver(Gw),this._observer=new(Rr()),this.listenTo(e.view.document,"mousedown",this._mouseDownListener.bind(this),{priority:"high"}),this._observer.listenTo(i,"mousemove",this._mouseMoveListener.bind(this)),this._observer.listenTo(i,"mouseup",this._mouseUpListener.bind(this)),this._redrawSelectedResizerThrottled=Jf(()=>this.redrawSelectedResizer(),200),this.editor.ui.on("update",this._redrawSelectedResizerThrottled),this.editor.model.document.on("change",()=>{for(const[r,o]of this._resizers)r.isAttached()||(this._resizers.delete(r),o.destroy())},{priority:"lowest"}),this._observer.listenTo($t.window,"resize",this._redrawSelectedResizerThrottled);const s=this.editor.editing.view.document.selection;s.on("change",()=>{const r=s.getSelectedElement(),o=this.getResizerByViewElement(r)||null;o?this.select(o):this.deselect()})}redrawSelectedResizer(){this.selectedResizer&&this.selectedResizer.isVisible&&this.selectedResizer.redraw()}destroy(){super.destroy(),this._observer.stopListening();for(const e of this._resizers.values())e.destroy();this._redrawSelectedResizerThrottled.cancel()}select(e){this.deselect(),this.selectedResizer=e,this.selectedResizer.isSelected=!0}deselect(){this.selectedResizer&&(this.selectedResizer.isSelected=!1),this.selectedResizer=null}attachTo(e){const i=new V7(e),s=this.editor.plugins;if(i.attach(),s.has("WidgetToolbarRepository")){const a=s.get("WidgetToolbarRepository");i.on("begin",()=>{a.forceDisabled("resize")},{priority:"lowest"}),i.on("cancel",()=>{a.clearForceDisabled("resize")},{priority:"highest"}),i.on("commit",()=>{a.clearForceDisabled("resize")},{priority:"highest"})}this._resizers.set(e.viewElement,i);const o=this.editor.editing.view.document.selection.getSelectedElement();return this.getResizerByViewElement(o)==i&&this.select(i),i}getResizerByViewElement(e){return this._resizers.get(e)}_getResizerByHandle(e){for(const i of this._resizers.values())if(i.containsHandle(e))return i}_mouseDownListener(e,i){const s=i.domTarget;V7.isResizeHandle(s)&&(this._activeResizer=this._getResizerByHandle(s)||null,this._activeResizer&&(this._activeResizer.begin(s),e.stop(),i.preventDefault()))}_mouseMoveListener(e,i){this._activeResizer&&this._activeResizer.updateSize(i)}_mouseUpListener(){this._activeResizer&&(this._activeResizer.commit(),this._activeResizer=null)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class f1 extends Oc{constructor(e){super(e);w(this,"domEventType",["paste","copy","cut","drop","dragover","dragstart","dragend","dragenter","dragleave"]);const i=this.document;this.listenTo(i,"paste",s("clipboardInput"),{priority:"low"}),this.listenTo(i,"drop",s("clipboardInput"),{priority:"low"}),this.listenTo(i,"dragover",s("dragging"),{priority:"low"});function s(r){return(o,a)=>{a.preventDefault();const l=a.dropRange?[a.dropRange]:null,c=new vc(i,r);i.fire(c,{dataTransfer:a.dataTransfer,method:o.name,targetRanges:l,target:a.target,domEvent:a.domEvent}),c.stop.called&&a.stopPropagation()}}}onDomEvent(e){const i="clipboardData"in e?e.clipboardData:e.dataTransfer,s=e.type=="drop"||e.type=="paste",r={dataTransfer:new SV(i,{cacheFiles:s})};(e.type=="drop"||e.type=="dragover")&&(r.dropRange=N4e(this.view,e)),this.fire(e.type,e,r)}}function N4e(t,n){const e=n.target.ownerDocument,i=n.clientX,s=n.clientY;let r;return e.caretRangeFromPoint&&e.caretRangeFromPoint(i,s)?r=e.caretRangeFromPoint(i,s):n.rangeParent&&(r=e.createRange(),r.setStart(n.rangeParent,n.rangeOffset),r.collapse(!0)),r?t.domConverter.domRangeToView(r):null}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function V4e(t){return t=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r?\n\r?\n/g,"</p><p>").replace(/\r?\n/g,"<br>").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;").replace(/^\s/,"&nbsp;").replace(/\s$/,"&nbsp;").replace(/\s\s/g," &nbsp;"),(t.includes("</p><p>")||t.includes("<br>"))&&(t=`<p>${t}</p>`),t}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function D4e(t){return t.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,(n,e)=>e.length==1?" ":e).replace(/<!--[\s\S]*?-->/g,"")}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const D7=["figcaption","li"],$7=["ol","ul"];function r$(t){if(t.is("$text")||t.is("$textProxy"))return t.data;if(t.is("element","img")&&t.hasAttribute("alt"))return t.getAttribute("alt");if(t.is("element","br"))return`
`;let n="",e=null;for(const i of t.getChildren())n+=$4e(i,e)+r$(i),e=i;return n}function $4e(t,n){return n?t.is("element","li")&&!t.isEmpty&&t.getChild(0).is("containerElement")||$7.includes(t.name)&&$7.includes(n.name)?`

`:!t.is("containerElement")&&!n.is("containerElement")?"":D7.includes(t.name)||D7.includes(n.name)?`
`:t.is("element")&&t.getCustomProperty("dataPipeline:transparentRendering")||n.is("element")&&n.getCustomProperty("dataPipeline:transparentRendering")?"":`

`:""}class xg extends Be{constructor(){super(...arguments);w(this,"_markersToCopy",new Map)}static get pluginName(){return"ClipboardMarkersUtils"}_registerMarkerToCopy(e,i){this._markersToCopy.set(e,i)}_copySelectedFragmentWithMarkers(e,i,s=r=>r.model.getSelectedContent(r.model.document.selection)){return this.editor.model.change(r=>{const o=r.model.document.selection;r.setSelection(i);const a=this._insertFakeMarkersIntoSelection(r,r.model.document.selection,e),l=s(r),c=this._removeFakeMarkersInsideElement(r,l);for(const[u,d]of Object.entries(a)){c[u]||(c[u]=r.createRangeIn(l));for(const f of d)r.remove(f)}l.markers.clear();for(const[u,d]of Object.entries(c))l.markers.set(u,d);return r.setSelection(o),l})}_pasteMarkersIntoTransformedElement(e,i){const s=this._getPasteMarkersFromRangeMap(e);return this.editor.model.change(r=>{const o=this._insertFakeMarkersElements(r,s),a=i(r),l=this._removeFakeMarkersInsideElement(r,a);for(const c of Object.values(o).flat())r.remove(c);for(const[c,u]of Object.entries(l))r.model.markers.has(c)||r.addMarker(c,{usingOperation:!0,affectsData:!0,range:u});return a})}_pasteFragmentWithMarkers(e){const i=this._getPasteMarkersFromRangeMap(e.markers);e.markers.clear();for(const s of i)e.markers.set(s.name,s.range);return this.editor.model.insertContent(e)}_forceMarkersCopy(e,i,s={allowedActions:"all",copyPartiallySelected:!0,duplicateOnPaste:!0}){const r=this._markersToCopy.get(e);this._markersToCopy.set(e,s),i(),r?this._markersToCopy.set(e,r):this._markersToCopy.delete(e)}_isMarkerCopyable(e,i){const s=this._getMarkerClipboardConfig(e);if(!s)return!1;if(!i)return!0;const{allowedActions:r}=s;return r==="all"||r.includes(i)}_hasMarkerConfiguration(e){return!!this._getMarkerClipboardConfig(e)}_getMarkerClipboardConfig(e){const[i]=e.split(":");return this._markersToCopy.get(i)||null}_insertFakeMarkersIntoSelection(e,i,s){const r=this._getCopyableMarkersFromSelection(e,i,s);return this._insertFakeMarkersElements(e,r)}_getCopyableMarkersFromSelection(e,i,s){const r=Array.from(i.getRanges()),o=new Set(r.flatMap(l=>Array.from(e.model.markers.getMarkersIntersectingRange(l)))),a=l=>{if(!this._isMarkerCopyable(l.name,s))return!1;const{copyPartiallySelected:u}=this._getMarkerClipboardConfig(l.name);if(!u){const d=l.getRange();return r.some(f=>f.containsRange(d,!0))}return!0};return Array.from(o).filter(a).map(l=>({name:s==="dragstart"?this._getUniqueMarkerName(l.name):l.name,range:l.getRange()}))}_getPasteMarkersFromRangeMap(e,i=null){const{model:s}=this.editor;return(e instanceof Map?Array.from(e.entries()):Object.entries(e)).flatMap(([o,a])=>{if(!this._hasMarkerConfiguration(o))return[{name:o,range:a}];if(this._isMarkerCopyable(o,i)){const l=this._getMarkerClipboardConfig(o),c=s.markers.has(o)&&s.markers.get(o).getRange().root.rootName==="$graveyard";return(l.duplicateOnPaste||c)&&(o=this._getUniqueMarkerName(o)),[{name:o,range:a}]}return[]})}_insertFakeMarkersElements(e,i){const s={},r=i.flatMap(o=>{const{start:a,end:l}=o.range;return[{position:a,marker:o,type:"start"},{position:l,marker:o,type:"end"}]}).sort(({position:o},{position:a})=>o.isBefore(a)?1:-1);for(const{position:o,marker:a,type:l}of r){const c=e.createElement("$marker",{"data-name":a.name,"data-type":l});s[a.name]||(s[a.name]=[]),s[a.name].push(c),e.insert(c,o)}return s}_removeFakeMarkersInsideElement(e,i){const r=this._getAllFakeMarkersFromElement(e,i).reduce((o,a)=>{const l=a.markerElement&&e.createPositionBefore(a.markerElement);let c=o[a.name],u=!1;return c&&c.start&&c.end&&(this._getMarkerClipboardConfig(a.name).duplicateOnPaste?o[this._getUniqueMarkerName(a.name)]=o[a.name]:u=!0,c=null),u||(o[a.name]={...c,[a.type]:l}),a.markerElement&&e.remove(a.markerElement),o},{});return soe(r,o=>new qe(o.start||e.createPositionFromPath(i,[0]),o.end||e.createPositionAt(i,"end")))}_getAllFakeMarkersFromElement(e,i){const s=Array.from(e.createRangeIn(i)).flatMap(({item:a})=>{if(!a.is("element","$marker"))return[];const l=a.getAttribute("data-name"),c=a.getAttribute("data-type");return[{markerElement:a,name:l,type:c}]}),r=[],o=[];for(const a of s)a.type==="end"&&(s.some(c=>c.name===a.name&&c.type==="start")||r.push({markerElement:null,name:a.name,type:"start"})),a.type==="start"&&(s.some(c=>c.name===a.name&&c.type==="end")||o.unshift({markerElement:null,name:a.name,type:"end"}));return[...r,...s,...o]}_getUniqueMarkerName(e){const i=e.split(":"),s=to().substring(1,6);return i.length===3?`${i.slice(0,2).join(":")}:${s}`:`${i.join(":")}:${s}`}}class da extends Be{static get pluginName(){return"ClipboardPipeline"}static get requires(){return[xg]}init(){this.editor.editing.view.addObserver(f1),this._setupPasteDrop(),this._setupCopyCut()}_fireOutputTransformationEvent(n,e,i){const s=this.editor.plugins.get("ClipboardMarkersUtils");this.editor.model.enqueueChange({isUndoable:i==="cut"},()=>{const r=s._copySelectedFragmentWithMarkers(i,e);this.fire("outputTransformation",{dataTransfer:n,content:r,method:i})})}_setupPasteDrop(){const n=this.editor,e=n.model,i=n.editing.view,s=i.document,r=this.editor.plugins.get("ClipboardMarkersUtils");this.listenTo(s,"clipboardInput",(o,a)=>{a.method=="paste"&&!n.model.canEditAt(n.model.document.selection)&&o.stop()},{priority:"highest"}),this.listenTo(s,"clipboardInput",(o,a)=>{const l=a.dataTransfer;let c;if(a.content)c=a.content;else{let d="";l.getData("text/html")?d=D4e(l.getData("text/html")):l.getData("text/plain")&&(d=V4e(l.getData("text/plain"))),c=this.editor.data.htmlProcessor.toView(d)}const u=new vc(this,"inputTransformation");this.fire(u,{content:c,dataTransfer:l,targetRanges:a.targetRanges,method:a.method}),u.stop.called&&o.stop(),i.scrollToTheSelection()},{priority:"low"}),this.listenTo(this,"inputTransformation",(o,a)=>{if(a.content.isEmpty)return;const c=this.editor.data.toModel(a.content,"$clipboardHolder");c.childCount!=0&&(o.stop(),e.change(()=>{this.fire("contentInsertion",{content:c,method:a.method,dataTransfer:a.dataTransfer,targetRanges:a.targetRanges})}))},{priority:"low"}),this.listenTo(this,"contentInsertion",(o,a)=>{a.resultRange=r._pasteFragmentWithMarkers(a.content)},{priority:"low"})}_setupCopyCut(){const n=this.editor,e=n.model.document,s=n.editing.view.document,r=(o,a)=>{const l=a.dataTransfer;a.preventDefault(),this._fireOutputTransformationEvent(l,e.selection,o.name)};this.listenTo(s,"copy",r,{priority:"low"}),this.listenTo(s,"cut",(o,a)=>{n.model.canEditAt(n.model.document.selection)?r(o,a):a.preventDefault()},{priority:"low"}),this.listenTo(this,"outputTransformation",(o,a)=>{const l=n.data.toView(a.content);s.fire("clipboardOutput",{dataTransfer:a.dataTransfer,content:l,method:a.method})},{priority:"low"}),this.listenTo(s,"clipboardOutput",(o,a)=>{a.content.isEmpty||(a.dataTransfer.setData("text/html",this.editor.data.htmlProcessor.toData(a.content)),a.dataTransfer.setData("text/plain",r$(a.content))),a.method=="cut"&&n.model.deleteContent(e.selection)},{priority:"low"})}}const Z5=W1("px");class z4e extends Rt{constructor(){super();const n=this.bindTemplate;this.set({isVisible:!1,left:null,top:null,width:null}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-clipboard-drop-target-line",n.if("isVisible","ck-hidden",e=>!e)],style:{left:n.to("left",e=>Z5(e)),top:n.to("top",e=>Z5(e)),width:n.to("width",e=>Z5(e))}}})}}class Rv extends Be{constructor(){super(...arguments);w(this,"removeDropMarkerDelayed",ME(()=>this.removeDropMarker(),40));w(this,"_updateDropMarkerThrottled",Jf(e=>this._updateDropMarker(e),40));w(this,"_reconvertMarkerThrottled",Jf(()=>{this.editor.model.markers.has("drop-target")&&this.editor.editing.reconvertMarker("drop-target")},0));w(this,"_dropTargetLineView",new z4e);w(this,"_domEmitter",new(Rr()));w(this,"_scrollables",new Map)}static get pluginName(){return"DragDropTarget"}init(){this._setupDropMarker()}destroy(){this._domEmitter.stopListening();for(const{resizeObserver:e}of this._scrollables.values())e.destroy();return this._updateDropMarkerThrottled.cancel(),this.removeDropMarkerDelayed.cancel(),this._reconvertMarkerThrottled.cancel(),super.destroy()}updateDropMarker(e,i,s,r,o,a){this.removeDropMarkerDelayed.cancel();const l=z7(this.editor,e,i,s,r,o,a);/* istanbul ignore next -- @preserve */if(l){if(a&&a.containsRange(l))return this.removeDropMarker();this._updateDropMarkerThrottled(l)}}getFinalDropRange(e,i,s,r,o,a){const l=z7(this.editor,e,i,s,r,o,a);return this.removeDropMarker(),l}removeDropMarker(){const e=this.editor.model;this.removeDropMarkerDelayed.cancel(),this._updateDropMarkerThrottled.cancel(),this._dropTargetLineView.isVisible=!1,e.markers.has("drop-target")&&e.change(i=>{i.removeMarker("drop-target")})}_setupDropMarker(){const e=this.editor;e.ui.view.body.add(this._dropTargetLineView),e.conversion.for("editingDowncast").markerToHighlight({model:"drop-target",view:{classes:["ck-clipboard-drop-target-range"]}}),e.conversion.for("editingDowncast").markerToElement({model:"drop-target",view:(i,{writer:s})=>{if(e.model.schema.checkChild(i.markerRange.start,"$text"))return this._dropTargetLineView.isVisible=!1,this._createDropTargetPosition(s);i.markerRange.isCollapsed?this._updateDropTargetLine(i.markerRange):this._dropTargetLineView.isVisible=!1}})}_updateDropMarker(e){const i=this.editor,s=i.model.markers;i.model.change(r=>{s.has("drop-target")?s.get("drop-target").getRange().isEqual(e)||r.updateMarker("drop-target",{range:e}):r.addMarker("drop-target",{range:e,usingOperation:!1,affectsData:!1})})}_createDropTargetPosition(e){return e.createUIElement("span",{class:"ck ck-clipboard-drop-target-position"},function(i){const s=this.toDomElement(i);return s.append("⁠",i.createElement("span"),"⁠"),s})}_updateDropTargetLine(e){const i=this.editor.editing,s=e.start.nodeBefore,r=e.start.nodeAfter,o=e.start.parent,a=s?i.mapper.toViewElement(s):null,l=a?i.view.domConverter.mapViewToDom(a):null,c=r?i.mapper.toViewElement(r):null,u=c?i.view.domConverter.mapViewToDom(c):null,d=i.mapper.toViewElement(o);if(!d)return;const f=i.view.domConverter.mapViewToDom(d),p=this._getScrollableRect(d),{scrollX:m,scrollY:v}=$t.window,y=l?new mn(l):null,_=u?new mn(u):null,b=new mn(f).excludeScrollbarsAndBorders(),E=y?y.bottom:b.top,x=_?_.top:b.bottom,A=$t.window.getComputedStyle(f),I=E<=x?(E+x)/2:x;if(p.top<I&&I<p.bottom){const k=b.left+parseFloat(A.paddingLeft),O=b.right-parseFloat(A.paddingRight),M=Math.max(k+m,p.left),T=Math.min(O+m,p.right);this._dropTargetLineView.set({isVisible:!0,left:M,top:I+v,width:T-M})}else this._dropTargetLineView.isVisible=!1}_getScrollableRect(e){const i=e.root.rootName;let s;if(this._scrollables.has(i))s=this._scrollables.get(i).domElement;else{const r=this.editor.editing.view.domConverter.mapViewToDom(e);s=U4e(r),this._domEmitter.listenTo(s,"scroll",this._reconvertMarkerThrottled,{usePassive:!0});const o=new zw(s,this._reconvertMarkerThrottled);this._scrollables.set(i,{domElement:s,resizeObserver:o})}return new mn(s).excludeScrollbarsAndBorders()}}function z7(t,n,e,i,s,r,o){const a=t.model,l=t.editing.mapper;let u=H7(t,n);for(;u;){if(!r){if(a.schema.checkChild(u,"$text")){if(e){const d=e[0].start,f=l.toModelPosition(d);if(!o||Array.from(o.getItems()).every(m=>a.schema.checkChild(f,m))){if(a.schema.checkChild(f,"$text"))return a.createRange(f);if(d)return Mv(t,H7(t,d.parent),i,s)}}}else if(a.schema.isInline(u))return Mv(t,u,i,s)}if(a.schema.isBlock(u))return Mv(t,u,i,s);if(a.schema.checkChild(u,"$block")){const d=Array.from(u.getChildren()).filter(m=>m.is("element")&&!H4e(t,m));let f=0,p=d.length;if(p==0)return a.createRange(a.createPositionAt(u,"end"));for(;f<p-1;){const m=Math.floor((f+p)/2);o$(t,d[m],i,s)=="before"?p=m:f=m}return Mv(t,d[f],i,s)}u=u.parent}return null}function H4e(t,n){const e=t.editing.mapper,i=t.editing.view.domConverter,s=e.toViewElement(n);if(!s)return!0;const r=i.mapViewToDom(s);return $t.window.getComputedStyle(r).float!="none"}function Mv(t,n,e,i){const s=t.model;return s.createRange(s.createPositionAt(n,o$(t,n,e,i)))}function o$(t,n,e,i){const s=t.editing.mapper,r=t.editing.view.domConverter,o=s.toViewElement(n),a=r.mapViewToDom(o),l=new mn(a);return t.model.schema.isInline(n)?e<(l.left+l.right)/2?"before":"after":i<(l.top+l.bottom)/2?"before":"after"}function H7(t,n){const e=t.editing.mapper,i=t.editing.view,s=e.toModelElement(n);if(s)return s;const r=i.createPositionBefore(n),o=e.findMappedViewAncestor(r);return e.toModelElement(o)}function U4e(t){let n=t;do{n=n.parentElement;const e=$t.window.getComputedStyle(n).overflowY;if(e=="auto"||e=="scroll")break}while(n.tagName!="BODY");return n}class W4e extends Be{constructor(){super(...arguments);w(this,"_isBlockDragging",!1);w(this,"_domEmitter",new(Rr()))}static get pluginName(){return"DragDropBlockToolbar"}init(){const e=this.editor;if(this.listenTo(e,"change:isReadOnly",(i,s,r)=>{r?(this.forceDisabled("readOnlyMode"),this._isBlockDragging=!1):this.clearForceDisabled("readOnlyMode")}),sn.isAndroid&&this.forceDisabled("noAndroidSupport"),e.plugins.has("BlockToolbar")){const s=e.plugins.get("BlockToolbar").buttonView.element;this._domEmitter.listenTo(s,"dragstart",(r,o)=>this._handleBlockDragStart(o)),this._domEmitter.listenTo($t.document,"dragover",(r,o)=>this._handleBlockDragging(o)),this._domEmitter.listenTo($t.document,"drop",(r,o)=>this._handleBlockDragging(o)),this._domEmitter.listenTo($t.document,"dragend",()=>this._handleBlockDragEnd(),{useCapture:!0}),this.isEnabled&&s.setAttribute("draggable","true"),this.on("change:isEnabled",(r,o,a)=>{s.setAttribute("draggable",a?"true":"false")})}}destroy(){return this._domEmitter.stopListening(),super.destroy()}_handleBlockDragStart(e){if(!this.isEnabled)return;const i=this.editor.model,s=i.document.selection,r=this.editor.editing.view,o=Array.from(s.getSelectedBlocks()),a=i.createRange(i.createPositionBefore(o[0]),i.createPositionAfter(o[o.length-1]));i.change(l=>l.setSelection(a)),this._isBlockDragging=!0,r.focus(),r.getObserver(f1).onDomEvent(e)}_handleBlockDragging(e){if(!this.isEnabled||!this._isBlockDragging)return;const i=e.clientX+(this.editor.locale.contentLanguageDirection=="ltr"?100:-100),s=e.clientY,r=document.elementFromPoint(i,s),o=this.editor.editing.view;!r||!r.closest(".ck-editor__editable")||o.getObserver(f1).onDomEvent({...e,type:e.type,dataTransfer:e.dataTransfer,target:r,clientX:i,clientY:s,preventDefault:()=>e.preventDefault(),stopPropagation:()=>e.stopPropagation()})}_handleBlockDragEnd(){this._isBlockDragging=!1}}class j4e extends Be{constructor(){super(...arguments);w(this,"_draggedRange");w(this,"_draggingUid");w(this,"_draggableElement");w(this,"_clearDraggableAttributesDelayed",ME(()=>this._clearDraggableAttributes(),40));w(this,"_blockMode",!1);w(this,"_domEmitter",new(Rr()));w(this,"_previewContainer")}static get pluginName(){return"DragDrop"}static get requires(){return[da,Fm,Rv,W4e]}init(){const e=this.editor,i=e.editing.view;this._draggedRange=null,this._draggingUid="",this._draggableElement=null,i.addObserver(f1),i.addObserver(Gw),this._setupDragging(),this._setupContentInsertionIntegration(),this._setupClipboardInputIntegration(),this._setupDraggableAttributeHandling(),this.listenTo(e,"change:isReadOnly",(s,r,o)=>{o?this.forceDisabled("readOnlyMode"):this.clearForceDisabled("readOnlyMode")}),this.on("change:isEnabled",(s,r,o)=>{o||this._finalizeDragging(!1)}),sn.isAndroid&&this.forceDisabled("noAndroidSupport")}destroy(){return this._draggedRange&&(this._draggedRange.detach(),this._draggedRange=null),this._previewContainer&&this._previewContainer.remove(),this._domEmitter.stopListening(),this._clearDraggableAttributesDelayed.cancel(),super.destroy()}_setupDragging(){const e=this.editor,i=e.model,s=e.editing.view,r=s.document,o=e.plugins.get(Rv);this.listenTo(r,"dragstart",(a,l)=>{if(l.target&&l.target.is("editableElement")){l.preventDefault();return}if(this._prepareDraggedRange(l.target),!this._draggedRange){l.preventDefault();return}this._draggingUid=to(),l.dataTransfer.effectAllowed=this.isEnabled?"copyMove":"copy",l.dataTransfer.setData("application/ckeditor5-dragging-uid",this._draggingUid);const c=i.createSelection(this._draggedRange.toRange());this.editor.plugins.get("ClipboardPipeline")._fireOutputTransformationEvent(l.dataTransfer,c,"dragstart");const{dataTransfer:d,domTarget:f,domEvent:p}=l,{clientX:m}=p;this._updatePreview({dataTransfer:d,domTarget:f,clientX:m}),l.stopPropagation(),this.isEnabled||(this._draggedRange.detach(),this._draggedRange=null,this._draggingUid="")},{priority:"low"}),this.listenTo(r,"dragend",(a,l)=>{this._finalizeDragging(!l.dataTransfer.isCanceled&&l.dataTransfer.dropEffect=="move")},{priority:"low"}),this._domEmitter.listenTo($t.document,"dragend",()=>{this._blockMode=!1},{useCapture:!0}),this.listenTo(r,"dragenter",()=>{this.isEnabled&&s.focus()}),this.listenTo(r,"dragleave",()=>{o.removeDropMarkerDelayed()}),this.listenTo(r,"dragging",(a,l)=>{if(!this.isEnabled){l.dataTransfer.dropEffect="none";return}const{clientX:c,clientY:u}=l.domEvent;o.updateDropMarker(l.target,l.targetRanges,c,u,this._blockMode,this._draggedRange),this._draggedRange||(l.dataTransfer.dropEffect="copy"),sn.isGecko||(l.dataTransfer.effectAllowed=="copy"?l.dataTransfer.dropEffect="copy":["all","copyMove"].includes(l.dataTransfer.effectAllowed)&&(l.dataTransfer.dropEffect="move")),a.stop()},{priority:"low"})}_setupClipboardInputIntegration(){const e=this.editor,s=e.editing.view.document,r=e.plugins.get(Rv);this.listenTo(s,"clipboardInput",(o,a)=>{if(a.method!="drop")return;const{clientX:l,clientY:c}=a.domEvent,u=r.getFinalDropRange(a.target,a.targetRanges,l,c,this._blockMode,this._draggedRange);if(!u){this._finalizeDragging(!1),o.stop();return}if(this._draggedRange&&this._draggingUid!=a.dataTransfer.getData("application/ckeditor5-dragging-uid")&&(this._draggedRange.detach(),this._draggedRange=null,this._draggingUid=""),U7(a.dataTransfer)=="move"&&this._draggedRange&&this._draggedRange.containsRange(u,!0)){this._finalizeDragging(!1),o.stop();return}a.targetRanges=[e.editing.mapper.toViewRange(u)]},{priority:"high"})}_setupContentInsertionIntegration(){const e=this.editor.plugins.get(da);e.on("contentInsertion",(i,s)=>{if(!this.isEnabled||s.method!=="drop")return;const r=s.targetRanges.map(o=>this.editor.editing.mapper.toModelRange(o));this.editor.model.change(o=>o.setSelection(r))},{priority:"high"}),e.on("contentInsertion",(i,s)=>{if(!this.isEnabled||s.method!=="drop")return;const r=U7(s.dataTransfer)=="move",o=!s.resultRange||!s.resultRange.isCollapsed;this._finalizeDragging(o&&r)},{priority:"lowest"})}_setupDraggableAttributeHandling(){const e=this.editor,i=e.editing.view,s=i.document;this.listenTo(s,"mousedown",(r,o)=>{if(sn.isAndroid||!o)return;this._clearDraggableAttributesDelayed.cancel();let a=W7(o.target);if(sn.isBlink&&!e.isReadOnly&&!a&&!s.selection.isCollapsed){const l=s.selection.getSelectedElement();(!l||!ps(l))&&(a=s.selection.editableElement)}a&&(i.change(l=>{l.setAttribute("draggable","true",a)}),this._draggableElement=e.editing.mapper.toModelElement(a))}),this.listenTo(s,"mouseup",()=>{sn.isAndroid||this._clearDraggableAttributesDelayed()})}_clearDraggableAttributes(){const e=this.editor.editing;e.view.change(i=>{this._draggableElement&&this._draggableElement.root.rootName!="$graveyard"&&i.removeAttribute("draggable",e.mapper.toViewElement(this._draggableElement)),this._draggableElement=null})}_finalizeDragging(e){const i=this.editor,s=i.model;i.plugins.get(Rv).removeDropMarker(),this._clearDraggableAttributes(),i.plugins.has("WidgetToolbarRepository")&&i.plugins.get("WidgetToolbarRepository").clearForceDisabled("dragDrop"),this._draggingUid="",this._previewContainer&&(this._previewContainer.remove(),this._previewContainer=void 0),this._draggedRange&&(e&&this.isEnabled&&s.change(o=>{const a=s.createSelection(this._draggedRange);s.deleteContent(a,{doNotAutoparagraph:!0});const l=a.getFirstPosition().parent;l.isEmpty&&!s.schema.checkChild(l,"$text")&&s.schema.checkChild(l,"paragraph")&&o.insertElement("paragraph",l,0)}),this._draggedRange.detach(),this._draggedRange=null)}_prepareDraggedRange(e){const i=this.editor,s=i.model,r=s.document.selection,o=e?W7(e):null;if(o){const u=i.editing.mapper.toModelElement(o);this._draggedRange=Kr.fromRange(s.createRangeOn(u)),this._blockMode=s.schema.isBlock(u),i.plugins.has("WidgetToolbarRepository")&&i.plugins.get("WidgetToolbarRepository").forceDisabled("dragDrop");return}if(r.isCollapsed&&!r.getFirstPosition().parent.isEmpty)return;const a=Array.from(r.getSelectedBlocks()),l=r.getFirstRange();if(a.length==0){this._draggedRange=Kr.fromRange(l);return}const c=a$(s,a);if(a.length>1)this._draggedRange=Kr.fromRange(c),this._blockMode=!0;else if(a.length==1){const u=l.start.isTouching(c.start)&&l.end.isTouching(c.end);this._draggedRange=Kr.fromRange(u?c:l),this._blockMode=u}s.change(u=>u.setSelection(this._draggedRange.toRange()))}_updatePreview({dataTransfer:e,domTarget:i,clientX:s}){const r=this.editor.editing.view,o=r.document.selection.editableElement,a=r.domConverter.mapViewToDom(o),l=$t.window.getComputedStyle(a);this._previewContainer?this._previewContainer.firstElementChild&&this._previewContainer.removeChild(this._previewContainer.firstElementChild):(this._previewContainer=ka($t.document,"div",{style:"position: fixed; left: -999999px;"}),$t.document.body.appendChild(this._previewContainer));const c=new mn(a);if(a.contains(i))return;const u=parseFloat(l.paddingLeft),d=ka($t.document,"div");d.className="ck ck-content",d.style.width=l.width,d.style.paddingLeft=`${c.left-s+u}px`,sn.isiOS&&(d.style.backgroundColor="white"),d.innerHTML=e.getData("text/html"),e.setDragImage(d,0,0),this._previewContainer.appendChild(d)}}function U7(t){return sn.isGecko?t.dropEffect:["all","copyMove"].includes(t.effectAllowed)?"move":"copy"}function W7(t){if(t.is("editableElement"))return null;if(t.hasClass("ck-widget__selection-handle"))return t.findAncestor(ps);if(ps(t))return t;const n=t.findAncestor(e=>ps(e)||e.is("editableElement"));return ps(n)?n:null}function a$(t,n){const e=n[0],i=n[n.length-1],s=e.getCommonAncestor(i),r=t.createPositionBefore(e),o=t.createPositionAfter(i);if(s&&s.is("element")&&!t.schema.isLimit(s)){const a=t.createRangeOn(s),l=r.isTouching(a.start),c=o.isTouching(a.end);if(l&&c)return a$(t,[s])}return t.createRange(r,o)}class q4e extends Be{static get pluginName(){return"PastePlainText"}static get requires(){return[da]}init(){const n=this.editor,e=n.model,i=n.editing.view,s=e.document.selection;i.addObserver(f1),n.plugins.get(da).on("contentInsertion",(r,o)=>{K4e(o.content,e)&&e.change(a=>{const l=Array.from(s.getAttributes()).filter(([u])=>e.schema.getAttributeProperties(u).isFormatting);s.isCollapsed||e.deleteContent(s,{doNotAutoparagraph:!0}),l.push(...s.getAttributes());const c=a.createRangeIn(o.content);for(const u of c.getItems())for(const d of l)e.schema.checkAttribute(u,d[0])&&a.setAttribute(d[0],d[1],u)})})}}function K4e(t,n){let e=n.createRangeIn(t);if(t.childCount==1){const i=t.getChild(0);i.is("element")&&n.schema.isBlock(i)&&!n.schema.isObject(i)&&!n.schema.isLimit(i)&&(e=n.createRangeIn(i))}for(const i of e.getItems())if(!n.schema.isInline(i)||Array.from(i.getAttributeKeys()).find(r=>n.schema.getAttributeProperties(r).isFormatting))return!1;return!0}class l$ extends Be{static get pluginName(){return"Clipboard"}static get requires(){return[xg,da,j4e,q4e]}init(){const n=this.editor,e=this.editor.t;n.accessibility.addKeystrokeInfos({keystrokes:[{label:e("Copy selected content"),keystroke:"CTRL+C"},{label:e("Paste content"),keystroke:"CTRL+V"},{label:e("Paste content as plain text"),keystroke:"CTRL+SHIFT+V"}]})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class G4e extends ACe{constructor(e,i){super(e);w(this,"view");this.view=i}init(){const e=this.editor,i=this.view,s=e.editing.view,r=i.editable,o=s.document.getRoot();r.name=o.rootName,i.render();const a=r.element;this.setEditableElement(r.name,a),i.editable.bind("isFocused").to(this.focusTracker),s.attachDomRoot(a),this._initPlaceholder(),this._initToolbar(),this._initMenuBar(this.view.menuBarView),this.fire("ready")}destroy(){super.destroy();const e=this.view;this.editor.editing.view.detachDomRoot(e.editable.name),e.destroy()}_initToolbar(){const e=this.editor,i=this.view;i.toolbar.fillFromConfig(e.config.get("toolbar"),this.componentFactory),this.addToolbar(i.toolbar)}_initPlaceholder(){const e=this.editor,i=e.editing.view,s=i.document.getRoot(),r=e.config.get("placeholder");if(r){const o=typeof r=="string"?r:r[s.rootName];o&&(s.placeholder=o)}LE({view:i,element:s,isDirectHost:!1,keepOnFocus:!0})}}class Y4e extends ICe{constructor(e,i,s={}){super(e);w(this,"toolbar");w(this,"editable");w(this,"menuBarView");const r=e.t;this.toolbar=new _h(e,{shouldGroupWhenFull:s.shouldToolbarGroupWhenFull}),this.menuBarView=new $Ce(e),this.editable=new MCe(e,i,s.editableElement,{label:o=>r("Rich Text Editor. Editing area: %0",o.name)}),this.toolbar.extendTemplate({attributes:{class:["ck-reset_all","ck-rounded-corners"],dir:e.uiLanguageDirection}}),this.menuBarView.extendTemplate({attributes:{class:["ck-reset_all","ck-rounded-corners"],dir:e.uiLanguageDirection}})}render(){super.render(),this.registerChild([this.menuBarView,this.toolbar,this.editable])}}class Z4e extends QC(Cf){constructor(e,i={}){if(!Pb(e)&&i.initialData!==void 0)throw new fe("editor-create-initial-data",null);super(i);w(this,"ui");this.config.get("initialData")===void 0&&this.config.set("initialData",X4e(e)),Pb(e)&&(this.sourceElement=e,f2e(this,e)),this.model.document.createRoot();const s=!this.config.get("toolbar.shouldNotGroupWhenFull"),r=new Y4e(this.locale,this.editing.view,{editableElement:this.sourceElement,shouldToolbarGroupWhenFull:s});this.ui=new G4e(this,r)}destroy(){const e=this.getData();return this.ui.destroy(),super.destroy().then(()=>{this.sourceElement&&this.updateSourceElement(e)})}static create(e,i={}){return new Promise(s=>{if(Pb(e)&&e.tagName==="TEXTAREA")throw new fe("editor-wrong-element",null);const r=new this(e,i);s(r.initPlugins().then(()=>r.ui.init()).then(()=>r.data.init(r.config.get("initialData"))).then(()=>r.fire("ready")).then(()=>r))})}}function X4e(t){return Pb(t)?Sve(t):t}function Pb(t){return hh(t)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class J4e extends en{constructor(n){super(n),this.affectsData=!1}execute(){const n=this.editor.model,e=n.document.selection;let i=n.schema.getLimitElement(e);if(e.containsEntireContent(i)||!j7(n.schema,i))do if(i=i.parent,!i)return;while(!j7(n.schema,i));n.change(s=>{s.setSelection(i,"in")})}}function j7(t,n){return t.isLimit(n)&&(t.checkChild(n,"$text")||t.checkChild(n,"paragraph"))}const Q4e=Hw("Ctrl+A");class eEe extends Be{static get pluginName(){return"SelectAllEditing"}init(){const n=this.editor,e=n.t,s=n.editing.view.document;n.commands.add("selectAll",new J4e(n)),this.listenTo(s,"keydown",(r,o)=>{vh(o)===Q4e&&(n.execute("selectAll"),o.preventDefault())}),n.accessibility.addKeystrokeInfos({keystrokes:[{label:e("Select all"),keystroke:"CTRL+A"}]})}}var tEe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M.75 15.5a.75.75 0 0 1 .75.75V18l.008.09A.5.5 0 0 0 2 18.5h1.75a.75.75 0 1 1 0 1.5H1.5l-.144-.007a1.5 1.5 0 0 1-1.35-1.349L0 18.5v-2.25a.75.75 0 0 1 .75-.75zm18.5 0a.75.75 0 0 1 .75.75v2.25l-.007.144a1.5 1.5 0 0 1-1.349 1.35L18.5 20h-2.25a.75.75 0 1 1 0-1.5H18a.5.5 0 0 0 .492-.41L18.5 18v-1.75a.75.75 0 0 1 .75-.75zm-10.45 3c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm.45-5.5a.75.75 0 1 1 0 1.5h-8.5a.75.75 0 1 1 0-1.5h8.5zM1.3 11c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5h10.5zM1.3 7c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5h-2.5a.75.75 0 1 1 0-1.5h2.5zm-5 0a.75.75 0 1 1 0 1.5h-5.5a.75.75 0 0 1 0-1.5h5.5zm-6.5-5a.75.75 0 0 1 0 1.5H2a.5.5 0 0 0-.492.41L1.5 2v1.75a.75.75 0 0 1-1.5 0V1.5l.007-.144A1.5 1.5 0 0 1 1.356.006L1.5 0h2.25zM18.5 0l.144.007a1.5 1.5 0 0 1 1.35 1.349L20 1.5v2.25a.75.75 0 1 1-1.5 0V2l-.008-.09A.5.5 0 0 0 18 1.5h-1.75a.75.75 0 1 1 0-1.5h2.25zM8.8 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6z"/></svg>';class nEe extends Be{static get pluginName(){return"SelectAllUI"}init(){const n=this.editor;n.ui.componentFactory.add("selectAll",()=>{const e=this._createButton(Yt);return e.set({tooltip:!0}),e}),n.ui.componentFactory.add("menuBar:selectAll",()=>this._createButton(Xi))}_createButton(n){const e=this.editor,i=e.locale,s=e.commands.get("selectAll"),r=new n(e.locale),o=i.t;return r.set({label:o("Select all"),icon:tEe,keystroke:"Ctrl+A"}),r.bind("isEnabled").to(s,"isEnabled"),this.listenTo(r,"execute",()=>{e.execute("selectAll"),e.editing.view.focus()}),r}}class c$ extends Be{static get requires(){return[eEe,nEe]}static get pluginName(){return"SelectAll"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class u$ extends en{constructor(e){super(e);w(this,"_stack",[]);w(this,"_createdBatches",new WeakSet);this.refresh(),this._isEnabledBasedOnSelection=!1,this.listenTo(e.data,"set",(i,s)=>{s[1]={...s[1]};const r=s[1];r.batchType||(r.batchType={isUndoable:!1})},{priority:"high"}),this.listenTo(e.data,"set",(i,s)=>{s[1].batchType.isUndoable||this.clearStack()})}refresh(){this.isEnabled=this._stack.length>0}get createdBatches(){return this._createdBatches}addBatch(e){const i=this.editor.model.document.selection,s={ranges:i.hasOwnRange?Array.from(i.getRanges()):[],isBackward:i.isBackward};this._stack.push({batch:e,selection:s}),this.refresh()}clearStack(){this._stack=[],this.refresh()}_restoreSelection(e,i,s){const r=this.editor.model,o=r.document,a=[],l=e.map(u=>u.getTransformedByOperations(s)),c=l.flat();for(const u of l){const d=u.filter(f=>f.root!=o.graveyard).filter(f=>!sEe(f,c));d.length&&(iEe(d),a.push(d[0]))}a.length&&r.change(u=>{u.setSelection(a,{backward:i})})}_undo(e,i){const s=this.editor.model,r=s.document;this._createdBatches.add(i);const o=e.operations.slice().filter(a=>a.isDocumentOperation);o.reverse();for(const a of o){const l=a.baseVersion+1,c=Array.from(r.history.getOperations(l)),d=qwe([a.getReversed()],c,{useRelations:!0,document:this.editor.model.document,padWithNoOps:!1,forceWeakRemove:!0}).operationsA;for(let f of d){const p=f.affectedSelectable;p&&!s.canEditAt(p)&&(f=new Ps(f.baseVersion)),i.addOperation(f),s.applyOperation(f),r.history.setOperationAsUndone(a,f)}}}}function iEe(t){t.sort((n,e)=>n.start.isBefore(e.start)?-1:1);for(let n=1;n<t.length;n++){const i=t[n-1].getJoined(t[n],!0);i&&(n--,t.splice(n,2,i))}}function sEe(t,n){return n.some(e=>e!==t&&e.containsRange(t,!0))}class rEe extends u${execute(n=null){const e=n?this._stack.findIndex(r=>r.batch==n):this._stack.length-1,i=this._stack.splice(e,1)[0],s=this.editor.model.createBatch({isUndo:!0});this.editor.model.enqueueChange(s,()=>{this._undo(i.batch,s);const r=this.editor.model.document.history.getOperations(i.batch.baseVersion);this._restoreSelection(i.selection.ranges,i.selection.isBackward,r)}),this.fire("revert",i.batch,s),this.refresh()}}class oEe extends u${execute(){const n=this._stack.pop(),e=this.editor.model.createBatch({isUndo:!0});this.editor.model.enqueueChange(e,()=>{const s=n.batch.operations[n.batch.operations.length-1].baseVersion+1,r=this.editor.model.document.history.getOperations(s);this._restoreSelection(n.selection.ranges,n.selection.isBackward,r),this._undo(n.batch,e)}),this.refresh()}}class aEe extends Be{constructor(){super(...arguments);w(this,"_undoCommand");w(this,"_redoCommand");w(this,"_batchRegistry",new WeakSet)}static get pluginName(){return"UndoEditing"}init(){const e=this.editor,i=e.t;this._undoCommand=new rEe(e),this._redoCommand=new oEe(e),e.commands.add("undo",this._undoCommand),e.commands.add("redo",this._redoCommand),this.listenTo(e.model,"applyOperation",(s,r)=>{const o=r[0];if(!o.isDocumentOperation)return;const a=o.batch,l=this._redoCommand.createdBatches.has(a),c=this._undoCommand.createdBatches.has(a);this._batchRegistry.has(a)||(this._batchRegistry.add(a),a.isUndoable&&(l?this._undoCommand.addBatch(a):c||(this._undoCommand.addBatch(a),this._redoCommand.clearStack())))},{priority:"highest"}),this.listenTo(this._undoCommand,"revert",(s,r,o)=>{this._redoCommand.addBatch(o)}),e.keystrokes.set("CTRL+Z","undo"),e.keystrokes.set("CTRL+Y","redo"),e.keystrokes.set("CTRL+SHIFT+Z","redo"),e.accessibility.addKeystrokeInfos({keystrokes:[{label:i("Undo"),keystroke:"CTRL+Z"},{label:i("Redo"),keystroke:[["CTRL+Y"],["CTRL+SHIFT+Z"]]}]})}}class lEe extends Be{static get pluginName(){return"UndoUI"}init(){const n=this.editor,e=n.locale,i=n.t,s=e.uiLanguageDirection=="ltr"?kt.undo:kt.redo,r=e.uiLanguageDirection=="ltr"?kt.redo:kt.undo;this._addButtonsToFactory("undo",i("Undo"),"CTRL+Z",s),this._addButtonsToFactory("redo",i("Redo"),"CTRL+Y",r)}_addButtonsToFactory(n,e,i,s){const r=this.editor;r.ui.componentFactory.add(n,()=>{const o=this._createButton(Yt,n,e,i,s);return o.set({tooltip:!0}),o}),r.ui.componentFactory.add("menuBar:"+n,()=>this._createButton(Xi,n,e,i,s))}_createButton(n,e,i,s,r){const o=this.editor,a=o.locale,l=o.commands.get(e),c=new n(a);return c.set({label:i,icon:r,keystroke:s}),c.bind("isEnabled").to(l,"isEnabled"),this.listenTo(c,"execute",()=>{o.execute(e),o.editing.view.focus()}),c}}class oS extends Be{static get requires(){return[aEe,lEe]}static get pluginName(){return"Undo"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class cEe extends Be{static get requires(){return[SD,l$,nS,c$,Xke,XD,oS]}static get pluginName(){return"Essentials"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class uEe extends Rt{constructor(e){super(e);w(this,"children");w(this,"_findInputView");w(this,"_replaceInputView");w(this,"_findButtonView");w(this,"_findPrevButtonView");w(this,"_findNextButtonView");w(this,"_advancedOptionsCollapsibleView");w(this,"_matchCaseSwitchView");w(this,"_wholeWordsOnlySwitchView");w(this,"_replaceButtonView");w(this,"_replaceAllButtonView");w(this,"_inputsDivView");w(this,"_actionButtonsDivView");w(this,"_focusTracker");w(this,"_keystrokes");w(this,"_focusables");w(this,"focusCycler");const i=e.t;this.children=this.createCollection(),this.set("matchCount",0),this.set("highlightOffset",0),this.set("isDirty",!1),this.set("_areCommandsEnabled",{}),this.set("_resultsCounterText",""),this.set("_matchCase",!1),this.set("_wholeWordsOnly",!1),this.bind("_searchResultsFound").to(this,"matchCount",this,"isDirty",(s,r)=>s>0&&!r),this._findInputView=this._createInputField(i("Find in text…")),this._findPrevButtonView=this._createButton({label:i("Previous result"),class:"ck-button-prev",icon:kt.previousArrow,keystroke:"Shift+F3",tooltip:!0}),this._findNextButtonView=this._createButton({label:i("Next result"),class:"ck-button-next",icon:kt.previousArrow,keystroke:"F3",tooltip:!0}),this._replaceInputView=this._createInputField(i("Replace with…"),"ck-labeled-field-replace"),this._inputsDivView=this._createInputsDiv(),this._matchCaseSwitchView=this._createMatchCaseSwitch(),this._wholeWordsOnlySwitchView=this._createWholeWordsOnlySwitch(),this._advancedOptionsCollapsibleView=this._createAdvancedOptionsCollapsible(),this._replaceAllButtonView=this._createButton({label:i("Replace all"),class:"ck-button-replaceall",withText:!0}),this._replaceButtonView=this._createButton({label:i("Replace"),class:"ck-button-replace",withText:!0}),this._findButtonView=this._createButton({label:i("Find"),class:"ck-button-find ck-button-action",withText:!0}),this._actionButtonsDivView=this._createActionButtonsDiv(),this._focusTracker=new Bi,this._keystrokes=new Zi,this._focusables=new Us,this.focusCycler=new Js({focusables:this._focusables,focusTracker:this._focusTracker,keystrokeHandler:this._keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.children.addMany([this._inputsDivView,this._advancedOptionsCollapsibleView,this._actionButtonsDivView]),this.setTemplate({tag:"form",attributes:{class:["ck","ck-find-and-replace-form"],tabindex:"-1"},children:this.children})}render(){super.render(),Ih({view:this}),this._initFocusCycling(),this._initKeystrokeHandling()}destroy(){super.destroy(),this._focusTracker.destroy(),this._keystrokes.destroy()}focus(e){e===-1?this.focusCycler.focusLast():this.focusCycler.focusFirst()}reset(){this._findInputView.errorText=null,this.isDirty=!0}get _textToFind(){return this._findInputView.fieldView.element.value}get _textToReplace(){return this._replaceInputView.fieldView.element.value}_createInputsDiv(){const e=this.locale,i=e.t,s=new Rt(e);return this._findInputView.fieldView.on("input",()=>{this.isDirty=!0}),this._findPrevButtonView.delegate("execute").to(this,"findPrevious"),this._findNextButtonView.delegate("execute").to(this,"findNext"),this._findPrevButtonView.bind("isEnabled").to(this,"_areCommandsEnabled",({findPrevious:r})=>r),this._findNextButtonView.bind("isEnabled").to(this,"_areCommandsEnabled",({findNext:r})=>r),this._injectFindResultsCounter(),this._replaceInputView.bind("isEnabled").to(this,"_areCommandsEnabled",this,"_searchResultsFound",({replace:r},o)=>r&&o),this._replaceInputView.bind("infoText").to(this._replaceInputView,"isEnabled",this._replaceInputView,"isFocused",(r,o)=>r||!o?"":i("Tip: Find some text first in order to replace it.")),s.setTemplate({tag:"div",attributes:{class:["ck","ck-find-and-replace-form__inputs"]},children:[this._findInputView,this._findPrevButtonView,this._findNextButtonView,this._replaceInputView]}),s}_onFindButtonExecute(){if(!this._textToFind){const e=this.t;this._findInputView.errorText=e("Text to find must not be empty.");return}this.isDirty=!1,this.fire("findNext",{searchText:this._textToFind,matchCase:this._matchCase,wholeWords:this._wholeWordsOnly})}_injectFindResultsCounter(){const e=this.locale,i=e.t,s=this.bindTemplate,r=new Rt(this.locale);this.bind("_resultsCounterText").to(this,"highlightOffset",this,"matchCount",(a,l)=>i("%0 of %1",[a,l])),r.setTemplate({tag:"span",attributes:{class:["ck","ck-results-counter",s.if("isDirty","ck-hidden")]},children:[{text:s.to("_resultsCounterText")}]});const o=()=>{const a=this._findInputView.fieldView.element;if(!a||!bc(a))return;const l=new mn(r.element).width,c=e.uiLanguageDirection==="ltr"?"paddingRight":"paddingLeft";l?a.style[c]=`calc( 2 * var(--ck-spacing-standard) + ${l}px )`:a.style[c]=""};this.on("change:_resultsCounterText",o,{priority:"low"}),this.on("change:isDirty",o,{priority:"low"}),this._findInputView.template.children[0].children.push(r)}_createAdvancedOptionsCollapsible(){const e=this.locale.t,i=new YE(this.locale,[this._matchCaseSwitchView,this._wholeWordsOnlySwitchView]);return i.set({label:e("Advanced options"),isCollapsed:!0}),i}_createActionButtonsDiv(){const e=new Rt(this.locale);return this._replaceButtonView.bind("isEnabled").to(this,"_areCommandsEnabled",this,"_searchResultsFound",({replace:i},s)=>i&&s),this._replaceAllButtonView.bind("isEnabled").to(this,"_areCommandsEnabled",this,"_searchResultsFound",({replaceAll:i},s)=>i&&s),this._replaceButtonView.on("execute",()=>{this.fire("replace",{searchText:this._textToFind,replaceText:this._textToReplace})}),this._replaceAllButtonView.on("execute",()=>{this.fire("replaceAll",{searchText:this._textToFind,replaceText:this._textToReplace}),this.focus()}),this._findButtonView.on("execute",this._onFindButtonExecute.bind(this)),e.setTemplate({tag:"div",attributes:{class:["ck","ck-find-and-replace-form__actions"]},children:[this._replaceAllButtonView,this._replaceButtonView,this._findButtonView]}),e}_createMatchCaseSwitch(){const e=this.locale.t,i=new bh(this.locale);return i.set({label:e("Match case"),withText:!0}),i.bind("isOn").to(this,"_matchCase"),i.on("execute",()=>{this._matchCase=!this._matchCase,this.isDirty=!0}),i}_createWholeWordsOnlySwitch(){const e=this.locale.t,i=new bh(this.locale);return i.set({label:e("Whole words only"),withText:!0}),i.bind("isOn").to(this,"_wholeWordsOnly"),i.on("execute",()=>{this._wholeWordsOnly=!this._wholeWordsOnly,this.isDirty=!0}),i}_initFocusCycling(){[this._findInputView,this._findPrevButtonView,this._findNextButtonView,this._replaceInputView,this._advancedOptionsCollapsibleView.buttonView,this._matchCaseSwitchView,this._wholeWordsOnlySwitchView,this._replaceAllButtonView,this._replaceButtonView,this._findButtonView].forEach(i=>{this._focusables.add(i),this._focusTracker.add(i.element)})}_initKeystrokeHandling(){const e=s=>s.stopPropagation(),i=s=>{s.stopPropagation(),s.preventDefault()};this._keystrokes.listenTo(this.element),this._keystrokes.set("f3",s=>{i(s),this._findNextButtonView.fire("execute")}),this._keystrokes.set("shift+f3",s=>{i(s),this._findPrevButtonView.fire("execute")}),this._keystrokes.set("enter",s=>{const r=s.target;r===this._findInputView.fieldView.element?(this._areCommandsEnabled.findNext?this._findNextButtonView.fire("execute"):this._findButtonView.fire("execute"),i(s)):r===this._replaceInputView.fieldView.element&&!this.isDirty&&(this._replaceButtonView.fire("execute"),i(s))}),this._keystrokes.set("shift+enter",s=>{s.target===this._findInputView.fieldView.element&&(this._areCommandsEnabled.findPrevious?this._findPrevButtonView.fire("execute"):this._findButtonView.fire("execute"),i(s))}),this._keystrokes.set("arrowright",e),this._keystrokes.set("arrowleft",e),this._keystrokes.set("arrowup",e),this._keystrokes.set("arrowdown",e)}_createButton(e){const i=new Yt(this.locale);return i.set(e),i}_createInputField(e,i){const s=new ms(this.locale,Jo);return s.label=e,s.class=i,s}}var q7='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m12.87 13.786 1.532-1.286 3.857 4.596a1 1 0 1 1-1.532 1.286l-3.857-4.596z"/><path d="M16.004 8.5a6.5 6.5 0 0 1-9.216 5.905c-1.154-.53-.863-1.415-.663-1.615.194-.194.564-.592 1.635-.141a4.5 4.5 0 0 0 5.89-5.904l-.104-.227 1.332-1.331c.045-.046.196-.041.224.007a6.47 6.47 0 0 1 .902 3.306zm-3.4-5.715c.562.305.742 1.106.354 1.494-.388.388-.995.414-1.476.178a4.5 4.5 0 0 0-6.086 5.882l.114.236-1.348 1.349c-.038.037-.17.022-.198-.023a6.5 6.5 0 0 1 5.54-9.9 6.469 6.469 0 0 1 3.1.784z"/><path d="M4.001 11.93.948 8.877a.2.2 0 0 1 .141-.341h6.106a.2.2 0 0 1 .141.341L4.283 11.93a.2.2 0 0 1-.282 0zm11.083-6.789 3.053 3.053a.2.2 0 0 1-.14.342H11.89a.2.2 0 0 1-.14-.342l3.052-3.053a.2.2 0 0 1 .282 0z"/></svg>';class dEe extends Be{constructor(e){super(e);w(this,"formView");e.config.define("findAndReplace.uiType","dialog"),this.formView=null}static get requires(){return[hm]}static get pluginName(){return"FindAndReplaceUI"}init(){const e=this.editor,i=e.config.get("findAndReplace.uiType")==="dropdown",s=e.commands.get("find"),r=this.editor.t;e.ui.componentFactory.add("findAndReplace",()=>{let o;return i?(o=this._createDropdown(),o.bind("isEnabled").to(s)):o=this._createDialogButtonForToolbar(),e.keystrokes.set("Ctrl+F",(a,l)=>{if(s.isEnabled){if(o instanceof x_){const c=o.buttonView;c.isOn||c.fire("execute")}else o.isOn?e.plugins.get("Dialog").view.focus():o.fire("execute");l()}}),o}),i||e.ui.componentFactory.add("menuBar:findAndReplace",()=>this._createDialogButtonForMenuBar()),e.accessibility.addKeystrokeInfos({keystrokes:[{label:r("Find in the document"),keystroke:"CTRL+F"}]})}_createDropdown(){const e=this.editor,i=e.locale.t,s=Xs(e.locale);return s.once("change:isOpen",()=>{this.formView=this._createFormView(),this.formView.children.add(new Jw(e.locale,{label:i("Find and replace")}),0),s.panelView.children.add(this.formView)}),s.on("change:isOpen",(r,o,a)=>{a?this._setupFormView():this.fire("searchReseted")},{priority:"low"}),s.buttonView.set({icon:q7,label:i("Find and replace"),keystroke:"CTRL+F",tooltip:!0}),s}_createDialogButtonForToolbar(){const e=this.editor,i=this._createButton(Yt),s=e.plugins.get("Dialog");return i.set({tooltip:!0}),i.bind("isOn").to(s,"id",r=>r==="findAndReplace"),i.on("execute",()=>{i.isOn?s.hide():this._showDialog()}),i}_createDialogButtonForMenuBar(){const e=this._createButton(Xi),i=this.editor.plugins.get("Dialog"),s=this.editor.plugins.get("Dialog");return e.set({role:"menuitemcheckbox",isToggleable:!0}),e.bind("isOn").to(s,"id",r=>r==="findAndReplace"),e.on("execute",()=>{if(i.id==="findAndReplace"){i.hide();return}this._showDialog()}),e}_createButton(e){const i=this.editor,s=i.commands.get("find"),r=new e(i.locale),o=i.locale.t;return r.bind("isEnabled").to(s),r.set({icon:q7,label:o("Find and replace"),keystroke:"CTRL+F"}),r}_showDialog(){const e=this.editor,i=e.plugins.get("Dialog"),s=e.locale.t;this.formView||(this.formView=this._createFormView()),i.show({id:"findAndReplace",title:s("Find and replace"),content:this.formView,position:ho.EDITOR_TOP_SIDE,onShow:()=>{this._setupFormView()},onHide:()=>{this.fire("searchReseted")}})}_createFormView(){const e=this.editor,i=new(Zw(uEe))(e.locale),s=e.commands,o=this.editor.plugins.get("FindAndReplaceEditing").state;i.bind("highlightOffset").to(o,"highlightedOffset"),i.listenTo(o.results,"change",()=>{i.matchCount=o.results.length});const a=s.get("findNext"),l=s.get("findPrevious"),c=s.get("replace"),u=s.get("replaceAll");return i.bind("_areCommandsEnabled").to(a,"isEnabled",l,"isEnabled",c,"isEnabled",u,"isEnabled",(d,f,p,m)=>({findNext:d,findPrevious:f,replace:p,replaceAll:m})),i.delegate("findNext","findPrevious","replace","replaceAll").to(this),i.on("change:isDirty",(d,f,p)=>{p&&this.fire("searchReseted")}),i}_setupFormView(){this.formView.disableCssTransitions(),this.formView.reset(),this.formView._findInputView.fieldView.select(),this.formView.enableCssTransitions()}}class hEe extends en{constructor(e,i){super(e);w(this,"_state");this.isEnabled=!0,this.affectsData=!1,this._state=i}execute(e,{matchCase:i,wholeWords:s}={}){const{editor:r}=this,{model:o}=r,a=r.plugins.get("FindAndReplaceUtils");let l,c="";typeof e=="string"?l=(...f)=>({results:a.findByTextCallback(e,{matchCase:i,wholeWords:s})(...f),searchText:e}):l=e;const u=l;l=(...f)=>{const p=u(...f);return p&&"searchText"in p&&(c=p.searchText),p};const d=o.document.getRootNames().reduce((f,p)=>a.updateFindResultFromRange(o.createRangeIn(o.document.getRoot(p)),o,l,f),null);return this._state.clear(o),this._state.results.addMany(d),this._state.highlightedResult=d.get(0),this._state.searchText=c,l&&(this._state.lastSearchCallback=l),this._state.matchCase=!!i,this._state.matchWholeWords=!!s,{results:d,findCallback:l}}}class d$ extends en{constructor(e,i){super(e);w(this,"_state");this.isEnabled=!0,this._state=i,this._isEnabledBasedOnSelection=!1}_replace(e,i){const{model:s}=this.editor,r=i.marker.getRange();s.canEditAt(r)&&s.change(o=>{if(r.root.rootName==="$graveyard"){this._state.results.remove(i);return}let a={};for(const l of r.getItems())if(l.is("$text")||l.is("$textProxy")){a=l.getAttributes();break}s.insertContent(o.createText(e,a),r),this._state.results.has(i)&&this._state.results.remove(i)})}}class fEe extends d${execute(n,e){this._replace(n,e)}}class mEe extends d${execute(n,e){const{editor:i}=this,{model:s}=i,r=i.plugins.get("FindAndReplaceUtils"),o=e instanceof _s?e:s.document.getRootNames().reduce((a,l)=>r.updateFindResultFromRange(s.createRangeIn(s.document.getRoot(l)),s,r.findByTextCallback(e,this._state),a),null);o.length&&s.change(()=>{[...o].forEach(a=>{this._replace(n,a)})})}}class h$ extends en{constructor(e,i){super(e);w(this,"_state");this.affectsData=!1,this._state=i,this.isEnabled=!1,this.listenTo(this._state.results,"change",()=>{this.isEnabled=this._state.results.length>1})}refresh(){this.isEnabled=this._state.results.length>1}execute(){const e=this._state.results,i=e.getIndex(this._state.highlightedResult),s=i+1>=e.length?0:i+1;this._state.highlightedResult=this._state.results.get(s)}}class pEe extends h${execute(){const e=this._state.results.getIndex(this._state.highlightedResult),i=e-1<0?this._state.results.length-1:e-1;this._state.highlightedResult=this._state.results.get(i)}}class gEe extends li(){constructor(n){super(),this.set("results",new _s),this.set("highlightedResult",null),this.set("highlightedOffset",0),this.set("searchText",""),this.set("replaceText",""),this.set("lastSearchCallback",null),this.set("matchCase",!1),this.set("matchWholeWords",!1),this.results.on("change",(e,{removed:i,index:s})=>{if(Array.from(i).length){let r=!1;if(n.change(o=>{for(const a of i)this.highlightedResult===a&&(r=!0),n.markers.has(a.marker.name)&&o.removeMarker(a.marker)}),r){const o=s>=this.results.length?0:s;this.highlightedResult=this.results.get(o)}}}),this.on("change:highlightedResult",()=>{this.refreshHighlightOffset()})}clear(n){this.searchText="",n.change(e=>{if(this.highlightedResult){const i=this.highlightedResult.marker.name.split(":")[1],s=n.markers.get(`findResultHighlighted:${i}`);s&&e.removeMarker(s)}[...this.results].forEach(({marker:i})=>{e.removeMarker(i)})}),this.results.clear()}refreshHighlightOffset(){const{highlightedResult:n,results:e}=this,i={before:-1,same:0,after:1,different:1};n?this.highlightedOffset=Array.from(e).sort((s,r)=>i[s.marker.getStart().compareWith(r.marker.getStart())]).indexOf(n)+1:this.highlightedOffset=0}}class vEe extends Be{static get pluginName(){return"FindAndReplaceUtils"}updateFindResultFromRange(n,e,i,s){const r=s||new _s,o=a=>r.find(l=>{const{marker:c}=l,u=c.getRange(),d=a.getRange();return u.isEqual(d)});return e.change(a=>{[...n].forEach(({type:l,item:c})=>{if(l==="elementStart"&&e.schema.checkChild(c,"$text")){let u=i({item:c,text:this.rangeToText(e.createRangeIn(c))});if(!u)return;"results"in u&&(u=u.results),u.forEach(d=>{const f=`findResult:${to()}`,p=a.addMarker(f,{usingOperation:!1,affectsData:!1,range:a.createRange(a.createPositionAt(c,d.start),a.createPositionAt(c,d.end))}),m=bEe(r,p);o(p)||r.add({id:f,label:d.label,marker:p},m)})}})}),r}rangeToText(n){return Array.from(n.getItems()).reduce((e,i)=>i.is("$text")||i.is("$textProxy")?e+i.data:`${e}
`,"")}findByTextCallback(n,e){let i="gu";e.matchCase||(i+="i");let s=`(${uB(n)})`;if(e.wholeWords){const a="[^a-zA-ZÀ-ɏḀ-ỿ]";new RegExp("^"+a).test(n)||(s=`(^|${a}|_)${s}`),new RegExp(a+"$").test(n)||(s=`${s}(?=_|${a}|$)`)}const r=new RegExp(s,i);function o({text:a}){return[...a.matchAll(r)].map(_Ee)}return o}}function bEe(t,n){const e=t.find(({marker:i})=>n.getStart().isBefore(i.getStart()));return e?t.getIndex(e):t.length}function _Ee(t){const n=t.length-1;let e=t.index;return t.length===3&&(e+=t[1].length),{label:t[n],start:e,end:e+t[n].length}}const wEe="ck-find-result_selected";class yEe extends Be{constructor(){super(...arguments);w(this,"state");w(this,"_onDocumentChange",()=>{const e=new Set,i=new Set,s=this.editor.model,{results:r}=this.state,o=s.document.differ.getChanges(),a=s.document.differ.getChangedMarkers();o.forEach(u=>{u.position&&(u.name==="$text"||u.position.nodeAfter&&s.schema.isInline(u.position.nodeAfter)?(e.add(u.position.parent),[...s.markers.getMarkersAtPosition(u.position)].forEach(d=>{i.add(d.name)})):u.type==="insert"&&u.position.nodeAfter&&e.add(u.position.nodeAfter))}),a.forEach(({name:u,data:{newRange:d}})=>{d&&d.start.root.rootName==="$graveyard"&&i.add(u)}),e.forEach(u=>{[...s.markers.getMarkersIntersectingRange(s.createRangeIn(u))].forEach(f=>i.add(f.name))}),i.forEach(u=>{r.has(u)&&(r.get(u)===this.state.highlightedResult&&(this.state.highlightedResult=null),r.remove(u))});const l=[],c=this.editor.plugins.get("FindAndReplaceUtils");e.forEach(u=>{const d=c.updateFindResultFromRange(s.createRangeOn(u),s,this.state.lastSearchCallback,r);l.push(...d)}),a.forEach(u=>{if(u.data.newRange){const d=c.updateFindResultFromRange(u.data.newRange,s,this.state.lastSearchCallback,r);l.push(...d)}}),!this.state.highlightedResult&&l.length?this.state.highlightedResult=l[0]:this.state.refreshHighlightOffset()})}static get requires(){return[vEe]}static get pluginName(){return"FindAndReplaceEditing"}init(){this.state=new gEe(this.editor.model),this.set("_isSearchActive",!1),this._defineConverters(),this._defineCommands(),this.listenTo(this.state,"change:highlightedResult",(s,r,o,a)=>{const{model:l}=this.editor;l.change(c=>{if(a){const u=a.marker.name.split(":")[1],d=l.markers.get(`findResultHighlighted:${u}`);d&&c.removeMarker(d)}if(o){const u=o.marker.name.split(":")[1];c.addMarker(`findResultHighlighted:${u}`,{usingOperation:!1,affectsData:!1,range:o.marker.getRange()})}})});/* istanbul ignore next -- @preserve */const i=Ss(((s,r,o)=>{if(o){const a=this.editor.editing.view.domConverter,l=this.editor.editing.mapper.toViewRange(o.marker.getRange());lV({target:a.viewRangeToDom(l),viewportOffset:40})}}).bind(this),32);this.listenTo(this.state,"change:highlightedResult",i,{priority:"low"}),this.listenTo(this.editor,"destroy",i.cancel),this.on("change:_isSearchActive",(s,r,o)=>{o?this.listenTo(this.editor.model.document,"change:data",this._onDocumentChange):this.stopListening(this.editor.model.document,"change:data",this._onDocumentChange)})}find(e,i){return this._isSearchActive=!0,this.editor.execute("find",e,i),this.state.results}stop(){this.state.clear(this.editor.model),this._isSearchActive=!1}_defineCommands(){this.editor.commands.add("find",new hEe(this.editor,this.state)),this.editor.commands.add("findNext",new h$(this.editor,this.state)),this.editor.commands.add("findPrevious",new pEe(this.editor,this.state)),this.editor.commands.add("replace",new fEe(this.editor,this.state)),this.editor.commands.add("replaceAll",new mEe(this.editor,this.state))}_defineConverters(){const{editor:e}=this;e.conversion.for("editingDowncast").markerToHighlight({model:"findResult",view:({markerName:i})=>{const[,s]=i.split(":");return{name:"span",classes:["ck-find-result"],attributes:{"data-find-result":s}}}}),e.conversion.for("editingDowncast").markerToHighlight({model:"findResultHighlighted",view:({markerName:i})=>{const[,s]=i.split(":");return{name:"span",classes:[wEe],attributes:{"data-find-result":s}}}})}}class CEe extends Be{static get requires(){return[yEe,dEe]}static get pluginName(){return"FindAndReplace"}init(){const n=this.editor.plugins.get("FindAndReplaceUI"),e=this.editor.plugins.get("FindAndReplaceEditing"),i=e.state;n.on("findNext",(s,r)=>{r?(i.searchText=r.searchText,e.find(r.searchText,r)):this.editor.execute("findNext")}),n.on("findPrevious",(s,r)=>{r&&i.searchText!==r.searchText?e.find(r.searchText):this.editor.execute("findPrevious")}),n.on("replace",(s,r)=>{i.searchText!==r.searchText&&e.find(r.searchText);const o=i.highlightedResult;o&&this.editor.execute("replace",r.replaceText,o)}),n.on("replaceAll",(s,r)=>{i.searchText!==r.searchText&&e.find(r.searchText),this.editor.execute("replaceAll",r.replaceText,i.results)}),n.on("searchReseted",()=>{i.clear(this.editor.model),e.stop()})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ry extends en{constructor(e,i){super(e);w(this,"attributeKey");this.attributeKey=i}refresh(){const e=this.editor.model,i=e.document;this.value=i.selection.getAttribute(this.attributeKey),this.isEnabled=e.schema.checkAttributeInSelection(i.selection,this.attributeKey)}execute(e={}){const i=this.editor.model,r=i.document.selection,o=e.value,a=e.batch,l=c=>{if(r.isCollapsed)o?c.setSelectionAttribute(this.attributeKey,o):c.removeSelectionAttribute(this.attributeKey);else{const u=i.schema.getValidRanges(r.getRanges(),this.attributeKey);for(const d of u)o?c.setAttribute(this.attributeKey,o,d):c.removeAttribute(this.attributeKey,d)}};a?i.enqueueChange(a,c=>{l(c)}):i.change(c=>{l(c)})}}const zr="fontSize",Hr="fontFamily",dl="fontColor",Ql="fontBackgroundColor";function f$(t,n){const e={model:{key:t,values:[]},view:{},upcastAlso:{}};for(const i of n)e.model.values.push(i.model),e.view[i.model]=i.view,i.upcastAlso&&(e.upcastAlso[i.model]=i.upcastAlso);return e}function m$(t){return n=>EEe(n.getStyle(t))}function p$(t){return(n,{writer:e})=>e.createAttributeElement("span",{style:`${t}:${n}`},{priority:7})}function kEe({dropdownView:t,colors:n,columns:e,removeButtonLabel:i,colorPickerLabel:s,documentColorsLabel:r,documentColorsCount:o,colorPickerViewConfig:a}){const l=t.locale,c=new JE(l,{colors:n,columns:e,removeButtonLabel:i,colorPickerLabel:s,documentColorsLabel:r,documentColorsCount:o,colorPickerViewConfig:a});return t.colorSelectorView=c,t.panelView.children.add(c),c}function EEe(t){return t.replace(/\s/g,"")}class SEe extends ry{constructor(n){super(n,Hr)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function g$(t){return t.map(TEe).filter(n=>n!==void 0)}function TEe(t){if(typeof t=="object")return t;if(t==="default")return{title:"Default",model:void 0};if(typeof t=="string")return xEe(t)}function xEe(t){const n=t.replace(/"|'/g,"").split(","),e=n[0],i=n.map(AEe).join(", ");return{title:e,model:i,view:{name:"span",styles:{"font-family":i},priority:7}}}function AEe(t){return t=t.trim(),t.indexOf(" ")>0&&(t=`'${t}'`),t}class IEe extends Be{static get pluginName(){return"FontFamilyEditing"}constructor(n){super(n),n.config.define(Hr,{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!1})}init(){const n=this.editor;n.model.schema.extend("$text",{allowAttributes:Hr}),n.model.schema.setAttributeProperties(Hr,{isFormatting:!0,copyOnEnter:!0});const e=g$(n.config.get("fontFamily.options")).filter(s=>s.model),i=f$(Hr,e);n.config.get("fontFamily.supportAllValues")?(this._prepareAnyValueConverters(),this._prepareCompatibilityConverter()):n.conversion.attributeToElement(i),n.commands.add(Hr,new SEe(n))}_prepareAnyValueConverters(){const n=this.editor;n.conversion.for("downcast").attributeToElement({model:Hr,view:(e,{writer:i})=>i.createAttributeElement("span",{style:"font-family:"+e},{priority:7})}),n.conversion.for("upcast").elementToAttribute({model:{key:Hr,value:e=>e.getStyle("font-family")},view:{name:"span",styles:{"font-family":/.*/}}})}_prepareCompatibilityConverter(){this.editor.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{face:/.*/}},model:{key:Hr,value:e=>e.getAttribute("face")}})}}var K7='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.03 3h6.149a.75.75 0 1 1 0 1.5h-5.514L11.03 3zm1.27 3h4.879a.75.75 0 1 1 0 1.5h-4.244L12.3 6zm1.27 3h3.609a.75.75 0 1 1 0 1.5h-2.973L13.57 9zm-2.754 2.5L8.038 4.785 5.261 11.5h5.555zm.62 1.5H4.641l-1.666 4.028H1.312l5.789-14h1.875l5.789 14h-1.663L11.436 13z"/></svg>';class REe extends Be{static get pluginName(){return"FontFamilyUI"}init(){const n=this.editor,e=n.t,i=this._getLocalizedOptions(),s=n.commands.get(Hr),r=e("Font Family"),o=MEe(i,s);n.ui.componentFactory.add(Hr,a=>{const l=Xs(a);return Ju(l,o,{role:"menu",ariaLabel:r}),l.buttonView.set({label:r,icon:K7,tooltip:!0}),l.extendTemplate({attributes:{class:"ck-font-family-dropdown"}}),l.bind("isEnabled").to(s),this.listenTo(l,"execute",c=>{n.execute(c.source.commandName,{value:c.source.commandParam}),n.editing.view.focus()}),l}),n.ui.componentFactory.add(`menuBar:${Hr}`,a=>{const l=new ko(a);l.buttonView.set({label:r,icon:K7}),l.bind("isEnabled").to(s);const c=new wh(a);for(const u of o){const d=new Rh(a,l),f=new Xi(a);f.set({role:"menuitemradio",isToggleable:!0}),f.bind(...Object.keys(u.model)).to(u.model),f.delegate("execute").to(l),f.on("execute",()=>{n.execute(u.model.commandName,{value:u.model.commandParam}),n.editing.view.focus()}),d.children.add(f),c.items.add(d)}return l.panelView.children.add(c),l})}_getLocalizedOptions(){const n=this.editor,e=n.t;return g$(n.config.get(Hr).options).map(s=>(s.title==="Default"&&(s.title=e("Default")),s))}}function MEe(t,n){const e=new _s;for(const i of t){const s={type:"button",model:new $u({commandName:Hr,commandParam:i.model,label:i.title,role:"menuitemradio",withText:!0})};s.model.bind("isOn").to(n,"value",r=>r===i.model?!0:!r||!i.model?!1:r.split(",")[0].replace(/'/g,"").toLowerCase()===i.model.toLowerCase()),i.view&&typeof i.view!="string"&&i.view.styles&&s.model.set("labelStyle",`font-family: ${i.view.styles["font-family"]}`),e.add(s)}return e}class PEe extends Be{static get requires(){return[IEe,REe]}static get pluginName(){return"FontFamily"}}class OEe extends ry{constructor(n){super(n,zr)}}function aS(t){return t.map(n=>LEe(n)).filter(n=>n!==void 0)}const G7={get tiny(){return{title:"Tiny",model:"tiny",view:{name:"span",classes:"text-tiny",priority:7}}},get small(){return{title:"Small",model:"small",view:{name:"span",classes:"text-small",priority:7}}},get big(){return{title:"Big",model:"big",view:{name:"span",classes:"text-big",priority:7}}},get huge(){return{title:"Huge",model:"huge",view:{name:"span",classes:"text-huge",priority:7}}}};function LEe(t){if(typeof t=="number"&&(t=String(t)),typeof t=="object"&&NEe(t))return ak(t);const n=FEe(t);if(n)return ak(n);if(t==="default")return{model:void 0,title:"Default"};if(!VEe(t))return BEe(t)}function BEe(t){return typeof t=="string"&&(t={title:t,model:`${parseFloat(t)}px`}),t.view={name:"span",styles:{"font-size":t.model}},ak(t)}function ak(t){return t.view&&typeof t.view!="string"&&!t.view.priority&&(t.view.priority=7),t}function FEe(t){return typeof t=="string"?G7[t]:G7[t.model]}function NEe(t){return t.title&&t.model&&t.view}function VEe(t){let n;if(typeof t=="object")if(t.model)n=parseFloat(t.model);else throw new fe("font-size-invalid-definition",null,t);else n=parseFloat(t);return isNaN(n)}const Y7=["x-small","x-small","small","medium","large","x-large","xx-large","xxx-large"];class DEe extends Be{static get pluginName(){return"FontSizeEditing"}constructor(n){super(n),n.config.define(zr,{options:["tiny","small","default","big","huge"],supportAllValues:!1})}init(){const n=this.editor;n.model.schema.extend("$text",{allowAttributes:zr}),n.model.schema.setAttributeProperties(zr,{isFormatting:!0,copyOnEnter:!0});const e=n.config.get("fontSize.supportAllValues"),i=aS(this.editor.config.get("fontSize.options")).filter(r=>r.model),s=f$(zr,i);e?(this._prepareAnyValueConverters(s),this._prepareCompatibilityConverter()):n.conversion.attributeToElement(s),n.commands.add(zr,new OEe(n))}_prepareAnyValueConverters(n){const e=this.editor,i=n.model.values.filter(s=>!Yw(String(s))&&!nD(String(s)));if(i.length)throw new fe("font-size-invalid-use-of-named-presets",null,{presets:i});e.conversion.for("downcast").attributeToElement({model:zr,view:(s,{writer:r})=>{if(s)return r.createAttributeElement("span",{style:"font-size:"+s},{priority:7})}}),e.conversion.for("upcast").elementToAttribute({model:{key:zr,value:s=>s.getStyle("font-size")},view:{name:"span",styles:{"font-size":/.*/}}})}_prepareCompatibilityConverter(){this.editor.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{size:/^[+-]?\d{1,3}$/}},model:{key:zr,value:e=>{const i=e.getAttribute("size"),s=i[0]==="-"||i[0]==="+";let r=parseInt(i,10);s&&(r=3+r);const o=Y7.length-1,a=Math.min(Math.max(r,0),o);return Y7[a]}}})}}var Z7='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.816 11.5 7.038 4.785 4.261 11.5h5.555zm.62 1.5H3.641l-1.666 4.028H.312l5.789-14h1.875l5.789 14h-1.663L10.436 13zm7.55 2.279.779-.779.707.707-2.265 2.265-2.193-2.265.707-.707.765.765V4.825c0-.042 0-.083.002-.123l-.77.77-.707-.707L17.207 2.5l2.265 2.265-.707.707-.782-.782c.002.043.003.089.003.135v10.454z"/></svg>';class $Ee extends Be{static get pluginName(){return"FontSizeUI"}init(){const n=this.editor,e=n.t,i=this._getLocalizedOptions(),s=n.commands.get(zr),r=e("Font Size"),o=zEe(i,s);n.ui.componentFactory.add(zr,a=>{const l=Xs(a);return Ju(l,o,{role:"menu",ariaLabel:r}),l.buttonView.set({label:r,icon:Z7,tooltip:!0}),l.extendTemplate({attributes:{class:["ck-font-size-dropdown"]}}),l.bind("isEnabled").to(s),this.listenTo(l,"execute",c=>{n.execute(c.source.commandName,{value:c.source.commandParam}),n.editing.view.focus()}),l}),n.ui.componentFactory.add(`menuBar:${zr}`,a=>{const l=new ko(a);l.buttonView.set({label:r,icon:Z7}),l.bind("isEnabled").to(s);const c=new wh(a);for(const u of o){const d=new Rh(a,l),f=new Xi(a);f.set({role:"menuitemradio",isToggleable:!0}),f.bind(...Object.keys(u.model)).to(u.model),f.delegate("execute").to(l),f.on("execute",()=>{n.execute(u.model.commandName,{value:u.model.commandParam}),n.editing.view.focus()}),d.children.add(f),c.items.add(d)}return l.panelView.children.add(c),l})}_getLocalizedOptions(){const n=this.editor,e=n.t,i={Default:e("Default"),Tiny:e("Tiny"),Small:e("Small"),Big:e("Big"),Huge:e("Huge")};return aS(n.config.get(zr).options).map(r=>{const o=i[r.title];return o&&o!=r.title&&(r=Object.assign({},r,{title:o})),r})}}function zEe(t,n){const e=new _s;for(const i of t){const s={type:"button",model:new $u({commandName:zr,commandParam:i.model,label:i.title,class:"ck-fontsize-option",role:"menuitemradio",withText:!0})};i.view&&typeof i.view!="string"&&(i.view.styles&&s.model.set("labelStyle",`font-size:${i.view.styles["font-size"]}`),i.view.classes&&s.model.set("class",`${s.model.class} ${i.view.classes}`)),s.model.bind("isOn").to(n,"value",r=>r===i.model),e.add(s)}return e}class HEe extends Be{static get requires(){return[DEe,$Ee]}static get pluginName(){return"FontSize"}normalizeSizeOptions(n){return aS(n)}}class UEe extends ry{constructor(n){super(n,dl)}}class WEe extends Be{static get pluginName(){return"FontColorEditing"}constructor(n){super(n),n.config.define(dl,{colors:[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}],columns:5}),n.conversion.for("upcast").elementToAttribute({view:{name:"span",styles:{color:/[\s\S]+/}},model:{key:dl,value:m$("color")}}),n.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{color:/^#?\w+$/}},model:{key:dl,value:e=>e.getAttribute("color")}}),n.conversion.for("downcast").attributeToElement({model:dl,view:p$("color")}),n.commands.add(dl,new UEe(n)),n.model.schema.extend("$text",{allowAttributes:dl}),n.model.schema.setAttributeProperties(dl,{isFormatting:!0,copyOnEnter:!0})}}class v$ extends Be{constructor(e,{commandName:i,componentName:s,icon:r,dropdownLabel:o}){super(e);w(this,"commandName");w(this,"componentName");w(this,"icon");w(this,"dropdownLabel");w(this,"columns");this.commandName=i,this.componentName=s,this.icon=r,this.dropdownLabel=o,this.columns=e.config.get(`${this.componentName}.columns`)}init(){const e=this.editor,i=e.locale,s=i.t,r=e.commands.get(this.commandName),o=e.config.get(this.componentName),a=h1(o.colors),l=d1(i,a),c=o.documentColors,u=o.colorPicker!==!1;e.ui.componentFactory.add(this.componentName,d=>{const f=Xs(d);let p=!1;const m=kEe({dropdownView:f,colors:l.map(v=>({label:v.label,color:v.model,options:{hasBorder:v.hasBorder}})),columns:this.columns,removeButtonLabel:s("Remove color"),colorPickerLabel:s("Color picker"),documentColorsLabel:c!==0?s("Document colors"):"",documentColorsCount:c===void 0?this.columns:c,colorPickerViewConfig:u?o.colorPicker||{}:!1});return m.bind("selectedColor").to(r,"value"),f.buttonView.set({label:this.dropdownLabel,icon:this.icon,tooltip:!0}),f.extendTemplate({attributes:{class:"ck-color-ui-dropdown"}}),f.bind("isEnabled").to(r),m.on("execute",(v,y)=>{f.isOpen&&e.execute(this.commandName,{value:y.value,batch:this._undoStepBatch}),y.source!=="colorPicker"&&e.editing.view.focus(),y.source==="colorPickerSaveButton"&&(f.isOpen=!1)}),m.on("colorPicker:show",()=>{this._undoStepBatch=e.model.createBatch()}),m.on("colorPicker:cancel",()=>{this._undoStepBatch.operations.length&&(f.isOpen=!1,e.execute("undo",this._undoStepBatch)),e.editing.view.focus()}),f.on("change:isOpen",(v,y,_)=>{p||(p=!0,f.colorSelectorView.appendUI()),_&&(c!==0&&m.updateDocumentColors(e.model,this.componentName),m.updateSelectedColors(),m.showColorGridsFragment())}),ny(f,()=>f.colorSelectorView.colorGridsFragmentView.staticColorsGrid.items.find(v=>v.isOn)),f}),e.ui.componentFactory.add(`menuBar:${this.componentName}`,d=>{const f=new ko(d);f.buttonView.set({label:this.dropdownLabel,icon:this.icon}),f.bind("isEnabled").to(r);let p=!1;const m=new JE(d,{colors:l.map(v=>({label:v.label,color:v.model,options:{hasBorder:v.hasBorder}})),columns:this.columns,removeButtonLabel:s("Remove color"),colorPickerLabel:s("Color picker"),documentColorsLabel:c!==0?s("Document colors"):"",documentColorsCount:c===void 0?this.columns:c,colorPickerViewConfig:!1});return m.bind("selectedColor").to(r,"value"),m.delegate("execute").to(f),m.on("execute",(v,y)=>{e.execute(this.commandName,{value:y.value,batch:this._undoStepBatch}),e.editing.view.focus()}),f.on("change:isOpen",(v,y,_)=>{p||(p=!0,m.appendUI()),_&&(c!==0&&m.updateDocumentColors(e.model,this.componentName),m.updateSelectedColors(),m.showColorGridsFragment())}),f.panelView.children.add(m),f})}}var jEe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.4 10.3 10 4.5l-2.4 5.8h4.8zm.5 1.2H7.1L5.7 15H4.2l5-12h1.6l5 12h-1.5L13 11.5zm3.1 7H4a1 1 0 0 1 0-2h12a1 1 0 0 1 0 2z"/></svg>';class qEe extends v${constructor(n){const e=n.locale.t;super(n,{commandName:dl,componentName:dl,icon:jEe,dropdownLabel:e("Font Color")})}static get pluginName(){return"FontColorUI"}}class KEe extends Be{static get requires(){return[WEe,qEe]}static get pluginName(){return"FontColor"}}class GEe extends ry{constructor(n){super(n,Ql)}}class YEe extends Be{static get pluginName(){return"FontBackgroundColorEditing"}constructor(n){super(n),n.config.define(Ql,{colors:[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}],columns:5}),n.data.addStyleProcessorRules(jE),n.conversion.for("upcast").elementToAttribute({view:{name:"span",styles:{"background-color":/[\s\S]+/}},model:{key:Ql,value:m$("background-color")}}),n.conversion.for("downcast").attributeToElement({model:Ql,view:p$("background-color")}),n.commands.add(Ql,new GEe(n)),n.model.schema.extend("$text",{allowAttributes:Ql}),n.model.schema.setAttributeProperties(Ql,{isFormatting:!0,copyOnEnter:!0})}}var ZEe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M4 2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2zm8.38 9.262H7.62L10 5.506l2.38 5.756zm.532 1.285L14.34 16h1.426L10.804 4H9.196L4.234 16H5.66l1.428-3.453h5.824z"/></svg>';class XEe extends v${constructor(n){const e=n.locale.t;super(n,{commandName:Ql,componentName:Ql,icon:ZEe,dropdownLabel:e("Font Background Color")})}static get pluginName(){return"FontBackgroundColorUI"}}class JEe extends Be{static get requires(){return[YEe,XEe]}static get pluginName(){return"FontBackgroundColor"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class QEe extends en{constructor(n){super(n),this._isEnabledBasedOnSelection=!1}refresh(){const n=this.editor.model,e=n.document,i=bs(e.selection.getSelectedBlocks());this.value=!!i&&i.is("element","paragraph"),this.isEnabled=!!i&&X7(i,n.schema)}execute(n={}){const e=this.editor.model,i=e.document,s=n.selection||i.selection;e.canEditAt(s)&&e.change(r=>{const o=s.getSelectedBlocks();for(const a of o)!a.is("element","paragraph")&&X7(a,e.schema)&&r.rename(a,"paragraph")})}}function X7(t,n){return n.checkChild(t.parent,"paragraph")&&!n.isObject(t)}class eSe extends en{constructor(n){super(n),this._isEnabledBasedOnSelection=!1}execute(n){const e=this.editor.model,i=n.attributes;let s=n.position;e.canEditAt(s)&&e.change(r=>{if(s=this._findPositionToInsertParagraph(s,r),!s)return;const o=r.createElement("paragraph");i&&e.schema.setAllowedAttributes(o,i,r),e.insertContent(o,s),r.setSelection(o,"in")})}_findPositionToInsertParagraph(n,e){const i=this.editor.model;if(i.schema.checkChild(n,"paragraph"))return n;const s=i.schema.findAllowedParent(n,"paragraph");if(!s)return null;const r=n.parent,o=i.schema.checkChild(r,"$text");return r.isEmpty||o&&n.isAtEnd?i.createPositionAfter(r):!r.isEmpty&&o&&n.isAtStart?i.createPositionBefore(r):e.split(n,s).position}}const tw=class tw extends Be{static get pluginName(){return"Paragraph"}init(){const n=this.editor,e=n.model;n.commands.add("paragraph",new QEe(n)),n.commands.add("insertParagraph",new eSe(n)),e.schema.register("paragraph",{inheritAllFrom:"$block"}),n.conversion.elementToElement({model:"paragraph",view:"p"}),n.conversion.for("upcast").elementToElement({model:(i,{writer:s})=>!tw.paragraphLikeElements.has(i.name)||i.isEmpty?null:s.createElement("paragraph"),view:/.+/,converterPriority:"low"})}};w(tw,"paragraphLikeElements",new Set(["blockquote","dd","div","dt","h1","h2","h3","h4","h5","h6","li","p","td","th"]));let M_=tw;/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class tSe extends en{constructor(e,i){super(e);w(this,"modelElements");this.modelElements=i}refresh(){const e=bs(this.editor.model.document.selection.getSelectedBlocks());this.value=!!e&&this.modelElements.includes(e.name)&&e.name,this.isEnabled=!!e&&this.modelElements.some(i=>J7(e,i,this.editor.model.schema))}execute(e){const i=this.editor.model,s=i.document,r=e.value;i.change(o=>{const a=Array.from(s.selection.getSelectedBlocks()).filter(l=>J7(l,r,i.schema));for(const l of a)l.is("element",r)||o.rename(l,r)})}}function J7(t,n,e){return e.checkChild(t.parent,n)&&!e.isObject(t)}const Q7="paragraph";class nSe extends Be{static get pluginName(){return"HeadingEditing"}constructor(n){super(n),n.config.define("heading",{options:[{model:"paragraph",title:"Paragraph",class:"ck-heading_paragraph"},{model:"heading1",view:"h2",title:"Heading 1",class:"ck-heading_heading1"},{model:"heading2",view:"h3",title:"Heading 2",class:"ck-heading_heading2"},{model:"heading3",view:"h4",title:"Heading 3",class:"ck-heading_heading3"}]})}static get requires(){return[M_]}init(){const n=this.editor,e=n.config.get("heading.options"),i=[];for(const s of e)s.model!=="paragraph"&&(n.model.schema.register(s.model,{inheritAllFrom:"$block"}),n.conversion.elementToElement(s),i.push(s.model));this._addDefaultH1Conversion(n),n.commands.add("heading",new tSe(n,i))}afterInit(){const n=this.editor,e=n.commands.get("enter"),i=n.config.get("heading.options");e&&this.listenTo(e,"afterExecute",(s,r)=>{const o=n.model.document.selection.getFirstPosition().parent;i.some(l=>o.is("element",l.model))&&!o.is("element",Q7)&&o.childCount===0&&r.writer.rename(o,Q7)})}_addDefaultH1Conversion(n){n.conversion.for("upcast").elementToElement({model:"heading1",view:"h1",converterPriority:Ru.low+1})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function iSe(t){const n=t.t,e={Paragraph:n("Paragraph"),"Heading 1":n("Heading 1"),"Heading 2":n("Heading 2"),"Heading 3":n("Heading 3"),"Heading 4":n("Heading 4"),"Heading 5":n("Heading 5"),"Heading 6":n("Heading 6")};return t.config.get("heading.options").map(i=>{const s=e[i.title];return s&&s!=i.title&&(i.title=s),i})}class sSe extends Be{static get pluginName(){return"HeadingUI"}init(){const n=this.editor,e=n.t,i=iSe(n),s=e("Choose heading"),r=e("Heading");n.ui.componentFactory.add("heading",o=>{const a={},l=new _s,c=n.commands.get("heading"),u=n.commands.get("paragraph"),d=[c];for(const p of i){const m={type:"button",model:new $u({label:p.title,class:p.class,role:"menuitemradio",withText:!0})};p.model==="paragraph"?(m.model.bind("isOn").to(u,"value"),m.model.set("commandName","paragraph"),d.push(u)):(m.model.bind("isOn").to(c,"value",v=>v===p.model),m.model.set({commandName:"heading",commandValue:p.model})),l.add(m),a[p.model]=p.title}const f=Xs(o);return Ju(f,l,{ariaLabel:r,role:"menu"}),f.buttonView.set({ariaLabel:r,ariaLabelledBy:void 0,isOn:!1,withText:!0,tooltip:r}),f.extendTemplate({attributes:{class:["ck-heading-dropdown"]}}),f.bind("isEnabled").toMany(d,"isEnabled",(...p)=>p.some(m=>m)),f.buttonView.bind("label").to(c,"value",u,"value",(p,m)=>{const v=m?"paragraph":p;return typeof v=="boolean"||!a[v]?s:a[v]}),f.buttonView.bind("ariaLabel").to(c,"value",u,"value",(p,m)=>{const v=m?"paragraph":p;return typeof v=="boolean"||!a[v]?r:`${a[v]}, ${r}`}),this.listenTo(f,"execute",p=>{const{commandName:m,commandValue:v}=p.source;n.execute(m,v?{value:v}:void 0),n.editing.view.focus()}),f}),n.ui.componentFactory.add("menuBar:heading",o=>{const a=new ko(o),l=n.commands.get("heading"),c=n.commands.get("paragraph"),u=[l],d=new wh(o);a.set({class:"ck-heading-dropdown"}),d.set({ariaLabel:e("Heading"),role:"menu"}),a.buttonView.set({label:e("Heading")}),a.panelView.children.add(d);for(const f of i){const p=new Rh(o,a),m=new Xi(o);p.children.add(m),d.items.add(p),m.set({isToggleable:!0,label:f.title,role:"menuitemradio",class:f.class}),m.delegate("execute").to(a),m.on("execute",()=>{const v=f.model==="paragraph"?"paragraph":"heading";n.execute(v,{value:f.model}),n.editing.view.focus()}),f.model==="paragraph"?(m.bind("isOn").to(c,"value"),u.push(c)):m.bind("isOn").to(l,"value",v=>v===f.model)}return a.bind("isEnabled").toMany(u,"isEnabled",(...f)=>f.some(p=>p)),a})}}class rSe extends Be{static get requires(){return[nSe,sSe]}static get pluginName(){return"Heading"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class oSe extends en{refresh(){const n=this.editor.model,e=n.schema,i=n.document.selection;this.isEnabled=aSe(i,e,n)}execute(){const n=this.editor.model;n.change(e=>{const i=e.createElement("horizontalLine");n.insertObject(i,null,null,{setSelection:"after"})})}}function aSe(t,n,e){const i=lSe(t,e);return n.checkChild(i,"horizontalLine")}function lSe(t,n){const i=sS(t,n).start.parent;return i.isEmpty&&!i.is("element","$root")?i.parent:i}class cSe extends Be{static get pluginName(){return"HorizontalLineEditing"}init(){const n=this.editor,e=n.model.schema,i=n.t,s=n.conversion;e.register("horizontalLine",{inheritAllFrom:"$blockObject"}),s.for("dataDowncast").elementToElement({model:"horizontalLine",view:(r,{writer:o})=>o.createEmptyElement("hr")}),s.for("editingDowncast").elementToStructure({model:"horizontalLine",view:(r,{writer:o})=>{const a=i("Horizontal line"),l=o.createContainerElement("div",null,o.createEmptyElement("hr"));return o.addClass("ck-horizontal-line",l),o.setCustomProperty("hr",!0,l),uSe(l,o,a)}}),s.for("upcast").elementToElement({view:"hr",model:"horizontalLine"}),n.commands.add("horizontalLine",new oSe(n))}}function uSe(t,n,e){return n.setCustomProperty("horizontalLine",!0,t),sy(t,n,{label:e})}class dSe extends Be{static get pluginName(){return"HorizontalLineUI"}init(){const n=this.editor;n.ui.componentFactory.add("horizontalLine",()=>{const e=this._createButton(Yt);return e.set({tooltip:!0}),e}),n.ui.componentFactory.add("menuBar:horizontalLine",()=>this._createButton(Xi))}_createButton(n){const e=this.editor,i=e.locale,s=e.commands.get("horizontalLine"),r=new n(e.locale),o=i.t;return r.set({label:o("Horizontal line"),icon:kt.horizontalLine}),r.bind("isEnabled").to(s,"isEnabled"),this.listenTo(r,"execute",()=>{e.execute("horizontalLine"),e.editing.view.focus()}),r}}class hSe extends Be{static get requires(){return[cSe,dSe,Fm]}static get pluginName(){return"HorizontalLine"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function fSe(t){return t.createContainerElement("span",{class:"image-inline"},t.createEmptyElement("img"))}function eR(t){return t.createContainerElement("figure",{class:"image"},[t.createEmptyElement("img"),t.createSlot("children")])}function b$(t,n){const e=t.plugins.get("ImageUtils"),i=t.plugins.has("ImageInlineEditing")&&t.plugins.has("ImageBlockEditing");return r=>e.isInlineImageView(r)?i&&(r.getStyle("display")=="block"||r.findAncestor(e.isBlockImageView)?"imageBlock":"imageInline")!==n?null:s(r):null;function s(r){const o={name:!0};return r.hasAttribute("src")&&(o.attributes=["src"]),o}}function lS(t,n){const e=bs(n.getSelectedBlocks());return!e||t.isObject(e)||e.isEmpty&&e.name!="listItem"?"imageBlock":"imageInline"}function P_(t){return t&&t.endsWith("px")?parseInt(t):null}function O_(t){const n=P_(t.getStyle("width")),e=P_(t.getStyle("height"));return!!(n&&e)}const mSe=/^(image|image-inline)$/;class pr extends Be{constructor(){super(...arguments);w(this,"_domEmitter",new(Rr()))}static get pluginName(){return"ImageUtils"}isImage(e){return this.isInlineImage(e)||this.isBlockImage(e)}isInlineImageView(e){return!!e&&e.is("element","img")}isBlockImageView(e){return!!e&&e.is("element","figure")&&e.hasClass("image")}insertImage(e={},i=null,s=null,r={}){const o=this.editor,a=o.model,l=a.document.selection,c=_$(o,i||l,s);e={...Object.fromEntries(l.getAttributes()),...e};for(const u in e)a.schema.checkAttribute(c,u)||delete e[u];return a.change(u=>{const{setImageSizes:d=!0}=r,f=u.createElement(c,e);return a.insertObject(f,i,null,{setSelection:"on",findOptimalPosition:!i&&c!="imageInline"?"auto":void 0}),f.parent?(d&&this.setImageNaturalSizeAttributes(f),f):null})}setImageNaturalSizeAttributes(e){const i=e.getAttribute("src");i&&(e.getAttribute("width")||e.getAttribute("height")||this.editor.model.change(s=>{const r=new $t.window.Image;this._domEmitter.listenTo(r,"load",()=>{!e.getAttribute("width")&&!e.getAttribute("height")&&this.editor.model.enqueueChange(s.batch,o=>{o.setAttribute("width",r.naturalWidth,e),o.setAttribute("height",r.naturalHeight,e)}),this._domEmitter.stopListening(r,"load")}),r.src=i}))}getClosestSelectedImageWidget(e){const i=e.getFirstPosition();if(!i)return null;const s=e.getSelectedElement();if(s&&this.isImageWidget(s))return s;let r=i.parent;for(;r;){if(r.is("element")&&this.isImageWidget(r))return r;r=r.parent}return null}getClosestSelectedImageElement(e){const i=e.getSelectedElement();return this.isImage(i)?i:e.getFirstPosition().findAncestor("imageBlock")}getImageWidgetFromImageView(e){return e.findAncestor({classes:mSe})}isImageAllowed(){const i=this.editor.model.document.selection;return pSe(this.editor,i)&&gSe(i)}toImageWidget(e,i,s){return i.setCustomProperty("image",!0,e),sy(e,i,{label:()=>{const a=this.findViewImgElement(e).getAttribute("alt");return a?`${a} ${s}`:s}})}isImageWidget(e){return!!e.getCustomProperty("image")&&ps(e)}isBlockImage(e){return!!e&&e.is("element","imageBlock")}isInlineImage(e){return!!e&&e.is("element","imageInline")}findViewImgElement(e){if(this.isInlineImageView(e))return e;const i=this.editor.editing.view;for(const{item:s}of i.createRangeIn(e))if(this.isInlineImageView(s))return s}destroy(){return this._domEmitter.stopListening(),super.destroy()}}function pSe(t,n){if(_$(t,n,null)=="imageBlock"){const i=vSe(n,t.model);if(t.model.schema.checkChild(i,"imageBlock"))return!0}else if(t.model.schema.checkChild(n.focus,"imageInline"))return!0;return!1}function gSe(t){return[...t.focus.getAncestors()].every(n=>!n.is("element","imageBlock"))}function vSe(t,n){const i=sS(t,n).start.parent;return i.isEmpty&&!i.is("element","$root")?i.parent:i}function _$(t,n,e){const i=t.model.schema,s=t.config.get("image.insert.type");return t.plugins.has("ImageBlockEditing")?t.plugins.has("ImageInlineEditing")?e||(s==="inline"?"imageInline":s!=="auto"?"imageBlock":n.is("selection")?lS(i,n):i.checkChild(n,"imageInline")?"imageInline":"imageBlock"):"imageBlock":"imageInline"}const bSe=new RegExp(String(/^(http(s)?:\/\/)?[\w-]+\.[\w.~:/[\]@!$&'()*+,;=%-]+/.source+/\.(jpg|jpeg|png|gif|ico|webp|JPG|JPEG|PNG|GIF|ICO|WEBP)/.source+/(\?[\w.~:/[\]@!$&'()*+,;=%-]*)?/.source+/(#[\w.~:/[\]@!$&'()*+,;=%-]*)?$/.source));class _Se extends Be{constructor(e){super(e);w(this,"_timeoutId");w(this,"_positionToInsert");this._timeoutId=null,this._positionToInsert=null}static get requires(){return[l$,pr,oS,Mh]}static get pluginName(){return"AutoImage"}init(){const e=this.editor,i=e.model.document,s=e.plugins.get("ClipboardPipeline");this.listenTo(s,"inputTransformation",()=>{const r=i.selection.getFirstRange(),o=Ks.fromPosition(r.start);o.stickiness="toPrevious";const a=Ks.fromPosition(r.end);a.stickiness="toNext",i.once("change:data",()=>{this._embedImageBetweenPositions(o,a),o.detach(),a.detach()},{priority:"high"})}),e.commands.get("undo").on("execute",()=>{this._timeoutId&&($t.window.clearTimeout(this._timeoutId),this._positionToInsert.detach(),this._timeoutId=null,this._positionToInsert=null)},{priority:"high"})}_embedImageBetweenPositions(e,i){const s=this.editor,r=new Kr(e,i),o=r.getWalker({ignoreElementEnd:!0}),a=Object.fromEntries(s.model.document.selection.getAttributes()),l=this.editor.plugins.get("ImageUtils");let c="";for(const u of o)u.item.is("$textProxy")&&(c+=u.item.data);if(c=c.trim(),!c.match(bSe)){r.detach();return}this._positionToInsert=Ks.fromPosition(e),this._timeoutId=setTimeout(()=>{if(!s.commands.get("insertImage").isEnabled){r.detach();return}s.model.change(f=>{this._timeoutId=null,f.remove(r),r.detach();let p;this._positionToInsert.root.rootName!=="$graveyard"&&(p=this._positionToInsert.toPosition()),l.insertImage({...a,src:c},p),this._positionToInsert.detach(),this._positionToInsert=null}),s.plugins.get("Delete").requestUndoOnBackspace()},100)}}class wSe extends en{refresh(){const i=this.editor.plugins.get("ImageUtils").getClosestSelectedImageElement(this.editor.model.document.selection);this.isEnabled=!!i,this.isEnabled&&i.hasAttribute("alt")?this.value=i.getAttribute("alt"):this.value=!1}execute(n){const e=this.editor,i=e.plugins.get("ImageUtils"),s=e.model,r=i.getClosestSelectedImageElement(s.document.selection);s.change(o=>{o.setAttribute("alt",n.newValue,r)})}}class ySe extends Be{static get requires(){return[pr]}static get pluginName(){return"ImageTextAlternativeEditing"}init(){this.editor.commands.add("imageTextAlternative",new wSe(this.editor))}}class CSe extends Rt{constructor(e){super(e);w(this,"focusTracker");w(this,"keystrokes");w(this,"labeledInput");w(this,"saveButtonView");w(this,"cancelButtonView");w(this,"_focusables");w(this,"_focusCycler");const i=this.locale.t;this.focusTracker=new Bi,this.keystrokes=new Zi,this.labeledInput=this._createLabeledInputView(),this.saveButtonView=this._createButton(i("Save"),kt.check,"ck-button-save"),this.saveButtonView.type="submit",this.cancelButtonView=this._createButton(i("Cancel"),kt.cancel,"ck-button-cancel","cancel"),this._focusables=new Us,this._focusCycler=new Js({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"form",attributes:{class:["ck","ck-text-alternative-form","ck-responsive-form"],tabindex:"-1"},children:[this.labeledInput,this.saveButtonView,this.cancelButtonView]})}render(){super.render(),this.keystrokes.listenTo(this.element),Ih({view:this}),[this.labeledInput,this.saveButtonView,this.cancelButtonView].forEach(e=>{this._focusables.add(e),this.focusTracker.add(e.element)})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createButton(e,i,s,r){const o=new Yt(this.locale);return o.set({label:e,icon:i,tooltip:!0}),o.extendTemplate({attributes:{class:s}}),r&&o.delegate("execute").to(this,r),o}_createLabeledInputView(){const e=this.locale.t,i=new ms(this.locale,Jo);return i.label=e("Text alternative"),i}}function kSe(t){const n=t.plugins.get("ContextualBalloon");if(t.plugins.get("ImageUtils").getClosestSelectedImageWidget(t.editing.view.document.selection)){const i=cS(t);n.updatePosition(i)}}function cS(t){const n=t.editing.view,e=Vs.defaultPositions,i=t.plugins.get("ImageUtils");return{target:n.domConverter.mapViewToDom(i.getClosestSelectedImageWidget(n.document.selection)),positions:[e.northArrowSouth,e.northArrowSouthWest,e.northArrowSouthEast,e.southArrowNorth,e.southArrowNorthWest,e.southArrowNorthEast,e.viewportStickyNorth]}}class ESe extends Be{constructor(){super(...arguments);w(this,"_balloon");w(this,"_form")}static get requires(){return[Mo]}static get pluginName(){return"ImageTextAlternativeUI"}init(){this._createButton()}destroy(){super.destroy(),this._form&&this._form.destroy()}_createButton(){const e=this.editor,i=e.t;e.ui.componentFactory.add("imageTextAlternative",s=>{const r=e.commands.get("imageTextAlternative"),o=new Yt(s);return o.set({label:i("Change image text alternative"),icon:kt.textAlternative,tooltip:!0}),o.bind("isEnabled").to(r,"isEnabled"),o.bind("isOn").to(r,"value",a=>!!a),this.listenTo(o,"execute",()=>{this._showForm()}),o})}_createForm(){const e=this.editor,s=e.editing.view.document,r=e.plugins.get("ImageUtils");this._balloon=this.editor.plugins.get("ContextualBalloon"),this._form=new(Zw(CSe))(e.locale),this._form.render(),this.listenTo(this._form,"submit",()=>{e.execute("imageTextAlternative",{newValue:this._form.labeledInput.fieldView.element.value}),this._hideForm(!0)}),this.listenTo(this._form,"cancel",()=>{this._hideForm(!0)}),this._form.keystrokes.set("Esc",(o,a)=>{this._hideForm(!0),a()}),this.listenTo(e.ui,"update",()=>{r.getClosestSelectedImageWidget(s.selection)?this._isVisible&&kSe(e):this._hideForm(!0)}),Xu({emitter:this._form,activator:()=>this._isVisible,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideForm()})}_showForm(){if(this._isVisible)return;this._form||this._createForm();const e=this.editor,i=e.commands.get("imageTextAlternative"),s=this._form.labeledInput;this._form.disableCssTransitions(),this._isInBalloon||this._balloon.add({view:this._form,position:cS(e)}),s.fieldView.value=s.fieldView.element.value=i.value||"",this._form.labeledInput.fieldView.select(),this._form.enableCssTransitions()}_hideForm(e=!1){this._isInBalloon&&(this._form.focusTracker.isFocused&&this._form.saveButtonView.focus(),this._balloon.remove(this._form),e&&this.editor.editing.view.focus())}get _isVisible(){return!!this._balloon&&this._balloon.visibleView===this._form}get _isInBalloon(){return!!this._balloon&&this._balloon.hasView(this._form)}}class uS extends Be{static get requires(){return[ySe,ESe]}static get pluginName(){return"ImageTextAlternative"}}function SSe(t){const n=(e,i,s)=>{if(!s.consumable.test(i.viewItem,{name:!0,classes:"image"}))return;const r=t.findViewImgElement(i.viewItem);if(!r||!s.consumable.test(r,{name:!0}))return;s.consumable.consume(i.viewItem,{name:!0,classes:"image"});const o=s.convertItem(r,i.modelCursor),a=bs(o.modelRange.getItems());if(!a){s.consumable.revert(i.viewItem,{name:!0,classes:"image"});return}s.convertChildren(i.viewItem,a),s.updateConversionResult(a,i)};return e=>{e.on("element:figure",n)}}function w$(t,n){const e=(i,s,r)=>{if(!r.consumable.consume(s.item,i.name))return;const o=r.writer,a=r.mapper.toViewElement(s.item),l=t.findViewImgElement(a);s.attributeNewValue===null?(o.removeAttribute("srcset",l),o.removeAttribute("sizes",l)):s.attributeNewValue&&(o.setAttribute("srcset",s.attributeNewValue,l),o.setAttribute("sizes","100vw",l))};return i=>{i.on(`attribute:srcset:${n}`,e)}}function L_(t,n,e){const i=(s,r,o)=>{if(!o.consumable.consume(r.item,s.name))return;const a=o.writer,l=o.mapper.toViewElement(r.item),c=t.findViewImgElement(l);a.setAttribute(r.attributeKey,r.attributeNewValue||"",c)};return s=>{s.on(`attribute:${e}:${n}`,i)}}class dS extends Rl{observe(n){this.listenTo(n,"load",(e,i)=>{const s=i.target;this.checkShouldIgnoreEventFromTarget(s)||s.tagName=="IMG"&&this._fireEvents(i)},{useCapture:!0})}stopObserving(n){this.stopListening(n)}_fireEvents(n){this.isEnabled&&(this.document.fire("layoutChanged"),this.document.fire("imageLoaded",n))}}class TSe extends en{constructor(n){super(n);const e=n.config.get("image.insert.type");n.plugins.has("ImageBlockEditing")||e==="block"&&qn("image-block-plugin-required"),n.plugins.has("ImageInlineEditing")||e==="inline"&&qn("image-inline-plugin-required")}refresh(){const n=this.editor.plugins.get("ImageUtils");this.isEnabled=n.isImageAllowed()}execute(n){const e=Si(n.source),i=this.editor.model.document.selection,s=this.editor.plugins.get("ImageUtils"),r=Object.fromEntries(i.getAttributes());e.forEach((o,a)=>{const l=i.getSelectedElement();if(typeof o=="string"&&(o={src:o}),a&&l&&s.isImage(l)){const c=this.editor.model.createPositionAfter(l);s.insertImage({...o,...r},c)}else s.insertImage({...o,...r})})}}class xSe extends en{constructor(n){super(n),this.decorate("cleanupImage")}refresh(){const e=this.editor.plugins.get("ImageUtils"),i=this.editor.model.document.selection.getSelectedElement();this.isEnabled=e.isImage(i),this.value=this.isEnabled?i.getAttribute("src"):null}execute(n){const e=this.editor.model.document.selection.getSelectedElement(),i=this.editor.plugins.get("ImageUtils");this.editor.model.change(s=>{s.setAttribute("src",n.source,e),this.cleanupImage(s,e),i.setImageNaturalSizeAttributes(e)})}cleanupImage(n,e){n.removeAttribute("srcset",e),n.removeAttribute("sizes",e),n.removeAttribute("sources",e),n.removeAttribute("width",e),n.removeAttribute("height",e),n.removeAttribute("alt",e)}}class y$ extends Be{static get requires(){return[pr]}static get pluginName(){return"ImageEditing"}init(){const n=this.editor,e=n.conversion;n.editing.view.addObserver(dS),e.for("upcast").attributeToAttribute({view:{name:"img",key:"alt"},model:"alt"}).attributeToAttribute({view:{name:"img",key:"srcset"},model:"srcset"});const i=new TSe(n),s=new xSe(n);n.commands.add("insertImage",i),n.commands.add("replaceImageSource",s),n.commands.add("imageInsert",i)}}class C$ extends Be{static get requires(){return[pr]}static get pluginName(){return"ImageSizeAttributes"}afterInit(){this._registerSchema(),this._registerConverters("imageBlock"),this._registerConverters("imageInline")}_registerSchema(){this.editor.plugins.has("ImageBlockEditing")&&this.editor.model.schema.extend("imageBlock",{allowAttributes:["width","height"]}),this.editor.plugins.has("ImageInlineEditing")&&this.editor.model.schema.extend("imageInline",{allowAttributes:["width","height"]})}_registerConverters(n){const e=this.editor,i=e.plugins.get("ImageUtils"),s=n==="imageBlock"?"figure":"img";e.conversion.for("upcast").attributeToAttribute({view:{name:s,styles:{width:/.+/}},model:{key:"width",value:o=>O_(o)?P_(o.getStyle("width")):null}}).attributeToAttribute({view:{name:s,key:"width"},model:"width"}).attributeToAttribute({view:{name:s,styles:{height:/.+/}},model:{key:"height",value:o=>O_(o)?P_(o.getStyle("height")):null}}).attributeToAttribute({view:{name:s,key:"height"},model:"height"}),e.conversion.for("editingDowncast").add(o=>{r(o,"width","width",!0),r(o,"height","height",!0)}),e.conversion.for("dataDowncast").add(o=>{r(o,"width","width",!1),r(o,"height","height",!1)});function r(o,a,l,c){o.on(`attribute:${a}:${n}`,(u,d,f)=>{if(!f.consumable.consume(d.item,u.name))return;const p=f.writer,m=f.mapper.toViewElement(d.item),v=i.findViewImgElement(m);if(d.attributeNewValue!==null?p.setAttribute(l,d.attributeNewValue,v):p.removeAttribute(l,v),d.item.hasAttribute("sources"))return;const y=d.item.hasAttribute("resizedWidth");if(n==="imageInline"&&!y&&!c)return;const _=d.item.getAttribute("width"),b=d.item.getAttribute("height");_&&b&&p.setStyle("aspect-ratio",`${_}/${b}`,v)})}}}class k$ extends en{constructor(e,i){super(e);w(this,"_modelElementName");this._modelElementName=i}refresh(){const i=this.editor.plugins.get("ImageUtils"),s=i.getClosestSelectedImageElement(this.editor.model.document.selection);this._modelElementName==="imageBlock"?this.isEnabled=i.isInlineImage(s):this.isEnabled=i.isBlockImage(s)}execute(e={}){const i=this.editor,s=this.editor.model,r=i.plugins.get("ImageUtils"),o=r.getClosestSelectedImageElement(s.document.selection),a=Object.fromEntries(o.getAttributes());return!a.src&&!a.uploadId?null:s.change(l=>{const{setImageSizes:c=!0}=e,u=Array.from(s.markers).filter(p=>p.getRange().containsItem(o)),d=r.insertImage(a,s.createSelection(o,"on"),this._modelElementName,{setImageSizes:c});if(!d)return null;const f=l.createRangeOn(d);for(const p of u){const m=p.getRange(),v=m.root.rootName!="$graveyard"?m.getJoined(f,!0):f;l.updateMarker(p,{range:v})}return{oldElement:o,newElement:d}})}}class E$ extends Be{static get requires(){return[pr]}static get pluginName(){return"ImagePlaceholder"}afterInit(){this._setupSchema(),this._setupConversion(),this._setupLoadListener()}_setupSchema(){const n=this.editor.model.schema;n.isRegistered("imageBlock")&&n.extend("imageBlock",{allowAttributes:["placeholder"]}),n.isRegistered("imageInline")&&n.extend("imageInline",{allowAttributes:["placeholder"]})}_setupConversion(){const n=this.editor,e=n.conversion,i=n.plugins.get("ImageUtils");e.for("editingDowncast").add(s=>{s.on("attribute:placeholder",(r,o,a)=>{if(!a.consumable.test(o.item,r.name)||!o.item.is("element","imageBlock")&&!o.item.is("element","imageInline"))return;a.consumable.consume(o.item,r.name);const l=a.writer,c=a.mapper.toViewElement(o.item),u=i.findViewImgElement(c);o.attributeNewValue?(l.addClass("image_placeholder",u),l.setStyle("background-image",`url(${o.attributeNewValue})`,u),l.setCustomProperty("editingPipeline:doNotReuseOnce",!0,u)):(l.removeClass("image_placeholder",u),l.removeStyle("background-image",u))})})}_setupLoadListener(){const n=this.editor,e=n.model,i=n.editing,s=i.view,r=n.plugins.get("ImageUtils");s.addObserver(dS),this.listenTo(s.document,"imageLoaded",(o,a)=>{const l=s.domConverter.mapDomToView(a.target);if(!l)return;const c=r.getImageWidgetFromImageView(l);if(!c)return;const u=i.mapper.toModelElement(c);!u||!u.hasAttribute("placeholder")||e.enqueueChange({isUndoable:!1},d=>{d.removeAttribute("placeholder",u)})})}}class S$ extends Be{static get requires(){return[y$,C$,pr,E$,da]}static get pluginName(){return"ImageBlockEditing"}init(){const n=this.editor;n.model.schema.register("imageBlock",{inheritAllFrom:"$blockObject",allowAttributes:["alt","src","srcset"]}),this._setupConversion(),n.plugins.has("ImageInlineEditing")&&(n.commands.add("imageTypeBlock",new k$(this.editor,"imageBlock")),this._setupClipboardIntegration())}_setupConversion(){const n=this.editor,e=n.t,i=n.conversion,s=n.plugins.get("ImageUtils");i.for("dataDowncast").elementToStructure({model:"imageBlock",view:(r,{writer:o})=>eR(o)}),i.for("editingDowncast").elementToStructure({model:"imageBlock",view:(r,{writer:o})=>s.toImageWidget(eR(o),o,e("image widget"))}),i.for("downcast").add(L_(s,"imageBlock","src")).add(L_(s,"imageBlock","alt")).add(w$(s,"imageBlock")),i.for("upcast").elementToElement({view:b$(n,"imageBlock"),model:(r,{writer:o})=>o.createElement("imageBlock",r.hasAttribute("src")?{src:r.getAttribute("src")}:void 0)}).add(SSe(s))}_setupClipboardIntegration(){const n=this.editor,e=n.model,i=n.editing.view,s=n.plugins.get("ImageUtils"),r=n.plugins.get("ClipboardPipeline");this.listenTo(r,"inputTransformation",(o,a)=>{const l=Array.from(a.content.getChildren());let c;if(!l.every(s.isInlineImageView))return;a.targetRanges?c=n.editing.mapper.toModelRange(a.targetRanges[0]):c=e.document.selection.getFirstRange();const u=e.createSelection(c);if(lS(e.schema,u)==="imageBlock"){const d=new Zu(i.document),f=l.map(p=>d.createElement("figure",{class:"image"},p));a.content=d.createDocumentFragment(f)}}),this.listenTo(r,"contentInsertion",(o,a)=>{a.method==="paste"&&e.change(l=>{const c=l.createRangeIn(a.content);for(const u of c.getItems())u.is("element","imageBlock")&&s.setImageNaturalSizeAttributes(u)})})}}class ASe extends Rt{constructor(e,i=[]){super(e);w(this,"focusTracker");w(this,"keystrokes");w(this,"_focusables");w(this,"_focusCycler");w(this,"children");this.focusTracker=new Bi,this.keystrokes=new Zi,this._focusables=new Us,this.children=this.createCollection(),this._focusCycler=new Js({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}});for(const s of i)this.children.add(s),this._focusables.add(s),s instanceof YE&&this._focusables.addMany(s.children);this.setTemplate({tag:"form",attributes:{class:["ck","ck-image-insert-form"],tabindex:-1},children:this.children})}render(){super.render(),Ih({view:this});for(const i of this._focusables)this.focusTracker.add(i.element);this.keystrokes.listenTo(this.element);const e=i=>i.stopPropagation();this.keystrokes.set("arrowright",e),this.keystrokes.set("arrowleft",e),this.keystrokes.set("arrowup",e),this.keystrokes.set("arrowdown",e)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}}class G1 extends Be{constructor(e){super(e);w(this,"dropdownView");w(this,"_integrations",new Map);e.config.define("image.insert.integrations",["upload","assetManager","url"])}static get pluginName(){return"ImageInsertUI"}static get requires(){return[pr]}init(){const e=this.editor,i=e.model.document.selection,s=e.plugins.get("ImageUtils");this.set("isImageSelected",!1),this.listenTo(e.model.document,"change",()=>{this.isImageSelected=s.isImage(i.getSelectedElement())});const r=a=>this._createToolbarComponent(a),o=a=>this._createMenuBarComponent(a);e.ui.componentFactory.add("insertImage",r),e.ui.componentFactory.add("imageInsert",r),e.ui.componentFactory.add("menuBar:insertImage",o)}registerIntegration({name:e,observable:i,buttonViewCreator:s,formViewCreator:r,menuBarButtonViewCreator:o,requiresForm:a=!1}){this._integrations.has(e)&&qn("image-insert-integration-exists",{name:e}),this._integrations.set(e,{observable:i,buttonViewCreator:s,menuBarButtonViewCreator:o,formViewCreator:r,requiresForm:a})}_createToolbarComponent(e){const i=this.editor,s=e.t,r=this._prepareIntegrations();if(!r.length)return null;let o;const a=r[0];if(r.length==1){if(!a.requiresForm)return a.buttonViewCreator(!0);o=a.buttonViewCreator(!0)}else{const u=a.buttonViewCreator(!1);o=new K1(e,u),o.tooltip=!0,o.bind("label").to(this,"isImageSelected",d=>s(d?"Replace image":"Insert image"))}const l=this.dropdownView=Xs(e,o),c=r.map(({observable:u})=>typeof u=="function"?u():u);return l.bind("isEnabled").toMany(c,"isEnabled",(...u)=>u.some(d=>d)),l.once("change:isOpen",()=>{const u=r.map(({formViewCreator:f})=>f(r.length==1)),d=new ASe(i.locale,u);l.panelView.children.add(d)}),l}_createMenuBarComponent(e){const i=e.t,s=this._prepareIntegrations();if(!s.length)return null;let r;const o=s[0];if(s.length==1)r=o.menuBarButtonViewCreator(!0);else{r=new ko(e);const a=new wh(e);r.panelView.children.add(a),r.buttonView.set({icon:kt.image,label:i("Image")});for(const l of s){const c=new Rh(e,r),u=l.menuBarButtonViewCreator(!1);c.children.add(u),a.items.add(c)}}return r}_prepareIntegrations(){const i=this.editor.config.get("image.insert.integrations"),s=[];if(!i.length)return qn("image-insert-integrations-not-specified"),s;for(const r of i){if(!this._integrations.has(r)){["upload","assetManager","url"].includes(r)||qn("image-insert-unknown-integration",{item:r});continue}s.push(this._integrations.get(r))}return s.length||qn("image-insert-integrations-not-registered"),s}}class ISe extends Be{static get requires(){return[S$,Fm,uS,G1]}static get pluginName(){return"ImageBlock"}}class RSe extends Be{static get requires(){return[y$,C$,pr,E$,da]}static get pluginName(){return"ImageInlineEditing"}init(){const n=this.editor;n.model.schema.register("imageInline",{inheritAllFrom:"$inlineObject",allowAttributes:["alt","src","srcset"],disallowIn:["caption"]}),this._setupConversion(),n.plugins.has("ImageBlockEditing")&&(n.commands.add("imageTypeInline",new k$(this.editor,"imageInline")),this._setupClipboardIntegration())}_setupConversion(){const n=this.editor,e=n.t,i=n.conversion,s=n.plugins.get("ImageUtils");i.for("dataDowncast").elementToElement({model:"imageInline",view:(r,{writer:o})=>o.createEmptyElement("img")}),i.for("editingDowncast").elementToStructure({model:"imageInline",view:(r,{writer:o})=>s.toImageWidget(fSe(o),o,e("image widget"))}),i.for("downcast").add(L_(s,"imageInline","src")).add(L_(s,"imageInline","alt")).add(w$(s,"imageInline")),i.for("upcast").elementToElement({view:b$(n,"imageInline"),model:(r,{writer:o})=>o.createElement("imageInline",r.hasAttribute("src")?{src:r.getAttribute("src")}:void 0)})}_setupClipboardIntegration(){const n=this.editor,e=n.model,i=n.editing.view,s=n.plugins.get("ImageUtils"),r=n.plugins.get("ClipboardPipeline");this.listenTo(r,"inputTransformation",(o,a)=>{const l=Array.from(a.content.getChildren());let c;if(!l.every(s.isBlockImageView))return;a.targetRanges?c=n.editing.mapper.toModelRange(a.targetRanges[0]):c=e.document.selection.getFirstRange();const u=e.createSelection(c);if(lS(e.schema,u)==="imageInline"){const d=new Zu(i.document),f=l.map(p=>p.childCount===1?(Array.from(p.getAttributes()).forEach(m=>d.setAttribute(...m,s.findViewImgElement(p))),p.getChild(0)):p);a.content=d.createDocumentFragment(f)}}),this.listenTo(r,"contentInsertion",(o,a)=>{a.method==="paste"&&e.change(l=>{const c=l.createRangeIn(a.content);for(const u of c.getItems())u.is("element","imageInline")&&s.setImageNaturalSizeAttributes(u)})})}}class MSe extends Be{static get requires(){return[RSe,Fm,uS,G1]}static get pluginName(){return"ImageInline"}}class T$ extends Be{static get pluginName(){return"ImageCaptionUtils"}static get requires(){return[pr]}getCaptionFromImageModelElement(n){for(const e of n.getChildren())if(e&&e.is("element","caption"))return e;return null}getCaptionFromModelSelection(n){const e=this.editor.plugins.get("ImageUtils"),i=n.getFirstPosition().findAncestor("caption");return i&&e.isBlockImage(i.parent)?i:null}matchImageCaptionViewElement(n){const e=this.editor.plugins.get("ImageUtils");return n.name=="figcaption"&&e.isBlockImageView(n.parent)?{name:!0}:null}}class PSe extends en{refresh(){const n=this.editor,e=n.plugins.get("ImageCaptionUtils"),i=n.plugins.get("ImageUtils");if(!n.plugins.has(S$)){this.isEnabled=!1,this.value=!1;return}const s=n.model.document.selection,r=s.getSelectedElement();if(!r){const o=e.getCaptionFromModelSelection(s);this.isEnabled=!!o,this.value=!!o;return}this.isEnabled=i.isImage(r),this.isEnabled?this.value=!!e.getCaptionFromImageModelElement(r):this.value=!1}execute(n={}){const{focusCaptionOnShow:e}=n;this.editor.model.change(i=>{this.value?this._hideImageCaption(i):this._showImageCaption(i,e)})}_showImageCaption(n,e){const s=this.editor.model.document.selection,r=this.editor.plugins.get("ImageCaptionEditing"),o=this.editor.plugins.get("ImageUtils");let a=s.getSelectedElement();const l=r._getSavedCaption(a);o.isInlineImage(a)&&(this.editor.execute("imageTypeBlock"),a=s.getSelectedElement());const c=l||n.createElement("caption");n.append(c,a),e&&n.setSelection(c,"in")}_hideImageCaption(n){const e=this.editor,i=e.model.document.selection,s=e.plugins.get("ImageCaptionEditing"),r=e.plugins.get("ImageCaptionUtils");let o=i.getSelectedElement(),a;o?a=r.getCaptionFromImageModelElement(o):(a=r.getCaptionFromModelSelection(i),o=a.parent),s._saveCaption(o,a),n.setSelection(o,"on"),n.remove(a)}}class OSe extends Be{constructor(e){super(e);w(this,"_savedCaptionsMap");this._savedCaptionsMap=new WeakMap}static get requires(){return[pr,T$]}static get pluginName(){return"ImageCaptionEditing"}init(){const e=this.editor,i=e.model.schema;i.isRegistered("caption")?i.extend("caption",{allowIn:"imageBlock"}):i.register("caption",{allowIn:"imageBlock",allowContentOf:"$block",isLimit:!0}),e.commands.add("toggleImageCaption",new PSe(this.editor)),this._setupConversion(),this._setupImageTypeCommandsIntegration(),this._registerCaptionReconversion()}_setupConversion(){const e=this.editor,i=e.editing.view,s=e.plugins.get("ImageUtils"),r=e.plugins.get("ImageCaptionUtils"),o=e.t;e.conversion.for("upcast").elementToElement({view:a=>r.matchImageCaptionViewElement(a),model:"caption"}),e.conversion.for("dataDowncast").elementToElement({model:"caption",view:(a,{writer:l})=>s.isBlockImage(a.parent)?l.createContainerElement("figcaption"):null}),e.conversion.for("editingDowncast").elementToElement({model:"caption",view:(a,{writer:l})=>{if(!s.isBlockImage(a.parent))return null;const c=l.createEditableElement("figcaption");l.setCustomProperty("imageCaption",!0,c),c.placeholder=o("Enter image caption"),LE({view:i,element:c,keepOnFocus:!0});const u=a.parent.getAttribute("alt"),d=u?o("Caption for image: %0",[u]):o("Caption for the image");return iS(c,l,{label:d})}})}_setupImageTypeCommandsIntegration(){const e=this.editor,i=e.plugins.get("ImageUtils"),s=e.plugins.get("ImageCaptionUtils"),r=e.commands.get("imageTypeInline"),o=e.commands.get("imageTypeBlock"),a=l=>{if(!l.return)return;const{oldElement:c,newElement:u}=l.return;/* istanbul ignore if: paranoid check -- @preserve */if(!c)return;if(i.isBlockImage(c)){const f=s.getCaptionFromImageModelElement(c);if(f){this._saveCaption(u,f);return}}const d=this._getSavedCaption(c);d&&this._saveCaption(u,d)};r&&this.listenTo(r,"execute",a,{priority:"low"}),o&&this.listenTo(o,"execute",a,{priority:"low"})}_getSavedCaption(e){const i=this._savedCaptionsMap.get(e);return i?Hi.fromJSON(i):null}_saveCaption(e,i){this._savedCaptionsMap.set(e,i.toJSON())}_registerCaptionReconversion(){const e=this.editor,i=e.model,s=e.plugins.get("ImageUtils"),r=e.plugins.get("ImageCaptionUtils");i.document.on("change:data",()=>{const o=i.document.differ.getChanges();for(const a of o){if(a.attributeKey!=="alt")continue;const l=a.range.start.nodeAfter;if(s.isBlockImage(l)){const c=r.getCaptionFromImageModelElement(l);if(!c)return;e.editing.reconvertItem(c)}}})}}class LSe extends Be{static get requires(){return[T$]}static get pluginName(){return"ImageCaptionUI"}init(){const n=this.editor,e=n.editing.view,i=n.plugins.get("ImageCaptionUtils"),s=n.t;n.ui.componentFactory.add("toggleImageCaption",r=>{const o=n.commands.get("toggleImageCaption"),a=new Yt(r);return a.set({icon:kt.caption,tooltip:!0,isToggleable:!0}),a.bind("isOn","isEnabled").to(o,"value","isEnabled"),a.bind("label").to(o,"value",l=>s(l?"Toggle caption off":"Toggle caption on")),this.listenTo(a,"execute",()=>{n.execute("toggleImageCaption",{focusCaptionOnShow:!0});const l=i.getCaptionFromModelSelection(n.model.document.selection);if(l){const c=n.editing.mapper.toViewElement(l);e.scrollToTheSelection(),e.change(u=>{u.addClass("image__caption_highlighted",c)})}n.editing.view.focus()}),a})}}class BSe extends Be{static get requires(){return[OSe,LSe]}static get pluginName(){return"ImageCaption"}}function x$(t){const n=t.map(e=>e.replace("+","\\+"));return new RegExp(`^image\\/(${n.join("|")})$`)}function FSe(t){return new Promise((n,e)=>{const i=t.getAttribute("src");fetch(i).then(s=>s.blob()).then(s=>{const r=A$(s,i),a=`image.${r.replace("image/","")}`,l=new File([s],a,{type:r});n(l)}).catch(s=>s&&s.name==="TypeError"?VSe(i).then(n).catch(e):e(s))})}function NSe(t,n){return!t.isInlineImageView(n)||!n.getAttribute("src")?!1:!!n.getAttribute("src").match(/^data:image\/\w+;base64,/g)||!!n.getAttribute("src").match(/^blob:/g)}function A$(t,n){return t.type?t.type:n.match(/data:(image\/\w+);base64/)?n.match(/data:(image\/\w+);base64/)[1].toLowerCase():"image/jpeg"}function VSe(t){return DSe(t).then(n=>{const e=A$(n,t),s=`image.${e.replace("image/","")}`;return new File([n],s,{type:e})})}function DSe(t){return new Promise((n,e)=>{const i=$t.document.createElement("img");i.addEventListener("load",()=>{const s=$t.document.createElement("canvas");s.width=i.width,s.height=i.height,s.getContext("2d").drawImage(i,0,0),s.toBlob(o=>o?n(o):e())}),i.addEventListener("error",()=>e()),i.src=t})}class $Se extends Be{static get pluginName(){return"ImageUploadUI"}init(){const n=this.editor;n.ui.componentFactory.add("uploadImage",()=>this._createToolbarButton()),n.ui.componentFactory.add("imageUpload",()=>this._createToolbarButton()),n.ui.componentFactory.add("menuBar:uploadImage",()=>this._createMenuBarButton("standalone")),n.plugins.has("ImageInsertUI")&&n.plugins.get("ImageInsertUI").registerIntegration({name:"upload",observable:()=>n.commands.get("uploadImage"),buttonViewCreator:()=>this._createToolbarButton(),formViewCreator:()=>this._createDropdownButton(),menuBarButtonViewCreator:e=>this._createMenuBarButton(e?"insertOnly":"insertNested")})}_createButton(n){const e=this.editor,i=e.locale,s=e.commands.get("uploadImage"),r=e.config.get("image.upload.types"),o=x$(r),a=new n(e.locale),l=i.t;return a.set({acceptedType:r.map(c=>`image/${c}`).join(","),allowMultipleFiles:!0,label:l("Upload from computer"),icon:kt.imageUpload}),a.bind("isEnabled").to(s),a.on("done",(c,u)=>{const d=Array.from(u).filter(f=>o.test(f.type));d.length&&(e.execute("uploadImage",{file:d}),e.editing.view.focus())}),a}_createToolbarButton(){const n=this.editor.locale.t,e=this.editor.plugins.get("ImageInsertUI"),i=this.editor.commands.get("uploadImage"),s=this._createButton(u7);return s.tooltip=!0,s.bind("label").to(e,"isImageSelected",i,"isAccessAllowed",(r,o)=>n(o?r?"Replace image from computer":"Upload image from computer":"You have no image upload permissions.")),s}_createDropdownButton(){const n=this.editor.locale.t,e=this.editor.plugins.get("ImageInsertUI"),i=this._createButton(u7);return i.withText=!0,i.bind("label").to(e,"isImageSelected",s=>n(s?"Replace from computer":"Upload from computer")),i.on("execute",()=>{e.dropdownView.isOpen=!1}),i}_createMenuBarButton(n){const e=this.editor.locale.t,i=this._createButton(UD);switch(i.withText=!0,n){case"standalone":i.label=e("Image from computer");break;case"insertOnly":i.label=e("Image");break;case"insertNested":i.label=e("From computer");break}return i}}class zSe extends Be{constructor(e){super(e);w(this,"placeholder");w(this,"uploadStatusChange",(e,i,s)=>{const r=this.editor,o=i.item,a=o.getAttribute("uploadId");if(!s.consumable.consume(i.item,e.name))return;const l=r.plugins.get("ImageUtils"),c=r.plugins.get(sh),u=a?i.attributeNewValue:null,d=this.placeholder,f=r.editing.mapper.toViewElement(o),p=s.writer;if(u=="reading"){tR(f,p),nR(l,d,f,p);return}if(u=="uploading"){const m=c.loaders.get(a);tR(f,p),m?(iR(f,p),USe(f,p,m,r.editing.view),GSe(l,f,p,m)):nR(l,d,f,p);return}u=="complete"&&c.loaders.get(a)&&jSe(f,p,r.editing.view),WSe(f,p),iR(f,p),HSe(f,p)});this.placeholder="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="}static get pluginName(){return"ImageUploadProgress"}init(){const e=this.editor;e.plugins.has("ImageBlockEditing")&&e.editing.downcastDispatcher.on("attribute:uploadStatus:imageBlock",this.uploadStatusChange),e.plugins.has("ImageInlineEditing")&&e.editing.downcastDispatcher.on("attribute:uploadStatus:imageInline",this.uploadStatusChange)}}function tR(t,n){t.hasClass("ck-appear")||n.addClass("ck-appear",t)}function HSe(t,n){n.removeClass("ck-appear",t)}function nR(t,n,e,i){e.hasClass("ck-image-upload-placeholder")||i.addClass("ck-image-upload-placeholder",e);const s=t.findViewImgElement(e);s.getAttribute("src")!==n&&i.setAttribute("src",n,s),I$(e,"placeholder")||i.insert(i.createPositionAfter(s),KSe(i))}function iR(t,n){t.hasClass("ck-image-upload-placeholder")&&n.removeClass("ck-image-upload-placeholder",t),R$(t,n,"placeholder")}function USe(t,n,e,i){const s=qSe(n);n.insert(n.createPositionAt(t,"end"),s),e.on("change:uploadedPercent",(r,o,a)=>{i.change(l=>{l.setStyle("width",a+"%",s)})})}function WSe(t,n){R$(t,n,"progressBar")}function jSe(t,n,e){const i=n.createUIElement("div",{class:"ck-image-upload-complete-icon"});n.insert(n.createPositionAt(t,"end"),i),setTimeout(()=>{e.change(s=>s.remove(s.createRangeOn(i)))},3e3)}function qSe(t){const n=t.createUIElement("div",{class:"ck-progress-bar"});return t.setCustomProperty("progressBar",!0,n),n}function KSe(t){const n=t.createUIElement("div",{class:"ck-upload-placeholder-loader"});return t.setCustomProperty("placeholder",!0,n),n}function I$(t,n){for(const e of t.getChildren())if(e.getCustomProperty(n))return e}function R$(t,n,e){const i=I$(t,e);i&&n.remove(n.createRangeOn(i))}function GSe(t,n,e,i){if(i.data){const s=t.findViewImgElement(n);e.setAttribute("src",i.data,s)}}class YSe extends en{constructor(n){super(n),this.set("isAccessAllowed",!0)}refresh(){const n=this.editor,e=n.plugins.get("ImageUtils"),i=n.model.document.selection.getSelectedElement();this.isEnabled=e.isImageAllowed()||e.isImage(i)}execute(n){const e=Si(n.file),i=this.editor.model.document.selection,s=this.editor.plugins.get("ImageUtils"),r=Object.fromEntries(i.getAttributes());e.forEach((o,a)=>{const l=i.getSelectedElement();if(a&&l&&s.isImage(l)){const c=this.editor.model.createPositionAfter(l);this._uploadImage(o,r,c)}else this._uploadImage(o,r)})}_uploadImage(n,e,i){const s=this.editor,o=s.plugins.get(sh).createLoader(n),a=s.plugins.get("ImageUtils");o&&a.insertImage({...e,uploadId:o.id},i)}}class ZSe extends Be{constructor(e){super(e);w(this,"_uploadImageElements");e.config.define("image",{upload:{types:["jpeg","png","gif","bmp","webp","tiff"]}}),this._uploadImageElements=new Map}static get requires(){return[sh,w7,da,pr]}static get pluginName(){return"ImageUploadEditing"}init(){const e=this.editor,i=e.model.document,s=e.conversion,r=e.plugins.get(sh),o=e.plugins.get("ImageUtils"),a=e.plugins.get("ClipboardPipeline"),l=x$(e.config.get("image.upload.types")),c=new YSe(e);e.commands.add("uploadImage",c),e.commands.add("imageUpload",c),s.for("upcast").attributeToAttribute({view:{name:"img",key:"uploadId"},model:"uploadId"}),this.listenTo(e.editing.view.document,"clipboardInput",(u,d)=>{if(XSe(d.dataTransfer))return;const f=Array.from(d.dataTransfer.files).filter(m=>m?l.test(m.type):!1);if(!f.length)return;if(u.stop(),e.model.change(m=>{d.targetRanges&&m.setSelection(d.targetRanges.map(v=>e.editing.mapper.toModelRange(v))),e.execute("uploadImage",{file:f})}),!e.commands.get("uploadImage").isAccessAllowed){const m=e.plugins.get("Notification"),v=e.locale.t;m.showWarning(v("You have no image upload permissions."),{namespace:"image"})}}),this.listenTo(a,"inputTransformation",(u,d)=>{const f=Array.from(e.editing.view.createRangeIn(d.content)).map(m=>m.item).filter(m=>NSe(o,m)&&!m.getAttribute("uploadProcessed")).map(m=>({promise:FSe(m),imageElement:m}));if(!f.length)return;const p=new Zu(e.editing.view.document);for(const m of f){p.setAttribute("uploadProcessed",!0,m.imageElement);const v=r.createLoader(m.promise);v&&(p.setAttribute("src","",m.imageElement),p.setAttribute("uploadId",v.id,m.imageElement))}}),e.editing.view.document.on("dragover",(u,d)=>{d.preventDefault()}),i.on("change",()=>{const u=i.differ.getChanges({includeChangesInGraveyard:!0}).reverse(),d=new Set;for(const f of u)if(f.type=="insert"&&f.name!="$text"){const p=f.position.nodeAfter,m=f.position.root.rootName=="$graveyard";for(const v of JSe(e,p)){const y=v.getAttribute("uploadId");if(!y)continue;const _=r.loaders.get(y);_&&(m?d.has(y)||_.abort():(d.add(y),this._uploadImageElements.set(y,v),_.status=="idle"&&this._readAndUpload(_)))}}}),this.on("uploadComplete",(u,{imageElement:d,data:f})=>{const p=f.urls?f.urls:f;this.editor.model.change(m=>{m.setAttribute("src",p.default,d),this._parseAndSetSrcsetAttributeOnImage(p,d,m),o.setImageNaturalSizeAttributes(d)})},{priority:"low"})}afterInit(){const e=this.editor.model.schema;this.editor.plugins.has("ImageBlockEditing")&&e.extend("imageBlock",{allowAttributes:["uploadId","uploadStatus"]}),this.editor.plugins.has("ImageInlineEditing")&&e.extend("imageInline",{allowAttributes:["uploadId","uploadStatus"]})}_readAndUpload(e){const i=this.editor,s=i.model,r=i.locale.t,o=i.plugins.get(sh),a=i.plugins.get(w7),l=i.plugins.get("ImageUtils"),c=this._uploadImageElements;return s.enqueueChange({isUndoable:!1},d=>{d.setAttribute("uploadStatus","reading",c.get(e.id))}),e.read().then(()=>{const d=e.upload(),f=c.get(e.id);/* istanbul ignore next -- @preserve */if(sn.isSafari){const p=i.editing.mapper.toViewElement(f),m=l.findViewImgElement(p);i.editing.view.once("render",()=>{if(!m.parent)return;const v=i.editing.view.domConverter.mapViewToDom(m.parent);if(!v)return;const y=v.style.display;v.style.display="none",v._ckHack=v.offsetHeight,v.style.display=y})}return i.ui&&i.ui.ariaLiveAnnouncer.announce(r("Uploading image")),s.enqueueChange({isUndoable:!1},p=>{p.setAttribute("uploadStatus","uploading",f)}),d}).then(d=>{s.enqueueChange({isUndoable:!1},f=>{const p=c.get(e.id);f.setAttribute("uploadStatus","complete",p),i.ui&&i.ui.ariaLiveAnnouncer.announce(r("Image upload complete")),this.fire("uploadComplete",{data:d,imageElement:p})}),u()}).catch(d=>{if(i.ui&&i.ui.ariaLiveAnnouncer.announce(r("Error during image upload")),e.status!=="error"&&e.status!=="aborted")throw d;e.status=="error"&&d&&a.showWarning(d,{title:r("Upload failed"),namespace:"upload"}),s.enqueueChange({isUndoable:!1},f=>{f.remove(c.get(e.id))}),u()});function u(){s.enqueueChange({isUndoable:!1},d=>{const f=c.get(e.id);d.removeAttribute("uploadId",f),d.removeAttribute("uploadStatus",f),c.delete(e.id)}),o.destroyLoader(e)}}_parseAndSetSrcsetAttributeOnImage(e,i,s){let r=0;const o=Object.keys(e).filter(a=>{const l=parseInt(a,10);if(!isNaN(l))return r=Math.max(r,l),!0}).map(a=>`${e[a]} ${a}w`).join(", ");if(o!=""){const a={srcset:o};!i.hasAttribute("width")&&!i.hasAttribute("height")&&(a.width=r),s.setAttributes(a,i)}}}function XSe(t){return Array.from(t.types).includes("text/html")&&t.getData("text/html")!==""}function JSe(t,n){const e=t.plugins.get("ImageUtils");return Array.from(t.model.createRangeOn(n)).filter(i=>e.isImage(i.item)).map(i=>i.item)}class M$ extends Be{static get pluginName(){return"ImageUpload"}static get requires(){return[ZSe,$Se,zSe]}}class QSe extends Rt{constructor(e){super(e);w(this,"urlInputView");w(this,"keystrokes");this.set("imageURLInputValue",""),this.set("isImageSelected",!1),this.set("isEnabled",!0),this.keystrokes=new Zi,this.urlInputView=this._createUrlInputView(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-image-insert-url"]},children:[this.urlInputView,{tag:"div",attributes:{class:["ck","ck-image-insert-url__action-row"]}}]})}render(){super.render(),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.keystrokes.destroy()}_createUrlInputView(){const e=this.locale,i=e.t,s=new ms(e,Jo);return s.bind("label").to(this,"isImageSelected",r=>i(r?"Update image URL":"Insert image via URL")),s.bind("isEnabled").to(this),s.fieldView.inputMode="url",s.fieldView.placeholder="https://example.com/image.png",s.fieldView.bind("value").to(this,"imageURLInputValue",r=>r||""),s.fieldView.on("input",()=>{this.imageURLInputValue=s.fieldView.element.value.trim()}),s}focus(){this.urlInputView.focus()}}class eTe extends Be{constructor(){super(...arguments);w(this,"_imageInsertUI");w(this,"_formView")}static get pluginName(){return"ImageInsertViaUrlUI"}static get requires(){return[G1,hm]}init(){this.editor.ui.componentFactory.add("insertImageViaUrl",()=>this._createToolbarButton()),this.editor.ui.componentFactory.add("menuBar:insertImageViaUrl",()=>this._createMenuBarButton("standalone"))}afterInit(){this._imageInsertUI=this.editor.plugins.get("ImageInsertUI"),this._imageInsertUI.registerIntegration({name:"url",observable:()=>this.editor.commands.get("insertImage"),buttonViewCreator:()=>this._createToolbarButton(),formViewCreator:()=>this._createDropdownButton(),menuBarButtonViewCreator:e=>this._createMenuBarButton(e?"insertOnly":"insertNested")})}_createInsertUrlButton(e){const i=new e(this.editor.locale);return i.icon=kt.imageUrl,i.on("execute",()=>{this._showModal()}),i}_createToolbarButton(){const e=this.editor.locale.t,i=this._createInsertUrlButton(Yt);return i.tooltip=!0,i.bind("label").to(this._imageInsertUI,"isImageSelected",s=>e(s?"Update image URL":"Insert image via URL")),i}_createDropdownButton(){const e=this.editor.locale.t,i=this._createInsertUrlButton(Yt);return i.withText=!0,i.bind("label").to(this._imageInsertUI,"isImageSelected",s=>e(s?"Update image URL":"Insert via URL")),i}_createMenuBarButton(e){const i=this.editor.locale.t,s=this._createInsertUrlButton(Xi);switch(s.withText=!0,e){case"standalone":s.label=i("Image via URL");break;case"insertOnly":s.label=i("Image");break;case"insertNested":s.label=i("Via URL");break}return s}_createInsertUrlView(){const e=this.editor,i=e.locale,s=e.commands.get("replaceImageSource"),r=e.commands.get("insertImage"),o=new QSe(i);return o.bind("isImageSelected").to(this._imageInsertUI),o.bind("isEnabled").toMany([r,s],"isEnabled",(...a)=>a.some(l=>l)),o}_showModal(){const e=this.editor,s=e.locale.t,r=e.plugins.get("Dialog");this._formView||(this._formView=this._createInsertUrlView(),this._formView.on("submit",()=>this._handleSave()));const o=e.commands.get("replaceImageSource");this._formView.imageURLInputValue=o.value||"",r.show({id:"insertImageViaUrl",title:this._imageInsertUI.isImageSelected?s("Update image URL"):s("Insert image via URL"),isModal:!0,content:this._formView,actionButtons:[{label:s("Cancel"),withText:!0,onExecute:()=>r.hide()},{label:s("Accept"),class:"ck-button-action",withText:!0,onExecute:()=>this._handleSave()}]})}_handleSave(){this.editor.commands.get("replaceImageSource").isEnabled?this.editor.execute("replaceImageSource",{source:this._formView.imageURLInputValue}):this.editor.execute("insertImage",{source:this._formView.imageURLInputValue}),this.editor.plugins.get("Dialog").hide()}}class P$ extends Be{static get pluginName(){return"ImageInsertViaUrl"}static get requires(){return[eTe,G1]}}class tTe extends Be{static get pluginName(){return"ImageInsert"}static get requires(){return[M$,P$,G1]}}class nTe extends en{refresh(){const n=this.editor,i=n.plugins.get("ImageUtils").getClosestSelectedImageElement(n.model.document.selection);this.isEnabled=!!i,!i||!i.hasAttribute("resizedWidth")?this.value=null:this.value={width:i.getAttribute("resizedWidth"),height:null}}execute(n){const e=this.editor,i=e.model,s=e.plugins.get("ImageUtils"),r=s.getClosestSelectedImageElement(i.document.selection);this.value={width:n.width,height:null},r&&i.change(o=>{o.setAttribute("resizedWidth",n.width,r),o.removeAttribute("resizedHeight",r),s.setImageNaturalSizeAttributes(r)})}}class O$ extends Be{static get requires(){return[pr]}static get pluginName(){return"ImageResizeEditing"}constructor(n){super(n),n.config.define("image",{resizeUnit:"%",resizeOptions:[{name:"resizeImage:original",value:null,icon:"original"},{name:"resizeImage:custom",value:"custom",icon:"custom"},{name:"resizeImage:25",value:"25",icon:"small"},{name:"resizeImage:50",value:"50",icon:"medium"},{name:"resizeImage:75",value:"75",icon:"large"}]})}init(){const n=this.editor,e=new nTe(n);this._registerConverters("imageBlock"),this._registerConverters("imageInline"),n.commands.add("resizeImage",e),n.commands.add("imageResize",e)}afterInit(){this._registerSchema()}_registerSchema(){this.editor.plugins.has("ImageBlockEditing")&&this.editor.model.schema.extend("imageBlock",{allowAttributes:["resizedWidth","resizedHeight"]}),this.editor.plugins.has("ImageInlineEditing")&&this.editor.model.schema.extend("imageInline",{allowAttributes:["resizedWidth","resizedHeight"]})}_registerConverters(n){const e=this.editor,i=e.plugins.get("ImageUtils");e.conversion.for("downcast").add(s=>s.on(`attribute:resizedWidth:${n}`,(r,o,a)=>{if(!a.consumable.consume(o.item,r.name))return;const l=a.writer,c=a.mapper.toViewElement(o.item);o.attributeNewValue!==null?(l.setStyle("width",o.attributeNewValue,c),l.addClass("image_resized",c)):(l.removeStyle("width",c),l.removeClass("image_resized",c))})),e.conversion.for("dataDowncast").attributeToAttribute({model:{name:n,key:"resizedHeight"},view:s=>({key:"style",value:{height:s}})}),e.conversion.for("editingDowncast").add(s=>s.on(`attribute:resizedHeight:${n}`,(r,o,a)=>{if(!a.consumable.consume(o.item,r.name))return;const l=a.writer,c=a.mapper.toViewElement(o.item),u=n==="imageInline"?i.findViewImgElement(c):c;o.attributeNewValue!==null?l.setStyle("height",o.attributeNewValue,u):l.removeStyle("height",u)})),e.conversion.for("upcast").attributeToAttribute({view:{name:n==="imageBlock"?"figure":"img",styles:{width:/.+/}},model:{key:"resizedWidth",value:s=>O_(s)?null:s.getStyle("width")}}),e.conversion.for("upcast").attributeToAttribute({view:{name:n==="imageBlock"?"figure":"img",styles:{height:/.+/}},model:{key:"resizedHeight",value:s=>O_(s)?null:s.getStyle("height")}})}}const X5={small:kt.objectSizeSmall,medium:kt.objectSizeMedium,large:kt.objectSizeLarge,custom:kt.objectSizeCustom,original:kt.objectSizeFull};class iTe extends Be{constructor(e){super(e);w(this,"_resizeUnit");this._resizeUnit=e.config.get("image.resizeUnit")}static get requires(){return[O$]}static get pluginName(){return"ImageResizeButtons"}init(){const e=this.editor,i=e.config.get("image.resizeOptions"),s=e.commands.get("resizeImage");this.bind("isEnabled").to(s);for(const r of i)this._registerImageResizeButton(r);this._registerImageResizeDropdown(i)}_registerImageResizeButton(e){const i=this.editor,{name:s,value:r,icon:o}=e;i.ui.componentFactory.add(s,a=>{const l=new Yt(a),c=i.commands.get("resizeImage"),u=this._getOptionLabelValue(e,!0);if(!X5[o])throw new fe("imageresizebuttons-missing-icon",i,e);if(l.set({label:u,icon:X5[o],tooltip:u,isToggleable:!0}),l.bind("isEnabled").to(this),i.plugins.has("ImageCustomResizeUI")&&Rp(e)){const d=i.plugins.get("ImageCustomResizeUI");this.listenTo(l,"execute",()=>{d._showForm(this._resizeUnit)})}else{const d=r?r+this._resizeUnit:null;l.bind("isOn").to(c,"value",lk(d)),this.listenTo(l,"execute",()=>{i.execute("resizeImage",{width:d})})}return l})}_registerImageResizeDropdown(e){const i=this.editor,s=i.t,r=e.find(a=>!a.value),o=a=>{const l=i.commands.get("resizeImage"),c=Xs(a,PD),u=c.buttonView,d=s("Resize image");return u.set({tooltip:d,commandValue:r.value,icon:X5.medium,isToggleable:!0,label:this._getOptionLabelValue(r),withText:!0,class:"ck-resize-image-button",ariaLabel:d,ariaLabelledBy:void 0}),u.bind("label").to(l,"value",f=>f&&f.width?f.width:this._getOptionLabelValue(r)),c.bind("isEnabled").to(this),Ju(c,()=>this._getResizeDropdownListItemDefinitions(e,l),{ariaLabel:s("Image resize list"),role:"menu"}),this.listenTo(c,"execute",f=>{"onClick"in f.source?f.source.onClick():(i.execute(f.source.commandName,{width:f.source.commandValue}),i.editing.view.focus())}),c};i.ui.componentFactory.add("resizeImage",o),i.ui.componentFactory.add("imageResize",o)}_getOptionLabelValue(e,i=!1){const s=this.editor.t;return e.label?e.label:i?Rp(e)?s("Custom image size"):e.value?s("Resize image to %0",e.value+this._resizeUnit):s("Resize image to the original size"):Rp(e)?s("Custom"):e.value?e.value+this._resizeUnit:s("Original")}_getResizeDropdownListItemDefinitions(e,i){const{editor:s}=this,r=new _s,o=e.map(a=>Rp(a)?{...a,valueWithUnits:"custom"}:a.value?{...a,valueWithUnits:`${a.value}${this._resizeUnit}`}:{...a,valueWithUnits:null});for(const a of o){let l=null;if(s.plugins.has("ImageCustomResizeUI")&&Rp(a)){const c=s.plugins.get("ImageCustomResizeUI");l={type:"button",model:new $u({label:this._getOptionLabelValue(a),role:"menuitemradio",withText:!0,icon:null,onClick:()=>{c._showForm(this._resizeUnit)}})};const u=dB(o,"valueWithUnits");l.model.bind("isOn").to(i,"value",sTe(u))}else l={type:"button",model:new $u({commandName:"resizeImage",commandValue:a.valueWithUnits,label:this._getOptionLabelValue(a),role:"menuitemradio",withText:!0,icon:null})},l.model.bind("isOn").to(i,"value",lk(a.valueWithUnits));l.model.bind("isEnabled").to(i,"isEnabled"),r.add(l)}return r}}function Rp(t){return t.value==="custom"}function lk(t){return n=>{const e=n;return t===null&&e===t?!0:e!==null&&e.width===t}}function sTe(t){return n=>!t.some(e=>lk(e)(n))}const rTe="figure.image.ck-widget > img,figure.image.ck-widget > picture > img,figure.image.ck-widget > a > img,figure.image.ck-widget > a > picture > img,span.image-inline.ck-widget > img,span.image-inline.ck-widget > picture > img",J5="image_resized";class oTe extends Be{static get requires(){return[Y5,pr]}static get pluginName(){return"ImageResizeHandles"}init(){const n=this.editor.commands.get("resizeImage");this.bind("isEnabled").to(n),this._setupResizerCreator()}_setupResizerCreator(){const n=this.editor,e=n.editing.view,i=n.plugins.get("ImageUtils");e.addObserver(dS),this.listenTo(e.document,"imageLoaded",(s,r)=>{if(!r.target.matches(rTe))return;const o=n.editing.view.domConverter,a=o.domToView(r.target),l=i.getImageWidgetFromImageView(a);let c=this.editor.plugins.get(Y5).getResizerByViewElement(l);if(c){c.redraw();return}const u=n.editing.mapper,d=u.toModelElement(l);c=n.plugins.get(Y5).attachTo({unit:n.config.get("image.resizeUnit"),modelElement:d,viewElement:l,editor:n,getHandleHost(f){return f.querySelector("img")},getResizeHost(){return o.mapViewToDom(u.toViewElement(d))},isCentered(){return d.getAttribute("imageStyle")=="alignCenter"},onCommit(f){e.change(p=>{p.removeClass(J5,l)}),n.execute("resizeImage",{width:f})}}),c.on("updateSize",()=>{l.hasClass(J5)||e.change(p=>{p.addClass(J5,l)});const f=d.name==="imageInline"?a:l;f.getStyle("height")&&e.change(p=>{p.removeStyle("height",f)})}),c.bind("isEnabled").to(this)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function L$(t){if(!t)return null;const[,n,e]=t.trim().match(/([.,\d]+)(%|px)$/)||[],i=Number.parseFloat(n);return Number.isNaN(i)?null:{value:i,unit:e}}function B$(t,n,e){return e==="px"?{value:n.value,unit:"px"}:{value:n.value/t*100,unit:"%"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function F$(t){const{editing:n}=t,i=t.plugins.get("ImageUtils").getClosestSelectedImageElement(t.model.document.selection);if(!i)return null;const s=n.mapper.toViewElement(i),r=n.view.domConverter.mapViewToDom(s);return{model:i,view:s,dom:r}}function aTe(t,n){const e=F$(t);if(!e)return null;const i=L$(e.model.getAttribute("resizedWidth")||null);if(!i)return null;if(i.unit===n)return i;const s=rS(e.dom),r={unit:"px",value:new mn(e.dom).width};return B$(s,r,n)}class lTe extends Rt{constructor(e,i,s){super(e);w(this,"focusTracker");w(this,"keystrokes");w(this,"unit");w(this,"labeledInput");w(this,"saveButtonView");w(this,"cancelButtonView");w(this,"_focusables");w(this,"_focusCycler");w(this,"_validators");const r=this.locale.t;this.focusTracker=new Bi,this.keystrokes=new Zi,this.unit=i,this.labeledInput=this._createLabeledInputView(),this.saveButtonView=this._createButton(r("Save"),kt.check,"ck-button-save"),this.saveButtonView.type="submit",this.cancelButtonView=this._createButton(r("Cancel"),kt.cancel,"ck-button-cancel","cancel"),this._focusables=new Us,this._validators=s,this._focusCycler=new Js({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"form",attributes:{class:["ck","ck-image-custom-resize-form","ck-responsive-form"],tabindex:"-1"},children:[this.labeledInput,this.saveButtonView,this.cancelButtonView]})}render(){super.render(),this.keystrokes.listenTo(this.element),Ih({view:this}),[this.labeledInput,this.saveButtonView,this.cancelButtonView].forEach(e=>{this._focusables.add(e),this.focusTracker.add(e.element)})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createButton(e,i,s,r){const o=new Yt(this.locale);return o.set({label:e,icon:i,tooltip:!0}),o.extendTemplate({attributes:{class:s}}),r&&o.delegate("execute").to(this,r),o}_createLabeledInputView(){const e=this.locale.t,i=new ms(this.locale,FD);return i.label=e("Resize image (in %0)",this.unit),i.fieldView.set({step:.1}),i}isValid(){this.resetFormStatus();for(const e of this._validators){const i=e(this);if(i)return this.labeledInput.errorText=i,!1}return!0}resetFormStatus(){this.labeledInput.errorText=null}get rawSize(){const{element:e}=this.labeledInput.fieldView;return e?e.value:null}get parsedSize(){const{rawSize:e}=this;if(e===null)return null;const i=Number.parseFloat(e);return Number.isNaN(i)?null:i}get sizeWithUnits(){const{parsedSize:e,unit:i}=this;return e===null?null:`${e}${i}`}}function cTe(t,n){const e=F$(t);if(!e)return null;const i=rS(e.dom),s=L$(window.getComputedStyle(e.dom).minWidth)||{value:1,unit:"px"},r=Math.max(.1,B$(i,s,n).value);return{unit:n,lower:r,upper:n==="px"?i:100}}class uTe extends Be{constructor(){super(...arguments);w(this,"_balloon");w(this,"_form")}static get requires(){return[Mo]}static get pluginName(){return"ImageCustomResizeUI"}destroy(){super.destroy(),this._form&&this._form.destroy()}_createForm(e){const i=this.editor;this._balloon=this.editor.plugins.get("ContextualBalloon"),this._form=new(Zw(lTe))(i.locale,e,dTe(i)),this._form.render(),this.listenTo(this._form,"submit",()=>{this._form.isValid()&&(i.execute("resizeImage",{width:this._form.sizeWithUnits}),this._hideForm(!0))}),this.listenTo(this._form.labeledInput,"change:errorText",()=>{i.ui.update()}),this.listenTo(this._form,"cancel",()=>{this._hideForm(!0)}),this._form.keystrokes.set("Esc",(s,r)=>{this._hideForm(!0),r()}),Xu({emitter:this._form,activator:()=>this._isVisible,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideForm()})}_showForm(e){if(this._isVisible)return;this._form||this._createForm(e);const i=this.editor,s=this._form.labeledInput;this._form.disableCssTransitions(),this._form.resetFormStatus(),this._isInBalloon||this._balloon.add({view:this._form,position:cS(i)});const r=aTe(i,e),o=r?r.value.toFixed(1):"",a=cTe(i,e);s.fieldView.value=s.fieldView.element.value=o,a&&Object.assign(s.fieldView,{min:a.lower.toFixed(1),max:Math.ceil(a.upper).toFixed(1)}),this._form.labeledInput.fieldView.select(),this._form.enableCssTransitions()}_hideForm(e=!1){this._isInBalloon&&(this._form.focusTracker.isFocused&&this._form.saveButtonView.focus(),this._balloon.remove(this._form),e&&this.editor.editing.view.focus())}get _isVisible(){return!!this._balloon&&this._balloon.visibleView===this._form}get _isInBalloon(){return!!this._balloon&&this._balloon.hasView(this._form)}}function dTe(t){const n=t.t;return[e=>{if(e.rawSize.trim()==="")return n("The value must not be empty.");if(e.parsedSize===null)return n("The value should be a plain number.")}]}class hTe extends Be{static get requires(){return[O$,oTe,uTe,iTe]}static get pluginName(){return"ImageResize"}}class fTe extends en{constructor(e,i){super(e);w(this,"_defaultStyles");w(this,"_styles");this._defaultStyles={imageBlock:!1,imageInline:!1},this._styles=new Map(i.map(s=>{if(s.isDefault)for(const r of s.modelElements)this._defaultStyles[r]=s.name;return[s.name,s]}))}refresh(){const s=this.editor.plugins.get("ImageUtils").getClosestSelectedImageElement(this.editor.model.document.selection);this.isEnabled=!!s,this.isEnabled?s.hasAttribute("imageStyle")?this.value=s.getAttribute("imageStyle"):this.value=this._defaultStyles[s.name]:this.value=!1}execute(e={}){const i=this.editor,s=i.model,r=i.plugins.get("ImageUtils");s.change(o=>{const a=e.value,{setImageSizes:l=!0}=e;let c=r.getClosestSelectedImageElement(s.document.selection);a&&this.shouldConvertImageType(a,c)&&(this.editor.execute(r.isBlockImage(c)?"imageTypeInline":"imageTypeBlock",{setImageSizes:l}),c=r.getClosestSelectedImageElement(s.document.selection)),!a||this._styles.get(a).isDefault?o.removeAttribute("imageStyle",c):o.setAttribute("imageStyle",a,c),l&&r.setImageNaturalSizeAttributes(c)})}shouldConvertImageType(e,i){return!this._styles.get(e).modelElements.includes(i.name)}}const Ob={get inline(){return{name:"inline",title:"In line",icon:kt.objectInline,modelElements:["imageInline"],isDefault:!0}},get alignLeft(){return{name:"alignLeft",title:"Left aligned image",icon:kt.objectLeft,modelElements:["imageBlock","imageInline"],className:"image-style-align-left"}},get alignBlockLeft(){return{name:"alignBlockLeft",title:"Left aligned image",icon:kt.objectBlockLeft,modelElements:["imageBlock"],className:"image-style-block-align-left"}},get alignCenter(){return{name:"alignCenter",title:"Centered image",icon:kt.objectCenter,modelElements:["imageBlock"],className:"image-style-align-center"}},get alignRight(){return{name:"alignRight",title:"Right aligned image",icon:kt.objectRight,modelElements:["imageBlock","imageInline"],className:"image-style-align-right"}},get alignBlockRight(){return{name:"alignBlockRight",title:"Right aligned image",icon:kt.objectBlockRight,modelElements:["imageBlock"],className:"image-style-block-align-right"}},get block(){return{name:"block",title:"Centered image",icon:kt.objectCenter,modelElements:["imageBlock"],isDefault:!0}},get side(){return{name:"side",title:"Side image",icon:kt.objectRight,modelElements:["imageBlock"],className:"image-style-side"}}},N$={full:kt.objectFullWidth,left:kt.objectBlockLeft,right:kt.objectBlockRight,center:kt.objectCenter,inlineLeft:kt.objectLeft,inlineRight:kt.objectRight,inline:kt.objectInline},V$=[{name:"imageStyle:wrapText",title:"Wrap text",defaultItem:"imageStyle:alignLeft",items:["imageStyle:alignLeft","imageStyle:alignRight"]},{name:"imageStyle:breakText",title:"Break text",defaultItem:"imageStyle:block",items:["imageStyle:alignBlockLeft","imageStyle:block","imageStyle:alignBlockRight"]}];function mTe(t){return(t.configuredStyles.options||[]).map(i=>vTe(i)).filter(i=>bTe(i,t))}function pTe(t,n){return t&&n?{options:["inline","alignLeft","alignRight","alignCenter","alignBlockLeft","alignBlockRight","block","side"]}:t?{options:["block","side"]}:n?{options:["inline","alignLeft","alignRight"]}:{}}function gTe(t){return t.has("ImageBlockEditing")&&t.has("ImageInlineEditing")?[...V$]:[]}function vTe(t){return typeof t=="string"?Ob[t]?t={...Ob[t]}:t={name:t}:t=_Te(Ob[t.name],t),typeof t.icon=="string"&&(t.icon=N$[t.icon]||t.icon),t}function bTe(t,{isBlockPluginLoaded:n,isInlinePluginLoaded:e}){const{modelElements:i,name:s}=t;if(!i||!i.length||!s)return D$({style:t}),!1;{const r=[n?"imageBlock":null,e?"imageInline":null];if(!i.some(o=>r.includes(o)))return qn("image-style-missing-dependency",{style:t,missingPlugins:i.map(o=>o==="imageBlock"?"ImageBlockEditing":"ImageInlineEditing")}),!1}return!0}function _Te(t,n){const e={...n};for(const i in t)Object.prototype.hasOwnProperty.call(n,i)||(e[i]=t[i]);return e}function D$(t){qn("image-style-configuration-definition-invalid",t)}var ck={normalizeStyles:mTe,getDefaultStylesConfiguration:pTe,getDefaultDropdownDefinitions:gTe,warnInvalidStyle:D$,DEFAULT_OPTIONS:Ob,DEFAULT_ICONS:N$,DEFAULT_DROPDOWN_DEFINITIONS:V$};function wTe(t){return(n,e,i)=>{if(!i.consumable.consume(e.item,n.name))return;const s=sR(e.attributeNewValue,t),r=sR(e.attributeOldValue,t),o=i.mapper.toViewElement(e.item),a=i.writer;r&&a.removeClass(r.className,o),s&&a.addClass(s.className,o)}}function yTe(t){const n={imageInline:t.filter(e=>!e.isDefault&&e.modelElements.includes("imageInline")),imageBlock:t.filter(e=>!e.isDefault&&e.modelElements.includes("imageBlock"))};return(e,i,s)=>{if(!i.modelRange)return;const r=i.viewItem,o=bs(i.modelRange.getItems());if(o&&s.schema.checkAttribute(o,"imageStyle"))for(const a of n[o.name])s.consumable.consume(r,{classes:a.className})&&s.writer.setAttribute("imageStyle",a.name,o)}}function sR(t,n){for(const e of n)if(e.name===t)return e}class $$ extends Be{constructor(){super(...arguments);w(this,"normalizedStyles")}static get pluginName(){return"ImageStyleEditing"}static get requires(){return[pr]}init(){const{normalizeStyles:e,getDefaultStylesConfiguration:i}=ck,s=this.editor,r=s.plugins.has("ImageBlockEditing"),o=s.plugins.has("ImageInlineEditing");s.config.define("image.styles",i(r,o)),this.normalizedStyles=e({configuredStyles:s.config.get("image.styles"),isBlockPluginLoaded:r,isInlinePluginLoaded:o}),this._setupConversion(r,o),this._setupPostFixer(),s.commands.add("imageStyle",new fTe(s,this.normalizedStyles))}_setupConversion(e,i){const s=this.editor,r=s.model.schema,o=wTe(this.normalizedStyles),a=yTe(this.normalizedStyles);s.editing.downcastDispatcher.on("attribute:imageStyle",o),s.data.downcastDispatcher.on("attribute:imageStyle",o),e&&(r.extend("imageBlock",{allowAttributes:"imageStyle"}),s.data.upcastDispatcher.on("element:figure",a,{priority:"low"})),i&&(r.extend("imageInline",{allowAttributes:"imageStyle"}),s.data.upcastDispatcher.on("element:img",a,{priority:"low"}))}_setupPostFixer(){const e=this.editor,i=e.model.document,s=e.plugins.get(pr),r=new Map(this.normalizedStyles.map(o=>[o.name,o]));i.registerPostFixer(o=>{let a=!1;for(const l of i.differ.getChanges())if(l.type=="insert"||l.type=="attribute"&&l.attributeKey=="imageStyle"){let c=l.type=="insert"?l.position.nodeAfter:l.range.start.nodeAfter;if(c&&c.is("element","paragraph")&&c.childCount>0&&(c=c.getChild(0)),!s.isImage(c))continue;const u=c.getAttribute("imageStyle");if(!u)continue;const d=r.get(u);(!d||!d.modelElements.includes(c.name))&&(o.removeAttribute("imageStyle",c),a=!0)}return a})}}class CTe extends Be{static get requires(){return[$$]}static get pluginName(){return"ImageStyleUI"}get localizedDefaultStylesTitles(){const n=this.editor.t;return{"Wrap text":n("Wrap text"),"Break text":n("Break text"),"In line":n("In line"),"Full size image":n("Full size image"),"Side image":n("Side image"),"Left aligned image":n("Left aligned image"),"Centered image":n("Centered image"),"Right aligned image":n("Right aligned image")}}init(){const n=this.editor.plugins,e=this.editor.config.get("image.toolbar")||[],i=n.get("ImageStyleEditing"),s=rR(i.normalizedStyles,this.localizedDefaultStylesTitles);for(const o of s)this._createButton(o);const r=rR([...e.filter(Li),...ck.getDefaultDropdownDefinitions(n)],this.localizedDefaultStylesTitles);for(const o of r)this._createDropdown(o,s)}_createDropdown(n,e){const i=this.editor.ui.componentFactory;i.add(n.name,s=>{let r;const{defaultItem:o,items:a,title:l}=n,c=a.filter(p=>e.find(({name:m})=>oR(m)===p)).map(p=>{const m=i.create(p);return p===o&&(r=m),m});a.length!==c.length&&ck.warnInvalidStyle({dropdown:n});const u=Xs(s,K1),d=u.buttonView,f=d.arrowView;return ty(u,c,{enableActiveItemFocusOnDropdownOpen:!0}),d.set({label:aR(l,r.label),class:null,tooltip:!0}),f.unbind("label"),f.set({label:l}),d.bind("icon").toMany(c,"isOn",(...p)=>{const m=p.findIndex(Cu);return m<0?r.icon:c[m].icon}),d.bind("label").toMany(c,"isOn",(...p)=>{const m=p.findIndex(Cu);return aR(l,m<0?r.label:c[m].label)}),d.bind("isOn").toMany(c,"isOn",(...p)=>p.some(Cu)),d.bind("class").toMany(c,"isOn",(...p)=>p.some(Cu)?"ck-splitbutton_flatten":void 0),d.on("execute",()=>{c.some(({isOn:p})=>p)?u.isOpen=!u.isOpen:r.fire("execute")}),u.bind("isEnabled").toMany(c,"isEnabled",(...p)=>p.some(Cu)),this.listenTo(u,"execute",()=>{this.editor.editing.view.focus()}),u})}_createButton(n){const e=n.name;this.editor.ui.componentFactory.add(oR(e),i=>{const s=this.editor.commands.get("imageStyle"),r=new Yt(i);return r.set({label:n.title,icon:n.icon,tooltip:!0,isToggleable:!0}),r.bind("isEnabled").to(s,"isEnabled"),r.bind("isOn").to(s,"value",o=>o===e),r.on("execute",this._executeCommand.bind(this,e)),r})}_executeCommand(n){this.editor.execute("imageStyle",{value:n}),this.editor.editing.view.focus()}}function rR(t,n){for(const e of t)n[e.title]&&(e.title=n[e.title]);return t}function oR(t){return`imageStyle:${t}`}function aR(t,n){return(t?t+": ":"")+n}class kTe extends Be{static get requires(){return[$$,CTe]}static get pluginName(){return"ImageStyle"}}class ETe extends Be{static get requires(){return[R_,pr]}static get pluginName(){return"ImageToolbar"}afterInit(){const n=this.editor,e=n.t,i=n.plugins.get(R_),s=n.plugins.get("ImageUtils");i.register("image",{ariaLabel:e("Image toolbar"),items:STe(n.config.get("image.toolbar")||[]),getRelatedElement:r=>s.getClosestSelectedImageWidget(r)})}}function STe(t){return t.map(n=>Li(n)?n.name:n)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class TTe extends Be{static get pluginName(){return"IndentEditing"}init(){const n=this.editor;n.commands.add("indent",new UI(n)),n.commands.add("outdent",new UI(n))}}class xTe extends Be{static get pluginName(){return"IndentUI"}init(){const n=this.editor,e=n.locale,i=n.t,s=e.uiLanguageDirection=="ltr"?kt.indent:kt.outdent,r=e.uiLanguageDirection=="ltr"?kt.outdent:kt.indent;this._defineButton("indent",i("Increase indent"),s),this._defineButton("outdent",i("Decrease indent"),r)}_defineButton(n,e,i){const s=this.editor;s.ui.componentFactory.add(n,()=>{const r=this._createButton(Yt,n,e,i);return r.set({tooltip:!0}),r}),s.ui.componentFactory.add("menuBar:"+n,()=>this._createButton(Xi,n,e,i))}_createButton(n,e,i,s){const r=this.editor,o=r.commands.get(e),a=new n(r.locale);return a.set({label:i,icon:s}),a.bind("isEnabled").to(o,"isEnabled"),this.listenTo(a,"execute",()=>{r.execute(e),r.editing.view.focus()}),a}}class ATe extends Be{static get pluginName(){return"Indent"}static get requires(){return[TTe,xTe]}}class Pv extends en{constructor(e,i){super(e);w(this,"_indentBehavior");this._indentBehavior=i}refresh(){const i=this.editor.model,s=bs(i.document.selection.getSelectedBlocks());if(!s||!this._isIndentationChangeAllowed(s)){this.isEnabled=!1;return}this.isEnabled=this._indentBehavior.checkEnabled(s.getAttribute("blockIndent"))}execute(){const e=this.editor.model,i=this._getBlocksToChange();e.change(s=>{for(const r of i){const o=r.getAttribute("blockIndent"),a=this._indentBehavior.getNextIndent(o);a?s.setAttribute("blockIndent",a,r):s.removeAttribute("blockIndent",r)}})}_getBlocksToChange(){const i=this.editor.model.document.selection;return Array.from(i.getSelectedBlocks()).filter(r=>this._isIndentationChangeAllowed(r))}_isIndentationChangeAllowed(e){const i=this.editor;return i.model.schema.checkAttribute(e,"blockIndent")?!i.plugins.has("ListUtils")||!this._indentBehavior.isForward?!0:!i.plugins.get("ListUtils").isListItemBlock(e):!1}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class lR{constructor(n){w(this,"isForward");w(this,"offset");w(this,"unit");this.isForward=n.direction==="forward",this.offset=n.offset,this.unit=n.unit}checkEnabled(n){const e=parseFloat(n||"0");return this.isForward||e>0}getNextIndent(n){const e=parseFloat(n||"0");if(!(!n||n.endsWith(this.unit)))return this.isForward?this.offset+this.unit:void 0;const s=this.isForward?this.offset:-this.offset,r=e+s;return r>0?r+this.unit:void 0}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class cR{constructor(n){w(this,"isForward");w(this,"classes");this.isForward=n.direction==="forward",this.classes=n.classes}checkEnabled(n){const e=this.classes.indexOf(n);return this.isForward?e<this.classes.length-1:e>=0}getNextIndent(n){const e=this.classes.indexOf(n),i=this.isForward?1:-1;return this.classes[e+i]}}const ITe=["paragraph","heading1","heading2","heading3","heading4","heading5","heading6"];class RTe extends Be{constructor(n){super(n),n.config.define("indentBlock",{offset:40,unit:"px"})}static get pluginName(){return"IndentBlock"}init(){const n=this.editor,e=n.config.get("indentBlock");e.classes&&e.classes.length?(this._setupConversionUsingClasses(e.classes),n.commands.add("indentBlock",new Pv(n,new cR({direction:"forward",classes:e.classes}))),n.commands.add("outdentBlock",new Pv(n,new cR({direction:"backward",classes:e.classes})))):(n.data.addStyleProcessorRules(i2e),this._setupConversionUsingOffset(),n.commands.add("indentBlock",new Pv(n,new lR({direction:"forward",offset:e.offset,unit:e.unit}))),n.commands.add("outdentBlock",new Pv(n,new lR({direction:"backward",offset:e.offset,unit:e.unit}))))}afterInit(){const n=this.editor,e=n.model.schema,i=n.commands.get("indent"),s=n.commands.get("outdent"),r=n.config.get("heading.options");(r&&r.map(l=>l.model)||ITe).forEach(l=>{e.isRegistered(l)&&e.extend(l,{allowAttributes:"blockIndent"})}),e.setAttributeProperties("blockIndent",{isFormatting:!0}),i.registerChildCommand(n.commands.get("indentBlock")),s.registerChildCommand(n.commands.get("outdentBlock"))}_setupConversionUsingOffset(){const n=this.editor.conversion,i=this.editor.locale.contentLanguageDirection==="rtl"?"margin-right":"margin-left";n.for("upcast").attributeToAttribute({view:{styles:{[i]:/[\s\S]+/}},model:{key:"blockIndent",value:s=>{if(!s.is("element","li"))return s.getStyle(i)}}}),n.for("downcast").attributeToAttribute({model:"blockIndent",view:s=>({key:"style",value:{[i]:s}})})}_setupConversionUsingClasses(n){const e={model:{key:"blockIndent",values:[]},view:{}};for(const i of n)e.model.values.push(i),e.view[i]={key:"class",value:[i]};this.editor.conversion.attributeToAttribute(e)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class MTe{constructor(){w(this,"_definitions",new Set)}get length(){return this._definitions.size}add(n){Array.isArray(n)?n.forEach(e=>this._definitions.add(e)):this._definitions.add(n)}getDispatcher(){return n=>{n.on("attribute:linkHref",(e,i,s)=>{if(!s.consumable.test(i.item,"attribute:linkHref")||!(i.item.is("selection")||s.schema.isInline(i.item)))return;const r=s.writer,o=r.document.selection;for(const a of this._definitions){const l=r.createAttributeElement("a",a.attributes,{priority:5});a.classes&&r.addClass(a.classes,l);for(const c in a.styles)r.setStyle(c,a.styles[c],l);r.setCustomProperty("link",!0,l),a.callback(i.attributeNewValue)?i.item.is("selection")?r.wrap(o.getFirstRange(),l):r.wrap(s.mapper.toViewRange(i.range),l):r.unwrap(s.mapper.toViewRange(i.range),l)}},{priority:"high"})}}getDispatcherForLinkedImage(){return n=>{n.on("attribute:linkHref:imageBlock",(e,i,{writer:s,mapper:r})=>{const o=r.toViewElement(i.item),a=Array.from(o.getChildren()).find(l=>l.is("element","a"));for(const l of this._definitions){const c=Va(l.attributes);if(l.callback(i.attributeNewValue)){for(const[u,d]of c)u==="class"?s.addClass(d,a):s.setAttribute(u,d,a);l.classes&&s.addClass(l.classes,a);for(const u in l.styles)s.setStyle(u,l.styles[u],a)}else{for(const[u,d]of c)u==="class"?s.removeClass(d,a):s.removeAttribute(u,a);l.classes&&s.removeClass(l.classes,a);for(const u in l.styles)s.removeStyle(u,a)}}})}}}const PTe=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,OTe="^(?:(?:<protocols>):|[^a-z]|[a-z+.-]+(?:[^a-z+.:-]|$))",LTe=/^[\S]+@((?![-_])(?:[-\w\u00a1-\uffff]{0,63}[^-_]\.))+(?:[a-z\u00a1-\uffff]{2,})$/i,BTe=/^((\w+:(\/{2,})?)|(\W))/i,FTe=["https?","ftps?","mailto"],jp="Ctrl+K";function NTe(t){return t.is("attributeElement")&&!!t.getCustomProperty("link")}function uR(t,{writer:n}){const e=n.createAttributeElement("a",{href:t},{priority:5});return n.setCustomProperty("link",!0,e),e}function z$(t,n=FTe){const e=String(t),i=n.join("|"),s=new RegExp(`${OTe.replace("<protocols>",i)}`,"i");return VTe(e,s)?e:"#"}function VTe(t,n){return!!t.replace(PTe,"").match(n)}function DTe(t,n){const e={"Open in a new tab":t("Open in a new tab"),Downloadable:t("Downloadable")};return n.forEach(i=>("label"in i&&e[i.label]&&(i.label=e[i.label]),i)),n}function $Te(t){const n=[];if(t)for(const[e,i]of Object.entries(t)){const s=Object.assign({},i,{id:`link${_ie(e)}`});n.push(s)}return n}function uk(t,n){return t?n.checkAttribute(t.name,"linkHref"):!1}function zTe(t){return LTe.test(t)}function hS(t,n){const e=zTe(t)?"mailto:":n,i=!!e&&!H$(t);return t&&i?e+t:t}function H$(t){return BTe.test(t)}function dR(t){window.open(t,"_blank","noopener")}class HTe extends en{constructor(){super(...arguments);w(this,"manualDecorators",new _s);w(this,"automaticDecorators",new MTe)}restoreManualDecoratorStates(){for(const e of this.manualDecorators)e.value=this._getDecoratorStateFromModel(e.id)}refresh(){const e=this.editor.model,i=e.document.selection,s=i.getSelectedElement()||bs(i.getSelectedBlocks());uk(s,e.schema)?(this.value=s.getAttribute("linkHref"),this.isEnabled=e.schema.checkAttribute(s,"linkHref")):(this.value=i.getAttribute("linkHref"),this.isEnabled=e.schema.checkAttributeInSelection(i,"linkHref"));for(const r of this.manualDecorators)r.value=this._getDecoratorStateFromModel(r.id)}execute(e,i={}){const s=this.editor.model,r=s.document.selection,o=[],a=[];for(const l in i)i[l]?o.push(l):a.push(l);s.change(l=>{if(r.isCollapsed){const c=r.getFirstPosition();if(r.hasAttribute("linkHref")){const u=hR(r);let d=iy(c,"linkHref",r.getAttribute("linkHref"),s);r.getAttribute("linkHref")===u&&(d=this._updateLinkContent(s,l,d,e)),l.setAttribute("linkHref",e,d),o.forEach(f=>{l.setAttribute(f,!0,d)}),a.forEach(f=>{l.removeAttribute(f,d)}),l.setSelection(l.createPositionAfter(d.end.nodeBefore))}else if(e!==""){const u=Va(r.getAttributes());u.set("linkHref",e),o.forEach(f=>{u.set(f,!0)});const{end:d}=s.insertContent(l.createText(e,u),c);l.setSelection(d)}["linkHref",...o,...a].forEach(u=>{l.removeSelectionAttribute(u)})}else{const c=s.schema.getValidRanges(r.getRanges(),"linkHref"),u=[];for(const f of r.getSelectedBlocks())s.schema.checkAttribute(f,"linkHref")&&u.push(l.createRangeOn(f));const d=u.slice();for(const f of c)this._isRangeToUpdate(f,u)&&d.push(f);for(const f of d){let p=f;if(d.length===1){const m=hR(r);r.getAttribute("linkHref")===m&&(p=this._updateLinkContent(s,l,f,e),l.setSelection(l.createSelection(p)))}l.setAttribute("linkHref",e,p),o.forEach(m=>{l.setAttribute(m,!0,p)}),a.forEach(m=>{l.removeAttribute(m,p)})}}})}_getDecoratorStateFromModel(e){const i=this.editor.model,s=i.document.selection,r=s.getSelectedElement();return uk(r,i.schema)?r.getAttribute(e):s.getAttribute(e)}_isRangeToUpdate(e,i){for(const s of i)if(s.containsRange(e))return!1;return!0}_updateLinkContent(e,i,s,r){const o=i.createText(r,{linkHref:r});return e.insertContent(o,s)}}function hR(t){if(t.isCollapsed){const n=t.getFirstPosition();return n.textNode&&n.textNode.data}else{const n=Array.from(t.getFirstRange().getItems());if(n.length>1)return null;const e=n[0];return e.is("$text")||e.is("$textProxy")?e.data:null}}class UTe extends en{refresh(){const n=this.editor.model,e=n.document.selection,i=e.getSelectedElement();uk(i,n.schema)?this.isEnabled=n.schema.checkAttribute(i,"linkHref"):this.isEnabled=n.schema.checkAttributeInSelection(e,"linkHref")}execute(){const n=this.editor,e=this.editor.model,i=e.document.selection,s=n.commands.get("link");e.change(r=>{const o=i.isCollapsed?[iy(i.getFirstPosition(),"linkHref",i.getAttribute("linkHref"),e)]:e.schema.getValidRanges(i.getRanges(),"linkHref");for(const a of o)if(r.removeAttribute("linkHref",a),s)for(const l of s.manualDecorators)r.removeAttribute(l.id,a)})}}class WTe extends li(){constructor({id:e,label:i,attributes:s,classes:r,styles:o,defaultValue:a}){super();w(this,"id");w(this,"defaultValue");w(this,"label");w(this,"attributes");w(this,"classes");w(this,"styles");this.id=e,this.set("value",void 0),this.defaultValue=a,this.label=i,this.attributes=s,this.classes=r,this.styles=o}_createPattern(){return{attributes:this.attributes,classes:this.classes,styles:this.styles}}}const jTe="ck-link_selected",fR="automatic",qTe="manual",KTe=/^(https?:)?\/\//;class oy extends Be{static get pluginName(){return"LinkEditing"}static get requires(){return[A_,YD,da]}constructor(n){super(n),n.config.define("link",{allowCreatingEmptyLinks:!1,addTargetToExternalLinks:!1})}init(){const n=this.editor,e=this.editor.config.get("link.allowedProtocols");n.model.schema.extend("$text",{allowAttributes:"linkHref"}),n.conversion.for("dataDowncast").attributeToElement({model:"linkHref",view:uR}),n.conversion.for("editingDowncast").attributeToElement({model:"linkHref",view:(r,o)=>uR(z$(r,e),o)}),n.conversion.for("upcast").elementToAttribute({view:{name:"a",attributes:{href:!0}},model:{key:"linkHref",value:r=>r.getAttribute("href")}}),n.commands.add("link",new HTe(n)),n.commands.add("unlink",new UTe(n));const i=DTe(n.t,$Te(n.config.get("link.decorators")));this._enableAutomaticDecorators(i.filter(r=>r.mode===fR)),this._enableManualDecorators(i.filter(r=>r.mode===qTe)),n.plugins.get(A_).registerAttribute("linkHref"),QD(n,"linkHref","a",jTe),this._enableLinkOpen(),this._enableSelectionAttributesFixer(),this._enableClipboardIntegration()}_enableAutomaticDecorators(n){const e=this.editor,s=e.commands.get("link").automaticDecorators;e.config.get("link.addTargetToExternalLinks")&&s.add({id:"linkIsExternal",mode:fR,callback:r=>!!r&&KTe.test(r),attributes:{target:"_blank",rel:"noopener noreferrer"}}),s.add(n),s.length&&e.conversion.for("downcast").add(s.getDispatcher())}_enableManualDecorators(n){if(!n.length)return;const e=this.editor,s=e.commands.get("link").manualDecorators;n.forEach(r=>{e.model.schema.extend("$text",{allowAttributes:r.id});const o=new WTe(r);s.add(o),e.conversion.for("downcast").attributeToElement({model:o.id,view:(a,{writer:l,schema:c},{item:u})=>{if((u.is("selection")||c.isInline(u))&&a){const d=l.createAttributeElement("a",o.attributes,{priority:5});o.classes&&l.addClass(o.classes,d);for(const f in o.styles)l.setStyle(f,o.styles[f],d);return l.setCustomProperty("link",!0,d),d}}}),e.conversion.for("upcast").elementToAttribute({view:{name:"a",...o._createPattern()},model:{key:o.id}})})}_enableLinkOpen(){const n=this.editor,i=n.editing.view.document;this.listenTo(i,"click",(s,r)=>{if(!(sn.isMac?r.domEvent.metaKey:r.domEvent.ctrlKey))return;let a=r.domTarget;if(a.tagName.toLowerCase()!="a"&&(a=a.closest("a")),!a)return;const l=a.getAttribute("href");l&&(s.stop(),r.preventDefault(),dR(l))},{context:"$capture"}),this.listenTo(i,"keydown",(s,r)=>{const a=n.commands.get("link").value;a&&r.keyCode===Cn.enter&&r.altKey&&(s.stop(),dR(a))})}_enableSelectionAttributesFixer(){const e=this.editor.model,i=e.document.selection;this.listenTo(i,"change:attribute",(s,{attributeKeys:r})=>{!r.includes("linkHref")||i.hasAttribute("linkHref")||e.change(o=>{GTe(o,YTe(e.schema))})})}_enableClipboardIntegration(){const n=this.editor,e=n.model,i=this.editor.config.get("link.defaultProtocol");i&&this.listenTo(n.plugins.get("ClipboardPipeline"),"contentInsertion",(s,r)=>{e.change(o=>{const a=o.createRangeIn(r.content);for(const l of a.getItems())if(l.hasAttribute("linkHref")){const c=hS(l.getAttribute("linkHref"),i);o.setAttribute("linkHref",c,l)}})})}}function GTe(t,n){t.removeSelectionAttribute("linkHref");for(const e of n)t.removeSelectionAttribute(e)}function YTe(t){return t.getDefinition("$text").allowAttributes.filter(e=>e.startsWith("link"))}class ZTe extends Rt{constructor(e,i,s){super(e);w(this,"focusTracker",new Bi);w(this,"keystrokes",new Zi);w(this,"urlInputView");w(this,"saveButtonView");w(this,"cancelButtonView");w(this,"_manualDecoratorSwitches");w(this,"children");w(this,"_validators");w(this,"_focusables",new Us);w(this,"_focusCycler");const r=e.t;this._validators=s,this.urlInputView=this._createUrlInput(),this.saveButtonView=this._createButton(r("Save"),kt.check,"ck-button-save"),this.saveButtonView.type="submit",this.cancelButtonView=this._createButton(r("Cancel"),kt.cancel,"ck-button-cancel","cancel"),this._manualDecoratorSwitches=this._createManualDecoratorSwitches(i),this.children=this._createFormChildren(i.manualDecorators),this._focusCycler=new Js({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}});const o=["ck","ck-link-form","ck-responsive-form"];i.manualDecorators.length&&o.push("ck-link-form_layout-vertical","ck-vertical-form"),this.setTemplate({tag:"form",attributes:{class:o,tabindex:"-1"},children:this.children})}getDecoratorSwitchesState(){return Array.from(this._manualDecoratorSwitches).reduce((e,i)=>(e[i.name]=i.isOn,e),{})}render(){super.render(),Ih({view:this}),[this.urlInputView,...this._manualDecoratorSwitches,this.saveButtonView,this.cancelButtonView].forEach(i=>{this._focusables.add(i),this.focusTracker.add(i.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}isValid(){this.resetFormStatus();for(const e of this._validators){const i=e(this);if(i)return this.urlInputView.errorText=i,!1}return!0}resetFormStatus(){this.urlInputView.errorText=null}_createUrlInput(){const e=this.locale.t,i=new ms(this.locale,Jo);return i.fieldView.inputMode="url",i.label=e("Link URL"),i}_createButton(e,i,s,r){const o=new Yt(this.locale);return o.set({label:e,icon:i,tooltip:!0}),o.extendTemplate({attributes:{class:s}}),r&&o.delegate("execute").to(this,r),o}_createManualDecoratorSwitches(e){const i=this.createCollection();for(const s of e.manualDecorators){const r=new bh(this.locale);r.set({name:s.id,label:s.label,withText:!0}),r.bind("isOn").toMany([s,e],"value",(o,a)=>a===void 0&&o===void 0?!!s.defaultValue:!!o),r.on("execute",()=>{s.set("value",!r.isOn)}),i.add(r)}return i}_createFormChildren(e){const i=this.createCollection();if(i.add(this.urlInputView),e.length){const s=new Rt;s.setTemplate({tag:"ul",children:this._manualDecoratorSwitches.map(r=>({tag:"li",children:[r],attributes:{class:["ck","ck-list__item"]}})),attributes:{class:["ck","ck-reset","ck-list"]}}),i.add(s)}return i.add(this.saveButtonView),i.add(this.cancelButtonView),i}get url(){const{element:e}=this.urlInputView.fieldView;return e?e.value.trim():null}}var XTe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184zm4.919 10.562-1.414 1.414a.75.75 0 1 1-1.06-1.06l1.414-1.415-1.415-1.414a.75.75 0 0 1 1.061-1.06l1.414 1.414 1.414-1.415a.75.75 0 0 1 1.061 1.061l-1.414 1.414 1.414 1.415a.75.75 0 0 1-1.06 1.06l-1.415-1.414z"/></svg>';class JTe extends Rt{constructor(e,i={}){super(e);w(this,"focusTracker",new Bi);w(this,"keystrokes",new Zi);w(this,"previewButtonView");w(this,"unlinkButtonView");w(this,"editButtonView");w(this,"_focusables",new Us);w(this,"_focusCycler");w(this,"_linkConfig");const s=e.t;this.previewButtonView=this._createPreviewButton(),this.unlinkButtonView=this._createButton(s("Unlink"),XTe,"unlink"),this.editButtonView=this._createButton(s("Edit link"),kt.pencil,"edit"),this.set("href",void 0),this._linkConfig=i,this._focusCycler=new Js({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-link-actions","ck-responsive-form"],tabindex:"-1"},children:[this.previewButtonView,this.editButtonView,this.unlinkButtonView]})}render(){super.render(),[this.previewButtonView,this.editButtonView,this.unlinkButtonView].forEach(i=>{this._focusables.add(i),this.focusTracker.add(i.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createButton(e,i,s){const r=new Yt(this.locale);return r.set({label:e,icon:i,tooltip:!0}),r.delegate("execute").to(this,s),r}_createPreviewButton(){const e=new Yt(this.locale),i=this.bindTemplate,s=this.t;return e.set({withText:!0,tooltip:s("Open link in new tab")}),e.extendTemplate({attributes:{class:["ck","ck-link-actions__preview"],href:i.to("href",r=>r&&z$(r,this._linkConfig.allowedProtocols)),target:"_blank",rel:"noopener noreferrer"}}),e.bind("label").to(this,"href",r=>r||s("This link has no URL")),e.bind("isEnabled").to(this,"href",r=>!!r),e.template.tag="a",e.template.eventListeners={},e}}var U$='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184z"/></svg>';const il="link-ui";class W$ extends Be{constructor(){super(...arguments);w(this,"actionsView",null);w(this,"formView",null);w(this,"_balloon")}static get requires(){return[Mo]}static get pluginName(){return"LinkUI"}init(){const e=this.editor,i=this.editor.t;e.editing.view.addObserver(Rye),this._balloon=e.plugins.get(Mo),this._createToolbarLinkButton(),this._enableBalloonActivators(),e.conversion.for("editingDowncast").markerToHighlight({model:il,view:{classes:["ck-fake-link-selection"]}}),e.conversion.for("editingDowncast").markerToElement({model:il,view:(s,{writer:r})=>{if(!s.markerRange.isCollapsed)return null;const o=r.createUIElement("span");return r.addClass(["ck-fake-link-selection","ck-fake-link-selection_collapsed"],o),o}}),e.accessibility.addKeystrokeInfos({keystrokes:[{label:i("Create link"),keystroke:jp},{label:i("Move out of a link"),keystroke:[["arrowleft","arrowleft"],["arrowright","arrowright"]]}]})}destroy(){super.destroy(),this.formView&&this.formView.destroy(),this.actionsView&&this.actionsView.destroy()}_createViews(){this.actionsView=this._createActionsView(),this.formView=this._createFormView(),this._enableUserBalloonInteractions()}_createActionsView(){const e=this.editor,i=new JTe(e.locale,e.config.get("link")),s=e.commands.get("link"),r=e.commands.get("unlink");return i.bind("href").to(s,"value"),i.editButtonView.bind("isEnabled").to(s),i.unlinkButtonView.bind("isEnabled").to(r),this.listenTo(i,"edit",()=>{this._addFormView()}),this.listenTo(i,"unlink",()=>{e.execute("unlink"),this._hideUI()}),i.keystrokes.set("Esc",(o,a)=>{this._hideUI(),a()}),i.keystrokes.set(jp,(o,a)=>{this._addFormView(),a()}),i}_createFormView(){const e=this.editor,i=e.commands.get("link"),s=e.config.get("link.defaultProtocol"),r=new(Zw(ZTe))(e.locale,i,QTe(e));return r.urlInputView.fieldView.bind("value").to(i,"value"),r.urlInputView.bind("isEnabled").to(i,"isEnabled"),r.saveButtonView.bind("isEnabled").to(i,"isEnabled"),this.listenTo(r,"submit",()=>{if(r.isValid()){const{value:o}=r.urlInputView.fieldView.element,a=hS(o,s);e.execute("link",a,r.getDecoratorSwitchesState()),this._closeFormView()}}),this.listenTo(r.urlInputView,"change:errorText",()=>{e.ui.update()}),this.listenTo(r,"cancel",()=>{this._closeFormView()}),r.keystrokes.set("Esc",(o,a)=>{this._closeFormView(),a()}),r}_createToolbarLinkButton(){const e=this.editor;e.ui.componentFactory.add("link",()=>{const i=this._createButton(Yt);return i.set({tooltip:!0}),i}),e.ui.componentFactory.add("menuBar:link",()=>{const i=this._createButton(Xi);return i.set({role:"menuitemcheckbox"}),i})}_createButton(e){const i=this.editor,s=i.locale,r=i.commands.get("link"),o=new e(i.locale),a=s.t;return o.set({label:a("Link"),icon:U$,keystroke:jp,isToggleable:!0}),o.bind("isEnabled").to(r,"isEnabled"),o.bind("isOn").to(r,"value",l=>!!l),this.listenTo(o,"execute",()=>this._showUI(!0)),o}_enableBalloonActivators(){const e=this.editor,i=e.editing.view.document;this.listenTo(i,"click",()=>{this._getSelectedLinkElement()&&this._showUI()}),e.keystrokes.set(jp,(s,r)=>{r(),e.commands.get("link").isEnabled&&this._showUI(!0)})}_enableUserBalloonInteractions(){this.editor.keystrokes.set("Tab",(e,i)=>{this._areActionsVisible&&!this.actionsView.focusTracker.isFocused&&(this.actionsView.focus(),i())},{priority:"high"}),this.editor.keystrokes.set("Esc",(e,i)=>{this._isUIVisible&&(this._hideUI(),i())}),Xu({emitter:this.formView,activator:()=>this._isUIInPanel,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideUI()})}_addActionsView(){this.actionsView||this._createViews(),!this._areActionsInPanel&&this._balloon.add({view:this.actionsView,position:this._getBalloonPositionData()})}_addFormView(){if(this.formView||this._createViews(),this._isFormInPanel)return;const i=this.editor.commands.get("link");this.formView.disableCssTransitions(),this.formView.resetFormStatus(),this._balloon.add({view:this.formView,position:this._getBalloonPositionData()}),this.formView.urlInputView.fieldView.value=i.value||"",this._balloon.visibleView===this.formView&&this.formView.urlInputView.fieldView.select(),this.formView.enableCssTransitions()}_closeFormView(){const e=this.editor.commands.get("link");e.restoreManualDecoratorStates(),e.value!==void 0?this._removeFormView():this._hideUI()}_removeFormView(){this._isFormInPanel&&(this.formView.saveButtonView.focus(),this.formView.urlInputView.fieldView.reset(),this._balloon.remove(this.formView),this.editor.editing.view.focus(),this._hideFakeVisualSelection())}_showUI(e=!1){this.formView||this._createViews(),this._getSelectedLinkElement()?(this._areActionsVisible?this._addFormView():this._addActionsView(),e&&this._balloon.showStack("main")):(this._showFakeVisualSelection(),this._addActionsView(),e&&this._balloon.showStack("main"),this._addFormView()),this._startUpdatingUI()}_hideUI(){if(!this._isUIInPanel)return;const e=this.editor;this.stopListening(e.ui,"update"),this.stopListening(this._balloon,"change:visibleView"),e.editing.view.focus(),this._removeFormView(),this._balloon.remove(this.actionsView),this._hideFakeVisualSelection()}_startUpdatingUI(){const e=this.editor,i=e.editing.view.document;let s=this._getSelectedLinkElement(),r=a();const o=()=>{const l=this._getSelectedLinkElement(),c=a();s&&!l||!s&&c!==r?this._hideUI():this._isUIVisible&&this._balloon.updatePosition(this._getBalloonPositionData()),s=l,r=c};function a(){return i.selection.focus.getAncestors().reverse().find(l=>l.is("element"))}this.listenTo(e.ui,"update",o),this.listenTo(this._balloon,"change:visibleView",o)}get _isFormInPanel(){return!!this.formView&&this._balloon.hasView(this.formView)}get _areActionsInPanel(){return!!this.actionsView&&this._balloon.hasView(this.actionsView)}get _areActionsVisible(){return!!this.actionsView&&this._balloon.visibleView===this.actionsView}get _isUIInPanel(){return this._isFormInPanel||this._areActionsInPanel}get _isUIVisible(){const e=this._balloon.visibleView;return!!this.formView&&e==this.formView||this._areActionsVisible}_getBalloonPositionData(){const e=this.editor.editing.view,i=this.editor.model,s=e.document;let r;if(i.markers.has(il)){const o=Array.from(this.editor.editing.mapper.markerNameToElements(il)),a=e.createRange(e.createPositionBefore(o[0]),e.createPositionAfter(o[o.length-1]));r=e.domConverter.viewRangeToDom(a)}else r=()=>{const o=this._getSelectedLinkElement();return o?e.domConverter.mapViewToDom(o):e.domConverter.viewRangeToDom(s.selection.getFirstRange())};return{target:r}}_getSelectedLinkElement(){const e=this.editor.editing.view,i=e.document.selection,s=i.getSelectedElement();if(i.isCollapsed||s&&ps(s))return Q5(i.getFirstPosition());{const r=i.getFirstRange().getTrimmed(),o=Q5(r.start),a=Q5(r.end);return!o||o!=a?null:e.createRangeIn(o).getTrimmed().isEqual(r)?o:null}}_showFakeVisualSelection(){const e=this.editor.model;e.change(i=>{const s=e.document.selection.getFirstRange();if(e.markers.has(il))i.updateMarker(il,{range:s});else if(s.start.isAtEnd){const r=s.start.getLastMatchingPosition(({item:o})=>!e.schema.isContent(o),{boundaries:s});i.addMarker(il,{usingOperation:!1,affectsData:!1,range:i.createRange(r,s.end)})}else i.addMarker(il,{usingOperation:!1,affectsData:!1,range:s})})}_hideFakeVisualSelection(){const e=this.editor.model;e.markers.has(il)&&e.change(i=>{i.removeMarker(il)})}}function Q5(t){return t.getAncestors().find(n=>NTe(n))||null}function QTe(t){const n=t.t,e=t.config.get("link.allowCreatingEmptyLinks");return[i=>{if(!e&&!i.url.length)return n("Link URL must not be empty.")}]}const exe=4,j$=new RegExp("(^|\\s)(((?:(?:(?:https?|ftp):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(((?!www\\.)|(www\\.))(?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.)+(?:[a-z\\u00a1-\\uffff]{2,63})))(?::\\d{2,5})?(?:[/?#]\\S*)?)|((www.|(\\S+@))((?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.))+(?:[a-z\\u00a1-\\uffff]{2,63})))$","i"),txe=2;class q$ extends Be{static get requires(){return[Mh,oy]}static get pluginName(){return"AutoLink"}init(){const e=this.editor.model.document.selection;e.on("change:range",()=>{this.isEnabled=!e.anchor.parent.is("element","codeBlock")}),this._enableTypingHandling()}afterInit(){this._enableEnterHandling(),this._enableShiftEnterHandling(),this._enablePasteLinking()}_expandLinkRange(n,e){return e.textNode&&e.textNode.hasAttribute("linkHref")?iy(e,"linkHref",e.textNode.getAttribute("linkHref"),n):null}_selectEntireLinks(n,e){const s=this.editor.model,r=s.document.selection,o=r.getFirstPosition(),a=r.getLastPosition();let l=e.getJoined(this._expandLinkRange(s,o)||e);l&&(l=l.getJoined(this._expandLinkRange(s,a)||e)),l&&(l.start.isBefore(o)||l.end.isAfter(a))&&n.setSelection(l)}_enablePasteLinking(){const n=this.editor,e=n.model,i=e.document.selection,s=n.plugins.get("ClipboardPipeline"),r=n.commands.get("link");s.on("inputTransformation",(o,a)=>{if(!this.isEnabled||!r.isEnabled||i.isCollapsed||a.method!=="paste"||i.rangeCount>1)return;const l=i.getFirstRange(),c=a.dataTransfer.getData("text/plain");if(!c)return;const u=c.match(j$);u&&u[2]===c&&(e.change(d=>{this._selectEntireLinks(d,l),r.execute(c)}),o.stop())},{priority:"high"})}_enableTypingHandling(){const n=this.editor,e=new tS(n.model,i=>{if(!nxe(i))return;const s=mR(i.substr(0,i.length-1));if(s)return{url:s}});e.on("matched:data",(i,s)=>{const{batch:r,range:o,url:a}=s;if(!r.isTyping)return;const l=o.end.getShiftedBy(-1),c=l.getShiftedBy(-a.length),u=n.model.createRange(c,l);this._applyAutoLink(a,u)}),e.bind("isEnabled").to(this)}_enableEnterHandling(){const n=this.editor,e=n.model,i=n.commands.get("enter");i&&i.on("execute",()=>{const s=e.document.selection.getFirstPosition();if(!s.parent.previousSibling)return;const r=e.createRangeIn(s.parent.previousSibling);this._checkAndApplyAutoLinkOnRange(r)})}_enableShiftEnterHandling(){const n=this.editor,e=n.model,i=n.commands.get("shiftEnter");i&&i.on("execute",()=>{const s=e.document.selection.getFirstPosition(),r=e.createRange(e.createPositionAt(s.parent,0),s.getShiftedBy(-1));this._checkAndApplyAutoLinkOnRange(r)})}_checkAndApplyAutoLinkOnRange(n){const e=this.editor.model,{text:i,range:s}=JD(n,e),r=mR(i);if(r){const o=e.createRange(s.end.getShiftedBy(-r.length),s.end);this._applyAutoLink(r,o)}}_applyAutoLink(n,e){const i=this.editor.model,s=this.editor.config.get("link.defaultProtocol"),r=hS(n,s);!this.isEnabled||!ixe(e,i)||!H$(r)||sxe(e)||this._persistAutoLink(r,e)}_persistAutoLink(n,e){const i=this.editor.model,s=this.editor.plugins.get("Delete");i.enqueueChange(r=>{r.setAttribute("linkHref",n,e),i.enqueueChange(()=>{s.requestUndoOnBackspace()})})}}function nxe(t){return t.length>exe&&t[t.length-1]===" "&&t[t.length-2]!==" "}function mR(t){const n=j$.exec(t);return n?n[txe]:null}function ixe(t,n){return n.schema.checkAttributeInSelection(n.createSelection(t),"linkHref")}function sxe(t){const n=t.start.nodeAfter;return!!n&&n.hasAttribute("linkHref")}class rxe extends Be{static get requires(){return[oy,W$,q$]}static get pluginName(){return"Link"}}class oxe extends Be{static get requires(){return["ImageEditing","ImageUtils",oy]}static get pluginName(){return"LinkImageEditing"}afterInit(){const n=this.editor,e=n.model.schema;n.plugins.has("ImageBlockEditing")&&e.extend("imageBlock",{allowAttributes:["linkHref"]}),n.conversion.for("upcast").add(axe(n)),n.conversion.for("downcast").add(lxe(n)),this._enableAutomaticDecorators(),this._enableManualDecorators()}_enableAutomaticDecorators(){const n=this.editor,i=n.commands.get("link").automaticDecorators;i.length&&n.conversion.for("downcast").add(i.getDispatcherForLinkedImage())}_enableManualDecorators(){const n=this.editor,e=n.commands.get("link");for(const i of e.manualDecorators)n.plugins.has("ImageBlockEditing")&&n.model.schema.extend("imageBlock",{allowAttributes:i.id}),n.plugins.has("ImageInlineEditing")&&n.model.schema.extend("imageInline",{allowAttributes:i.id}),n.conversion.for("downcast").add(cxe(i)),n.conversion.for("upcast").add(uxe(n,i))}}function axe(t){const n=t.plugins.has("ImageInlineEditing"),e=t.plugins.get("ImageUtils");return i=>{i.on("element:a",(s,r,o)=>{const a=r.viewItem,l=e.findViewImgElement(a);if(!l)return;const c=l.findAncestor(p=>e.isBlockImageView(p));if(n&&!c)return;const u={attributes:["href"]};if(!o.consumable.consume(a,u))return;const d=a.getAttribute("href");if(!d)return;let f=r.modelCursor.parent;if(!f.is("element","imageBlock")){const p=o.convertItem(l,r.modelCursor);r.modelRange=p.modelRange,r.modelCursor=p.modelCursor,f=r.modelCursor.nodeBefore}f&&f.is("element","imageBlock")&&o.writer.setAttribute("linkHref",d,f)},{priority:"high"})}}function lxe(t){const n=t.plugins.get("ImageUtils");return e=>{e.on("attribute:linkHref:imageBlock",(i,s,r)=>{if(!r.consumable.consume(s.item,i.name))return;const o=r.mapper.toViewElement(s.item),a=r.writer,l=Array.from(o.getChildren()).find(d=>d.is("element","a")),c=n.findViewImgElement(o),u=c.parent.is("element","picture")?c.parent:c;if(l)s.attributeNewValue?a.setAttribute("href",s.attributeNewValue,l):(a.move(a.createRangeOn(u),a.createPositionAt(o,0)),a.remove(l));else{const d=a.createContainerElement("a",{href:s.attributeNewValue});a.insert(a.createPositionAt(o,0),d),a.move(a.createRangeOn(u),a.createPositionAt(d,0))}},{priority:"high"})}}function cxe(t){return n=>{n.on(`attribute:${t.id}:imageBlock`,(e,i,s)=>{const r=s.mapper.toViewElement(i.item),o=Array.from(r.getChildren()).find(a=>a.is("element","a"));if(o){for(const[a,l]of Va(t.attributes))s.writer.setAttribute(a,l,o);t.classes&&s.writer.addClass(t.classes,o);for(const a in t.styles)s.writer.setStyle(a,t.styles[a],o)}})}}function uxe(t,n){const e=t.plugins.has("ImageInlineEditing"),i=t.plugins.get("ImageUtils");return s=>{s.on("element:a",(r,o,a)=>{const l=o.viewItem,c=i.findViewImgElement(l);if(!c)return;const u=c.findAncestor(m=>i.isBlockImageView(m));if(e&&!u)return;const f=new Io(n._createPattern()).match(l);if(!f||!a.consumable.consume(l,f.match))return;const p=o.modelCursor.nodeBefore||o.modelCursor.parent;a.writer.setAttribute(n.id,!0,p)},{priority:"high"})}}class dxe extends Be{static get requires(){return[oy,W$,"ImageBlockEditing"]}static get pluginName(){return"LinkImageUI"}init(){const n=this.editor,e=n.editing.view.document;this.listenTo(e,"click",(i,s)=>{this._isSelectedLinkedImage(n.model.document.selection)&&(s.preventDefault(),i.stop())},{priority:"high"}),this._createToolbarLinkImageButton()}_createToolbarLinkImageButton(){const n=this.editor,e=n.t;n.ui.componentFactory.add("linkImage",i=>{const s=new Yt(i),r=n.plugins.get("LinkUI"),o=n.commands.get("link");return s.set({isEnabled:!0,label:e("Link image"),icon:U$,keystroke:jp,tooltip:!0,isToggleable:!0}),s.bind("isEnabled").to(o,"isEnabled"),s.bind("isOn").to(o,"value",a=>!!a),this.listenTo(s,"execute",()=>{this._isSelectedLinkedImage(n.model.document.selection)?r._addActionsView():r._showUI(!0)}),s})}_isSelectedLinkedImage(n){const e=n.getSelectedElement();return this.editor.plugins.get("ImageUtils").isImage(e)&&e.hasAttribute("linkHref")}}class hxe extends Be{static get requires(){return[oxe,dxe]}static get pluginName(){return"LinkImage"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ha{constructor(n,e){w(this,"_startElement");w(this,"_referenceIndent");w(this,"_isForward");w(this,"_includeSelf");w(this,"_sameAttributes");w(this,"_sameIndent");w(this,"_lowerIndent");w(this,"_higherIndent");this._startElement=n,this._referenceIndent=n.getAttribute("listIndent"),this._isForward=e.direction=="forward",this._includeSelf=!!e.includeSelf,this._sameAttributes=Si(e.sameAttributes||[]),this._sameIndent=!!e.sameIndent,this._lowerIndent=!!e.lowerIndent,this._higherIndent=!!e.higherIndent}static first(n,e){const s=new this(n,e)[Symbol.iterator]();return bs(s)}*[Symbol.iterator](){const n=[];for(const{node:e}of Y1(this._getStartNode(),this._isForward?"forward":"backward")){const i=e.getAttribute("listIndent");if(i<this._referenceIndent){if(!this._lowerIndent)break;this._referenceIndent=i}else if(i>this._referenceIndent){if(!this._higherIndent)continue;if(!this._isForward){n.push(e);continue}}else{if(!this._sameIndent){if(this._higherIndent){n.length&&(yield*n,n.length=0);break}continue}if(this._sameAttributes.some(s=>e.getAttribute(s)!==this._startElement.getAttribute(s)))break}n.length&&(yield*n,n.length=0),yield e}}_getStartNode(){return this._includeSelf?this._startElement:this._isForward?this._startElement.nextSibling:this._startElement.previousSibling}}function*Y1(t,n="forward"){const e=n=="forward",i=[];let s=null;for(;Pi(t);){let r=null;if(s){const o=t.getAttribute("listIndent"),a=s.getAttribute("listIndent");o>a?i[a]=s:o<a?(r=i[o],i.length=o):r=s}yield{node:t,previous:s,previousNodeInList:r},s=t,t=e?t.nextSibling:t.previousSibling}}class fxe{constructor(n){w(this,"_listHead");this._listHead=n}[Symbol.iterator](){return Y1(this._listHead,"forward")}}class mm{static next(){return to()}}function Pi(t){return!!t&&t.is("element")&&t.hasAttribute("listItemId")}function m1(t,n={}){return[...zu(t,{...n,direction:"backward"}),...zu(t,{...n,direction:"forward"})]}function zu(t,n={}){const e=n.direction=="forward",i=Array.from(new ha(t,{...n,includeSelf:e,sameIndent:!0,sameAttributes:"listItemId"}));return e?i:i.reverse()}function mxe(t){return Array.from(new ha(t,{direction:"forward",higherIndent:!0}))}function K$(t,n){const e=new ha(t,{sameIndent:!0,sameAttributes:"listType",...n}),i=new ha(t,{sameIndent:!0,sameAttributes:"listType",includeSelf:!0,direction:"forward",...n});return[...Array.from(e).reverse(),...i]}function yc(t){return!ha.first(t,{sameIndent:!0,sameAttributes:"listItemId"})}function pR(t){return!ha.first(t,{direction:"forward",sameIndent:!0,sameAttributes:"listItemId"})}function Z1(t,n={}){t=Si(t);const e=n.withNested!==!1,i=new Set;for(const s of t)for(const r of m1(s,{higherIndent:e}))i.add(r);return Lh(i)}function ay(t){t=Si(t);const n=new Set;for(const e of t)for(const i of K$(e))n.add(i);return Lh(n)}function fS(t,n){const e=zu(t,{direction:"forward"}),i=mm.next();for(const s of e)n.setAttribute("listItemId",i,s);return e}function dk(t,n,e){const i={};for(const[r,o]of n.getAttributes())r.startsWith("list")&&(i[r]=o);const s=zu(t,{direction:"forward"});for(const r of s)e.setAttributes(i,r);return s}function hk(t,n,{expand:e,indentBy:i=1}={}){t=Si(t);const s=e?Z1(t):t;for(const r of s){const o=r.getAttribute("listIndent")+i;o<0?ly(r,n):n.setAttribute("listIndent",o,r)}return s}function pxe(t,n){t=Si(t);const e=Z1(t),i=new Set,s=Math.min(...e.map(o=>o.getAttribute("listIndent"))),r=new Map;for(const o of e)r.set(o,ha.first(o,{lowerIndent:!0}));for(const o of e){if(i.has(o))continue;i.add(o);const a=o.getAttribute("listIndent")-1;if(a<0){ly(o,n);continue}if(o.getAttribute("listIndent")==s){const l=vxe(o,r.get(o),n);for(const c of l)i.add(c);if(l.length)continue}n.setAttribute("listIndent",a,o)}return Lh(i)}function ly(t,n){t=Si(t);for(const e of t)e.is("element","listItem")&&n.rename(e,"paragraph");for(const e of t)for(const i of e.getAttributeKeys())i.startsWith("list")&&n.removeAttribute(i,e);return t}function p1(t){if(!t.length)return!1;const n=t[0].getAttribute("listItemId");return n?!t.some(e=>e.getAttribute("listItemId")!=n):!1}function gxe(t,n){const e=[];let i=Number.POSITIVE_INFINITY;for(const{node:s}of Y1(t.nextSibling,"forward")){const r=s.getAttribute("listIndent");if(r==0)break;r<i&&(i=r);const o=r-i;n.setAttribute("listIndent",o,s),e.push(s)}return e}function Lh(t){return Array.from(t).filter(n=>n.root.rootName!=="$graveyard").sort((n,e)=>n.index-e.index)}function g1(t){const n=t.document.selection.getSelectedElement();return n&&t.schema.isObject(n)&&t.schema.isBlock(n)?n:null}function e3(t,n){return n.checkChild(t.parent,"listItem")&&n.checkChild(t,"$text")&&!n.isObject(t)}function B_(t){return t=="numbered"||t=="customNumbered"}function vxe(t,n,e){return zu(n,{direction:"forward"}).pop().index>t.index?dk(t,n,e):[]}class gR extends en{constructor(e,i){super(e);w(this,"_direction");this._direction=i}refresh(){this.isEnabled=this._checkEnabled()}execute(){const e=this.editor.model,i=vR(e.document.selection);e.change(s=>{const r=[];p1(i)&&!yc(i[0])?(this._direction=="forward"&&r.push(...hk(i,s)),r.push(...fS(i[0],s))):this._direction=="forward"?r.push(...hk(i,s,{expand:!0})):r.push(...pxe(i,s));for(const o of r){if(!o.hasAttribute("listType"))continue;const a=ha.first(o,{sameIndent:!0});a&&s.setAttribute("listType",a.getAttribute("listType"),o)}this._fireAfterExecute(r)})}_fireAfterExecute(e){this.fire("afterExecute",Lh(new Set(e)))}_checkEnabled(){let e=vR(this.editor.model.document.selection),i=e[0];if(!i)return!1;if(this._direction=="backward"||p1(e)&&!yc(e[0]))return!0;e=Z1(e),i=e[0];const s=ha.first(i,{sameIndent:!0});return s?s.getAttribute("listType")==i.getAttribute("listType"):!1}}function vR(t){const n=Array.from(t.getSelectedBlocks()),e=n.findIndex(i=>!Pi(i));return e!=-1&&(n.length=e),n}class qp extends en{constructor(e,i,s={}){super(e);w(this,"type");w(this,"_listWalkerOptions");this.type=i,this._listWalkerOptions=s.multiLevel?{higherIndent:!0,lowerIndent:!0,sameAttributes:[]}:void 0}refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(e={}){const i=this.editor.model,s=i.document,r=g1(i),o=Array.from(s.selection.getSelectedBlocks()).filter(l=>i.schema.checkAttribute(l,"listType")||e3(l,i.schema)),a=e.forceValue!==void 0?!e.forceValue:this.value;i.change(l=>{if(a){const c=o[o.length-1],u=zu(c,{direction:"forward"}),d=[];u.length>1&&d.push(...fS(u[1],l)),d.push(...ly(o,l)),d.push(...gxe(c,l)),this._fireAfterExecute(d)}else if((r||s.selection.isCollapsed)&&Pi(o[0])){const c=K$(r||o[0],this._listWalkerOptions);for(const u of c)l.setAttributes({...e.additionalAttributes,listType:this.type},u);this._fireAfterExecute(c)}else{const c=[];for(const u of o)if(!u.hasAttribute("listType"))!u.is("element","listItem")&&e3(u,i.schema)&&l.rename(u,"listItem"),l.setAttributes({...e.additionalAttributes,listIndent:0,listItemId:mm.next(),listType:this.type},u),c.push(u);else for(const d of Z1(u,{withNested:!1}))d.getAttribute("listType")!=this.type&&(l.setAttributes({...e.additionalAttributes,listType:this.type},d),c.push(d));this._fireAfterExecute(c)}})}_fireAfterExecute(e){this.fire("afterExecute",Lh(new Set(e)))}_getValue(){const e=this.editor.model.document.selection,i=Array.from(e.getSelectedBlocks());if(!i.length)return!1;for(const s of i)if(s.getAttribute("listType")!=this.type)return!1;return!0}_checkEnabled(){const e=this.editor.model,i=e.schema,s=e.document.selection,r=Array.from(s.getSelectedBlocks());if(!r.length)return!1;if(this.value)return!0;for(const o of r)if(i.checkAttribute(o,"listType")||e3(o,i))return!0;return!1}}class bR extends en{constructor(e,i){super(e);w(this,"_direction");this._direction=i}refresh(){this.isEnabled=this._checkEnabled()}execute({shouldMergeOnBlocksContentLevel:e=!1}={}){const i=this.editor.model,s=i.document.selection,r=[];i.change(o=>{const{firstElement:a,lastElement:l}=this._getMergeSubjectElements(s,e),c=a.getAttribute("listIndent")||0,u=l.getAttribute("listIndent"),d=l.getAttribute("listItemId");if(c!=u){const f=mxe(l);r.push(...hk([l,...f],o,{indentBy:c-u,expand:c<u}))}if(e){let f=s;s.isCollapsed&&(f=o.createSelection(o.createRange(o.createPositionAt(a,"end"),o.createPositionAt(l,0)))),i.deleteContent(f,{doNotResetEntireContent:s.isCollapsed});const p=f.getLastPosition().parent,m=p.nextSibling;r.push(p),m&&m!==l&&m.getAttribute("listItemId")==d&&r.push(...dk(m,p,o))}else r.push(...dk(l,a,o));this._fireAfterExecute(r)})}_fireAfterExecute(e){this.fire("afterExecute",Lh(new Set(e)))}_checkEnabled(){const e=this.editor.model,i=e.document.selection,s=g1(e);if(i.isCollapsed||s){const r=s||i.getFirstPosition().parent;if(!Pi(r))return!1;const o=this._direction=="backward"?r.previousSibling:r.nextSibling;if(!o||p1([r,o]))return!1}else{const r=i.getLastPosition(),o=i.getFirstPosition();if(r.parent===o.parent||!Pi(r.parent))return!1}return!0}_getMergeSubjectElements(e,i){const s=this.editor.model,r=g1(s);let o,a;if(e.isCollapsed||r){const l=r||e.getFirstPosition().parent,c=yc(l);this._direction=="backward"?(a=l,c&&!i?o=ha.first(l,{sameIndent:!0,lowerIndent:!0}):o=l.previousSibling):(o=l,a=l.nextSibling)}else o=e.getFirstPosition().parent,a=e.getLastPosition().parent;return{firstElement:o,lastElement:a}}}class _R extends en{constructor(e,i){super(e);w(this,"_direction");this._direction=i}refresh(){this.isEnabled=this._checkEnabled()}execute(){this.editor.model.change(i=>{const s=fS(this._getStartBlock(),i);this._fireAfterExecute(s)})}_fireAfterExecute(e){this.fire("afterExecute",Lh(new Set(e)))}_checkEnabled(){const e=this.editor.model.document.selection,i=this._getStartBlock();return e.isCollapsed&&Pi(i)&&!yc(i)}_getStartBlock(){const i=this.editor.model.document.selection.getFirstPosition().parent;return this._direction=="before"?i:i.nextSibling}}class bxe extends Be{static get pluginName(){return"ListUtils"}expandListBlocksToCompleteList(n){return ay(n)}isFirstBlockOfListItem(n){return yc(n)}isListItemBlock(n){return Pi(n)}expandListBlocksToCompleteItems(n,e={}){return Z1(n,e)}isNumberedListType(n){return B_(n)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function _xe(t){return t.is("element","ol")||t.is("element","ul")}function fk(t){return t.is("element","li")}function wxe(t){let n=0,e=t.parent;for(;e;){if(fk(e))n++;else{const i=e.previousSibling;i&&fk(i)&&n++}e=e.parent}return n}function yxe(t,n,e,i=Y$(e,n)){return t.createAttributeElement(G$(e),null,{priority:2*n/100-100,id:i})}function Cxe(t,n,e){return t.createAttributeElement("li",null,{priority:(2*n+1)/100-100,id:e})}function G$(t){return t=="numbered"||t=="customNumbered"?"ol":"ul"}function Y$(t,n){return`list-${t}-${n}`}function Ta(t,n){const e=t.nodeBefore;if(Pi(e)){let i=e;for(const{node:s}of Y1(i,"backward"))if(i=s,n.has(i))return;n.set(e,i)}else{const i=t.nodeAfter;Pi(i)&&n.set(i,i)}}function kxe(t,n){let e=0,i=-1,s=null,r=!1;for(const{node:o}of t){const a=o.getAttribute("listIndent");if(a>e){let l;s===null?(s=a-e,l=e):(s>a&&(s=a),l=a-s),l>i+1&&(l=i+1),n.setAttribute("listIndent",l,o),r=!0,i=l}else s=null,e=a+1,i=a}return r}function Exe(t,n,e){const i=new Set;let s=!1;for(const{node:r}of t){if(i.has(r))continue;let o=r.getAttribute("listType"),a=r.getAttribute("listItemId");if(n.has(a)&&(a=mm.next()),n.add(a),r.is("element","listItem")){r.getAttribute("listItemId")!=a&&(e.setAttribute("listItemId",a,r),s=!0);continue}for(const l of zu(r,{direction:"forward"}))i.add(l),l.getAttribute("listType")!=o&&(a=mm.next(),o=l.getAttribute("listType")),l.getAttribute("listItemId")!=a&&(e.setAttribute("listItemId",a,l),s=!0)}return s}function Sxe(){return(t,n,e)=>{const{writer:i,schema:s}=e;if(!n.modelRange)return;const r=Array.from(n.modelRange.getItems({shallow:!0})).filter(d=>s.checkAttribute(d,"listItemId"));if(!r.length)return;const o=mm.next(),a=wxe(n.viewItem);let l=n.viewItem.parent&&n.viewItem.parent.is("element","ol")?"numbered":"bulleted";const c=r[0].getAttribute("listType");c&&(l=c);const u={listItemId:o,listIndent:a,listType:l};for(const d of r)d.hasAttribute("listItemId")||i.setAttributes(u,d);r.length>1&&r[1].getAttribute("listItemId")!=u.listItemId&&e.keepEmptyElement(r[0])}}function Txe(t,n,e,i){return()=>{const a=t.document.differ.getChanges(),l=[],c=new Map,u=new Set;for(const d of a)if(d.type=="insert"&&d.name!="$text")Ta(d.position,c),d.attributes.has("listItemId")?u.add(d.position.nodeAfter):Ta(d.position.getShiftedBy(d.length),c);else if(d.type=="remove"&&d.attributes.has("listItemId"))Ta(d.position,c);else if(d.type=="attribute"){const f=d.range.start.nodeAfter;e.includes(d.attributeKey)?(Ta(d.range.start,c),d.attributeNewValue===null?(Ta(d.range.start.getShiftedBy(1),c),r(f)&&l.push(f)):u.add(f)):Pi(f)&&r(f)&&l.push(f)}for(const d of c.values())l.push(...s(d,u));for(const d of new Set(l))n.reconvertItem(d)};function s(a,l){const c=[],u=new Set,d=[];for(const{node:f,previous:p}of Y1(a,"forward")){if(u.has(f))continue;const m=f.getAttribute("listIndent");p&&m<p.getAttribute("listIndent")&&(d.length=m+1),d[m]=Object.fromEntries(Array.from(f.getAttributes()).filter(([y])=>e.includes(y)));const v=zu(f,{direction:"forward"});for(const y of v)u.add(y),(r(y,v)||o(y,d,l))&&c.push(y)}return c}function r(a,l){const c=n.mapper.toViewElement(a);if(!c)return!1;if(i.fire("checkElement",{modelElement:a,viewElement:c}))return!0;if(!a.is("element","paragraph")&&!a.is("element","listItem"))return!1;const d=X$(a,e,l);return d&&c.is("element","p")?!0:!!(!d&&c.is("element","span"))}function o(a,l,c){if(c.has(a))return!1;const u=n.mapper.toViewElement(a);let d=l.length-1;for(let f=u.parent;!f.is("editableElement");f=f.parent){const p=fk(f),m=_xe(f);if(!m&&!p)continue;const v=`checkAttributes:${p?"item":"list"}`;if(i.fire(v,{viewElement:f,modelAttributes:l[d]}))break;if(m&&(d--,d<0))return!1}return!0}}function wR(t,n,e,{dataPipeline:i}={}){const s=Oxe(t);return(r,o,a)=>{const{writer:l,mapper:c,consumable:u}=a,d=o.item;if(!t.includes(o.attributeKey)||!s(d,u))return;const f=Axe(d,c,e);Z$(f,l,c),Mxe(f,l);const p=Rxe(d,f,n,l,{dataPipeline:i});Pxe(d,p,n,l)}}function xxe(t){return(n,e,i)=>{const{writer:s,mapper:r}=i,o=n.name.split(":")[1];if(!t.checkAttribute(o,"listItemId"))return;const a=r.toViewPosition(e.position),l=e.position.getShiftedBy(e.length),c=r.toViewPosition(l,{isPhantom:!0}),d=s.createRange(a,c).getTrimmed().end.nodeBefore;/* istanbul ignore next -- @preserve */d&&Z$(d,s,r)}}function yR(t,{dataPipeline:n}={}){return(e,{writer:i})=>{if(!X$(e,t))return null;if(!n)return i.createContainerElement("span",{class:"ck-list-bogus-paragraph"});const s=i.createContainerElement("p");return i.setCustomProperty("dataPipeline:transparentRendering",!0,s),s}}function Axe(t,n,e){const i=e.createRangeOn(t);return n.toViewRange(i).getTrimmed().end.nodeBefore}function Ixe(t,n){return(e,i)=>{if(i.modelPosition.offset>0)return;const s=i.modelPosition.parent;if(!Pi(s)||!t.some(c=>c.scope=="itemMarker"&&c.canInjectMarkerIntoElement&&c.canInjectMarkerIntoElement(s)))return;const r=i.mapper.toViewElement(s),o=n.createRangeIn(r),a=o.getWalker();let l=o.start;for(const{item:c}of a){if(c.is("element")&&i.mapper.toModelElement(c)||c.is("$textProxy"))break;c.is("element")&&c.getCustomProperty("listItemMarker")&&(l=n.createPositionAfter(c),a.skip(({previousPosition:u})=>!u.isEqual(l)))}i.viewPosition=l}}function Z$(t,n,e){for(;t.parent.is("attributeElement")&&t.parent.getCustomProperty("listItemWrapper");)n.unwrap(n.createRangeOn(t),t.parent);const i=[];s(n.createPositionBefore(t).getWalker({direction:"backward"})),s(n.createRangeIn(t).getWalker());for(const r of i)n.remove(r);function s(r){for(const{item:o}of r){if(o.is("element")&&e.toModelElement(o))break;o.is("element")&&o.getCustomProperty("listItemMarker")&&i.push(o)}}}function Rxe(t,n,e,i,{dataPipeline:s}){let r=i.createRangeOn(n);if(!yc(t))return r;for(const o of e){if(o.scope!="itemMarker")continue;const a=o.createElement(i,t,{dataPipeline:s});if(!a||(i.setCustomProperty("listItemMarker",!0,a),o.canInjectMarkerIntoElement&&o.canInjectMarkerIntoElement(t)?i.insert(i.createPositionAt(n,0),a):(i.insert(r.start,a),r=i.createRange(i.createPositionBefore(a),i.createPositionAfter(n))),!o.createWrapperElement||!o.canWrapElement))continue;const l=o.createWrapperElement(i,t,{dataPipeline:s});i.setCustomProperty("listItemWrapper",!0,l),o.canWrapElement(t)?r=i.wrap(r,l):(r=i.wrap(i.createRangeOn(a),l),r=i.createRange(r.start,i.createPositionAfter(n)))}return r}function Mxe(t,n){let e=t.parent;for(;e.is("attributeElement")&&["ul","ol","li"].includes(e.name);){const i=e.parent;n.unwrap(n.createRangeOn(t),e),e=i}}function Pxe(t,n,e,i){if(!t.hasAttribute("listIndent"))return;const s=t.getAttribute("listIndent");let r=t;for(let o=s;o>=0;o--){const a=Cxe(i,o,r.getAttribute("listItemId")),l=yxe(i,o,r.getAttribute("listType"));for(const c of e)(c.scope=="list"||c.scope=="item")&&r.hasAttribute(c.attributeName)&&c.setAttributeOnDowncast(i,r.getAttribute(c.attributeName),c.scope=="list"?l:a);if(n=i.wrap(n,a),n=i.wrap(n,l),o==0||(r=ha.first(r,{lowerIndent:!0}),!r))break}}function Oxe(t){return(n,e)=>{const i=[];for(const s of t)n.hasAttribute(s)&&i.push(`attribute:${s}`);return i.every(s=>e.test(n,s)!==!1)?(i.forEach(s=>e.consume(n,s)),!0):!1}}function X$(t,n,e=m1(t)){if(!Pi(t))return!1;for(const i of t.getAttributeKeys())if(!i.startsWith("selection:")&&!n.includes(i))return!1;return e.length<2}const Lb=["listType","listIndent","listItemId"];class v1 extends Be{constructor(e){super(e);w(this,"_downcastStrategies",[]);e.config.define("list.multiBlock",!0)}static get pluginName(){return"ListEditing"}static get requires(){return[nS,Mh,bxe,da]}init(){const e=this.editor,i=e.model,s=e.config.get("list.multiBlock");if(e.plugins.has("LegacyListEditing"))throw new fe("list-feature-conflict",this,{conflictPlugin:"LegacyListEditing"});i.schema.register("$listItem",{allowAttributes:Lb}),s?(i.schema.extend("$container",{allowAttributesOf:"$listItem"}),i.schema.extend("$block",{allowAttributesOf:"$listItem"}),i.schema.extend("$blockObject",{allowAttributesOf:"$listItem"})):i.schema.register("listItem",{inheritAllFrom:"$block",allowAttributesOf:"$listItem"});for(const r of Lb)i.schema.setAttributeProperties(r,{copyOnReplace:!0});e.commands.add("numberedList",new qp(e,"numbered")),e.commands.add("bulletedList",new qp(e,"bulleted")),e.commands.add("customNumberedList",new qp(e,"customNumbered",{multiLevel:!0})),e.commands.add("customBulletedList",new qp(e,"customBulleted",{multiLevel:!0})),e.commands.add("indentList",new gR(e,"forward")),e.commands.add("outdentList",new gR(e,"backward")),e.commands.add("splitListItemBefore",new _R(e,"before")),e.commands.add("splitListItemAfter",new _R(e,"after")),s&&(e.commands.add("mergeListItemBackward",new bR(e,"backward")),e.commands.add("mergeListItemForward",new bR(e,"forward"))),this._setupDeleteIntegration(),this._setupEnterIntegration(),this._setupTabIntegration(),this._setupClipboardIntegration(),this._setupAccessibilityIntegration()}afterInit(){const i=this.editor.commands,s=i.get("indent"),r=i.get("outdent");s&&s.registerChildCommand(i.get("indentList"),{priority:"high"}),r&&r.registerChildCommand(i.get("outdentList"),{priority:"lowest"}),this._setupModelPostFixing(),this._setupConversion()}registerDowncastStrategy(e){this._downcastStrategies.push(e)}getListAttributeNames(){return[...Lb,...this._downcastStrategies.map(e=>e.attributeName)]}_setupDeleteIntegration(){const e=this.editor,i=e.commands.get("mergeListItemBackward"),s=e.commands.get("mergeListItemForward");this.listenTo(e.editing.view.document,"delete",(r,o)=>{const a=e.model.document.selection;g1(e.model)||e.model.change(()=>{const l=a.getFirstPosition();if(a.isCollapsed&&o.direction=="backward"){if(!l.isAtStart)return;const c=l.parent;if(!Pi(c))return;if(!ha.first(c,{sameAttributes:"listType",sameIndent:!0})&&c.getAttribute("listIndent")===0)pR(c)||e.execute("splitListItemAfter"),e.execute("outdentList");else{if(!i||!i.isEnabled)return;i.execute({shouldMergeOnBlocksContentLevel:CR(e.model,"backward")})}o.preventDefault(),r.stop()}else{if(a.isCollapsed&&!a.getLastPosition().isAtEnd||!s||!s.isEnabled)return;s.execute({shouldMergeOnBlocksContentLevel:CR(e.model,"forward")}),o.preventDefault(),r.stop()}})},{context:"li"})}_setupEnterIntegration(){const e=this.editor,i=e.model,s=e.commands,r=s.get("enter");this.listenTo(e.editing.view.document,"enter",(o,a)=>{const l=i.document,c=l.selection.getFirstPosition().parent;if(l.selection.isCollapsed&&Pi(c)&&c.isEmpty&&!a.isSoft){const u=yc(c),d=pR(c);u&&d?(e.execute("outdentList"),a.preventDefault(),o.stop()):u&&!d?(e.execute("splitListItemAfter"),a.preventDefault(),o.stop()):d&&(e.execute("splitListItemBefore"),a.preventDefault(),o.stop())}},{context:"li"}),this.listenTo(r,"afterExecute",()=>{const o=s.get("splitListItemBefore");if(o.refresh(),!o.isEnabled)return;const l=e.model.document.selection.getLastPosition().parent;m1(l).length===2&&o.execute()})}_setupTabIntegration(){const e=this.editor;this.listenTo(e.editing.view.document,"tab",(i,s)=>{const r=s.shiftKey?"outdentList":"indentList";this.editor.commands.get(r).isEnabled&&(e.execute(r),s.stopPropagation(),s.preventDefault(),i.stop())},{context:"li"})}_setupConversion(){const e=this.editor,i=e.model,s=this.getListAttributeNames(),r=e.config.get("list.multiBlock"),o=r?"paragraph":"listItem";e.conversion.for("upcast").elementToElement({view:"li",model:(l,{writer:c})=>c.createElement(o,{listType:""})}).elementToElement({view:"p",model:(l,{writer:c})=>l.parent&&l.parent.is("element","li")?c.createElement(o,{listType:""}):null,converterPriority:"high"}).add(l=>{l.on("element:li",Sxe())}),r||e.conversion.for("downcast").elementToElement({model:"listItem",view:"p"}),e.conversion.for("editingDowncast").elementToElement({model:o,view:yR(s),converterPriority:"high"}).add(l=>{l.on("attribute",wR(s,this._downcastStrategies,i)),l.on("remove",xxe(i.schema))}),e.conversion.for("dataDowncast").elementToElement({model:o,view:yR(s,{dataPipeline:!0}),converterPriority:"high"}).add(l=>{l.on("attribute",wR(s,this._downcastStrategies,i,{dataPipeline:!0}))});const a=Ixe(this._downcastStrategies,e.editing.view);e.editing.mapper.on("modelToViewPosition",a),e.data.mapper.on("modelToViewPosition",a),this.listenTo(i.document,"change:data",Txe(i,e.editing,s,this),{priority:"high"}),this.on("checkAttributes:item",(l,{viewElement:c,modelAttributes:u})=>{c.id!=u.listItemId&&(l.return=!0,l.stop())}),this.on("checkAttributes:list",(l,{viewElement:c,modelAttributes:u})=>{(c.name!=G$(u.listType)||c.id!=Y$(u.listType,u.listIndent))&&(l.return=!0,l.stop())})}_setupModelPostFixing(){const e=this.editor.model,i=this.getListAttributeNames();e.document.registerPostFixer(s=>Lxe(e,s,i,this)),this.on("postFixer",(s,{listNodes:r,writer:o})=>{s.return=kxe(r,o)||s.return},{priority:"high"}),this.on("postFixer",(s,{listNodes:r,writer:o,seenIds:a})=>{s.return=Exe(r,a,o)||s.return},{priority:"high"})}_setupClipboardIntegration(){const e=this.editor.model,i=this.editor.plugins.get("ClipboardPipeline");this.listenTo(e,"insertContent",Bxe(e),{priority:"high"}),this.listenTo(i,"outputTransformation",(s,r)=>{e.change(o=>{const a=Array.from(r.content.getChildren()),l=a[a.length-1];if(a.length>1&&l.is("element")&&l.isEmpty&&a.slice(0,-1).every(Pi)&&o.remove(l),r.method=="copy"||r.method=="cut"){const c=Array.from(r.content.getChildren());p1(c)&&ly(c,o)}})})}_setupAccessibilityIntegration(){const e=this.editor,i=e.t;e.accessibility.addKeystrokeInfoGroup({id:"list",label:i("Keystrokes that can be used in a list"),keystrokes:[{label:i("Increase list item indent"),keystroke:"Tab"},{label:i("Decrease list item indent"),keystroke:"Shift+Tab"}]})}}function Lxe(t,n,e,i){const s=t.document.differ.getChanges(),r=new Map,o=i.editor.config.get("list.multiBlock");let a=!1;for(const c of s){if(c.type=="insert"&&c.name!="$text"){const u=c.position.nodeAfter;if(!t.schema.checkAttribute(u,"listItemId"))for(const d of Array.from(u.getAttributeKeys()))e.includes(d)&&(n.removeAttribute(d,u),a=!0);Ta(c.position,r),c.attributes.has("listItemId")||Ta(c.position.getShiftedBy(c.length),r);for(const{item:d,previousPosition:f}of t.createRangeIn(u))Pi(d)&&Ta(f,r)}else c.type=="remove"?Ta(c.position,r):c.type=="attribute"&&e.includes(c.attributeKey)&&(Ta(c.range.start,r),c.attributeNewValue===null&&Ta(c.range.start.getShiftedBy(1),r));if(!o&&c.type=="attribute"&&Lb.includes(c.attributeKey)){const u=c.range.start.nodeAfter;c.attributeNewValue===null&&u&&u.is("element","listItem")?(n.rename(u,"paragraph"),a=!0):c.attributeOldValue===null&&u&&u.is("element")&&u.name!="listItem"&&(n.rename(u,"listItem"),a=!0)}}const l=new Set;for(const c of r.values())a=i.fire("postFixer",{listNodes:new fxe(c),listHead:c,writer:n,seenIds:l})||a;return a}function Bxe(t){return(n,[e,i])=>{const s=e.is("documentFragment")?Array.from(e.getChildren()):[e];if(!s.length)return;const o=(i?t.createSelection(i):t.document.selection).getFirstPosition();let a;if(Pi(o.parent))a=o.parent;else if(Pi(o.nodeBefore))a=o.nodeBefore;else return;t.change(l=>{const c=a.getAttribute("listType"),u=a.getAttribute("listIndent"),d=s[0].getAttribute("listIndent")||0,f=Math.max(u-d,0);for(const p of s){const m=Pi(p);a.is("element","listItem")&&p.is("element","paragraph")&&l.rename(p,"listItem"),l.setAttributes({listIndent:(m?p.getAttribute("listIndent"):0)+f,listItemId:m?p.getAttribute("listItemId"):mm.next(),listType:c},p)}})}}function CR(t,n){const e=t.document.selection;if(!e.isCollapsed)return!g1(t);if(n==="forward")return!0;const s=e.getFirstPosition().parent,r=s.previousSibling;return t.schema.isObject(r)?!1:r.isEmpty?!0:p1([s,r])}function mk(t,n,e,i){t.ui.componentFactory.add(n,()=>{const s=kR(Yt,t,n,e,i);return s.set({tooltip:!0,isToggleable:!0}),s}),t.ui.componentFactory.add(`menuBar:${n}`,()=>{const s=kR(Xi,t,n,e,i);return s.set({role:"menuitemcheckbox",isToggleable:!0}),s})}function kR(t,n,e,i,s){const r=n.commands.get(e),o=new t(n.locale);return o.set({label:i,icon:s}),o.bind("isOn","isEnabled").to(r,"value","isEnabled"),o.on("execute",()=>{n.execute(e),n.editing.view.focus()}),o}class Fxe extends Be{static get pluginName(){return"ListUI"}init(){const n=this.editor.t;this.editor.ui.componentFactory.has("numberedList")||mk(this.editor,"numberedList",n("Numbered List"),kt.numberedList),this.editor.ui.componentFactory.has("bulletedList")||mk(this.editor,"bulletedList",n("Bulleted List"),kt.bulletedList)}}class Nxe extends Be{static get requires(){return[v1,Fxe]}static get pluginName(){return"List"}}class Vxe extends en{refresh(){const n=this._getValue();this.value=n,this.isEnabled=n!=null}execute({startIndex:n=1}={}){const e=this.editor.model,i=e.document;let s=Array.from(i.selection.getSelectedBlocks()).filter(r=>Pi(r)&&B_(r.getAttribute("listType")));s=ay(s),e.change(r=>{for(const o of s)r.setAttribute("listStart",n>=0?n:1,o)})}_getValue(){const e=this.editor.model.document,i=bs(e.selection.getSelectedBlocks());return i&&Pi(i)&&B_(i.getAttribute("listType"))?i.getAttribute("listStart"):null}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const J$={},Q$={},ez={},tz=[{listStyle:"disc",typeAttribute:"disc",listType:"bulleted"},{listStyle:"circle",typeAttribute:"circle",listType:"bulleted"},{listStyle:"square",typeAttribute:"square",listType:"bulleted"},{listStyle:"decimal",typeAttribute:"1",listType:"numbered"},{listStyle:"decimal-leading-zero",typeAttribute:null,listType:"numbered"},{listStyle:"lower-roman",typeAttribute:"i",listType:"numbered"},{listStyle:"upper-roman",typeAttribute:"I",listType:"numbered"},{listStyle:"lower-alpha",typeAttribute:"a",listType:"numbered"},{listStyle:"upper-alpha",typeAttribute:"A",listType:"numbered"},{listStyle:"lower-latin",typeAttribute:"a",listType:"numbered"},{listStyle:"upper-latin",typeAttribute:"A",listType:"numbered"}];for(const{listStyle:t,typeAttribute:n,listType:e}of tz)J$[t]=e,Q$[t]=n,n&&(ez[n]=t);function nz(){return tz.map(t=>t.listStyle)}function mS(t){return J$[t]||null}function iz(t){return ez[t]||null}function pk(t){return Q$[t]||null}class Dxe extends en{constructor(e,i,s){super(e);w(this,"defaultType");w(this,"_supportedTypes");this.defaultType=i,this._supportedTypes=s}refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(e={}){const i=this.editor.model,s=i.document;i.change(r=>{this._tryToConvertItemsToList(e);let o=Array.from(s.selection.getSelectedBlocks()).filter(a=>a.hasAttribute("listType"));if(o.length){o=ay(o);for(const a of o)r.setAttribute("listStyle",e.type||this.defaultType,a)}})}isStyleTypeSupported(e){return this._supportedTypes?this._supportedTypes.includes(e):!0}_getValue(){const e=bs(this.editor.model.document.selection.getSelectedBlocks());return Pi(e)?e.getAttribute("listStyle"):null}_checkEnabled(){const e=this.editor,i=e.commands.get("numberedList"),s=e.commands.get("bulletedList");return i.isEnabled||s.isEnabled}_tryToConvertItemsToList(e){if(!e.type)return;const i=mS(e.type);if(!i)return;const s=this.editor,r=`${i}List`;s.commands.get(r).value||s.execute(r)}}class $xe extends en{refresh(){const n=this._getValue();this.value=n,this.isEnabled=n!=null}execute(n={}){const e=this.editor.model,i=e.document;let s=Array.from(i.selection.getSelectedBlocks()).filter(r=>Pi(r)&&r.getAttribute("listType")=="numbered");s=ay(s),e.change(r=>{for(const o of s)r.setAttribute("listReversed",!!n.reversed,o)})}_getValue(){const e=this.editor.model.document,i=bs(e.selection.getSelectedBlocks());return Pi(i)&&i.getAttribute("listType")=="numbered"?i.getAttribute("listReversed"):null}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function ER(t){return(n,e,i)=>{const{writer:s,schema:r,consumable:o}=i;if(o.test(e.viewItem,t.viewConsumables)===!1)return;e.modelRange||Object.assign(e,i.convertChildren(e.viewItem,e.modelCursor));let a=!1;for(const l of e.modelRange.getItems({shallow:!0}))r.checkAttribute(l,t.attributeName)&&t.appliesToListItem(l)&&(l.hasAttribute(t.attributeName)||(s.setAttribute(t.attributeName,t.getAttributeOnUpcast(e.viewItem),l),a=!0));a&&o.consume(e.viewItem,t.viewConsumables)}}class zxe extends Be{static get pluginName(){return"ListPropertiesUtils"}getAllSupportedStyleTypes(){return nz()}getListTypeFromListStyleType(n){return mS(n)}getListStyleTypeFromTypeAttribute(n){return iz(n)}getTypeAttributeFromListStyleType(n){return pk(n)}}function sz(t){const{startIndex:n,reversed:e,styles:i}=t;return{styles:Hxe(i),startIndex:n||!1,reversed:e||!1}}function Hxe(t){const n={listTypes:["bulleted","numbered"],useAttribute:!1};return t===!0||(t?Array.isArray(t)||typeof t=="string"?n.listTypes=Si(t):(n.listTypes=t.listTypes?Si(t.listTypes):n.listTypes,n.useAttribute=!!t.useAttribute):n.listTypes=[]),n}const Mp="default";class Uxe extends Be{static get requires(){return[v1,zxe]}static get pluginName(){return"ListPropertiesEditing"}constructor(n){super(n),n.config.define("list.properties",{styles:!0,startIndex:!1,reversed:!1})}init(){const n=this.editor,e=n.model,i=n.plugins.get(v1),s=n.config.get("list.properties"),r=Wxe(s);for(const o of r)o.addCommand(n),e.schema.extend("$listItem",{allowAttributes:o.attributeName}),i.registerDowncastStrategy({scope:"list",attributeName:o.attributeName,setAttributeOnDowncast(a,l,c){o.setAttributeOnDowncast(a,l,c)}});n.conversion.for("upcast").add(o=>{for(const a of r)o.on("element:ol",ER(a)),o.on("element:ul",ER(a))}),i.on("checkAttributes:list",(o,{viewElement:a,modelAttributes:l})=>{for(const c of r)c.getAttributeOnUpcast(a)!=l[c.attributeName]&&(o.return=!0,o.stop())}),this.listenTo(n.commands.get("indentList"),"afterExecute",(o,a)=>{e.change(l=>{for(const c of a)for(const u of r)u.appliesToListItem(c)&&l.setAttribute(u.attributeName,u.defaultValue,c)})}),i.on("postFixer",(o,{listNodes:a,writer:l})=>{for(const{node:c}of a)for(const u of r)u.hasValidAttribute(c)||(u.appliesToListItem(c)?l.setAttribute(u.attributeName,u.defaultValue,c):l.removeAttribute(u.attributeName,c),o.return=!0)}),i.on("postFixer",(o,{listNodes:a,writer:l})=>{for(const{node:c,previousNodeInList:u}of a)if(u&&u.getAttribute("listType")==c.getAttribute("listType"))for(const d of r){const{attributeName:f}=d;if(!d.appliesToListItem(c))continue;const p=u.getAttribute(f);c.getAttribute(f)!=p&&(l.setAttribute(f,p,c),o.return=!0)}})}}function Wxe(t){const n=[],e=sz(t);if(t.styles){const i=e.styles.useAttribute;n.push({attributeName:"listStyle",defaultValue:Mp,viewConsumables:{styles:"list-style-type"},addCommand(s){let r=nz();i&&(r=r.filter(o=>!!pk(o))),s.commands.add("listStyle",new Dxe(s,Mp,r))},appliesToListItem(s){return s.getAttribute("listType")=="numbered"||s.getAttribute("listType")=="bulleted"},hasValidAttribute(s){if(!this.appliesToListItem(s))return!s.hasAttribute("listStyle");if(!s.hasAttribute("listStyle"))return!1;const r=s.getAttribute("listStyle");return r==Mp?!0:mS(r)==s.getAttribute("listType")},setAttributeOnDowncast(s,r,o){if(r&&r!==Mp)if(i){const a=pk(r);if(a){s.setAttribute("type",a,o);return}}else{s.setStyle("list-style-type",r,o);return}s.removeStyle("list-style-type",o),s.removeAttribute("type",o)},getAttributeOnUpcast(s){const r=s.getStyle("list-style-type");if(r)return r;const o=s.getAttribute("type");return o?iz(o):Mp}})}return t.reversed&&n.push({attributeName:"listReversed",defaultValue:!1,viewConsumables:{attributes:"reversed"},addCommand(i){i.commands.add("listReversed",new $xe(i))},appliesToListItem(i){return i.getAttribute("listType")=="numbered"},hasValidAttribute(i){return this.appliesToListItem(i)==i.hasAttribute("listReversed")},setAttributeOnDowncast(i,s,r){s?i.setAttribute("reversed","reversed",r):i.removeAttribute("reversed",r)},getAttributeOnUpcast(i){return i.hasAttribute("reversed")}}),t.startIndex&&n.push({attributeName:"listStart",defaultValue:1,viewConsumables:{attributes:"start"},addCommand(i){i.commands.add("listStart",new Vxe(i))},appliesToListItem(i){return B_(i.getAttribute("listType"))},hasValidAttribute(i){return this.appliesToListItem(i)==i.hasAttribute("listStart")},setAttributeOnDowncast(i,s,r){s==0||s>1?i.setAttribute("start",s,r):i.removeAttribute("start",r)},getAttributeOnUpcast(i){const s=i.getAttribute("start");return s>=0?s:1}}),n}class rz extends Rt{constructor(e,{enabledProperties:i,styleButtonViews:s,styleGridAriaLabel:r}){super(e);w(this,"children");w(this,"stylesView",null);w(this,"additionalPropertiesCollapsibleView",null);w(this,"startIndexFieldView",null);w(this,"reversedSwitchButtonView",null);w(this,"focusTracker",new Bi);w(this,"keystrokes",new Zi);w(this,"focusables",new Us);w(this,"focusCycler");const o=["ck","ck-list-properties"];this.children=this.createCollection(),this.focusCycler=new Js({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),s&&s.length?(this.stylesView=this._createStylesView(s,r),this.children.add(this.stylesView)):o.push("ck-list-properties_without-styles"),(i.startIndex||i.reversed)&&(this._addNumberedListPropertyViews(i),o.push("ck-list-properties_with-numbered-properties")),this.setTemplate({tag:"div",attributes:{class:o},children:this.children})}render(){if(super.render(),this.stylesView){this.focusables.add(this.stylesView),this.focusTracker.add(this.stylesView.element),(this.startIndexFieldView||this.reversedSwitchButtonView)&&(this.focusables.add(this.children.last.buttonView),this.focusTracker.add(this.children.last.buttonView.element));for(const e of this.stylesView.children)this.stylesView.focusTracker.add(e.element);Xw({keystrokeHandler:this.stylesView.keystrokes,focusTracker:this.stylesView.focusTracker,gridItems:this.stylesView.children,numberOfColumns:()=>$t.window.getComputedStyle(this.stylesView.element).getPropertyValue("grid-template-columns").split(" ").length,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection})}if(this.startIndexFieldView){this.focusables.add(this.startIndexFieldView),this.focusTracker.add(this.startIndexFieldView.element);const e=i=>i.stopPropagation();this.keystrokes.set("arrowright",e),this.keystrokes.set("arrowleft",e),this.keystrokes.set("arrowup",e),this.keystrokes.set("arrowdown",e)}this.reversedSwitchButtonView&&(this.focusables.add(this.reversedSwitchButtonView),this.focusTracker.add(this.reversedSwitchButtonView.element)),this.keystrokes.listenTo(this.element)}focus(){this.focusCycler.focusFirst()}focusLast(){this.focusCycler.focusLast()}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createStylesView(e,i){const s=new Rt(this.locale);return s.children=s.createCollection(),s.children.addMany(e),s.setTemplate({tag:"div",attributes:{"aria-label":i,class:["ck","ck-list-styles-list"]},children:s.children}),s.children.delegate("execute").to(this),s.focus=function(){this.children.first.focus()},s.focusTracker=new Bi,s.keystrokes=new Zi,s.render(),s.keystrokes.listenTo(s.element),s}_addNumberedListPropertyViews(e){const i=this.locale.t,s=[];e.startIndex&&(this.startIndexFieldView=this._createStartIndexField(),s.push(this.startIndexFieldView)),e.reversed&&(this.reversedSwitchButtonView=this._createReversedSwitchButton(),s.push(this.reversedSwitchButtonView)),this.stylesView?(this.additionalPropertiesCollapsibleView=new YE(this.locale,s),this.additionalPropertiesCollapsibleView.set({label:i("List properties"),isCollapsed:!0}),this.additionalPropertiesCollapsibleView.buttonView.bind("isEnabled").toMany(s,"isEnabled",(...r)=>r.some(o=>o)),this.additionalPropertiesCollapsibleView.buttonView.on("change:isEnabled",(r,o,a)=>{a||(this.additionalPropertiesCollapsibleView.isCollapsed=!0)}),this.children.add(this.additionalPropertiesCollapsibleView)):this.children.addMany(s)}_createStartIndexField(){const e=this.locale.t,i=new ms(this.locale,FD);return i.set({label:e("Start at"),class:"ck-numbered-list-properties__start-index"}),i.fieldView.set({min:0,step:1,value:1,inputMode:"numeric"}),i.fieldView.on("input",()=>{const s=i.fieldView.element,r=s.valueAsNumber;if(Number.isNaN(r)){i.errorText=e("Invalid start index value.");return}s.checkValidity()?this.fire("listStart",{startIndex:r}):i.errorText=e("Start index must be greater than 0.")}),i}_createReversedSwitchButton(){const e=this.locale.t,i=new bh(this.locale);return i.set({withText:!0,label:e("Reversed order"),class:"ck-numbered-list-properties__reversed-order"}),i.delegate("execute").to(this,"listReversed"),i}}var jxe='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M11 27a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0-9a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0-9a3 3 0 1 1 0 6 3 3 0 0 1 0-6z"/></svg>',qxe='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M11 27a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm0-10a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm0-10a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4z"/></svg>',Kxe='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M14 27v6H8v-6h6zm0-9v6H8v-6h6zm0-9v6H8V9h6z"/></svg>',Gxe='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M10.29 15V8.531H9.286c-.14.393-.4.736-.778 1.03-.378.295-.728.495-1.05.6v1.121a4.257 4.257 0 0 0 1.595-.936V15h1.235zm3.343 0v-1.235h-1.235V15h1.235zM11.3 24v-1.147H8.848c.064-.111.148-.226.252-.343.104-.117.351-.354.74-.712.39-.357.66-.631.81-.821.225-.288.39-.562.494-.824.104-.263.156-.539.156-.829 0-.51-.182-.936-.545-1.279-.363-.342-.863-.514-1.499-.514-.58 0-1.063.148-1.45.444-.387.296-.617.784-.69 1.463l1.23.124c.024-.36.112-.619.264-.774.153-.155.358-.233.616-.233.26 0 .465.074.613.222.148.148.222.36.222.635 0 .25-.085.501-.255.756-.126.185-.468.536-1.024 1.055-.692.641-1.155 1.156-1.389 1.544-.234.389-.375.8-.422 1.233H11.3zm2.333 0v-1.235h-1.235V24h1.235zM9.204 34.11c.615 0 1.129-.2 1.542-.598.413-.398.62-.88.62-1.446 0-.39-.11-.722-.332-.997a1.5 1.5 0 0 0-.886-.532c.619-.337.928-.788.928-1.353 0-.399-.151-.756-.453-1.073-.366-.386-.852-.58-1.459-.58a2.25 2.25 0 0 0-.96.2 1.617 1.617 0 0 0-.668.55c-.16.232-.28.544-.358.933l1.138.194c.032-.282.123-.495.272-.642.15-.146.33-.22.54-.22.215 0 .386.065.515.194s.193.302.193.518c0 .255-.087.46-.263.613-.176.154-.43.227-.765.218l-.136 1.006c.22-.061.409-.092.567-.092.24 0 .444.09.61.272.168.182.251.428.251.739 0 .328-.087.589-.261.782a.833.833 0 0 1-.644.29.841.841 0 0 1-.607-.242c-.167-.16-.27-.394-.307-.698l-1.196.145c.062.542.285.98.668 1.316.384.335.868.503 1.45.503zm4.43-.11v-1.235h-1.236V34h1.235z"/></svg>',Yxe='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M5.714 15.11c.624 0 1.11-.22 1.46-.66.421-.533.632-1.408.632-2.627 0-1.222-.21-2.096-.629-2.624-.351-.445-.839-.668-1.463-.668-.624 0-1.11.22-1.459.66-.422.533-.633 1.406-.633 2.619 0 1.236.192 2.095.576 2.577.384.482.89.723 1.516.723zm0-1.024a.614.614 0 0 1-.398-.14c-.115-.094-.211-.283-.287-.565-.077-.283-.115-.802-.115-1.558s.043-1.294.128-1.613c.064-.246.155-.417.272-.512a.617.617 0 0 1 .4-.143.61.61 0 0 1 .398.143c.116.095.211.284.288.567.076.283.114.802.114 1.558s-.043 1.292-.128 1.608c-.064.246-.155.417-.272.512a.617.617 0 0 1-.4.143zm6.078.914V8.531H10.79c-.14.393-.4.736-.778 1.03-.378.295-.728.495-1.05.6v1.121a4.257 4.257 0 0 0 1.595-.936V15h1.235zm3.344 0v-1.235h-1.235V15h1.235zm-9.422 9.11c.624 0 1.11-.22 1.46-.66.421-.533.632-1.408.632-2.627 0-1.222-.21-2.096-.629-2.624-.351-.445-.839-.668-1.463-.668-.624 0-1.11.22-1.459.66-.422.533-.633 1.406-.633 2.619 0 1.236.192 2.095.576 2.577.384.482.89.723 1.516.723zm0-1.024a.614.614 0 0 1-.398-.14c-.115-.094-.211-.283-.287-.565-.077-.283-.115-.802-.115-1.558s.043-1.294.128-1.613c.064-.246.155-.417.272-.512a.617.617 0 0 1 .4-.143.61.61 0 0 1 .398.143c.116.095.211.284.288.567.076.283.114.802.114 1.558s-.043 1.292-.128 1.608c-.064.246-.155.417-.272.512a.617.617 0 0 1-.4.143zm7.088.914v-1.147H10.35c.065-.111.149-.226.253-.343.104-.117.35-.354.74-.712.39-.357.66-.631.81-.821.225-.288.39-.562.493-.824.104-.263.156-.539.156-.829 0-.51-.181-.936-.544-1.279-.364-.342-.863-.514-1.499-.514-.58 0-1.063.148-1.45.444-.387.296-.617.784-.69 1.463l1.23.124c.024-.36.112-.619.264-.774.152-.155.357-.233.615-.233.261 0 .465.074.613.222.148.148.222.36.222.635 0 .25-.085.501-.255.756-.126.185-.467.536-1.024 1.055-.691.641-1.154 1.156-1.388 1.544-.235.389-.375.8-.422 1.233h4.328zm2.334 0v-1.235h-1.235V24h1.235zM5.714 34.11c.624 0 1.11-.22 1.46-.66.421-.533.632-1.408.632-2.627 0-1.222-.21-2.096-.629-2.624-.351-.445-.839-.668-1.463-.668-.624 0-1.11.22-1.459.66-.422.533-.633 1.406-.633 2.619 0 1.236.192 2.095.576 2.577.384.482.89.723 1.516.723zm0-1.024a.614.614 0 0 1-.398-.14c-.115-.094-.211-.283-.287-.565-.077-.283-.115-.802-.115-1.558s.043-1.294.128-1.613c.064-.246.155-.417.272-.512a.617.617 0 0 1 .4-.143.61.61 0 0 1 .398.143c.116.095.211.284.288.567.076.283.114.802.114 1.558s-.043 1.292-.128 1.608c-.064.246-.155.417-.272.512a.617.617 0 0 1-.4.143zm4.992 1.024c.616 0 1.13-.2 1.543-.598.413-.398.62-.88.62-1.446 0-.39-.111-.722-.332-.997a1.5 1.5 0 0 0-.886-.532c.618-.337.927-.788.927-1.353 0-.399-.15-.756-.452-1.073-.366-.386-.853-.58-1.46-.58a2.25 2.25 0 0 0-.96.2 1.617 1.617 0 0 0-.667.55c-.16.232-.28.544-.359.933l1.139.194c.032-.282.123-.495.272-.642.15-.146.33-.22.54-.22.214 0 .386.065.515.194s.193.302.193.518c0 .255-.088.46-.264.613-.175.154-.43.227-.764.218l-.136 1.006c.22-.061.408-.092.566-.092.24 0 .444.09.611.272.167.182.25.428.25.739 0 .328-.086.589-.26.782a.833.833 0 0 1-.644.29.841.841 0 0 1-.607-.242c-.167-.16-.27-.394-.308-.698l-1.195.145c.062.542.284.98.668 1.316.384.335.867.503 1.45.503zm4.43-.11v-1.235h-1.235V34h1.235z"/></svg>',Zxe='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M11.88 8.7V7.558h-1.234V8.7h1.234zm0 5.3V9.333h-1.234V14h1.234zm2.5 0v-1.235h-1.234V14h1.235zm-4.75 4.7v-1.142H8.395V18.7H9.63zm0 5.3v-4.667H8.395V24H9.63zm2.5-5.3v-1.142h-1.234V18.7h1.235zm0 5.3v-4.667h-1.234V24h1.235zm2.501 0v-1.235h-1.235V24h1.235zM7.38 28.7v-1.142H6.145V28.7H7.38zm0 5.3v-4.667H6.145V34H7.38zm2.5-5.3v-1.142H8.646V28.7H9.88zm0 5.3v-4.667H8.646V34H9.88zm2.5-5.3v-1.142h-1.234V28.7h1.235zm0 5.3v-4.667h-1.234V34h1.235zm2.501 0v-1.235h-1.235V34h1.235z"/></svg>',Xxe='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M11.916 15V8.558h-1.301V15h1.3zm2.465 0v-1.235h-1.235V15h1.235zM9.665 25v-6.442h-1.3V25h1.3zm2.5 0v-6.442h-1.3V25h1.3zm2.466 0v-1.235h-1.235V25h1.235zm-7.216 9v-6.442h-1.3V34h1.3zm2.5 0v-6.442h-1.3V34h1.3zm2.501 0v-6.442h-1.3V34h1.3zm2.465 0v-1.235h-1.235V34h1.235z"/></svg>',Jxe='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M9.62 14.105c.272 0 .528-.05.768-.153s.466-.257.677-.462c.009.024.023.072.044.145.047.161.086.283.119.365h1.221a2.649 2.649 0 0 1-.222-.626c-.04-.195-.059-.498-.059-.908l.013-1.441c0-.536-.055-.905-.165-1.105-.11-.201-.3-.367-.569-.497-.27-.13-.68-.195-1.23-.195-.607 0-1.064.108-1.371.325-.308.217-.525.55-.65 1.002l1.12.202c.076-.217.176-.369.299-.455.123-.086.294-.13.514-.13.325 0 .546.05.663.152.118.101.176.27.176.508v.123c-.222.093-.622.194-1.2.303-.427.082-.755.178-.982.288-.227.11-.403.268-.53.474a1.327 1.327 0 0 0-.188.706c0 .398.138.728.415.988.277.261.656.391 1.136.391zm.368-.87a.675.675 0 0 1-.492-.189.606.606 0 0 1-.193-.448c0-.176.08-.32.241-.435.106-.07.33-.142.673-.215a7.19 7.19 0 0 0 .751-.19v.247c0 .296-.016.496-.048.602a.773.773 0 0 1-.295.409 1.07 1.07 0 0 1-.637.22zm4.645.765v-1.235h-1.235V14h1.235zM10.2 25.105c.542 0 1.003-.215 1.382-.646.38-.43.57-1.044.57-1.84 0-.771-.187-1.362-.559-1.774a1.82 1.82 0 0 0-1.41-.617c-.522 0-.973.216-1.354.65v-2.32H7.594V25h1.147v-.686a1.9 1.9 0 0 0 .67.592c.26.133.523.2.79.2zm-.299-.975c-.354 0-.638-.164-.852-.492-.153-.232-.229-.59-.229-1.073 0-.468.098-.818.295-1.048a.93.93 0 0 1 .738-.345c.302 0 .55.118.743.354.193.236.29.62.29 1.154 0 .5-.096.868-.288 1.1-.192.233-.424.35-.697.35zm4.478.87v-1.235h-1.234V25h1.234zm-4.017 9.105c.6 0 1.08-.142 1.437-.426.357-.284.599-.704.725-1.261l-1.213-.207c-.061.326-.167.555-.316.688a.832.832 0 0 1-.576.2.916.916 0 0 1-.75-.343c-.185-.228-.278-.62-.278-1.173 0-.498.091-.853.274-1.066.183-.212.429-.318.736-.318.232 0 .42.061.565.184.145.123.238.306.28.55l1.216-.22c-.146-.501-.387-.874-.722-1.119-.336-.244-.788-.366-1.356-.366-.695 0-1.245.214-1.653.643-.407.43-.61 1.03-.61 1.8 0 .762.202 1.358.608 1.788.406.431.95.646 1.633.646zM14.633 34v-1.235h-1.235V34h1.235z"/></svg>',Qxe='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="m7.88 15 .532-1.463h2.575L11.549 15h1.415l-2.58-6.442H9.01L6.5 15h1.38zm2.69-2.549H8.811l.87-2.39.887 2.39zM14.88 15v-1.235h-1.234V15h1.234zM9.352 25c.83-.006 1.352-.02 1.569-.044.346-.038.636-.14.872-.305.236-.166.422-.387.558-.664.137-.277.205-.562.205-.855 0-.372-.106-.695-.317-.97-.21-.276-.512-.471-.905-.585a1.51 1.51 0 0 0 .661-.567 1.5 1.5 0 0 0 .244-.83c0-.28-.066-.53-.197-.754a1.654 1.654 0 0 0-.495-.539 1.676 1.676 0 0 0-.672-.266c-.25-.042-.63-.063-1.14-.063H7.158V25h2.193zm.142-3.88H8.46v-1.49h.747c.612 0 .983.007 1.112.022.217.026.38.102.49.226.11.125.165.287.165.486a.68.68 0 0 1-.192.503.86.86 0 0 1-.525.23 11.47 11.47 0 0 1-.944.023h.18zm.17 2.795H8.46v-1.723h1.05c.592 0 .977.03 1.154.092.177.062.313.16.406.295a.84.84 0 0 1 .14.492c0 .228-.06.41-.181.547a.806.806 0 0 1-.473.257c-.126.026-.423.04-.892.04zM14.88 25v-1.235h-1.234V25h1.234zm-5.018 9.11c.691 0 1.262-.17 1.711-.512.45-.341.772-.864.965-1.567l-1.261-.4c-.109.472-.287.818-.536 1.037-.25.22-.547.33-.892.33-.47 0-.85-.173-1.143-.519-.293-.345-.44-.925-.44-1.74 0-.767.15-1.322.447-1.665.297-.343.684-.514 1.162-.514.346 0 .64.096.881.29.242.193.4.457.477.79l1.288-.307c-.147-.516-.367-.911-.66-1.187-.492-.465-1.132-.698-1.92-.698-.902 0-1.63.296-2.184.89-.554.593-.83 1.426-.83 2.498 0 1.014.275 1.813.825 2.397.551.585 1.254.877 2.11.877zM14.88 34v-1.235h-1.234V34h1.234z"/></svg>';class eAe extends Be{static get pluginName(){return"ListPropertiesUI"}init(){const n=this.editor,e=n.locale.t,i=n.config.get("list.properties"),s=sz(i),r=s.styles.listTypes;if(r.includes("bulleted")){const o=[{label:e("Toggle the disc list style"),tooltip:e("Disc"),type:"disc",icon:jxe},{label:e("Toggle the circle list style"),tooltip:e("Circle"),type:"circle",icon:qxe},{label:e("Toggle the square list style"),tooltip:e("Square"),type:"square",icon:Kxe}],a=e("Bulleted List"),l=e("Bulleted list styles toolbar"),c="bulletedList";n.ui.componentFactory.add(c,SR({editor:n,normalizedConfig:s,parentCommandName:c,buttonLabel:a,buttonIcon:kt.bulletedList,styleGridAriaLabel:l,styleDefinitions:o})),n.ui.componentFactory.add(`menuBar:${c}`,TR({editor:n,normalizedConfig:s,parentCommandName:c,buttonLabel:a,styleGridAriaLabel:l,styleDefinitions:o}))}if(r.includes("numbered")||i.startIndex||i.reversed){const o=[{label:e("Toggle the decimal list style"),tooltip:e("Decimal"),type:"decimal",icon:Gxe},{label:e("Toggle the decimal with leading zero list style"),tooltip:e("Decimal with leading zero"),type:"decimal-leading-zero",icon:Yxe},{label:e("Toggle the lower–roman list style"),tooltip:e("Lower–roman"),type:"lower-roman",icon:Zxe},{label:e("Toggle the upper–roman list style"),tooltip:e("Upper-roman"),type:"upper-roman",icon:Xxe},{label:e("Toggle the lower–latin list style"),tooltip:e("Lower-latin"),type:"lower-latin",icon:Jxe},{label:e("Toggle the upper–latin list style"),tooltip:e("Upper-latin"),type:"upper-latin",icon:Qxe}],a=e("Numbered List"),l=e("Numbered list styles toolbar"),c="numberedList";n.ui.componentFactory.add(c,SR({editor:n,normalizedConfig:s,parentCommandName:c,buttonLabel:a,buttonIcon:kt.numberedList,styleGridAriaLabel:l,styleDefinitions:o})),r.includes("numbered")&&n.ui.componentFactory.add(`menuBar:${c}`,TR({editor:n,normalizedConfig:s,parentCommandName:c,buttonLabel:a,styleGridAriaLabel:l,styleDefinitions:o}))}}}function SR({editor:t,normalizedConfig:n,parentCommandName:e,buttonLabel:i,buttonIcon:s,styleGridAriaLabel:r,styleDefinitions:o}){const a=t.commands.get(e);return l=>{const c=Xs(l,K1),u=c.buttonView;return c.bind("isEnabled").to(a),c.class="ck-list-styles-dropdown",u.on("execute",()=>{t.execute(e),t.editing.view.focus()}),u.set({label:i,icon:s,tooltip:!0,isToggleable:!0}),u.bind("isOn").to(a,"value",d=>!!d),c.once("change:isOpen",()=>{const d=tAe({editor:t,normalizedConfig:n,dropdownView:c,parentCommandName:e,styleGridAriaLabel:r,styleDefinitions:o});c.panelView.children.add(d)}),c.on("execute",()=>{t.editing.view.focus()}),c}}function oz({editor:t,listStyleCommand:n,parentCommandName:e}){const i=t.locale,s=t.commands.get(e);return({label:r,type:o,icon:a,tooltip:l})=>{const c=new Yt(i);return c.set({label:r,icon:a,tooltip:l}),n.on("change:value",()=>{c.isOn=n.value===o}),c.on("execute",()=>{s.value?n.value===o?t.execute(e):n.value!==o&&t.execute("listStyle",{type:o}):t.model.change(()=>{t.execute("listStyle",{type:o})})}),c}}function tAe({editor:t,normalizedConfig:n,dropdownView:e,parentCommandName:i,styleDefinitions:s,styleGridAriaLabel:r}){const o=t.locale,a={...n,...i!="numberedList"?{startIndex:!1,reversed:!1}:null},l=i.replace("List","");let c=null;if(n.styles.listTypes.includes(l)){const d=t.commands.get("listStyle"),f=oz({editor:t,parentCommandName:i,listStyleCommand:d}),p=az(d);c=s.filter(p).map(f)}const u=new rz(o,{styleGridAriaLabel:r,enabledProperties:a,styleButtonViews:c});if(n.styles.listTypes.includes(l)&&ny(e,()=>u.stylesView.children.find(d=>d.isOn)),a.startIndex){const d=t.commands.get("listStart");u.startIndexFieldView.bind("isEnabled").to(d),u.startIndexFieldView.fieldView.bind("value").to(d),u.on("listStart",(f,p)=>t.execute("listStart",p))}if(a.reversed){const d=t.commands.get("listReversed");u.reversedSwitchButtonView.bind("isEnabled").to(d),u.reversedSwitchButtonView.bind("isOn").to(d,"value",f=>!!f),u.on("listReversed",()=>{const f=d.value;t.execute("listReversed",{reversed:!f})})}return u.delegate("execute").to(e),u}function TR({editor:t,normalizedConfig:n,parentCommandName:e,buttonLabel:i,styleGridAriaLabel:s,styleDefinitions:r}){return o=>{const a=new ko(o),l=t.commands.get(e),c=t.commands.get("listStyle"),u=az(c),d=oz({editor:t,parentCommandName:e,listStyleCommand:c}),f=r.filter(u).map(d),p=new rz(o,{styleGridAriaLabel:s,enabledProperties:{...n,startIndex:!1,reversed:!1},styleButtonViews:f});return p.delegate("execute").to(a),a.buttonView.set({label:i,icon:kt[e]}),a.panelView.children.add(p),a.bind("isEnabled").to(l,"isEnabled"),a.on("execute",()=>{t.editing.view.focus()}),a}}function az(t){return typeof t.isStyleTypeSupported=="function"?n=>t.isStyleTypeSupported(n.type):()=>!0}class nAe extends Be{static get requires(){return[Uxe,eAe]}static get pluginName(){return"ListProperties"}}class iAe extends en{constructor(n){super(n),this.on("execute",()=>{this.refresh()},{priority:"highest"})}refresh(){const n=this._getSelectedItems();this.value=this._getValue(n),this.isEnabled=!!n.length}execute(n={}){this.editor.model.change(e=>{const i=this._getSelectedItems(),s=n.forceValue===void 0?!this._getValue(i):n.forceValue;for(const r of i)s?e.setAttribute("todoListChecked",!0,r):e.removeAttribute("todoListChecked",r)})}_getValue(n){return n.every(e=>e.getAttribute("todoListChecked"))}_getSelectedItems(){const n=this.editor.model,e=n.schema,i=n.document.selection.getFirstRange(),s=i.start.parent,r=[];e.checkAttribute(s,"todoListChecked")&&r.push(...m1(s));for(const o of i.getItems({shallow:!0}))e.checkAttribute(o,"todoListChecked")&&!r.includes(o)&&r.push(...m1(o));return r}}class sAe extends Oc{constructor(){super(...arguments);w(this,"domEventType",["change"])}onDomEvent(e){if(e.target){const i=this.view.domConverter.mapDomToView(e.target);i&&i.is("element","input")&&i.getAttribute("type")=="checkbox"&&i.findAncestor({classes:"todo-list__label"})&&this.fire("todoCheckboxChange",e)}}}const rAe=Hw("Ctrl+Enter");class oAe extends Be{static get pluginName(){return"TodoListEditing"}static get requires(){return[v1]}init(){const n=this.editor,e=n.model,i=n.editing,s=n.plugins.get(v1),o=n.config.get("list.multiBlock")?"paragraph":"listItem";n.commands.add("todoList",new qp(n,"todo")),n.commands.add("checkTodoList",new iAe(n)),i.view.addObserver(sAe),e.schema.extend("$listItem",{allowAttributes:"todoListChecked"}),e.schema.addAttributeCheck(a=>{const l=a.last;if(!l.getAttribute("listItemId")||l.getAttribute("listType")!="todo")return!1},"todoListChecked"),n.conversion.for("upcast").add(a=>{a.on("element:input",aAe()),a.on("element:label",t3({name:"label",classes:"todo-list__label"})),a.on("element:label",t3({name:"label",classes:["todo-list__label","todo-list__label_without-description"]})),a.on("element:span",t3({name:"span",classes:"todo-list__label__description"})),a.on("element:ul",lAe({name:"ul",classes:"todo-list"}))}),n.conversion.for("downcast").elementToElement({model:o,view:(a,{writer:l})=>{if(Ov(a,s.getListAttributeNames()))return l.createContainerElement("span",{class:"todo-list__label__description"})},converterPriority:"highest"}),s.registerDowncastStrategy({scope:"list",attributeName:"listType",setAttributeOnDowncast(a,l,c){l=="todo"?a.addClass("todo-list",c):a.removeClass("todo-list",c)}}),s.registerDowncastStrategy({scope:"itemMarker",attributeName:"todoListChecked",createElement(a,l,{dataPipeline:c}){if(l.getAttribute("listType")!="todo")return null;const u=a.createUIElement("input",{type:"checkbox",...l.getAttribute("todoListChecked")?{checked:"checked"}:null,...c?{disabled:"disabled"}:{tabindex:"-1"}});if(c)return u;const d=a.createContainerElement("span",{contenteditable:"false"},u);return d.getFillerOffset=()=>null,d},canWrapElement(a){return Ov(a,s.getListAttributeNames())},createWrapperElement(a,l,{dataPipeline:c}){const u=["todo-list__label"];return Ov(l,s.getListAttributeNames())||u.push("todo-list__label_without-description"),a.createAttributeElement(c?"label":"span",{class:u.join(" ")})}}),s.on("checkElement",(a,{modelElement:l,viewElement:c})=>{const u=Ov(l,s.getListAttributeNames());c.hasClass("todo-list__label__description")!=u&&(a.return=!0,a.stop())}),s.on("checkElement",(a,{modelElement:l,viewElement:c})=>{const u=l.getAttribute("listType")=="todo"&&yc(l);let d=!1;const f=n.editing.view.createPositionBefore(c).getWalker({direction:"backward"});for(const{item:p}of f){if(p.is("element")&&n.editing.mapper.toModelElement(p))break;p.is("element","input")&&p.getAttribute("type")=="checkbox"&&(d=!0)}d!=u&&(a.return=!0,a.stop())}),s.on("postFixer",(a,{listNodes:l,writer:c})=>{for(const{node:u,previousNodeInList:d}of l){if(!d||d.getAttribute("listItemId")!=u.getAttribute("listItemId"))continue;const f=d.hasAttribute("todoListChecked"),p=u.hasAttribute("todoListChecked");p&&!f?(c.removeAttribute("todoListChecked",u),a.return=!0):!p&&f&&(c.setAttribute("todoListChecked",!0,u),a.return=!0)}}),e.document.registerPostFixer(a=>{const l=e.document.differ.getChanges();let c=!1;for(const u of l)if(u.type=="attribute"&&u.attributeKey=="listType"){const d=u.range.start.nodeAfter;u.attributeOldValue=="todo"&&d.hasAttribute("todoListChecked")&&(a.removeAttribute("todoListChecked",d),c=!0)}else if(u.type=="insert"&&u.name!="$text")for(const{item:d}of a.createRangeOn(u.position.nodeAfter))d.is("element")&&d.getAttribute("listType")!="todo"&&d.hasAttribute("todoListChecked")&&(a.removeAttribute("todoListChecked",d),c=!0);return c}),this.listenTo(i.view.document,"keydown",(a,l)=>{vh(l)===rAe&&(n.execute("checkTodoList"),a.stop())},{priority:"high"}),this.listenTo(i.view.document,"todoCheckboxChange",(a,l)=>{const c=l.target;if(!c||!c.is("element","input"))return;const u=i.view.createPositionAfter(c),f=i.mapper.toModelPosition(u).parent;f&&Pi(f)&&f.getAttribute("listType")=="todo"&&this._handleCheckmarkChange(f)}),this.listenTo(i.view.document,"arrowKey",uAe(e,n.locale),{context:"$text"}),this.listenTo(i.mapper,"viewToModelPosition",(a,l)=>{const c=l.viewPosition.parent,u=c.is("attributeElement","li")&&l.viewPosition.offset==0,d=xR(c)&&l.viewPosition.offset<=1,f=c.is("element","span")&&c.getAttribute("contenteditable")=="false"&&xR(c.parent);if(!u&&!d&&!f)return;const p=l.modelPosition.nodeAfter;p&&p.getAttribute("listType")=="todo"&&(l.modelPosition=e.createPositionAt(p,0))},{priority:"low"}),this._initAriaAnnouncements()}_handleCheckmarkChange(n){const e=this.editor,i=e.model,s=Array.from(i.document.selection.getRanges());i.change(r=>{r.setSelection(n,"end"),e.execute("checkTodoList"),r.setSelection(s)})}_initAriaAnnouncements(){const{model:n,ui:e,t:i}=this.editor;let s=null;e&&n.document.selection.on("change:range",()=>{const r=n.document.selection.focus.parent,o=AR(s),a=AR(r);o&&!a?e.ariaLiveAnnouncer.announce(i("Leaving a to-do list")):!o&&a&&e.ariaLiveAnnouncer.announce(i("Entering a to-do list")),s=r})}}function aAe(){return(t,n,e)=>{const i=n.modelCursor,s=i.parent,r=n.viewItem;if(!e.consumable.test(r,{name:!0})||r.getAttribute("type")!="checkbox"||!i.isAtStart||!s.hasAttribute("listType"))return;e.consumable.consume(r,{name:!0});const o=e.writer;o.setAttribute("listType","todo",s),n.viewItem.hasAttribute("checked")&&o.setAttribute("todoListChecked",!0,s),n.modelRange=o.createRange(i)}}function t3(t){const n=new Io(t);return(e,i,s)=>{const r=n.match(i.viewItem);r&&s.consumable.consume(i.viewItem,r.match)&&Object.assign(i,s.convertChildren(i.viewItem,i.modelCursor))}}function lAe(t){const n=new Io(t);return(e,i,s)=>{const r=n.match(i.viewItem);if(!r)return;const o=r.match;o.name=!1,s.consumable.consume(i.viewItem,o)}}function Ov(t,n){return(t.is("element","paragraph")||t.is("element","listItem"))&&t.getAttribute("listType")=="todo"&&yc(t)&&cAe(t,n)}function cAe(t,n){for(const e of t.getAttributeKeys())if(!e.startsWith("selection:")&&!n.includes(e))return!1;return!0}function uAe(t,n){return(e,i)=>{const s=Uw(i.keyCode,n.contentLanguageDirection),r=t.schema,o=t.document.selection;if(!o.isCollapsed)return;const a=o.getFirstPosition(),l=a.parent;if(s=="right"&&a.isAtEnd){const c=r.getNearestSelectionRange(t.createPositionAfter(l),"forward");if(!c)return;const u=c.start.parent;u&&Pi(u)&&u.getAttribute("listType")=="todo"&&(t.change(d=>d.setSelection(c)),i.preventDefault(),i.stopPropagation(),e.stop())}else if(s=="left"&&a.isAtStart&&Pi(l)&&l.getAttribute("listType")=="todo"){const c=r.getNearestSelectionRange(t.createPositionBefore(l),"backward");if(!c)return;t.change(u=>u.setSelection(c)),i.preventDefault(),i.stopPropagation(),e.stop()}}}function xR(t){return!!t&&t.is("attributeElement")&&t.hasClass("todo-list__label")}function AR(t){return!t||!t.is("element","paragraph")&&!t.is("element","listItem")?!1:t.getAttribute("listType")=="todo"}class dAe extends Be{static get pluginName(){return"TodoListUI"}init(){const n=this.editor.t;mk(this.editor,"todoList",n("To-do List"),kt.todoList)}}class hAe extends Be{static get requires(){return[oAe,dAe]}static get pluginName(){return"TodoList"}}function lz(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}let Nm=lz();function fAe(t){Nm=t}const mAe=/[&<>"']/,pAe=/[&<>"']/g,gAe=/[<>"']|&(?!#?\w+;)/,vAe=/[<>"']|&(?!#?\w+;)/g,bAe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},IR=t=>bAe[t];function Fs(t,n){if(n){if(mAe.test(t))return t.replace(pAe,IR)}else if(gAe.test(t))return t.replace(vAe,IR);return t}const _Ae=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function cz(t){return t.replace(_Ae,(n,e)=>(e=e.toLowerCase(),e==="colon"?":":e.charAt(0)==="#"?e.charAt(1)==="x"?String.fromCharCode(parseInt(e.substring(2),16)):String.fromCharCode(+e.substring(1)):""))}const wAe=/(^|[^\[])\^/g;function Fi(t,n){t=t.source||t,n=n||"";const e={replace:(i,s)=>(s=s.source||s,s=s.replace(wAe,"$1"),t=t.replace(i,s),e),getRegex:()=>new RegExp(t,n)};return e}const yAe=/[^\w:]/g,CAe=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function RR(t,n,e){if(t){let i;try{i=decodeURIComponent(cz(e)).replace(yAe,"").toLowerCase()}catch{return null}if(i.indexOf("javascript:")===0||i.indexOf("vbscript:")===0||i.indexOf("data:")===0)return null}n&&!CAe.test(e)&&(e=TAe(n,e));try{e=encodeURI(e).replace(/%25/g,"%")}catch{return null}return e}const Lv={},kAe=/^[^:]+:\/*[^/]*$/,EAe=/^([^:]+:)[\s\S]*$/,SAe=/^([^:]+:\/*[^/]*)[\s\S]*$/;function TAe(t,n){Lv[" "+t]||(kAe.test(t)?Lv[" "+t]=t+"/":Lv[" "+t]=Bb(t,"/",!0)),t=Lv[" "+t];const e=t.indexOf(":")===-1;return n.substring(0,2)==="//"?e?n:t.replace(EAe,"$1")+n:n.charAt(0)==="/"?e?n:t.replace(SAe,"$1")+n:t+n}const F_={exec:function(){}};function Ka(t){let n=1,e,i;for(;n<arguments.length;n++){e=arguments[n];for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t}function MR(t,n){const e=t.replace(/\|/g,(r,o,a)=>{let l=!1,c=o;for(;--c>=0&&a[c]==="\\";)l=!l;return l?"|":" |"}),i=e.split(/ \|/);let s=0;if(i[0].trim()||i.shift(),i.length>0&&!i[i.length-1].trim()&&i.pop(),i.length>n)i.splice(n);else for(;i.length<n;)i.push("");for(;s<i.length;s++)i[s]=i[s].trim().replace(/\\\|/g,"|");return i}function Bb(t,n,e){const i=t.length;if(i===0)return"";let s=0;for(;s<i;){const r=t.charAt(i-s-1);if(r===n&&!e)s++;else if(r!==n&&e)s++;else break}return t.substr(0,i-s)}function xAe(t,n){if(t.indexOf(n[1])===-1)return-1;const e=t.length;let i=0,s=0;for(;s<e;s++)if(t[s]==="\\")s++;else if(t[s]===n[0])i++;else if(t[s]===n[1]&&(i--,i<0))return s;return-1}function uz(t){t&&t.sanitize&&!t.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function PR(t,n){if(n<1)return"";let e="";for(;n>1;)n&1&&(e+=t),n>>=1,t+=t;return e+t}function OR(t,n,e,i){const s=n.href,r=n.title?Fs(n.title):null,o=t[1].replace(/\\([\[\]])/g,"$1");if(t[0].charAt(0)!=="!"){i.state.inLink=!0;const a={type:"link",raw:e,href:s,title:r,text:o,tokens:i.inlineTokens(o,[])};return i.state.inLink=!1,a}else return{type:"image",raw:e,href:s,title:r,text:Fs(o)}}function AAe(t,n){const e=t.match(/^(\s+)(?:```)/);if(e===null)return n;const i=e[1];return n.split(`
`).map(s=>{const r=s.match(/^\s+/);if(r===null)return s;const[o]=r;return o.length>=i.length?s.slice(i.length):s}).join(`
`)}class pS{constructor(n){this.options=n||Nm}space(n){const e=this.rules.block.newline.exec(n);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(n){const e=this.rules.block.code.exec(n);if(e){const i=e[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?i:Bb(i,`
`)}}}fences(n){const e=this.rules.block.fences.exec(n);if(e){const i=e[0],s=AAe(i,e[3]||"");return{type:"code",raw:i,lang:e[2]?e[2].trim():e[2],text:s}}}heading(n){const e=this.rules.block.heading.exec(n);if(e){let i=e[2].trim();if(/#$/.test(i)){const r=Bb(i,"#");(this.options.pedantic||!r||/ $/.test(r))&&(i=r.trim())}const s={type:"heading",raw:e[0],depth:e[1].length,text:i,tokens:[]};return this.lexer.inline(s.text,s.tokens),s}}hr(n){const e=this.rules.block.hr.exec(n);if(e)return{type:"hr",raw:e[0]}}blockquote(n){const e=this.rules.block.blockquote.exec(n);if(e){const i=e[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:e[0],tokens:this.lexer.blockTokens(i,[]),text:i}}}list(n){let e=this.rules.block.list.exec(n);if(e){let i,s,r,o,a,l,c,u,d,f,p,m,v=e[1].trim();const y=v.length>1,_={type:"list",raw:"",ordered:y,start:y?+v.slice(0,-1):"",loose:!1,items:[]};v=y?`\\d{1,9}\\${v.slice(-1)}`:`\\${v}`,this.options.pedantic&&(v=y?v:"[*+-]");const b=new RegExp(`^( {0,3}${v})((?: [^\\n]*)?(?:\\n|$))`);for(;n&&(m=!1,!(!(e=b.exec(n))||this.rules.block.hr.test(n)));){if(i=e[0],n=n.substring(i.length),u=e[2].split(`
`,1)[0],d=n.split(`
`,1)[0],this.options.pedantic?(o=2,p=u.trimLeft()):(o=e[2].search(/[^ ]/),o=o>4?1:o,p=u.slice(o),o+=e[1].length),l=!1,!u&&/^ *$/.test(d)&&(i+=d+`
`,n=n.substring(d.length+1),m=!0),!m){const x=new RegExp(`^ {0,${Math.min(3,o-1)}}(?:[*+-]|\\d{1,9}[.)])`);for(;n&&(f=n.split(`
`,1)[0],u=f,this.options.pedantic&&(u=u.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!x.test(u));){if(u.search(/[^ ]/)>=o||!u.trim())p+=`
`+u.slice(o);else if(!l)p+=`
`+u;else break;!l&&!u.trim()&&(l=!0),i+=f+`
`,n=n.substring(f.length+1)}}_.loose||(c?_.loose=!0:/\n *\n *$/.test(i)&&(c=!0)),this.options.gfm&&(s=/^\[[ xX]\] /.exec(p),s&&(r=s[0]!=="[ ] ",p=p.replace(/^\[[ xX]\] +/,""))),_.items.push({type:"list_item",raw:i,task:!!s,checked:r,loose:!1,text:p}),_.raw+=i}_.items[_.items.length-1].raw=i.trimRight(),_.items[_.items.length-1].text=p.trimRight(),_.raw=_.raw.trimRight();const E=_.items.length;for(a=0;a<E;a++){this.lexer.state.top=!1,_.items[a].tokens=this.lexer.blockTokens(_.items[a].text,[]);const x=_.items[a].tokens.filter(I=>I.type==="space"),A=x.every(I=>{const k=I.raw.split("");let O=0;for(const M of k)if(M===`
`&&(O+=1),O>1)return!0;return!1});!_.loose&&x.length&&A&&(_.loose=!0,_.items[a].loose=!0)}return _}}html(n){const e=this.rules.block.html.exec(n);if(e){const i={type:"html",raw:e[0],pre:!this.options.sanitizer&&(e[1]==="pre"||e[1]==="script"||e[1]==="style"),text:e[0]};return this.options.sanitize&&(i.type="paragraph",i.text=this.options.sanitizer?this.options.sanitizer(e[0]):Fs(e[0]),i.tokens=[],this.lexer.inline(i.text,i.tokens)),i}}def(n){const e=this.rules.block.def.exec(n);if(e)return e[3]&&(e[3]=e[3].substring(1,e[3].length-1)),{type:"def",tag:e[1].toLowerCase().replace(/\s+/g," "),raw:e[0],href:e[2],title:e[3]}}table(n){const e=this.rules.block.table.exec(n);if(e){const i={type:"table",header:MR(e[1]).map(s=>({text:s})),align:e[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:e[3]&&e[3].trim()?e[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(i.header.length===i.align.length){i.raw=e[0];let s=i.align.length,r,o,a,l;for(r=0;r<s;r++)/^ *-+: *$/.test(i.align[r])?i.align[r]="right":/^ *:-+: *$/.test(i.align[r])?i.align[r]="center":/^ *:-+ *$/.test(i.align[r])?i.align[r]="left":i.align[r]=null;for(s=i.rows.length,r=0;r<s;r++)i.rows[r]=MR(i.rows[r],i.header.length).map(c=>({text:c}));for(s=i.header.length,o=0;o<s;o++)i.header[o].tokens=[],this.lexer.inlineTokens(i.header[o].text,i.header[o].tokens);for(s=i.rows.length,o=0;o<s;o++)for(l=i.rows[o],a=0;a<l.length;a++)l[a].tokens=[],this.lexer.inlineTokens(l[a].text,l[a].tokens);return i}}}lheading(n){const e=this.rules.block.lheading.exec(n);if(e){const i={type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:[]};return this.lexer.inline(i.text,i.tokens),i}}paragraph(n){const e=this.rules.block.paragraph.exec(n);if(e){const i={type:"paragraph",raw:e[0],text:e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1],tokens:[]};return this.lexer.inline(i.text,i.tokens),i}}text(n){const e=this.rules.block.text.exec(n);if(e){const i={type:"text",raw:e[0],text:e[0],tokens:[]};return this.lexer.inline(i.text,i.tokens),i}}escape(n){const e=this.rules.inline.escape.exec(n);if(e)return{type:"escape",raw:e[0],text:Fs(e[1])}}tag(n){const e=this.rules.inline.tag.exec(n);if(e)return!this.lexer.state.inLink&&/^<a /i.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(e[0]):Fs(e[0]):e[0]}}link(n){const e=this.rules.inline.link.exec(n);if(e){const i=e[2].trim();if(!this.options.pedantic&&/^</.test(i)){if(!/>$/.test(i))return;const o=Bb(i.slice(0,-1),"\\");if((i.length-o.length)%2===0)return}else{const o=xAe(e[2],"()");if(o>-1){const l=(e[0].indexOf("!")===0?5:4)+e[1].length+o;e[2]=e[2].substring(0,o),e[0]=e[0].substring(0,l).trim(),e[3]=""}}let s=e[2],r="";if(this.options.pedantic){const o=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(s);o&&(s=o[1],r=o[3])}else r=e[3]?e[3].slice(1,-1):"";return s=s.trim(),/^</.test(s)&&(this.options.pedantic&&!/>$/.test(i)?s=s.slice(1):s=s.slice(1,-1)),OR(e,{href:s&&s.replace(this.rules.inline._escapes,"$1"),title:r&&r.replace(this.rules.inline._escapes,"$1")},e[0],this.lexer)}}reflink(n,e){let i;if((i=this.rules.inline.reflink.exec(n))||(i=this.rules.inline.nolink.exec(n))){let s=(i[2]||i[1]).replace(/\s+/g," ");if(s=e[s.toLowerCase()],!s||!s.href){const r=i[0].charAt(0);return{type:"text",raw:r,text:r}}return OR(i,s,i[0],this.lexer)}}emStrong(n,e,i=""){let s=this.rules.inline.emStrong.lDelim.exec(n);if(!s||s[3]&&i.match(/[\p{L}\p{N}]/u))return;const r=s[1]||s[2]||"";if(!r||r&&(i===""||this.rules.inline.punctuation.exec(i))){const o=s[0].length-1;let a,l,c=o,u=0;const d=s[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(d.lastIndex=0,e=e.slice(-1*n.length+o);(s=d.exec(e))!=null;){if(a=s[1]||s[2]||s[3]||s[4]||s[5]||s[6],!a)continue;if(l=a.length,s[3]||s[4]){c+=l;continue}else if((s[5]||s[6])&&o%3&&!((o+l)%3)){u+=l;continue}if(c-=l,c>0)continue;if(l=Math.min(l,l+c+u),Math.min(o,l)%2){const p=n.slice(1,o+s.index+l);return{type:"em",raw:n.slice(0,o+s.index+l+1),text:p,tokens:this.lexer.inlineTokens(p,[])}}const f=n.slice(2,o+s.index+l-1);return{type:"strong",raw:n.slice(0,o+s.index+l+1),text:f,tokens:this.lexer.inlineTokens(f,[])}}}}codespan(n){const e=this.rules.inline.code.exec(n);if(e){let i=e[2].replace(/\n/g," ");const s=/[^ ]/.test(i),r=/^ /.test(i)&&/ $/.test(i);return s&&r&&(i=i.substring(1,i.length-1)),i=Fs(i,!0),{type:"codespan",raw:e[0],text:i}}}br(n){const e=this.rules.inline.br.exec(n);if(e)return{type:"br",raw:e[0]}}del(n){const e=this.rules.inline.del.exec(n);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2],[])}}autolink(n,e){const i=this.rules.inline.autolink.exec(n);if(i){let s,r;return i[2]==="@"?(s=Fs(this.options.mangle?e(i[1]):i[1]),r="mailto:"+s):(s=Fs(i[1]),r=s),{type:"link",raw:i[0],text:s,href:r,tokens:[{type:"text",raw:s,text:s}]}}}url(n,e){let i;if(i=this.rules.inline.url.exec(n)){let s,r;if(i[2]==="@")s=Fs(this.options.mangle?e(i[0]):i[0]),r="mailto:"+s;else{let o;do o=i[0],i[0]=this.rules.inline._backpedal.exec(i[0])[0];while(o!==i[0]);s=Fs(i[0]),i[1]==="www."?r="http://"+s:r=s}return{type:"link",raw:i[0],text:s,href:r,tokens:[{type:"text",raw:s,text:s}]}}}inlineText(n,e){const i=this.rules.inline.text.exec(n);if(i){let s;return this.lexer.state.inRawBlock?s=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):Fs(i[0]):i[0]:s=Fs(this.options.smartypants?e(i[0]):i[0]),{type:"text",raw:i[0],text:s}}}}const an={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)( [^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:F_,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};an._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/;an._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/;an.def=Fi(an.def).replace("label",an._label).replace("title",an._title).getRegex();an.bullet=/(?:[*+-]|\d{1,9}[.)])/;an.listItemStart=Fi(/^( *)(bull) */).replace("bull",an.bullet).getRegex();an.list=Fi(an.list).replace(/bull/g,an.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+an.def.source+")").getRegex();an._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul";an._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/;an.html=Fi(an.html,"i").replace("comment",an._comment).replace("tag",an._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex();an.paragraph=Fi(an._paragraph).replace("hr",an.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",an._tag).getRegex();an.blockquote=Fi(an.blockquote).replace("paragraph",an.paragraph).getRegex();an.normal=Ka({},an);an.gfm=Ka({},an.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"});an.gfm.table=Fi(an.gfm.table).replace("hr",an.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",an._tag).getRegex();an.gfm.paragraph=Fi(an._paragraph).replace("hr",an.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",an.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",an._tag).getRegex();an.pedantic=Ka({},an.normal,{html:Fi(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",an._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:F_,paragraph:Fi(an.normal._paragraph).replace("hr",an.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",an.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});const Wt={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:F_,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:F_,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};Wt._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~";Wt.punctuation=Fi(Wt.punctuation).replace(/punctuation/g,Wt._punctuation).getRegex();Wt.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g;Wt.escapedEmSt=/\\\*|\\_/g;Wt._comment=Fi(an._comment).replace("(?:-->|$)","-->").getRegex();Wt.emStrong.lDelim=Fi(Wt.emStrong.lDelim).replace(/punct/g,Wt._punctuation).getRegex();Wt.emStrong.rDelimAst=Fi(Wt.emStrong.rDelimAst,"g").replace(/punct/g,Wt._punctuation).getRegex();Wt.emStrong.rDelimUnd=Fi(Wt.emStrong.rDelimUnd,"g").replace(/punct/g,Wt._punctuation).getRegex();Wt._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g;Wt._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;Wt._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;Wt.autolink=Fi(Wt.autolink).replace("scheme",Wt._scheme).replace("email",Wt._email).getRegex();Wt._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/;Wt.tag=Fi(Wt.tag).replace("comment",Wt._comment).replace("attribute",Wt._attribute).getRegex();Wt._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/;Wt._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/;Wt._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/;Wt.link=Fi(Wt.link).replace("label",Wt._label).replace("href",Wt._href).replace("title",Wt._title).getRegex();Wt.reflink=Fi(Wt.reflink).replace("label",Wt._label).replace("ref",an._label).getRegex();Wt.nolink=Fi(Wt.nolink).replace("ref",an._label).getRegex();Wt.reflinkSearch=Fi(Wt.reflinkSearch,"g").replace("reflink",Wt.reflink).replace("nolink",Wt.nolink).getRegex();Wt.normal=Ka({},Wt);Wt.pedantic=Ka({},Wt.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:Fi(/^!?\[(label)\]\((.*?)\)/).replace("label",Wt._label).getRegex(),reflink:Fi(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Wt._label).getRegex()});Wt.gfm=Ka({},Wt.normal,{escape:Fi(Wt.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/});Wt.gfm.url=Fi(Wt.gfm.url,"i").replace("email",Wt.gfm._extended_email).getRegex();Wt.breaks=Ka({},Wt.gfm,{br:Fi(Wt.br).replace("{2,}","*").getRegex(),text:Fi(Wt.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});function IAe(t){return t.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…")}function LR(t){let n="",e,i;const s=t.length;for(e=0;e<s;e++)i=t.charCodeAt(e),Math.random()>.5&&(i="x"+i.toString(16)),n+="&#"+i+";";return n}class Cc{constructor(n){this.tokens=[],this.tokens.links=Object.create(null),this.options=n||Nm,this.options.tokenizer=this.options.tokenizer||new pS,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const e={block:an.normal,inline:Wt.normal};this.options.pedantic?(e.block=an.pedantic,e.inline=Wt.pedantic):this.options.gfm&&(e.block=an.gfm,this.options.breaks?e.inline=Wt.breaks:e.inline=Wt.gfm),this.tokenizer.rules=e}static get rules(){return{block:an,inline:Wt}}static lex(n,e){return new Cc(e).lex(n)}static lexInline(n,e){return new Cc(e).inlineTokens(n)}lex(n){n=n.replace(/\r\n|\r/g,`
`).replace(/\t/g,"    "),this.blockTokens(n,this.tokens);let e;for(;e=this.inlineQueue.shift();)this.inlineTokens(e.src,e.tokens);return this.tokens}blockTokens(n,e=[]){this.options.pedantic&&(n=n.replace(/^ +$/gm,""));let i,s,r,o;for(;n;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>(i=a.call({lexer:this},n,e))?(n=n.substring(i.raw.length),e.push(i),!0):!1))){if(i=this.tokenizer.space(n)){n=n.substring(i.raw.length),i.raw.length===1&&e.length>0?e[e.length-1].raw+=`
`:e.push(i);continue}if(i=this.tokenizer.code(n)){n=n.substring(i.raw.length),s=e[e.length-1],s&&(s.type==="paragraph"||s.type==="text")?(s.raw+=`
`+i.raw,s.text+=`
`+i.text,this.inlineQueue[this.inlineQueue.length-1].src=s.text):e.push(i);continue}if(i=this.tokenizer.fences(n)){n=n.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.heading(n)){n=n.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.hr(n)){n=n.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.blockquote(n)){n=n.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.list(n)){n=n.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.html(n)){n=n.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.def(n)){n=n.substring(i.raw.length),s=e[e.length-1],s&&(s.type==="paragraph"||s.type==="text")?(s.raw+=`
`+i.raw,s.text+=`
`+i.raw,this.inlineQueue[this.inlineQueue.length-1].src=s.text):this.tokens.links[i.tag]||(this.tokens.links[i.tag]={href:i.href,title:i.title});continue}if(i=this.tokenizer.table(n)){n=n.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.lheading(n)){n=n.substring(i.raw.length),e.push(i);continue}if(r=n,this.options.extensions&&this.options.extensions.startBlock){let a=1/0;const l=n.slice(1);let c;this.options.extensions.startBlock.forEach(function(u){c=u.call({lexer:this},l),typeof c=="number"&&c>=0&&(a=Math.min(a,c))}),a<1/0&&a>=0&&(r=n.substring(0,a+1))}if(this.state.top&&(i=this.tokenizer.paragraph(r))){s=e[e.length-1],o&&s.type==="paragraph"?(s.raw+=`
`+i.raw,s.text+=`
`+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=s.text):e.push(i),o=r.length!==n.length,n=n.substring(i.raw.length);continue}if(i=this.tokenizer.text(n)){n=n.substring(i.raw.length),s=e[e.length-1],s&&s.type==="text"?(s.raw+=`
`+i.raw,s.text+=`
`+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=s.text):e.push(i);continue}if(n){const a="Infinite loop on byte: "+n.charCodeAt(0);if(this.options.silent){console.error(a);break}else throw new Error(a)}}return this.state.top=!0,e}inline(n,e){this.inlineQueue.push({src:n,tokens:e})}inlineTokens(n,e=[]){let i,s,r,o=n,a,l,c;if(this.tokens.links){const u=Object.keys(this.tokens.links);if(u.length>0)for(;(a=this.tokenizer.rules.inline.reflinkSearch.exec(o))!=null;)u.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(o=o.slice(0,a.index)+"["+PR("a",a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(a=this.tokenizer.rules.inline.blockSkip.exec(o))!=null;)o=o.slice(0,a.index)+"["+PR("a",a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(a=this.tokenizer.rules.inline.escapedEmSt.exec(o))!=null;)o=o.slice(0,a.index)+"++"+o.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;n;)if(l||(c=""),l=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(u=>(i=u.call({lexer:this},n,e))?(n=n.substring(i.raw.length),e.push(i),!0):!1))){if(i=this.tokenizer.escape(n)){n=n.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.tag(n)){n=n.substring(i.raw.length),s=e[e.length-1],s&&i.type==="text"&&s.type==="text"?(s.raw+=i.raw,s.text+=i.text):e.push(i);continue}if(i=this.tokenizer.link(n)){n=n.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.reflink(n,this.tokens.links)){n=n.substring(i.raw.length),s=e[e.length-1],s&&i.type==="text"&&s.type==="text"?(s.raw+=i.raw,s.text+=i.text):e.push(i);continue}if(i=this.tokenizer.emStrong(n,o,c)){n=n.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.codespan(n)){n=n.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.br(n)){n=n.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.del(n)){n=n.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.autolink(n,LR)){n=n.substring(i.raw.length),e.push(i);continue}if(!this.state.inLink&&(i=this.tokenizer.url(n,LR))){n=n.substring(i.raw.length),e.push(i);continue}if(r=n,this.options.extensions&&this.options.extensions.startInline){let u=1/0;const d=n.slice(1);let f;this.options.extensions.startInline.forEach(function(p){f=p.call({lexer:this},d),typeof f=="number"&&f>=0&&(u=Math.min(u,f))}),u<1/0&&u>=0&&(r=n.substring(0,u+1))}if(i=this.tokenizer.inlineText(r,IAe)){n=n.substring(i.raw.length),i.raw.slice(-1)!=="_"&&(c=i.raw.slice(-1)),l=!0,s=e[e.length-1],s&&s.type==="text"?(s.raw+=i.raw,s.text+=i.text):e.push(i);continue}if(n){const u="Infinite loop on byte: "+n.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return e}}class gS{constructor(n){this.options=n||Nm}code(n,e,i){const s=(e||"").match(/\S*/)[0];if(this.options.highlight){const r=this.options.highlight(n,s);r!=null&&r!==n&&(i=!0,n=r)}return n=n.replace(/\n$/,"")+`
`,s?'<pre><code class="'+this.options.langPrefix+Fs(s,!0)+'">'+(i?n:Fs(n,!0))+`</code></pre>
`:"<pre><code>"+(i?n:Fs(n,!0))+`</code></pre>
`}blockquote(n){return`<blockquote>
`+n+`</blockquote>
`}html(n){return n}heading(n,e,i,s){return this.options.headerIds?"<h"+e+' id="'+this.options.headerPrefix+s.slug(i)+'">'+n+"</h"+e+`>
`:"<h"+e+">"+n+"</h"+e+`>
`}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(n,e,i){const s=e?"ol":"ul",r=e&&i!==1?' start="'+i+'"':"";return"<"+s+r+`>
`+n+"</"+s+`>
`}listitem(n){return"<li>"+n+`</li>
`}checkbox(n){return"<input "+(n?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(n){return"<p>"+n+`</p>
`}table(n,e){return e&&(e="<tbody>"+e+"</tbody>"),`<table>
<thead>
`+n+`</thead>
`+e+`</table>
`}tablerow(n){return`<tr>
`+n+`</tr>
`}tablecell(n,e){const i=e.header?"th":"td";return(e.align?"<"+i+' align="'+e.align+'">':"<"+i+">")+n+"</"+i+`>
`}strong(n){return"<strong>"+n+"</strong>"}em(n){return"<em>"+n+"</em>"}codespan(n){return"<code>"+n+"</code>"}br(){return this.options.xhtml?"<br/>":"<br>"}del(n){return"<del>"+n+"</del>"}link(n,e,i){if(n=RR(this.options.sanitize,this.options.baseUrl,n),n===null)return i;let s='<a href="'+Fs(n)+'"';return e&&(s+=' title="'+e+'"'),s+=">"+i+"</a>",s}image(n,e,i){if(n=RR(this.options.sanitize,this.options.baseUrl,n),n===null)return i;let s='<img src="'+n+'" alt="'+i+'"';return e&&(s+=' title="'+e+'"'),s+=this.options.xhtml?"/>":">",s}text(n){return n}}class dz{strong(n){return n}em(n){return n}codespan(n){return n}del(n){return n}html(n){return n}text(n){return n}link(n,e,i){return""+i}image(n,e,i){return""+i}br(){return""}}class hz{constructor(){this.seen={}}serialize(n){return n.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(n,e){let i=n,s=0;if(this.seen.hasOwnProperty(i)){s=this.seen[n];do s++,i=n+"-"+s;while(this.seen.hasOwnProperty(i))}return e||(this.seen[n]=s,this.seen[i]=0),i}slug(n,e={}){const i=this.serialize(n);return this.getNextSafeSlug(i,e.dryrun)}}class kc{constructor(n){this.options=n||Nm,this.options.renderer=this.options.renderer||new gS,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new dz,this.slugger=new hz}static parse(n,e){return new kc(e).parse(n)}static parseInline(n,e){return new kc(e).parseInline(n)}parse(n,e=!0){let i="",s,r,o,a,l,c,u,d,f,p,m,v,y,_,b,E,x,A,I;const k=n.length;for(s=0;s<k;s++){if(p=n[s],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[p.type]&&(I=this.options.extensions.renderers[p.type].call({parser:this},p),I!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(p.type))){i+=I||"";continue}switch(p.type){case"space":continue;case"hr":{i+=this.renderer.hr();continue}case"heading":{i+=this.renderer.heading(this.parseInline(p.tokens),p.depth,cz(this.parseInline(p.tokens,this.textRenderer)),this.slugger);continue}case"code":{i+=this.renderer.code(p.text,p.lang,p.escaped);continue}case"table":{for(d="",u="",a=p.header.length,r=0;r<a;r++)u+=this.renderer.tablecell(this.parseInline(p.header[r].tokens),{header:!0,align:p.align[r]});for(d+=this.renderer.tablerow(u),f="",a=p.rows.length,r=0;r<a;r++){for(c=p.rows[r],u="",l=c.length,o=0;o<l;o++)u+=this.renderer.tablecell(this.parseInline(c[o].tokens),{header:!1,align:p.align[o]});f+=this.renderer.tablerow(u)}i+=this.renderer.table(d,f);continue}case"blockquote":{f=this.parse(p.tokens),i+=this.renderer.blockquote(f);continue}case"list":{for(m=p.ordered,v=p.start,y=p.loose,a=p.items.length,f="",r=0;r<a;r++)b=p.items[r],E=b.checked,x=b.task,_="",b.task&&(A=this.renderer.checkbox(E),y?b.tokens.length>0&&b.tokens[0].type==="paragraph"?(b.tokens[0].text=A+" "+b.tokens[0].text,b.tokens[0].tokens&&b.tokens[0].tokens.length>0&&b.tokens[0].tokens[0].type==="text"&&(b.tokens[0].tokens[0].text=A+" "+b.tokens[0].tokens[0].text)):b.tokens.unshift({type:"text",text:A}):_+=A),_+=this.parse(b.tokens,y),f+=this.renderer.listitem(_,x,E);i+=this.renderer.list(f,m,v);continue}case"html":{i+=this.renderer.html(p.text);continue}case"paragraph":{i+=this.renderer.paragraph(this.parseInline(p.tokens));continue}case"text":{for(f=p.tokens?this.parseInline(p.tokens):p.text;s+1<k&&n[s+1].type==="text";)p=n[++s],f+=`
`+(p.tokens?this.parseInline(p.tokens):p.text);i+=e?this.renderer.paragraph(f):f;continue}default:{const O='Token with "'+p.type+'" type was not found.';if(this.options.silent){console.error(O);return}else throw new Error(O)}}}return i}parseInline(n,e){e=e||this.renderer;let i="",s,r,o;const a=n.length;for(s=0;s<a;s++){if(r=n[s],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[r.type]&&(o=this.options.extensions.renderers[r.type].call({parser:this},r),o!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(r.type))){i+=o||"";continue}switch(r.type){case"escape":{i+=e.text(r.text);break}case"html":{i+=e.html(r.text);break}case"link":{i+=e.link(r.href,r.title,this.parseInline(r.tokens,e));break}case"image":{i+=e.image(r.href,r.title,r.text);break}case"strong":{i+=e.strong(this.parseInline(r.tokens,e));break}case"em":{i+=e.em(this.parseInline(r.tokens,e));break}case"codespan":{i+=e.codespan(r.text);break}case"br":{i+=e.br();break}case"del":{i+=e.del(this.parseInline(r.tokens,e));break}case"text":{i+=e.text(r.text);break}default:{const l='Token with "'+r.type+'" type was not found.';if(this.options.silent){console.error(l);return}else throw new Error(l)}}}return i}}function hn(t,n,e){if(typeof t>"u"||t===null)throw new Error("marked(): input parameter is undefined or null");if(typeof t!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected");if(typeof n=="function"&&(e=n,n=null),n=Ka({},hn.defaults,n||{}),uz(n),e){const i=n.highlight;let s;try{s=Cc.lex(t,n)}catch(a){return e(a)}const r=function(a){let l;if(!a)try{n.walkTokens&&hn.walkTokens(s,n.walkTokens),l=kc.parse(s,n)}catch(c){a=c}return n.highlight=i,a?e(a):e(null,l)};if(!i||i.length<3||(delete n.highlight,!s.length))return r();let o=0;hn.walkTokens(s,function(a){a.type==="code"&&(o++,setTimeout(()=>{i(a.text,a.lang,function(l,c){if(l)return r(l);c!=null&&c!==a.text&&(a.text=c,a.escaped=!0),o--,o===0&&r()})},0))}),o===0&&r();return}try{const i=Cc.lex(t,n);return n.walkTokens&&hn.walkTokens(i,n.walkTokens),kc.parse(i,n)}catch(i){if(i.message+=`
Please report this to https://github.com/markedjs/marked.`,n.silent)return"<p>An error occurred:</p><pre>"+Fs(i.message+"",!0)+"</pre>";throw i}}hn.options=hn.setOptions=function(t){return Ka(hn.defaults,t),fAe(hn.defaults),hn};hn.getDefaults=lz;hn.defaults=Nm;hn.use=function(...t){const n=Ka({},...t),e=hn.defaults.extensions||{renderers:{},childTokens:{}};let i;t.forEach(s=>{if(s.extensions&&(i=!0,s.extensions.forEach(r=>{if(!r.name)throw new Error("extension name required");if(r.renderer){const o=e.renderers?e.renderers[r.name]:null;o?e.renderers[r.name]=function(...a){let l=r.renderer.apply(this,a);return l===!1&&(l=o.apply(this,a)),l}:e.renderers[r.name]=r.renderer}if(r.tokenizer){if(!r.level||r.level!=="block"&&r.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");e[r.level]?e[r.level].unshift(r.tokenizer):e[r.level]=[r.tokenizer],r.start&&(r.level==="block"?e.startBlock?e.startBlock.push(r.start):e.startBlock=[r.start]:r.level==="inline"&&(e.startInline?e.startInline.push(r.start):e.startInline=[r.start]))}r.childTokens&&(e.childTokens[r.name]=r.childTokens)})),s.renderer){const r=hn.defaults.renderer||new gS;for(const o in s.renderer){const a=r[o];r[o]=(...l)=>{let c=s.renderer[o].apply(r,l);return c===!1&&(c=a.apply(r,l)),c}}n.renderer=r}if(s.tokenizer){const r=hn.defaults.tokenizer||new pS;for(const o in s.tokenizer){const a=r[o];r[o]=(...l)=>{let c=s.tokenizer[o].apply(r,l);return c===!1&&(c=a.apply(r,l)),c}}n.tokenizer=r}if(s.walkTokens){const r=hn.defaults.walkTokens;n.walkTokens=function(o){s.walkTokens.call(this,o),r&&r.call(this,o)}}i&&(n.extensions=e),hn.setOptions(n)})};hn.walkTokens=function(t,n){for(const e of t)switch(n.call(hn,e),e.type){case"table":{for(const i of e.header)hn.walkTokens(i.tokens,n);for(const i of e.rows)for(const s of i)hn.walkTokens(s.tokens,n);break}case"list":{hn.walkTokens(e.items,n);break}default:hn.defaults.extensions&&hn.defaults.extensions.childTokens&&hn.defaults.extensions.childTokens[e.type]?hn.defaults.extensions.childTokens[e.type].forEach(function(i){hn.walkTokens(e[i],n)}):e.tokens&&hn.walkTokens(e.tokens,n)}};hn.parseInline=function(t,n){if(typeof t>"u"||t===null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof t!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected");n=Ka({},hn.defaults,n||{}),uz(n);try{const e=Cc.lexInline(t,n);return n.walkTokens&&hn.walkTokens(e,n.walkTokens),kc.parseInline(e,n)}catch(e){if(e.message+=`
Please report this to https://github.com/markedjs/marked.`,n.silent)return"<p>An error occurred:</p><pre>"+Fs(e.message+"",!0)+"</pre>";throw e}};hn.Parser=kc;hn.parser=kc.parse;hn.Renderer=gS;hn.TextRenderer=dz;hn.Lexer=Cc;hn.lexer=Cc.lex;hn.Tokenizer=pS;hn.Slugger=hz;hn.parse=hn;hn.options;hn.setOptions;hn.use;hn.walkTokens;hn.parseInline;kc.parse;Cc.lex;var vS=typeof window<"u"?window:{};function RAe(){var t=vS.DOMParser,n=!1;try{new t().parseFromString("","text/html")&&(n=!0)}catch{}return n}function MAe(){var t=function(){};return PAe()?t.prototype.parseFromString=function(n){var e=new window.ActiveXObject("htmlfile");return e.designMode="on",e.open(),e.write(n),e.close(),e}:t.prototype.parseFromString=function(n){var e=document.implementation.createHTMLDocument("");return e.open(),e.write(n),e.close(),e},t}function PAe(){var t=!1;try{document.implementation.createHTMLDocument("").open()}catch{vS.ActiveXObject&&(t=!0)}return t}RAe()?vS.DOMParser:MAe();/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const BR={"(":")","[":"]","{":"}"};class OAe extends en{constructor(n){super(n),this._isEnabledBasedOnSelection=!1}refresh(){const n=this.editor.model,e=n.document;this.isEnabled=n.schema.checkAttributeInSelection(e.selection,"mention")}execute(n){const e=this.editor.model,s=e.document.selection,r=typeof n.mention=="string"?{id:n.mention}:n.mention,o=r.id,a=n.range||s.getFirstRange();if(!e.canEditAt(a))return;const l=n.text||o,c=fz({_text:l,id:o},r);if(n.marker.length!=1)throw new fe("mentioncommand-incorrect-marker",this);if(o.charAt(0)!=n.marker)throw new fe("mentioncommand-incorrect-id",this);e.change(u=>{const d=Va(s.getAttributes()),f=new Map(d.entries());f.set("mention",c);const p=e.insertContent(u.createText(l,f),a),m=p.start.nodeBefore,v=p.end.nodeAfter,y=v&&v.is("$text")&&v.data.startsWith(" ");let _=!1;if(m&&v&&m.is("$text")&&v.is("$text")){const b=m.data.slice(-1),E=b in BR,x=E&&v.data.startsWith(BR[b]);_=E&&x}!_&&!y&&e.insertContent(u.createText(" ",d),a.start.getShiftedBy(l.length))})}}class LAe extends Be{static get pluginName(){return"MentionEditing"}init(){const n=this.editor,e=n.model,i=e.document;e.schema.extend("$text",{allowAttributes:"mention"}),n.conversion.for("upcast").elementToAttribute({view:{name:"span",key:"data-mention",classes:"mention"},model:{key:"mention",value:s=>mz(s)}}),n.conversion.for("downcast").attributeToElement({model:"mention",view:FAe}),n.conversion.for("downcast").add(BAe),i.registerPostFixer(s=>DAe(s,i,e.schema)),i.registerPostFixer(s=>$Ae(s,i)),i.registerPostFixer(s=>NAe(s,i)),n.commands.add("mention",new OAe(n))}}function fz(t,n){return Object.assign({uid:to()},t,n||{})}function mz(t,n){const e=t.getAttribute("data-mention"),i=t.getChild(0);if(!i)return;const s={id:e,_text:i.data};return fz(s,n)}function BAe(t){t.on("attribute:mention",(n,e,i)=>{const s=e.attributeNewValue;if(!e.item.is("$textProxy")||!s)return;const r=e.range.start;(r.textNode||r.nodeAfter).data!=s._text&&i.consumable.consume(e.item,n.name)},{priority:"highest"})}function FAe(t,{writer:n}){if(!t)return;const e={class:"mention","data-mention":t.id},i={id:t.uid,priority:20};return n.createAttributeElement("span",e,i)}function NAe(t,n){const e=n.selection,i=e.focus;return e.isCollapsed&&e.hasAttribute("mention")&&VAe(i)?(t.removeSelectionAttribute("mention"),!0):!1}function VAe(t){const n=t.isAtStart;return t.nodeBefore&&t.nodeBefore.is("$text")||n}function DAe(t,n,e){const i=n.differ.getChanges();let s=!1;for(const r of i){if(r.type=="attribute")continue;const o=r.position;if(r.name=="$text"){const a=o.textNode&&o.textNode.nextSibling;s=kd(o.textNode,t)||s,s=kd(a,t)||s,s=kd(o.nodeBefore,t)||s,s=kd(o.nodeAfter,t)||s}if(r.name!="$text"&&r.type=="insert"){const a=o.nodeAfter;for(const l of t.createRangeIn(a).getItems())s=kd(l,t)||s}if(r.type=="insert"&&e.isInline(r.name)){const a=o.nodeAfter&&o.nodeAfter.nextSibling;s=kd(o.nodeBefore,t)||s,s=kd(a,t)||s}}return s}function $Ae(t,n){const e=n.differ.getChanges();let i=!1;for(const s of e)if(s.type==="attribute"&&s.attributeKey!="mention"){const r=s.range.start.nodeBefore,o=s.range.end.nodeAfter;for(const a of[r,o])pz(a)&&a.getAttribute(s.attributeKey)!=s.attributeNewValue&&(t.setAttribute(s.attributeKey,s.attributeNewValue,a),i=!0)}return i}function pz(t){if(!t||!(t.is("$text")||t.is("$textProxy"))||!t.hasAttribute("mention"))return!1;const n=t.data,i=t.getAttribute("mention")._text;return n!=i}function kd(t,n){return pz(t)?(n.removeAttribute("mention",t),!0):!1}class zAe extends ey{constructor(e){super(e);w(this,"selected");w(this,"position");this.extendTemplate({attributes:{class:["ck-mentions"],tabindex:"-1"}})}selectFirst(){this.select(0)}selectNext(){const e=this.selected,i=this.items.getIndex(e);this.select(i+1)}selectPrevious(){const e=this.selected,i=this.items.getIndex(e);this.select(i-1)}select(e){let i=0;e>0&&e<this.items.length?i=e:e<0&&(i=this.items.length-1);const s=this.items.get(i);this.selected!==s&&(this.selected&&this.selected.removeHighlight(),s.highlight(),this.selected=s,this._isItemVisibleInScrolledArea(s)||(this.element.scrollTop=s.element.offsetTop))}executeSelected(){this.selected.fire("execute")}_isItemVisibleInScrolledArea(e){return new mn(this.element).contains(new mn(e.element))}}class HAe extends Rt{constructor(e,i){super(e);w(this,"domElement");this.template=void 0,this.domElement=i,this.domElement.classList.add("ck-button"),this.set("isOn",!1),this.on("change:isOn",(s,r,o)=>{o?(this.domElement.classList.add("ck-on"),this.domElement.classList.remove("ck-off")):(this.domElement.classList.add("ck-off"),this.domElement.classList.remove("ck-on"))}),this.listenTo(this.domElement,"click",()=>{this.fire("execute")})}render(){super.render(),this.element=this.domElement}focus(){this.domElement.focus()}}class UAe extends wc{constructor(){super(...arguments);w(this,"item");w(this,"marker")}highlight(){const e=this.children.first;e.isOn=!0}removeHighlight(){const e=this.children.first;e.isOn=!1}}const Bv=3,WAe=[Cn.arrowup,Cn.arrowdown,Cn.esc],jAe=[Cn.enter,Cn.tab];class qAe extends Be{constructor(e){super(e);w(this,"_mentionsView");w(this,"_mentionsConfigurations");w(this,"_balloon");w(this,"_items",new _s);w(this,"_lastRequested");w(this,"_requestFeedDebounced");this._mentionsView=this._createMentionView(),this._mentionsConfigurations=new Map,this._requestFeedDebounced=Ss(this._requestFeed,100),e.config.define("mention",{feeds:[]})}static get pluginName(){return"MentionUI"}static get requires(){return[Mo]}init(){const e=this.editor,i=e.config.get("mention.commitKeys")||jAe,s=WAe.concat(i);this._balloon=e.plugins.get(Mo),e.editing.view.document.on("keydown",(a,l)=>{o(l.keyCode)&&this._isUIVisible&&(l.preventDefault(),a.stop(),l.keyCode==Cn.arrowdown&&this._mentionsView.selectNext(),l.keyCode==Cn.arrowup&&this._mentionsView.selectPrevious(),i.includes(l.keyCode)&&this._mentionsView.executeSelected(),l.keyCode==Cn.esc&&this._hideUIAndRemoveMarker())},{priority:"highest"}),Xu({emitter:this._mentionsView,activator:()=>this._isUIVisible,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideUIAndRemoveMarker()});const r=e.config.get("mention.feeds");for(const a of r){const{feed:l,marker:c,dropdownLimit:u}=a;if(!QAe(c))throw new fe("mentionconfig-incorrect-marker",null,{marker:c});const d=typeof l=="function"?l.bind(this.editor):ZAe(l),f=a.itemRenderer,p={marker:c,feedCallback:d,itemRenderer:f,dropdownLimit:u};this._mentionsConfigurations.set(c,p)}this._setupTextWatcher(r),this.listenTo(e,"change:isReadOnly",()=>{this._hideUIAndRemoveMarker()}),this.on("requestFeed:response",(a,l)=>this._handleFeedResponse(l)),this.on("requestFeed:error",()=>this._hideUIAndRemoveMarker());function o(a){return s.includes(a)}}destroy(){super.destroy(),this._mentionsView.destroy()}get _isUIVisible(){return this._balloon.visibleView===this._mentionsView}_createMentionView(){const e=this.editor.locale,i=new zAe(e);return i.items.bindTo(this._items).using(s=>{const{item:r,marker:o}=s,{dropdownLimit:a}=this._mentionsConfigurations.get(o),l=a||this.editor.config.get("mention.dropdownLimit")||10;if(i.items.length>=l)return null;const c=new UAe(e),u=this._renderItem(r,o);return u.delegate("execute").to(c),c.children.add(u),c.item=r,c.marker=o,c.on("execute",()=>{i.fire("execute",{item:r,marker:o})}),c}),i.on("execute",(s,r)=>{const o=this.editor,a=o.model,l=r.item,c=r.marker,u=o.model.markers.get("mention"),d=a.createPositionAt(a.document.selection.focus),f=a.createPositionAt(u.getStart()),p=a.createRange(f,d);this._hideUIAndRemoveMarker(),o.execute("mention",{mention:l,text:l.text,marker:c,range:p}),o.editing.view.focus()}),i}_getItemRenderer(e){const{itemRenderer:i}=this._mentionsConfigurations.get(e);return i}_requestFeed(e,i){this._lastRequested=i;const{feedCallback:s}=this._mentionsConfigurations.get(e),r=s(i);if(!(r instanceof Promise)){this.fire("requestFeed:response",{feed:r,marker:e,feedText:i});return}r.then(a=>{this._lastRequested==i?this.fire("requestFeed:response",{feed:a,marker:e,feedText:i}):this.fire("requestFeed:discarded",{feed:a,marker:e,feedText:i})}).catch(a=>{this.fire("requestFeed:error",{error:a}),qn("mention-feed-callback-error",{marker:e})})}_setupTextWatcher(e){const i=this.editor,s=e.map(a=>({...a,pattern:vz(a.marker,a.minimumCharacters||0)})),r=new tS(i.model,GAe(s));r.on("matched",(a,l)=>{const c=gz(s,l.text),d=i.model.document.selection.focus,f=i.model.createPositionAt(d.parent,c.position);if(XAe(d)||JAe(f)){this._hideUIAndRemoveMarker();return}const p=YAe(c,l.text),m=c.marker.length+p.length,v=d.getShiftedBy(-m),y=d.getShiftedBy(-p.length),_=i.model.createRange(v,y);if(n3(i)){const b=i.model.markers.get("mention");i.model.change(E=>{E.updateMarker(b,{range:_})})}else i.model.change(b=>{b.addMarker("mention",{range:_,usingOperation:!1,affectsData:!1})});this._requestFeedDebounced(c.marker,p)}),r.on("unmatched",()=>{this._hideUIAndRemoveMarker()});const o=i.commands.get("mention");return r.bind("isEnabled").to(o),r}_handleFeedResponse(e){const{feed:i,marker:s}=e;if(!n3(this.editor))return;this._items.clear();for(const o of i){const a=typeof o!="object"?{id:o,text:o}:o;this._items.add({item:a,marker:s})}const r=this.editor.model.markers.get("mention");this._items.length?this._showOrUpdateUI(r):this._hideUIAndRemoveMarker()}_showOrUpdateUI(e){this._isUIVisible?this._balloon.updatePosition(this._getBalloonPanelPositionData(e,this._mentionsView.position)):this._balloon.add({view:this._mentionsView,position:this._getBalloonPanelPositionData(e,this._mentionsView.position),singleViewMode:!0}),this._mentionsView.position=this._balloon.view.position,this._mentionsView.selectFirst()}_hideUIAndRemoveMarker(){this._balloon.hasView(this._mentionsView)&&this._balloon.remove(this._mentionsView),n3(this.editor)&&this.editor.model.change(e=>e.removeMarker("mention")),this._mentionsView.position=void 0}_renderItem(e,i){const s=this.editor;let r,o=e.id;const a=this._getItemRenderer(i);if(a){const l=a(e);typeof l!="string"?r=new HAe(s.locale,l):o=l}if(!r){const l=new Yt(s.locale);l.label=o,l.withText=!0,r=l}return r}_getBalloonPanelPositionData(e,i){const s=this.editor,r=s.editing,o=r.view.domConverter,a=r.mapper,l=s.locale.uiLanguageDirection;return{target:()=>{let c=e.getRange();c.start.root.rootName=="$graveyard"&&(c=s.model.document.selection.getFirstRange());const u=a.toViewRange(c);return mn.getDomRangeRects(o.viewRangeToDom(u)).pop()},limiter:()=>{const c=this.editor.editing.view,d=c.document.selection.editableElement;return d?c.domConverter.mapViewToDom(d.root):null},positions:KAe(i,l)}}}function KAe(t,n){const e={caret_se:i=>({top:i.bottom+Bv,left:i.right,name:"caret_se",config:{withArrow:!1}}),caret_ne:(i,s)=>({top:i.top-s.height-Bv,left:i.right,name:"caret_ne",config:{withArrow:!1}}),caret_sw:(i,s)=>({top:i.bottom+Bv,left:i.right-s.width,name:"caret_sw",config:{withArrow:!1}}),caret_nw:(i,s)=>({top:i.top-s.height-Bv,left:i.right-s.width,name:"caret_nw",config:{withArrow:!1}})};return Object.prototype.hasOwnProperty.call(e,t)?[e[t]]:n!=="rtl"?[e.caret_se,e.caret_sw,e.caret_ne,e.caret_nw]:[e.caret_sw,e.caret_se,e.caret_nw,e.caret_ne]}function gz(t,n){let e;for(const i of t){const s=n.lastIndexOf(i.marker);s>0&&!n.substring(s-1).match(i.pattern)||(!e||s>=e.position)&&(e={marker:i.marker,position:s,minimumCharacters:i.minimumCharacters,pattern:i.pattern})}return e}function vz(t,n){const e=n==0?"*":`{${n},}`,i=sn.features.isRegExpUnicodePropertySupported?`\\p{Ps}\\p{Pi}"'`:`\\(\\[{"'`,s=".";t=t.replace(/[.*+?^${}()\-|[\]\\]/g,"\\$&");const r=`(?:^|[ ${i}])([${t}])(${s}${e})$`;return new RegExp(r,"u")}function GAe(t){return e=>{const i=gz(t,e);if(!i)return!1;let s=0;i.position!==0&&(s=i.position-1);const r=e.substring(s);return i.pattern.test(r)}}function YAe(t,n){let e=0;t.position!==0&&(e=t.position-1);const i=vz(t.marker,0);return n.substring(e).match(i)[2]}function ZAe(t){return n=>t.filter(i=>(typeof i=="string"?i:String(i.id)).toLowerCase().includes(n.toLowerCase()))}function XAe(t){const n=t.textNode&&t.textNode.hasAttribute("mention"),e=t.nodeBefore;return n||e&&e.is("$text")&&e.hasAttribute("mention")}function JAe(t){const n=t.nodeAfter;return n&&n.is("$text")&&n.hasAttribute("mention")}function QAe(t){return t&&t.length==1}function n3(t){return t.model.markers.has("mention")}class e6e extends Be{toMentionAttribute(n,e){return mz(n,e)}static get pluginName(){return"Mention"}static get requires(){return[LAe,qAe]}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class t6e extends en{refresh(){const n=this.editor.model,e=n.schema,i=n.document.selection;this.isEnabled=n6e(i,e,n)}execute(){const n=this.editor.model;n.change(e=>{const i=e.createElement("pageBreak");n.insertObject(i,null,null,{setSelection:"after"})})}}function n6e(t,n,e){const i=i6e(t,e);return n.checkChild(i,"pageBreak")}function i6e(t,n){const i=sS(t,n).start.parent;return i.isEmpty&&!i.is("element","$root")?i.parent:i}class s6e extends Be{static get pluginName(){return"PageBreakEditing"}init(){const n=this.editor,e=n.model.schema,i=n.t,s=n.conversion;e.register("pageBreak",{inheritAllFrom:"$blockObject"}),s.for("dataDowncast").elementToStructure({model:"pageBreak",view:(r,{writer:o})=>o.createContainerElement("div",{class:"page-break",style:"page-break-after: always"},o.createContainerElement("span",{style:"display: none"}))}),s.for("editingDowncast").elementToStructure({model:"pageBreak",view:(r,{writer:o})=>{const a=i("Page break"),l=o.createContainerElement("div"),c=o.createRawElement("span",{class:"page-break__label"},function(u){u.innerText=i("Page break")});return o.addClass("page-break",l),o.insert(o.createPositionAt(l,0),c),r6e(l,o,a)}}),s.for("upcast").elementToElement({view:r=>{const o=r.getStyle("page-break-before")=="always",a=r.getStyle("page-break-after")=="always";if(!o&&!a)return null;if(r.childCount==1){const l=r.getChild(0);if(!l.is("element","span")||l.getStyle("display")!="none")return null}else if(r.childCount>1)return null;return{name:!0}},model:"pageBreak",converterPriority:"high"}),n.commands.add("pageBreak",new t6e(n))}}function r6e(t,n,e){return n.setCustomProperty("pageBreak",!0,t),sy(t,n,{label:e})}var o6e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.598.687h1.5v5h-1.5zm14.5 0h1.5v5h-1.5z"/><path d="M19.598 4.187v1.5h-16v-1.5zm-16 14.569h1.5v-5h-1.5zm14.5 0h1.5v-5h-1.5z"/><path d="M19.598 15.256v-1.5h-16v1.5zM5.081 9h6v2h-6zm8 0h6v2h-6zm-9.483 1L0 12.5v-5z"/></svg>';class a6e extends Be{static get pluginName(){return"PageBreakUI"}init(){const n=this.editor;n.ui.componentFactory.add("pageBreak",()=>{const e=this._createButton(Yt);return e.set({tooltip:!0}),e}),n.ui.componentFactory.add("menuBar:pageBreak",()=>this._createButton(Xi))}_createButton(n){const e=this.editor,i=e.locale,s=e.commands.get("pageBreak"),r=new n(e.locale),o=i.t;return r.set({label:o("Page break"),icon:o6e}),r.bind("isEnabled").to(s,"isEnabled"),this.listenTo(r,"execute",()=>{e.execute("pageBreak"),e.editing.view.focus()}),r}}class l6e extends Be{static get requires(){return[s6e,a6e,Fm]}static get pluginName(){return"PageBreak"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 *//**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function c6e(t){const n=parseFloat(t);return t.endsWith("pt")?Sf(n*96/72):t.endsWith("pc")?Sf(n*12*96/72):t.endsWith("in")?Sf(n*96):t.endsWith("cm")?Sf(n*96/2.54):t.endsWith("mm")?Sf(n/10*96/2.54):t}function FR(t){return t!==void 0&&t.endsWith("px")}function Sf(t){return t.toFixed(2).replace(/\.?0+$/,"")+"px"}function u6e(t,n,e){if(!t.childCount)return;const i=new Zu(t.document),s=h6e(t,i);if(!s.length)return;const r={},o=[];for(const a of s)if(a.indent!==void 0){f6e(a)||(o.length=0);const l=`${a.id}:${a.indent}`,c=Math.min(a.indent-1,o.length);if(c<o.length&&o[c].id!==a.id&&(o.length=c),c<o.length-1)o.length=c+1;else{const d=m6e(a,n);if(c>o.length-1||o[c].listElement.name!=d.type){c==0&&d.type=="ol"&&a.id!==void 0&&r[l]&&(d.startIndex=r[l]);const f=b6e(d,i,e);if(FR(a.marginLeft)&&(c==0||FR(o[c-1].marginLeft))){let p=a.marginLeft;c>0&&(p=Sf(parseFloat(p)-parseFloat(o[c-1].marginLeft))),i.setStyle("padding-left",p,f)}if(o.length==0){const p=a.element.parent,m=p.getChildIndex(a.element)+1;i.insertChild(m,f,p)}else{const p=o[c-1].listItemElements;i.appendChild(f,p[p.length-1])}o[c]={...a,listElement:f,listItemElements:[]},c==0&&a.id!==void 0&&(r[l]=d.startIndex||1)}}const u=a.element.name=="li"?a.element:i.createElement("li");i.appendChild(u,o[c].listElement),o[c].listItemElements.push(u),c==0&&a.id!==void 0&&r[l]++,a.element!=u&&i.appendChild(a.element,u),w6e(a.element,i),i.removeStyle("text-indent",a.element),i.removeStyle("margin-left",a.element)}else{const l=o.find(c=>c.marginLeft==a.marginLeft);if(l){const c=l.listItemElements;i.appendChild(a.element,c[c.length-1]),i.removeStyle("margin-left",a.element)}else o.length=0}}function d6e(t,n){for(const e of n.createRangeIn(t)){const i=e.item;if(i.is("element","li")){const s=i.getChild(0);s&&s.is("element","p")&&n.unwrapElement(s)}}}function h6e(t,n){const e=n.createRangeIn(t),i=[],s=new Set;for(const r of e.getItems()){if(!r.is("element")||!r.name.match(/^(p|h\d+|li|div)$/))continue;let o=y6e(r);if(o!==void 0&&parseFloat(o)==0&&!Array.from(r.getClassNames()).find(a=>a.startsWith("MsoList"))&&(o=void 0),r.hasStyle("mso-list")||o!==void 0&&s.has(o)){const a=_6e(r);i.push({element:r,id:a.id,order:a.order,indent:a.indent,marginLeft:o}),o!==void 0&&s.add(o)}else s.clear()}return i}function f6e(t){const n=t.element.previousSibling;return NR(n||t.element.parent)}function NR(t){return t.is("element","ol")||t.is("element","ul")}function m6e(t,n){const e=new RegExp(`@list l${t.id}:level${t.indent}\\s*({[^}]*)`,"gi"),i=/mso-level-number-format:([^;]{0,100});/gi,s=/mso-level-start-at:\s{0,100}([0-9]{0,10})\s{0,100};/gi,r=new RegExp(`@list\\s+l${t.id}:level\\d\\s*{[^{]*mso-level-text:"%\\d\\\\.`,"gi"),o=new RegExp(`@list l${t.id}:level\\d\\s*{[^{]*mso-level-number-format:`,"gi"),a=r.exec(n),l=o.exec(n),c=a&&!l,u=e.exec(n);let d="decimal",f="ol",p=null;if(u&&u[1]){const m=i.exec(u[1]);if(m&&m[1]&&(d=m[1].trim(),f=d!=="bullet"&&d!=="image"?"ol":"ul"),d==="bullet"){const v=p6e(t.element);v&&(d=v)}else{const v=s.exec(u[1]);v&&v[1]&&(p=parseInt(v[1]))}c&&(f="ol")}return{type:f,startIndex:p,style:v6e(d),isLegalStyleList:c}}function p6e(t){if(t.name=="li"&&t.parent.name=="ul"&&t.parent.hasAttribute("type"))return t.parent.getAttribute("type");const n=g6e(t);if(!n)return null;const e=n._data;return e==="o"?"circle":e==="·"?"disc":e==="§"?"square":null}function g6e(t){if(t.getChild(0).is("$text"))return null;for(const n of t.getChildren()){if(!n.is("element","span"))continue;const e=n.getChild(0);if(e)return e.is("$text")?e:e.getChild(0)}/* istanbul ignore next -- @preserve */return null}function v6e(t){if(t.startsWith("arabic-leading-zero"))return"decimal-leading-zero";switch(t){case"alpha-upper":return"upper-alpha";case"alpha-lower":return"lower-alpha";case"roman-upper":return"upper-roman";case"roman-lower":return"lower-roman";case"circle":case"disc":case"square":return t;default:return null}}function b6e(t,n,e){const i=n.createElement(t.type);return t.style&&n.setStyle("list-style-type",t.style,i),t.startIndex&&t.startIndex>1&&n.setAttribute("start",t.startIndex,i),t.isLegalStyleList&&e&&n.addClass("legal-list",i),i}function _6e(t){const n=t.getStyle("mso-list");if(n===void 0)return{};const e=n.match(/(^|\s{1,100})l(\d+)/i),i=n.match(/\s{0,100}lfo(\d+)/i),s=n.match(/\s{0,100}level(\d+)/i);return e&&i&&s?{id:e[2],order:i[1],indent:parseInt(s[1])}:{indent:1}}function w6e(t,n){const e=new Io({name:"span",styles:{"mso-list":"Ignore"}}),i=n.createRangeIn(t);for(const s of i)s.type==="elementStart"&&e.match(s.item)&&n.remove(s.item)}function y6e(t){const n=t.getStyle("margin-left");return n===void 0||n.endsWith("px")?n:c6e(n)}function C6e(t,n){if(!t.childCount)return;const e=new Zu(t.document),i=E6e(t,e);S6e(i,t,e),x6e(i,t,e),T6e(t,e);const s=A6e(t,e);s.length&&R6e(s,I6e(n),e)}function k6e(t){return btoa(t.match(/\w{2}/g).map(n=>String.fromCharCode(parseInt(n,16))).join(""))}function E6e(t,n){const e=n.createRangeIn(t),i=new Io({name:/v:(.+)/}),s=[];for(const r of e){if(r.type!="elementStart")continue;const o=r.item,a=o.previousSibling,l=a&&a.is("element")?a.name:null,c=["Chart"],u=i.match(o),d=o.getAttribute("o:gfxdata"),f=l==="v:shapetype",p=d&&c.some(m=>o.getAttribute("id").includes(m));u&&d&&!f&&!p&&s.push(r.item.getAttribute("id"))}return s}function S6e(t,n,e){const i=e.createRangeIn(n),s=new Io({name:"img"}),r=[];for(const o of i)if(o.item.is("element")&&s.match(o.item)){const a=o.item,l=a.getAttribute("v:shapes")?a.getAttribute("v:shapes").split(" "):[];l.length&&l.every(c=>t.indexOf(c)>-1)?r.push(a):a.getAttribute("src")||r.push(a)}for(const o of r)e.remove(o)}function T6e(t,n){const e=n.createRangeIn(t),i=new Io({name:/v:(.+)/}),s=[];for(const r of e)r.type=="elementStart"&&i.match(r.item)&&s.push(r.item);for(const r of s)n.remove(r)}function x6e(t,n,e){const i=e.createRangeIn(n),s=[];for(const a of i)if(a.type=="elementStart"&&a.item.is("element","v:shape")){const l=a.item.getAttribute("id");if(t.includes(l))continue;r(a.item.parent.getChildren(),l)||s.push(a.item)}for(const a of s){const l={src:o(a)};a.hasAttribute("alt")&&(l.alt=a.getAttribute("alt"));const c=e.createElement("img",l);e.insertChild(a.index+1,c,a.parent)}function r(a,l){for(const c of a){/* istanbul ignore else -- @preserve */if(c.is("element")&&(c.name=="img"&&c.getAttribute("v:shapes")==l||r(c.getChildren(),l)))return!0}return!1}function o(a){for(const l of a.getChildren()){/* istanbul ignore else -- @preserve */if(l.is("element")&&l.getAttribute("src"))return l.getAttribute("src")}}}function A6e(t,n){const e=n.createRangeIn(t),i=new Io({name:"img"}),s=[];for(const r of e)r.item.is("element")&&i.match(r.item)&&r.item.getAttribute("src").startsWith("file://")&&s.push(r.item);return s}function I6e(t){if(!t)return[];const n=/{\\pict[\s\S]+?\\bliptag-?\d+(\\blipupi-?\d+)?({\\\*\\blipuid\s?[\da-fA-F]+)?[\s}]*?/,e=new RegExp("(?:("+n.source+"))([\\da-fA-F\\s]+)\\}","g"),i=t.match(e),s=[];if(i)for(const r of i){let o=!1;r.includes("\\pngblip")?o="image/png":r.includes("\\jpegblip")&&(o="image/jpeg"),o&&s.push({hex:r.replace(n,"").replace(/[^\da-fA-F]/g,""),type:o})}return s}function R6e(t,n,e){if(t.length===n.length)for(let i=0;i<t.length;i++){const s=`data:${n[i].type};base64,${k6e(n[i].hex)}`;e.setAttribute("src",s,t[i])}}function M6e(t){const n=[],e=new Zu(t.document);for(const{item:i}of e.createRangeIn(t))if(i.is("element")){for(const s of i.getClassNames())/\bmso/gi.exec(s)&&e.removeClass(s,i);for(const s of i.getStyleNames())/\bmso/gi.exec(s)&&e.removeStyle(s,i);(i.is("element","w:sdt")||i.is("element","w:sdtpr")&&i.isEmpty||i.is("element","o:p")&&i.isEmpty)&&n.push(i)}for(const i of n){const s=i.parent,r=s.getChildIndex(i);e.insertChild(r,i.getChildren(),s),e.remove(i)}}const P6e=/<meta\s*name="?generator"?\s*content="?microsoft\s*word\s*\d+"?\/?>/i,O6e=/xmlns:o="urn:schemas-microsoft-com/i;class L6e{constructor(n,e=!1){w(this,"document");w(this,"hasMultiLevelListPlugin");this.document=n,this.hasMultiLevelListPlugin=e}isActive(n){return P6e.test(n)||O6e.test(n)}execute(n){const{body:e,stylesString:i}=n._parsedData;u6e(e,i,this.hasMultiLevelListPlugin),C6e(e,n.dataTransfer.getData("text/rtf")),M6e(e),n.content=e}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function B6e(t,n){for(const e of t.getChildren())if(e.is("element","b")&&e.getStyle("font-weight")==="normal"){const i=t.getChildIndex(e);n.remove(e),n.insertChild(i,e.getChildren(),t)}}function F6e(t,n){const e=new jw(n.document.stylesProcessor),i=new Kw(e,{renderingMode:"data"}),s=i.blockElements,r=i.inlineObjectElements,o=[];for(const a of n.createRangeIn(t)){const l=a.item;if(l.is("element","br")){const c=VR(l,"forward",n,{blockElements:s,inlineObjectElements:r}),u=VR(l,"backward",n,{blockElements:s,inlineObjectElements:r}),d=DR(c,s);(DR(u,s)||d)&&o.push(l)}}for(const a of o)a.hasClass("Apple-interchange-newline")?n.remove(a):n.replace(a,n.createElement("p"))}function VR(t,n,e,{blockElements:i,inlineObjectElements:s}){let r=e.createPositionAt(t,n=="forward"?"after":"before");return r=r.getLastMatchingPosition(({item:o})=>o.is("element")&&!i.includes(o.name)&&!s.includes(o.name),{direction:n}),n=="forward"?r.nodeAfter:r.nodeBefore}function DR(t,n){return!!t&&t.is("element")&&n.includes(t.name)}const N6e=/id=("|')docs-internal-guid-[-0-9a-f]+("|')/i;class V6e{constructor(n){w(this,"document");this.document=n}isActive(n){return N6e.test(n)}execute(n){const e=new Zu(this.document),{body:i}=n._parsedData;B6e(i,e),d6e(i,e),F6e(i,e),n.content=i}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function D6e(t,n){for(const e of t.getChildren())e.is("element","table")&&e.hasAttribute("xmlns")&&n.removeAttribute("xmlns",e)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function $6e(t,n){for(const e of t.getChildren())if(e.is("element","google-sheets-html-origin")){const i=t.getChildIndex(e);n.remove(e),n.insertChild(i,e.getChildren(),t)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function z6e(t,n){for(const e of t.getChildren())e.is("element","table")&&e.getStyle("width")==="0px"&&n.removeStyle("width",e)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function H6e(t,n){for(const e of Array.from(t.getChildren()))e.is("element","style")&&n.remove(e)}const U6e=/<google-sheets-html-origin/i;class W6e{constructor(n){w(this,"document");this.document=n}isActive(n){return U6e.test(n)}execute(n){const e=new Zu(this.document),{body:i}=n._parsedData;$6e(i,e),D6e(i,e),z6e(i,e),H6e(i,e),n.content=i}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function j6e(t){return $R($R(t)).replace(/(<span\s+style=['"]mso-spacerun:yes['"]>[^\S\r\n]*?)[\r\n]+([^\S\r\n]*<\/span>)/g,"$1$2").replace(/<span\s+style=['"]mso-spacerun:yes['"]><\/span>/g,"").replace(/(<span\s+style=['"]letter-spacing:[^'"]+?['"]>)[\r\n]+(<\/span>)/g,"$1 $2").replace(/ <\//g," </").replace(/ <o:p><\/o:p>/g," <o:p></o:p>").replace(/<o:p>(&nbsp;|\u00A0)<\/o:p>/g,"").replace(/>([^\S\r\n]*[\r\n]\s*)</g,"><")}function q6e(t){t.querySelectorAll("span[style*=spacerun]").forEach(n=>{const e=n,i=e.innerText.length||0;e.innerText=Array(i+1).join("  ").substr(0,i)})}function $R(t){return t.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,(n,e)=>e.length===1?" ":Array(e.length+1).join("  ").substr(0,e.length))}function K6e(t,n){const e=new DOMParser;t=t.replace(/<!--\[if gte vml 1]>/g,""),t=t.replace(/<o:SmartTagType(?:\s+[^\s>=]+(?:="[^"]*")?)*\s*\/?>/gi,"");const i=j6e(Z6e(t)),s=e.parseFromString(i,"text/html");q6e(s);const r=s.body.innerHTML,o=G6e(s,n),a=Y6e(s);return{body:o,bodyString:r,styles:a.styles,stylesString:a.stylesString}}function G6e(t,n){const e=new jw(n),i=new Kw(e,{renderingMode:"data"}),s=t.createDocumentFragment(),r=t.body.childNodes;for(;r.length>0;)s.appendChild(r[0]);return i.domToView(s,{skipComments:!0})}function Y6e(t){const n=[],e=[],i=Array.from(t.getElementsByTagName("style"));for(const s of i)s.sheet&&s.sheet.cssRules&&s.sheet.cssRules.length&&(n.push(s.sheet),e.push(s.innerHTML));return{styles:n,stylesString:e.join(" ")}}function Z6e(t){const n="</body>",e="</html>",i=t.indexOf(n);if(i<0)return t;const s=t.indexOf(e,i+n.length);return t.substring(0,i+n.length)+(s>=0?t.substring(s):"")}class X6e extends Be{static get pluginName(){return"PasteFromOffice"}static get requires(){return[da]}init(){const n=this.editor,e=n.plugins.get("ClipboardPipeline"),i=n.editing.view.document,s=[],r=this.editor.plugins.has("MultiLevelList");s.push(new L6e(i,r)),s.push(new V6e(i)),s.push(new W6e(i)),e.on("inputTransformation",(o,a)=>{if(a._isTransformedWithPasteFromOffice||n.model.document.selection.getFirstPosition().parent.is("element","codeBlock"))return;const c=a.dataTransfer.getData("text/html"),u=s.find(d=>d.isActive(c));u&&(a._parsedData||(a._parsedData=K6e(c,i.stylesProcessor)),u.execute(a),a._isTransformedWithPasteFromOffice=!0)},{priority:"high"})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */var J6e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8.69 14.915c.053.052.173.083.36.093a.366.366 0 0 1 .345.485l-.003.01a.738.738 0 0 1-.697.497h-2.67a.374.374 0 0 1-.353-.496l.013-.038a.681.681 0 0 1 .644-.458c.197-.012.325-.043.386-.093a.28.28 0 0 0 .072-.11L9.592 4.5H6.269c-.359-.017-.609.013-.75.09-.142.078-.289.265-.442.563-.192.29-.516.464-.864.464H4.17a.43.43 0 0 1-.407-.569L4.46 3h13.08l-.62 2.043a.81.81 0 0 1-.775.574h-.114a.486.486 0 0 1-.486-.486c.001-.284-.054-.464-.167-.54-.112-.076-.367-.106-.766-.091h-3.28l-2.68 10.257c-.006.074.007.127.038.158zM3 17h8a.5.5 0 1 1 0 1H3a.5.5 0 1 1 0-1zm11.299 1.17a.75.75 0 1 1-1.06-1.06l1.414-1.415-1.415-1.414a.75.75 0 0 1 1.06-1.06l1.415 1.414 1.414-1.415a.75.75 0 1 1 1.06 1.06l-1.413 1.415 1.414 1.415a.75.75 0 0 1-1.06 1.06l-1.415-1.414-1.414 1.414z"/></svg>';const Fv="removeFormat";class Q6e extends Be{static get pluginName(){return"RemoveFormatUI"}init(){const n=this.editor;n.ui.componentFactory.add(Fv,()=>{const e=this._createButton(Yt);return e.set({tooltip:!0}),e}),n.ui.componentFactory.add(`menuBar:${Fv}`,()=>this._createButton(Xi))}_createButton(n){const e=this.editor,i=e.locale,s=e.commands.get(Fv),r=new n(e.locale),o=i.t;return r.set({label:o("Remove Format"),icon:J6e}),r.bind("isEnabled").to(s,"isEnabled"),this.listenTo(r,"execute",()=>{e.execute(Fv),e.editing.view.focus()}),r}}class e8e extends en{refresh(){const n=this.editor.model;this.isEnabled=!!bs(this._getFormattingItems(n.document.selection,n.schema))}execute(){const n=this.editor.model,e=n.schema;n.change(i=>{for(const s of this._getFormattingItems(n.document.selection,e))if(s.is("selection"))for(const r of this._getFormattingAttributes(s,e))i.removeSelectionAttribute(r);else{const r=i.createRangeOn(s);for(const o of this._getFormattingAttributes(s,e))i.removeAttribute(o,r)}})}*_getFormattingItems(n,e){const i=s=>!!bs(this._getFormattingAttributes(s,e));for(const s of n.getRanges())for(const r of s.getItems())!e.isBlock(r)&&i(r)&&(yield r);for(const s of n.getSelectedBlocks())i(s)&&(yield s);i(n)&&(yield n)}*_getFormattingAttributes(n,e){for(const[i]of n.getAttributes()){const s=e.getAttributeProperties(i);s&&s.isFormatting&&(yield i)}}}class t8e extends Be{static get pluginName(){return"RemoveFormatEditing"}init(){const n=this.editor;n.commands.add("removeFormat",new e8e(n))}}class n8e extends Be{static get requires(){return[t8e,Q6e]}static get pluginName(){return"RemoveFormat"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class i8e extends Rt{constructor(e){super(e);w(this,"tiles");w(this,"focusTracker");w(this,"keystrokes");this.tiles=this.createCollection(),this.setTemplate({tag:"div",children:[{tag:"div",attributes:{class:["ck","ck-character-grid__tiles"]},children:this.tiles}],attributes:{class:["ck","ck-character-grid"]}}),this.focusTracker=new Bi,this.keystrokes=new Zi,Xw({keystrokeHandler:this.keystrokes,focusTracker:this.focusTracker,gridItems:this.tiles,numberOfColumns:()=>$t.window.getComputedStyle(this.element.firstChild).getPropertyValue("grid-template-columns").split(" ").length,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection})}createTile(e,i){const s=new Yt(this.locale);return s.set({label:e,withText:!0,class:"ck-character-grid__tile"}),s.extendTemplate({attributes:{title:i},on:{mouseover:s.bindTemplate.to("mouseover"),focus:s.bindTemplate.to("focus")}}),s.on("mouseover",()=>{this.fire("tileHover",{name:i,character:e})}),s.on("focus",()=>{this.fire("tileFocus",{name:i,character:e})}),s.on("execute",()=>{this.fire("execute",{name:i,character:e})}),s}render(){super.render();for(const e of this.tiles)this.focusTracker.add(e.element);this.tiles.on("change",(e,{added:i,removed:s})=>{if(i.length>0)for(const r of i)this.focusTracker.add(r.element);if(s.length>0)for(const r of s)this.focusTracker.remove(r.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.keystrokes.destroy()}focus(){this.tiles.first.focus()}}class s8e extends Rt{constructor(n){super(n);const e=this.bindTemplate;this.set("character",null),this.set("name",null),this.bind("code").to(this,"character",r8e),this.setTemplate({tag:"div",children:[{tag:"span",attributes:{class:["ck-character-info__name"]},children:[{text:e.to("name",i=>i||"​")}]},{tag:"span",attributes:{class:["ck-character-info__code"]},children:[{text:e.to("code")}]}],attributes:{class:["ck","ck-character-info"]}})}}function r8e(t){return t===null?"":"U+"+("0000"+t.codePointAt(0).toString(16)).slice(-4)}class o8e extends Rt{constructor(e,i,s,r){super(e);w(this,"items");w(this,"focusTracker");w(this,"keystrokes");w(this,"_focusCycler");w(this,"categoriesView");w(this,"gridView");w(this,"infoView");this.categoriesView=i,this.gridView=s,this.infoView=r,this.items=this.createCollection(),this.focusTracker=new Bi,this.keystrokes=new Zi,this._focusCycler=new Js({focusables:this.items,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",children:[this.categoriesView,this.gridView,this.infoView],attributes:{tabindex:"-1"}}),this.items.add(this.categoriesView),this.items.add(this.gridView)}render(){super.render(),this.focusTracker.add(this.categoriesView.element),this.focusTracker.add(this.gridView.element),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}}var a8e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 2.5a7.47 7.47 0 0 1 4.231 1.31 7.268 7.268 0 0 1 2.703 3.454 7.128 7.128 0 0 1 .199 4.353c-.39 1.436-1.475 2.72-2.633 3.677h2.013c0-.226.092-.443.254-.603a.876.876 0 0 1 1.229 0c.163.16.254.377.254.603v.853c0 .209-.078.41-.22.567a.873.873 0 0 1-.547.28l-.101.006h-4.695a.517.517 0 0 1-.516-.518v-1.265c0-.21.128-.398.317-.489a5.601 5.601 0 0 0 2.492-2.371 5.459 5.459 0 0 0 .552-3.693 5.53 5.53 0 0 0-1.955-3.2A5.71 5.71 0 0 0 10 4.206 5.708 5.708 0 0 0 6.419 5.46 5.527 5.527 0 0 0 4.46 8.663a5.457 5.457 0 0 0 .554 3.695 5.6 5.6 0 0 0 2.497 2.37.55.55 0 0 1 .317.49v1.264c0 .286-.23.518-.516.518H2.618a.877.877 0 0 1-.614-.25.845.845 0 0 1-.254-.603v-.853c0-.226.091-.443.254-.603a.876.876 0 0 1 1.228 0c.163.16.255.377.255.603h1.925c-1.158-.958-2.155-2.241-2.545-3.678a7.128 7.128 0 0 1 .199-4.352 7.268 7.268 0 0 1 2.703-3.455A7.475 7.475 0 0 1 10 2.5z"/></svg>';class l8e extends Rt{constructor(e,i){super(e);w(this,"_groupNames");w(this,"_dropdownView");this.set("currentGroupName",Array.from(i.entries())[0][0]),this._groupNames=i,this._dropdownView=new ms(e,XE),this.setTemplate({tag:"div",attributes:{class:["ck","ck-character-categories"]},children:[this._dropdownView]})}render(){super.render(),this._setupDropdown()}focus(){this._dropdownView.focus()}_setupDropdown(){const e=new _s;for(const[r,o]of this._groupNames){const a={type:"button",model:new $u({name:r,label:o,role:"menuitemradio",withText:!0})};a.model.bind("isOn").to(this,"currentGroupName",l=>l===r),e.add(a)}const i=this.locale.t,s=i("Category");this._dropdownView.set({label:s,isEmpty:!1}),this._dropdownView.fieldView.panelPosition=this.locale.uiLanguageDirection==="rtl"?"se":"sw",this._dropdownView.fieldView.buttonView.set({withText:!0,tooltip:s,ariaLabel:s,ariaLabelledBy:void 0,isOn:!1}),this._dropdownView.fieldView.buttonView.bind("label").to(this,"currentGroupName",r=>this._groupNames.get(r)),this._dropdownView.fieldView.on("execute",({source:r})=>{this.currentGroupName=r.name}),Ju(this._dropdownView.fieldView,e,{ariaLabel:s,role:"menu"})}}const i3="All";class c8e extends Be{constructor(e){super(e);w(this,"_characters");w(this,"_groups");w(this,"_allSpecialCharactersGroupLabel");const i=e.t;this._characters=new Map,this._groups=new Map,this._allSpecialCharactersGroupLabel=i("All")}static get requires(){return[XD,hm]}static get pluginName(){return"SpecialCharacters"}init(){const e=this.editor;e.ui.componentFactory.add("specialCharacters",()=>{const i=this._createDialogButton(Yt);return i.set({tooltip:!0}),i}),e.ui.componentFactory.add("menuBar:specialCharacters",()=>this._createDialogButton(Xi))}addItems(e,i,s={label:e}){if(e===i3)throw new fe("special-character-invalid-group-name",null);const r=this._getGroup(e,s.label);for(const o of i)r.items.add(o.title),this._characters.set(o.title,o.character)}getGroups(){const e=Array.from(this._groups.keys()),i=this.editor.config.get("specialCharacters.order")||[],s=i.find(r=>!e.includes(r));if(s)throw new fe("special-character-invalid-order-group-name",null,{invalidGroup:s});return new Set([...i,...e])}getCharactersForGroup(e){if(e===i3)return new Set(this._characters.keys());const i=this._groups.get(e);if(i)return i.items}getCharacter(e){return this._characters.get(e)}_getGroup(e,i){return this._groups.has(e)||this._groups.set(e,{items:new Set,label:i}),this._groups.get(e)}_updateGrid(e,i){i.tiles.clear();const s=this.getCharactersForGroup(e);for(const r of s){const o=this.getCharacter(r);i.tiles.add(i.createTile(o,r))}}_createDropdownPanelContent(e){const i=Array.from(this.getGroups()).map(l=>[l,this._groups.get(l).label]),s=new Map([[i3,this._allSpecialCharactersGroupLabel],...i]),r=new l8e(e,s),o=new i8e(e),a=new s8e(e);return o.on("tileHover",(l,c)=>{a.set(c)}),o.on("tileFocus",(l,c)=>{a.set(c)}),r.on("change:currentGroupName",(l,c,u)=>{this._updateGrid(u,o)}),this._updateGrid(r.currentGroupName,o),{categoriesView:r,gridView:o,infoView:a}}_createDialogButton(e){const i=this.editor,s=i.locale,r=new e(i.locale),o=i.commands.get("insertText"),a=s.t,l=this.editor.plugins.get("Dialog");return r.set({label:a("Special characters"),icon:a8e,isToggleable:!0}),r.bind("isOn").to(l,"id",c=>c==="specialCharacters"),r.bind("isEnabled").to(o,"isEnabled"),r.on("execute",()=>{if(l.id==="specialCharacters"){l.hide();return}this._showDialog()}),r}_showDialog(){const e=this.editor,i=e.plugins.get("Dialog"),s=e.locale,r=s.t,{categoriesView:o,gridView:a,infoView:l}=this._createDropdownPanelContent(s),c=new o8e(s,o,a,l);a.on("execute",(u,d)=>{e.execute("insertText",{text:d.character})}),i.show({id:"specialCharacters",title:r("Special characters"),className:"ck-special-characters",content:c,position:ho.EDITOR_TOP_SIDE})}}class bz extends Be{static get pluginName(){return"SpecialCharactersArrows"}init(){const n=this.editor,e=n.t;n.plugins.get("SpecialCharacters").addItems("Arrows",[{title:e("leftwards simple arrow"),character:"←"},{title:e("rightwards simple arrow"),character:"→"},{title:e("upwards simple arrow"),character:"↑"},{title:e("downwards simple arrow"),character:"↓"},{title:e("leftwards double arrow"),character:"⇐"},{title:e("rightwards double arrow"),character:"⇒"},{title:e("upwards double arrow"),character:"⇑"},{title:e("downwards double arrow"),character:"⇓"},{title:e("leftwards dashed arrow"),character:"⇠"},{title:e("rightwards dashed arrow"),character:"⇢"},{title:e("upwards dashed arrow"),character:"⇡"},{title:e("downwards dashed arrow"),character:"⇣"},{title:e("leftwards arrow to bar"),character:"⇤"},{title:e("rightwards arrow to bar"),character:"⇥"},{title:e("upwards arrow to bar"),character:"⤒"},{title:e("downwards arrow to bar"),character:"⤓"},{title:e("up down arrow with base"),character:"↨"},{title:e("back with leftwards arrow above"),character:"🔙"},{title:e("end with leftwards arrow above"),character:"🔚"},{title:e("on with exclamation mark with left right arrow above"),character:"🔛"},{title:e("soon with rightwards arrow above"),character:"🔜"},{title:e("top with upwards arrow above"),character:"🔝"}],{label:e("Arrows")})}}class _z extends Be{static get pluginName(){return"SpecialCharactersText"}init(){const n=this.editor,e=n.t;n.plugins.get("SpecialCharacters").addItems("Text",[{character:"‹",title:e("Single left-pointing angle quotation mark")},{character:"›",title:e("Single right-pointing angle quotation mark")},{character:"«",title:e("Left-pointing double angle quotation mark")},{character:"»",title:e("Right-pointing double angle quotation mark")},{character:"‘",title:e("Left single quotation mark")},{character:"’",title:e("Right single quotation mark")},{character:"“",title:e("Left double quotation mark")},{character:"”",title:e("Right double quotation mark")},{character:"‚",title:e("Single low-9 quotation mark")},{character:"„",title:e("Double low-9 quotation mark")},{character:"¡",title:e("Inverted exclamation mark")},{character:"¿",title:e("Inverted question mark")},{character:"‥",title:e("Two dot leader")},{character:"…",title:e("Horizontal ellipsis")},{character:"‡",title:e("Double dagger")},{character:"‰",title:e("Per mille sign")},{character:"‱",title:e("Per ten thousand sign")},{character:"‼",title:e("Double exclamation mark")},{character:"⁈",title:e("Question exclamation mark")},{character:"⁉",title:e("Exclamation question mark")},{character:"⁇",title:e("Double question mark")},{character:"©",title:e("Copyright sign")},{character:"®",title:e("Registered sign")},{character:"™",title:e("Trade mark sign")},{character:"§",title:e("Section sign")},{character:"¶",title:e("Paragraph sign")},{character:"⁋",title:e("Reversed paragraph sign")}],{label:e("Text")})}}class wz extends Be{static get pluginName(){return"SpecialCharactersMathematical"}init(){const n=this.editor,e=n.t;n.plugins.get("SpecialCharacters").addItems("Mathematical",[{character:"<",title:e("Less-than sign")},{character:">",title:e("Greater-than sign")},{character:"≤",title:e("Less-than or equal to")},{character:"≥",title:e("Greater-than or equal to")},{character:"–",title:e("En dash")},{character:"—",title:e("Em dash")},{character:"¯",title:e("Macron")},{character:"‾",title:e("Overline")},{character:"°",title:e("Degree sign")},{character:"−",title:e("Minus sign")},{character:"±",title:e("Plus-minus sign")},{character:"÷",title:e("Division sign")},{character:"⁄",title:e("Fraction slash")},{character:"×",title:e("Multiplication sign")},{character:"ƒ",title:e("Latin small letter f with hook")},{character:"∫",title:e("Integral")},{character:"∑",title:e("N-ary summation")},{character:"∞",title:e("Infinity")},{character:"√",title:e("Square root")},{character:"∼",title:e("Tilde operator")},{character:"≅",title:e("Approximately equal to")},{character:"≈",title:e("Almost equal to")},{character:"≠",title:e("Not equal to")},{character:"≡",title:e("Identical to")},{character:"∈",title:e("Element of")},{character:"∉",title:e("Not an element of")},{character:"∋",title:e("Contains as member")},{character:"∏",title:e("N-ary product")},{character:"∧",title:e("Logical and")},{character:"∨",title:e("Logical or")},{character:"¬",title:e("Not sign")},{character:"∩",title:e("Intersection")},{character:"∪",title:e("Union")},{character:"∂",title:e("Partial differential")},{character:"∀",title:e("For all")},{character:"∃",title:e("There exists")},{character:"∅",title:e("Empty set")},{character:"∇",title:e("Nabla")},{character:"∗",title:e("Asterisk operator")},{character:"∝",title:e("Proportional to")},{character:"∠",title:e("Angle")},{character:"¼",title:e("Vulgar fraction one quarter")},{character:"½",title:e("Vulgar fraction one half")},{character:"¾",title:e("Vulgar fraction three quarters")}],{label:e("Mathematical")})}}class yz extends Be{static get pluginName(){return"SpecialCharactersLatin"}init(){const n=this.editor,e=n.t;n.plugins.get("SpecialCharacters").addItems("Latin",[{character:"Ā",title:e("Latin capital letter a with macron")},{character:"ā",title:e("Latin small letter a with macron")},{character:"Ă",title:e("Latin capital letter a with breve")},{character:"ă",title:e("Latin small letter a with breve")},{character:"Ą",title:e("Latin capital letter a with ogonek")},{character:"ą",title:e("Latin small letter a with ogonek")},{character:"Ć",title:e("Latin capital letter c with acute")},{character:"ć",title:e("Latin small letter c with acute")},{character:"Ĉ",title:e("Latin capital letter c with circumflex")},{character:"ĉ",title:e("Latin small letter c with circumflex")},{character:"Ċ",title:e("Latin capital letter c with dot above")},{character:"ċ",title:e("Latin small letter c with dot above")},{character:"Č",title:e("Latin capital letter c with caron")},{character:"č",title:e("Latin small letter c with caron")},{character:"Ď",title:e("Latin capital letter d with caron")},{character:"ď",title:e("Latin small letter d with caron")},{character:"Đ",title:e("Latin capital letter d with stroke")},{character:"đ",title:e("Latin small letter d with stroke")},{character:"Ē",title:e("Latin capital letter e with macron")},{character:"ē",title:e("Latin small letter e with macron")},{character:"Ĕ",title:e("Latin capital letter e with breve")},{character:"ĕ",title:e("Latin small letter e with breve")},{character:"Ė",title:e("Latin capital letter e with dot above")},{character:"ė",title:e("Latin small letter e with dot above")},{character:"Ę",title:e("Latin capital letter e with ogonek")},{character:"ę",title:e("Latin small letter e with ogonek")},{character:"Ě",title:e("Latin capital letter e with caron")},{character:"ě",title:e("Latin small letter e with caron")},{character:"Ĝ",title:e("Latin capital letter g with circumflex")},{character:"ĝ",title:e("Latin small letter g with circumflex")},{character:"Ğ",title:e("Latin capital letter g with breve")},{character:"ğ",title:e("Latin small letter g with breve")},{character:"Ġ",title:e("Latin capital letter g with dot above")},{character:"ġ",title:e("Latin small letter g with dot above")},{character:"Ģ",title:e("Latin capital letter g with cedilla")},{character:"ģ",title:e("Latin small letter g with cedilla")},{character:"Ĥ",title:e("Latin capital letter h with circumflex")},{character:"ĥ",title:e("Latin small letter h with circumflex")},{character:"Ħ",title:e("Latin capital letter h with stroke")},{character:"ħ",title:e("Latin small letter h with stroke")},{character:"Ĩ",title:e("Latin capital letter i with tilde")},{character:"ĩ",title:e("Latin small letter i with tilde")},{character:"Ī",title:e("Latin capital letter i with macron")},{character:"ī",title:e("Latin small letter i with macron")},{character:"Ĭ",title:e("Latin capital letter i with breve")},{character:"ĭ",title:e("Latin small letter i with breve")},{character:"Į",title:e("Latin capital letter i with ogonek")},{character:"į",title:e("Latin small letter i with ogonek")},{character:"İ",title:e("Latin capital letter i with dot above")},{character:"ı",title:e("Latin small letter dotless i")},{character:"Ĳ",title:e("Latin capital ligature ij")},{character:"ĳ",title:e("Latin small ligature ij")},{character:"Ĵ",title:e("Latin capital letter j with circumflex")},{character:"ĵ",title:e("Latin small letter j with circumflex")},{character:"Ķ",title:e("Latin capital letter k with cedilla")},{character:"ķ",title:e("Latin small letter k with cedilla")},{character:"ĸ",title:e("Latin small letter kra")},{character:"Ĺ",title:e("Latin capital letter l with acute")},{character:"ĺ",title:e("Latin small letter l with acute")},{character:"Ļ",title:e("Latin capital letter l with cedilla")},{character:"ļ",title:e("Latin small letter l with cedilla")},{character:"Ľ",title:e("Latin capital letter l with caron")},{character:"ľ",title:e("Latin small letter l with caron")},{character:"Ŀ",title:e("Latin capital letter l with middle dot")},{character:"ŀ",title:e("Latin small letter l with middle dot")},{character:"Ł",title:e("Latin capital letter l with stroke")},{character:"ł",title:e("Latin small letter l with stroke")},{character:"Ń",title:e("Latin capital letter n with acute")},{character:"ń",title:e("Latin small letter n with acute")},{character:"Ņ",title:e("Latin capital letter n with cedilla")},{character:"ņ",title:e("Latin small letter n with cedilla")},{character:"Ň",title:e("Latin capital letter n with caron")},{character:"ň",title:e("Latin small letter n with caron")},{character:"ŉ",title:e("Latin small letter n preceded by apostrophe")},{character:"Ŋ",title:e("Latin capital letter eng")},{character:"ŋ",title:e("Latin small letter eng")},{character:"Ō",title:e("Latin capital letter o with macron")},{character:"ō",title:e("Latin small letter o with macron")},{character:"Ŏ",title:e("Latin capital letter o with breve")},{character:"ŏ",title:e("Latin small letter o with breve")},{character:"Ő",title:e("Latin capital letter o with double acute")},{character:"ő",title:e("Latin small letter o with double acute")},{character:"Œ",title:e("Latin capital ligature oe")},{character:"œ",title:e("Latin small ligature oe")},{character:"Ŕ",title:e("Latin capital letter r with acute")},{character:"ŕ",title:e("Latin small letter r with acute")},{character:"Ŗ",title:e("Latin capital letter r with cedilla")},{character:"ŗ",title:e("Latin small letter r with cedilla")},{character:"Ř",title:e("Latin capital letter r with caron")},{character:"ř",title:e("Latin small letter r with caron")},{character:"Ś",title:e("Latin capital letter s with acute")},{character:"ś",title:e("Latin small letter s with acute")},{character:"Ŝ",title:e("Latin capital letter s with circumflex")},{character:"ŝ",title:e("Latin small letter s with circumflex")},{character:"Ş",title:e("Latin capital letter s with cedilla")},{character:"ş",title:e("Latin small letter s with cedilla")},{character:"Š",title:e("Latin capital letter s with caron")},{character:"š",title:e("Latin small letter s with caron")},{character:"Ţ",title:e("Latin capital letter t with cedilla")},{character:"ţ",title:e("Latin small letter t with cedilla")},{character:"Ť",title:e("Latin capital letter t with caron")},{character:"ť",title:e("Latin small letter t with caron")},{character:"Ŧ",title:e("Latin capital letter t with stroke")},{character:"ŧ",title:e("Latin small letter t with stroke")},{character:"Ũ",title:e("Latin capital letter u with tilde")},{character:"ũ",title:e("Latin small letter u with tilde")},{character:"Ū",title:e("Latin capital letter u with macron")},{character:"ū",title:e("Latin small letter u with macron")},{character:"Ŭ",title:e("Latin capital letter u with breve")},{character:"ŭ",title:e("Latin small letter u with breve")},{character:"Ů",title:e("Latin capital letter u with ring above")},{character:"ů",title:e("Latin small letter u with ring above")},{character:"Ű",title:e("Latin capital letter u with double acute")},{character:"ű",title:e("Latin small letter u with double acute")},{character:"Ų",title:e("Latin capital letter u with ogonek")},{character:"ų",title:e("Latin small letter u with ogonek")},{character:"Ŵ",title:e("Latin capital letter w with circumflex")},{character:"ŵ",title:e("Latin small letter w with circumflex")},{character:"Ŷ",title:e("Latin capital letter y with circumflex")},{character:"ŷ",title:e("Latin small letter y with circumflex")},{character:"Ÿ",title:e("Latin capital letter y with diaeresis")},{character:"Ź",title:e("Latin capital letter z with acute")},{character:"ź",title:e("Latin small letter z with acute")},{character:"Ż",title:e("Latin capital letter z with dot above")},{character:"ż",title:e("Latin small letter z with dot above")},{character:"Ž",title:e("Latin capital letter z with caron")},{character:"ž",title:e("Latin small letter z with caron")},{character:"ſ",title:e("Latin small letter long s")}],{label:e("Latin")})}}class Cz extends Be{static get pluginName(){return"SpecialCharactersCurrency"}init(){const n=this.editor,e=n.t;n.plugins.get("SpecialCharacters").addItems("Currency",[{character:"$",title:e("Dollar sign")},{character:"€",title:e("Euro sign")},{character:"¥",title:e("Yen sign")},{character:"£",title:e("Pound sign")},{character:"¢",title:e("Cent sign")},{character:"₠",title:e("Euro-currency sign")},{character:"₡",title:e("Colon sign")},{character:"₢",title:e("Cruzeiro sign")},{character:"₣",title:e("French franc sign")},{character:"₤",title:e("Lira sign")},{character:"¤",title:e("Currency sign")},{character:"₿",title:e("Bitcoin sign")},{character:"₥",title:e("Mill sign")},{character:"₦",title:e("Naira sign")},{character:"₧",title:e("Peseta sign")},{character:"₨",title:e("Rupee sign")},{character:"₩",title:e("Won sign")},{character:"₪",title:e("New sheqel sign")},{character:"₫",title:e("Dong sign")},{character:"₭",title:e("Kip sign")},{character:"₮",title:e("Tugrik sign")},{character:"₯",title:e("Drachma sign")},{character:"₰",title:e("German penny sign")},{character:"₱",title:e("Peso sign")},{character:"₲",title:e("Guarani sign")},{character:"₳",title:e("Austral sign")},{character:"₴",title:e("Hryvnia sign")},{character:"₵",title:e("Cedi sign")},{character:"₶",title:e("Livre tournois sign")},{character:"₷",title:e("Spesmilo sign")},{character:"₸",title:e("Tenge sign")},{character:"₹",title:e("Indian rupee sign")},{character:"₺",title:e("Turkish lira sign")},{character:"₻",title:e("Nordic mark sign")},{character:"₼",title:e("Manat sign")},{character:"₽",title:e("Ruble sign")}],{label:e("Currency")})}}class u8e extends Be{static get pluginName(){return"SpecialCharactersEssentials"}static get requires(){return[Cz,_z,wz,bz,yz]}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 *//**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function bS(t,n){const{modelAttribute:e,styleName:i,viewElement:s,defaultValue:r,reduceBoxSides:o=!1,shouldUpcast:a=()=>!0}=n;t.for("upcast").attributeToAttribute({view:{name:s,styles:{[i]:/[\s\S]+/}},model:{key:e,value:l=>{if(!a(l))return;const c=l.getNormalizedStyle(i),u=o?Nb(c):c;if(r!==u)return u}}})}function gk(t,n,e,i){t.for("upcast").add(s=>s.on("element:"+n,(r,o,a)=>{if(!o.modelRange)return;const l=["border-top-width","border-top-color","border-top-style","border-bottom-width","border-bottom-color","border-bottom-style","border-right-width","border-right-color","border-right-style","border-left-width","border-left-color","border-left-style"].filter(p=>o.viewItem.hasStyle(p));if(!l.length)return;const c={styles:l};if(!a.consumable.test(o.viewItem,c))return;const u=[...o.modelRange.getItems({shallow:!0})].pop();a.consumable.consume(o.viewItem,c);const d={style:o.viewItem.getNormalizedStyle("border-style"),color:o.viewItem.getNormalizedStyle("border-color"),width:o.viewItem.getNormalizedStyle("border-width")},f={style:Nb(d.style),color:Nb(d.color),width:Nb(d.width)};f.style!==i.style&&a.writer.setAttribute(e.style,f.style,u),f.color!==i.color&&a.writer.setAttribute(e.color,f.color,u),f.width!==i.width&&a.writer.setAttribute(e.width,f.width,u)}))}function Ag(t,n){const{modelElement:e,modelAttribute:i,styleName:s}=n;t.for("downcast").attributeToAttribute({model:{name:e,key:i},view:r=>({key:"style",value:{[s]:r}})})}function Fb(t,n){const{modelAttribute:e,styleName:i}=n;t.for("downcast").add(s=>s.on(`attribute:${e}:table`,(r,o,a)=>{const{item:l,attributeNewValue:c}=o,{mapper:u,writer:d}=a;if(!a.consumable.consume(o.item,r.name))return;const f=[...u.toViewElement(l).getChildren()].find(p=>p.is("element","table"));c?d.setStyle(i,c,f):d.removeStyle(i,f)}))}function Nb(t){if(!t)return;const n=["top","right","bottom","left"];if(!n.every(r=>t[r]))return t;const i=t.top;return n.every(r=>t[r]===i)?i:t}function as(t,n,e,i,s=1){n!=null&&s!==void 0&&s!==null&&n>s?i.setAttribute(t,n,e):i.removeAttribute(t,e)}function Bh(t,n,e={}){const i=t.createElement("tableCell",e);return t.insertElement("paragraph",i),t.insert(i,n),i}function vk(t,n){const e=n.parent.parent,i=parseInt(e.getAttribute("headingColumns")||"0"),{column:s}=t.getCellLocation(n);return!!i&&s<i}function Vb(t,n,e){const{modelAttribute:i}=e;t.extend("tableCell",{allowAttributes:[i]}),bS(n,{viewElement:/^(td|th)$/,...e}),Ag(n,{modelElement:"tableCell",...e})}function rh(t){const n=t.getSelectedElement();return n&&n.is("element","table")?n:t.getFirstPosition().findAncestor("table")}function d8e(){return t=>{t.on("element:figure",(n,e,i)=>{if(!i.consumable.test(e.viewItem,{name:!0,classes:"table"}))return;const s=m8e(e.viewItem);if(!s||!i.consumable.test(s,{name:!0}))return;i.consumable.consume(e.viewItem,{name:!0,classes:"table"});const r=i.convertItem(s,e.modelCursor),o=bs(r.modelRange.getItems());if(!o){i.consumable.revert(e.viewItem,{name:!0,classes:"table"});return}i.convertChildren(e.viewItem,i.writer.createPositionAt(o,"end")),i.updateConversionResult(o,e)})}}function h8e(){return t=>{t.on("element:table",(n,e,i)=>{const s=e.viewItem;if(!i.consumable.test(s,{name:!0}))return;const{rows:r,headingRows:o,headingColumns:a}=p8e(s),l={};a&&(l.headingColumns=a),o&&(l.headingRows=o);const c=i.writer.createElement("table",l);if(i.safeInsert(c,e.modelCursor)){if(i.consumable.consume(s,{name:!0}),r.forEach(u=>i.convertItem(u,i.writer.createPositionAt(c,"end"))),i.convertChildren(s,i.writer.createPositionAt(c,"end")),c.isEmpty){const u=i.writer.createElement("tableRow");i.writer.insert(u,i.writer.createPositionAt(c,"end")),Bh(i.writer,i.writer.createPositionAt(u,"end"))}i.updateConversionResult(c,e)}})}}function f8e(){return t=>{t.on("element:tr",(n,e)=>{e.viewItem.isEmpty&&e.modelCursor.index==0&&n.stop()},{priority:"high"})}}function zR(t){return n=>{n.on(`element:${t}`,(e,i,{writer:s})=>{if(!i.modelRange)return;const r=i.modelRange.start.nodeAfter,o=s.createPositionAt(r,0);if(i.viewItem.isEmpty){s.insertElement("paragraph",o);return}const a=Array.from(r.getChildren());if(a.every(l=>l.is("element","$marker"))){const l=s.createElement("paragraph");s.insert(l,s.createPositionAt(r,0));for(const c of a)s.move(s.createRangeOn(c),s.createPositionAt(l,"end"))}},{priority:"low"})}}function m8e(t){for(const n of t.getChildren())if(n.is("element","table"))return n}function p8e(t){let n=0,e;const i=[],s=[];let r;for(const o of Array.from(t.getChildren())){if(o.name!=="tbody"&&o.name!=="thead"&&o.name!=="tfoot")continue;o.name==="thead"&&!r&&(r=o);const a=Array.from(o.getChildren()).filter(l=>l.is("element","tr"));for(const l of a)if(r&&o===r||o.name==="tbody"&&Array.from(l.getChildren()).length&&Array.from(l.getChildren()).every(c=>c.is("element","th")))n++,i.push(l);else{s.push(l);const c=g8e(l);(!e||c<e)&&(e=c)}}return{headingRows:n,headingColumns:e||0,rows:[...i,...s]}}function g8e(t){let n=0,e=0;const i=Array.from(t.getChildren()).filter(s=>s.name==="th"||s.name==="td");for(;e<i.length&&i[e].name==="th";){const s=i[e],r=parseInt(s.getAttribute("colspan")||"1");n=n+r,e++}return n}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class di{constructor(n,e={}){w(this,"_table");w(this,"_startRow");w(this,"_endRow");w(this,"_startColumn");w(this,"_endColumn");w(this,"_includeAllSlots");w(this,"_skipRows");w(this,"_row");w(this,"_rowIndex");w(this,"_column");w(this,"_cellIndex");w(this,"_spannedCells");w(this,"_nextCellAtColumn");w(this,"_jumpedToStartRow",!1);this._table=n,this._startRow=e.row!==void 0?e.row:e.startRow||0,this._endRow=e.row!==void 0?e.row:e.endRow,this._startColumn=e.column!==void 0?e.column:e.startColumn||0,this._endColumn=e.column!==void 0?e.column:e.endColumn,this._includeAllSlots=!!e.includeAllSlots,this._skipRows=new Set,this._row=0,this._rowIndex=0,this._column=0,this._cellIndex=0,this._spannedCells=new Map,this._nextCellAtColumn=-1}[Symbol.iterator](){return this}next(){this._canJumpToStartRow()&&this._jumpToNonSpannedRowClosestToStartRow();const n=this._table.getChild(this._rowIndex);if(!n||this._isOverEndRow())return{done:!0,value:void 0};if(!n.is("element","tableRow"))return this._rowIndex++,this.next();if(this._isOverEndColumn())return this._advanceToNextRow();let e=null;const i=this._getSpanned();if(i)this._includeAllSlots&&!this._shouldSkipSlot()&&(e=this._formatOutValue(i.cell,i.row,i.column));else{const s=n.getChild(this._cellIndex);if(!s)return this._advanceToNextRow();const r=parseInt(s.getAttribute("colspan")||"1"),o=parseInt(s.getAttribute("rowspan")||"1");(r>1||o>1)&&this._recordSpans(s,o,r),this._shouldSkipSlot()||(e=this._formatOutValue(s)),this._nextCellAtColumn=this._column+r}return this._column++,this._column==this._nextCellAtColumn&&this._cellIndex++,e||this.next()}skipRow(n){this._skipRows.add(n)}_advanceToNextRow(){return this._row++,this._rowIndex++,this._column=0,this._cellIndex=0,this._nextCellAtColumn=-1,this.next()}_isOverEndRow(){return this._endRow!==void 0&&this._row>this._endRow}_isOverEndColumn(){return this._endColumn!==void 0&&this._column>this._endColumn}_formatOutValue(n,e=this._row,i=this._column){return{done:!1,value:new v8e(this,n,e,i)}}_shouldSkipSlot(){const n=this._skipRows.has(this._row),e=this._row<this._startRow,i=this._column<this._startColumn,s=this._endColumn!==void 0&&this._column>this._endColumn;return n||e||i||s}_getSpanned(){const n=this._spannedCells.get(this._row);return n&&n.get(this._column)||null}_recordSpans(n,e,i){const s={cell:n,row:this._row,column:this._column};for(let r=this._row;r<this._row+e;r++)for(let o=this._column;o<this._column+i;o++)(r!=this._row||o!=this._column)&&this._markSpannedCell(r,o,s)}_markSpannedCell(n,e,i){this._spannedCells.has(n)||this._spannedCells.set(n,new Map),this._spannedCells.get(n).set(e,i)}_canJumpToStartRow(){return!!this._startRow&&this._startRow>0&&!this._jumpedToStartRow}_jumpToNonSpannedRowClosestToStartRow(){const n=this._getRowLength(0);for(let e=this._startRow;!this._jumpedToStartRow;e--)n===this._getRowLength(e)&&(this._row=e,this._rowIndex=e,this._jumpedToStartRow=!0)}_getRowLength(n){return[...this._table.getChild(n).getChildren()].reduce((i,s)=>i+parseInt(s.getAttribute("colspan")||"1"),0)}}class v8e{constructor(n,e,i,s){w(this,"cell");w(this,"row");w(this,"column");w(this,"cellAnchorRow");w(this,"cellAnchorColumn");w(this,"_cellIndex");w(this,"_rowIndex");w(this,"_table");this.cell=e,this.row=n._row,this.column=n._column,this.cellAnchorRow=i,this.cellAnchorColumn=s,this._cellIndex=n._cellIndex,this._rowIndex=n._rowIndex,this._table=n._table}get isAnchor(){return this.row===this.cellAnchorRow&&this.column===this.cellAnchorColumn}get cellWidth(){return parseInt(this.cell.getAttribute("colspan")||"1")}get cellHeight(){return parseInt(this.cell.getAttribute("rowspan")||"1")}get rowIndex(){return this._rowIndex}getPositionBefore(){return this._table.root.document.model.createPositionAt(this._table.getChild(this.row),this._cellIndex)}}function HR(t,n){return(e,{writer:i})=>{const s=e.getAttribute("headingRows")||0,r=i.createContainerElement("table",null,[]),o=i.createContainerElement("figure",{class:"table"},r);s>0&&i.insert(i.createPositionAt(r,"end"),i.createContainerElement("thead",null,i.createSlot(a=>a.is("element","tableRow")&&a.index<s))),s<t.getRows(e)&&i.insert(i.createPositionAt(r,"end"),i.createContainerElement("tbody",null,i.createSlot(a=>a.is("element","tableRow")&&a.index>=s)));for(const{positionOffset:a,filter:l}of n.additionalSlots)i.insert(i.createPositionAt(r,a),i.createSlot(l));return i.insert(i.createPositionAt(r,"after"),i.createSlot(a=>a.is("element","tableRow")?!1:!n.additionalSlots.some(({filter:l})=>l(a)))),n.asWidget?_8e(o,i):o}}function b8e(){return(t,{writer:n})=>t.isEmpty?n.createEmptyElement("tr"):n.createContainerElement("tr")}function UR(t={}){return(n,{writer:e})=>{const i=n.parent,s=i.parent,r=s.getChildIndex(i),o=new di(s,{row:r}),a=s.getAttribute("headingRows")||0,l=s.getAttribute("headingColumns")||0;let c=null;for(const u of o)if(u.cell==n){const f=u.row<a||u.column<l?"th":"td";c=t.asWidget?iS(e.createEditableElement(f),e):e.createContainerElement(f);break}return c}}function WR(t={}){return(n,{writer:e})=>{if(!n.parent.is("element","tableCell")||!kz(n))return null;if(t.asWidget)return e.createContainerElement("span",{class:"ck-table-bogus-paragraph"});{const i=e.createContainerElement("p");return e.setCustomProperty("dataPipeline:transparentRendering",!0,i),i}}}function kz(t){return t.parent.childCount==1&&!w8e(t)}function _8e(t,n){return n.setCustomProperty("table",!0,t),sy(t,n,{hasSelectionHandle:!0})}function w8e(t){return!t.getAttributeKeys().next().done}class y8e extends en{refresh(){const n=this.editor.model,e=n.document.selection,i=n.schema;this.isEnabled=C8e(e,i)}execute(n={}){const e=this.editor,i=e.model,s=e.plugins.get("TableUtils"),r=e.config.get("table.defaultHeadings.rows"),o=e.config.get("table.defaultHeadings.columns");n.headingRows===void 0&&r&&(n.headingRows=r),n.headingColumns===void 0&&o&&(n.headingColumns=o),i.change(a=>{const l=s.createTable(a,n);i.insertObject(l,null,null,{findOptimalPosition:"auto"}),a.setSelection(a.createPositionAt(l.getNodeByPath([0,0,0]),0))})}}function C8e(t,n){const e=t.getFirstPosition().parent,i=e===e.root?e:e.parent;return n.checkChild(i,"table")}class jR extends en{constructor(e,i={}){super(e);w(this,"order");this.order=i.order||"below"}refresh(){const e=this.editor.model.document.selection,s=!!this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(e).length;this.isEnabled=s}execute(){const e=this.editor,i=e.model.document.selection,s=e.plugins.get("TableUtils"),r=this.order==="above",o=s.getSelectionAffectedTableCells(i),a=s.getRowIndexes(o),l=r?a.first:a.last,c=o[0].findAncestor("table");s.insertRows(c,{at:r?l:l+1,copyStructureFromAbove:!r})}}class qR extends en{constructor(e,i={}){super(e);w(this,"order");this.order=i.order||"right"}refresh(){const e=this.editor.model.document.selection,s=!!this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(e).length;this.isEnabled=s}execute(){const e=this.editor,i=e.model.document.selection,s=e.plugins.get("TableUtils"),r=this.order==="left",o=s.getSelectionAffectedTableCells(i),a=s.getColumnIndexes(o),l=r?a.first:a.last,c=o[0].findAncestor("table");s.insertColumns(c,{columns:1,at:r?l:l+1})}}class KR extends en{constructor(e,i={}){super(e);w(this,"direction");this.direction=i.direction||"horizontally"}refresh(){const i=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(this.editor.model.document.selection);this.isEnabled=i.length===1}execute(){const e=this.editor.plugins.get("TableUtils"),i=e.getSelectionAffectedTableCells(this.editor.model.document.selection)[0];this.direction==="horizontally"?e.splitCellHorizontally(i,2):e.splitCellVertically(i,2)}}function Ez(t,n,e){const{startRow:i,startColumn:s,endRow:r,endColumn:o}=n,a=e.createElement("table"),l=r-i+1;for(let u=0;u<l;u++)e.insertElement("tableRow",a,"end");const c=[...new di(t,{startRow:i,endRow:r,startColumn:s,endColumn:o,includeAllSlots:!0})];for(const{row:u,column:d,cell:f,isAnchor:p,cellAnchorRow:m,cellAnchorColumn:v}of c){const y=u-i,_=a.getChild(y);if(!p)(m<i||v<s)&&Bh(e,e.createPositionAt(_,"end"));else{const b=e.cloneElement(f);e.append(b,_),Iz(b,u,d,r,o,e)}}return k8e(a,t,i,s,e),a}function Sz(t,n,e=0){const i=[],s=new di(t,{startRow:e,endRow:n-1});for(const r of s){const{row:o,cellHeight:a}=r,l=o+a-1;o<n&&n<=l&&i.push(r)}return i}function Tz(t,n,e){const i=t.parent,s=i.parent,r=i.index,o=parseInt(t.getAttribute("rowspan")),a=n-r,l={},c=o-a;c>1&&(l.rowspan=c);const u=parseInt(t.getAttribute("colspan")||"1");u>1&&(l.colspan=u);const d=r,f=d+a,p=[...new di(s,{startRow:d,endRow:f,includeAllSlots:!0})];let m=null,v;for(const y of p){const{row:_,column:b,cell:E}=y;E===t&&v===void 0&&(v=b),v!==void 0&&v===b&&_===f&&(m=Bh(e,y.getPositionBefore(),l))}return as("rowspan",a,t,e),m}function xz(t,n){const e=[],i=new di(t);for(const s of i){const{column:r,cellWidth:o}=s,a=r+o-1;r<n&&n<=a&&e.push(s)}return e}function Az(t,n,e,i){const s=parseInt(t.getAttribute("colspan")),r=e-n,o={},a=s-r;a>1&&(o.colspan=a);const l=parseInt(t.getAttribute("rowspan")||"1");l>1&&(o.rowspan=l);const c=Bh(i,i.createPositionAfter(t),o);return as("colspan",r,t,i),c}function Iz(t,n,e,i,s,r){const o=parseInt(t.getAttribute("colspan")||"1"),a=parseInt(t.getAttribute("rowspan")||"1");if(e+o-1>s){const u=s-e+1;as("colspan",u,t,r,1)}if(n+a-1>i){const u=i-n+1;as("rowspan",u,t,r,1)}}function k8e(t,n,e,i,s){const r=parseInt(n.getAttribute("headingRows")||"0");if(r>0){const a=r-e;as("headingRows",a,t,s,0)}const o=parseInt(n.getAttribute("headingColumns")||"0");if(o>0){const a=o-i;as("headingColumns",a,t,s,0)}}function bk(t,n){const e=n.getColumns(t),i=new Array(e).fill(0);for(const{column:r}of new di(t))i[r]++;const s=i.reduce((r,o,a)=>o?r:[...r,a],[]);if(s.length>0){const r=s[s.length-1];return n.removeColumns(t,{at:r}),!0}return!1}function _k(t,n){const e=[],i=n.getRows(t);for(let s=0;s<i;s++)t.getChild(s).isEmpty&&e.push(s);if(e.length>0){const s=e[e.length-1];return n.removeRows(t,{at:s}),!0}return!1}function _S(t,n){bk(t,n)||_k(t,n)}function Rz(t,n){const e=Array.from(new di(t,{startColumn:n.firstColumn,endColumn:n.lastColumn,row:n.lastRow}));if(e.every(({cellHeight:r})=>r===1))return n.lastRow;const s=e[0].cellHeight-1;return n.lastRow+s}function Mz(t,n){const e=Array.from(new di(t,{startRow:n.firstRow,endRow:n.lastRow,column:n.lastColumn}));if(e.every(({cellWidth:r})=>r===1))return n.lastColumn;const s=e[0].cellWidth-1;return n.lastColumn+s}class Nv extends en{constructor(e,i){super(e);w(this,"direction");w(this,"isHorizontal");this.direction=i.direction,this.isHorizontal=this.direction=="right"||this.direction=="left"}refresh(){const e=this._getMergeableCell();this.value=e,this.isEnabled=!!e}execute(){const e=this.editor.model,i=e.document,r=this.editor.plugins.get("TableUtils").getTableCellsContainingSelection(i.selection)[0],o=this.value,a=this.direction;e.change(l=>{const c=a=="right"||a=="down",u=c?r:o,d=c?o:r,f=d.parent;T8e(d,u,l);const p=this.isHorizontal?"colspan":"rowspan",m=parseInt(r.getAttribute(p)||"1"),v=parseInt(o.getAttribute(p)||"1");l.setAttribute(p,m+v,u),l.setSelection(l.createRangeIn(u));const y=this.editor.plugins.get("TableUtils"),_=f.findAncestor("table");_S(_,y)})}_getMergeableCell(){const i=this.editor.model.document,s=this.editor.plugins.get("TableUtils"),r=s.getTableCellsContainingSelection(i.selection)[0];if(!r)return;const o=this.isHorizontal?E8e(r,this.direction,s):S8e(r,this.direction,s);if(!o)return;const a=this.isHorizontal?"rowspan":"colspan",l=parseInt(r.getAttribute(a)||"1");if(parseInt(o.getAttribute(a)||"1")===l)return o}}function E8e(t,n,e){const s=t.parent.parent,r=n=="right"?t.nextSibling:t.previousSibling,o=(s.getAttribute("headingColumns")||0)>0;if(!r)return;const a=n=="right"?t:r,l=n=="right"?r:t,{column:c}=e.getCellLocation(a),{column:u}=e.getCellLocation(l),d=parseInt(a.getAttribute("colspan")||"1"),f=vk(e,a),p=vk(e,l);return o&&f!=p?void 0:c+d===u?r:void 0}function S8e(t,n,e){const i=t.parent,s=i.parent,r=s.getChildIndex(i);if(n=="down"&&r===e.getRows(s)-1||n=="up"&&r===0)return null;const o=parseInt(t.getAttribute("rowspan")||"1"),a=s.getAttribute("headingRows")||0,l=n=="down"&&r+o===a,c=n=="up"&&r===a;if(a&&(l||c))return null;const u=parseInt(t.getAttribute("rowspan")||"1"),d=n=="down"?r+u:r,f=[...new di(s,{endRow:d})],m=f.find(y=>y.cell===t).column,v=f.find(({row:y,cellHeight:_,column:b})=>b!==m?!1:n=="down"?y===d:d===y+_);return v&&v.cell?v.cell:null}function T8e(t,n,e){GR(t)||(GR(n)&&e.remove(e.createRangeIn(n)),e.move(e.createRangeIn(t),e.createPositionAt(n,"end"))),e.remove(t)}function GR(t){const n=t.getChild(0);return t.childCount==1&&n.is("element","paragraph")&&n.isEmpty}class x8e extends en{refresh(){const n=this.editor.plugins.get("TableUtils"),e=n.getSelectionAffectedTableCells(this.editor.model.document.selection),i=e[0];if(i){const s=i.findAncestor("table"),o=n.getRows(s)-1,a=n.getRowIndexes(e),l=a.first===0&&a.last===o;this.isEnabled=!l}else this.isEnabled=!1}execute(){const n=this.editor.model,e=this.editor.plugins.get("TableUtils"),i=e.getSelectionAffectedTableCells(n.document.selection),s=e.getRowIndexes(i),r=i[0],o=r.findAncestor("table"),a=e.getCellLocation(r).column;n.change(l=>{const c=s.last-s.first+1;e.removeRows(o,{at:s.first,rows:c});const u=A8e(o,s.first,a,e.getRows(o));l.setSelection(l.createPositionAt(u,0))})}}function A8e(t,n,e,i){const s=t.getChild(Math.min(n,i-1));let r=s.getChild(0),o=0;for(const a of s.getChildren()){if(o>e)return r;r=a,o+=parseInt(a.getAttribute("colspan")||"1")}return r}class I8e extends en{refresh(){const n=this.editor.plugins.get("TableUtils"),e=n.getSelectionAffectedTableCells(this.editor.model.document.selection),i=e[0];if(i){const s=i.findAncestor("table"),r=n.getColumns(s),{first:o,last:a}=n.getColumnIndexes(e);this.isEnabled=a-o<r-1}else this.isEnabled=!1}execute(){const n=this.editor.plugins.get("TableUtils"),[e,i]=M8e(this.editor.model.document.selection,n),s=e.parent.parent,r=[...new di(s)],o={first:r.find(l=>l.cell===e).column,last:r.find(l=>l.cell===i).column},a=R8e(r,e,i,o);this.editor.model.change(l=>{const c=o.last-o.first+1;n.removeColumns(s,{at:o.first,columns:c}),l.setSelection(l.createPositionAt(a,0))})}}function R8e(t,n,e,i){return parseInt(e.getAttribute("colspan")||"1")>1?e:n.previousSibling||e.nextSibling?e.nextSibling||n.previousSibling:i.first?t.reverse().find(({column:r})=>r<i.first).cell:t.reverse().find(({column:r})=>r>i.last).cell}function M8e(t,n){const e=n.getSelectionAffectedTableCells(t),i=e[0],s=e.pop(),r=[i,s];return i.isBefore(s)?r:r.reverse()}class P8e extends en{refresh(){const n=this.editor.plugins.get("TableUtils"),e=this.editor.model,i=n.getSelectionAffectedTableCells(e.document.selection),s=i.length>0;this.isEnabled=s,this.value=s&&i.every(r=>this._isInHeading(r,r.parent.parent))}execute(n={}){if(n.forceValue===this.value)return;const e=this.editor.plugins.get("TableUtils"),i=this.editor.model,s=e.getSelectionAffectedTableCells(i.document.selection),r=s[0].findAncestor("table"),{first:o,last:a}=e.getRowIndexes(s),l=this.value?o:a+1,c=r.getAttribute("headingRows")||0;i.change(u=>{if(l){const d=l>c?c:0,f=Sz(r,l,d);for(const{cell:p}of f)Tz(p,l,u)}as("headingRows",l,r,u,0)})}_isInHeading(n,e){const i=parseInt(e.getAttribute("headingRows")||"0");return!!i&&n.parent.index<i}}class O8e extends en{refresh(){const n=this.editor.model,e=this.editor.plugins.get("TableUtils"),i=e.getSelectionAffectedTableCells(n.document.selection),s=i.length>0;this.isEnabled=s,this.value=s&&i.every(r=>vk(e,r))}execute(n={}){if(n.forceValue===this.value)return;const e=this.editor.plugins.get("TableUtils"),i=this.editor.model,s=e.getSelectionAffectedTableCells(i.document.selection),r=s[0].findAncestor("table"),{first:o,last:a}=e.getColumnIndexes(s),l=this.value?o:a+1;i.change(c=>{if(l){const u=xz(r,l);for(const{cell:d,column:f}of u)Az(d,f,l,c)}as("headingColumns",l,r,c,0)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const L8e=5,wk=40,B8e=2;function F8e(t){const n=new Set;for(const e of t.document.differ.getChanges()){let i=null;switch(e.type){case"insert":i=["table","tableRow","tableCell"].includes(e.name)?e.position:null;break;case"remove":i=["tableRow","tableCell"].includes(e.name)?e.position:null;break;case"attribute":e.range.start.nodeAfter&&(i=["table","tableRow","tableCell"].includes(e.range.start.nodeAfter.name)?e.range.start:null);break}if(!i)continue;const s=i.nodeAfter&&i.nodeAfter.is("element","table")?i.nodeAfter:i.findAncestor("table");for(const r of t.createRangeOn(s).getItems())r.is("element","table")&&X1(r)&&n.add(r)}return n}function N8e(t,n){return wk*100/Pz(t,n)}function Pz(t,n){const e=YR(t,"tbody",n)||YR(t,"thead",n),i=n.editing.view.domConverter.mapViewToDom(e);return yk(i)}function YR(t,n,e){return[...[...e.editing.mapper.toViewElement(t).getChildren()].find(r=>r.is("element","table")).getChildren()].find(r=>r.is("element",n))}function yk(t){const n=$t.window.getComputedStyle(t);return n.boxSizing==="border-box"?parseFloat(n.width)-parseFloat(n.paddingLeft)-parseFloat(n.paddingRight)-parseFloat(n.borderLeftWidth)-parseFloat(n.borderRightWidth):parseFloat(n.width)}function V8e(t,n){const e=n.getCellLocation(t).column,i=t.getAttribute("colspan")||1;return{leftEdge:e,rightEdge:e+i-1}}function Ur(t){const n=Math.pow(10,B8e),e=typeof t=="number"?t:parseFloat(t);return Math.round(e*n)/n}function D8e(t,n,e){return t<=n?Ur(n):t>=e?Ur(e):Ur(t)}function $8e(t,n){return Array(t).fill(n)}function b1(t){return t.map(n=>typeof n=="number"?n:parseFloat(n)).filter(n=>!Number.isNaN(n)).reduce((n,e)=>n+e,0)}function wS(t){const n=t.map(s=>s==="auto"?s:parseFloat(s.replace("%","")));let e=z8e(n);const i=b1(e);return i!==100&&(e=e.map(s=>Ur(s*100/i)).map((s,r,o)=>{if(!(r===o.length-1))return s;const l=b1(o);return Ur(s+100-l)})),e.map(s=>s+"%")}function z8e(t){const n=t.filter(s=>s==="auto").length;if(n===0)return t.map(s=>Ur(s));const e=b1(t),i=Math.max((100-e)/n,L8e);return t.map(s=>s==="auto"?i:s).map(s=>Ur(s))}function H8e(t){const n=$t.window.getComputedStyle(t);return n.boxSizing==="border-box"?parseInt(n.width):parseFloat(n.width)+parseFloat(n.paddingLeft)+parseFloat(n.paddingRight)+parseFloat(n.borderWidth)}function Oz(t,n,e,i){for(let s=0;s<Math.max(e.length,t.length);s++){const r=t[s],o=e[s];o?r?i.setAttribute("columnWidth",o,r):i.appendElement("tableColumn",{columnWidth:o},n):i.remove(r)}}function X1(t){if(t.is("element","tableColumnGroup"))return t;const n=t.getChildren();return Array.from(n).find(e=>e.is("element","tableColumnGroup"))}function J1(t){const n=X1(t);return n?Array.from(n.getChildren()):[]}function U8e(t){return J1(t).map(n=>n.getAttribute("columnWidth"))}function W8e(t,n){return J1(t).reduce((i,s)=>{const r=s.getAttribute("columnWidth"),o=s.getAttribute("colSpan");if(!o)return i.push(r),i;for(let a=0;a<o;a++)i.push(r);return n.removeAttribute("colSpan",s),i},[])}class Ds extends Be{static get pluginName(){return"TableUtils"}init(){this.decorate("insertColumns"),this.decorate("insertRows")}getCellLocation(n){const e=n.parent,i=e.parent,s=i.getChildIndex(e),r=new di(i,{row:s});for(const{cell:o,row:a,column:l}of r)if(o===n)return{row:a,column:l};/* istanbul ignore next -- @preserve */}createTable(n,e){const i=n.createElement("table"),s=e.rows||2,r=e.columns||2;return s3(n,i,0,s,r),e.headingRows&&as("headingRows",Math.min(e.headingRows,s),i,n,0),e.headingColumns&&as("headingColumns",Math.min(e.headingColumns,r),i,n,0),i}insertRows(n,e={}){const i=this.editor.model,s=e.at||0,r=e.rows||1,o=e.copyStructureFromAbove!==void 0,a=e.copyStructureFromAbove?s-1:s,l=this.getRows(n),c=this.getColumns(n);if(s>l)throw new fe("tableutils-insertrows-insert-out-of-range",this,{options:e});i.change(u=>{const d=n.getAttribute("headingRows")||0;if(d>s&&as("headingRows",d+r,n,u,0),!o&&(s===0||s===l)){s3(u,n,s,r,c);return}const f=o?Math.max(s,a):s,p=new di(n,{endRow:f}),m=new Array(c).fill(1);for(const{row:v,column:y,cellHeight:_,cellWidth:b,cell:E}of p){const x=v+_-1,A=v<s&&s<=x,I=v<=a&&a<=x;A?(u.setAttribute("rowspan",_+r,E),m[y]=-b):o&&I&&(m[y]=b)}for(let v=0;v<r;v++){const y=u.createElement("tableRow");u.insert(y,n,s);for(let _=0;_<m.length;_++){const b=m[_],E=u.createPositionAt(y,"end");b>0&&Bh(u,E,b>1?{colspan:b}:void 0),_+=Math.abs(b)-1}}})}insertColumns(n,e={}){const i=this.editor.model,s=e.at||0,r=e.columns||1;i.change(o=>{const a=n.getAttribute("headingColumns");s<a&&o.setAttribute("headingColumns",a+r,n);const l=this.getColumns(n);if(s===0||l===s){for(const u of n.getChildren())u.is("element","tableRow")&&Tf(r,o,o.createPositionAt(u,s?"end":0));return}const c=new di(n,{column:s,includeAllSlots:!0});for(const u of c){const{row:d,cell:f,cellAnchorColumn:p,cellAnchorRow:m,cellWidth:v,cellHeight:y}=u;if(p<s){o.setAttribute("colspan",v+r,f);const _=m+y-1;for(let b=d;b<=_;b++)c.skipRow(b)}else Tf(r,o,u.getPositionBefore())}})}removeRows(n,e){const i=this.editor.model,s=e.rows||1,r=this.getRows(n),o=e.at,a=o+s-1;if(a>r-1)throw new fe("tableutils-removerows-row-index-out-of-range",this,{table:n,options:e});i.change(l=>{const c={first:o,last:a},{cellsToMove:u,cellsToTrim:d}=K8e(n,c);if(u.size){const f=a+1;G8e(n,f,u,l)}for(let f=a;f>=o;f--)l.remove(n.getChild(f));for(const{rowspan:f,cell:p}of d)as("rowspan",f,p,l);q8e(n,c,l),bk(n,this)||_k(n,this)})}removeColumns(n,e){const i=this.editor.model,s=e.at,r=e.columns||1,o=e.at+r-1;i.change(a=>{j8e(n,{first:s,last:o},a);const l=J1(n);for(let c=o;c>=s;c--){for(const{cell:u,column:d,cellWidth:f}of[...new di(n)])d<=c&&f>1&&d+f>c?as("colspan",f-1,u,a):d===c&&a.remove(u);if(l[c]){const u=c===0?l[1]:l[c-1],d=parseFloat(l[c].getAttribute("columnWidth")),f=parseFloat(u.getAttribute("columnWidth"));a.remove(l[c]),a.setAttribute("columnWidth",d+f+"%",u)}}_k(n,this)||bk(n,this)})}splitCellVertically(n,e=2){const i=this.editor.model,r=n.parent.parent,o=parseInt(n.getAttribute("rowspan")||"1"),a=parseInt(n.getAttribute("colspan")||"1");i.change(l=>{if(a>1){const{newCellsSpan:c,updatedSpan:u}=ZR(a,e);as("colspan",u,n,l);const d={};c>1&&(d.colspan=c),o>1&&(d.rowspan=o);const f=a>e?e-1:a-1;Tf(f,l,l.createPositionAfter(n),d)}if(a<e){const c=e-a,u=[...new di(r)],{column:d}=u.find(({cell:v})=>v===n),f=u.filter(({cell:v,cellWidth:y,column:_})=>{const b=v!==n&&_===d,E=_<d&&_+y>d;return b||E});for(const{cell:v,cellWidth:y}of f)l.setAttribute("colspan",y+c,v);const p={};o>1&&(p.rowspan=o),Tf(c,l,l.createPositionAfter(n),p);const m=r.getAttribute("headingColumns")||0;m>d&&as("headingColumns",m+c,r,l)}})}splitCellHorizontally(n,e=2){const i=this.editor.model,s=n.parent,r=s.parent,o=r.getChildIndex(s),a=parseInt(n.getAttribute("rowspan")||"1"),l=parseInt(n.getAttribute("colspan")||"1");i.change(c=>{if(a>1){const u=[...new di(r,{startRow:o,endRow:o+a-1,includeAllSlots:!0})],{newCellsSpan:d,updatedSpan:f}=ZR(a,e);as("rowspan",f,n,c);const{column:p}=u.find(({cell:y})=>y===n),m={};d>1&&(m.rowspan=d),l>1&&(m.colspan=l);let v=0;for(const y of u){const{column:_,row:b}=y,E=b>=o+f,x=_===p;v>=d&&x&&(v=0),E&&x&&(v||Tf(1,c,y.getPositionBefore(),m),v++)}}if(a<e){const u=e-a,d=[...new di(r,{startRow:0,endRow:o})];for(const{cell:m,cellHeight:v,row:y}of d)if(m!==n&&y+v>o){const _=v+u;c.setAttribute("rowspan",_,m)}const f={};l>1&&(f.colspan=l),s3(c,r,o+1,u,1,f);const p=r.getAttribute("headingRows")||0;p>o&&as("headingRows",p+u,r,c)}})}getColumns(n){return[...n.getChild(0).getChildren()].filter(i=>i.is("element","tableCell")).reduce((i,s)=>{const r=parseInt(s.getAttribute("colspan")||"1");return i+r},0)}getRows(n){return Array.from(n.getChildren()).reduce((e,i)=>i.is("element","tableRow")?e+1:e,0)}createTableWalker(n,e={}){return new di(n,e)}getSelectedTableCells(n){const e=[];for(const i of this.sortRanges(n.getRanges())){const s=i.getContainedElement();s&&s.is("element","tableCell")&&e.push(s)}return e}getTableCellsContainingSelection(n){const e=[];for(const i of n.getRanges()){const s=i.start.findAncestor("tableCell");s&&e.push(s)}return e}getSelectionAffectedTableCells(n){const e=this.getSelectedTableCells(n);return e.length?e:this.getTableCellsContainingSelection(n)}getRowIndexes(n){const e=n.map(i=>i.parent.index);return this._getFirstLastIndexesObject(e)}getColumnIndexes(n){const e=n[0].findAncestor("table"),s=[...new di(e)].filter(r=>n.includes(r.cell)).map(r=>r.column);return this._getFirstLastIndexesObject(s)}isSelectionRectangular(n){if(n.length<2||!this._areCellInTheSameTableSection(n))return!1;const e=new Set,i=new Set;let s=0;for(const o of n){const{row:a,column:l}=this.getCellLocation(o),c=parseInt(o.getAttribute("rowspan"))||1,u=parseInt(o.getAttribute("colspan"))||1;e.add(a),i.add(l),c>1&&e.add(a+c-1),u>1&&i.add(l+u-1),s+=c*u}return Z8e(e,i)==s}sortRanges(n){return Array.from(n).sort(Y8e)}_getFirstLastIndexesObject(n){const e=n.sort((r,o)=>r-o),i=e[0],s=e[e.length-1];return{first:i,last:s}}_areCellInTheSameTableSection(n){const e=n[0].findAncestor("table"),i=this.getRowIndexes(n),s=parseInt(e.getAttribute("headingRows"))||0;if(!this._areIndexesInSameSection(i,s))return!1;const r=this.getColumnIndexes(n),o=parseInt(e.getAttribute("headingColumns"))||0;return this._areIndexesInSameSection(r,o)}_areIndexesInSameSection({first:n,last:e},i){const s=n<i,r=e<i;return s===r}}function s3(t,n,e,i,s,r={}){for(let o=0;o<i;o++){const a=t.createElement("tableRow");t.insert(a,n,e),Tf(s,t,t.createPositionAt(a,"end"),r)}}function Tf(t,n,e,i={}){for(let s=0;s<t;s++)Bh(n,e,i)}function ZR(t,n){if(t<n)return{newCellsSpan:1,updatedSpan:1};const e=Math.floor(t/n),i=t-e*n+e;return{newCellsSpan:e,updatedSpan:i}}function j8e(t,n,e){const i=t.getAttribute("headingColumns")||0;if(i&&n.first<i){const s=Math.min(i-1,n.last)-n.first+1;e.setAttribute("headingColumns",i-s,t)}}function q8e(t,{first:n,last:e},i){const s=t.getAttribute("headingRows")||0;if(n<s){const r=e<s?s-(e-n+1):n;as("headingRows",r,t,i,0)}}function K8e(t,{first:n,last:e}){const i=new Map,s=[];for(const{row:r,column:o,cellHeight:a,cell:l}of new di(t,{endRow:e})){const c=r+a-1;if(r>=n&&r<=e&&c>e){const f=e-r+1,p=a-f;i.set(o,{cell:l,rowspan:p})}if(r<n&&c>=n){let f;c>=e?f=e-n+1:f=c-n+1,s.push({cell:l,rowspan:a-f})}}return{cellsToMove:i,cellsToTrim:s}}function G8e(t,n,e,i){const r=[...new di(t,{includeAllSlots:!0,row:n})],o=t.getChild(n);let a;for(const{column:l,cell:c,isAnchor:u}of r)if(e.has(l)){const{cell:d,rowspan:f}=e.get(l),p=a?i.createPositionAfter(a):i.createPositionAt(o,0);i.move(i.createRangeOn(d),p),as("rowspan",f,d,i),a=d}else u&&(a=c)}function Y8e(t,n){const e=t.start,i=n.start;return e.isBefore(i)?-1:1}function Z8e(t,n){const e=Array.from(t.values()),i=Array.from(n.values()),s=Math.max(...e),r=Math.min(...e),o=Math.max(...i),a=Math.min(...i);return(s-r+1)*(o-a+1)}class X8e extends en{refresh(){const n=this.editor.plugins.get(Ds),e=n.getSelectedTableCells(this.editor.model.document.selection);this.isEnabled=n.isSelectionRectangular(e)}execute(){const n=this.editor.model,e=this.editor.plugins.get(Ds);n.change(i=>{const s=e.getSelectedTableCells(n.document.selection),r=s.shift(),{mergeWidth:o,mergeHeight:a}=Q8e(r,s,e);as("colspan",o,r,i),as("rowspan",a,r,i);for(const c of s)J8e(c,r,i);const l=r.findAncestor("table");_S(l,e),i.setSelection(r,"in")})}}function J8e(t,n,e){XR(t)||(XR(n)&&e.remove(e.createRangeIn(n)),e.move(e.createRangeIn(t),e.createPositionAt(n,"end"))),e.remove(t)}function XR(t){const n=t.getChild(0);return t.childCount==1&&n.is("element","paragraph")&&n.isEmpty}function Q8e(t,n,e){let i=0,s=0;for(const c of n){const{row:u,column:d}=e.getCellLocation(c);i=JR(c,d,i,"colspan"),s=JR(c,u,s,"rowspan")}const{row:r,column:o}=e.getCellLocation(t),a=i-o,l=s-r;return{mergeWidth:a,mergeHeight:l}}function JR(t,n,e,i){const s=parseInt(t.getAttribute(i)||"1");return Math.max(e,n+s)}class e9e extends en{constructor(n){super(n),this.affectsData=!1}refresh(){const e=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(this.editor.model.document.selection);this.isEnabled=e.length>0}execute(){const n=this.editor.model,e=this.editor.plugins.get("TableUtils"),i=e.getSelectionAffectedTableCells(n.document.selection),s=e.getRowIndexes(i),r=i[0].findAncestor("table"),o=[];for(let a=s.first;a<=s.last;a++)for(const l of r.getChild(a).getChildren())o.push(n.createRangeOn(l));n.change(a=>{a.setSelection(o)})}}class t9e extends en{constructor(n){super(n),this.affectsData=!1}refresh(){const e=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(this.editor.model.document.selection);this.isEnabled=e.length>0}execute(){const n=this.editor.plugins.get("TableUtils"),e=this.editor.model,i=n.getSelectionAffectedTableCells(e.document.selection),s=i[0],r=i.pop(),o=s.findAncestor("table"),a=n.getCellLocation(s),l=n.getCellLocation(r),c=Math.min(a.column,l.column),u=Math.max(a.column,l.column),d=[];for(const f of new di(o,{startColumn:c,endColumn:u}))d.push(e.createRangeOn(f.cell));e.change(f=>{f.setSelection(d)})}}function n9e(t){t.document.registerPostFixer(n=>i9e(n,t))}function i9e(t,n){const e=n.document.differ.getChanges();let i=!1;const s=new Set;for(const r of e){let o=null;r.type=="insert"&&r.name=="table"&&(o=r.position.nodeAfter),(r.type=="insert"||r.type=="remove")&&(r.name=="tableRow"||r.name=="tableCell")&&(o=r.position.findAncestor("table")),l9e(r)&&(o=r.range.start.findAncestor("table")),o&&!s.has(o)&&(i=s9e(o,t)||i,i=r9e(o,t)||i,s.add(o))}return i}function s9e(t,n){let e=!1;const i=o9e(t);if(i.length){e=!0;for(const s of i)as("rowspan",s.rowspan,s.cell,n,1)}return e}function r9e(t,n){let e=!1;const i=a9e(t),s=[];for(const[l,c]of i.entries())!c&&t.getChild(l).is("element","tableRow")&&s.push(l);if(s.length){e=!0;for(const l of s.reverse())n.remove(t.getChild(l)),i.splice(l,1)}const r=i.filter((l,c)=>t.getChild(c).is("element","tableRow")),o=r[0];if(!r.every(l=>l===o)){const l=r.reduce((c,u)=>u>c?u:c,0);for(const[c,u]of r.entries()){const d=l-u;if(d){for(let f=0;f<d;f++)Bh(n,n.createPositionAt(t.getChild(c),"end"));e=!0}}}return e}function o9e(t){const n=parseInt(t.getAttribute("headingRows")||"0"),e=Array.from(t.getChildren()).reduce((s,r)=>r.is("element","tableRow")?s+1:s,0),i=[];for(const{row:s,cell:r,cellHeight:o}of new di(t)){if(o<2)continue;const l=s<n?n:e;if(s+o>l){const c=l-s;i.push({cell:r,rowspan:c})}}return i}function a9e(t){const n=new Array(t.childCount).fill(0);for(const{rowIndex:e}of new di(t,{includeAllSlots:!0}))n[e]++;return n}function l9e(t){if(t.type!=="attribute")return!1;const n=t.attributeKey;return n==="headingRows"||n==="colspan"||n==="rowspan"}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function c9e(t){t.document.registerPostFixer(n=>u9e(n,t))}function u9e(t,n){const e=n.document.differ.getChanges();let i=!1;for(const s of e)s.type=="insert"&&s.name=="table"&&(i=d9e(s.position.nodeAfter,t)||i),s.type=="insert"&&s.name=="tableRow"&&(i=Lz(s.position.nodeAfter,t)||i),s.type=="insert"&&s.name=="tableCell"&&(i=Ck(s.position.nodeAfter,t)||i),(s.type=="remove"||s.type=="insert")&&h9e(s)&&(i=Ck(s.position.parent,t)||i);return i}function d9e(t,n){let e=!1;for(const i of t.getChildren())i.is("element","tableRow")&&(e=Lz(i,n)||e);return e}function Lz(t,n){let e=!1;for(const i of t.getChildren())e=Ck(i,n)||e;return e}function Ck(t,n){if(t.childCount==0)return n.insertElement("paragraph",t),!0;const e=Array.from(t.getChildren()).filter(i=>i.is("$text"));for(const i of e)n.wrap(n.createRangeOn(i),"paragraph");return!!e.length}function h9e(t){return t.position.parent.is("element","tableCell")?t.type=="insert"&&t.name=="$text"||t.type=="remove":!1}function f9e(t,n){const e=t.document.differ;for(const i of e.getChanges()){let s,r=!1;if(i.type=="attribute"){const c=i.range.start.nodeAfter;if(!c||!c.is("element","table")||i.attributeKey!="headingRows"&&i.attributeKey!="headingColumns")continue;s=c,r=i.attributeKey=="headingRows"}else(i.name=="tableRow"||i.name=="tableCell")&&(s=i.position.findAncestor("table"),r=i.name=="tableRow");if(!s)continue;const o=s.getAttribute("headingRows")||0,a=s.getAttribute("headingColumns")||0,l=new di(s);for(const c of l){const d=c.row<o||c.column<a?"th":"td",f=n.mapper.toViewElement(c.cell);f&&f.is("element")&&f.name!=d&&n.reconvertItem(r?c.cell.parent:c.cell)}}}function m9e(t,n){const e=t.document.differ,i=new Set;for(const s of e.getChanges()){const r=s.type=="attribute"?s.range.start.parent:s.position.parent;r.is("element","tableCell")&&i.add(r)}for(const s of i.values()){const r=Array.from(s.getChildren()).filter(o=>p9e(o,n.mapper));for(const o of r)n.reconvertItem(o)}}function p9e(t,n){if(!t.is("element","paragraph"))return!1;const e=n.toViewElement(t);return e?kz(t)!==e.is("element","span"):!1}class Q1 extends Be{constructor(e){super(e);w(this,"_additionalSlots");this._additionalSlots=[]}static get pluginName(){return"TableEditing"}static get requires(){return[Ds]}init(){const e=this.editor,i=e.model,s=i.schema,r=e.conversion,o=e.plugins.get(Ds);s.register("table",{inheritAllFrom:"$blockObject",allowAttributes:["headingRows","headingColumns"]}),s.register("tableRow",{allowIn:"table",isLimit:!0}),s.register("tableCell",{allowContentOf:"$container",allowIn:"tableRow",allowAttributes:["colspan","rowspan"],isLimit:!0,isSelectable:!0}),r.for("upcast").add(d8e()),r.for("upcast").add(h8e()),r.for("editingDowncast").elementToStructure({model:{name:"table",attributes:["headingRows"]},view:HR(o,{asWidget:!0,additionalSlots:this._additionalSlots})}),r.for("dataDowncast").elementToStructure({model:{name:"table",attributes:["headingRows"]},view:HR(o,{additionalSlots:this._additionalSlots})}),r.for("upcast").elementToElement({model:"tableRow",view:"tr"}),r.for("upcast").add(f8e()),r.for("downcast").elementToElement({model:"tableRow",view:b8e()}),r.for("upcast").elementToElement({model:"tableCell",view:"td"}),r.for("upcast").elementToElement({model:"tableCell",view:"th"}),r.for("upcast").add(zR("td")),r.for("upcast").add(zR("th")),r.for("editingDowncast").elementToElement({model:"tableCell",view:UR({asWidget:!0})}),r.for("dataDowncast").elementToElement({model:"tableCell",view:UR()}),r.for("editingDowncast").elementToElement({model:"paragraph",view:WR({asWidget:!0}),converterPriority:"high"}),r.for("dataDowncast").elementToElement({model:"paragraph",view:WR(),converterPriority:"high"}),r.for("downcast").attributeToAttribute({model:"colspan",view:"colspan"}),r.for("upcast").attributeToAttribute({model:{key:"colspan",value:QR("colspan")},view:"colspan"}),r.for("downcast").attributeToAttribute({model:"rowspan",view:"rowspan"}),r.for("upcast").attributeToAttribute({model:{key:"rowspan",value:QR("rowspan")},view:"rowspan"}),e.config.define("table.defaultHeadings.rows",0),e.config.define("table.defaultHeadings.columns",0),e.commands.add("insertTable",new y8e(e)),e.commands.add("insertTableRowAbove",new jR(e,{order:"above"})),e.commands.add("insertTableRowBelow",new jR(e,{order:"below"})),e.commands.add("insertTableColumnLeft",new qR(e,{order:"left"})),e.commands.add("insertTableColumnRight",new qR(e,{order:"right"})),e.commands.add("removeTableRow",new x8e(e)),e.commands.add("removeTableColumn",new I8e(e)),e.commands.add("splitTableCellVertically",new KR(e,{direction:"vertically"})),e.commands.add("splitTableCellHorizontally",new KR(e,{direction:"horizontally"})),e.commands.add("mergeTableCells",new X8e(e)),e.commands.add("mergeTableCellRight",new Nv(e,{direction:"right"})),e.commands.add("mergeTableCellLeft",new Nv(e,{direction:"left"})),e.commands.add("mergeTableCellDown",new Nv(e,{direction:"down"})),e.commands.add("mergeTableCellUp",new Nv(e,{direction:"up"})),e.commands.add("setTableColumnHeader",new O8e(e)),e.commands.add("setTableRowHeader",new P8e(e)),e.commands.add("selectTableRow",new e9e(e)),e.commands.add("selectTableColumn",new t9e(e)),n9e(i),c9e(i),this.listenTo(i.document,"change:data",()=>{f9e(i,e.editing),m9e(i,e.editing)})}registerAdditionalSlot(e){this._additionalSlots.push(e)}}function QR(t){return n=>{const e=parseInt(n.getAttribute(t));return Number.isNaN(e)||e<=0?null:e}}class eM extends Rt{constructor(e){super(e);w(this,"items");w(this,"keystrokes");w(this,"focusTracker");const i=this.bindTemplate;this.items=this._createGridCollection(),this.keystrokes=new Zi,this.focusTracker=new Bi,this.set("rows",0),this.set("columns",0),this.bind("label").to(this,"columns",this,"rows",(s,r)=>`${r} × ${s}`),this.setTemplate({tag:"div",attributes:{class:["ck"]},children:[{tag:"div",attributes:{class:["ck-insert-table-dropdown__grid"]},on:{"mouseover@.ck-insert-table-dropdown-grid-box":i.to("boxover")},children:this.items},{tag:"div",attributes:{class:["ck","ck-insert-table-dropdown__label"],"aria-hidden":!0},children:[{text:i.to("label")}]}],on:{mousedown:i.to(s=>{s.preventDefault()}),click:i.to(()=>{this.fire("execute")})}}),this.on("boxover",(s,r)=>{const{row:o,column:a}=r.target.dataset;this.items.get((parseInt(o,10)-1)*10+(parseInt(a,10)-1)).focus()}),this.focusTracker.on("change:focusedElement",(s,r,o)=>{if(!o)return;const{row:a,column:l}=o.dataset;this.set({rows:parseInt(a),columns:parseInt(l)})}),this.on("change:columns",()=>this._highlightGridBoxes()),this.on("change:rows",()=>this._highlightGridBoxes())}render(){super.render(),Xw({keystrokeHandler:this.keystrokes,focusTracker:this.focusTracker,gridItems:this.items,numberOfColumns:10,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection});for(const e of this.items)this.focusTracker.add(e.element);this.keystrokes.listenTo(this.element)}reset(){this.set({rows:1,columns:1})}focus(){this.items.get(0).focus()}focusLast(){this.items.get(0).focus()}_highlightGridBoxes(){const e=this.rows,i=this.columns;this.items.map((s,r)=>{const o=Math.floor(r/10),a=r%10,l=o<e&&a<i;s.set("isOn",l)})}_createGridButton(e,i,s,r){const o=new Yt(e);return o.set({label:r,class:"ck-insert-table-dropdown-grid-box"}),o.extendTemplate({attributes:{"data-row":i,"data-column":s}}),o}_createGridCollection(){const e=[];for(let i=0;i<100;i++){const s=Math.floor(i/10),r=i%10,o=`${s+1} × ${r+1}`;e.push(this._createGridButton(this.locale,s+1,r+1,o))}return this.createCollection(e)}}var g9e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M18 7v1H2V7h16zm0 5v1H2v-1h16z" opacity=".6"/><path d="M14 1v18a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V1a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1zm-2 1H8v4h4V2zm0 6H8v4h4V8zm0 6H8v4h4v-4z"/></svg>',v9e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M7 2h1v16H7V2zm5 0h1v16h-1V2z" opacity=".6"/><path d="M1 6h18a1 1 0 0 1 1 1v6a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1zm1 2v4h4V8H2zm6 0v4h4V8H8zm6 0v4h4V8h-4z"/></svg>',b9e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M7 2h1v16H7V2zm5 0h1v7h-1V2zm6 5v1H2V7h16zM8 12v1H2v-1h6z" opacity=".6"/><path d="M7 7h12a1 1 0 0 1 1 1v11a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1zm1 2v9h10V9H8z"/></svg>';class _9e extends Be{static get pluginName(){return"TableUI"}init(){const n=this.editor,e=this.editor.t,s=n.locale.contentLanguageDirection==="ltr";n.ui.componentFactory.add("insertTable",r=>{const o=n.commands.get("insertTable"),a=Xs(r);a.bind("isEnabled").to(o),a.buttonView.set({icon:kt.table,label:e("Insert table"),tooltip:!0});let l;return a.on("change:isOpen",()=>{l||(l=new eM(r),a.panelView.children.add(l),l.delegate("execute").to(a),a.on("execute",()=>{n.execute("insertTable",{rows:l.rows,columns:l.columns}),n.editing.view.focus()}))}),a}),n.ui.componentFactory.add("menuBar:insertTable",r=>{const o=n.commands.get("insertTable"),a=new ko(r),l=new eM(r);return l.delegate("execute").to(a),a.on("change:isOpen",(c,u,d)=>{d||l.reset()}),l.on("execute",()=>{n.execute("insertTable",{rows:l.rows,columns:l.columns}),n.editing.view.focus()}),a.buttonView.set({label:e("Table"),icon:kt.table}),a.panelView.children.add(l),a.bind("isEnabled").to(o),a}),n.ui.componentFactory.add("tableColumn",r=>{const o=[{type:"switchbutton",model:{commandName:"setTableColumnHeader",label:e("Header column"),bindIsOn:!0}},{type:"separator"},{type:"button",model:{commandName:s?"insertTableColumnLeft":"insertTableColumnRight",label:e("Insert column left")}},{type:"button",model:{commandName:s?"insertTableColumnRight":"insertTableColumnLeft",label:e("Insert column right")}},{type:"button",model:{commandName:"removeTableColumn",label:e("Delete column")}},{type:"button",model:{commandName:"selectTableColumn",label:e("Select column")}}];return this._prepareDropdown(e("Column"),g9e,o,r)}),n.ui.componentFactory.add("tableRow",r=>{const o=[{type:"switchbutton",model:{commandName:"setTableRowHeader",label:e("Header row"),bindIsOn:!0}},{type:"separator"},{type:"button",model:{commandName:"insertTableRowAbove",label:e("Insert row above")}},{type:"button",model:{commandName:"insertTableRowBelow",label:e("Insert row below")}},{type:"button",model:{commandName:"removeTableRow",label:e("Delete row")}},{type:"button",model:{commandName:"selectTableRow",label:e("Select row")}}];return this._prepareDropdown(e("Row"),v9e,o,r)}),n.ui.componentFactory.add("mergeTableCells",r=>{const o=[{type:"button",model:{commandName:"mergeTableCellUp",label:e("Merge cell up")}},{type:"button",model:{commandName:s?"mergeTableCellRight":"mergeTableCellLeft",label:e("Merge cell right")}},{type:"button",model:{commandName:"mergeTableCellDown",label:e("Merge cell down")}},{type:"button",model:{commandName:s?"mergeTableCellLeft":"mergeTableCellRight",label:e("Merge cell left")}},{type:"separator"},{type:"button",model:{commandName:"splitTableCellVertically",label:e("Split cell vertically")}},{type:"button",model:{commandName:"splitTableCellHorizontally",label:e("Split cell horizontally")}}];return this._prepareMergeSplitButtonDropdown(e("Merge cells"),b9e,o,r)})}_prepareDropdown(n,e,i,s){const r=this.editor,o=Xs(s),a=this._fillDropdownWithListOptions(o,i);return o.buttonView.set({label:n,icon:e,tooltip:!0}),o.bind("isEnabled").toMany(a,"isEnabled",(...l)=>l.some(c=>c)),this.listenTo(o,"execute",l=>{r.execute(l.source.commandName),l.source instanceof bh||r.editing.view.focus()}),o}_prepareMergeSplitButtonDropdown(n,e,i,s){const r=this.editor,o=Xs(s,K1),a="mergeTableCells",l=r.commands.get(a),c=this._fillDropdownWithListOptions(o,i);return o.buttonView.set({label:n,icon:e,tooltip:!0,isEnabled:!0}),o.bind("isEnabled").toMany([l,...c],"isEnabled",(...u)=>u.some(d=>d)),this.listenTo(o.buttonView,"execute",()=>{r.execute(a),r.editing.view.focus()}),this.listenTo(o,"execute",u=>{r.execute(u.source.commandName),r.editing.view.focus()}),o}_fillDropdownWithListOptions(n,e){const i=this.editor,s=[],r=new _s;for(const o of e)w9e(o,i,s,r);return Ju(n,r),s}}function w9e(t,n,e,i){if(t.type==="button"||t.type==="switchbutton"){const s=t.model=new $u(t.model),{commandName:r,bindIsOn:o}=t.model,a=n.commands.get(r);e.push(a),s.set({commandName:r}),s.bind("isEnabled").to(a),o&&s.bind("isOn").to(a,"value"),s.set({withText:!0})}i.add(t)}class oh extends Be{static get pluginName(){return"TableSelection"}static get requires(){return[Ds,Ds]}init(){const n=this.editor,e=n.model,i=n.editing.view;this.listenTo(e,"deleteContent",(s,r)=>this._handleDeleteContent(s,r),{priority:"high"}),this.listenTo(i.document,"insertText",(s,r)=>this._handleInsertTextEvent(s,r),{priority:"high"}),this._defineSelectionConverter(),this._enablePluginDisabling()}getSelectedTableCells(){const n=this.editor.plugins.get(Ds),e=this.editor.model.document.selection,i=n.getSelectedTableCells(e);return i.length==0?null:i}getSelectionAsFragment(){const n=this.editor.plugins.get(Ds),e=this.getSelectedTableCells();return e?this.editor.model.change(i=>{const s=i.createDocumentFragment(),{first:r,last:o}=n.getColumnIndexes(e),{first:a,last:l}=n.getRowIndexes(e),c=e[0].findAncestor("table");let u=l,d=o;if(n.isSelectionRectangular(e)){const m={firstColumn:r,lastColumn:o,firstRow:a,lastRow:l};u=Rz(c,m),d=Mz(c,m)}const p=Ez(c,{startRow:a,startColumn:r,endRow:u,endColumn:d},i);return i.insert(p,s,0),s}):null}setCellSelection(n,e){const i=this._getCellsToSelect(n,e);this.editor.model.change(s=>{s.setSelection(i.cells.map(r=>s.createRangeOn(r)),{backward:i.backward})})}getFocusCell(){const i=[...this.editor.model.document.selection.getRanges()].pop().getContainedElement();return i&&i.is("element","tableCell")?i:null}getAnchorCell(){const n=this.editor.model.document.selection,i=bs(n.getRanges()).getContainedElement();return i&&i.is("element","tableCell")?i:null}_defineSelectionConverter(){const n=this.editor,e=new Set;n.conversion.for("editingDowncast").add(s=>s.on("selection",(r,o,a)=>{const l=a.writer;i(l);const c=this.getSelectedTableCells();if(!c)return;for(const d of c){const f=a.mapper.toViewElement(d);l.addClass("ck-editor__editable_selected",f),e.add(f)}const u=a.mapper.toViewElement(c[c.length-1]);l.setSelection(u,0)},{priority:"lowest"}));function i(s){for(const r of e)s.removeClass("ck-editor__editable_selected",r);e.clear()}}_enablePluginDisabling(){const n=this.editor;this.on("change:isEnabled",()=>{if(!this.isEnabled){const e=this.getSelectedTableCells();if(!e)return;n.model.change(i=>{const s=i.createPositionAt(e[0],0),r=n.model.schema.getNearestSelectionRange(s);i.setSelection(r)})}})}_handleDeleteContent(n,e){const i=this.editor.plugins.get(Ds),s=e[0],r=e[1],o=this.editor.model,a=!r||r.direction=="backward",l=i.getSelectedTableCells(s);l.length&&(n.stop(),o.change(c=>{const u=l[a?l.length-1:0];o.change(f=>{for(const p of l)o.deleteContent(f.createSelection(p,"in"))});const d=o.schema.getNearestSelectionRange(c.createPositionAt(u,0));s.is("documentSelection")?c.setSelection(d):s.setTo(d)}))}_handleInsertTextEvent(n,e){const i=this.editor,s=this.getSelectedTableCells();if(!s)return;const r=i.editing.view,o=i.editing.mapper,a=s.map(l=>r.createRangeOn(o.toViewElement(l)));e.selection=r.createSelection(a)}_getCellsToSelect(n,e){const i=this.editor.plugins.get("TableUtils"),s=i.getCellLocation(n),r=i.getCellLocation(e),o=Math.min(s.row,r.row),a=Math.max(s.row,r.row),l=Math.min(s.column,r.column),c=Math.max(s.column,r.column),u=new Array(a-o+1).fill(null).map(()=>[]),d={startRow:o,endRow:a,startColumn:l,endColumn:c};for(const{row:m,cell:v}of new di(n.findAncestor("table"),d))u[m-o].push(v);const f=r.row<s.row,p=r.column<s.column;return f&&u.reverse(),p&&u.forEach(m=>m.reverse()),{cells:u.flat(),backward:f||p}}}class y9e extends Be{static get pluginName(){return"TableClipboard"}static get requires(){return[xg,da,oh,Ds]}init(){const n=this.editor,e=n.editing.view.document;this.listenTo(e,"copy",(i,s)=>this._onCopyCut(i,s)),this.listenTo(e,"cut",(i,s)=>this._onCopyCut(i,s)),this.listenTo(n.model,"insertContent",(i,[s,r])=>this._onInsertContent(i,s,r),{priority:"high"}),this.decorate("_replaceTableSlotCell")}_onCopyCut(n,e){const i=this.editor.editing.view,s=this.editor.plugins.get(oh),r=this.editor.plugins.get(xg);s.getSelectedTableCells()&&(n.name=="cut"&&!this.editor.model.canEditAt(this.editor.model.document.selection)||(e.preventDefault(),n.stop(),this.editor.model.enqueueChange({isUndoable:n.name==="cut"},()=>{const o=r._copySelectedFragmentWithMarkers(n.name,this.editor.model.document.selection,()=>s.getSelectionAsFragment());i.document.fire("clipboardOutput",{dataTransfer:e.dataTransfer,content:this.editor.data.toView(o),method:n.name})})))}_onInsertContent(n,e,i){if(i&&!i.is("documentSelection"))return;const s=this.editor.model,r=this.editor.plugins.get(Ds),o=this.editor.plugins.get(xg),a=this.getTableIfOnlyTableInContent(e,s);if(!a)return;const l=r.getSelectionAffectedTableCells(s.document.selection);if(!l.length){_S(a,r);return}n.stop(),e.is("documentFragment")?o._pasteMarkersIntoTransformedElement(e.markers,c=>this._replaceSelectedCells(a,l,c)):this.editor.model.change(c=>{this._replaceSelectedCells(a,l,c)})}_replaceSelectedCells(n,e,i){const s=this.editor.plugins.get(Ds),r={width:s.getColumns(n),height:s.getRows(n)},o=C9e(e,r,i,s),a=o.lastRow-o.firstRow+1,l=o.lastColumn-o.firstColumn+1,c={startRow:0,startColumn:0,endRow:Math.min(a,r.height)-1,endColumn:Math.min(l,r.width)-1};n=Ez(n,c,i);const u=e[0].findAncestor("table"),d=this._replaceSelectedCellsWithPasted(n,r,u,o,i);if(this.editor.plugins.get("TableSelection").isEnabled){const f=s.sortRanges(d.map(p=>i.createRangeOn(p)));i.setSelection(f)}else i.setSelection(d[0],0);return u}_replaceSelectedCellsWithPasted(n,e,i,s,r){const{width:o,height:a}=e,l=E9e(n,o,a),c=[...new di(i,{startRow:s.firstRow,endRow:s.lastRow,startColumn:s.firstColumn,endColumn:s.lastColumn,includeAllSlots:!0})],u=[];let d;for(const y of c){const{row:_,column:b}=y;b===s.firstColumn&&(d=y.getPositionBefore());const E=_-s.firstRow,x=b-s.firstColumn,A=l[E%a][x%o],I=A?r.cloneElement(A):null,k=this._replaceTableSlotCell(y,I,d,r);k&&(Iz(k,_,b,s.lastRow,s.lastColumn,r),u.push(k),d=r.createPositionAfter(k))}const f=parseInt(i.getAttribute("headingRows")||"0"),p=parseInt(i.getAttribute("headingColumns")||"0"),m=s.firstRow<f&&f<=s.lastRow,v=s.firstColumn<p&&p<=s.lastColumn;if(m){const y={first:s.firstColumn,last:s.lastColumn},_=kk(i,f,y,r,s.firstRow);u.push(..._)}if(v){const y={first:s.firstRow,last:s.lastRow},_=Ek(i,p,y,r);u.push(..._)}return u}_replaceTableSlotCell(n,e,i,s){const{cell:r,isAnchor:o}=n;return o&&s.remove(r),e?(s.insert(e,i),e):null}getTableIfOnlyTableInContent(n,e){if(!n.is("documentFragment")&&!n.is("element"))return null;if(n.is("element","table"))return n;if(n.childCount==1&&n.getChild(0).is("element","table"))return n.getChild(0);const i=e.createRangeIn(n);for(const s of i.getItems())if(s.is("element","table")){const r=e.createRange(i.start,e.createPositionBefore(s));if(e.hasContent(r,{ignoreWhitespaces:!0}))return null;const o=e.createRange(e.createPositionAfter(s),i.end);return e.hasContent(o,{ignoreWhitespaces:!0})?null:s}return null}}function C9e(t,n,e,i){const s=t[0].findAncestor("table"),r=i.getColumnIndexes(t),o=i.getRowIndexes(t),a={firstColumn:r.first,lastColumn:r.last,firstRow:o.first,lastRow:o.last},l=t.length===1;return l&&(a.lastRow+=n.height-1,a.lastColumn+=n.width-1,k9e(s,a.lastRow+1,a.lastColumn+1,i)),l||!i.isSelectionRectangular(t)?S9e(s,a,e):(a.lastRow=Rz(s,a),a.lastColumn=Mz(s,a)),a}function k9e(t,n,e,i){const s=i.getColumns(t),r=i.getRows(t);e>s&&i.insertColumns(t,{at:s,columns:e-s}),n>r&&i.insertRows(t,{at:r,rows:n-r})}function E9e(t,n,e){const i=new Array(e).fill(null).map(()=>new Array(n).fill(null));for(const{column:s,row:r,cell:o}of new di(t))i[r][s]=o;return i}function S9e(t,n,e){const{firstRow:i,lastRow:s,firstColumn:r,lastColumn:o}=n,a={first:i,last:s},l={first:r,last:o};Ek(t,r,a,e),Ek(t,o+1,a,e),kk(t,i,l,e),kk(t,s+1,l,e,i)}function kk(t,n,e,i,s=0){return n<1?void 0:Sz(t,n,s).filter(({column:a,cellWidth:l})=>Bz(a,l,e)).map(({cell:a})=>Tz(a,n,i))}function Ek(t,n,e,i){return n<1?void 0:xz(t,n).filter(({row:o,cellHeight:a})=>Bz(o,a,e)).map(({cell:o,column:a})=>Az(o,a,n,i))}function Bz(t,n,e){const i=t+n-1,{first:s,last:r}=e,o=t>=s&&t<=r,a=t<s&&i>=s;return o||a}class T9e extends Be{static get pluginName(){return"TableKeyboard"}static get requires(){return[oh,Ds]}init(){const n=this.editor,i=n.editing.view.document,s=n.t;this.listenTo(i,"arrowKey",(...r)=>this._onArrowKey(...r),{context:"table"}),this.listenTo(i,"tab",(...r)=>this._handleTabOnSelectedTable(...r),{context:"figure"}),this.listenTo(i,"tab",(...r)=>this._handleTab(...r),{context:["th","td"]}),n.accessibility.addKeystrokeInfoGroup({id:"table",label:s("Keystrokes that can be used in a table cell"),keystrokes:[{label:s("Move the selection to the next cell"),keystroke:"Tab"},{label:s("Move the selection to the previous cell"),keystroke:"Shift+Tab"},{label:s("Insert a new table row (when in the last cell of a table)"),keystroke:"Tab"},{label:s("Navigate through the table"),keystroke:[["arrowup"],["arrowright"],["arrowdown"],["arrowleft"]]}]})}_handleTabOnSelectedTable(n,e){const i=this.editor,r=i.model.document.selection.getSelectedElement();!r||!r.is("element","table")||(e.preventDefault(),e.stopPropagation(),n.stop(),i.model.change(o=>{o.setSelection(o.createRangeIn(r.getChild(0).getChild(0)))}))}_handleTab(n,e){const i=this.editor,s=this.editor.plugins.get(Ds),r=this.editor.plugins.get("TableSelection"),o=i.model.document.selection,a=!e.shiftKey;let l=s.getTableCellsContainingSelection(o)[0];if(l||(l=r.getFocusCell()),!l)return;e.preventDefault(),e.stopPropagation(),n.stop();const c=l.parent,u=c.parent,d=u.getChildIndex(c),f=c.getChildIndex(l),p=f===0;if(!a&&p&&d===0){i.model.change(_=>{_.setSelection(_.createRangeOn(u))});return}const m=f===c.childCount-1,v=d===s.getRows(u)-1;if(a&&v&&m&&(i.execute("insertTableRowBelow"),d===s.getRows(u)-1)){i.model.change(_=>{_.setSelection(_.createRangeOn(u))});return}let y;if(a&&m)y=u.getChild(d+1).getChild(0);else if(!a&&p){const _=u.getChild(d-1);y=_.getChild(_.childCount-1)}else y=c.getChild(f+(a?1:-1));i.model.change(_=>{_.setSelection(_.createRangeIn(y))})}_onArrowKey(n,e){const i=this.editor,s=e.keyCode,r=Uw(s,i.locale.contentLanguageDirection);this._handleArrowKeys(r,e.shiftKey)&&(e.preventDefault(),e.stopPropagation(),n.stop())}_handleArrowKeys(n,e){const i=this.editor.plugins.get(Ds),s=this.editor.plugins.get("TableSelection"),r=this.editor.model,o=r.document.selection,a=["right","down"].includes(n),l=i.getSelectedTableCells(o);if(l.length){let u;return e?u=s.getFocusCell():u=a?l[l.length-1]:l[0],this._navigateFromCellInDirection(u,n,e),!0}const c=o.focus.findAncestor("tableCell");/* istanbul ignore if: paranoid check -- @preserve */if(!c)return!1;if(!o.isCollapsed)if(e){if(o.isBackward==a&&!o.containsEntireContent(c))return!1}else{const u=o.getSelectedElement();if(!u||!r.schema.isObject(u))return!1}return this._isSelectionAtCellEdge(o,c,a)?(this._navigateFromCellInDirection(c,n,e),!0):!1}_isSelectionAtCellEdge(n,e,i){const s=this.editor.model,r=this.editor.model.schema,o=i?n.getLastPosition():n.getFirstPosition();if(!r.getLimitElement(o).is("element","tableCell"))return s.createPositionAt(e,i?"end":0).isTouching(o);const a=s.createSelection(o);return s.modifySelection(a,{direction:i?"forward":"backward"}),o.isEqual(a.focus)}_navigateFromCellInDirection(n,e,i=!1){const s=this.editor.model,r=n.findAncestor("table"),o=[...new di(r,{includeAllSlots:!0})],{row:a,column:l}=o[o.length-1],c=o.find(({cell:b})=>b==n);let{row:u,column:d}=c;switch(e){case"left":d--;break;case"up":u--;break;case"right":d+=c.cellWidth;break;case"down":u+=c.cellHeight;break}const f=u<0||u>a,p=d<0&&u<=0,m=d>l&&u>=a;if(f||p||m){s.change(b=>{b.setSelection(b.createRangeOn(r))});return}d<0?(d=i?0:l,u--):d>l&&(d=i?l:0,u++);const v=o.find(b=>b.row==u&&b.column==d).cell,y=["right","down"].includes(e),_=this.editor.plugins.get("TableSelection");if(i&&_.isEnabled){const b=_.getAnchorCell()||n;_.setCellSelection(b,v)}else{const b=s.createPositionAt(v,y?0:"end");s.change(E=>{E.setSelection(b)})}}}class Fz extends Oc{constructor(){super(...arguments);w(this,"domEventType",["mousemove","mouseleave"])}onDomEvent(e){this.fire(e.type,e)}}class x9e extends Be{static get pluginName(){return"TableMouse"}static get requires(){return[oh,Ds]}init(){this.editor.editing.view.addObserver(Fz),this._enableShiftClickSelection(),this._enableMouseDragSelection()}_enableShiftClickSelection(){const n=this.editor,e=n.plugins.get(Ds);let i=!1;const s=n.plugins.get(oh);this.listenTo(n.editing.view.document,"mousedown",(r,o)=>{const a=n.model.document.selection;if(!this.isEnabled||!s.isEnabled||!o.domEvent.shiftKey)return;const l=s.getAnchorCell()||e.getTableCellsContainingSelection(a)[0];if(!l)return;const c=this._getModelTableCellFromDomEvent(o);c&&tM(l,c)&&(i=!0,s.setCellSelection(l,c),o.preventDefault())}),this.listenTo(n.editing.view.document,"mouseup",()=>{i=!1}),this.listenTo(n.editing.view.document,"selectionChange",r=>{i&&r.stop()},{priority:"highest"})}_enableMouseDragSelection(){const n=this.editor;let e,i,s=!1,r=!1;const o=n.plugins.get(oh);this.listenTo(n.editing.view.document,"mousedown",(a,l)=>{!this.isEnabled||!o.isEnabled||l.domEvent.shiftKey||l.domEvent.ctrlKey||l.domEvent.altKey||(e=this._getModelTableCellFromDomEvent(l))}),this.listenTo(n.editing.view.document,"mousemove",(a,l)=>{if(!l.domEvent.buttons||!e)return;const c=this._getModelTableCellFromDomEvent(l);c&&tM(e,c)&&(i=c,!s&&i!=e&&(s=!0)),s&&(r=!0,o.setCellSelection(e,i),l.preventDefault())}),this.listenTo(n.editing.view.document,"mouseup",()=>{s=!1,r=!1,e=null,i=null}),this.listenTo(n.editing.view.document,"selectionChange",a=>{r&&a.stop()},{priority:"highest"})}_getModelTableCellFromDomEvent(n){const e=n.target,i=this.editor.editing.view.createPositionAt(e,0);return this.editor.editing.mapper.toModelPosition(i).parent.findAncestor("tableCell",{includeSelf:!0})}}function tM(t,n){return t.parent.parent==n.parent.parent}class A9e extends Be{static get requires(){return[Q1,_9e,oh,x9e,T9e,y9e,Fm]}static get pluginName(){return"Table"}}function Nz(t){const n=Vz(t);return n||cy(t)}function Vz(t){const n=t.getSelectedElement();return n&&Dz(n)?n:null}function cy(t){const n=t.getFirstPosition();if(!n)return null;let e=n.parent;for(;e;){if(e.is("element")&&Dz(e))return e;e=e.parent}return null}function Dz(t){return!!t.getCustomProperty("table")&&ps(t)}class I9e extends Be{static get requires(){return[R_]}static get pluginName(){return"TableToolbar"}afterInit(){const n=this.editor,e=n.t,i=n.plugins.get(R_),s=n.config.get("table.contentToolbar"),r=n.config.get("table.tableToolbar");s&&i.register("tableContent",{ariaLabel:e("Table toolbar"),items:s,getRelatedElement:cy}),r&&i.register("table",{ariaLabel:e("Table toolbar"),items:r,getRelatedElement:Vz})}}class R9e extends Rt{constructor(e,i){super(e);w(this,"options");w(this,"focusTracker");w(this,"focusCycler");w(this,"_focusables");w(this,"dropdownView");w(this,"inputView");w(this,"keystrokes");w(this,"_stillTyping");this.set("value",""),this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("isEmpty",!0),this.options=i,this.focusTracker=new Bi,this._focusables=new Us,this.dropdownView=this._createDropdownView(),this.inputView=this._createInputTextView(),this.keystrokes=new Zi,this._stillTyping=!1,this.focusCycler=new Js({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-input-color"]},children:[this.dropdownView,this.inputView]}),this.on("change:value",(s,r,o)=>this._setInputValue(o))}render(){super.render(),[this.inputView,this.dropdownView.buttonView].forEach(e=>{this.focusTracker.add(e.element),this._focusables.add(e)}),this.keystrokes.listenTo(this.element)}focus(e){e===-1?this.focusCycler.focusLast():this.focusCycler.focusFirst()}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createDropdownView(){const e=this.locale,i=e.t,s=this.bindTemplate,r=this._createColorSelector(e),o=Xs(e),a=new Rt;return a.setTemplate({tag:"span",attributes:{class:["ck","ck-input-color__button__preview"],style:{backgroundColor:s.to("value")}},children:[{tag:"span",attributes:{class:["ck","ck-input-color__button__preview__no-color-indicator",s.if("value","ck-hidden",l=>l!="")]}}]}),o.buttonView.extendTemplate({attributes:{class:"ck-input-color__button"}}),o.buttonView.children.add(a),o.buttonView.label=i("Color picker"),o.buttonView.tooltip=!0,o.panelPosition=e.uiLanguageDirection==="rtl"?"se":"sw",o.panelView.children.add(r),o.bind("isEnabled").to(this,"isReadOnly",l=>!l),o.on("change:isOpen",(l,c,u)=>{u&&(r.updateSelectedColors(),r.showColorGridsFragment())}),o}_createInputTextView(){const e=this.locale,i=new MD(e);return i.extendTemplate({on:{blur:i.bindTemplate.to("blur")}}),i.value=this.value,i.bind("isReadOnly","hasError").to(this),this.bind("isFocused","isEmpty").to(i),i.on("input",()=>{const s=i.element.value,r=this.options.colorDefinitions.find(o=>s===o.label);this._stillTyping=!0,this.value=r&&r.color||s}),i.on("blur",()=>{this._stillTyping=!1,this._setInputValue(i.element.value)}),i.delegate("input").to(this),i}_createColorSelector(e){const i=e.t,s=this.options.defaultColorValue||"",r=i(s?"Restore default":"Remove color"),o=new JE(e,{colors:this.options.colorDefinitions,columns:this.options.columns,removeButtonLabel:r,colorPickerLabel:i("Color picker"),colorPickerViewConfig:this.options.colorPickerConfig===!1?!1:{...this.options.colorPickerConfig,hideInput:!0}});o.appendUI(),o.on("execute",(l,c)=>{if(c.source==="colorPickerSaveButton"){this.dropdownView.isOpen=!1;return}this.value=c.value||s,this.fire("input"),c.source!=="colorPicker"&&(this.dropdownView.isOpen=!1)});let a=this.value;return o.on("colorPicker:cancel",()=>{this.value=a,this.fire("input"),this.dropdownView.isOpen=!1}),o.colorGridsFragmentView.colorPickerButtonView.on("execute",()=>{a=this.value}),o.bind("selectedColor").to(this,"value"),o}_setInputValue(e){if(!this._stillTyping){const i=nM(e),s=this.options.colorDefinitions.find(r=>i===nM(r.color));s?this.inputView.value=s.label:this.inputView.value=e||""}}}function nM(t){return t.replace(/([(,])\s+/g,"$1").replace(/^\s+|\s+(?=[),\s]|$)/g,"").replace(/,|\s/g," ")}const yS=t=>t==="";function CS(t){return{none:t("None"),solid:t("Solid"),dotted:t("Dotted"),dashed:t("Dashed"),double:t("Double"),groove:t("Groove"),ridge:t("Ridge"),inset:t("Inset"),outset:t("Outset")}}function $z(t){return t('The color is invalid. Try "#FF0000" or "rgb(255,0,0)" or "red".')}function zz(t){return t('The value is invalid. Try "10px" or "2em" or simply "2".')}function N_(t){return t=t.trim().toLowerCase(),yS(t)||tD(t)}function Ig(t){return t=t.trim(),yS(t)||Wz(t)||Yw(t)||nD(t)}function Hz(t){return t=t.trim(),yS(t)||Wz(t)||Yw(t)}function Uz(t,n){const e=new _s,i=CS(t.t);for(const s in i){const r={type:"button",model:new $u({_borderStyleValue:s,label:i[s],role:"menuitemradio",withText:!0})};s==="none"?r.model.bind("isOn").to(t,"borderStyle",o=>n==="none"?!o:o===s):r.model.bind("isOn").to(t,"borderStyle",o=>o===s),e.add(r)}return e}function Sk(t){const{view:n,icons:e,toolbar:i,labels:s,propertyName:r,nameToValue:o,defaultValue:a}=t;for(const l in s){const c=new Yt(n.locale);c.set({label:s[l],icon:e[l],tooltip:s[l]});const u=o?o(l):l;c.bind("isOn").to(n,r,d=>{let f=d;return d===""&&a&&(f=a),u===f}),c.on("execute",()=>{n[r]=u}),i.items.add(c)}}const V_=[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}];function D_(t){return(n,e,i)=>{const s=new R9e(n.locale,{colorDefinitions:M9e(t.colorConfig),columns:t.columns,defaultColorValue:t.defaultColorValue,colorPickerConfig:t.colorPickerConfig});return s.inputView.set({id:e,ariaDescribedById:i}),s.bind("isReadOnly").to(n,"isEnabled",r=>!r),s.bind("hasError").to(n,"errorText",r=>!!r),s.on("input",()=>{n.errorText=null}),n.bind("isEmpty","isFocused").to(s),s}}function Wz(t){const n=parseFloat(t);return!Number.isNaN(n)&&t===String(n)}function M9e(t){return t.map(n=>({color:n.model,label:n.label,options:{hasBorder:n.hasBorder}}))}class fo extends Rt{constructor(e,i={}){super(e);w(this,"children");const s=this.bindTemplate;this.set("class",i.class||null),this.children=this.createCollection(),i.children&&i.children.forEach(r=>this.children.add(r)),this.set("_role",null),this.set("_ariaLabelledBy",null),i.labelView&&this.set({_role:"group",_ariaLabelledBy:i.labelView.id}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-form__row",s.to("class")],role:s.to("_role"),"aria-labelledby":s.to("_ariaLabelledBy")},children:this.children})}}class P9e extends Rt{constructor(e,i){super(e);w(this,"options");w(this,"focusTracker");w(this,"keystrokes");w(this,"children");w(this,"borderStyleDropdown");w(this,"borderWidthInput");w(this,"borderColorInput");w(this,"backgroundInput");w(this,"paddingInput");w(this,"widthInput");w(this,"heightInput");w(this,"horizontalAlignmentToolbar");w(this,"verticalAlignmentToolbar");w(this,"saveButtonView");w(this,"cancelButtonView");w(this,"_focusables");w(this,"_focusCycler");this.set({borderStyle:"",borderWidth:"",borderColor:"",padding:"",backgroundColor:"",width:"",height:"",horizontalAlignment:"",verticalAlignment:""}),this.options=i;const{borderStyleDropdown:s,borderWidthInput:r,borderColorInput:o,borderRowLabel:a}=this._createBorderFields(),{backgroundRowLabel:l,backgroundInput:c}=this._createBackgroundFields(),{widthInput:u,operatorLabel:d,heightInput:f,dimensionsLabel:p}=this._createDimensionFields(),{horizontalAlignmentToolbar:m,verticalAlignmentToolbar:v,alignmentLabel:y}=this._createAlignmentFields();this.focusTracker=new Bi,this.keystrokes=new Zi,this.children=this.createCollection(),this.borderStyleDropdown=s,this.borderWidthInput=r,this.borderColorInput=o,this.backgroundInput=c,this.paddingInput=this._createPaddingField(),this.widthInput=u,this.heightInput=f,this.horizontalAlignmentToolbar=m,this.verticalAlignmentToolbar=v;const{saveButtonView:_,cancelButtonView:b}=this._createActionButtons();this.saveButtonView=_,this.cancelButtonView=b,this._focusables=new Us,this._focusCycler=new Js({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.children.add(new Jw(e,{label:this.t("Cell properties")})),this.children.add(new fo(e,{labelView:a,children:[a,s,o,r],class:"ck-table-form__border-row"})),this.children.add(new fo(e,{labelView:l,children:[l,c],class:"ck-table-form__background-row"})),this.children.add(new fo(e,{children:[new fo(e,{labelView:p,children:[p,u,d,f],class:"ck-table-form__dimensions-row"}),new fo(e,{children:[this.paddingInput],class:"ck-table-cell-properties-form__padding-row"})]})),this.children.add(new fo(e,{labelView:y,children:[y,m,v],class:"ck-table-cell-properties-form__alignment-row"})),this.children.add(new fo(e,{children:[this.saveButtonView,this.cancelButtonView],class:"ck-table-form__action-row"})),this.setTemplate({tag:"form",attributes:{class:["ck","ck-form","ck-table-form","ck-table-cell-properties-form"],tabindex:"-1"},children:this.children})}render(){super.render(),Ih({view:this}),[this.borderColorInput,this.backgroundInput].forEach(e=>{this._focusCycler.chain(e.fieldView.focusCycler)}),[this.borderStyleDropdown,this.borderColorInput,this.borderWidthInput,this.backgroundInput,this.widthInput,this.heightInput,this.paddingInput,this.horizontalAlignmentToolbar,this.verticalAlignmentToolbar,this.saveButtonView,this.cancelButtonView].forEach(e=>{this._focusables.add(e),this.focusTracker.add(e.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createBorderFields(){const e=this.options.defaultTableCellProperties,i={style:e.borderStyle,width:e.borderWidth,color:e.borderColor},s=D_({colorConfig:this.options.borderColors,columns:5,defaultColorValue:i.color,colorPickerConfig:this.options.colorPickerConfig}),r=this.locale,o=this.t,a=o("Style"),l=new Pa(r);l.text=o("Border");const c=CS(o),u=new ms(r,XE);u.set({label:a,class:"ck-table-form__border-style"}),u.fieldView.buttonView.set({ariaLabel:a,ariaLabelledBy:void 0,isOn:!1,withText:!0,tooltip:a}),u.fieldView.buttonView.bind("label").to(this,"borderStyle",p=>c[p||"none"]),u.fieldView.on("execute",p=>{this.borderStyle=p.source._borderStyleValue}),u.bind("isEmpty").to(this,"borderStyle",p=>!p),Ju(u.fieldView,Uz(this,i.style),{role:"menu",ariaLabel:a});const d=new ms(r,Jo);d.set({label:o("Width"),class:"ck-table-form__border-width"}),d.fieldView.bind("value").to(this,"borderWidth"),d.bind("isEnabled").to(this,"borderStyle",Vv),d.fieldView.on("input",()=>{this.borderWidth=d.fieldView.element.value});const f=new ms(r,s);return f.set({label:o("Color"),class:"ck-table-form__border-color"}),f.fieldView.bind("value").to(this,"borderColor"),f.bind("isEnabled").to(this,"borderStyle",Vv),f.fieldView.on("input",()=>{this.borderColor=f.fieldView.value}),this.on("change:borderStyle",(p,m,v,y)=>{Vv(v)||(this.borderColor="",this.borderWidth=""),Vv(y)||(this.borderColor=i.color,this.borderWidth=i.width)}),{borderRowLabel:l,borderStyleDropdown:u,borderColorInput:f,borderWidthInput:d}}_createBackgroundFields(){const e=this.locale,i=this.t,s=new Pa(e);s.text=i("Background");const r=D_({colorConfig:this.options.backgroundColors,columns:5,defaultColorValue:this.options.defaultTableCellProperties.backgroundColor,colorPickerConfig:this.options.colorPickerConfig}),o=new ms(e,r);return o.set({label:i("Color"),class:"ck-table-cell-properties-form__background"}),o.fieldView.bind("value").to(this,"backgroundColor"),o.fieldView.on("input",()=>{this.backgroundColor=o.fieldView.value}),{backgroundRowLabel:s,backgroundInput:o}}_createDimensionFields(){const e=this.locale,i=this.t,s=new Pa(e);s.text=i("Dimensions");const r=new ms(e,Jo);r.set({label:i("Width"),class:"ck-table-form__dimensions-row__width"}),r.fieldView.bind("value").to(this,"width"),r.fieldView.on("input",()=>{this.width=r.fieldView.element.value});const o=new Rt(e);o.setTemplate({tag:"span",attributes:{class:["ck-table-form__dimension-operator"]},children:[{text:"×"}]});const a=new ms(e,Jo);return a.set({label:i("Height"),class:"ck-table-form__dimensions-row__height"}),a.fieldView.bind("value").to(this,"height"),a.fieldView.on("input",()=>{this.height=a.fieldView.element.value}),{dimensionsLabel:s,widthInput:r,operatorLabel:o,heightInput:a}}_createPaddingField(){const e=this.locale,i=this.t,s=new ms(e,Jo);return s.set({label:i("Padding"),class:"ck-table-cell-properties-form__padding"}),s.fieldView.bind("value").to(this,"padding"),s.fieldView.on("input",()=>{this.padding=s.fieldView.element.value}),s}_createAlignmentFields(){const e=this.locale,i=this.t,s=new Pa(e),r={left:kt.alignLeft,center:kt.alignCenter,right:kt.alignRight,justify:kt.alignJustify,top:kt.alignTop,middle:kt.alignMiddle,bottom:kt.alignBottom};s.text=i("Table cell text alignment");const o=new _h(e),a=e.contentLanguageDirection==="rtl";o.set({isCompact:!0,ariaLabel:i("Horizontal text alignment toolbar")}),Sk({view:this,icons:r,toolbar:o,labels:this._horizontalAlignmentLabels,propertyName:"horizontalAlignment",nameToValue:c=>{if(a){if(c==="left")return"right";if(c==="right")return"left"}return c},defaultValue:this.options.defaultTableCellProperties.horizontalAlignment});const l=new _h(e);return l.set({isCompact:!0,ariaLabel:i("Vertical text alignment toolbar")}),Sk({view:this,icons:r,toolbar:l,labels:this._verticalAlignmentLabels,propertyName:"verticalAlignment",defaultValue:this.options.defaultTableCellProperties.verticalAlignment}),{horizontalAlignmentToolbar:o,verticalAlignmentToolbar:l,alignmentLabel:s}}_createActionButtons(){const e=this.locale,i=this.t,s=new Yt(e),r=new Yt(e),o=[this.borderWidthInput,this.borderColorInput,this.backgroundInput,this.paddingInput];return s.set({label:i("Save"),icon:kt.check,class:"ck-button-save",type:"submit",withText:!0}),s.bind("isEnabled").toMany(o,"errorText",(...a)=>a.every(l=>!l)),r.set({label:i("Cancel"),icon:kt.cancel,class:"ck-button-cancel",withText:!0}),r.delegate("execute").to(this,"cancel"),{saveButtonView:s,cancelButtonView:r}}get _horizontalAlignmentLabels(){const e=this.locale,i=this.t,s=i("Align cell text to the left"),r=i("Align cell text to the center"),o=i("Align cell text to the right"),a=i("Justify cell text");return e.uiLanguageDirection==="rtl"?{right:o,center:r,left:s,justify:a}:{left:s,center:r,right:o,justify:a}}get _verticalAlignmentLabels(){const e=this.t;return{top:e("Align cell text to the top"),middle:e("Align cell text to the middle"),bottom:e("Align cell text to the bottom")}}}function Vv(t){return t!=="none"}const Tk=[Vs.defaultPositions.northArrowSouth,Vs.defaultPositions.northArrowSouthWest,Vs.defaultPositions.northArrowSouthEast,Vs.defaultPositions.southArrowNorth,Vs.defaultPositions.southArrowNorthWest,Vs.defaultPositions.southArrowNorthEast,Vs.defaultPositions.viewportStickyNorth];function jz(t,n){const e=t.plugins.get("ContextualBalloon"),i=t.editing.view.document.selection;let s;n==="cell"?cy(i)&&(s=Kz(t)):Nz(i)&&(s=qz(t)),s&&e.updatePosition(s)}function qz(t){const n=t.model.document.selection,e=rh(n),i=t.editing.mapper.toViewElement(e);return{target:t.editing.view.domConverter.mapViewToDom(i),positions:Tk}}function Kz(t){const n=t.editing.mapper,e=t.editing.view.domConverter,i=t.model.document.selection;if(i.rangeCount>1)return{target:()=>O9e(i.getRanges(),t),positions:Tk};const s=Gz(i.getFirstPosition()),r=n.toViewElement(s);return{target:e.mapViewToDom(r),positions:Tk}}function Gz(t){return t.nodeAfter&&t.nodeAfter.is("element","tableCell")?t.nodeAfter:t.findAncestor("tableCell")}function O9e(t,n){const e=n.editing.mapper,i=n.editing.view.domConverter,s=Array.from(t).map(r=>{const o=Gz(r.start),a=e.toViewElement(o);return new mn(i.mapViewToDom(a))});return mn.getBoundingRect(s)}var L9e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.105 18-.17 1H2.5A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1h15A1.5 1.5 0 0 1 19 2.5v9.975l-.85-.124-.15-.302V8h-5v4h.021l-.172.351-1.916.28-.151.027c-.287.063-.54.182-.755.341L8 13v5h3.105zM2 12h5V8H2v4zm10-4H8v4h4V8zM2 2v5h5V2H2zm0 16h5v-5H2v5zM13 7h5V2h-5v5zM8 2v5h4V2H8z" opacity=".6"/><path d="m15.5 11.5 1.323 2.68 2.957.43-2.14 2.085.505 2.946L15.5 18.25l-2.645 1.39.505-2.945-2.14-2.086 2.957-.43L15.5 11.5zM13 6a1 1 0 0 1 1 1v3.172a2.047 2.047 0 0 0-.293.443l-.858 1.736-1.916.28-.151.027A1.976 1.976 0 0 0 9.315 14H7a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h6zm-1 2H8v4h4V8z"/></svg>';function Fh(t){if(!t||!Li(t))return t;const{top:n,right:e,bottom:i,left:s}=t;if(n==e&&e==i&&i==s)return n}function Nh(t,n){const e=parseFloat(t);return Number.isNaN(e)||String(e)!==String(t)?t:`${e}${n}`}function e0(t,n={}){const e={borderStyle:"none",borderWidth:"",borderColor:"",backgroundColor:"",width:"",height:"",...t};return n.includeAlignmentProperty&&!e.alignment&&(e.alignment="center"),n.includePaddingProperty&&!e.padding&&(e.padding=""),n.includeVerticalAlignmentProperty&&!e.verticalAlignment&&(e.verticalAlignment="middle"),n.includeHorizontalAlignmentProperty&&!e.horizontalAlignment&&(e.horizontalAlignment=n.isRightToLeftContent?"right":"left"),e}const B9e=500,iM={borderStyle:"tableCellBorderStyle",borderColor:"tableCellBorderColor",borderWidth:"tableCellBorderWidth",height:"tableCellHeight",width:"tableCellWidth",padding:"tableCellPadding",backgroundColor:"tableCellBackgroundColor",horizontalAlignment:"tableCellHorizontalAlignment",verticalAlignment:"tableCellVerticalAlignment"};class F9e extends Be{constructor(e){super(e);w(this,"_defaultTableCellProperties");w(this,"_balloon");w(this,"view");w(this,"_undoStepBatch");w(this,"_isReady");e.config.define("table.tableCellProperties",{borderColors:V_,backgroundColors:V_})}static get requires(){return[Mo]}static get pluginName(){return"TableCellPropertiesUI"}init(){const e=this.editor,i=e.t;this._defaultTableCellProperties=e0(e.config.get("table.tableCellProperties.defaultProperties"),{includeVerticalAlignmentProperty:!0,includeHorizontalAlignmentProperty:!0,includePaddingProperty:!0,isRightToLeftContent:e.locale.contentLanguageDirection==="rtl"}),this._balloon=e.plugins.get(Mo),this.view=null,this._isReady=!1,e.ui.componentFactory.add("tableCellProperties",s=>{const r=new Yt(s);r.set({label:i("Cell properties"),icon:L9e,tooltip:!0}),this.listenTo(r,"execute",()=>this._showView());const o=Object.values(iM).map(a=>e.commands.get(a));return r.bind("isEnabled").toMany(o,"isEnabled",(...a)=>a.some(l=>l)),r})}destroy(){super.destroy(),this.view&&this.view.destroy()}_createPropertiesView(){const e=this.editor,i=e.config.get("table.tableCellProperties"),s=h1(i.borderColors),r=d1(e.locale,s),o=h1(i.backgroundColors),a=d1(e.locale,o),l=i.colorPicker!==!1,c=new P9e(e.locale,{borderColors:r,backgroundColors:a,defaultTableCellProperties:this._defaultTableCellProperties,colorPickerConfig:l?i.colorPicker||{}:!1}),u=e.t;c.render(),this.listenTo(c,"submit",()=>{this._hideView()}),this.listenTo(c,"cancel",()=>{this._undoStepBatch.operations.length&&e.execute("undo",this._undoStepBatch),this._hideView()}),c.keystrokes.set("Esc",(p,m)=>{this._hideView(),m()}),Xu({emitter:c,activator:()=>this._isViewInBalloon,contextElements:[this._balloon.view.element],callback:()=>this._hideView()});const d=$z(u),f=zz(u);return c.on("change:borderStyle",this._getPropertyChangeCallback("tableCellBorderStyle")),c.on("change:borderColor",this._getValidatedPropertyChangeCallback({viewField:c.borderColorInput,commandName:"tableCellBorderColor",errorText:d,validator:N_})),c.on("change:borderWidth",this._getValidatedPropertyChangeCallback({viewField:c.borderWidthInput,commandName:"tableCellBorderWidth",errorText:f,validator:Hz})),c.on("change:padding",this._getValidatedPropertyChangeCallback({viewField:c.paddingInput,commandName:"tableCellPadding",errorText:f,validator:Ig})),c.on("change:width",this._getValidatedPropertyChangeCallback({viewField:c.widthInput,commandName:"tableCellWidth",errorText:f,validator:Ig})),c.on("change:height",this._getValidatedPropertyChangeCallback({viewField:c.heightInput,commandName:"tableCellHeight",errorText:f,validator:Ig})),c.on("change:backgroundColor",this._getValidatedPropertyChangeCallback({viewField:c.backgroundInput,commandName:"tableCellBackgroundColor",errorText:d,validator:N_})),c.on("change:horizontalAlignment",this._getPropertyChangeCallback("tableCellHorizontalAlignment")),c.on("change:verticalAlignment",this._getPropertyChangeCallback("tableCellVerticalAlignment")),c}_fillViewFormFromCommandValues(){const e=this.editor.commands,i=e.get("tableCellBorderStyle");Object.entries(iM).map(([s,r])=>{const o=this._defaultTableCellProperties[s]||"";return[s,e.get(r).value||o]}).forEach(([s,r])=>{(s==="borderColor"||s==="borderWidth")&&i.value==="none"||this.view.set(s,r)}),this._isReady=!0}_showView(){const e=this.editor;this.view||(this.view=this._createPropertiesView()),this.listenTo(e.ui,"update",()=>{this._updateView()}),this._fillViewFormFromCommandValues(),this._balloon.add({view:this.view,position:Kz(e)}),this._undoStepBatch=e.model.createBatch(),this.view.focus()}_hideView(){const e=this.editor;this.stopListening(e.ui,"update"),this._isReady=!1,this.view.saveButtonView.focus(),this._balloon.remove(this.view),this.editor.editing.view.focus()}_updateView(){const e=this.editor,i=e.editing.view.document;cy(i.selection)?this._isViewVisible&&jz(e,"cell"):this._hideView()}get _isViewVisible(){return!!this.view&&this._balloon.visibleView===this.view}get _isViewInBalloon(){return!!this.view&&this._balloon.hasView(this.view)}_getPropertyChangeCallback(e){return(i,s,r)=>{this._isReady&&this.editor.execute(e,{value:r,batch:this._undoStepBatch})}}_getValidatedPropertyChangeCallback(e){const{commandName:i,viewField:s,validator:r,errorText:o}=e,a=Ss(()=>{s.errorText=o},B9e);return(l,c,u)=>{a.cancel(),this._isReady&&(r(u)?(this.editor.execute(i,{value:u,batch:this._undoStepBatch}),s.errorText=null):a())}}}class Lc extends en{constructor(e,i,s){super(e);w(this,"attributeName");w(this,"_defaultValue");this.attributeName=i,this._defaultValue=s}refresh(){const e=this.editor,s=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(e.model.document.selection);this.isEnabled=!!s.length,this.value=this._getSingleValue(s)}execute(e={}){const{value:i,batch:s}=e,r=this.editor.model,a=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(r.document.selection),l=this._getValueToSet(i);r.enqueueChange(s,c=>{l?a.forEach(u=>c.setAttribute(this.attributeName,l,u)):a.forEach(u=>c.removeAttribute(this.attributeName,u))})}_getAttribute(e){if(!e)return;const i=e.getAttribute(this.attributeName);if(i!==this._defaultValue)return i}_getValueToSet(e){if(e!==this._defaultValue)return e}_getSingleValue(e){const i=this._getAttribute(e[0]);return e.every(r=>this._getAttribute(r)===i)?i:void 0}}class N9e extends Lc{constructor(n,e){super(n,"tableCellWidth",e)}_getValueToSet(n){if(n=Nh(n,"px"),n!==this._defaultValue)return n}}class Yz extends Be{static get pluginName(){return"TableCellWidthEditing"}static get requires(){return[Q1]}init(){const n=this.editor,e=e0(n.config.get("table.tableCellProperties.defaultProperties"));Vb(n.model.schema,n.conversion,{modelAttribute:"tableCellWidth",styleName:"width",defaultValue:e.width}),n.commands.add("tableCellWidth",new N9e(n,e.width))}}class V9e extends Lc{constructor(n,e){super(n,"tableCellPadding",e)}_getAttribute(n){if(!n)return;const e=Fh(n.getAttribute(this.attributeName));if(e!==this._defaultValue)return e}_getValueToSet(n){const e=Nh(n,"px");if(e!==this._defaultValue)return e}}class D9e extends Lc{constructor(n,e){super(n,"tableCellHeight",e)}_getValueToSet(n){const e=Nh(n,"px");if(e!==this._defaultValue)return e}}class $9e extends Lc{constructor(n,e){super(n,"tableCellBackgroundColor",e)}}class z9e extends Lc{constructor(n,e){super(n,"tableCellVerticalAlignment",e)}}class H9e extends Lc{constructor(n,e){super(n,"tableCellHorizontalAlignment",e)}}class U9e extends Lc{constructor(n,e){super(n,"tableCellBorderStyle",e)}_getAttribute(n){if(!n)return;const e=Fh(n.getAttribute(this.attributeName));if(e!==this._defaultValue)return e}}class W9e extends Lc{constructor(n,e){super(n,"tableCellBorderColor",e)}_getAttribute(n){if(!n)return;const e=Fh(n.getAttribute(this.attributeName));if(e!==this._defaultValue)return e}}class j9e extends Lc{constructor(n,e){super(n,"tableCellBorderWidth",e)}_getAttribute(n){if(!n)return;const e=Fh(n.getAttribute(this.attributeName));if(e!==this._defaultValue)return e}_getValueToSet(n){const e=Nh(n,"px");if(e!==this._defaultValue)return e}}const sM=/^(top|middle|bottom)$/,rM=/^(left|center|right|justify)$/;class q9e extends Be{static get pluginName(){return"TableCellPropertiesEditing"}static get requires(){return[Q1,Yz]}init(){const n=this.editor,e=n.model.schema,i=n.conversion;n.config.define("table.tableCellProperties.defaultProperties",{});const s=e0(n.config.get("table.tableCellProperties.defaultProperties"),{includeVerticalAlignmentProperty:!0,includeHorizontalAlignmentProperty:!0,includePaddingProperty:!0,isRightToLeftContent:n.locale.contentLanguageDirection==="rtl"});n.data.addStyleProcessorRules(sD),K9e(e,i,{color:s.borderColor,style:s.borderStyle,width:s.borderWidth}),n.commands.add("tableCellBorderStyle",new U9e(n,s.borderStyle)),n.commands.add("tableCellBorderColor",new W9e(n,s.borderColor)),n.commands.add("tableCellBorderWidth",new j9e(n,s.borderWidth)),Vb(e,i,{modelAttribute:"tableCellHeight",styleName:"height",defaultValue:s.height}),n.commands.add("tableCellHeight",new D9e(n,s.height)),n.data.addStyleProcessorRules(s2e),Vb(e,i,{modelAttribute:"tableCellPadding",styleName:"padding",reduceBoxSides:!0,defaultValue:s.padding}),n.commands.add("tableCellPadding",new V9e(n,s.padding)),n.data.addStyleProcessorRules(jE),Vb(e,i,{modelAttribute:"tableCellBackgroundColor",styleName:"background-color",defaultValue:s.backgroundColor}),n.commands.add("tableCellBackgroundColor",new $9e(n,s.backgroundColor)),G9e(e,i,s.horizontalAlignment),n.commands.add("tableCellHorizontalAlignment",new H9e(n,s.horizontalAlignment)),Y9e(e,i,s.verticalAlignment),n.commands.add("tableCellVerticalAlignment",new z9e(n,s.verticalAlignment))}}function K9e(t,n,e){const i={width:"tableCellBorderWidth",color:"tableCellBorderColor",style:"tableCellBorderStyle"};t.extend("tableCell",{allowAttributes:Object.values(i)}),gk(n,"td",i,e),gk(n,"th",i,e),Ag(n,{modelElement:"tableCell",modelAttribute:i.style,styleName:"border-style"}),Ag(n,{modelElement:"tableCell",modelAttribute:i.color,styleName:"border-color"}),Ag(n,{modelElement:"tableCell",modelAttribute:i.width,styleName:"border-width"})}function G9e(t,n,e){t.extend("tableCell",{allowAttributes:["tableCellHorizontalAlignment"]}),n.for("downcast").attributeToAttribute({model:{name:"tableCell",key:"tableCellHorizontalAlignment"},view:i=>({key:"style",value:{"text-align":i}})}),n.for("upcast").attributeToAttribute({view:{name:/^(td|th)$/,styles:{"text-align":rM}},model:{key:"tableCellHorizontalAlignment",value:i=>{const s=i.getStyle("text-align");return s===e?null:s}}}).attributeToAttribute({view:{name:/^(td|th)$/,attributes:{align:rM}},model:{key:"tableCellHorizontalAlignment",value:i=>{const s=i.getAttribute("align");return s===e?null:s}}})}function Y9e(t,n,e){t.extend("tableCell",{allowAttributes:["tableCellVerticalAlignment"]}),n.for("downcast").attributeToAttribute({model:{name:"tableCell",key:"tableCellVerticalAlignment"},view:i=>({key:"style",value:{"vertical-align":i}})}),n.for("upcast").attributeToAttribute({view:{name:/^(td|th)$/,styles:{"vertical-align":sM}},model:{key:"tableCellVerticalAlignment",value:i=>{const s=i.getStyle("vertical-align");return s===e?null:s}}}).attributeToAttribute({view:{name:/^(td|th)$/,attributes:{valign:sM}},model:{key:"tableCellVerticalAlignment",value:i=>{const s=i.getAttribute("valign");return s===e?null:s}}})}class Z9e extends Be{static get pluginName(){return"TableCellProperties"}static get requires(){return[q9e,F9e]}}class Vh extends en{constructor(e,i,s){super(e);w(this,"attributeName");w(this,"_defaultValue");this.attributeName=i,this._defaultValue=s}refresh(){const i=this.editor.model.document.selection,s=rh(i);this.isEnabled=!!s,this.value=this._getValue(s)}execute(e={}){const i=this.editor.model,s=i.document.selection,{value:r,batch:o}=e,a=rh(s),l=this._getValueToSet(r);i.enqueueChange(o,c=>{l?c.setAttribute(this.attributeName,l,a):c.removeAttribute(this.attributeName,a)})}_getValue(e){if(!e)return;const i=e.getAttribute(this.attributeName);if(i!==this._defaultValue)return i}_getValueToSet(e){if(e!==this._defaultValue)return e}}class X9e extends Vh{constructor(n,e){super(n,"tableBackgroundColor",e)}}class J9e extends Vh{constructor(n,e){super(n,"tableBorderColor",e)}_getValue(n){if(!n)return;const e=Fh(n.getAttribute(this.attributeName));if(e!==this._defaultValue)return e}}class Q9e extends Vh{constructor(n,e){super(n,"tableBorderStyle",e)}_getValue(n){if(!n)return;const e=Fh(n.getAttribute(this.attributeName));if(e!==this._defaultValue)return e}}class eIe extends Vh{constructor(n,e){super(n,"tableBorderWidth",e)}_getValue(n){if(!n)return;const e=Fh(n.getAttribute(this.attributeName));if(e!==this._defaultValue)return e}_getValueToSet(n){const e=Nh(n,"px");if(e!==this._defaultValue)return e}}class tIe extends Vh{constructor(n,e){super(n,"tableWidth",e)}_getValueToSet(n){if(n=Nh(n,"px"),n!==this._defaultValue)return n}}class nIe extends Vh{constructor(n,e){super(n,"tableHeight",e)}_getValueToSet(n){if(n=Nh(n,"px"),n!==this._defaultValue)return n}}class iIe extends Vh{constructor(n,e){super(n,"tableAlignment",e)}}const sIe=/^(left|center|right)$/,rIe=/^(left|none|right)$/;class oIe extends Be{static get pluginName(){return"TablePropertiesEditing"}static get requires(){return[Q1]}init(){const n=this.editor,e=n.model.schema,i=n.conversion;n.config.define("table.tableProperties.defaultProperties",{});const s=e0(n.config.get("table.tableProperties.defaultProperties"),{includeAlignmentProperty:!0});n.data.addStyleProcessorRules(sD),aIe(e,i,{color:s.borderColor,style:s.borderStyle,width:s.borderWidth}),n.commands.add("tableBorderColor",new J9e(n,s.borderColor)),n.commands.add("tableBorderStyle",new Q9e(n,s.borderStyle)),n.commands.add("tableBorderWidth",new eIe(n,s.borderWidth)),lIe(e,i,s.alignment),n.commands.add("tableAlignment",new iIe(n,s.alignment)),oM(e,i,{modelAttribute:"tableWidth",styleName:"width",defaultValue:s.width}),n.commands.add("tableWidth",new tIe(n,s.width)),oM(e,i,{modelAttribute:"tableHeight",styleName:"height",defaultValue:s.height}),n.commands.add("tableHeight",new nIe(n,s.height)),n.data.addStyleProcessorRules(jE),cIe(e,i,{modelAttribute:"tableBackgroundColor",styleName:"background-color",defaultValue:s.backgroundColor}),n.commands.add("tableBackgroundColor",new X9e(n,s.backgroundColor))}}function aIe(t,n,e){const i={width:"tableBorderWidth",color:"tableBorderColor",style:"tableBorderStyle"};t.extend("table",{allowAttributes:Object.values(i)}),gk(n,"table",i,e),Fb(n,{modelAttribute:i.color,styleName:"border-color"}),Fb(n,{modelAttribute:i.style,styleName:"border-style"}),Fb(n,{modelAttribute:i.width,styleName:"border-width"})}function lIe(t,n,e){t.extend("table",{allowAttributes:["tableAlignment"]}),n.for("downcast").attributeToAttribute({model:{name:"table",key:"tableAlignment"},view:i=>({key:"style",value:{float:i==="center"?"none":i}}),converterPriority:"high"}),n.for("upcast").attributeToAttribute({view:{name:/^(table|figure)$/,styles:{float:rIe}},model:{key:"tableAlignment",value:i=>{let s=i.getStyle("float");return s==="none"&&(s="center"),s===e?null:s}}}).attributeToAttribute({view:{attributes:{align:sIe}},model:{name:"table",key:"tableAlignment",value:i=>{const s=i.getAttribute("align");return s===e?null:s}}})}function cIe(t,n,e){const{modelAttribute:i}=e;t.extend("table",{allowAttributes:[i]}),bS(n,{viewElement:"table",...e}),Fb(n,e)}function oM(t,n,e){const{modelAttribute:i}=e;t.extend("table",{allowAttributes:[i]}),bS(n,{viewElement:/^(table|figure)$/,shouldUpcast:s=>!(s.name=="table"&&s.parent.name=="figure"),...e}),Ag(n,{modelElement:"table",...e})}class uIe extends Rt{constructor(e,i){super(e);w(this,"options");w(this,"focusTracker");w(this,"keystrokes");w(this,"children");w(this,"borderStyleDropdown");w(this,"borderWidthInput");w(this,"borderColorInput");w(this,"backgroundInput");w(this,"widthInput");w(this,"heightInput");w(this,"alignmentToolbar");w(this,"saveButtonView");w(this,"cancelButtonView");w(this,"_focusables");w(this,"_focusCycler");this.set({borderStyle:"",borderWidth:"",borderColor:"",backgroundColor:"",width:"",height:"",alignment:""}),this.options=i;const{borderStyleDropdown:s,borderWidthInput:r,borderColorInput:o,borderRowLabel:a}=this._createBorderFields(),{backgroundRowLabel:l,backgroundInput:c}=this._createBackgroundFields(),{widthInput:u,operatorLabel:d,heightInput:f,dimensionsLabel:p}=this._createDimensionFields(),{alignmentToolbar:m,alignmentLabel:v}=this._createAlignmentFields();this.focusTracker=new Bi,this.keystrokes=new Zi,this.children=this.createCollection(),this.borderStyleDropdown=s,this.borderWidthInput=r,this.borderColorInput=o,this.backgroundInput=c,this.widthInput=u,this.heightInput=f,this.alignmentToolbar=m;const{saveButtonView:y,cancelButtonView:_}=this._createActionButtons();this.saveButtonView=y,this.cancelButtonView=_,this._focusables=new Us,this._focusCycler=new Js({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.children.add(new Jw(e,{label:this.t("Table properties")})),this.children.add(new fo(e,{labelView:a,children:[a,s,o,r],class:"ck-table-form__border-row"})),this.children.add(new fo(e,{labelView:l,children:[l,c],class:"ck-table-form__background-row"})),this.children.add(new fo(e,{children:[new fo(e,{labelView:p,children:[p,u,d,f],class:"ck-table-form__dimensions-row"}),new fo(e,{labelView:v,children:[v,m],class:"ck-table-properties-form__alignment-row"})]})),this.children.add(new fo(e,{children:[this.saveButtonView,this.cancelButtonView],class:"ck-table-form__action-row"})),this.setTemplate({tag:"form",attributes:{class:["ck","ck-form","ck-table-form","ck-table-properties-form"],tabindex:"-1"},children:this.children})}render(){super.render(),Ih({view:this}),[this.borderColorInput,this.backgroundInput].forEach(e=>{this._focusCycler.chain(e.fieldView.focusCycler)}),[this.borderStyleDropdown,this.borderColorInput,this.borderWidthInput,this.backgroundInput,this.widthInput,this.heightInput,this.alignmentToolbar,this.saveButtonView,this.cancelButtonView].forEach(e=>{this._focusables.add(e),this.focusTracker.add(e.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createBorderFields(){const e=this.options.defaultTableProperties,i={style:e.borderStyle,width:e.borderWidth,color:e.borderColor},s=D_({colorConfig:this.options.borderColors,columns:5,defaultColorValue:i.color,colorPickerConfig:this.options.colorPickerConfig}),r=this.locale,o=this.t,a=o("Style"),l=new Pa(r);l.text=o("Border");const c=CS(o),u=new ms(r,XE);u.set({label:a,class:"ck-table-form__border-style"}),u.fieldView.buttonView.set({ariaLabel:a,ariaLabelledBy:void 0,isOn:!1,withText:!0,tooltip:a}),u.fieldView.buttonView.bind("label").to(this,"borderStyle",p=>c[p||"none"]),u.fieldView.on("execute",p=>{this.borderStyle=p.source._borderStyleValue}),u.bind("isEmpty").to(this,"borderStyle",p=>!p),Ju(u.fieldView,Uz(this,i.style),{role:"menu",ariaLabel:a});const d=new ms(r,Jo);d.set({label:o("Width"),class:"ck-table-form__border-width"}),d.fieldView.bind("value").to(this,"borderWidth"),d.bind("isEnabled").to(this,"borderStyle",Dv),d.fieldView.on("input",()=>{this.borderWidth=d.fieldView.element.value});const f=new ms(r,s);return f.set({label:o("Color"),class:"ck-table-form__border-color"}),f.fieldView.bind("value").to(this,"borderColor"),f.bind("isEnabled").to(this,"borderStyle",Dv),f.fieldView.on("input",()=>{this.borderColor=f.fieldView.value}),this.on("change:borderStyle",(p,m,v,y)=>{Dv(v)||(this.borderColor="",this.borderWidth=""),Dv(y)||(this.borderColor=i.color,this.borderWidth=i.width)}),{borderRowLabel:l,borderStyleDropdown:u,borderColorInput:f,borderWidthInput:d}}_createBackgroundFields(){const e=this.locale,i=this.t,s=new Pa(e);s.text=i("Background");const r=D_({colorConfig:this.options.backgroundColors,columns:5,defaultColorValue:this.options.defaultTableProperties.backgroundColor,colorPickerConfig:this.options.colorPickerConfig}),o=new ms(e,r);return o.set({label:i("Color"),class:"ck-table-properties-form__background"}),o.fieldView.bind("value").to(this,"backgroundColor"),o.fieldView.on("input",()=>{this.backgroundColor=o.fieldView.value}),{backgroundRowLabel:s,backgroundInput:o}}_createDimensionFields(){const e=this.locale,i=this.t,s=new Pa(e);s.text=i("Dimensions");const r=new ms(e,Jo);r.set({label:i("Width"),class:"ck-table-form__dimensions-row__width"}),r.fieldView.bind("value").to(this,"width"),r.fieldView.on("input",()=>{this.width=r.fieldView.element.value});const o=new Rt(e);o.setTemplate({tag:"span",attributes:{class:["ck-table-form__dimension-operator"]},children:[{text:"×"}]});const a=new ms(e,Jo);return a.set({label:i("Height"),class:"ck-table-form__dimensions-row__height"}),a.fieldView.bind("value").to(this,"height"),a.fieldView.on("input",()=>{this.height=a.fieldView.element.value}),{dimensionsLabel:s,widthInput:r,operatorLabel:o,heightInput:a}}_createAlignmentFields(){const e=this.locale,i=this.t,s=new Pa(e);s.text=i("Alignment");const r=new _h(e);return r.set({isCompact:!0,ariaLabel:i("Table alignment toolbar")}),Sk({view:this,icons:{left:kt.objectLeft,center:kt.objectCenter,right:kt.objectRight},toolbar:r,labels:this._alignmentLabels,propertyName:"alignment",defaultValue:this.options.defaultTableProperties.alignment}),{alignmentLabel:s,alignmentToolbar:r}}_createActionButtons(){const e=this.locale,i=this.t,s=new Yt(e),r=new Yt(e),o=[this.borderWidthInput,this.borderColorInput,this.backgroundInput,this.widthInput,this.heightInput];return s.set({label:i("Save"),icon:kt.check,class:"ck-button-save",type:"submit",withText:!0}),s.bind("isEnabled").toMany(o,"errorText",(...a)=>a.every(l=>!l)),r.set({label:i("Cancel"),icon:kt.cancel,class:"ck-button-cancel",withText:!0}),r.delegate("execute").to(this,"cancel"),{saveButtonView:s,cancelButtonView:r}}get _alignmentLabels(){const e=this.locale,i=this.t,s=i("Align table to the left"),r=i("Center table"),o=i("Align table to the right");return e.uiLanguageDirection==="rtl"?{right:o,center:r,left:s}:{left:s,center:r,right:o}}}function Dv(t){return t!=="none"}var dIe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8 2v5h4V2h1v5h5v1h-5v4h.021l-.172.351-1.916.28-.151.027c-.287.063-.54.182-.755.341L8 13v5H7v-5H2v-1h5V8H2V7h5V2h1zm4 6H8v4h4V8z" opacity=".6"/><path d="m15.5 11.5 1.323 2.68 2.957.43-2.14 2.085.505 2.946L15.5 18.25l-2.645 1.39.505-2.945-2.14-2.086 2.957-.43L15.5 11.5zM17 1a2 2 0 0 1 2 2v9.475l-.85-.124-.857-1.736a2.048 2.048 0 0 0-.292-.44L17 3H3v14h7.808l.402.392L10.935 19H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h14z"/></svg>';const hIe=500,aM={borderStyle:"tableBorderStyle",borderColor:"tableBorderColor",borderWidth:"tableBorderWidth",backgroundColor:"tableBackgroundColor",width:"tableWidth",height:"tableHeight",alignment:"tableAlignment"};class fIe extends Be{constructor(e){super(e);w(this,"_defaultTableProperties");w(this,"_balloon");w(this,"view",null);w(this,"_undoStepBatch");w(this,"_isReady");e.config.define("table.tableProperties",{borderColors:V_,backgroundColors:V_})}static get requires(){return[Mo]}static get pluginName(){return"TablePropertiesUI"}init(){const e=this.editor,i=e.t;this._defaultTableProperties=e0(e.config.get("table.tableProperties.defaultProperties"),{includeAlignmentProperty:!0}),this._balloon=e.plugins.get(Mo),e.ui.componentFactory.add("tableProperties",s=>{const r=new Yt(s);r.set({label:i("Table properties"),icon:dIe,tooltip:!0}),this.listenTo(r,"execute",()=>this._showView());const o=Object.values(aM).map(a=>e.commands.get(a));return r.bind("isEnabled").toMany(o,"isEnabled",(...a)=>a.some(l=>l)),r})}destroy(){super.destroy(),this.view&&this.view.destroy()}_createPropertiesView(){const e=this.editor,i=e.config.get("table.tableProperties"),s=h1(i.borderColors),r=d1(e.locale,s),o=h1(i.backgroundColors),a=d1(e.locale,o),l=i.colorPicker!==!1,c=new uIe(e.locale,{borderColors:r,backgroundColors:a,defaultTableProperties:this._defaultTableProperties,colorPickerConfig:l?i.colorPicker||{}:!1}),u=e.t;c.render(),this.listenTo(c,"submit",()=>{this._hideView()}),this.listenTo(c,"cancel",()=>{this._undoStepBatch.operations.length&&e.execute("undo",this._undoStepBatch),this._hideView()}),c.keystrokes.set("Esc",(p,m)=>{this._hideView(),m()}),Xu({emitter:c,activator:()=>this._isViewInBalloon,contextElements:[this._balloon.view.element],callback:()=>this._hideView()});const d=$z(u),f=zz(u);return c.on("change:borderStyle",this._getPropertyChangeCallback("tableBorderStyle")),c.on("change:borderColor",this._getValidatedPropertyChangeCallback({viewField:c.borderColorInput,commandName:"tableBorderColor",errorText:d,validator:N_})),c.on("change:borderWidth",this._getValidatedPropertyChangeCallback({viewField:c.borderWidthInput,commandName:"tableBorderWidth",errorText:f,validator:Hz})),c.on("change:backgroundColor",this._getValidatedPropertyChangeCallback({viewField:c.backgroundInput,commandName:"tableBackgroundColor",errorText:d,validator:N_})),c.on("change:width",this._getValidatedPropertyChangeCallback({viewField:c.widthInput,commandName:"tableWidth",errorText:f,validator:Ig})),c.on("change:height",this._getValidatedPropertyChangeCallback({viewField:c.heightInput,commandName:"tableHeight",errorText:f,validator:Ig})),c.on("change:alignment",this._getPropertyChangeCallback("tableAlignment")),c}_fillViewFormFromCommandValues(){const e=this.editor.commands,i=e.get("tableBorderStyle");Object.entries(aM).map(([s,r])=>{const o=s,a=this._defaultTableProperties[o]||"";return[o,e.get(r).value||a]}).forEach(([s,r])=>{(s==="borderColor"||s==="borderWidth")&&i.value==="none"||this.view.set(s,r)}),this._isReady=!0}_showView(){const e=this.editor;this.view||(this.view=this._createPropertiesView()),this.listenTo(e.ui,"update",()=>{this._updateView()}),this._fillViewFormFromCommandValues(),this._balloon.add({view:this.view,position:qz(e)}),this._undoStepBatch=e.model.createBatch(),this.view.focus()}_hideView(){const e=this.editor;this.stopListening(e.ui,"update"),this._isReady=!1,this.view.saveButtonView.focus(),this._balloon.remove(this.view),this.editor.editing.view.focus()}_updateView(){const e=this.editor,i=e.editing.view.document;Nz(i.selection)?this._isViewVisible&&jz(e,"table"):this._hideView()}get _isViewVisible(){return!!this.view&&this._balloon.visibleView===this.view}get _isViewInBalloon(){return!!this.view&&this._balloon.hasView(this.view)}_getPropertyChangeCallback(e){return(i,s,r)=>{this._isReady&&this.editor.execute(e,{value:r,batch:this._undoStepBatch})}}_getValidatedPropertyChangeCallback(e){const{commandName:i,viewField:s,validator:r,errorText:o}=e,a=Ss(()=>{s.errorText=o},hIe);return(l,c,u)=>{a.cancel(),this._isReady&&(r(u)?(this.editor.execute(i,{value:u,batch:this._undoStepBatch}),s.errorText=null):a())}}}class mIe extends Be{static get pluginName(){return"TableProperties"}static get requires(){return[oIe,fIe]}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function pIe(t){t.document.registerPostFixer(n=>gIe(n,t))}function gIe(t,n){const e=n.document.differ.getChanges();let i=!1;for(const s of e){if(s.type!="insert")continue;const r=s.position.parent;if(r.is("element","table")||s.name=="table"){const o=s.name=="table"?s.position.nodeAfter:r,a=Array.from(o.getChildren()).filter(c=>c.is("element","caption")),l=a.shift();if(!l)continue;for(const c of a)t.move(t.createRangeIn(c),l,"end"),t.remove(c);l.nextSibling&&(t.move(t.createRangeOn(l),o,"end"),i=!0),i=!!a.length||i}}return i}function lM(t){return!!t&&t.is("element","table")}function xk(t){for(const n of t.getChildren())if(n.is("element","caption"))return n;return null}function vIe(t){const n=rh(t);return n?xk(n):null}function bIe(t){const n=t.parent;return t.name=="figcaption"&&n&&n.is("element","figure")&&n.hasClass("table")?{name:!0}:t.name=="caption"&&n&&n.is("element","table")?{name:!0}:null}class _Ie extends en{refresh(){const n=this.editor,e=rh(n.model.document.selection);this.isEnabled=!!e,this.isEnabled?this.value=!!xk(e):this.value=!1}execute({focusCaptionOnShow:n=!1}={}){this.editor.model.change(e=>{this.value?this._hideTableCaption(e):this._showTableCaption(e,n)})}_showTableCaption(n,e){const i=this.editor.model,s=rh(i.document.selection),a=this.editor.plugins.get("TableCaptionEditing")._getSavedCaption(s)||n.createElement("caption");i.insertContent(a,s,"end"),e&&n.setSelection(a,"in")}_hideTableCaption(n){const e=this.editor.model,i=rh(e.document.selection),s=this.editor.plugins.get("TableCaptionEditing"),r=xk(i);s._saveCaption(i,r),e.deleteContent(n.createSelection(r,"on"))}}class wIe extends Be{constructor(e){super(e);w(this,"_savedCaptionsMap");this._savedCaptionsMap=new WeakMap}static get pluginName(){return"TableCaptionEditing"}init(){const e=this.editor,i=e.model.schema,s=e.editing.view,r=e.t;i.isRegistered("caption")?i.extend("caption",{allowIn:"table"}):i.register("caption",{allowIn:"table",allowContentOf:"$block",isLimit:!0}),e.commands.add("toggleTableCaption",new _Ie(this.editor)),e.conversion.for("upcast").elementToElement({view:bIe,model:"caption"}),e.conversion.for("dataDowncast").elementToElement({model:"caption",view:(o,{writer:a})=>lM(o.parent)?a.createContainerElement("figcaption"):null}),e.conversion.for("editingDowncast").elementToElement({model:"caption",view:(o,{writer:a})=>{if(!lM(o.parent))return null;const l=a.createEditableElement("figcaption");return a.setCustomProperty("tableCaption",!0,l),l.placeholder=r("Enter table caption"),LE({view:s,element:l,keepOnFocus:!0}),iS(l,a)}}),pIe(e.model)}_getSavedCaption(e){const i=this._savedCaptionsMap.get(e);return i?Hi.fromJSON(i):null}_saveCaption(e,i){this._savedCaptionsMap.set(e,i.toJSON())}}class yIe extends Be{static get pluginName(){return"TableCaptionUI"}init(){const n=this.editor,e=n.editing.view,i=n.t;n.ui.componentFactory.add("toggleTableCaption",s=>{const r=n.commands.get("toggleTableCaption"),o=new Yt(s);return o.set({icon:kt.caption,tooltip:!0,isToggleable:!0}),o.bind("isOn","isEnabled").to(r,"value","isEnabled"),o.bind("label").to(r,"value",a=>i(a?"Toggle caption off":"Toggle caption on")),this.listenTo(o,"execute",()=>{if(n.execute("toggleTableCaption",{focusCaptionOnShow:!0}),r.value){const a=vIe(n.model.document.selection),l=n.editing.mapper.toViewElement(a);if(!l)return;e.scrollToTheSelection(),e.change(c=>{c.addClass("table__caption_highlighted",l)})}n.editing.view.focus()}),o})}}class CIe extends Be{static get pluginName(){return"TableCaption"}static get requires(){return[wIe,yIe]}}class kIe extends en{refresh(){this.isEnabled=!0}execute(n={}){const{model:e,plugins:i}=this.editor;let{table:s=e.document.selection.getSelectedElement(),columnWidths:r,tableWidth:o}=n;r&&(r=Array.isArray(r)?r:r.split(",")),e.change(a=>{o?a.setAttribute("tableWidth",o,s):a.removeAttribute("tableWidth",s);const l=i.get("TableColumnResizeEditing").getColumnGroupElement(s);if(!r&&!l)return;if(!r)return a.remove(l);const c=wS(r);if(l)Array.from(l.getChildren()).forEach((u,d)=>a.setAttribute("columnWidth",c[d],u));else{const u=a.createElement("tableColumnGroup");c.forEach(d=>a.appendElement("tableColumn",{columnWidth:d},u)),a.append(u,s)}})}}function EIe(t){return n=>n.on("element:colgroup",(e,i,s)=>{const r=i.modelCursor.findAncestor("table"),o=X1(r);if(!o)return;const a=J1(o),l=t.getColumns(r);let c=W8e(o,s.writer);c=Array.from({length:l},(u,d)=>c[d]||"auto"),(c.length!=a.length||c.includes("auto"))&&Oz(a,o,wS(c),s.writer)},{priority:"low"})}function SIe(){return t=>t.on("insert:table",(n,e,i)=>{const s=i.writer,r=e.item,o=i.mapper.toViewElement(r),a=o.is("element","table")?o:Array.from(o.getChildren()).find(c=>c.is("element","table"));X1(r)?s.addClass("ck-table-resized",a):s.removeClass("ck-table-resized",a)},{priority:"low"})}class TIe extends Be{constructor(e){super(e);w(this,"_isResizingActive");w(this,"_resizingData");w(this,"_domEmitter");w(this,"_tableUtilsPlugin");this._isResizingActive=!1,this.set("_isResizingAllowed",!0),this._resizingData=null,this._domEmitter=new(Rr()),this._tableUtilsPlugin=e.plugins.get("TableUtils"),this.on("change:_isResizingAllowed",(i,s,r)=>{const o=r?"removeClass":"addClass";e.editing.view.change(a=>{for(const l of e.editing.view.document.roots)a[o]("ck-column-resize_disabled",e.editing.view.document.getRoot(l.rootName))})})}static get requires(){return[Q1,Ds]}static get pluginName(){return"TableColumnResizeEditing"}init(){this._extendSchema(),this._registerPostFixer(),this._registerConverters(),this._registerResizingListeners(),this._registerResizerInserter();const e=this.editor,i=e.plugins.get("TableColumnResize");e.plugins.get("TableEditing").registerAdditionalSlot({filter:o=>o.is("element","tableColumnGroup"),positionOffset:0});const r=new kIe(e);e.commands.add("resizeTableWidth",r),e.commands.add("resizeColumnWidths",r),this.bind("_isResizingAllowed").to(e,"isReadOnly",i,"isEnabled",r,"isEnabled",(o,a,l)=>!o&&a&&l)}destroy(){this._domEmitter.stopListening(),super.destroy()}getColumnGroupElement(e){return X1(e)}getTableColumnElements(e){return J1(e)}getTableColumnsWidths(e){return U8e(e)}_extendSchema(){this.editor.model.schema.extend("table",{allowAttributes:["tableWidth"]}),this.editor.model.schema.register("tableColumnGroup",{allowIn:"table",isLimit:!0}),this.editor.model.schema.register("tableColumn",{allowIn:"tableColumnGroup",allowAttributes:["columnWidth","colSpan"],isLimit:!0})}_registerPostFixer(){const i=this.editor.model;i.document.registerPostFixer(o=>{let a=!1;for(const l of F8e(i)){const c=this.getColumnGroupElement(l),u=this.getTableColumnElements(c),d=this.getTableColumnsWidths(c);let f=wS(d);f=s(f,l,this),!Cl(d,f)&&(Oz(u,c,f,o),a=!0)}return a});function s(o,a,l){const c=l._tableUtilsPlugin.getColumns(a);if(c-o.length===0)return o;const d=o.map(p=>Number(p.replace("%",""))),f=r(l.editor.model.document.differ,a);for(const p of f){const m=c-d.length;if(m===0)continue;const v=m>0,y=l._tableUtilsPlugin.getCellLocation(p).column;if(v){const _=N8e(a,l.editor),b=$8e(m,_);d.splice(y,0,...b)}else{const _=d.splice(y,Math.abs(m));d[y]+=b1(_)}}return d.map(p=>p+"%")}function r(o,a){const l=new Set;for(const c of o.getChanges())if(c.type=="insert"&&c.position.nodeAfter&&c.position.nodeAfter.name=="tableCell"&&c.position.nodeAfter.getAncestors().includes(a))l.add(c.position.nodeAfter);else if(c.type=="remove"){const u=c.position.nodeBefore||c.position.nodeAfter;u.name=="tableCell"&&u.getAncestors().includes(a)&&l.add(u)}return l}}_registerConverters(){const i=this.editor.conversion;i.for("upcast").attributeToAttribute({view:{name:"figure",key:"style",value:{width:/[\s\S]+/}},model:{name:"table",key:"tableWidth",value:s=>s.getStyle("width")}}),i.for("downcast").attributeToAttribute({model:{name:"table",key:"tableWidth"},view:s=>({name:"figure",key:"style",value:{width:s}})}),i.elementToElement({model:"tableColumnGroup",view:"colgroup"}),i.elementToElement({model:"tableColumn",view:"col"}),i.for("downcast").add(SIe()),i.for("upcast").add(EIe(this._tableUtilsPlugin)),i.for("upcast").attributeToAttribute({view:{name:"col",styles:{width:/.*/}},model:{key:"columnWidth",value:s=>{const r=s.getStyle("width");return!r||!r.endsWith("%")&&!r.endsWith("pt")?"auto":r}}}),i.for("upcast").attributeToAttribute({view:{name:"col",key:"span"},model:"colSpan"}),i.for("downcast").attributeToAttribute({model:{name:"tableColumn",key:"columnWidth"},view:s=>({key:"style",value:{width:s}})})}_registerResizingListeners(){const e=this.editor.editing.view;e.addObserver(Fz),e.document.on("mousedown",this._onMouseDownHandler.bind(this),{priority:"high"}),this._domEmitter.listenTo($t.window.document,"mousemove",Jf(this._onMouseMoveHandler.bind(this),50)),this._domEmitter.listenTo($t.window.document,"mouseup",this._onMouseUpHandler.bind(this))}_onMouseDownHandler(e,i){const s=i.target;if(!s.hasClass("ck-table-column-resizer")||!this._isResizingAllowed)return;const r=this.editor,o=r.editing.mapper.toModelElement(s.findAncestor("figure"));if(!r.model.canEditAt(o))return;i.preventDefault(),e.stop();const a=u(o,this._tableUtilsPlugin,r),l=s.findAncestor("table"),c=r.editing.view;Array.from(l.getChildren()).find(p=>p.is("element","colgroup"))||c.change(p=>{d(p,a,l)}),this._isResizingActive=!0,this._resizingData=this._getResizingData(i,a),c.change(p=>f(p,l,this._resizingData));function u(p,m,v){const y=Array(m.getColumns(p)),_=new di(p);for(const b of _){const E=v.editing.mapper.toViewElement(b.cell),x=v.editing.view.domConverter.mapViewToDom(E),A=H8e(x);(!y[b.column]||A<y[b.column])&&(y[b.column]=Ur(A))}return y}function d(p,m,v){const y=p.createContainerElement("colgroup");for(let _=0;_<m.length;_++){const b=p.createEmptyElement("col"),E=`${Ur(m[_]/b1(m)*100)}%`;p.setStyle("width",E,b),p.insert(p.createPositionAt(y,"end"),b)}p.insert(p.createPositionAt(v,0),y)}function f(p,m,v){const y=v.widths.viewFigureWidth/v.widths.viewFigureParentWidth;p.addClass("ck-table-resized",m),p.addClass("ck-table-column-resizer__active",v.elements.viewResizer),p.setStyle("width",`${Ur(y*100)}%`,m.findAncestor("figure"))}}_onMouseMoveHandler(e,i){if(!this._isResizingActive)return;if(!this._isResizingAllowed){this._onMouseUpHandler();return}const{columnPosition:s,flags:{isRightEdge:r,isTableCentered:o,isLtrContent:a},elements:{viewFigure:l,viewLeftColumn:c,viewRightColumn:u},widths:{viewFigureParentWidth:d,tableWidth:f,leftColumnWidth:p,rightColumnWidth:m}}=this._resizingData,v=-p+wk,y=r?d-f:m-wk,_=(a?1:-1)*(r&&o?2:1),b=D8e((i.clientX-s)*_,Math.min(v,0),Math.max(y,0));b!==0&&this.editor.editing.view.change(E=>{const x=Ur((p+b)*100/f);if(E.setStyle("width",`${x}%`,c),r){const A=Ur((f+b)*100/d);E.setStyle("width",`${A}%`,l)}else{const A=Ur((m-b)*100/f);E.setStyle("width",`${A}%`,u)}})}_onMouseUpHandler(){if(!this._isResizingActive)return;const{viewResizer:e,modelTable:i,viewFigure:s,viewColgroup:r}=this._resizingData.elements,o=this.editor,a=o.editing.view,l=this.getColumnGroupElement(i),c=Array.from(r.getChildren()).filter(y=>y.is("view:element")),u=l?this.getTableColumnsWidths(l):null,d=c.map(y=>y.getStyle("width")),f=!Cl(u,d),p=i.getAttribute("tableWidth"),m=s.getStyle("width"),v=p!==m;(f||v)&&(this._isResizingAllowed?o.execute("resizeTableWidth",{table:i,tableWidth:`${Ur(m)}%`,columnWidths:d}):a.change(y=>{if(u)for(const _ of c)y.setStyle("width",u.shift(),_);else y.remove(r);v&&(p?y.setStyle("width",p,s):y.removeStyle("width",s)),!u&&!p&&y.removeClass("ck-table-resized",[...s.getChildren()].find(_=>_.name==="table"))})),a.change(y=>{y.removeClass("ck-table-column-resizer__active",e)}),this._isResizingActive=!1,this._resizingData=null}_getResizingData(e,i){const s=this.editor,r=e.domEvent.clientX,o=e.target,a=o.findAncestor("td")||o.findAncestor("th"),l=s.editing.mapper.toModelElement(a),c=l.findAncestor("table"),u=V8e(l,this._tableUtilsPlugin).rightEdge,d=this._tableUtilsPlugin.getColumns(c)-1,f=u===d,p=!c.hasAttribute("tableAlignment"),m=s.locale.contentLanguageDirection!=="rtl",v=a.findAncestor("table"),y=v.findAncestor("figure"),_=[...v.getChildren()].find(M=>M.is("element","colgroup")),b=_.getChild(u),E=f?void 0:_.getChild(u+1),x=yk(s.editing.view.domConverter.mapViewToDom(y.parent)),A=yk(s.editing.view.domConverter.mapViewToDom(y)),I=Pz(c,s),k=i[u],O=f?void 0:i[u+1];return{columnPosition:r,flags:{isRightEdge:f,isTableCentered:p,isLtrContent:m},elements:{viewResizer:o,modelTable:c,viewFigure:y,viewColgroup:_,viewLeftColumn:b,viewRightColumn:E},widths:{viewFigureParentWidth:x,viewFigureWidth:A,tableWidth:I,leftColumnWidth:k,rightColumnWidth:O}}}_registerResizerInserter(){this.editor.conversion.for("editingDowncast").add(e=>{e.on("insert:tableCell",(i,s,r)=>{const o=s.item,a=r.mapper.toViewElement(o),l=r.writer;l.insert(l.createPositionAt(a,"end"),l.createUIElement("div",{class:"ck-table-column-resizer"}))},{priority:"lowest"})})}}class xIe extends Be{static get requires(){return[TIe,Yz]}static get pluginName(){return"TableColumnResize"}}const AIe={name:"app",props:{modelValue:{type:String,default:""}},data(){return{isLayoutReady:!1,config:null,editor:Z4e,editorData:this.modelValue}},watch:{editorData(t){this.$emit("update:modelValue",t)}},mounted(){this.config={toolbar:{items:["undo","redo","|","heading","|","fontSize","fontFamily","fontColor","fontBackgroundColor","|","bold","italic","underline","|","link","insertImage","insertTable","|","alignment","|","bulletedList","numberedList","todoList","outdent","indent"],shouldNotGroupWhenFull:!1},plugins:[SD,ZCe,gke,_Se,q$,vke,BCe,wke,Ske,cEe,CEe,JEe,KEe,PEe,HEe,rSe,hSe,ISe,BSe,MSe,tTe,P$,hTe,kTe,uS,ETe,M$,ATe,RTe,Ike,rxe,hxe,Nxe,nAe,e6e,l6e,M_,X6e,n8e,c$,E5e,c8e,bz,Cz,u8e,yz,wz,_z,Oke,Nke,zke,A9e,CIe,Z9e,xIe,mIe,I9e,cke,hAe,jke,oS],balloonToolbar:["bold","italic","|","link","insertImage","|","bulletedList","numberedList"],fontFamily:{supportAllValues:!0},fontSize:{options:[10,12,14,"default",18,20,22],supportAllValues:!0},heading:{options:[{model:"paragraph",title:"Paragraph",class:"ck-heading_paragraph"},{model:"heading1",view:"h1",title:"Heading 1",class:"ck-heading_heading1"},{model:"heading2",view:"h2",title:"Heading 2",class:"ck-heading_heading2"},{model:"heading3",view:"h3",title:"Heading 3",class:"ck-heading_heading3"},{model:"heading4",view:"h4",title:"Heading 4",class:"ck-heading_heading4"},{model:"heading5",view:"h5",title:"Heading 5",class:"ck-heading_heading5"},{model:"heading6",view:"h6",title:"Heading 6",class:"ck-heading_heading6"}]},image:{toolbar:["toggleImageCaption","imageTextAlternative","|","imageStyle:inline","imageStyle:wrapText","imageStyle:breakText","|","resizeImage"]},link:{addTargetToExternalLinks:!0,defaultProtocol:"https://",decorators:{toggleDownloadable:{mode:"manual",label:"Downloadable",attributes:{download:"file"}}}},list:{properties:{styles:!0,startIndex:!0,reversed:!0}},menuBar:{isVisible:!0},placeholder:"Type or paste your content here!",table:{contentToolbar:["tableColumn","tableRow","mergeTableCells","tableProperties","tableCellProperties"]}},this.isLayoutReady=!0},methods:{onReady(t){Array.from(this.$refs.editorToolbarElement.children).forEach(n=>n.remove()),Array.from(this.$refs.editorMenuBarElement.children).forEach(n=>n.remove()),this.$refs.editorToolbarElement.appendChild(t.ui.view.toolbar.element),this.$refs.editorMenuBarElement.appendChild(t.ui.view.menuBarView.element)}}},IIe={class:"main-container"},RIe={class:"editor-container editor-container_document-editor",ref:"editorContainerElement"},MIe={class:"editor-container__menu-bar",ref:"editorMenuBarElement"},PIe={class:"editor-container__toolbar",ref:"editorToolbarElement"},OIe={class:"editor-container__editor-wrapper"},LIe={class:"editor-container__editor"},BIe={ref:"editorElement"};function FIe(t,n,e,i,s,r){const o=ns("ckeditor",!0);return ve(),it("div",null,[ot("div",IIe,[ot("div",RIe,[ot("div",MIe,null,512),ot("div",PIe,null,512),ot("div",OIe,[ot("div",LIe,[ot("div",BIe,[s.isLayoutReady?(ve(),At(o,{key:0,editor:s.editor,config:s.config,modelValue:s.editorData,"onUpdate:modelValue":n[0]||(n[0]=a=>s.editorData=a),onReady:r.onReady},null,8,["editor","config","modelValue","onReady"])):_t("",!0)],512)])])],512)])])}const Zz=Pc(AIe,[["render",FIe]]),NIe={name:"Amendments",components:{Ckeditor:Zz},data(){return{editorData:"<p>clauses here</p>",country:"",committee:"",message:""}},mounted(){const t=JSON.parse(localStorage.getItem("delegate")||"null");t&&(this.committee=t.committee.charAt(0).toUpperCase()+t.committee.slice(1),this.country=t.country)},methods:{async submitAmendment(){try{(await fetch("http://127.0.0.1:8000/amendments/add",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amendment:this.editorData,country:this.country,committee:this.committee})})).ok?(this.message="Amendment submitted successfully!",this.editorData="<p>clauses here</p>",this.country="",this.committee=""):this.message="Failed to submit the amendment."}catch(t){this.message="Error: Unable to submit amendment.",console.error(t)}}}},VIe={id:"app"},DIe=ot("h1",null,"Submit Your Amendments",-1),$Ie=ot("br",null,null,-1),zIe=ot("label",{for:"committee"},"Select Your Committee:",-1),HIe=ot("option",{value:"",disabled:""},"Select your committee",-1),UIe=ot("option",{value:"Junior"},"Junior",-1),WIe=ot("option",{value:"Senior"},"Senior",-1),jIe=ot("option",{value:"Security Council"},"Security Council",-1),qIe=[HIe,UIe,WIe,jIe],KIe=ot("br",null,null,-1),GIe=ot("label",{for:"country"},"Select Your Country:",-1),YIe=AQ('<datalist id="countries"><option value="Algeria"></option><option value="Angola"></option><option value="Argentina"></option><option value="Armenia"></option><option value="Australia"></option><option value="Austria"></option><option value="Azerbaijan"></option><option value="Bahrain"></option><option value="Bangladesh"></option><option value="Bolivia"></option><option value="Brazil"></option><option value="Cambodia"></option><option value="Canada"></option><option value="Cape Verde"></option><option value="Central African Republic"></option><option value="Czech Republic"></option><option value="China"></option><option value="Colombia"></option><option value="Croatia"></option><option value="Cuba"></option><option value="Democratic Republic of the Congo"></option><option value="Dominica"></option><option value="Egypt"></option><option value="El Salvador"></option><option value="Eswatini"></option><option value="Ethiopia"></option><option value="Fiji"></option><option value="Finland"></option><option value="France"></option><option value="Georgia"></option><option value="Germany"></option><option value="Ghana"></option><option value="Greece"></option><option value="Haiti"></option><option value="Honduras"></option><option value="India"></option><option value="Indonesia"></option><option value="Iran"></option><option value="Israel"></option><option value="Italy"></option><option value="Ivory Coast"></option><option value="Jamaica"></option><option value="Japan"></option><option value="Kenya"></option><option value="Libya"></option><option value="Mali"></option><option value="Mexico"></option><option value="Morocco"></option><option value="Netherlands"></option><option value="New Zealand"></option><option value="Niger"></option><option value="North Korea"></option><option value="Pakistan"></option><option value="Palau"></option><option value="Philippines"></option><option value="Poland"></option><option value="Portugal"></option><option value="Qatar"></option><option value="Russia"></option><option value="Rwanda"></option><option value="Saudi Arabia"></option><option value="Singapore"></option><option value="Somalia"></option><option value="South Africa"></option><option value="South Korea"></option><option value="Spain"></option><option value="Sweden"></option><option value="Tajikistan"></option><option value="Thailand"></option><option value="Turkey"></option><option value="UAE"></option><option value="UK"></option><option value="USA"></option><option value="Uruguay"></option><option value="Venezuela"></option><option value="Vietnam"></option><option value="Zimbabwe"></option><option value="Belarus"></option><option value="Ukraine"></option></datalist><br><button type="submit">Submit</button>',3),ZIe={key:0,class:"message"};function XIe(t,n,e,i,s,r){const o=Zz;return ve(),it("div",VIe,[DIe,ot("form",{onSubmit:n[3]||(n[3]=Ui((...a)=>r.submitAmendment&&r.submitAmendment(...a),["prevent"]))},[et(o,{modelValue:s.editorData,"onUpdate:modelValue":n[0]||(n[0]=a=>s.editorData=a)},null,8,["modelValue"]),$Ie,zIe,Qi(ot("select",{"onUpdate:modelValue":n[1]||(n[1]=a=>s.committee=a),required:""},qIe,512),[[dee,s.committee]]),KIe,GIe,Qi(ot("input",{list:"countries","onUpdate:modelValue":n[2]||(n[2]=a=>s.country=a),placeholder:"Choose your country",required:""},null,512),[[_L,s.country]]),YIe],32),s.message?(ve(),it("div",ZIe,vn(s.message),1)):_t("",!0)])}const JIe=Pc(NIe,[["render",XIe]]),Sl=Object.create(null);Sl.open="0";Sl.close="1";Sl.ping="2";Sl.pong="3";Sl.message="4";Sl.upgrade="5";Sl.noop="6";const Db=Object.create(null);Object.keys(Sl).forEach(t=>{Db[Sl[t]]=t});const Ak={type:"error",data:"parser error"},Xz=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Jz=typeof ArrayBuffer=="function",Qz=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,kS=({type:t,data:n},e,i)=>Xz&&n instanceof Blob?e?i(n):cM(n,i):Jz&&(n instanceof ArrayBuffer||Qz(n))?e?i(n):cM(new Blob([n]),i):i(Sl[t]+(n||"")),cM=(t,n)=>{const e=new FileReader;return e.onload=function(){const i=e.result.split(",")[1];n("b"+(i||""))},e.readAsDataURL(t)};function uM(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let r3;function QIe(t,n){if(Xz&&t.data instanceof Blob)return t.data.arrayBuffer().then(uM).then(n);if(Jz&&(t.data instanceof ArrayBuffer||Qz(t.data)))return n(uM(t.data));kS(t,!1,e=>{r3||(r3=new TextEncoder),n(r3.encode(e))})}const dM="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Kp=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<dM.length;t++)Kp[dM.charCodeAt(t)]=t;const e7e=t=>{let n=t.length*.75,e=t.length,i,s=0,r,o,a,l;t[t.length-1]==="="&&(n--,t[t.length-2]==="="&&n--);const c=new ArrayBuffer(n),u=new Uint8Array(c);for(i=0;i<e;i+=4)r=Kp[t.charCodeAt(i)],o=Kp[t.charCodeAt(i+1)],a=Kp[t.charCodeAt(i+2)],l=Kp[t.charCodeAt(i+3)],u[s++]=r<<2|o>>4,u[s++]=(o&15)<<4|a>>2,u[s++]=(a&3)<<6|l&63;return c},t7e=typeof ArrayBuffer=="function",ES=(t,n)=>{if(typeof t!="string")return{type:"message",data:eH(t,n)};const e=t.charAt(0);return e==="b"?{type:"message",data:n7e(t.substring(1),n)}:Db[e]?t.length>1?{type:Db[e],data:t.substring(1)}:{type:Db[e]}:Ak},n7e=(t,n)=>{if(t7e){const e=e7e(t);return eH(e,n)}else return{base64:!0,data:t}},eH=(t,n)=>{switch(n){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},tH="",i7e=(t,n)=>{const e=t.length,i=new Array(e);let s=0;t.forEach((r,o)=>{kS(r,!1,a=>{i[o]=a,++s===e&&n(i.join(tH))})})},s7e=(t,n)=>{const e=t.split(tH),i=[];for(let s=0;s<e.length;s++){const r=ES(e[s],n);if(i.push(r),r.type==="error")break}return i};function r7e(){return new TransformStream({transform(t,n){QIe(t,e=>{const i=e.length;let s;if(i<126)s=new Uint8Array(1),new DataView(s.buffer).setUint8(0,i);else if(i<65536){s=new Uint8Array(3);const r=new DataView(s.buffer);r.setUint8(0,126),r.setUint16(1,i)}else{s=new Uint8Array(9);const r=new DataView(s.buffer);r.setUint8(0,127),r.setBigUint64(1,BigInt(i))}t.data&&typeof t.data!="string"&&(s[0]|=128),n.enqueue(s),n.enqueue(e)})}})}let o3;function $v(t){return t.reduce((n,e)=>n+e.length,0)}function zv(t,n){if(t[0].length===n)return t.shift();const e=new Uint8Array(n);let i=0;for(let s=0;s<n;s++)e[s]=t[0][i++],i===t[0].length&&(t.shift(),i=0);return t.length&&i<t[0].length&&(t[0]=t[0].slice(i)),e}function o7e(t,n){o3||(o3=new TextDecoder);const e=[];let i=0,s=-1,r=!1;return new TransformStream({transform(o,a){for(e.push(o);;){if(i===0){if($v(e)<1)break;const l=zv(e,1);r=(l[0]&128)===128,s=l[0]&127,s<126?i=3:s===126?i=1:i=2}else if(i===1){if($v(e)<2)break;const l=zv(e,2);s=new DataView(l.buffer,l.byteOffset,l.length).getUint16(0),i=3}else if(i===2){if($v(e)<8)break;const l=zv(e,8),c=new DataView(l.buffer,l.byteOffset,l.length),u=c.getUint32(0);if(u>Math.pow(2,21)-1){a.enqueue(Ak);break}s=u*Math.pow(2,32)+c.getUint32(4),i=3}else{if($v(e)<s)break;const l=zv(e,s);a.enqueue(ES(r?l:o3.decode(l),n)),i=0}if(s===0||s>t){a.enqueue(Ak);break}}}})}const nH=4;function ks(t){if(t)return a7e(t)}function a7e(t){for(var n in ks.prototype)t[n]=ks.prototype[n];return t}ks.prototype.on=ks.prototype.addEventListener=function(t,n){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(n),this};ks.prototype.once=function(t,n){function e(){this.off(t,e),n.apply(this,arguments)}return e.fn=n,this.on(t,e),this};ks.prototype.off=ks.prototype.removeListener=ks.prototype.removeAllListeners=ks.prototype.removeEventListener=function(t,n){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var e=this._callbacks["$"+t];if(!e)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var i,s=0;s<e.length;s++)if(i=e[s],i===n||i.fn===n){e.splice(s,1);break}return e.length===0&&delete this._callbacks["$"+t],this};ks.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var n=new Array(arguments.length-1),e=this._callbacks["$"+t],i=1;i<arguments.length;i++)n[i-1]=arguments[i];if(e){e=e.slice(0);for(var i=0,s=e.length;i<s;++i)e[i].apply(this,n)}return this};ks.prototype.emitReserved=ks.prototype.emit;ks.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};ks.prototype.hasListeners=function(t){return!!this.listeners(t).length};const Xo=typeof self<"u"?self:typeof window<"u"?window:Function("return this")();function iH(t,...n){return n.reduce((e,i)=>(t.hasOwnProperty(i)&&(e[i]=t[i]),e),{})}const l7e=Xo.setTimeout,c7e=Xo.clearTimeout;function uy(t,n){n.useNativeTimers?(t.setTimeoutFn=l7e.bind(Xo),t.clearTimeoutFn=c7e.bind(Xo)):(t.setTimeoutFn=Xo.setTimeout.bind(Xo),t.clearTimeoutFn=Xo.clearTimeout.bind(Xo))}const u7e=1.33;function d7e(t){return typeof t=="string"?h7e(t):Math.ceil((t.byteLength||t.size)*u7e)}function h7e(t){let n=0,e=0;for(let i=0,s=t.length;i<s;i++)n=t.charCodeAt(i),n<128?e+=1:n<2048?e+=2:n<55296||n>=57344?e+=3:(i++,e+=4);return e}function f7e(t){let n="";for(let e in t)t.hasOwnProperty(e)&&(n.length&&(n+="&"),n+=encodeURIComponent(e)+"="+encodeURIComponent(t[e]));return n}function m7e(t){let n={},e=t.split("&");for(let i=0,s=e.length;i<s;i++){let r=e[i].split("=");n[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return n}class p7e extends Error{constructor(n,e,i){super(n),this.description=e,this.context=i,this.type="TransportError"}}class SS extends ks{constructor(n){super(),this.writable=!1,uy(this,n),this.opts=n,this.query=n.query,this.socket=n.socket}onError(n,e,i){return super.emitReserved("error",new p7e(n,e,i)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(n){this.readyState==="open"&&this.write(n)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(n){const e=ES(n,this.socket.binaryType);this.onPacket(e)}onPacket(n){super.emitReserved("packet",n)}onClose(n){this.readyState="closed",super.emitReserved("close",n)}pause(n){}createUri(n,e={}){return n+"://"+this._hostname()+this._port()+this.opts.path+this._query(e)}_hostname(){const n=this.opts.hostname;return n.indexOf(":")===-1?n:"["+n+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(n){const e=f7e(n);return e.length?"?"+e:""}}const sH="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),Ik=64,g7e={};let hM=0,Hv=0,fM;function mM(t){let n="";do n=sH[t%Ik]+n,t=Math.floor(t/Ik);while(t>0);return n}function rH(){const t=mM(+new Date);return t!==fM?(hM=0,fM=t):t+"."+mM(hM++)}for(;Hv<Ik;Hv++)g7e[sH[Hv]]=Hv;let oH=!1;try{oH=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const v7e=oH;function aH(t){const n=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!n||v7e))return new XMLHttpRequest}catch{}if(!n)try{return new Xo[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}function b7e(){}const _7e=function(){return new aH({xdomain:!1}).responseType!=null}();class w7e extends SS{constructor(n){if(super(n),this.polling=!1,typeof location<"u"){const i=location.protocol==="https:";let s=location.port;s||(s=i?"443":"80"),this.xd=typeof location<"u"&&n.hostname!==location.hostname||s!==n.port}const e=n&&n.forceBase64;this.supportsBinary=_7e&&!e,this.opts.withCredentials&&(this.cookieJar=void 0)}get name(){return"polling"}doOpen(){this.poll()}pause(n){this.readyState="pausing";const e=()=>{this.readyState="paused",n()};if(this.polling||!this.writable){let i=0;this.polling&&(i++,this.once("pollComplete",function(){--i||e()})),this.writable||(i++,this.once("drain",function(){--i||e()}))}else e()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(n){const e=i=>{if(this.readyState==="opening"&&i.type==="open"&&this.onOpen(),i.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(i)};s7e(n,this.socket.binaryType).forEach(e),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this.poll())}doClose(){const n=()=>{this.write([{type:"close"}])};this.readyState==="open"?n():this.once("open",n)}write(n){this.writable=!1,i7e(n,e=>{this.doWrite(e,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const n=this.opts.secure?"https":"http",e=this.query||{};return this.opts.timestampRequests!==!1&&(e[this.opts.timestampParam]=rH()),!this.supportsBinary&&!e.sid&&(e.b64=1),this.createUri(n,e)}request(n={}){return Object.assign(n,{xd:this.xd,cookieJar:this.cookieJar},this.opts),new zf(this.uri(),n)}doWrite(n,e){const i=this.request({method:"POST",data:n});i.on("success",e),i.on("error",(s,r)=>{this.onError("xhr post error",s,r)})}doPoll(){const n=this.request();n.on("data",this.onData.bind(this)),n.on("error",(e,i)=>{this.onError("xhr poll error",e,i)}),this.pollXhr=n}}let zf=class $b extends ks{constructor(n,e){super(),uy(this,e),this.opts=e,this.method=e.method||"GET",this.uri=n,this.data=e.data!==void 0?e.data:null,this.create()}create(){var n;const e=iH(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this.opts.xd;const i=this.xhr=new aH(e);try{i.open(this.method,this.uri,!0);try{if(this.opts.extraHeaders){i.setDisableHeaderCheck&&i.setDisableHeaderCheck(!0);for(let s in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(s)&&i.setRequestHeader(s,this.opts.extraHeaders[s])}}catch{}if(this.method==="POST")try{i.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{i.setRequestHeader("Accept","*/*")}catch{}(n=this.opts.cookieJar)===null||n===void 0||n.addCookies(i),"withCredentials"in i&&(i.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(i.timeout=this.opts.requestTimeout),i.onreadystatechange=()=>{var s;i.readyState===3&&((s=this.opts.cookieJar)===null||s===void 0||s.parseCookies(i)),i.readyState===4&&(i.status===200||i.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof i.status=="number"?i.status:0)},0))},i.send(this.data)}catch(s){this.setTimeoutFn(()=>{this.onError(s)},0);return}typeof document<"u"&&(this.index=$b.requestsCount++,$b.requests[this.index]=this)}onError(n){this.emitReserved("error",n,this.xhr),this.cleanup(!0)}cleanup(n){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.xhr.onreadystatechange=b7e,n)try{this.xhr.abort()}catch{}typeof document<"u"&&delete $b.requests[this.index],this.xhr=null}}onLoad(){const n=this.xhr.responseText;n!==null&&(this.emitReserved("data",n),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}};zf.requestsCount=0;zf.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",pM);else if(typeof addEventListener=="function"){const t="onpagehide"in Xo?"pagehide":"unload";addEventListener(t,pM,!1)}}function pM(){for(let t in zf.requests)zf.requests.hasOwnProperty(t)&&zf.requests[t].abort()}const TS=typeof Promise=="function"&&typeof Promise.resolve=="function"?n=>Promise.resolve().then(n):(n,e)=>e(n,0),Uv=Xo.WebSocket||Xo.MozWebSocket,gM=!0,y7e="arraybuffer",vM=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class C7e extends SS{constructor(n){super(n),this.supportsBinary=!n.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const n=this.uri(),e=this.opts.protocols,i=vM?{}:iH(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(i.headers=this.opts.extraHeaders);try{this.ws=gM&&!vM?e?new Uv(n,e):new Uv(n):new Uv(n,e,i)}catch(s){return this.emitReserved("error",s)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=n=>this.onClose({description:"websocket connection closed",context:n}),this.ws.onmessage=n=>this.onData(n.data),this.ws.onerror=n=>this.onError("websocket error",n)}write(n){this.writable=!1;for(let e=0;e<n.length;e++){const i=n[e],s=e===n.length-1;kS(i,this.supportsBinary,r=>{const o={};try{gM&&this.ws.send(r)}catch{}s&&TS(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.close(),this.ws=null)}uri(){const n=this.opts.secure?"wss":"ws",e=this.query||{};return this.opts.timestampRequests&&(e[this.opts.timestampParam]=rH()),this.supportsBinary||(e.b64=1),this.createUri(n,e)}check(){return!!Uv}}class k7e extends SS{get name(){return"webtransport"}doOpen(){typeof WebTransport=="function"&&(this.transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name]),this.transport.closed.then(()=>{this.onClose()}).catch(n=>{this.onError("webtransport error",n)}),this.transport.ready.then(()=>{this.transport.createBidirectionalStream().then(n=>{const e=o7e(Number.MAX_SAFE_INTEGER,this.socket.binaryType),i=n.readable.pipeThrough(e).getReader(),s=r7e();s.readable.pipeTo(n.writable),this.writer=s.writable.getWriter();const r=()=>{i.read().then(({done:a,value:l})=>{a||(this.onPacket(l),r())}).catch(a=>{})};r();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this.writer.write(o).then(()=>this.onOpen())})}))}write(n){this.writable=!1;for(let e=0;e<n.length;e++){const i=n[e],s=e===n.length-1;this.writer.write(i).then(()=>{s&&TS(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var n;(n=this.transport)===null||n===void 0||n.close()}}const E7e={websocket:C7e,webtransport:k7e,polling:w7e},S7e=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,T7e=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Rk(t){if(t.length>2e3)throw"URI too long";const n=t,e=t.indexOf("["),i=t.indexOf("]");e!=-1&&i!=-1&&(t=t.substring(0,e)+t.substring(e,i).replace(/:/g,";")+t.substring(i,t.length));let s=S7e.exec(t||""),r={},o=14;for(;o--;)r[T7e[o]]=s[o]||"";return e!=-1&&i!=-1&&(r.source=n,r.host=r.host.substring(1,r.host.length-1).replace(/;/g,":"),r.authority=r.authority.replace("[","").replace("]","").replace(/;/g,":"),r.ipv6uri=!0),r.pathNames=x7e(r,r.path),r.queryKey=A7e(r,r.query),r}function x7e(t,n){const e=/\/{2,9}/g,i=n.replace(e,"/").split("/");return(n.slice(0,1)=="/"||n.length===0)&&i.splice(0,1),n.slice(-1)=="/"&&i.splice(i.length-1,1),i}function A7e(t,n){const e={};return n.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(i,s,r){s&&(e[s]=r)}),e}let lH=class xf extends ks{constructor(n,e={}){super(),this.binaryType=y7e,this.writeBuffer=[],n&&typeof n=="object"&&(e=n,n=null),n?(n=Rk(n),e.hostname=n.host,e.secure=n.protocol==="https"||n.protocol==="wss",e.port=n.port,n.query&&(e.query=n.query)):e.host&&(e.hostname=Rk(e.host).host),uy(this,e),this.secure=e.secure!=null?e.secure:typeof location<"u"&&location.protocol==="https:",e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.hostname=e.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=e.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=e.transports||["polling","websocket","webtransport"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},e),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=m7e(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(n){const e=Object.assign({},this.opts.query);e.EIO=nH,e.transport=n,this.id&&(e.sid=this.id);const i=Object.assign({},this.opts,{query:e,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[n]);return new E7e[n](i)}open(){let n;if(this.opts.rememberUpgrade&&xf.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)n="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else n=this.transports[0];this.readyState="opening";try{n=this.createTransport(n)}catch{this.transports.shift(),this.open();return}n.open(),this.setTransport(n)}setTransport(n){this.transport&&this.transport.removeAllListeners(),this.transport=n,n.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",e=>this.onClose("transport close",e))}probe(n){let e=this.createTransport(n),i=!1;xf.priorWebsocketSuccess=!1;const s=()=>{i||(e.send([{type:"ping",data:"probe"}]),e.once("packet",d=>{if(!i)if(d.type==="pong"&&d.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",e),!e)return;xf.priorWebsocketSuccess=e.name==="websocket",this.transport.pause(()=>{i||this.readyState!=="closed"&&(u(),this.setTransport(e),e.send([{type:"upgrade"}]),this.emitReserved("upgrade",e),e=null,this.upgrading=!1,this.flush())})}else{const f=new Error("probe error");f.transport=e.name,this.emitReserved("upgradeError",f)}}))};function r(){i||(i=!0,u(),e.close(),e=null)}const o=d=>{const f=new Error("probe error: "+d);f.transport=e.name,r(),this.emitReserved("upgradeError",f)};function a(){o("transport closed")}function l(){o("socket closed")}function c(d){e&&d.name!==e.name&&r()}const u=()=>{e.removeListener("open",s),e.removeListener("error",o),e.removeListener("close",a),this.off("close",l),this.off("upgrading",c)};e.once("open",s),e.once("error",o),e.once("close",a),this.once("close",l),this.once("upgrading",c),this.upgrades.indexOf("webtransport")!==-1&&n!=="webtransport"?this.setTimeoutFn(()=>{i||e.open()},200):e.open()}onOpen(){if(this.readyState="open",xf.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade){let n=0;const e=this.upgrades.length;for(;n<e;n++)this.probe(this.upgrades[n])}}onPacket(n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",n),this.emitReserved("heartbeat"),this.resetPingTimeout(),n.type){case"open":this.onHandshake(JSON.parse(n.data));break;case"ping":this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const e=new Error("server error");e.code=n.data,this.onError(e);break;case"message":this.emitReserved("data",n.data),this.emitReserved("message",n.data);break}}onHandshake(n){this.emitReserved("handshake",n),this.id=n.sid,this.transport.query.sid=n.sid,this.upgrades=this.filterUpgrades(n.upgrades),this.pingInterval=n.pingInterval,this.pingTimeout=n.pingTimeout,this.maxPayload=n.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const n=this.getWritablePackets();this.transport.send(n),this.prevBufferLen=n.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let i=0;i<this.writeBuffer.length;i++){const s=this.writeBuffer[i].data;if(s&&(e+=d7e(s)),i>0&&e>this.maxPayload)return this.writeBuffer.slice(0,i);e+=2}return this.writeBuffer}write(n,e,i){return this.sendPacket("message",n,e,i),this}send(n,e,i){return this.sendPacket("message",n,e,i),this}sendPacket(n,e,i,s){if(typeof e=="function"&&(s=e,e=void 0),typeof i=="function"&&(s=i,i=null),this.readyState==="closing"||this.readyState==="closed")return;i=i||{},i.compress=i.compress!==!1;const r={type:n,data:e,options:i};this.emitReserved("packetCreate",r),this.writeBuffer.push(r),s&&this.once("flush",s),this.flush()}close(){const n=()=>{this.onClose("forced close"),this.transport.close()},e=()=>{this.off("upgrade",e),this.off("upgradeError",e),n()},i=()=>{this.once("upgrade",e),this.once("upgradeError",e)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?i():n()}):this.upgrading?i():n()),this}onError(n){xf.priorWebsocketSuccess=!1,this.emitReserved("error",n),this.onClose("transport error",n)}onClose(n,e){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",n,e),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(n){const e=[];let i=0;const s=n.length;for(;i<s;i++)~this.transports.indexOf(n[i])&&e.push(n[i]);return e}};lH.protocol=nH;function I7e(t,n="",e){let i=t;e=e||typeof location<"u"&&location,t==null&&(t=e.protocol+"//"+e.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=e.protocol+t:t=e.host+t),/^(https?|wss?):\/\//.test(t)||(typeof e<"u"?t=e.protocol+"//"+t:t="https://"+t),i=Rk(t)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";const r=i.host.indexOf(":")!==-1?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+r+":"+i.port+n,i.href=i.protocol+"://"+r+(e&&e.port===i.port?"":":"+i.port),i}const R7e=typeof ArrayBuffer=="function",M7e=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,cH=Object.prototype.toString,P7e=typeof Blob=="function"||typeof Blob<"u"&&cH.call(Blob)==="[object BlobConstructor]",O7e=typeof File=="function"||typeof File<"u"&&cH.call(File)==="[object FileConstructor]";function xS(t){return R7e&&(t instanceof ArrayBuffer||M7e(t))||P7e&&t instanceof Blob||O7e&&t instanceof File}function zb(t,n){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let e=0,i=t.length;e<i;e++)if(zb(t[e]))return!0;return!1}if(xS(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return zb(t.toJSON(),!0);for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)&&zb(t[e]))return!0;return!1}function L7e(t){const n=[],e=t.data,i=t;return i.data=Mk(e,n),i.attachments=n.length,{packet:i,buffers:n}}function Mk(t,n){if(!t)return t;if(xS(t)){const e={_placeholder:!0,num:n.length};return n.push(t),e}else if(Array.isArray(t)){const e=new Array(t.length);for(let i=0;i<t.length;i++)e[i]=Mk(t[i],n);return e}else if(typeof t=="object"&&!(t instanceof Date)){const e={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=Mk(t[i],n));return e}return t}function B7e(t,n){return t.data=Pk(t.data,n),delete t.attachments,t}function Pk(t,n){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<n.length)return n[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let e=0;e<t.length;e++)t[e]=Pk(t[e],n);else if(typeof t=="object")for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&(t[e]=Pk(t[e],n));return t}const F7e=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],N7e=5;var Gn;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(Gn||(Gn={}));let V7e=class{constructor(n){this.replacer=n}encode(n){return(n.type===Gn.EVENT||n.type===Gn.ACK)&&zb(n)?this.encodeAsBinary({type:n.type===Gn.EVENT?Gn.BINARY_EVENT:Gn.BINARY_ACK,nsp:n.nsp,data:n.data,id:n.id}):[this.encodeAsString(n)]}encodeAsString(n){let e=""+n.type;return(n.type===Gn.BINARY_EVENT||n.type===Gn.BINARY_ACK)&&(e+=n.attachments+"-"),n.nsp&&n.nsp!=="/"&&(e+=n.nsp+","),n.id!=null&&(e+=n.id),n.data!=null&&(e+=JSON.stringify(n.data,this.replacer)),e}encodeAsBinary(n){const e=L7e(n),i=this.encodeAsString(e.packet),s=e.buffers;return s.unshift(i),s}};function bM(t){return Object.prototype.toString.call(t)==="[object Object]"}class AS extends ks{constructor(n){super(),this.reviver=n}add(n){let e;if(typeof n=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");e=this.decodeString(n);const i=e.type===Gn.BINARY_EVENT;i||e.type===Gn.BINARY_ACK?(e.type=i?Gn.EVENT:Gn.ACK,this.reconstructor=new D7e(e),e.attachments===0&&super.emitReserved("decoded",e)):super.emitReserved("decoded",e)}else if(xS(n)||n.base64)if(this.reconstructor)e=this.reconstructor.takeBinaryData(n),e&&(this.reconstructor=null,super.emitReserved("decoded",e));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+n)}decodeString(n){let e=0;const i={type:Number(n.charAt(0))};if(Gn[i.type]===void 0)throw new Error("unknown packet type "+i.type);if(i.type===Gn.BINARY_EVENT||i.type===Gn.BINARY_ACK){const r=e+1;for(;n.charAt(++e)!=="-"&&e!=n.length;);const o=n.substring(r,e);if(o!=Number(o)||n.charAt(e)!=="-")throw new Error("Illegal attachments");i.attachments=Number(o)}if(n.charAt(e+1)==="/"){const r=e+1;for(;++e&&!(n.charAt(e)===","||e===n.length););i.nsp=n.substring(r,e)}else i.nsp="/";const s=n.charAt(e+1);if(s!==""&&Number(s)==s){const r=e+1;for(;++e;){const o=n.charAt(e);if(o==null||Number(o)!=o){--e;break}if(e===n.length)break}i.id=Number(n.substring(r,e+1))}if(n.charAt(++e)){const r=this.tryParse(n.substr(e));if(AS.isPayloadValid(i.type,r))i.data=r;else throw new Error("invalid payload")}return i}tryParse(n){try{return JSON.parse(n,this.reviver)}catch{return!1}}static isPayloadValid(n,e){switch(n){case Gn.CONNECT:return bM(e);case Gn.DISCONNECT:return e===void 0;case Gn.CONNECT_ERROR:return typeof e=="string"||bM(e);case Gn.EVENT:case Gn.BINARY_EVENT:return Array.isArray(e)&&(typeof e[0]=="number"||typeof e[0]=="string"&&F7e.indexOf(e[0])===-1);case Gn.ACK:case Gn.BINARY_ACK:return Array.isArray(e)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class D7e{constructor(n){this.packet=n,this.buffers=[],this.reconPack=n}takeBinaryData(n){if(this.buffers.push(n),this.buffers.length===this.reconPack.attachments){const e=B7e(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const $7e=Object.freeze(Object.defineProperty({__proto__:null,Decoder:AS,Encoder:V7e,get PacketType(){return Gn},protocol:N7e},Symbol.toStringTag,{value:"Module"}));function Ea(t,n,e){return t.on(n,e),function(){t.off(n,e)}}const z7e=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class uH extends ks{constructor(n,e,i){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=n,this.nsp=e,i&&i.auth&&(this.auth=i.auth),this._opts=Object.assign({},i),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const n=this.io;this.subs=[Ea(n,"open",this.onopen.bind(this)),Ea(n,"packet",this.onpacket.bind(this)),Ea(n,"error",this.onerror.bind(this)),Ea(n,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...n){return n.unshift("message"),this.emit.apply(this,n),this}emit(n,...e){if(z7e.hasOwnProperty(n))throw new Error('"'+n.toString()+'" is a reserved event name');if(e.unshift(n),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(e),this;const i={type:Gn.EVENT,data:e};if(i.options={},i.options.compress=this.flags.compress!==!1,typeof e[e.length-1]=="function"){const o=this.ids++,a=e.pop();this._registerAckCallback(o,a),i.id=o}const s=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!s||!this.connected)||(this.connected?(this.notifyOutgoingListeners(i),this.packet(i)):this.sendBuffer.push(i)),this.flags={},this}_registerAckCallback(n,e){var i;const s=(i=this.flags.timeout)!==null&&i!==void 0?i:this._opts.ackTimeout;if(s===void 0){this.acks[n]=e;return}const r=this.io.setTimeoutFn(()=>{delete this.acks[n];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===n&&this.sendBuffer.splice(a,1);e.call(this,new Error("operation has timed out"))},s),o=(...a)=>{this.io.clearTimeoutFn(r),e.apply(this,a)};o.withError=!0,this.acks[n]=o}emitWithAck(n,...e){return new Promise((i,s)=>{const r=(o,a)=>o?s(o):i(a);r.withError=!0,e.push(r),this.emit(n,...e)})}_addToQueue(n){let e;typeof n[n.length-1]=="function"&&(e=n.pop());const i={id:this._queueSeq++,tryCount:0,pending:!1,args:n,flags:Object.assign({fromQueue:!0},this.flags)};n.push((s,...r)=>i!==this._queue[0]?void 0:(s!==null?i.tryCount>this._opts.retries&&(this._queue.shift(),e&&e(s)):(this._queue.shift(),e&&e(null,...r)),i.pending=!1,this._drainQueue())),this._queue.push(i),this._drainQueue()}_drainQueue(n=!1){if(!this.connected||this._queue.length===0)return;const e=this._queue[0];e.pending&&!n||(e.pending=!0,e.tryCount++,this.flags=e.flags,this.emit.apply(this,e.args))}packet(n){n.nsp=this.nsp,this.io._packet(n)}onopen(){typeof this.auth=="function"?this.auth(n=>{this._sendConnectPacket(n)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(n){this.packet({type:Gn.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},n):n})}onerror(n){this.connected||this.emitReserved("connect_error",n)}onclose(n,e){this.connected=!1,delete this.id,this.emitReserved("disconnect",n,e),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(n=>{if(!this.sendBuffer.some(i=>String(i.id)===n)){const i=this.acks[n];delete this.acks[n],i.withError&&i.call(this,new Error("socket has been disconnected"))}})}onpacket(n){if(n.nsp===this.nsp)switch(n.type){case Gn.CONNECT:n.data&&n.data.sid?this.onconnect(n.data.sid,n.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Gn.EVENT:case Gn.BINARY_EVENT:this.onevent(n);break;case Gn.ACK:case Gn.BINARY_ACK:this.onack(n);break;case Gn.DISCONNECT:this.ondisconnect();break;case Gn.CONNECT_ERROR:this.destroy();const i=new Error(n.data.message);i.data=n.data.data,this.emitReserved("connect_error",i);break}}onevent(n){const e=n.data||[];n.id!=null&&e.push(this.ack(n.id)),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}emitEvent(n){if(this._anyListeners&&this._anyListeners.length){const e=this._anyListeners.slice();for(const i of e)i.apply(this,n)}super.emit.apply(this,n),this._pid&&n.length&&typeof n[n.length-1]=="string"&&(this._lastOffset=n[n.length-1])}ack(n){const e=this;let i=!1;return function(...s){i||(i=!0,e.packet({type:Gn.ACK,id:n,data:s}))}}onack(n){const e=this.acks[n.id];typeof e=="function"&&(delete this.acks[n.id],e.withError&&n.data.unshift(null),e.apply(this,n.data))}onconnect(n,e){this.id=n,this.recovered=e&&this._pid===e,this._pid=e,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(n=>this.emitEvent(n)),this.receiveBuffer=[],this.sendBuffer.forEach(n=>{this.notifyOutgoingListeners(n),this.packet(n)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(n=>n()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Gn.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(n){return this.flags.compress=n,this}get volatile(){return this.flags.volatile=!0,this}timeout(n){return this.flags.timeout=n,this}onAny(n){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(n),this}prependAny(n){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(n),this}offAny(n){if(!this._anyListeners)return this;if(n){const e=this._anyListeners;for(let i=0;i<e.length;i++)if(n===e[i])return e.splice(i,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(n){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(n),this}prependAnyOutgoing(n){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(n),this}offAnyOutgoing(n){if(!this._anyOutgoingListeners)return this;if(n){const e=this._anyOutgoingListeners;for(let i=0;i<e.length;i++)if(n===e[i])return e.splice(i,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(n){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const e=this._anyOutgoingListeners.slice();for(const i of e)i.apply(this,n.data)}}}function Vm(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Vm.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var n=Math.random(),e=Math.floor(n*this.jitter*t);t=Math.floor(n*10)&1?t+e:t-e}return Math.min(t,this.max)|0};Vm.prototype.reset=function(){this.attempts=0};Vm.prototype.setMin=function(t){this.ms=t};Vm.prototype.setMax=function(t){this.max=t};Vm.prototype.setJitter=function(t){this.jitter=t};class Ok extends ks{constructor(n,e){var i;super(),this.nsps={},this.subs=[],n&&typeof n=="object"&&(e=n,n=void 0),e=e||{},e.path=e.path||"/socket.io",this.opts=e,uy(this,e),this.reconnection(e.reconnection!==!1),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor((i=e.randomizationFactor)!==null&&i!==void 0?i:.5),this.backoff=new Vm({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(e.timeout==null?2e4:e.timeout),this._readyState="closed",this.uri=n;const s=e.parser||$7e;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=e.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(n){return arguments.length?(this._reconnection=!!n,this):this._reconnection}reconnectionAttempts(n){return n===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=n,this)}reconnectionDelay(n){var e;return n===void 0?this._reconnectionDelay:(this._reconnectionDelay=n,(e=this.backoff)===null||e===void 0||e.setMin(n),this)}randomizationFactor(n){var e;return n===void 0?this._randomizationFactor:(this._randomizationFactor=n,(e=this.backoff)===null||e===void 0||e.setJitter(n),this)}reconnectionDelayMax(n){var e;return n===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=n,(e=this.backoff)===null||e===void 0||e.setMax(n),this)}timeout(n){return arguments.length?(this._timeout=n,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(n){if(~this._readyState.indexOf("open"))return this;this.engine=new lH(this.uri,this.opts);const e=this.engine,i=this;this._readyState="opening",this.skipReconnect=!1;const s=Ea(e,"open",function(){i.onopen(),n&&n()}),r=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),n?n(a):this.maybeReconnectOnOpen()},o=Ea(e,"error",r);if(this._timeout!==!1){const a=this._timeout,l=this.setTimeoutFn(()=>{s(),r(new Error("timeout")),e.close()},a);this.opts.autoUnref&&l.unref(),this.subs.push(()=>{this.clearTimeoutFn(l)})}return this.subs.push(s),this.subs.push(o),this}connect(n){return this.open(n)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const n=this.engine;this.subs.push(Ea(n,"ping",this.onping.bind(this)),Ea(n,"data",this.ondata.bind(this)),Ea(n,"error",this.onerror.bind(this)),Ea(n,"close",this.onclose.bind(this)),Ea(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(n){try{this.decoder.add(n)}catch(e){this.onclose("parse error",e)}}ondecoded(n){TS(()=>{this.emitReserved("packet",n)},this.setTimeoutFn)}onerror(n){this.emitReserved("error",n)}socket(n,e){let i=this.nsps[n];return i?this._autoConnect&&!i.active&&i.connect():(i=new uH(this,n,e),this.nsps[n]=i),i}_destroy(n){const e=Object.keys(this.nsps);for(const i of e)if(this.nsps[i].active)return;this._close()}_packet(n){const e=this.encoder.encode(n);for(let i=0;i<e.length;i++)this.engine.write(e[i],n.options)}cleanup(){this.subs.forEach(n=>n()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(n,e){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",n,e),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const n=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const e=this.backoff.duration();this._reconnecting=!0;const i=this.setTimeoutFn(()=>{n.skipReconnect||(this.emitReserved("reconnect_attempt",n.backoff.attempts),!n.skipReconnect&&n.open(s=>{s?(n._reconnecting=!1,n.reconnect(),this.emitReserved("reconnect_error",s)):n.onreconnect()}))},e);this.opts.autoUnref&&i.unref(),this.subs.push(()=>{this.clearTimeoutFn(i)})}}onreconnect(){const n=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",n)}}const Pp={};function Hf(t,n){typeof t=="object"&&(n=t,t=void 0),n=n||{};const e=I7e(t,n.path||"/socket.io"),i=e.source,s=e.id,r=e.path,o=Pp[s]&&r in Pp[s].nsps,a=n.forceNew||n["force new connection"]||n.multiplex===!1||o;let l;return a?l=new Ok(i,n):(Pp[s]||(Pp[s]=new Ok(i,n)),l=Pp[s]),e.query&&!n.query&&(n.query=e.queryKey),l.socket(e.path,n)}Object.assign(Hf,{Manager:Ok,Socket:uH,io:Hf,connect:Hf});const H7e={name:"DebatingGroup",data(){return{content:"",group:this.$route.params.group,socket:null}},methods:{fetchContent(){hi.get("http://127.0.0.1:8000/current",{params:{group:this.group}}).then(t=>{this.content=t.data.content}).catch(t=>{console.error("Error fetching content:",t)})},setupSocket(){this.socket=Hf("http://127.0.0.1:8000/content"),this.socket.emit("join",{group:this.group}),this.socket.on("update_content",t=>{t.group===this.group&&(this.content=t.content)})},sendContent(t){hi.post("http://127.0.0.1:8000/current",{group:this.group,content:t}).then(n=>{console.log("Content sent successfully:",n.data.message)}).catch(n=>{console.error("Error sending content:",n)})}},watch:{"$route.params.group":function(t){this.group=t,this.fetchContent(),this.setupSocket()}},created(){this.fetchContent(),this.setupSocket()},beforeUnmount(){this.socket&&this.socket.disconnect()}},U7e=["innerHTML"];function W7e(t,n,e,i,s,r){return ve(),it("div",null,[ot("h1",null,vn(s.group)+" Debate",1),ot("div",{innerHTML:this.content},null,8,U7e)])}const j7e=Pc(H7e,[["render",W7e]]),q7e={data(){return{resolutions:[],committeeName:this.$route.params.committee,socket:null}},created(){this.fetchResolutions(),this.setupWebSocket()},computed:{combinedResolutions(){return this.resolutions.join("")},combinedResolutions(){const n=`<ol>${this.resolutions.map(e=>{const i=document.createElement("div");i.innerHTML=e.trim();const s=i.querySelector("ol");if(!s)return"";let r="";return s.childNodes.forEach(o=>{o.nodeName==="LI"&&(r+=o.outerHTML)}),r}).join("")}</ol>`;return BC.sanitize(n)},sanitizedResolutions(){return BC.sanitize(this.combinedResolutions)}},beforeUnmount(){this.socket&&(this.socket.disconnect(),console.log("Socket disconnected"))},methods:{fetchResolutions(){hi.get(`http://127.0.0.1:8000/api/resolutions/${this.committeeName}`).then(t=>{this.resolutions=t.data}).catch(t=>{console.error("Error fetching resolutions:",t)})},setupWebSocket(){this.socket=Hf("http://127.0.0.1:8000"),this.socket.on(`update-${this.committeeName}`,t=>{this.resolutions.push(t),console.log("New resolution received:",t)})}}},K7e=["innerHTML"];function G7e(t,n,e,i,s,r){return ve(),it("div",null,[ot("h1",null,vn(s.committeeName)+" Committee Resolutions",1),ot("div",{innerHTML:r.sanitizedResolutions},null,8,K7e)])}const Y7e=Pc(q7e,[["render",G7e]]),Z7e={props:["isVisible","currentUserId"],data(){return{groupName:"",delegates:[],countries:[],committees:[],filteredDelegates:[],selectedCountry:"",selectedCommittee:"",selectedDelegates:[],selectedDelegatesList:[]}},mounted(){this.fetchAllDelegates()},methods:{fetchAllDelegates(){hi.get("http://127.0.0.1:8000/delegates").then(t=>{this.delegates=t.data,this.countries=[...new Set(this.delegates.map(n=>n.country))],this.committees=[...new Set(this.delegates.map(n=>n.committee))]}).catch(t=>{console.error("Error fetching delegates:",t)})},filterDelegates(){this.filteredDelegates=this.delegates.filter(t=>{const n=this.selectedCountry?t.country===this.selectedCountry:!0,e=this.selectedCommittee?t.committee===this.selectedCommittee:!0;return n&&e})},toggleDelegateSelection(t){const n=this.selectedDelegates.indexOf(t.id);n===-1?(this.selectedDelegates.push(t.id),this.selectedDelegatesList.push(t)):(this.selectedDelegates.splice(n,1),this.selectedDelegatesList=this.selectedDelegatesList.filter(e=>e.id!==t.id))},removeDelegate(t){this.selectedDelegates=this.selectedDelegates.filter(n=>n!==t),this.selectedDelegatesList=this.selectedDelegatesList.filter(n=>n.id!==t)},createGroup(){if(!this.groupName.trim()){vl({message:"Please provide a group name.",type:"error",duration:3e3}),this.$nextTick(()=>{this.$refs.groupNameInput.focus()});return}if(this.selectedDelegates.length===0){vl({message:"Please select at least one delegate to create the group.",type:"error",duration:3e3});return}const t=[...new Set([...this.selectedDelegates,this.currentUserId])];hi.post("http://127.0.0.1:8000/groups",{name:this.groupName,delegate_ids:t,inviting_user_id:this.currentUserId}).then(n=>{vl({message:"Group created successfully!",type:"success",duration:3e3}),this.closePopup()}).catch(n=>{console.error("Error creating group:",n),vl({message:"Failed to create the group.",type:"error",duration:3e3})})},closePopup(){this.$emit("close")}}},dH=t=>(MJ("data-v-fd87744b"),t=t(),PJ(),t),X7e=dH(()=>ot("h3",null,"Selected Delegates:",-1)),J7e=dH(()=>ot("h3",null,"Select Delegates:",-1)),Q7e={class:"dialog-footer",slot:"footer"};function eRe(t,n,e,i,s,r){const o=nF,a=tF,l=bE,c=vE,u=zme,d=z1,f=$me,p=ph,m=eF,v=OF;return ve(),At(v,{"model-value":e.isVisible,title:"Create New Group",width:"600px",onClose:r.closePopup,"close-on-click-modal":!1},{default:Je(()=>[et(m,{"label-position":"top","label-width":"auto"},{default:Je(()=>[et(a,{label:"Group Name"},{default:Je(()=>[et(o,{modelValue:s.groupName,"onUpdate:modelValue":n[0]||(n[0]=y=>s.groupName=y),placeholder:"Enter group name",ref:"groupNameInput"},null,8,["modelValue"])]),_:1}),et(a,{label:"Filter Delegate by Country"},{default:Je(()=>[et(c,{modelValue:s.selectedCountry,"onUpdate:modelValue":n[1]||(n[1]=y=>s.selectedCountry=y),placeholder:"Select Country",clearable:"",onChange:r.filterDelegates},{default:Je(()=>[(ve(!0),it(Wn,null,Fu(s.countries,y=>(ve(),At(l,{key:y,label:y,value:y},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"])]),_:1}),et(a,{label:"Filter Delegate by Committee"},{default:Je(()=>[et(c,{modelValue:s.selectedCommittee,"onUpdate:modelValue":n[2]||(n[2]=y=>s.selectedCommittee=y),placeholder:"Select Committee",clearable:"",onChange:r.filterDelegates},{default:Je(()=>[(ve(!0),it(Wn,null,Fu(s.committees,y=>(ve(),At(l,{key:y,label:y,value:y},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"])]),_:1}),X7e,et(f,{data:s.selectedDelegatesList,style:{width:"100%"},border:""},{default:Je(()=>[et(u,{prop:"name",label:"Name"}),et(u,{prop:"country",label:"Country"}),et(u,{prop:"committee",label:"Committee"}),et(u,{label:"Actions",width:"100"},{default:Je(({row:y})=>[et(d,{size:"small",type:"danger",onClick:_=>r.removeDelegate(y.id),icon:"el-icon-delete"},{default:Je(()=>[Rn("Remove")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),J7e,et(f,{data:s.filteredDelegates,style:{width:"100%"},border:""},{default:Je(()=>[et(u,{prop:"name",label:"Name"}),et(u,{prop:"country",label:"Country"}),et(u,{prop:"committee",label:"Committee"}),et(u,{label:"Select",width:"120"},{default:Je(({row:y})=>[et(p,{checked:s.selectedDelegates.includes(y.id),onChange:_=>r.toggleDelegateSelection(y)},{default:Je(()=>[Rn("Select")]),_:2},1032,["checked","onChange"])]),_:1})]),_:1},8,["data"]),ot("div",Q7e,[et(d,{onClick:r.closePopup},{default:Je(()=>[Rn("Cancel")]),_:1},8,["onClick"]),et(d,{type:"primary",onClick:r.createGroup},{default:Je(()=>[Rn("Create Group")]),_:1},8,["onClick"])])]),_:1})]),_:1},8,["model-value","onClose"])}const hH=Pc(Z7e,[["render",eRe],["__scopeId","data-v-fd87744b"]]);function tRe(t,n){const e=Object.create(null),i=t.split(",");for(let s=0;s<i.length;s++)e[i[s]]=!0;return s=>!!e[s]}const nRe=()=>{},iRe=Object.assign,sRe=Object.prototype.hasOwnProperty,dy=(t,n)=>sRe.call(t,n),Pu=Array.isArray,Hb=t=>fH(t)==="[object Map]",rRe=t=>typeof t=="function",oRe=t=>typeof t=="string",IS=t=>typeof t=="symbol",hy=t=>t!==null&&typeof t=="object",aRe=Object.prototype.toString,fH=t=>aRe.call(t),lRe=t=>fH(t).slice(8,-1),RS=t=>oRe(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,mH=(t,n)=>!Object.is(t,n),cRe=(t,n,e)=>{Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value:e})};let al;class uRe{constructor(n=!1){this.active=!0,this.effects=[],this.cleanups=[],!n&&al&&(this.parent=al,this.index=(al.scopes||(al.scopes=[])).push(this)-1)}run(n){if(this.active){const e=al;try{return al=this,n()}finally{al=e}}}on(){al=this}off(){al=this.parent}stop(n){if(this.active){let e,i;for(e=0,i=this.effects.length;e<i;e++)this.effects[e].stop();for(e=0,i=this.cleanups.length;e<i;e++)this.cleanups[e]();if(this.scopes)for(e=0,i=this.scopes.length;e<i;e++)this.scopes[e].stop(!0);if(this.parent&&!n){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.active=!1}}}function dRe(t,n=al){n&&n.active&&n.effects.push(t)}const MS=t=>{const n=new Set(t);return n.w=0,n.n=0,n},pH=t=>(t.w&Hu)>0,gH=t=>(t.n&Hu)>0,hRe=({deps:t})=>{if(t.length)for(let n=0;n<t.length;n++)t[n].w|=Hu},fRe=t=>{const{deps:n}=t;if(n.length){let e=0;for(let i=0;i<n.length;i++){const s=n[i];pH(s)&&!gH(s)?s.delete(t):n[e++]=s,s.w&=~Hu,s.n&=~Hu}n.length=e}},Lk=new WeakMap;let Gp=0,Hu=1;const Bk=30;let Aa;const ah=Symbol(""),Fk=Symbol("");class PS{constructor(n,e=null,i){this.fn=n,this.scheduler=e,this.active=!0,this.deps=[],this.parent=void 0,dRe(this,i)}run(){if(!this.active)return this.fn();let n=Aa,e=Ou;for(;n;){if(n===this)return;n=n.parent}try{return this.parent=Aa,Aa=this,Ou=!0,Hu=1<<++Gp,Gp<=Bk?hRe(this):_M(this),this.fn()}finally{Gp<=Bk&&fRe(this),Hu=1<<--Gp,Aa=this.parent,Ou=e,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Aa===this?this.deferStop=!0:this.active&&(_M(this),this.onStop&&this.onStop(),this.active=!1)}}function _M(t){const{deps:n}=t;if(n.length){for(let e=0;e<n.length;e++)n[e].delete(t);n.length=0}}let Ou=!0;const vH=[];function Dm(){vH.push(Ou),Ou=!1}function $m(){const t=vH.pop();Ou=t===void 0?!0:t}function Po(t,n,e){if(Ou&&Aa){let i=Lk.get(t);i||Lk.set(t,i=new Map);let s=i.get(e);s||i.set(e,s=MS()),bH(s)}}function bH(t,n){let e=!1;Gp<=Bk?gH(t)||(t.n|=Hu,e=!pH(t)):e=!t.has(Aa),e&&(t.add(Aa),Aa.deps.push(t))}function Ec(t,n,e,i,s,r){const o=Lk.get(t);if(!o)return;let a=[];if(n==="clear")a=[...o.values()];else if(e==="length"&&Pu(t))o.forEach((l,c)=>{(c==="length"||c>=i)&&a.push(l)});else switch(e!==void 0&&a.push(o.get(e)),n){case"add":Pu(t)?RS(e)&&a.push(o.get("length")):(a.push(o.get(ah)),Hb(t)&&a.push(o.get(Fk)));break;case"delete":Pu(t)||(a.push(o.get(ah)),Hb(t)&&a.push(o.get(Fk)));break;case"set":Hb(t)&&a.push(o.get(ah));break}if(a.length===1)a[0]&&Nk(a[0]);else{const l=[];for(const c of a)c&&l.push(...c);Nk(MS(l))}}function Nk(t,n){const e=Pu(t)?t:[...t];for(const i of e)i.computed&&wM(i);for(const i of e)i.computed||wM(i)}function wM(t,n){(t!==Aa||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const mRe=tRe("__proto__,__v_isRef,__isVue"),_H=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(IS)),pRe=OS(),gRe=OS(!1,!0),vRe=OS(!0),yM=bRe();function bRe(){const t={};return["includes","indexOf","lastIndexOf"].forEach(n=>{t[n]=function(...e){const i=fi(this);for(let r=0,o=this.length;r<o;r++)Po(i,"get",r+"");const s=i[n](...e);return s===-1||s===!1?i[n](...e.map(fi)):s}}),["push","pop","shift","unshift","splice"].forEach(n=>{t[n]=function(...e){Dm();const i=fi(this)[n].apply(this,e);return $m(),i}}),t}function OS(t=!1,n=!1){return function(i,s,r){if(s==="__v_isReactive")return!t;if(s==="__v_isReadonly")return t;if(s==="__v_isShallow")return n;if(s==="__v_raw"&&r===(t?n?LRe:EH:n?kH:CH).get(i))return i;const o=Pu(i);if(!t&&o&&dy(yM,s))return Reflect.get(yM,s,r);const a=Reflect.get(i,s,r);return(IS(s)?_H.has(s):mRe(s))||(t||Po(i,"get",s),n)?a:Sr(a)?o&&RS(s)?a:a.value:hy(a)?t?SH(a):FS(a):a}}const _Re=wH(),wRe=wH(!0);function wH(t=!1){return function(e,i,s,r){let o=e[i];if(_1(o)&&Sr(o)&&!Sr(s))return!1;if(!t&&!_1(s)&&(Vk(s)||(s=fi(s),o=fi(o)),!Pu(e)&&Sr(o)&&!Sr(s)))return o.value=s,!0;const a=Pu(e)&&RS(i)?Number(i)<e.length:dy(e,i),l=Reflect.set(e,i,s,r);return e===fi(r)&&(a?mH(s,o)&&Ec(e,"set",i,s):Ec(e,"add",i,s)),l}}function yRe(t,n){const e=dy(t,n);t[n];const i=Reflect.deleteProperty(t,n);return i&&e&&Ec(t,"delete",n,void 0),i}function CRe(t,n){const e=Reflect.has(t,n);return(!IS(n)||!_H.has(n))&&Po(t,"has",n),e}function kRe(t){return Po(t,"iterate",Pu(t)?"length":ah),Reflect.ownKeys(t)}const yH={get:pRe,set:_Re,deleteProperty:yRe,has:CRe,ownKeys:kRe},ERe={get:vRe,set(t,n){return!0},deleteProperty(t,n){return!0}},SRe=iRe({},yH,{get:gRe,set:wRe}),LS=t=>t,fy=t=>Reflect.getPrototypeOf(t);function Wv(t,n,e=!1,i=!1){t=t.__v_raw;const s=fi(t),r=fi(n);e||(n!==r&&Po(s,"get",n),Po(s,"get",r));const{has:o}=fy(s),a=i?LS:e?DS:VS;if(o.call(s,n))return a(t.get(n));if(o.call(s,r))return a(t.get(r));t!==s&&t.get(n)}function jv(t,n=!1){const e=this.__v_raw,i=fi(e),s=fi(t);return n||(t!==s&&Po(i,"has",t),Po(i,"has",s)),t===s?e.has(t):e.has(t)||e.has(s)}function qv(t,n=!1){return t=t.__v_raw,!n&&Po(fi(t),"iterate",ah),Reflect.get(t,"size",t)}function CM(t){t=fi(t);const n=fi(this);return fy(n).has.call(n,t)||(n.add(t),Ec(n,"add",t,t)),this}function kM(t,n){n=fi(n);const e=fi(this),{has:i,get:s}=fy(e);let r=i.call(e,t);r||(t=fi(t),r=i.call(e,t));const o=s.call(e,t);return e.set(t,n),r?mH(n,o)&&Ec(e,"set",t,n):Ec(e,"add",t,n),this}function EM(t){const n=fi(this),{has:e,get:i}=fy(n);let s=e.call(n,t);s||(t=fi(t),s=e.call(n,t)),i&&i.call(n,t);const r=n.delete(t);return s&&Ec(n,"delete",t,void 0),r}function SM(){const t=fi(this),n=t.size!==0,e=t.clear();return n&&Ec(t,"clear",void 0,void 0),e}function Kv(t,n){return function(i,s){const r=this,o=r.__v_raw,a=fi(o),l=n?LS:t?DS:VS;return!t&&Po(a,"iterate",ah),o.forEach((c,u)=>i.call(s,l(c),l(u),r))}}function Gv(t,n,e){return function(...i){const s=this.__v_raw,r=fi(s),o=Hb(r),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,c=s[t](...i),u=e?LS:n?DS:VS;return!n&&Po(r,"iterate",l?Fk:ah),{next(){const{value:d,done:f}=c.next();return f?{value:d,done:f}:{value:a?[u(d[0]),u(d[1])]:u(d),done:f}},[Symbol.iterator](){return this}}}}function nu(t){return function(...n){return t==="delete"?!1:this}}function TRe(){const t={get(r){return Wv(this,r)},get size(){return qv(this)},has:jv,add:CM,set:kM,delete:EM,clear:SM,forEach:Kv(!1,!1)},n={get(r){return Wv(this,r,!1,!0)},get size(){return qv(this)},has:jv,add:CM,set:kM,delete:EM,clear:SM,forEach:Kv(!1,!0)},e={get(r){return Wv(this,r,!0)},get size(){return qv(this,!0)},has(r){return jv.call(this,r,!0)},add:nu("add"),set:nu("set"),delete:nu("delete"),clear:nu("clear"),forEach:Kv(!0,!1)},i={get(r){return Wv(this,r,!0,!0)},get size(){return qv(this,!0)},has(r){return jv.call(this,r,!0)},add:nu("add"),set:nu("set"),delete:nu("delete"),clear:nu("clear"),forEach:Kv(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(r=>{t[r]=Gv(r,!1,!1),e[r]=Gv(r,!0,!1),n[r]=Gv(r,!1,!0),i[r]=Gv(r,!0,!0)}),[t,e,n,i]}const[xRe,ARe,IRe,RRe]=TRe();function BS(t,n){const e=n?t?RRe:IRe:t?ARe:xRe;return(i,s,r)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?i:Reflect.get(dy(e,s)&&s in i?e:i,s,r)}const MRe={get:BS(!1,!1)},PRe={get:BS(!1,!0)},ORe={get:BS(!0,!1)},CH=new WeakMap,kH=new WeakMap,EH=new WeakMap,LRe=new WeakMap;function BRe(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function FRe(t){return t.__v_skip||!Object.isExtensible(t)?0:BRe(lRe(t))}function FS(t){return _1(t)?t:NS(t,!1,yH,MRe,CH)}function NRe(t){return NS(t,!1,SRe,PRe,kH)}function SH(t){return NS(t,!0,ERe,ORe,EH)}function NS(t,n,e,i,s){if(!hy(t)||t.__v_raw&&!(n&&t.__v_isReactive))return t;const r=s.get(t);if(r)return r;const o=FRe(t);if(o===0)return t;const a=new Proxy(t,o===2?i:e);return s.set(t,a),a}function Uf(t){return _1(t)?Uf(t.__v_raw):!!(t&&t.__v_isReactive)}function _1(t){return!!(t&&t.__v_isReadonly)}function Vk(t){return!!(t&&t.__v_isShallow)}function TH(t){return Uf(t)||_1(t)}function fi(t){const n=t&&t.__v_raw;return n?fi(n):t}function xH(t){return cRe(t,"__v_skip",!0),t}const VS=t=>hy(t)?FS(t):t,DS=t=>hy(t)?SH(t):t;function VRe(t){Ou&&Aa&&(t=fi(t),bH(t.dep||(t.dep=MS())))}function DRe(t,n){t=fi(t),t.dep&&Nk(t.dep)}function Sr(t){return!!(t&&t.__v_isRef===!0)}function $Re(t){return Sr(t)?t.value:t}const zRe={get:(t,n,e)=>$Re(Reflect.get(t,n,e)),set:(t,n,e,i)=>{const s=t[n];return Sr(s)&&!Sr(e)?(s.value=e,!0):Reflect.set(t,n,e,i)}};function AH(t){return Uf(t)?t:new Proxy(t,zRe)}class HRe{constructor(n,e,i,s){this._setter=e,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new PS(n,()=>{this._dirty||(this._dirty=!0,DRe(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=i}get value(){const n=fi(this);return VRe(n),(n._dirty||!n._cacheable)&&(n._dirty=!1,n._value=n.effect.run()),n._value}set value(n){this._setter(n)}}function URe(t,n,e=!1){let i,s;const r=rRe(t);return r?(i=t,s=nRe):(i=t.get,s=t.set),new HRe(i,s,r||!s,e)}function WRe(t,n){const e=Object.create(null),i=t.split(",");for(let s=0;s<i.length;s++)e[i[s]]=!0;return s=>!!e[s]}function Wi(t){if(ei(t)){const n={};for(let e=0;e<t.length;e++){const i=t[e],s=xr(i)?KRe(i):Wi(i);if(s)for(const r in s)n[r]=s[r]}return n}else{if(xr(t))return t;if(Ar(t))return t}}const jRe=/;(?![^(]*\))/g,qRe=/:(.+)/;function KRe(t){const n={};return t.split(jRe).forEach(e=>{if(e){const i=e.split(qRe);i.length>1&&(n[i[0].trim()]=i[1].trim())}}),n}function Pn(t){let n="";if(xr(t))n=t;else if(ei(t))for(let e=0;e<t.length;e++){const i=Pn(t[e]);i&&(n+=i+" ")}else if(Ar(t))for(const e in t)t[e]&&(n+=e+" ");return n.trim()}function Ci(t){if(!t)return null;let{class:n,style:e}=t;return n&&!xr(n)&&(t.class=Pn(n)),e&&(t.style=Wi(e)),t}const fn=t=>xr(t)?t:t==null?"":ei(t)||Ar(t)&&(t.toString===LH||!Nn(t.toString))?JSON.stringify(t,IH,2):String(t),IH=(t,n)=>n&&n.__v_isRef?IH(t,n.value):MH(n)?{[`Map(${n.size})`]:[...n.entries()].reduce((e,[i,s])=>(e[`${i} =>`]=s,e),{})}:PH(n)?{[`Set(${n.size})`]:[...n.values()]}:Ar(n)&&!ei(n)&&!BH(n)?String(n):n,Mi={},Wf=[],dc=()=>{},GRe=()=>!1,YRe=/^on[^a-z]/,$S=t=>YRe.test(t),RH=t=>t.startsWith("onUpdate:"),Oo=Object.assign,zS=(t,n)=>{const e=t.indexOf(n);e>-1&&t.splice(e,1)},ZRe=Object.prototype.hasOwnProperty,ui=(t,n)=>ZRe.call(t,n),ei=Array.isArray,MH=t=>HS(t)==="[object Map]",PH=t=>HS(t)==="[object Set]",Nn=t=>typeof t=="function",xr=t=>typeof t=="string",Ar=t=>t!==null&&typeof t=="object",OH=t=>Ar(t)&&Nn(t.then)&&Nn(t.catch),LH=Object.prototype.toString,HS=t=>LH.call(t),BH=t=>HS(t)==="[object Object]",Ub=WRe(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),my=t=>{const n=Object.create(null);return e=>n[e]||(n[e]=t(e))},XRe=/-(\w)/g,Tl=my(t=>t.replace(XRe,(n,e)=>e?e.toUpperCase():"")),JRe=/\B([A-Z])/g,py=my(t=>t.replace(JRe,"-$1").toLowerCase()),US=my(t=>t.charAt(0).toUpperCase()+t.slice(1)),a3=my(t=>t?`on${US(t)}`:""),TM=(t,n)=>!Object.is(t,n),l3=(t,n)=>{for(let e=0;e<t.length;e++)t[e](n)},Dk=(t,n,e)=>{Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value:e})},QRe=t=>{const n=parseFloat(t);return isNaN(n)?t:n};let xM;const eMe=()=>xM||(xM=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Lu(t,n,e,i){let s;try{s=i?t(...i):t()}catch(r){gy(r,n,e)}return s}function ia(t,n,e,i){if(Nn(t)){const r=Lu(t,n,e,i);return r&&OH(r)&&r.catch(o=>{gy(o,n,e)}),r}const s=[];for(let r=0;r<t.length;r++)s.push(ia(t[r],n,e,i));return s}function gy(t,n,e,i=!0){const s=n?n.vnode:null;if(n){let r=n.parent;const o=n.proxy,a=e;for(;r;){const c=r.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](t,o,a)===!1)return}r=r.parent}const l=n.appContext.config.errorHandler;if(l){Lu(l,null,10,[t,o,a]);return}}tMe(t,e,s,i)}function tMe(t,n,e,i=!0){console.error(t)}let $_=!1,$k=!1;const vo=[];let tc=0;const Rg=[];let Yp=null,Af=0;const Mg=[];let mu=null,If=0;const FH=Promise.resolve();let WS=null,zk=null;function NH(t){const n=WS||FH;return t?n.then(this?t.bind(this):t):n}function nMe(t){let n=tc+1,e=vo.length;for(;n<e;){const i=n+e>>>1;w1(vo[i])<t?n=i+1:e=i}return n}function VH(t){(!vo.length||!vo.includes(t,$_&&t.allowRecurse?tc+1:tc))&&t!==zk&&(t.id==null?vo.push(t):vo.splice(nMe(t.id),0,t),DH())}function DH(){!$_&&!$k&&($k=!0,WS=FH.then(HH))}function iMe(t){const n=vo.indexOf(t);n>tc&&vo.splice(n,1)}function $H(t,n,e,i){ei(t)?e.push(...t):(!n||!n.includes(t,t.allowRecurse?i+1:i))&&e.push(t),DH()}function sMe(t){$H(t,Yp,Rg,Af)}function rMe(t){$H(t,mu,Mg,If)}function vy(t,n=null){if(Rg.length){for(zk=n,Yp=[...new Set(Rg)],Rg.length=0,Af=0;Af<Yp.length;Af++)Yp[Af]();Yp=null,Af=0,zk=null,vy(t,n)}}function zH(t){if(vy(),Mg.length){const n=[...new Set(Mg)];if(Mg.length=0,mu){mu.push(...n);return}for(mu=n,mu.sort((e,i)=>w1(e)-w1(i)),If=0;If<mu.length;If++)mu[If]();mu=null,If=0}}const w1=t=>t.id==null?1/0:t.id;function HH(t){$k=!1,$_=!0,vy(t),vo.sort((n,e)=>w1(n)-w1(e));try{for(tc=0;tc<vo.length;tc++){const n=vo[tc];n&&n.active!==!1&&Lu(n,null,14)}}finally{tc=0,vo.length=0,zH(),$_=!1,WS=null,(vo.length||Rg.length||Mg.length)&&HH(t)}}function oMe(t,n,...e){if(t.isUnmounted)return;const i=t.vnode.props||Mi;let s=e;const r=n.startsWith("update:"),o=r&&n.slice(7);if(o&&o in i){const u=`${o==="modelValue"?"model":o}Modifiers`,{number:d,trim:f}=i[u]||Mi;f&&(s=e.map(p=>p.trim())),d&&(s=e.map(QRe))}let a,l=i[a=a3(n)]||i[a=a3(Tl(n))];!l&&r&&(l=i[a=a3(py(n))]),l&&ia(l,t,6,s);const c=i[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,ia(c,t,6,s)}}function UH(t,n,e=!1){const i=n.emitsCache,s=i.get(t);if(s!==void 0)return s;const r=t.emits;let o={},a=!1;if(!Nn(t)){const l=c=>{const u=UH(c,n,!0);u&&(a=!0,Oo(o,u))};!e&&n.mixins.length&&n.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!r&&!a?(i.set(t,null),null):(ei(r)?r.forEach(l=>o[l]=null):Oo(o,r),i.set(t,o),o)}function by(t,n){return!t||!$S(n)?!1:(n=n.slice(2).replace(/Once$/,""),ui(t,n[0].toLowerCase()+n.slice(1))||ui(t,py(n))||ui(t,n))}let hr=null,WH=null;function z_(t){const n=hr;return hr=t,WH=t&&t.type.__scopeId||null,n}function rn(t,n=hr,e){if(!n||t._n)return t;const i=(...s)=>{i._d&&VM(-1);const r=z_(n),o=t(...s);return z_(r),i._d&&VM(1),o};return i._n=!0,i._c=!0,i._d=!0,i}function c3(t){const{type:n,vnode:e,proxy:i,withProxy:s,props:r,propsOptions:[o],slots:a,attrs:l,emit:c,render:u,renderCache:d,data:f,setupState:p,ctx:m,inheritAttrs:v}=t;let y,_;const b=z_(t);try{if(e.shapeFlag&4){const x=s||i;y=fl(u.call(x,x,d,r,p,f,m)),_=l}else{const x=n;y=fl(x.length>1?x(r,{attrs:l,slots:a,emit:c}):x(r,null)),_=n.props?l:aMe(l)}}catch(x){Og.length=0,gy(x,t,1),y=It(sa)}let E=y;if(_&&v!==!1){const x=Object.keys(_),{shapeFlag:A}=E;x.length&&A&7&&(o&&x.some(RH)&&(_=lMe(_,o)),E=Uu(E,_))}return e.dirs&&(E=Uu(E),E.dirs=E.dirs?E.dirs.concat(e.dirs):e.dirs),e.transition&&(E.transition=e.transition),y=E,z_(b),y}const aMe=t=>{let n;for(const e in t)(e==="class"||e==="style"||$S(e))&&((n||(n={}))[e]=t[e]);return n},lMe=(t,n)=>{const e={};for(const i in t)(!RH(i)||!(i.slice(9)in n))&&(e[i]=t[i]);return e};function cMe(t,n,e){const{props:i,children:s,component:r}=t,{props:o,children:a,patchFlag:l}=n,c=r.emitsOptions;if(n.dirs||n.transition)return!0;if(e&&l>=0){if(l&1024)return!0;if(l&16)return i?AM(i,o,c):!!o;if(l&8){const u=n.dynamicProps;for(let d=0;d<u.length;d++){const f=u[d];if(o[f]!==i[f]&&!by(c,f))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:i===o?!1:i?o?AM(i,o,c):!0:!!o;return!1}function AM(t,n,e){const i=Object.keys(n);if(i.length!==Object.keys(t).length)return!0;for(let s=0;s<i.length;s++){const r=i[s];if(n[r]!==t[r]&&!by(e,r))return!0}return!1}function uMe({vnode:t,parent:n},e){for(;n&&n.subTree===t;)(t=n.vnode).el=e,n=n.parent}const dMe=t=>t.__isSuspense;function hMe(t,n){n&&n.pendingBranch?ei(t)?n.effects.push(...t):n.effects.push(t):rMe(t)}function fMe(t,n){if($s){let e=$s.provides;const i=$s.parent&&$s.parent.provides;i===e&&(e=$s.provides=Object.create(i)),e[t]=n}}function u3(t,n,e=!1){const i=$s||hr;if(i){const s=i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides;if(s&&t in s)return s[t];if(arguments.length>1)return e&&Nn(n)?n.call(i.proxy):n}}const IM={};function d3(t,n,e){return jH(t,n,e)}function jH(t,n,{immediate:e,deep:i,flush:s,onTrack:r,onTrigger:o}=Mi){const a=$s;let l,c=!1,u=!1;if(Sr(t)?(l=()=>t.value,c=Vk(t)):Uf(t)?(l=()=>t,i=!0):ei(t)?(u=!0,c=t.some(_=>Uf(_)||Vk(_)),l=()=>t.map(_=>{if(Sr(_))return _.value;if(Uf(_))return Zd(_);if(Nn(_))return Lu(_,a,2)})):Nn(t)?n?l=()=>Lu(t,a,2):l=()=>{if(!(a&&a.isUnmounted))return d&&d(),ia(t,a,3,[f])}:l=dc,n&&i){const _=l;l=()=>Zd(_())}let d,f=_=>{d=y.onStop=()=>{Lu(_,a,4)}};if(E1)return f=dc,n?e&&ia(n,a,3,[l(),u?[]:void 0,f]):l(),dc;let p=u?[]:IM;const m=()=>{if(y.active)if(n){const _=y.run();(i||c||(u?_.some((b,E)=>TM(b,p[E])):TM(_,p)))&&(d&&d(),ia(n,a,3,[_,p===IM?void 0:p,f]),p=_)}else y.run()};m.allowRecurse=!!n;let v;s==="sync"?v=m:s==="post"?v=()=>$r(m,a&&a.suspense):v=()=>sMe(m);const y=new PS(l,v);return n?e?m():p=y.run():s==="post"?$r(y.run.bind(y),a&&a.suspense):y.run(),()=>{y.stop(),a&&a.scope&&zS(a.scope.effects,y)}}function mMe(t,n,e){const i=this.proxy,s=xr(t)?t.includes(".")?qH(i,t):()=>i[t]:t.bind(i,i);let r;Nn(n)?r=n:(r=n.handler,e=n);const o=$s;pm(this);const a=jH(s,r.bind(i),e);return o?pm(o):lh(),a}function qH(t,n){const e=n.split(".");return()=>{let i=t;for(let s=0;s<e.length&&i;s++)i=i[e[s]];return i}}function Zd(t,n){if(!Ar(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),Sr(t))Zd(t.value,n);else if(ei(t))for(let e=0;e<t.length;e++)Zd(t[e],n);else if(PH(t)||MH(t))t.forEach(e=>{Zd(e,n)});else if(BH(t))for(const e in t)Zd(t[e],n);return t}function KH(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return XH(()=>{t.isMounted=!0}),QH(()=>{t.isUnmounting=!0}),t}const jo=[Function,Array],pMe={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:jo,onEnter:jo,onAfterEnter:jo,onEnterCancelled:jo,onBeforeLeave:jo,onLeave:jo,onAfterLeave:jo,onLeaveCancelled:jo,onBeforeAppear:jo,onAppear:jo,onAfterAppear:jo,onAppearCancelled:jo},setup(t,{slots:n}){const e=mU(),i=KH();let s;return()=>{const r=n.default&&jS(n.default(),!0);if(!r||!r.length)return;let o=r[0];if(r.length>1){for(const v of r)if(v.type!==sa){o=v;break}}const a=fi(t),{mode:l}=a;if(i.isLeaving)return h3(o);const c=RM(o);if(!c)return h3(o);const u=y1(c,a,i,e);C1(c,u);const d=e.subTree,f=d&&RM(d);let p=!1;const{getTransitionKey:m}=c.type;if(m){const v=m();s===void 0?s=v:v!==s&&(s=v,p=!0)}if(f&&f.type!==sa&&(!Hd(c,f)||p)){const v=y1(f,a,i,e);if(C1(f,v),l==="out-in")return i.isLeaving=!0,v.afterLeave=()=>{i.isLeaving=!1,e.update()},h3(o);l==="in-out"&&c.type!==sa&&(v.delayLeave=(y,_,b)=>{const E=YH(i,f);E[String(f.key)]=f,y._leaveCb=()=>{_(),y._leaveCb=void 0,delete u.delayedLeave},u.delayedLeave=b})}return o}}},GH=pMe;function YH(t,n){const{leavingVNodes:e}=t;let i=e.get(n.type);return i||(i=Object.create(null),e.set(n.type,i)),i}function y1(t,n,e,i){const{appear:s,mode:r,persisted:o=!1,onBeforeEnter:a,onEnter:l,onAfterEnter:c,onEnterCancelled:u,onBeforeLeave:d,onLeave:f,onAfterLeave:p,onLeaveCancelled:m,onBeforeAppear:v,onAppear:y,onAfterAppear:_,onAppearCancelled:b}=n,E=String(t.key),x=YH(e,t),A=(O,M)=>{O&&ia(O,i,9,M)},I=(O,M)=>{const T=M[1];A(O,M),ei(O)?O.every(P=>P.length<=1)&&T():O.length<=1&&T()},k={mode:r,persisted:o,beforeEnter(O){let M=a;if(!e.isMounted)if(s)M=v||a;else return;O._leaveCb&&O._leaveCb(!0);const T=x[E];T&&Hd(t,T)&&T.el._leaveCb&&T.el._leaveCb(),A(M,[O])},enter(O){let M=l,T=c,P=u;if(!e.isMounted)if(s)M=y||l,T=_||c,P=b||u;else return;let R=!1;const L=O._enterCb=F=>{R||(R=!0,F?A(P,[O]):A(T,[O]),k.delayedLeave&&k.delayedLeave(),O._enterCb=void 0)};M?I(M,[O,L]):L()},leave(O,M){const T=String(t.key);if(O._enterCb&&O._enterCb(!0),e.isUnmounting)return M();A(d,[O]);let P=!1;const R=O._leaveCb=L=>{P||(P=!0,M(),L?A(m,[O]):A(p,[O]),O._leaveCb=void 0,x[T]===t&&delete x[T])};x[T]=t,f?I(f,[O,R]):R()},clone(O){return y1(O,n,e,i)}};return k}function h3(t){if(_y(t))return t=Uu(t),t.children=null,t}function RM(t){return _y(t)?t.children?t.children[0]:void 0:t}function C1(t,n){t.shapeFlag&6&&t.component?C1(t.component.subTree,n):t.shapeFlag&128?(t.ssContent.transition=n.clone(t.ssContent),t.ssFallback.transition=n.clone(t.ssFallback)):t.transition=n}function jS(t,n=!1,e){let i=[],s=0;for(let r=0;r<t.length;r++){let o=t[r];const a=e==null?o.key:String(e)+String(o.key!=null?o.key:r);o.type===Yn?(o.patchFlag&128&&s++,i=i.concat(jS(o.children,n,a))):(n||o.type!==sa)&&i.push(a!=null?Uu(o,{key:a}):o)}if(s>1)for(let r=0;r<i.length;r++)i[r].patchFlag=-2;return i}function gMe(t){return Nn(t)?{setup:t,name:t.name}:t}const Pg=t=>!!t.type.__asyncLoader,_y=t=>t.type.__isKeepAlive;function vMe(t,n){ZH(t,"a",n)}function bMe(t,n){ZH(t,"da",n)}function ZH(t,n,e=$s){const i=t.__wdc||(t.__wdc=()=>{let s=e;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(wy(n,i,e),e){let s=e.parent;for(;s&&s.parent;)_y(s.parent.vnode)&&_Me(i,n,e,s),s=s.parent}}function _Me(t,n,e,i){const s=wy(n,t,i,!0);eU(()=>{zS(i[n],s)},e)}function wy(t,n,e=$s,i=!1){if(e){const s=e[t]||(e[t]=[]),r=n.__weh||(n.__weh=(...o)=>{if(e.isUnmounted)return;Dm(),pm(e);const a=ia(n,e,t,o);return lh(),$m(),a});return i?s.unshift(r):s.push(r),r}}const Bc=t=>(n,e=$s)=>(!E1||t==="sp")&&wy(t,n,e),wMe=Bc("bm"),XH=Bc("m"),yMe=Bc("bu"),JH=Bc("u"),QH=Bc("bum"),eU=Bc("um"),CMe=Bc("sp"),kMe=Bc("rtg"),EMe=Bc("rtc");function SMe(t,n=$s){wy("ec",t,n)}function Sc(t,n){const e=hr;if(e===null)return t;const i=ky(e)||e.proxy,s=t.dirs||(t.dirs=[]);for(let r=0;r<n.length;r++){let[o,a,l,c=Mi]=n[r];Nn(o)&&(o={mounted:o,updated:o}),o.deep&&Zd(a),s.push({dir:o,instance:i,value:a,oldValue:void 0,arg:l,modifiers:c})}return t}function Ed(t,n,e,i){const s=t.dirs,r=n&&n.dirs;for(let o=0;o<s.length;o++){const a=s[o];r&&(a.oldValue=r[o].value);let l=a.dir[i];l&&(Dm(),ia(l,e,8,[t.el,a,t,n]),$m())}}const qS="components",TMe="directives";function tn(t,n){return KS(qS,t,!0,n)||t}const tU=Symbol();function xMe(t){return xr(t)?KS(qS,t,!1)||t:t||tU}function yy(t){return KS(TMe,t)}function KS(t,n,e=!0,i=!1){const s=hr||$s;if(s){const r=s.type;if(t===qS){const a=ePe(r,!1);if(a&&(a===n||a===Tl(n)||a===US(Tl(n))))return r}const o=MM(s[t]||r[t],n)||MM(s.appContext[t],n);return!o&&i?r:o}}function MM(t,n){return t&&(t[n]||t[Tl(n)]||t[US(Tl(n))])}function Tn(t,n,e,i){let s;const r=e;if(ei(t)||xr(t)){s=new Array(t.length);for(let o=0,a=t.length;o<a;o++)s[o]=n(t[o],o,void 0,r)}else if(typeof t=="number"){s=new Array(t);for(let o=0;o<t;o++)s[o]=n(o+1,o,void 0,r)}else if(Ar(t))if(t[Symbol.iterator])s=Array.from(t,(o,a)=>n(o,a,void 0,r));else{const o=Object.keys(t);s=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const c=o[a];s[a]=n(t[c],c,a,r)}}else s=[];return s}function ki(t,n){for(let e=0;e<n.length;e++){const i=n[e];if(ei(i))for(let s=0;s<i.length;s++)t[i[s].name]=i[s].fn;else i&&(t[i.name]=i.fn)}return t}function xt(t,n,e={},i,s){if(hr.isCE||hr.parent&&Pg(hr.parent)&&hr.parent.isCE)return It("slot",n==="default"?null:{name:n},i&&i());let r=t[n];r&&r._c&&(r._d=!1),Ve();const o=r&&nU(r(e)),a=mi(Yn,{key:e.key||`_${n}`},o||(i?i():[]),o&&t._===1?64:-2);return a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),r&&r._c&&(r._d=!0),a}function nU(t){return t.some(n=>W_(n)?!(n.type===sa||n.type===Yn&&!nU(n.children)):!0)?t:null}const Hk=t=>t?pU(t)?ky(t)||t.proxy:Hk(t.parent):null,H_=Oo(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Hk(t.parent),$root:t=>Hk(t.root),$emit:t=>t.emit,$options:t=>sU(t),$forceUpdate:t=>t.f||(t.f=()=>VH(t.update)),$nextTick:t=>t.n||(t.n=NH.bind(t.proxy)),$watch:t=>mMe.bind(t)}),AMe={get({_:t},n){const{ctx:e,setupState:i,data:s,props:r,accessCache:o,type:a,appContext:l}=t;let c;if(n[0]!=="$"){const p=o[n];if(p!==void 0)switch(p){case 1:return i[n];case 2:return s[n];case 4:return e[n];case 3:return r[n]}else{if(i!==Mi&&ui(i,n))return o[n]=1,i[n];if(s!==Mi&&ui(s,n))return o[n]=2,s[n];if((c=t.propsOptions[0])&&ui(c,n))return o[n]=3,r[n];if(e!==Mi&&ui(e,n))return o[n]=4,e[n];Uk&&(o[n]=0)}}const u=H_[n];let d,f;if(u)return n==="$attrs"&&Po(t,"get",n),u(t);if((d=a.__cssModules)&&(d=d[n]))return d;if(e!==Mi&&ui(e,n))return o[n]=4,e[n];if(f=l.config.globalProperties,ui(f,n))return f[n]},set({_:t},n,e){const{data:i,setupState:s,ctx:r}=t;return s!==Mi&&ui(s,n)?(s[n]=e,!0):i!==Mi&&ui(i,n)?(i[n]=e,!0):ui(t.props,n)||n[0]==="$"&&n.slice(1)in t?!1:(r[n]=e,!0)},has({_:{data:t,setupState:n,accessCache:e,ctx:i,appContext:s,propsOptions:r}},o){let a;return!!e[o]||t!==Mi&&ui(t,o)||n!==Mi&&ui(n,o)||(a=r[0])&&ui(a,o)||ui(i,o)||ui(H_,o)||ui(s.config.globalProperties,o)},defineProperty(t,n,e){return e.get!=null?t._.accessCache[n]=0:ui(e,"value")&&this.set(t,n,e.value,null),Reflect.defineProperty(t,n,e)}};let Uk=!0;function IMe(t){const n=sU(t),e=t.proxy,i=t.ctx;Uk=!1,n.beforeCreate&&PM(n.beforeCreate,t,"bc");const{data:s,computed:r,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:d,mounted:f,beforeUpdate:p,updated:m,activated:v,deactivated:y,beforeDestroy:_,beforeUnmount:b,destroyed:E,unmounted:x,render:A,renderTracked:I,renderTriggered:k,errorCaptured:O,serverPrefetch:M,expose:T,inheritAttrs:P,components:R,directives:L,filters:F}=n;if(c&&RMe(c,i,null,t.appContext.config.unwrapInjectedRef),o)for(const J in o){const q=o[J];Nn(q)&&(i[J]=q.bind(e))}if(s){const J=s.call(e,e);Ar(J)&&(t.data=FS(J))}if(Uk=!0,r)for(const J in r){const q=r[J],G=Nn(q)?q.bind(e,e):Nn(q.get)?q.get.bind(e,e):dc,S=!Nn(q)&&Nn(q.set)?q.set.bind(e):dc,V=nPe({get:G,set:S});Object.defineProperty(i,J,{enumerable:!0,configurable:!0,get:()=>V.value,set:re=>V.value=re})}if(a)for(const J in a)iU(a[J],i,e,J);if(l){const J=Nn(l)?l.call(e):l;Reflect.ownKeys(J).forEach(q=>{fMe(q,J[q])})}u&&PM(u,t,"c");function z(J,q){ei(q)?q.forEach(G=>J(G.bind(e))):q&&J(q.bind(e))}if(z(wMe,d),z(XH,f),z(yMe,p),z(JH,m),z(vMe,v),z(bMe,y),z(SMe,O),z(EMe,I),z(kMe,k),z(QH,b),z(eU,x),z(CMe,M),ei(T))if(T.length){const J=t.exposed||(t.exposed={});T.forEach(q=>{Object.defineProperty(J,q,{get:()=>e[q],set:G=>e[q]=G})})}else t.exposed||(t.exposed={});A&&t.render===dc&&(t.render=A),P!=null&&(t.inheritAttrs=P),R&&(t.components=R),L&&(t.directives=L)}function RMe(t,n,e=dc,i=!1){ei(t)&&(t=Wk(t));for(const s in t){const r=t[s];let o;Ar(r)?"default"in r?o=u3(r.from||s,r.default,!0):o=u3(r.from||s):o=u3(r),Sr(o)&&i?Object.defineProperty(n,s,{enumerable:!0,configurable:!0,get:()=>o.value,set:a=>o.value=a}):n[s]=o}}function PM(t,n,e){ia(ei(t)?t.map(i=>i.bind(n.proxy)):t.bind(n.proxy),n,e)}function iU(t,n,e,i){const s=i.includes(".")?qH(e,i):()=>e[i];if(xr(t)){const r=n[t];Nn(r)&&d3(s,r)}else if(Nn(t))d3(s,t.bind(e));else if(Ar(t))if(ei(t))t.forEach(r=>iU(r,n,e,i));else{const r=Nn(t.handler)?t.handler.bind(e):n[t.handler];Nn(r)&&d3(s,r,t)}}function sU(t){const n=t.type,{mixins:e,extends:i}=n,{mixins:s,optionsCache:r,config:{optionMergeStrategies:o}}=t.appContext,a=r.get(n);let l;return a?l=a:!s.length&&!e&&!i?l=n:(l={},s.length&&s.forEach(c=>U_(l,c,o,!0)),U_(l,n,o)),r.set(n,l),l}function U_(t,n,e,i=!1){const{mixins:s,extends:r}=n;r&&U_(t,r,e,!0),s&&s.forEach(o=>U_(t,o,e,!0));for(const o in n)if(!(i&&o==="expose")){const a=MMe[o]||e&&e[o];t[o]=a?a(t[o],n[o]):n[o]}return t}const MMe={data:OM,props:Fd,emits:Fd,methods:Fd,computed:Fd,beforeCreate:Cr,created:Cr,beforeMount:Cr,mounted:Cr,beforeUpdate:Cr,updated:Cr,beforeDestroy:Cr,beforeUnmount:Cr,destroyed:Cr,unmounted:Cr,activated:Cr,deactivated:Cr,errorCaptured:Cr,serverPrefetch:Cr,components:Fd,directives:Fd,watch:OMe,provide:OM,inject:PMe};function OM(t,n){return n?t?function(){return Oo(Nn(t)?t.call(this,this):t,Nn(n)?n.call(this,this):n)}:n:t}function PMe(t,n){return Fd(Wk(t),Wk(n))}function Wk(t){if(ei(t)){const n={};for(let e=0;e<t.length;e++)n[t[e]]=t[e];return n}return t}function Cr(t,n){return t?[...new Set([].concat(t,n))]:n}function Fd(t,n){return t?Oo(Oo(Object.create(null),t),n):n}function OMe(t,n){if(!t)return n;if(!n)return t;const e=Oo(Object.create(null),t);for(const i in n)e[i]=Cr(t[i],n[i]);return e}function LMe(t,n,e,i=!1){const s={},r={};Dk(r,Cy,1),t.propsDefaults=Object.create(null),rU(t,n,s,r);for(const o in t.propsOptions[0])o in s||(s[o]=void 0);e?t.props=i?s:NRe(s):t.type.props?t.props=s:t.props=r,t.attrs=r}function BMe(t,n,e,i){const{props:s,attrs:r,vnode:{patchFlag:o}}=t,a=fi(s),[l]=t.propsOptions;let c=!1;if((i||o>0)&&!(o&16)){if(o&8){const u=t.vnode.dynamicProps;for(let d=0;d<u.length;d++){let f=u[d];if(by(t.emitsOptions,f))continue;const p=n[f];if(l)if(ui(r,f))p!==r[f]&&(r[f]=p,c=!0);else{const m=Tl(f);s[m]=jk(l,a,m,p,t,!1)}else p!==r[f]&&(r[f]=p,c=!0)}}}else{rU(t,n,s,r)&&(c=!0);let u;for(const d in a)(!n||!ui(n,d)&&((u=py(d))===d||!ui(n,u)))&&(l?e&&(e[d]!==void 0||e[u]!==void 0)&&(s[d]=jk(l,a,d,void 0,t,!0)):delete s[d]);if(r!==a)for(const d in r)(!n||!ui(n,d))&&(delete r[d],c=!0)}c&&Ec(t,"set","$attrs")}function rU(t,n,e,i){const[s,r]=t.propsOptions;let o=!1,a;if(n)for(let l in n){if(Ub(l))continue;const c=n[l];let u;s&&ui(s,u=Tl(l))?!r||!r.includes(u)?e[u]=c:(a||(a={}))[u]=c:by(t.emitsOptions,l)||(!(l in i)||c!==i[l])&&(i[l]=c,o=!0)}if(r){const l=fi(e),c=a||Mi;for(let u=0;u<r.length;u++){const d=r[u];e[d]=jk(s,l,d,c[d],t,!ui(c,d))}}return o}function jk(t,n,e,i,s,r){const o=t[e];if(o!=null){const a=ui(o,"default");if(a&&i===void 0){const l=o.default;if(o.type!==Function&&Nn(l)){const{propsDefaults:c}=s;e in c?i=c[e]:(pm(s),i=c[e]=l.call(null,n),lh())}else i=l}o[0]&&(r&&!a?i=!1:o[1]&&(i===""||i===py(e))&&(i=!0))}return i}function oU(t,n,e=!1){const i=n.propsCache,s=i.get(t);if(s)return s;const r=t.props,o={},a=[];let l=!1;if(!Nn(t)){const u=d=>{l=!0;const[f,p]=oU(d,n,!0);Oo(o,f),p&&a.push(...p)};!e&&n.mixins.length&&n.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!r&&!l)return i.set(t,Wf),Wf;if(ei(r))for(let u=0;u<r.length;u++){const d=Tl(r[u]);LM(d)&&(o[d]=Mi)}else if(r)for(const u in r){const d=Tl(u);if(LM(d)){const f=r[u],p=o[d]=ei(f)||Nn(f)?{type:f}:f;if(p){const m=NM(Boolean,p.type),v=NM(String,p.type);p[0]=m>-1,p[1]=v<0||m<v,(m>-1||ui(p,"default"))&&a.push(d)}}}const c=[o,a];return i.set(t,c),c}function LM(t){return t[0]!=="$"}function BM(t){const n=t&&t.toString().match(/^\s*function (\w+)/);return n?n[1]:t===null?"null":""}function FM(t,n){return BM(t)===BM(n)}function NM(t,n){return ei(n)?n.findIndex(e=>FM(e,t)):Nn(n)&&FM(n,t)?0:-1}const aU=t=>t[0]==="_"||t==="$stable",GS=t=>ei(t)?t.map(fl):[fl(t)],FMe=(t,n,e)=>{if(n._n)return n;const i=rn((...s)=>GS(n(...s)),e);return i._c=!1,i},lU=(t,n,e)=>{const i=t._ctx;for(const s in t){if(aU(s))continue;const r=t[s];if(Nn(r))n[s]=FMe(s,r,i);else if(r!=null){const o=GS(r);n[s]=()=>o}}},cU=(t,n)=>{const e=GS(n);t.slots.default=()=>e},NMe=(t,n)=>{if(t.vnode.shapeFlag&32){const e=n._;e?(t.slots=fi(n),Dk(n,"_",e)):lU(n,t.slots={})}else t.slots={},n&&cU(t,n);Dk(t.slots,Cy,1)},VMe=(t,n,e)=>{const{vnode:i,slots:s}=t;let r=!0,o=Mi;if(i.shapeFlag&32){const a=n._;a?e&&a===1?r=!1:(Oo(s,n),!e&&a===1&&delete s._):(r=!n.$stable,lU(n,s)),o=n}else n&&(cU(t,n),o={default:1});if(r)for(const a in s)!aU(a)&&!(a in o)&&delete s[a]};function uU(){return{app:null,config:{isNativeTag:GRe,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let DMe=0;function $Me(t,n){return function(i,s=null){Nn(i)||(i=Object.assign({},i)),s!=null&&!Ar(s)&&(s=null);const r=uU(),o=new Set;let a=!1;const l=r.app={_uid:DMe++,_component:i,_props:s,_container:null,_context:r,_instance:null,version:sPe,get config(){return r.config},set config(c){},use(c,...u){return o.has(c)||(c&&Nn(c.install)?(o.add(c),c.install(l,...u)):Nn(c)&&(o.add(c),c(l,...u))),l},mixin(c){return r.mixins.includes(c)||r.mixins.push(c),l},component(c,u){return u?(r.components[c]=u,l):r.components[c]},directive(c,u){return u?(r.directives[c]=u,l):r.directives[c]},mount(c,u,d){if(!a){const f=It(i,s);return f.appContext=r,u&&n?n(f,c):t(f,c,d),a=!0,l._container=c,c.__vue_app__=l,ky(f.component)||f.component.proxy}},unmount(){a&&(t(null,l._container),delete l._container.__vue_app__)},provide(c,u){return r.provides[c]=u,l}};return l}}function qk(t,n,e,i,s=!1){if(ei(t)){t.forEach((f,p)=>qk(f,n&&(ei(n)?n[p]:n),e,i,s));return}if(Pg(i)&&!s)return;const r=i.shapeFlag&4?ky(i.component)||i.component.proxy:i.el,o=s?null:r,{i:a,r:l}=t,c=n&&n.r,u=a.refs===Mi?a.refs={}:a.refs,d=a.setupState;if(c!=null&&c!==l&&(xr(c)?(u[c]=null,ui(d,c)&&(d[c]=null)):Sr(c)&&(c.value=null)),Nn(l))Lu(l,a,12,[o,u]);else{const f=xr(l),p=Sr(l);if(f||p){const m=()=>{if(t.f){const v=f?u[l]:l.value;s?ei(v)&&zS(v,r):ei(v)?v.includes(r)||v.push(r):f?(u[l]=[r],ui(d,l)&&(d[l]=u[l])):(l.value=[r],t.k&&(u[t.k]=l.value))}else f?(u[l]=o,ui(d,l)&&(d[l]=o)):p&&(l.value=o,t.k&&(u[t.k]=o))};o?(m.id=-1,$r(m,e)):m()}}}const $r=hMe;function zMe(t){return HMe(t)}function HMe(t,n){const e=eMe();e.__VUE__=!0;const{insert:i,remove:s,patchProp:r,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:d,nextSibling:f,setScopeId:p=dc,cloneNode:m,insertStaticContent:v}=t,y=(D,$,X,le=null,ie=null,be=null,Ae=!1,_e=null,Ee=!!$.dynamicChildren)=>{if(D===$)return;D&&!Hd(D,$)&&(le=me(D),U(D,ie,be,!0),D=null),$.patchFlag===-2&&(Ee=!1,$.dynamicChildren=null);const{type:he,ref:He,shapeFlag:ze}=$;switch(he){case YS:_(D,$,X,le);break;case sa:b(D,$,X,le);break;case f3:D==null&&E($,X,le,Ae);break;case Yn:L(D,$,X,le,ie,be,Ae,_e,Ee);break;default:ze&1?I(D,$,X,le,ie,be,Ae,_e,Ee):ze&6?F(D,$,X,le,ie,be,Ae,_e,Ee):(ze&64||ze&128)&&he.process(D,$,X,le,ie,be,Ae,_e,Ee,ge)}He!=null&&ie&&qk(He,D&&D.ref,be,$||D,!$)},_=(D,$,X,le)=>{if(D==null)i($.el=a($.children),X,le);else{const ie=$.el=D.el;$.children!==D.children&&c(ie,$.children)}},b=(D,$,X,le)=>{D==null?i($.el=l($.children||""),X,le):$.el=D.el},E=(D,$,X,le)=>{[D.el,D.anchor]=v(D.children,$,X,le,D.el,D.anchor)},x=({el:D,anchor:$},X,le)=>{let ie;for(;D&&D!==$;)ie=f(D),i(D,X,le),D=ie;i($,X,le)},A=({el:D,anchor:$})=>{let X;for(;D&&D!==$;)X=f(D),s(D),D=X;s($)},I=(D,$,X,le,ie,be,Ae,_e,Ee)=>{Ae=Ae||$.type==="svg",D==null?k($,X,le,ie,be,Ae,_e,Ee):T(D,$,ie,be,Ae,_e,Ee)},k=(D,$,X,le,ie,be,Ae,_e)=>{let Ee,he;const{type:He,props:ze,shapeFlag:de,transition:We,patchFlag:ut,dirs:Re}=D;if(D.el&&m!==void 0&&ut===-1)Ee=D.el=m(D.el);else{if(Ee=D.el=o(D.type,be,ze&&ze.is,ze),de&8?u(Ee,D.children):de&16&&M(D.children,Ee,null,le,ie,be&&He!=="foreignObject",Ae,_e),Re&&Ed(D,null,le,"created"),ze){for(const ae in ze)ae!=="value"&&!Ub(ae)&&r(Ee,ae,null,ze[ae],be,D.children,le,ie,ne);"value"in ze&&r(Ee,"value",null,ze.value),(he=ze.onVnodeBeforeMount)&&sl(he,le,D)}O(Ee,D,D.scopeId,Ae,le)}Re&&Ed(D,null,le,"beforeMount");const je=(!ie||ie&&!ie.pendingBranch)&&We&&!We.persisted;je&&We.beforeEnter(Ee),i(Ee,$,X),((he=ze&&ze.onVnodeMounted)||je||Re)&&$r(()=>{he&&sl(he,le,D),je&&We.enter(Ee),Re&&Ed(D,null,le,"mounted")},ie)},O=(D,$,X,le,ie)=>{if(X&&p(D,X),le)for(let be=0;be<le.length;be++)p(D,le[be]);if(ie){let be=ie.subTree;if($===be){const Ae=ie.vnode;O(D,Ae,Ae.scopeId,Ae.slotScopeIds,ie.parent)}}},M=(D,$,X,le,ie,be,Ae,_e,Ee=0)=>{for(let he=Ee;he<D.length;he++){const He=D[he]=_e?wu(D[he]):fl(D[he]);y(null,He,$,X,le,ie,be,Ae,_e)}},T=(D,$,X,le,ie,be,Ae)=>{const _e=$.el=D.el;let{patchFlag:Ee,dynamicChildren:he,dirs:He}=$;Ee|=D.patchFlag&16;const ze=D.props||Mi,de=$.props||Mi;let We;X&&Sd(X,!1),(We=de.onVnodeBeforeUpdate)&&sl(We,X,$,D),He&&Ed($,D,X,"beforeUpdate"),X&&Sd(X,!0);const ut=ie&&$.type!=="foreignObject";if(he?P(D.dynamicChildren,he,_e,X,le,ut,be):Ae||G(D,$,_e,null,X,le,ut,be,!1),Ee>0){if(Ee&16)R(_e,$,ze,de,X,le,ie);else if(Ee&2&&ze.class!==de.class&&r(_e,"class",null,de.class,ie),Ee&4&&r(_e,"style",ze.style,de.style,ie),Ee&8){const Re=$.dynamicProps;for(let je=0;je<Re.length;je++){const ae=Re[je],Ue=ze[ae],W=de[ae];(W!==Ue||ae==="value")&&r(_e,ae,Ue,W,ie,D.children,X,le,ne)}}Ee&1&&D.children!==$.children&&u(_e,$.children)}else!Ae&&he==null&&R(_e,$,ze,de,X,le,ie);((We=de.onVnodeUpdated)||He)&&$r(()=>{We&&sl(We,X,$,D),He&&Ed($,D,X,"updated")},le)},P=(D,$,X,le,ie,be,Ae)=>{for(let _e=0;_e<$.length;_e++){const Ee=D[_e],he=$[_e],He=Ee.el&&(Ee.type===Yn||!Hd(Ee,he)||Ee.shapeFlag&70)?d(Ee.el):X;y(Ee,he,He,null,le,ie,be,Ae,!0)}},R=(D,$,X,le,ie,be,Ae)=>{if(X!==le){for(const _e in le){if(Ub(_e))continue;const Ee=le[_e],he=X[_e];Ee!==he&&_e!=="value"&&r(D,_e,he,Ee,Ae,$.children,ie,be,ne)}if(X!==Mi)for(const _e in X)!Ub(_e)&&!(_e in le)&&r(D,_e,X[_e],null,Ae,$.children,ie,be,ne);"value"in le&&r(D,"value",X.value,le.value)}},L=(D,$,X,le,ie,be,Ae,_e,Ee)=>{const he=$.el=D?D.el:a(""),He=$.anchor=D?D.anchor:a("");let{patchFlag:ze,dynamicChildren:de,slotScopeIds:We}=$;We&&(_e=_e?_e.concat(We):We),D==null?(i(he,X,le),i(He,X,le),M($.children,X,He,ie,be,Ae,_e,Ee)):ze>0&&ze&64&&de&&D.dynamicChildren?(P(D.dynamicChildren,de,X,ie,be,Ae,_e),($.key!=null||ie&&$===ie.subTree)&&dU(D,$,!0)):G(D,$,X,He,ie,be,Ae,_e,Ee)},F=(D,$,X,le,ie,be,Ae,_e,Ee)=>{$.slotScopeIds=_e,D==null?$.shapeFlag&512?ie.ctx.activate($,X,le,Ae,Ee):B($,X,le,ie,be,Ae,Ee):z(D,$,Ee)},B=(D,$,X,le,ie,be,Ae)=>{const _e=D.component=YMe(D,le,ie);if(_y(D)&&(_e.ctx.renderer=ge),ZMe(_e),_e.asyncDep){if(ie&&ie.registerDep(_e,J),!D.el){const Ee=_e.subTree=It(sa);b(null,Ee,$,X)}return}J(_e,D,$,X,ie,be,Ae)},z=(D,$,X)=>{const le=$.component=D.component;if(cMe(D,$,X))if(le.asyncDep&&!le.asyncResolved){q(le,$,X);return}else le.next=$,iMe(le.update),le.update();else $.el=D.el,le.vnode=$},J=(D,$,X,le,ie,be,Ae)=>{const _e=()=>{if(D.isMounted){let{next:He,bu:ze,u:de,parent:We,vnode:ut}=D,Re=He,je;Sd(D,!1),He?(He.el=ut.el,q(D,He,Ae)):He=ut,ze&&l3(ze),(je=He.props&&He.props.onVnodeBeforeUpdate)&&sl(je,We,He,ut),Sd(D,!0);const ae=c3(D),Ue=D.subTree;D.subTree=ae,y(Ue,ae,d(Ue.el),me(Ue),D,ie,be),He.el=ae.el,Re===null&&uMe(D,ae.el),de&&$r(de,ie),(je=He.props&&He.props.onVnodeUpdated)&&$r(()=>sl(je,We,He,ut),ie)}else{let He;const{el:ze,props:de}=$,{bm:We,m:ut,parent:Re}=D,je=Pg($);if(Sd(D,!1),We&&l3(We),!je&&(He=de&&de.onVnodeBeforeMount)&&sl(He,Re,$),Sd(D,!0),ze&&wt){const ae=()=>{D.subTree=c3(D),wt(ze,D.subTree,D,ie,null)};je?$.type.__asyncLoader().then(()=>!D.isUnmounted&&ae()):ae()}else{const ae=D.subTree=c3(D);y(null,ae,X,le,D,ie,be),$.el=ae.el}if(ut&&$r(ut,ie),!je&&(He=de&&de.onVnodeMounted)){const ae=$;$r(()=>sl(He,Re,ae),ie)}($.shapeFlag&256||Re&&Pg(Re.vnode)&&Re.vnode.shapeFlag&256)&&D.a&&$r(D.a,ie),D.isMounted=!0,$=X=le=null}},Ee=D.effect=new PS(_e,()=>VH(he),D.scope),he=D.update=()=>Ee.run();he.id=D.uid,Sd(D,!0),he()},q=(D,$,X)=>{$.component=D;const le=D.vnode.props;D.vnode=$,D.next=null,BMe(D,$.props,le,X),VMe(D,$.children,X),Dm(),vy(void 0,D.update),$m()},G=(D,$,X,le,ie,be,Ae,_e,Ee=!1)=>{const he=D&&D.children,He=D?D.shapeFlag:0,ze=$.children,{patchFlag:de,shapeFlag:We}=$;if(de>0){if(de&128){V(he,ze,X,le,ie,be,Ae,_e,Ee);return}else if(de&256){S(he,ze,X,le,ie,be,Ae,_e,Ee);return}}We&8?(He&16&&ne(he,ie,be),ze!==he&&u(X,ze)):He&16?We&16?V(he,ze,X,le,ie,be,Ae,_e,Ee):ne(he,ie,be,!0):(He&8&&u(X,""),We&16&&M(ze,X,le,ie,be,Ae,_e,Ee))},S=(D,$,X,le,ie,be,Ae,_e,Ee)=>{D=D||Wf,$=$||Wf;const he=D.length,He=$.length,ze=Math.min(he,He);let de;for(de=0;de<ze;de++){const We=$[de]=Ee?wu($[de]):fl($[de]);y(D[de],We,X,null,ie,be,Ae,_e,Ee)}he>He?ne(D,ie,be,!0,!1,ze):M($,X,le,ie,be,Ae,_e,Ee,ze)},V=(D,$,X,le,ie,be,Ae,_e,Ee)=>{let he=0;const He=$.length;let ze=D.length-1,de=He-1;for(;he<=ze&&he<=de;){const We=D[he],ut=$[he]=Ee?wu($[he]):fl($[he]);if(Hd(We,ut))y(We,ut,X,null,ie,be,Ae,_e,Ee);else break;he++}for(;he<=ze&&he<=de;){const We=D[ze],ut=$[de]=Ee?wu($[de]):fl($[de]);if(Hd(We,ut))y(We,ut,X,null,ie,be,Ae,_e,Ee);else break;ze--,de--}if(he>ze){if(he<=de){const We=de+1,ut=We<He?$[We].el:le;for(;he<=de;)y(null,$[he]=Ee?wu($[he]):fl($[he]),X,ut,ie,be,Ae,_e,Ee),he++}}else if(he>de)for(;he<=ze;)U(D[he],ie,be,!0),he++;else{const We=he,ut=he,Re=new Map;for(he=ut;he<=de;he++){const ue=$[he]=Ee?wu($[he]):fl($[he]);ue.key!=null&&Re.set(ue.key,he)}let je,ae=0;const Ue=de-ut+1;let W=!1,K=0;const te=new Array(Ue);for(he=0;he<Ue;he++)te[he]=0;for(he=We;he<=ze;he++){const ue=D[he];if(ae>=Ue){U(ue,ie,be,!0);continue}let ee;if(ue.key!=null)ee=Re.get(ue.key);else for(je=ut;je<=de;je++)if(te[je-ut]===0&&Hd(ue,$[je])){ee=je;break}ee===void 0?U(ue,ie,be,!0):(te[ee-ut]=he+1,ee>=K?K=ee:W=!0,y(ue,$[ee],X,null,ie,be,Ae,_e,Ee),ae++)}const oe=W?UMe(te):Wf;for(je=oe.length-1,he=Ue-1;he>=0;he--){const ue=ut+he,ee=$[ue],Ce=ue+1<He?$[ue+1].el:le;te[he]===0?y(null,ee,X,Ce,ie,be,Ae,_e,Ee):W&&(je<0||he!==oe[je]?re(ee,X,Ce,2):je--)}}},re=(D,$,X,le,ie=null)=>{const{el:be,type:Ae,transition:_e,children:Ee,shapeFlag:he}=D;if(he&6){re(D.component.subTree,$,X,le);return}if(he&128){D.suspense.move($,X,le);return}if(he&64){Ae.move(D,$,X,ge);return}if(Ae===Yn){i(be,$,X);for(let ze=0;ze<Ee.length;ze++)re(Ee[ze],$,X,le);i(D.anchor,$,X);return}if(Ae===f3){x(D,$,X);return}if(le!==2&&he&1&&_e)if(le===0)_e.beforeEnter(be),i(be,$,X),$r(()=>_e.enter(be),ie);else{const{leave:ze,delayLeave:de,afterLeave:We}=_e,ut=()=>i(be,$,X),Re=()=>{ze(be,()=>{ut(),We&&We()})};de?de(be,ut,Re):Re()}else i(be,$,X)},U=(D,$,X,le=!1,ie=!1)=>{const{type:be,props:Ae,ref:_e,children:Ee,dynamicChildren:he,shapeFlag:He,patchFlag:ze,dirs:de}=D;if(_e!=null&&qk(_e,null,X,D,!0),He&256){$.ctx.deactivate(D);return}const We=He&1&&de,ut=!Pg(D);let Re;if(ut&&(Re=Ae&&Ae.onVnodeBeforeUnmount)&&sl(Re,$,D),He&6)Ne(D.component,X,le);else{if(He&128){D.suspense.unmount(X,le);return}We&&Ed(D,null,$,"beforeUnmount"),He&64?D.type.remove(D,$,X,ie,ge,le):he&&(be!==Yn||ze>0&&ze&64)?ne(he,$,X,!1,!0):(be===Yn&&ze&384||!ie&&He&16)&&ne(Ee,$,X),le&&Pe(D)}(ut&&(Re=Ae&&Ae.onVnodeUnmounted)||We)&&$r(()=>{Re&&sl(Re,$,D),We&&Ed(D,null,$,"unmounted")},X)},Pe=D=>{const{type:$,el:X,anchor:le,transition:ie}=D;if($===Yn){Fe(X,le);return}if($===f3){A(D);return}const be=()=>{s(X),ie&&!ie.persisted&&ie.afterLeave&&ie.afterLeave()};if(D.shapeFlag&1&&ie&&!ie.persisted){const{leave:Ae,delayLeave:_e}=ie,Ee=()=>Ae(X,be);_e?_e(D.el,be,Ee):Ee()}else be()},Fe=(D,$)=>{let X;for(;D!==$;)X=f(D),s(D),D=X;s($)},Ne=(D,$,X)=>{const{bum:le,scope:ie,update:be,subTree:Ae,um:_e}=D;le&&l3(le),ie.stop(),be&&(be.active=!1,U(Ae,D,$,X)),_e&&$r(_e,$),$r(()=>{D.isUnmounted=!0},$),$&&$.pendingBranch&&!$.isUnmounted&&D.asyncDep&&!D.asyncResolved&&D.suspenseId===$.pendingId&&($.deps--,$.deps===0&&$.resolve())},ne=(D,$,X,le=!1,ie=!1,be=0)=>{for(let Ae=be;Ae<D.length;Ae++)U(D[Ae],$,X,le,ie)},me=D=>D.shapeFlag&6?me(D.component.subTree):D.shapeFlag&128?D.suspense.next():f(D.anchor||D.el),pe=(D,$,X)=>{D==null?$._vnode&&U($._vnode,null,null,!0):y($._vnode||null,D,$,null,null,null,X),zH(),$._vnode=D},ge={p:y,um:U,m:re,r:Pe,mt:B,mc:M,pc:G,pbc:P,n:me,o:t};let rt,wt;return{render:pe,hydrate:rt,createApp:$Me(pe,rt)}}function Sd({effect:t,update:n},e){t.allowRecurse=n.allowRecurse=e}function dU(t,n,e=!1){const i=t.children,s=n.children;if(ei(i)&&ei(s))for(let r=0;r<i.length;r++){const o=i[r];let a=s[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[r]=wu(s[r]),a.el=o.el),e||dU(o,a))}}function UMe(t){const n=t.slice(),e=[0];let i,s,r,o,a;const l=t.length;for(i=0;i<l;i++){const c=t[i];if(c!==0){if(s=e[e.length-1],t[s]<c){n[i]=s,e.push(i);continue}for(r=0,o=e.length-1;r<o;)a=r+o>>1,t[e[a]]<c?r=a+1:o=a;c<t[e[r]]&&(r>0&&(n[i]=e[r-1]),e[r]=i)}}for(r=e.length,o=e[r-1];r-- >0;)e[r]=o,o=n[o];return e}const WMe=t=>t.__isTeleport,Yn=Symbol(void 0),YS=Symbol(void 0),sa=Symbol(void 0),f3=Symbol(void 0),Og=[];let Oa=null;function Ve(t=!1){Og.push(Oa=t?null:[])}function jMe(){Og.pop(),Oa=Og[Og.length-1]||null}let k1=1;function VM(t){k1+=t}function hU(t){return t.dynamicChildren=k1>0?Oa||Wf:null,jMe(),k1>0&&Oa&&Oa.push(t),t}function Qe(t,n,e,i,s,r){return hU(gt(t,n,e,i,s,r,!0))}function mi(t,n,e,i,s){return hU(It(t,n,e,i,s,!0))}function W_(t){return t?t.__v_isVNode===!0:!1}function Hd(t,n){return t.type===n.type&&t.key===n.key}const Cy="__vInternal",fU=({key:t})=>t??null,Wb=({ref:t,ref_key:n,ref_for:e})=>t!=null?xr(t)||Sr(t)||Nn(t)?{i:hr,r:t,k:n,f:!!e}:t:null;function gt(t,n=null,e=null,i=0,s=null,r=t===Yn?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:n,key:n&&fU(n),ref:n&&Wb(n),scopeId:WH,slotScopeIds:null,children:e,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:i,dynamicProps:s,dynamicChildren:null,appContext:null};return a?(ZS(l,e),r&128&&t.normalize(l)):e&&(l.shapeFlag|=xr(e)?8:16),k1>0&&!o&&Oa&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&Oa.push(l),l}const It=qMe;function qMe(t,n=null,e=null,i=0,s=null,r=!1){if((!t||t===tU)&&(t=sa),W_(t)){const a=Uu(t,n,!0);return e&&ZS(a,e),k1>0&&!r&&Oa&&(a.shapeFlag&6?Oa[Oa.indexOf(t)]=a:Oa.push(a)),a.patchFlag|=-2,a}if(tPe(t)&&(t=t.__vccOpts),n){n=vi(n);let{class:a,style:l}=n;a&&!xr(a)&&(n.class=Pn(a)),Ar(l)&&(TH(l)&&!ei(l)&&(l=Oo({},l)),n.style=Wi(l))}const o=xr(t)?1:dMe(t)?128:WMe(t)?64:Ar(t)?4:Nn(t)?2:0;return gt(t,n,e,i,s,o,r,!0)}function vi(t){return t?TH(t)||Cy in t?Oo({},t):t:null}function Uu(t,n,e=!1){const{props:i,ref:s,patchFlag:r,children:o}=t,a=n?XS(i||{},n):i;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&fU(a),ref:n&&n.ref?e&&s?ei(s)?s.concat(Wb(n)):[s,Wb(n)]:Wb(n):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:n&&t.type!==Yn?r===-1?16:r|16:r,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Uu(t.ssContent),ssFallback:t.ssFallback&&Uu(t.ssFallback),el:t.el,anchor:t.anchor}}function Tc(t=" ",n=0){return It(YS,null,t,n)}function Tt(t="",n=!1){return n?(Ve(),mi(sa,null,t)):It(sa,null,t)}function fl(t){return t==null||typeof t=="boolean"?It(sa):ei(t)?It(Yn,null,t.slice()):typeof t=="object"?wu(t):It(YS,null,String(t))}function wu(t){return t.el===null||t.memo?t:Uu(t)}function ZS(t,n){let e=0;const{shapeFlag:i}=t;if(n==null)n=null;else if(ei(n))e=16;else if(typeof n=="object")if(i&65){const s=n.default;s&&(s._c&&(s._d=!1),ZS(t,s()),s._c&&(s._d=!0));return}else{e=32;const s=n._;!s&&!(Cy in n)?n._ctx=hr:s===3&&hr&&(hr.slots._===1?n._=1:(n._=2,t.patchFlag|=1024))}else Nn(n)?(n={default:n,_ctx:hr},e=32):(n=String(n),i&64?(e=16,n=[Tc(n)]):e=8);t.children=n,t.shapeFlag|=e}function XS(...t){const n={};for(let e=0;e<t.length;e++){const i=t[e];for(const s in i)if(s==="class")n.class!==i.class&&(n.class=Pn([n.class,i.class]));else if(s==="style")n.style=Wi([n.style,i.style]);else if($S(s)){const r=n[s],o=i[s];o&&r!==o&&!(ei(r)&&r.includes(o))&&(n[s]=r?[].concat(r,o):o)}else s!==""&&(n[s]=i[s])}return n}function sl(t,n,e,i=null){ia(t,n,7,[e,i])}const KMe=uU();let GMe=0;function YMe(t,n,e){const i=t.type,s=(n?n.appContext:t.appContext)||KMe,r={uid:GMe++,vnode:t,type:i,parent:n,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new uRe(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:n?n.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:oU(i,s),emitsOptions:UH(i,s),emit:null,emitted:null,propsDefaults:Mi,inheritAttrs:i.inheritAttrs,ctx:Mi,data:Mi,props:Mi,attrs:Mi,slots:Mi,refs:Mi,setupState:Mi,setupContext:null,suspense:e,suspenseId:e?e.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=n?n.root:r,r.emit=oMe.bind(null,r),t.ce&&t.ce(r),r}let $s=null;const mU=()=>$s||hr,pm=t=>{$s=t,t.scope.on()},lh=()=>{$s&&$s.scope.off(),$s=null};function pU(t){return t.vnode.shapeFlag&4}let E1=!1;function ZMe(t,n=!1){E1=n;const{props:e,children:i}=t.vnode,s=pU(t);LMe(t,e,s,n),NMe(t,i);const r=s?XMe(t,n):void 0;return E1=!1,r}function XMe(t,n){const e=t.type;t.accessCache=Object.create(null),t.proxy=xH(new Proxy(t.ctx,AMe));const{setup:i}=e;if(i){const s=t.setupContext=i.length>1?QMe(t):null;pm(t),Dm();const r=Lu(i,t,0,[t.props,s]);if($m(),lh(),OH(r)){if(r.then(lh,lh),n)return r.then(o=>{DM(t,o,n)}).catch(o=>{gy(o,t,0)});t.asyncDep=r}else DM(t,r,n)}else gU(t,n)}function DM(t,n,e){Nn(n)?t.type.__ssrInlineRender?t.ssrRender=n:t.render=n:Ar(n)&&(t.setupState=AH(n)),gU(t,e)}let $M;function gU(t,n,e){const i=t.type;if(!t.render){if(!n&&$M&&!i.render){const s=i.template;if(s){const{isCustomElement:r,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:l}=i,c=Oo(Oo({isCustomElement:r,delimiters:a},o),l);i.render=$M(s,c)}}t.render=i.render||dc}pm(t),Dm(),IMe(t),$m(),lh()}function JMe(t){return new Proxy(t.attrs,{get(n,e){return Po(t,"get","$attrs"),n[e]}})}function QMe(t){const n=i=>{t.exposed=i||{}};let e;return{get attrs(){return e||(e=JMe(t))},slots:t.slots,emit:t.emit,expose:n}}function ky(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(AH(xH(t.exposed)),{get(n,e){if(e in n)return n[e];if(e in H_)return H_[e](t)}}))}function ePe(t,n=!0){return Nn(t)?t.displayName||t.name:t.name||n&&t.__name}function tPe(t){return Nn(t)&&"__vccOpts"in t}const nPe=(t,n)=>URe(t,n,E1);function iPe(t,n,e){const i=arguments.length;return i===2?Ar(n)&&!ei(n)?W_(n)?It(t,null,[n]):It(t,n):It(t,null,n):(i>3?e=Array.prototype.slice.call(arguments,2):i===3&&W_(e)&&(e=[e]),It(t,n,e))}const sPe="3.2.37";function rPe(t,n){const e=Object.create(null),i=t.split(",");for(let s=0;s<i.length;s++)e[i[s]]=!0;return s=>!!e[s]}const oPe="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",aPe=rPe(oPe);function vU(t){return!!t||t===""}const lPe=/^on[^a-z]/,cPe=t=>lPe.test(t),uPe=t=>t.startsWith("onUpdate:"),t0=Object.assign,n0=Array.isArray,dPe=t=>typeof t=="function",Kk=t=>typeof t=="string",hPe=t=>t!==null&&typeof t=="object",JS=t=>{const n=Object.create(null);return e=>n[e]||(n[e]=t(e))},fPe=/-(\w)/g,zM=JS(t=>t.replace(fPe,(n,e)=>e?e.toUpperCase():"")),mPe=/\B([A-Z])/g,jf=JS(t=>t.replace(mPe,"-$1").toLowerCase()),pPe=JS(t=>t.charAt(0).toUpperCase()+t.slice(1)),Gk=t=>{const n=parseFloat(t);return isNaN(n)?t:n},gPe="http://www.w3.org/2000/svg",Ud=typeof document<"u"?document:null,HM=Ud&&Ud.createElement("template"),vPe={insert:(t,n,e)=>{n.insertBefore(t,e||null)},remove:t=>{const n=t.parentNode;n&&n.removeChild(t)},createElement:(t,n,e,i)=>{const s=n?Ud.createElementNS(gPe,t):Ud.createElement(t,e?{is:e}:void 0);return t==="select"&&i&&i.multiple!=null&&s.setAttribute("multiple",i.multiple),s},createText:t=>Ud.createTextNode(t),createComment:t=>Ud.createComment(t),setText:(t,n)=>{t.nodeValue=n},setElementText:(t,n)=>{t.textContent=n},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Ud.querySelector(t),setScopeId(t,n){t.setAttribute(n,"")},cloneNode(t){const n=t.cloneNode(!0);return"_value"in t&&(n._value=t._value),n},insertStaticContent(t,n,e,i,s,r){const o=e?e.previousSibling:n.lastChild;if(s&&(s===r||s.nextSibling))for(;n.insertBefore(s.cloneNode(!0),e),!(s===r||!(s=s.nextSibling)););else{HM.innerHTML=i?`<svg>${t}</svg>`:t;const a=HM.content;if(i){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}n.insertBefore(a,e)}return[o?o.nextSibling:n.firstChild,e?e.previousSibling:n.lastChild]}};function bPe(t,n,e){const i=t._vtc;i&&(n=(n?[n,...i]:[...i]).join(" ")),n==null?t.removeAttribute("class"):e?t.setAttribute("class",n):t.className=n}function _Pe(t,n,e){const i=t.style,s=Kk(e);if(e&&!s){for(const r in e)Yk(i,r,e[r]);if(n&&!Kk(n))for(const r in n)e[r]==null&&Yk(i,r,"")}else{const r=i.display;s?n!==e&&(i.cssText=e):n&&t.removeAttribute("style"),"_vod"in t&&(i.display=r)}}const UM=/\s*!important$/;function Yk(t,n,e){if(n0(e))e.forEach(i=>Yk(t,n,i));else if(e==null&&(e=""),n.startsWith("--"))t.setProperty(n,e);else{const i=wPe(t,n);UM.test(e)?t.setProperty(jf(i),e.replace(UM,""),"important"):t[i]=e}}const WM=["Webkit","Moz","ms"],m3={};function wPe(t,n){const e=m3[n];if(e)return e;let i=Tl(n);if(i!=="filter"&&i in t)return m3[n]=i;i=pPe(i);for(let s=0;s<WM.length;s++){const r=WM[s]+i;if(r in t)return m3[n]=r}return n}const jM="http://www.w3.org/1999/xlink";function yPe(t,n,e,i,s){if(i&&n.startsWith("xlink:"))e==null?t.removeAttributeNS(jM,n.slice(6,n.length)):t.setAttributeNS(jM,n,e);else{const r=aPe(n);e==null||r&&!vU(e)?t.removeAttribute(n):t.setAttribute(n,r?"":e)}}function CPe(t,n,e,i,s,r,o){if(n==="innerHTML"||n==="textContent"){i&&o(i,s,r),t[n]=e??"";return}if(n==="value"&&t.tagName!=="PROGRESS"&&!t.tagName.includes("-")){t._value=e;const l=e??"";(t.value!==l||t.tagName==="OPTION")&&(t.value=l),e==null&&t.removeAttribute(n);return}let a=!1;if(e===""||e==null){const l=typeof t[n];l==="boolean"?e=vU(e):e==null&&l==="string"?(e="",a=!0):l==="number"&&(e=0,a=!0)}try{t[n]=e}catch{}a&&t.removeAttribute(n)}const[bU,kPe]=(()=>{let t=Date.now,n=!1;if(typeof window<"u"){Date.now()>document.createEvent("Event").timeStamp&&(t=performance.now.bind(performance));const e=navigator.userAgent.match(/firefox\/(\d+)/i);n=!!(e&&Number(e[1])<=53)}return[t,n]})();let Zk=0;const EPe=Promise.resolve(),SPe=()=>{Zk=0},TPe=()=>Zk||(EPe.then(SPe),Zk=bU());function xPe(t,n,e,i){t.addEventListener(n,e,i)}function APe(t,n,e,i){t.removeEventListener(n,e,i)}function IPe(t,n,e,i,s=null){const r=t._vei||(t._vei={}),o=r[n];if(i&&o)o.value=i;else{const[a,l]=RPe(n);if(i){const c=r[n]=MPe(i,s);xPe(t,a,c,l)}else o&&(APe(t,a,o,l),r[n]=void 0)}}const qM=/(?:Once|Passive|Capture)$/;function RPe(t){let n;if(qM.test(t)){n={};let e;for(;e=t.match(qM);)t=t.slice(0,t.length-e[0].length),n[e[0].toLowerCase()]=!0}return[jf(t.slice(2)),n]}function MPe(t,n){const e=i=>{const s=i.timeStamp||bU();(kPe||s>=e.attached-1)&&ia(PPe(i,e.value),n,5,[i])};return e.value=t,e.attached=TPe(),e}function PPe(t,n){if(n0(n)){const e=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{e.call(t),t._stopped=!0},n.map(i=>s=>!s._stopped&&i&&i(s))}else return n}const KM=/^on[a-z]/,OPe=(t,n,e,i,s=!1,r,o,a,l)=>{n==="class"?bPe(t,i,s):n==="style"?_Pe(t,e,i):cPe(n)?uPe(n)||IPe(t,n,e,i,o):(n[0]==="."?(n=n.slice(1),!0):n[0]==="^"?(n=n.slice(1),!1):LPe(t,n,i,s))?CPe(t,n,i,r,o,a,l):(n==="true-value"?t._trueValue=i:n==="false-value"&&(t._falseValue=i),yPe(t,n,i,s))};function LPe(t,n,e,i){return i?!!(n==="innerHTML"||n==="textContent"||n in t&&KM.test(n)&&dPe(e)):n==="spellcheck"||n==="draggable"||n==="translate"||n==="form"||n==="list"&&t.tagName==="INPUT"||n==="type"&&t.tagName==="TEXTAREA"||KM.test(n)&&Kk(e)?!1:n in t}function BPe(t,n){const e=gMe(t);class i extends QS{constructor(r){super(e,r,n)}}return i.def=e,i}const FPe=typeof HTMLElement<"u"?HTMLElement:class{};class QS extends FPe{constructor(n,e={},i){super(),this._def=n,this._props=e,this._instance=null,this._connected=!1,this._resolved=!1,this._numberProps=null,this.shadowRoot&&i?i(this._createVNode(),this.shadowRoot):this.attachShadow({mode:"open"})}connectedCallback(){this._connected=!0,this._instance||this._resolveDef()}disconnectedCallback(){this._connected=!1,NH(()=>{this._connected||(eP(null,this.shadowRoot),this._instance=null)})}_resolveDef(){if(this._resolved)return;this._resolved=!0;for(let i=0;i<this.attributes.length;i++)this._setAttr(this.attributes[i].name);new MutationObserver(i=>{for(const s of i)this._setAttr(s.attributeName)}).observe(this,{attributes:!0});const n=i=>{const{props:s,styles:r}=i,o=!n0(s),a=s?o?Object.keys(s):s:[];let l;if(o)for(const c in this._props){const u=s[c];(u===Number||u&&u.type===Number)&&(this._props[c]=Gk(this._props[c]),(l||(l=Object.create(null)))[c]=!0)}this._numberProps=l;for(const c of Object.keys(this))c[0]!=="_"&&this._setProp(c,this[c],!0,!1);for(const c of a.map(zM))Object.defineProperty(this,c,{get(){return this._getProp(c)},set(u){this._setProp(c,u)}});this._applyStyles(r),this._update()},e=this._def.__asyncLoader;e?e().then(n):n(this._def)}_setAttr(n){let e=this.getAttribute(n);this._numberProps&&this._numberProps[n]&&(e=Gk(e)),this._setProp(zM(n),e,!1)}_getProp(n){return this._props[n]}_setProp(n,e,i=!0,s=!0){e!==this._props[n]&&(this._props[n]=e,s&&this._instance&&this._update(),i&&(e===!0?this.setAttribute(jf(n),""):typeof e=="string"||typeof e=="number"?this.setAttribute(jf(n),e+""):e||this.removeAttribute(jf(n))))}_update(){eP(this._createVNode(),this.shadowRoot)}_createVNode(){const n=It(this._def,t0({},this._props));return this._instance||(n.ce=e=>{this._instance=e,e.isCE=!0,e.emit=(s,...r)=>{this.dispatchEvent(new CustomEvent(s,{detail:r}))};let i=this;for(;i=i&&(i.parentNode||i.host);)if(i instanceof QS){e.parent=i._instance;break}}),n}_applyStyles(n){n&&n.forEach(e=>{const i=document.createElement("style");i.textContent=e,this.shadowRoot.appendChild(i)})}}const iu="transition",Op="animation",vs=(t,{slots:n})=>iPe(GH,wU(t),n);vs.displayName="Transition";const _U={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},NPe=vs.props=t0({},GH.props,_U),Td=(t,n=[])=>{n0(t)?t.forEach(e=>e(...n)):t&&t(...n)},GM=t=>t?n0(t)?t.some(n=>n.length>1):t.length>1:!1;function wU(t){const n={};for(const R in t)R in _U||(n[R]=t[R]);if(t.css===!1)return n;const{name:e="v",type:i,duration:s,enterFromClass:r=`${e}-enter-from`,enterActiveClass:o=`${e}-enter-active`,enterToClass:a=`${e}-enter-to`,appearFromClass:l=r,appearActiveClass:c=o,appearToClass:u=a,leaveFromClass:d=`${e}-leave-from`,leaveActiveClass:f=`${e}-leave-active`,leaveToClass:p=`${e}-leave-to`}=t,m=VPe(s),v=m&&m[0],y=m&&m[1],{onBeforeEnter:_,onEnter:b,onEnterCancelled:E,onLeave:x,onLeaveCancelled:A,onBeforeAppear:I=_,onAppear:k=b,onAppearCancelled:O=E}=n,M=(R,L,F)=>{pu(R,L?u:a),pu(R,L?c:o),F&&F()},T=(R,L)=>{R._isLeaving=!1,pu(R,d),pu(R,p),pu(R,f),L&&L()},P=R=>(L,F)=>{const B=R?k:b,z=()=>M(L,R,F);Td(B,[L,z]),YM(()=>{pu(L,R?l:r),Yl(L,R?u:a),GM(B)||ZM(L,i,v,z)})};return t0(n,{onBeforeEnter(R){Td(_,[R]),Yl(R,r),Yl(R,o)},onBeforeAppear(R){Td(I,[R]),Yl(R,l),Yl(R,c)},onEnter:P(!1),onAppear:P(!0),onLeave(R,L){R._isLeaving=!0;const F=()=>T(R,L);Yl(R,d),CU(),Yl(R,f),YM(()=>{R._isLeaving&&(pu(R,d),Yl(R,p),GM(x)||ZM(R,i,y,F))}),Td(x,[R,F])},onEnterCancelled(R){M(R,!1),Td(E,[R])},onAppearCancelled(R){M(R,!0),Td(O,[R])},onLeaveCancelled(R){T(R),Td(A,[R])}})}function VPe(t){if(t==null)return null;if(hPe(t))return[p3(t.enter),p3(t.leave)];{const n=p3(t);return[n,n]}}function p3(t){return Gk(t)}function Yl(t,n){n.split(/\s+/).forEach(e=>e&&t.classList.add(e)),(t._vtc||(t._vtc=new Set)).add(n)}function pu(t,n){n.split(/\s+/).forEach(i=>i&&t.classList.remove(i));const{_vtc:e}=t;e&&(e.delete(n),e.size||(t._vtc=void 0))}function YM(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let DPe=0;function ZM(t,n,e,i){const s=t._endId=++DPe,r=()=>{s===t._endId&&i()};if(e)return setTimeout(r,e);const{type:o,timeout:a,propCount:l}=yU(t,n);if(!o)return i();const c=o+"end";let u=0;const d=()=>{t.removeEventListener(c,f),r()},f=p=>{p.target===t&&++u>=l&&d()};setTimeout(()=>{u<l&&d()},a+1),t.addEventListener(c,f)}function yU(t,n){const e=window.getComputedStyle(t),i=m=>(e[m]||"").split(", "),s=i(iu+"Delay"),r=i(iu+"Duration"),o=XM(s,r),a=i(Op+"Delay"),l=i(Op+"Duration"),c=XM(a,l);let u=null,d=0,f=0;n===iu?o>0&&(u=iu,d=o,f=r.length):n===Op?c>0&&(u=Op,d=c,f=l.length):(d=Math.max(o,c),u=d>0?o>c?iu:Op:null,f=u?u===iu?r.length:l.length:0);const p=u===iu&&/\b(transform|all)(,|$)/.test(e[iu+"Property"]);return{type:u,timeout:d,propCount:f,hasTransform:p}}function XM(t,n){for(;t.length<n.length;)t=t.concat(t);return Math.max(...n.map((e,i)=>JM(e)+JM(t[i])))}function JM(t){return Number(t.slice(0,-1).replace(",","."))*1e3}function CU(){return document.body.offsetHeight}const kU=new WeakMap,EU=new WeakMap,$Pe={name:"TransitionGroup",props:t0({},NPe,{tag:String,moveClass:String}),setup(t,{slots:n}){const e=mU(),i=KH();let s,r;return JH(()=>{if(!s.length)return;const o=t.moveClass||`${t.name||"v"}-move`;if(!WPe(s[0].el,e.vnode.el,o))return;s.forEach(zPe),s.forEach(HPe);const a=s.filter(UPe);CU(),a.forEach(l=>{const c=l.el,u=c.style;Yl(c,o),u.transform=u.webkitTransform=u.transitionDuration="";const d=c._moveCb=f=>{f&&f.target!==c||(!f||/transform$/.test(f.propertyName))&&(c.removeEventListener("transitionend",d),c._moveCb=null,pu(c,o))};c.addEventListener("transitionend",d)})}),()=>{const o=fi(t),a=wU(o);let l=o.tag||Yn;s=r,r=n.default?jS(n.default()):[];for(let c=0;c<r.length;c++){const u=r[c];u.key!=null&&C1(u,y1(u,a,i,e))}if(s)for(let c=0;c<s.length;c++){const u=s[c];C1(u,y1(u,a,i,e)),kU.set(u,u.el.getBoundingClientRect())}return It(l,null,r)}}},eT=$Pe;function zPe(t){const n=t.el;n._moveCb&&n._moveCb(),n._enterCb&&n._enterCb()}function HPe(t){EU.set(t,t.el.getBoundingClientRect())}function UPe(t){const n=kU.get(t),e=EU.get(t),i=n.left-e.left,s=n.top-e.top;if(i||s){const r=t.el.style;return r.transform=r.webkitTransform=`translate(${i}px,${s}px)`,r.transitionDuration="0s",t}}function WPe(t,n,e){const i=t.cloneNode();t._vtc&&t._vtc.forEach(o=>{o.split(/\s+/).forEach(a=>a&&i.classList.remove(a))}),e.split(/\s+/).forEach(o=>o&&i.classList.add(o)),i.style.display="none";const s=n.nodeType===1?n:n.parentNode;s.appendChild(i);const{hasTransform:r}=yU(i);return s.removeChild(i),r}const jPe=["ctrl","shift","alt","meta"],qPe={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,n)=>jPe.some(e=>t[`${e}Key`]&&!n.includes(e))},bl=(t,n)=>(e,...i)=>{for(let s=0;s<n.length;s++){const r=qPe[n[s]];if(r&&r(e,n))return}return t(e,...i)},KPe={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Nd=(t,n)=>e=>{if(!("key"in e))return;const i=jf(e.key);if(n.some(s=>s===i||KPe[s]===i))return t(e)},Ey={beforeMount(t,{value:n},{transition:e}){t._vod=t.style.display==="none"?"":t.style.display,e&&n?e.beforeEnter(t):Lp(t,n)},mounted(t,{value:n},{transition:e}){e&&n&&e.enter(t)},updated(t,{value:n,oldValue:e},{transition:i}){!n!=!e&&(i?n?(i.beforeEnter(t),Lp(t,!0),i.enter(t)):i.leave(t,()=>{Lp(t,!1)}):Lp(t,n))},beforeUnmount(t,{value:n}){Lp(t,n)}};function Lp(t,n){t.style.display=n?t._vod:"none"}const GPe=t0({patchProp:OPe},vPe);let QM;function YPe(){return QM||(QM=zMe(GPe))}const eP=(...t)=>{YPe().render(...t)};var Ni=(t,n)=>{const e=t.__vccOpts||t;for(const[i,s]of n)e[i]=s;return e};const ZPe={name:"AppLoader",props:{show:{type:Boolean,default:!1},infinite:{type:Boolean,default:!1},type:{type:String,required:!0},messageId:{type:String,default:""}}},XPe=gt("div",{id:"vac-circle"},null,-1),JPe=gt("div",{id:"vac-circle"},null,-1),QPe=gt("div",{id:"vac-circle"},null,-1),eOe=gt("div",{id:"vac-circle"},null,-1),tOe=gt("div",{id:"vac-circle"},null,-1),nOe=gt("div",{id:"vac-circle"},null,-1);function iOe(t,n,e,i,s,r){return Ve(),mi(vs,{name:"vac-fade-spinner",appear:""},{default:rn(()=>[e.show?(Ve(),Qe("div",{key:0,class:Pn(["vac-loader-wrapper",{"vac-container-center":!e.infinite,"vac-container-top":e.infinite}])},[e.type==="rooms"?xt(t.$slots,"spinner-icon-rooms",{key:0},()=>[XPe]):Tt("",!0),e.type==="infinite-rooms"?xt(t.$slots,"spinner-icon-infinite-rooms",{key:1},()=>[JPe]):Tt("",!0),e.type==="message-file"?xt(t.$slots,"spinner-icon-message-file_"+e.messageId,{key:2},()=>[QPe]):Tt("",!0),e.type==="room-file"?xt(t.$slots,"spinner-icon-room-file",{key:3},()=>[eOe]):Tt("",!0),e.type==="messages"?xt(t.$slots,"spinner-icon-messages",{key:4},()=>[tOe]):Tt("",!0),e.type==="infinite-messages"?xt(t.$slots,"spinner-icon-infinite-messages",{key:5},()=>[nOe]):Tt("",!0)],2)):Tt("",!0)]),_:3})}var Sy=Ni(ZPe,[["render",iOe]]);const sOe={name:"SvgIcon",props:{name:{type:String,default:null},param:{type:String,default:null}},data(){return{svgItem:{search:{path:"M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z"},add:{path:"M17,13H13V17H11V13H7V11H11V7H13V11H17M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"},toggle:{path:"M5,13L9,17L7.6,18.42L1.18,12L7.6,5.58L9,7L5,11H21V13H5M21,6V8H11V6H21M21,16V18H11V16H21Z"},menu:{path:"M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z"},close:{path:"M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z"},file:{path:"M14,17H7V15H14M17,13H7V11H17M17,9H7V7H17M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3Z"},paperclip:{path:"M16.5,6V17.5A4,4 0 0,1 12.5,21.5A4,4 0 0,1 8.5,17.5V5A2.5,2.5 0 0,1 11,2.5A2.5,2.5 0 0,1 13.5,5V15.5A1,1 0 0,1 12.5,16.5A1,1 0 0,1 11.5,15.5V6H10V15.5A2.5,2.5 0 0,0 12.5,18A2.5,2.5 0 0,0 15,15.5V5A4,4 0 0,0 11,1A4,4 0 0,0 7,5V17.5A5.5,5.5 0 0,0 12.5,23A5.5,5.5 0 0,0 18,17.5V6H16.5Z"},"close-outline":{path:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"},send:{path:"M2,21L23,12L2,3V10L17,12L2,14V21Z"},emoji:{path:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z"},document:{path:"M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z"},pencil:{path:"M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z"},checkmark:{path:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"},"double-checkmark":{path:"M18 7l-1.41-1.41-6.34 6.34 1.41 1.41L18 7zm4.24-1.41L11.66 16.17 7.48 12l-1.41 1.41L11.66 19l12-12-1.42-1.41zM.41 13.41L6 19l1.41-1.41L1.83 12 .41 13.41z"},eye:{path:"M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z"},dropdown:{path:"M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z"},deleted:{path:"M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M12,4A8,8 0 0,0 4,12C4,13.85 4.63,15.55 5.68,16.91L16.91,5.68C15.55,4.63 13.85,4 12,4M12,20A8,8 0 0,0 20,12C20,10.15 19.37,8.45 18.32,7.09L7.09,18.32C8.45,19.37 10.15,20 12,20Z"},microphone:{size:"large",path:"M432.8,216.4v39.2c0,45.2-15.3,84.3-45.2,118.4c-29.8,33.2-67.3,52.8-111.6,57.9v40.9h78.4c5.1,0,10.2,1.7,13.6,6c4.3,4.3,6,8.5,6,13.6c0,5.1-1.7,10.2-6,13.6c-4.3,4.3-8.5,6-13.6,6H157.6c-5.1,0-10.2-1.7-13.6-6c-4.3-4.3-6-8.5-6-13.6c0-5.1,1.7-10.2,6-13.6c4.3-4.3,8.5-6,13.6-6H236v-40.9c-44.3-5.1-81.8-23.9-111.6-57.9s-45.2-73.3-45.2-118.4v-39.2c0-5.1,1.7-10.2,6-13.6c4.3-4.3,8.5-6,13.6-6s10.2,1.7,13.6,6c4.3,4.3,6,8.5,6,13.6v39.2c0,37.5,13.6,70.7,40,97.1s59.6,40,97.1,40s70.7-13.6,97.1-40c26.4-26.4,40-59.6,40-97.1v-39.2c0-5.1,1.7-10.2,6-13.6c4.3-4.3,8.5-6,13.6-6c5.1,0,10.2,1.7,13.6,6C430.2,206.2,432.8,211.3,432.8,216.4z M353.5,98v157.6c0,27.3-9.4,50.3-29,69c-19.6,19.6-42.6,29-69,29s-50.3-9.4-69-29c-19.6-19.6-29-42.6-29-69V98c0-27.3,9.4-50.3,29-69c19.6-19.6,42.6-29,69-29s50.3,9.4,69,29C344.2,47.7,353.5,71.6,353.5,98z"},"audio-play":{size:"medium",path:"M43.331,21.237L7.233,0.397c-0.917-0.529-2.044-0.529-2.96,0c-0.916,0.528-1.48,1.505-1.48,2.563v41.684   c0,1.058,0.564,2.035,1.48,2.563c0.458,0.268,0.969,0.397,1.48,0.397c0.511,0,1.022-0.133,1.48-0.397l36.098-20.84   c0.918-0.529,1.479-1.506,1.479-2.564S44.247,21.767,43.331,21.237z"},"audio-pause":{size:"medium",path:"M17.991,40.976c0,3.662-2.969,6.631-6.631,6.631l0,0c-3.662,0-6.631-2.969-6.631-6.631V6.631C4.729,2.969,7.698,0,11.36,0l0,0c3.662,0,6.631,2.969,6.631,6.631V40.976z",path2:"M42.877,40.976c0,3.662-2.969,6.631-6.631,6.631l0,0c-3.662,0-6.631-2.969-6.631-6.631V6.631C29.616,2.969,32.585,0,36.246,0l0,0c3.662,0,6.631,2.969,6.631,6.631V40.976z"}}}},computed:{svgId(){const t=this.param?"-"+this.param:"";return`vac-icon-${this.name}${t}`},size(){const t=this.svgItem[this.name];return t.size==="large"?512:t.size==="medium"?48:24}}},rOe=["viewBox"],oOe=["id","d"],aOe=["id","d"];function lOe(t,n,e,i,s,r){return Ve(),Qe("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",width:"24",height:"24",viewBox:`0 0 ${r.size} ${r.size}`},[gt("path",{id:r.svgId,d:s.svgItem[e.name].path},null,8,oOe),s.svgItem[e.name].path2?(Ve(),Qe("path",{key:0,id:r.svgId,d:s.svgItem[e.name].path2},null,8,aOe)):Tt("",!0)],8,rOe)}var Qs=Ni(sOe,[["render",lOe]]);const cOe={name:"RoomsSearch",components:{SvgIcon:Qs},props:{textMessages:{type:Object,required:!0},showSearch:{type:Boolean,required:!0},showAddRoom:{type:Boolean,required:!0},rooms:{type:Array,required:!0},loadingRooms:{type:Boolean,required:!0}},emits:["search-room","add-room"],computed:{showSearchBar(){return this.showSearch||this.showAddRoom}}},uOe={key:0,class:"vac-icon-search"},dOe=["placeholder"];function hOe(t,n,e,i,s,r){const o=tn("svg-icon");return Ve(),Qe("div",{class:Pn({"vac-box-search":r.showSearchBar,"vac-box-empty":!r.showSearchBar})},[e.showSearch?(Ve(),Qe(Yn,{key:0},[!e.loadingRooms&&e.rooms.length?(Ve(),Qe("div",uOe,[xt(t.$slots,"search-icon",{},()=>[It(o,{name:"search"})])])):Tt("",!0),!e.loadingRooms&&e.rooms.length?(Ve(),Qe("input",{key:1,type:"search",placeholder:e.textMessages.SEARCH,autocomplete:"off",class:"vac-input",onInput:n[0]||(n[0]=a=>t.$emit("search-room",a))},null,40,dOe)):Tt("",!0)],64)):Tt("",!0),e.showAddRoom?(Ve(),Qe("div",{key:1,class:"vac-svg-button vac-add-icon",onClick:n[1]||(n[1]=a=>t.$emit("add-room"))},[xt(t.$slots,"add-icon",{},()=>[It(o,{name:"add"})])])):Tt("",!0)],2)}var fOe=Ni(cOe,[["render",hOe]]);const tP=document.createElement("i");function SU(t){const n="&"+t+";";tP.innerHTML=n;const e=tP.textContent;return e.charCodeAt(e.length-1)===59&&t!=="semi"||e===n?!1:e}function Eo(t,n,e,i){const s=t.length;let r=0,o;if(n<0?n=-n>s?0:s+n:n=n>s?s:n,e=e>0?e:0,i.length<1e4)o=Array.from(i),o.unshift(n,e),t.splice(...o);else for(e&&t.splice(n,e);r<i.length;)o=i.slice(r,r+1e4),o.unshift(n,0),t.splice(...o),r+=1e4,n+=1e4}function or(t,n){return t.length>0?(Eo(t,t.length,0,n),t):n}const Xk={}.hasOwnProperty;function TU(t){const n={};let e=-1;for(;++e<t.length;)mOe(n,t[e]);return n}function mOe(t,n){let e;for(e in n){const s=(Xk.call(t,e)?t[e]:void 0)||(t[e]={}),r=n[e];let o;if(r)for(o in r){Xk.call(s,o)||(s[o]=[]);const a=r[o];pOe(s[o],Array.isArray(a)?a:a?[a]:[])}}}function pOe(t,n){let e=-1;const i=[];for(;++e<n.length;)(n[e].add==="after"?t:i).push(n[e]);Eo(t,0,0,i)}function xU(t){const n={};let e=-1;for(;++e<t.length;)gOe(n,t[e]);return n}function gOe(t,n){let e;for(e in n){const s=(Xk.call(t,e)?t[e]:void 0)||(t[e]={}),r=n[e];let o;if(r)for(o in r)s[o]=r[o]}}function vOe(t,n){const e=Number.parseInt(t,n);return e<9||e===11||e>13&&e<32||e>126&&e<160||e>55295&&e<57344||e>64975&&e<65008||(e&65535)===65535||(e&65535)===65534||e>1114111?"�":String.fromCharCode(e)}const bOe={'"':"quot","&":"amp","<":"lt",">":"gt"};function AU(t){return t.replace(/["&<>]/g,n);function n(e){return"&"+bOe[e]+";"}}function xl(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const _Oe=/[!-\/:-@\[-`\{-~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,Er=Qu(/[A-Za-z]/),fr=Qu(/[\dA-Za-z]/),wOe=Qu(/[#-'*+\--9=?A-Z^-~]/);function j_(t){return t!==null&&(t<32||t===127)}const Jk=Qu(/\d/),yOe=Qu(/[\dA-Fa-f]/),COe=Qu(/[!-/:-@[-`{-~]/);function on(t){return t!==null&&t<-2}function Oi(t){return t!==null&&(t<0||t===32)}function zn(t){return t===-2||t===-1||t===32}const tT=Qu(_Oe),gm=Qu(/\s/);function Qu(t){return n;function n(e){return e!==null&&t.test(String.fromCharCode(e))}}function Xd(t,n){const e=AU(kOe(t||""));if(!n)return e;const i=e.indexOf(":"),s=e.indexOf("?"),r=e.indexOf("#"),o=e.indexOf("/");return i<0||o>-1&&i>o||s>-1&&i>s||r>-1&&i>r||n.test(e.slice(0,i))?e:""}function kOe(t){const n=[];let e=-1,i=0,s=0;for(;++e<t.length;){const r=t.charCodeAt(e);let o="";if(r===37&&fr(t.charCodeAt(e+1))&&fr(t.charCodeAt(e+2)))s=2;else if(r<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(r))||(o=String.fromCharCode(r));else if(r>55295&&r<57344){const a=t.charCodeAt(e+1);r<56320&&a>56319&&a<57344?(o=String.fromCharCode(r,a),s=1):o="�"}else o=String.fromCharCode(r);o&&(n.push(t.slice(i,e),encodeURIComponent(o)),i=e+s+1,o=""),s&&(e+=s,s=0)}return n.join("")+t.slice(i)}const nP={}.hasOwnProperty,iP=/^(https?|ircs?|mailto|xmpp)$/i,EOe=/^https?$/i;function SOe(t){const n=t||{};let e=!0;const i={},s=[[]],r=[],o=[],l=xU([{enter:{blockQuote:F,codeFenced:q,codeFencedFenceInfo:y,codeFencedFenceMeta:y,codeIndented:V,codeText:oe,content:Ae,definition:D,definitionDestinationString:X,definitionLabelString:y,definitionTitleString:y,emphasis:K,htmlFlow:ae,htmlText:W,image:U,label:y,link:Pe,listItemMarker:T,listItemValue:M,listOrdered:k,listUnordered:O,paragraph:z,reference:y,resource:me,resourceDestinationString:pe,resourceTitleString:y,setextHeading:Ee,strong:te},exit:{atxHeading:He,atxHeadingSequence:_e,autolinkEmail:Ke,autolinkProtocol:Te,blockQuote:B,characterEscapeValue:We,characterReferenceMarkerHexadecimal:ke,characterReferenceMarkerNumeric:ke,characterReferenceValue:Ge,codeFenced:re,codeFencedFence:S,codeFencedFenceInfo:G,codeFencedFenceMeta:_,codeFlowValue:Re,codeIndented:re,codeText:ue,codeTextData:We,data:We,definition:be,definitionDestinationString:le,definitionLabelString:$,definitionTitleString:ie,emphasis:ee,hardBreakEscape:je,hardBreakTrailing:je,htmlFlow:Ue,htmlFlowData:We,htmlText:Ue,htmlTextData:We,image:wt,label:Ne,labelText:Fe,lineEnding:ut,link:wt,listOrdered:P,listUnordered:R,paragraph:J,reference:_,referenceString:ne,resource:_,resourceDestinationString:ge,resourceTitleString:rt,setextHeading:de,setextHeadingLineSequence:ze,setextHeadingText:he,strong:Ce,thematicBreak:xe}}].concat(n.htmlExtensions||[])),c={tightStack:o,definitions:i},u={lineEndingIfNeeded:A,options:n,encode:I,raw:E,tag:b,buffer:y,resume:_,setData:m,getData:v};let d=n.defaultLineEnding;return f;function f(Le){let lt=-1,nt=0;const Mt=[];let $e=[],yt=[];for(;++lt<Le.length;)!d&&(Le[lt][1].type==="lineEnding"||Le[lt][1].type==="lineEndingBlank")&&(d=Le[lt][2].sliceSerialize(Le[lt][1])),(Le[lt][1].type==="listOrdered"||Le[lt][1].type==="listUnordered")&&(Le[lt][0]==="enter"?Mt.push(lt):p(Le.slice(Mt.pop(),lt))),Le[lt][1].type==="definition"&&(Le[lt][0]==="enter"?(yt=or(yt,Le.slice(nt,lt)),nt=lt):($e=or($e,Le.slice(nt,lt+1)),nt=lt+1));$e=or($e,yt),$e=or($e,Le.slice(nt)),lt=-1;const qt=$e;for(l.enter.null&&l.enter.null.call(u);++lt<Le.length;){const ct=l[qt[lt][0]],Pt=qt[lt][1].type,st=ct[Pt];nP.call(ct,Pt)&&st&&st.call(Object.assign({sliceSerialize:qt[lt][2].sliceSerialize},u),qt[lt][1])}return l.exit.null&&l.exit.null.call(u),s[0].join("")}function p(Le){const lt=Le.length;let nt=0,Mt=0,$e=!1,yt;for(;++nt<lt;){const qt=Le[nt];if(qt[1]._container)yt=void 0,qt[0]==="enter"?Mt++:Mt--;else switch(qt[1].type){case"listItemPrefix":{qt[0]==="exit"&&(yt=!0);break}case"linePrefix":break;case"lineEndingBlank":{qt[0]==="enter"&&!Mt&&(yt?yt=void 0:$e=!0);break}default:yt=void 0}}Le[0][1]._loose=$e}function m(Le,lt){c[Le]=lt}function v(Le){return c[Le]}function y(){s.push([])}function _(){return s.pop().join("")}function b(Le){e&&(m("lastWasTag",!0),s[s.length-1].push(Le))}function E(Le){m("lastWasTag"),s[s.length-1].push(Le)}function x(){E(d||`
`)}function A(){const Le=s[s.length-1],lt=Le[Le.length-1],nt=lt?lt.charCodeAt(lt.length-1):null;nt===10||nt===13||nt===null||x()}function I(Le){return v("ignoreEncode")?Le:AU(Le)}function k(Le){o.push(!Le._loose),A(),b("<ol"),m("expectFirstItem",!0)}function O(Le){o.push(!Le._loose),A(),b("<ul"),m("expectFirstItem",!0)}function M(Le){if(v("expectFirstItem")){const lt=Number.parseInt(this.sliceSerialize(Le),10);lt!==1&&b(' start="'+I(String(lt))+'"')}}function T(){v("expectFirstItem")?b(">"):L(),A(),b("<li>"),m("expectFirstItem"),m("lastWasTag")}function P(){L(),o.pop(),x(),b("</ol>")}function R(){L(),o.pop(),x(),b("</ul>")}function L(){v("lastWasTag")&&!v("slurpAllLineEndings")&&A(),b("</li>"),m("slurpAllLineEndings")}function F(){o.push(!1),A(),b("<blockquote>")}function B(){o.pop(),A(),b("</blockquote>"),m("slurpAllLineEndings")}function z(){o[o.length-1]||(A(),b("<p>")),m("slurpAllLineEndings")}function J(){o[o.length-1]?m("slurpAllLineEndings",!0):b("</p>")}function q(){A(),b("<pre><code"),m("fencesCount",0)}function G(){const Le=_();b(' class="language-'+Le+'"')}function S(){const Le=v("fencesCount")||0;Le||(b(">"),m("slurpOneLineEnding",!0)),m("fencesCount",Le+1)}function V(){A(),b("<pre><code>")}function re(){const Le=v("fencesCount");Le!==void 0&&Le<2&&c.tightStack.length>0&&!v("lastWasTag")&&x(),v("flowCodeSeenData")&&A(),b("</code></pre>"),Le!==void 0&&Le<2&&A(),m("flowCodeSeenData"),m("fencesCount"),m("slurpOneLineEnding")}function U(){r.push({image:!0}),e=void 0}function Pe(){r.push({})}function Fe(Le){r[r.length-1].labelId=this.sliceSerialize(Le)}function Ne(){r[r.length-1].label=_()}function ne(Le){r[r.length-1].referenceId=this.sliceSerialize(Le)}function me(){y(),r[r.length-1].destination=""}function pe(){y(),m("ignoreEncode",!0)}function ge(){r[r.length-1].destination=_(),m("ignoreEncode")}function rt(){r[r.length-1].title=_()}function wt(){let Le=r.length-1;const lt=r[Le],nt=lt.referenceId||lt.labelId,Mt=lt.destination===void 0?i[xl(nt)]:lt;for(e=!0;Le--;)if(r[Le].image){e=void 0;break}lt.image?(b('<img src="'+Xd(Mt.destination,n.allowDangerousProtocol?void 0:EOe)+'" alt="'),E(lt.label),b('"')):b('<a href="'+Xd(Mt.destination,n.allowDangerousProtocol?void 0:iP)+'"'),b(Mt.title?' title="'+Mt.title+'"':""),lt.image?b(" />"):(b(">"),E(lt.label),b("</a>")),r.pop()}function D(){y(),r.push({})}function $(Le){_(),r[r.length-1].labelId=this.sliceSerialize(Le)}function X(){y(),m("ignoreEncode",!0)}function le(){r[r.length-1].destination=_(),m("ignoreEncode")}function ie(){r[r.length-1].title=_()}function be(){const Le=r[r.length-1],lt=xl(Le.labelId);_(),nP.call(i,lt)||(i[lt]=r[r.length-1]),r.pop()}function Ae(){m("slurpAllLineEndings",!0)}function _e(Le){v("headingRank")||(m("headingRank",this.sliceSerialize(Le).length),A(),b("<h"+v("headingRank")+">"))}function Ee(){y(),m("slurpAllLineEndings")}function he(){m("slurpAllLineEndings",!0)}function He(){b("</h"+v("headingRank")+">"),m("headingRank")}function ze(Le){m("headingRank",this.sliceSerialize(Le).charCodeAt(0)===61?1:2)}function de(){const Le=_();A(),b("<h"+v("headingRank")+">"),E(Le),b("</h"+v("headingRank")+">"),m("slurpAllLineEndings"),m("headingRank")}function We(Le){E(I(this.sliceSerialize(Le)))}function ut(Le){if(!v("slurpAllLineEndings")){if(v("slurpOneLineEnding")){m("slurpOneLineEnding");return}if(v("inCodeText")){E(" ");return}E(I(this.sliceSerialize(Le)))}}function Re(Le){E(I(this.sliceSerialize(Le))),m("flowCodeSeenData",!0)}function je(){b("<br />")}function ae(){A(),W()}function Ue(){m("ignoreEncode")}function W(){n.allowDangerousHtml&&m("ignoreEncode",!0)}function K(){b("<em>")}function te(){b("<strong>")}function oe(){m("inCodeText",!0),b("<code>")}function ue(){m("inCodeText"),b("</code>")}function ee(){b("</em>")}function Ce(){b("</strong>")}function xe(){A(),b("<hr />")}function ke(Le){m("characterReferenceType",Le.type)}function Ge(Le){let lt=this.sliceSerialize(Le);lt=v("characterReferenceType")?vOe(lt,v("characterReferenceType")==="characterReferenceMarkerNumeric"?10:16):SU(lt),E(I(lt)),m("characterReferenceType")}function Te(Le){const lt=this.sliceSerialize(Le);b('<a href="'+Xd(lt,n.allowDangerousProtocol?void 0:iP)+'">'),E(I(lt)),b("</a>")}function Ke(Le){const lt=this.sliceSerialize(Le);b('<a href="'+Xd("mailto:"+lt)+'">'),E(I(lt)),b("</a>")}}function Qn(t,n,e,i){const s=i?i-1:Number.POSITIVE_INFINITY;let r=0;return o;function o(l){return zn(l)?(t.enter(e),a(l)):n(l)}function a(l){return zn(l)&&r++<s?(t.consume(l),a):(t.exit(e),n(l))}}const TOe={tokenize:xOe};function xOe(t){const n=t.attempt(this.parser.constructs.contentInitial,i,s);let e;return n;function i(a){if(a===null){t.consume(a);return}return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),Qn(t,n,"linePrefix")}function s(a){return t.enter("paragraph"),r(a)}function r(a){const l=t.enter("chunkText",{contentType:"text",previous:e});return e&&(e.next=l),e=l,o(a)}function o(a){if(a===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(a);return}return on(a)?(t.consume(a),t.exit("chunkText"),r):(t.consume(a),o)}}const AOe={tokenize:IOe},sP={tokenize:ROe};function IOe(t){const n=this,e=[];let i=0,s,r,o;return a;function a(E){if(i<e.length){const x=e[i];return n.containerState=x[1],t.attempt(x[0].continuation,l,c)(E)}return c(E)}function l(E){if(i++,n.containerState._closeFlow){n.containerState._closeFlow=void 0,s&&b();const x=n.events.length;let A=x,I;for(;A--;)if(n.events[A][0]==="exit"&&n.events[A][1].type==="chunkFlow"){I=n.events[A][1].end;break}_(i);let k=x;for(;k<n.events.length;)n.events[k][1].end=Object.assign({},I),k++;return Eo(n.events,A+1,0,n.events.slice(x)),n.events.length=k,c(E)}return a(E)}function c(E){if(i===e.length){if(!s)return f(E);if(s.currentConstruct&&s.currentConstruct.concrete)return m(E);n.interrupt=!!(s.currentConstruct&&!s._gfmTableDynamicInterruptHack)}return n.containerState={},t.check(sP,u,d)(E)}function u(E){return s&&b(),_(i),f(E)}function d(E){return n.parser.lazy[n.now().line]=i!==e.length,o=n.now().offset,m(E)}function f(E){return n.containerState={},t.attempt(sP,p,m)(E)}function p(E){return i++,e.push([n.currentConstruct,n.containerState]),f(E)}function m(E){if(E===null){s&&b(),_(0),t.consume(E);return}return s=s||n.parser.flow(n.now()),t.enter("chunkFlow",{contentType:"flow",previous:r,_tokenizer:s}),v(E)}function v(E){if(E===null){y(t.exit("chunkFlow"),!0),_(0),t.consume(E);return}return on(E)?(t.consume(E),y(t.exit("chunkFlow")),i=0,n.interrupt=void 0,a):(t.consume(E),v)}function y(E,x){const A=n.sliceStream(E);if(x&&A.push(null),E.previous=r,r&&(r.next=E),r=E,s.defineSkip(E.start),s.write(A),n.parser.lazy[E.start.line]){let I=s.events.length;for(;I--;)if(s.events[I][1].start.offset<o&&(!s.events[I][1].end||s.events[I][1].end.offset>o))return;const k=n.events.length;let O=k,M,T;for(;O--;)if(n.events[O][0]==="exit"&&n.events[O][1].type==="chunkFlow"){if(M){T=n.events[O][1].end;break}M=!0}for(_(i),I=k;I<n.events.length;)n.events[I][1].end=Object.assign({},T),I++;Eo(n.events,O+1,0,n.events.slice(k)),n.events.length=I}}function _(E){let x=e.length;for(;x-- >E;){const A=e[x];n.containerState=A[1],A[0].exit.call(n,t)}e.length=E}function b(){s.write([null]),r=void 0,s=void 0,n.containerState._closeFlow=void 0}}function ROe(t,n,e){return Qn(t,t.attempt(this.parser.constructs.document,n,e),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function q_(t){if(t===null||Oi(t)||gm(t))return 1;if(tT(t))return 2}function Ty(t,n,e){const i=[];let s=-1;for(;++s<t.length;){const r=t[s].resolveAll;r&&!i.includes(r)&&(n=r(n,e),i.push(r))}return n}const Qk={name:"attention",tokenize:POe,resolveAll:MOe};function MOe(t,n){let e=-1,i,s,r,o,a,l,c,u;for(;++e<t.length;)if(t[e][0]==="enter"&&t[e][1].type==="attentionSequence"&&t[e][1]._close){for(i=e;i--;)if(t[i][0]==="exit"&&t[i][1].type==="attentionSequence"&&t[i][1]._open&&n.sliceSerialize(t[i][1]).charCodeAt(0)===n.sliceSerialize(t[e][1]).charCodeAt(0)){if((t[i][1]._close||t[e][1]._open)&&(t[e][1].end.offset-t[e][1].start.offset)%3&&!((t[i][1].end.offset-t[i][1].start.offset+t[e][1].end.offset-t[e][1].start.offset)%3))continue;l=t[i][1].end.offset-t[i][1].start.offset>1&&t[e][1].end.offset-t[e][1].start.offset>1?2:1;const d=Object.assign({},t[i][1].end),f=Object.assign({},t[e][1].start);rP(d,-l),rP(f,l),o={type:l>1?"strongSequence":"emphasisSequence",start:d,end:Object.assign({},t[i][1].end)},a={type:l>1?"strongSequence":"emphasisSequence",start:Object.assign({},t[e][1].start),end:f},r={type:l>1?"strongText":"emphasisText",start:Object.assign({},t[i][1].end),end:Object.assign({},t[e][1].start)},s={type:l>1?"strong":"emphasis",start:Object.assign({},o.start),end:Object.assign({},a.end)},t[i][1].end=Object.assign({},o.start),t[e][1].start=Object.assign({},a.end),c=[],t[i][1].end.offset-t[i][1].start.offset&&(c=or(c,[["enter",t[i][1],n],["exit",t[i][1],n]])),c=or(c,[["enter",s,n],["enter",o,n],["exit",o,n],["enter",r,n]]),c=or(c,Ty(n.parser.constructs.insideSpan.null,t.slice(i+1,e),n)),c=or(c,[["exit",r,n],["enter",a,n],["exit",a,n],["exit",s,n]]),t[e][1].end.offset-t[e][1].start.offset?(u=2,c=or(c,[["enter",t[e][1],n],["exit",t[e][1],n]])):u=0,Eo(t,i-1,e-i+3,c),e=i+c.length-u-2;break}}for(e=-1;++e<t.length;)t[e][1].type==="attentionSequence"&&(t[e][1].type="data");return t}function POe(t,n){const e=this.parser.constructs.attentionMarkers.null,i=this.previous,s=q_(i);let r;return o;function o(l){return r=l,t.enter("attentionSequence"),a(l)}function a(l){if(l===r)return t.consume(l),a;const c=t.exit("attentionSequence"),u=q_(l),d=!u||u===2&&s||e.includes(l),f=!s||s===2&&u||e.includes(i);return c._open=!!(r===42?d:d&&(s||!f)),c._close=!!(r===42?f:f&&(u||!d)),n(l)}}function rP(t,n){t.column+=n,t.offset+=n,t._bufferIndex+=n}const OOe={name:"autolink",tokenize:LOe};function LOe(t,n,e){let i=0;return s;function s(p){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(p),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),r}function r(p){return Er(p)?(t.consume(p),o):c(p)}function o(p){return p===43||p===45||p===46||fr(p)?(i=1,a(p)):c(p)}function a(p){return p===58?(t.consume(p),i=0,l):(p===43||p===45||p===46||fr(p))&&i++<32?(t.consume(p),a):(i=0,c(p))}function l(p){return p===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(p),t.exit("autolinkMarker"),t.exit("autolink"),n):p===null||p===32||p===60||j_(p)?e(p):(t.consume(p),l)}function c(p){return p===64?(t.consume(p),u):wOe(p)?(t.consume(p),c):e(p)}function u(p){return fr(p)?d(p):e(p)}function d(p){return p===46?(t.consume(p),i=0,u):p===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(p),t.exit("autolinkMarker"),t.exit("autolink"),n):f(p)}function f(p){if((p===45||fr(p))&&i++<63){const m=p===45?f:d;return t.consume(p),m}return e(p)}}const i0={tokenize:BOe,partial:!0};function BOe(t,n,e){return i;function i(r){return zn(r)?Qn(t,s,"linePrefix")(r):s(r)}function s(r){return r===null||on(r)?n(r):e(r)}}const IU={name:"blockQuote",tokenize:FOe,continuation:{tokenize:NOe},exit:VOe};function FOe(t,n,e){const i=this;return s;function s(o){if(o===62){const a=i.containerState;return a.open||(t.enter("blockQuote",{_container:!0}),a.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(o),t.exit("blockQuoteMarker"),r}return e(o)}function r(o){return zn(o)?(t.enter("blockQuotePrefixWhitespace"),t.consume(o),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),n):(t.exit("blockQuotePrefix"),n(o))}}function NOe(t,n,e){const i=this;return s;function s(o){return zn(o)?Qn(t,r,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):r(o)}function r(o){return t.attempt(IU,n,e)(o)}}function VOe(t){t.exit("blockQuote")}const RU={name:"characterEscape",tokenize:DOe};function DOe(t,n,e){return i;function i(r){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(r),t.exit("escapeMarker"),s}function s(r){return COe(r)?(t.enter("characterEscapeValue"),t.consume(r),t.exit("characterEscapeValue"),t.exit("characterEscape"),n):e(r)}}const MU={name:"characterReference",tokenize:$Oe};function $Oe(t,n,e){const i=this;let s=0,r,o;return a;function a(d){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(d),t.exit("characterReferenceMarker"),l}function l(d){return d===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(d),t.exit("characterReferenceMarkerNumeric"),c):(t.enter("characterReferenceValue"),r=31,o=fr,u(d))}function c(d){return d===88||d===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(d),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),r=6,o=yOe,u):(t.enter("characterReferenceValue"),r=7,o=Jk,u(d))}function u(d){if(d===59&&s){const f=t.exit("characterReferenceValue");return o===fr&&!SU(i.sliceSerialize(f))?e(d):(t.enter("characterReferenceMarker"),t.consume(d),t.exit("characterReferenceMarker"),t.exit("characterReference"),n)}return o(d)&&s++<r?(t.consume(d),u):e(d)}}const oP={tokenize:HOe,partial:!0},aP={name:"codeFenced",tokenize:zOe,concrete:!0};function zOe(t,n,e){const i=this,s={tokenize:A,partial:!0};let r=0,o=0,a;return l;function l(I){return c(I)}function c(I){const k=i.events[i.events.length-1];return r=k&&k[1].type==="linePrefix"?k[2].sliceSerialize(k[1],!0).length:0,a=I,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),u(I)}function u(I){return I===a?(o++,t.consume(I),u):o<3?e(I):(t.exit("codeFencedFenceSequence"),zn(I)?Qn(t,d,"whitespace")(I):d(I))}function d(I){return I===null||on(I)?(t.exit("codeFencedFence"),i.interrupt?n(I):t.check(oP,v,x)(I)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),f(I))}function f(I){return I===null||on(I)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),d(I)):zn(I)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),Qn(t,p,"whitespace")(I)):I===96&&I===a?e(I):(t.consume(I),f)}function p(I){return I===null||on(I)?d(I):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),m(I))}function m(I){return I===null||on(I)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),d(I)):I===96&&I===a?e(I):(t.consume(I),m)}function v(I){return t.attempt(s,x,y)(I)}function y(I){return t.enter("lineEnding"),t.consume(I),t.exit("lineEnding"),_}function _(I){return r>0&&zn(I)?Qn(t,b,"linePrefix",r+1)(I):b(I)}function b(I){return I===null||on(I)?t.check(oP,v,x)(I):(t.enter("codeFlowValue"),E(I))}function E(I){return I===null||on(I)?(t.exit("codeFlowValue"),b(I)):(t.consume(I),E)}function x(I){return t.exit("codeFenced"),n(I)}function A(I,k,O){let M=0;return T;function T(B){return I.enter("lineEnding"),I.consume(B),I.exit("lineEnding"),P}function P(B){return I.enter("codeFencedFence"),zn(B)?Qn(I,R,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(B):R(B)}function R(B){return B===a?(I.enter("codeFencedFenceSequence"),L(B)):O(B)}function L(B){return B===a?(M++,I.consume(B),L):M>=o?(I.exit("codeFencedFenceSequence"),zn(B)?Qn(I,F,"whitespace")(B):F(B)):O(B)}function F(B){return B===null||on(B)?(I.exit("codeFencedFence"),k(B)):O(B)}}}function HOe(t,n,e){const i=this;return s;function s(o){return o===null?e(o):(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),r)}function r(o){return i.parser.lazy[i.now().line]?e(o):n(o)}}const g3={name:"codeIndented",tokenize:WOe},UOe={tokenize:jOe,partial:!0};function WOe(t,n,e){const i=this;return s;function s(c){return t.enter("codeIndented"),Qn(t,r,"linePrefix",5)(c)}function r(c){const u=i.events[i.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?o(c):e(c)}function o(c){return c===null?l(c):on(c)?t.attempt(UOe,o,l)(c):(t.enter("codeFlowValue"),a(c))}function a(c){return c===null||on(c)?(t.exit("codeFlowValue"),o(c)):(t.consume(c),a)}function l(c){return t.exit("codeIndented"),n(c)}}function jOe(t,n,e){const i=this;return s;function s(o){return i.parser.lazy[i.now().line]?e(o):on(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s):Qn(t,r,"linePrefix",5)(o)}function r(o){const a=i.events[i.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?n(o):on(o)?s(o):e(o)}}const qOe={name:"codeText",tokenize:YOe,resolve:KOe,previous:GOe};function KOe(t){let n=t.length-4,e=3,i,s;if((t[e][1].type==="lineEnding"||t[e][1].type==="space")&&(t[n][1].type==="lineEnding"||t[n][1].type==="space")){for(i=e;++i<n;)if(t[i][1].type==="codeTextData"){t[e][1].type="codeTextPadding",t[n][1].type="codeTextPadding",e+=2,n-=2;break}}for(i=e-1,n++;++i<=n;)s===void 0?i!==n&&t[i][1].type!=="lineEnding"&&(s=i):(i===n||t[i][1].type==="lineEnding")&&(t[s][1].type="codeTextData",i!==s+2&&(t[s][1].end=t[i-1][1].end,t.splice(s+2,i-s-2),n-=i-s-2,i=s+2),s=void 0);return t}function GOe(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function YOe(t,n,e){let i=0,s,r;return o;function o(d){return t.enter("codeText"),t.enter("codeTextSequence"),a(d)}function a(d){return d===96?(t.consume(d),i++,a):(t.exit("codeTextSequence"),l(d))}function l(d){return d===null?e(d):d===32?(t.enter("space"),t.consume(d),t.exit("space"),l):d===96?(r=t.enter("codeTextSequence"),s=0,u(d)):on(d)?(t.enter("lineEnding"),t.consume(d),t.exit("lineEnding"),l):(t.enter("codeTextData"),c(d))}function c(d){return d===null||d===32||d===96||on(d)?(t.exit("codeTextData"),l(d)):(t.consume(d),c)}function u(d){return d===96?(t.consume(d),s++,u):s===i?(t.exit("codeTextSequence"),t.exit("codeText"),n(d)):(r.type="codeTextData",c(d))}}function PU(t){const n={};let e=-1,i,s,r,o,a,l,c;for(;++e<t.length;){for(;e in n;)e=n[e];if(i=t[e],e&&i[1].type==="chunkFlow"&&t[e-1][1].type==="listItemPrefix"&&(l=i[1]._tokenizer.events,r=0,r<l.length&&l[r][1].type==="lineEndingBlank"&&(r+=2),r<l.length&&l[r][1].type==="content"))for(;++r<l.length&&l[r][1].type!=="content";)l[r][1].type==="chunkText"&&(l[r][1]._isInFirstContentOfListItem=!0,r++);if(i[0]==="enter")i[1].contentType&&(Object.assign(n,ZOe(t,e)),e=n[e],c=!0);else if(i[1]._container){for(r=e,s=void 0;r--&&(o=t[r],o[1].type==="lineEnding"||o[1].type==="lineEndingBlank");)o[0]==="enter"&&(s&&(t[s][1].type="lineEndingBlank"),o[1].type="lineEnding",s=r);s&&(i[1].end=Object.assign({},t[s][1].start),a=t.slice(s,e),a.unshift(i),Eo(t,s,e-s+1,a))}}return!c}function ZOe(t,n){const e=t[n][1],i=t[n][2];let s=n-1;const r=[],o=e._tokenizer||i.parser[e.contentType](e.start),a=o.events,l=[],c={};let u,d,f=-1,p=e,m=0,v=0;const y=[v];for(;p;){for(;t[++s][1]!==p;);r.push(s),p._tokenizer||(u=i.sliceStream(p),p.next||u.push(null),d&&o.defineSkip(p.start),p._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(u),p._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),d=p,p=p.next}for(p=e;++f<a.length;)a[f][0]==="exit"&&a[f-1][0]==="enter"&&a[f][1].type===a[f-1][1].type&&a[f][1].start.line!==a[f][1].end.line&&(v=f+1,y.push(v),p._tokenizer=void 0,p.previous=void 0,p=p.next);for(o.events=[],p?(p._tokenizer=void 0,p.previous=void 0):y.pop(),f=y.length;f--;){const _=a.slice(y[f],y[f+1]),b=r.pop();l.unshift([b,b+_.length-1]),Eo(t,b,2,_)}for(f=-1;++f<l.length;)c[m+l[f][0]]=m+l[f][1],m+=l[f][1]-l[f][0]-1;return c}const XOe={tokenize:eLe,resolve:QOe},JOe={tokenize:tLe,partial:!0};function QOe(t){return PU(t),t}function eLe(t,n){let e;return i;function i(a){return t.enter("content"),e=t.enter("chunkContent",{contentType:"content"}),s(a)}function s(a){return a===null?r(a):on(a)?t.check(JOe,o,r)(a):(t.consume(a),s)}function r(a){return t.exit("chunkContent"),t.exit("content"),n(a)}function o(a){return t.consume(a),t.exit("chunkContent"),e.next=t.enter("chunkContent",{contentType:"content",previous:e}),e=e.next,s}}function tLe(t,n,e){const i=this;return s;function s(o){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),Qn(t,r,"linePrefix")}function r(o){if(o===null||on(o))return e(o);const a=i.events[i.events.length-1];return!i.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?n(o):t.interrupt(i.parser.constructs.flow,e,n)(o)}}function OU(t,n,e,i,s,r,o,a,l){const c=l||Number.POSITIVE_INFINITY;let u=0;return d;function d(_){return _===60?(t.enter(i),t.enter(s),t.enter(r),t.consume(_),t.exit(r),f):_===null||_===32||_===41||j_(_)?e(_):(t.enter(i),t.enter(o),t.enter(a),t.enter("chunkString",{contentType:"string"}),v(_))}function f(_){return _===62?(t.enter(r),t.consume(_),t.exit(r),t.exit(s),t.exit(i),n):(t.enter(a),t.enter("chunkString",{contentType:"string"}),p(_))}function p(_){return _===62?(t.exit("chunkString"),t.exit(a),f(_)):_===null||_===60||on(_)?e(_):(t.consume(_),_===92?m:p)}function m(_){return _===60||_===62||_===92?(t.consume(_),p):p(_)}function v(_){return!u&&(_===null||_===41||Oi(_))?(t.exit("chunkString"),t.exit(a),t.exit(o),t.exit(i),n(_)):u<c&&_===40?(t.consume(_),u++,v):_===41?(t.consume(_),u--,v):_===null||_===32||_===40||j_(_)?e(_):(t.consume(_),_===92?y:v)}function y(_){return _===40||_===41||_===92?(t.consume(_),v):v(_)}}function LU(t,n,e,i,s,r){const o=this;let a=0,l;return c;function c(p){return t.enter(i),t.enter(s),t.consume(p),t.exit(s),t.enter(r),u}function u(p){return a>999||p===null||p===91||p===93&&!l||p===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?e(p):p===93?(t.exit(r),t.enter(s),t.consume(p),t.exit(s),t.exit(i),n):on(p)?(t.enter("lineEnding"),t.consume(p),t.exit("lineEnding"),u):(t.enter("chunkString",{contentType:"string"}),d(p))}function d(p){return p===null||p===91||p===93||on(p)||a++>999?(t.exit("chunkString"),u(p)):(t.consume(p),l||(l=!zn(p)),p===92?f:d)}function f(p){return p===91||p===92||p===93?(t.consume(p),a++,d):d(p)}}function BU(t,n,e,i,s,r){let o;return a;function a(f){return f===34||f===39||f===40?(t.enter(i),t.enter(s),t.consume(f),t.exit(s),o=f===40?41:f,l):e(f)}function l(f){return f===o?(t.enter(s),t.consume(f),t.exit(s),t.exit(i),n):(t.enter(r),c(f))}function c(f){return f===o?(t.exit(r),l(o)):f===null?e(f):on(f)?(t.enter("lineEnding"),t.consume(f),t.exit("lineEnding"),Qn(t,c,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),u(f))}function u(f){return f===o||f===null||on(f)?(t.exit("chunkString"),c(f)):(t.consume(f),f===92?d:u)}function d(f){return f===o||f===92?(t.consume(f),u):u(f)}}function Lg(t,n){let e;return i;function i(s){return on(s)?(t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),e=!0,i):zn(s)?Qn(t,i,e?"linePrefix":"lineSuffix")(s):n(s)}}const nLe={name:"definition",tokenize:sLe},iLe={tokenize:rLe,partial:!0};function sLe(t,n,e){const i=this;let s;return r;function r(p){return t.enter("definition"),o(p)}function o(p){return LU.call(i,t,a,e,"definitionLabel","definitionLabelMarker","definitionLabelString")(p)}function a(p){return s=xl(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)),p===58?(t.enter("definitionMarker"),t.consume(p),t.exit("definitionMarker"),l):e(p)}function l(p){return Oi(p)?Lg(t,c)(p):c(p)}function c(p){return OU(t,u,e,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(p)}function u(p){return t.attempt(iLe,d,d)(p)}function d(p){return zn(p)?Qn(t,f,"whitespace")(p):f(p)}function f(p){return p===null||on(p)?(t.exit("definition"),i.parser.defined.push(s),n(p)):e(p)}}function rLe(t,n,e){return i;function i(a){return Oi(a)?Lg(t,s)(a):e(a)}function s(a){return BU(t,r,e,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function r(a){return zn(a)?Qn(t,o,"whitespace")(a):o(a)}function o(a){return a===null||on(a)?n(a):e(a)}}const oLe={name:"hardBreakEscape",tokenize:aLe};function aLe(t,n,e){return i;function i(r){return t.enter("hardBreakEscape"),t.consume(r),s}function s(r){return on(r)?(t.exit("hardBreakEscape"),n(r)):e(r)}}const lLe={name:"headingAtx",tokenize:uLe,resolve:cLe};function cLe(t,n){let e=t.length-2,i=3,s,r;return t[i][1].type==="whitespace"&&(i+=2),e-2>i&&t[e][1].type==="whitespace"&&(e-=2),t[e][1].type==="atxHeadingSequence"&&(i===e-1||e-4>i&&t[e-2][1].type==="whitespace")&&(e-=i+1===e?2:4),e>i&&(s={type:"atxHeadingText",start:t[i][1].start,end:t[e][1].end},r={type:"chunkText",start:t[i][1].start,end:t[e][1].end,contentType:"text"},Eo(t,i,e-i+1,[["enter",s,n],["enter",r,n],["exit",r,n],["exit",s,n]])),t}function uLe(t,n,e){let i=0;return s;function s(u){return t.enter("atxHeading"),r(u)}function r(u){return t.enter("atxHeadingSequence"),o(u)}function o(u){return u===35&&i++<6?(t.consume(u),o):u===null||Oi(u)?(t.exit("atxHeadingSequence"),a(u)):e(u)}function a(u){return u===35?(t.enter("atxHeadingSequence"),l(u)):u===null||on(u)?(t.exit("atxHeading"),n(u)):zn(u)?Qn(t,a,"whitespace")(u):(t.enter("atxHeadingText"),c(u))}function l(u){return u===35?(t.consume(u),l):(t.exit("atxHeadingSequence"),a(u))}function c(u){return u===null||u===35||Oi(u)?(t.exit("atxHeadingText"),a(u)):(t.consume(u),c)}}const dLe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],lP=["pre","script","style","textarea"],hLe={name:"htmlFlow",tokenize:gLe,resolveTo:pLe,concrete:!0},fLe={tokenize:bLe,partial:!0},mLe={tokenize:vLe,partial:!0};function pLe(t){let n=t.length;for(;n--&&!(t[n][0]==="enter"&&t[n][1].type==="htmlFlow"););return n>1&&t[n-2][1].type==="linePrefix"&&(t[n][1].start=t[n-2][1].start,t[n+1][1].start=t[n-2][1].start,t.splice(n-2,2)),t}function gLe(t,n,e){const i=this;let s,r,o,a,l;return c;function c(U){return u(U)}function u(U){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(U),d}function d(U){return U===33?(t.consume(U),f):U===47?(t.consume(U),r=!0,v):U===63?(t.consume(U),s=3,i.interrupt?n:S):Er(U)?(t.consume(U),o=String.fromCharCode(U),y):e(U)}function f(U){return U===45?(t.consume(U),s=2,p):U===91?(t.consume(U),s=5,a=0,m):Er(U)?(t.consume(U),s=4,i.interrupt?n:S):e(U)}function p(U){return U===45?(t.consume(U),i.interrupt?n:S):e(U)}function m(U){const Pe="CDATA[";return U===Pe.charCodeAt(a++)?(t.consume(U),a===Pe.length?i.interrupt?n:R:m):e(U)}function v(U){return Er(U)?(t.consume(U),o=String.fromCharCode(U),y):e(U)}function y(U){if(U===null||U===47||U===62||Oi(U)){const Pe=U===47,Fe=o.toLowerCase();return!Pe&&!r&&lP.includes(Fe)?(s=1,i.interrupt?n(U):R(U)):dLe.includes(o.toLowerCase())?(s=6,Pe?(t.consume(U),_):i.interrupt?n(U):R(U)):(s=7,i.interrupt&&!i.parser.lazy[i.now().line]?e(U):r?b(U):E(U))}return U===45||fr(U)?(t.consume(U),o+=String.fromCharCode(U),y):e(U)}function _(U){return U===62?(t.consume(U),i.interrupt?n:R):e(U)}function b(U){return zn(U)?(t.consume(U),b):T(U)}function E(U){return U===47?(t.consume(U),T):U===58||U===95||Er(U)?(t.consume(U),x):zn(U)?(t.consume(U),E):T(U)}function x(U){return U===45||U===46||U===58||U===95||fr(U)?(t.consume(U),x):A(U)}function A(U){return U===61?(t.consume(U),I):zn(U)?(t.consume(U),A):E(U)}function I(U){return U===null||U===60||U===61||U===62||U===96?e(U):U===34||U===39?(t.consume(U),l=U,k):zn(U)?(t.consume(U),I):O(U)}function k(U){return U===l?(t.consume(U),l=null,M):U===null||on(U)?e(U):(t.consume(U),k)}function O(U){return U===null||U===34||U===39||U===47||U===60||U===61||U===62||U===96||Oi(U)?A(U):(t.consume(U),O)}function M(U){return U===47||U===62||zn(U)?E(U):e(U)}function T(U){return U===62?(t.consume(U),P):e(U)}function P(U){return U===null||on(U)?R(U):zn(U)?(t.consume(U),P):e(U)}function R(U){return U===45&&s===2?(t.consume(U),z):U===60&&s===1?(t.consume(U),J):U===62&&s===4?(t.consume(U),V):U===63&&s===3?(t.consume(U),S):U===93&&s===5?(t.consume(U),G):on(U)&&(s===6||s===7)?(t.exit("htmlFlowData"),t.check(fLe,re,L)(U)):U===null||on(U)?(t.exit("htmlFlowData"),L(U)):(t.consume(U),R)}function L(U){return t.check(mLe,F,re)(U)}function F(U){return t.enter("lineEnding"),t.consume(U),t.exit("lineEnding"),B}function B(U){return U===null||on(U)?L(U):(t.enter("htmlFlowData"),R(U))}function z(U){return U===45?(t.consume(U),S):R(U)}function J(U){return U===47?(t.consume(U),o="",q):R(U)}function q(U){if(U===62){const Pe=o.toLowerCase();return lP.includes(Pe)?(t.consume(U),V):R(U)}return Er(U)&&o.length<8?(t.consume(U),o+=String.fromCharCode(U),q):R(U)}function G(U){return U===93?(t.consume(U),S):R(U)}function S(U){return U===62?(t.consume(U),V):U===45&&s===2?(t.consume(U),S):R(U)}function V(U){return U===null||on(U)?(t.exit("htmlFlowData"),re(U)):(t.consume(U),V)}function re(U){return t.exit("htmlFlow"),n(U)}}function vLe(t,n,e){const i=this;return s;function s(o){return on(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),r):e(o)}function r(o){return i.parser.lazy[i.now().line]?e(o):n(o)}}function bLe(t,n,e){return i;function i(s){return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),t.attempt(i0,n,e)}}const _Le={name:"htmlText",tokenize:wLe};function wLe(t,n,e){const i=this;let s,r,o;return a;function a(S){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(S),l}function l(S){return S===33?(t.consume(S),c):S===47?(t.consume(S),A):S===63?(t.consume(S),E):Er(S)?(t.consume(S),O):e(S)}function c(S){return S===45?(t.consume(S),u):S===91?(t.consume(S),r=0,m):Er(S)?(t.consume(S),b):e(S)}function u(S){return S===45?(t.consume(S),p):e(S)}function d(S){return S===null?e(S):S===45?(t.consume(S),f):on(S)?(o=d,J(S)):(t.consume(S),d)}function f(S){return S===45?(t.consume(S),p):d(S)}function p(S){return S===62?z(S):S===45?f(S):d(S)}function m(S){const V="CDATA[";return S===V.charCodeAt(r++)?(t.consume(S),r===V.length?v:m):e(S)}function v(S){return S===null?e(S):S===93?(t.consume(S),y):on(S)?(o=v,J(S)):(t.consume(S),v)}function y(S){return S===93?(t.consume(S),_):v(S)}function _(S){return S===62?z(S):S===93?(t.consume(S),_):v(S)}function b(S){return S===null||S===62?z(S):on(S)?(o=b,J(S)):(t.consume(S),b)}function E(S){return S===null?e(S):S===63?(t.consume(S),x):on(S)?(o=E,J(S)):(t.consume(S),E)}function x(S){return S===62?z(S):E(S)}function A(S){return Er(S)?(t.consume(S),I):e(S)}function I(S){return S===45||fr(S)?(t.consume(S),I):k(S)}function k(S){return on(S)?(o=k,J(S)):zn(S)?(t.consume(S),k):z(S)}function O(S){return S===45||fr(S)?(t.consume(S),O):S===47||S===62||Oi(S)?M(S):e(S)}function M(S){return S===47?(t.consume(S),z):S===58||S===95||Er(S)?(t.consume(S),T):on(S)?(o=M,J(S)):zn(S)?(t.consume(S),M):z(S)}function T(S){return S===45||S===46||S===58||S===95||fr(S)?(t.consume(S),T):P(S)}function P(S){return S===61?(t.consume(S),R):on(S)?(o=P,J(S)):zn(S)?(t.consume(S),P):M(S)}function R(S){return S===null||S===60||S===61||S===62||S===96?e(S):S===34||S===39?(t.consume(S),s=S,L):on(S)?(o=R,J(S)):zn(S)?(t.consume(S),R):(t.consume(S),F)}function L(S){return S===s?(t.consume(S),s=void 0,B):S===null?e(S):on(S)?(o=L,J(S)):(t.consume(S),L)}function F(S){return S===null||S===34||S===39||S===60||S===61||S===96?e(S):S===47||S===62||Oi(S)?M(S):(t.consume(S),F)}function B(S){return S===47||S===62||Oi(S)?M(S):e(S)}function z(S){return S===62?(t.consume(S),t.exit("htmlTextData"),t.exit("htmlText"),n):e(S)}function J(S){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(S),t.exit("lineEnding"),q}function q(S){return zn(S)?Qn(t,G,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(S):G(S)}function G(S){return t.enter("htmlTextData"),o(S)}}const nT={name:"labelEnd",tokenize:TLe,resolveTo:SLe,resolveAll:ELe},yLe={tokenize:xLe},CLe={tokenize:ALe},kLe={tokenize:ILe};function ELe(t){let n=-1;for(;++n<t.length;){const e=t[n][1];(e.type==="labelImage"||e.type==="labelLink"||e.type==="labelEnd")&&(t.splice(n+1,e.type==="labelImage"?4:2),e.type="data",n++)}return t}function SLe(t,n){let e=t.length,i=0,s,r,o,a;for(;e--;)if(s=t[e][1],r){if(s.type==="link"||s.type==="labelLink"&&s._inactive)break;t[e][0]==="enter"&&s.type==="labelLink"&&(s._inactive=!0)}else if(o){if(t[e][0]==="enter"&&(s.type==="labelImage"||s.type==="labelLink")&&!s._balanced&&(r=e,s.type!=="labelLink")){i=2;break}}else s.type==="labelEnd"&&(o=e);const l={type:t[r][1].type==="labelLink"?"link":"image",start:Object.assign({},t[r][1].start),end:Object.assign({},t[t.length-1][1].end)},c={type:"label",start:Object.assign({},t[r][1].start),end:Object.assign({},t[o][1].end)},u={type:"labelText",start:Object.assign({},t[r+i+2][1].end),end:Object.assign({},t[o-2][1].start)};return a=[["enter",l,n],["enter",c,n]],a=or(a,t.slice(r+1,r+i+3)),a=or(a,[["enter",u,n]]),a=or(a,Ty(n.parser.constructs.insideSpan.null,t.slice(r+i+4,o-3),n)),a=or(a,[["exit",u,n],t[o-2],t[o-1],["exit",c,n]]),a=or(a,t.slice(o+1)),a=or(a,[["exit",l,n]]),Eo(t,r,t.length,a),t}function TLe(t,n,e){const i=this;let s=i.events.length,r,o;for(;s--;)if((i.events[s][1].type==="labelImage"||i.events[s][1].type==="labelLink")&&!i.events[s][1]._balanced){r=i.events[s][1];break}return a;function a(f){return r?r._inactive?d(f):(o=i.parser.defined.includes(xl(i.sliceSerialize({start:r.end,end:i.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(f),t.exit("labelMarker"),t.exit("labelEnd"),l):e(f)}function l(f){return f===40?t.attempt(yLe,u,o?u:d)(f):f===91?t.attempt(CLe,u,o?c:d)(f):o?u(f):d(f)}function c(f){return t.attempt(kLe,u,d)(f)}function u(f){return n(f)}function d(f){return r._balanced=!0,e(f)}}function xLe(t,n,e){return i;function i(d){return t.enter("resource"),t.enter("resourceMarker"),t.consume(d),t.exit("resourceMarker"),s}function s(d){return Oi(d)?Lg(t,r)(d):r(d)}function r(d){return d===41?u(d):OU(t,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(d)}function o(d){return Oi(d)?Lg(t,l)(d):u(d)}function a(d){return e(d)}function l(d){return d===34||d===39||d===40?BU(t,c,e,"resourceTitle","resourceTitleMarker","resourceTitleString")(d):u(d)}function c(d){return Oi(d)?Lg(t,u)(d):u(d)}function u(d){return d===41?(t.enter("resourceMarker"),t.consume(d),t.exit("resourceMarker"),t.exit("resource"),n):e(d)}}function ALe(t,n,e){const i=this;return s;function s(a){return LU.call(i,t,r,o,"reference","referenceMarker","referenceString")(a)}function r(a){return i.parser.defined.includes(xl(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)))?n(a):e(a)}function o(a){return e(a)}}function ILe(t,n,e){return i;function i(r){return t.enter("reference"),t.enter("referenceMarker"),t.consume(r),t.exit("referenceMarker"),s}function s(r){return r===93?(t.enter("referenceMarker"),t.consume(r),t.exit("referenceMarker"),t.exit("reference"),n):e(r)}}const RLe={name:"labelStartImage",tokenize:MLe,resolveAll:nT.resolveAll};function MLe(t,n,e){const i=this;return s;function s(a){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(a),t.exit("labelImageMarker"),r}function r(a){return a===91?(t.enter("labelMarker"),t.consume(a),t.exit("labelMarker"),t.exit("labelImage"),o):e(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in i.parser.constructs?e(a):n(a)}}const PLe={name:"labelStartLink",tokenize:OLe,resolveAll:nT.resolveAll};function OLe(t,n,e){const i=this;return s;function s(o){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(o),t.exit("labelMarker"),t.exit("labelLink"),r}function r(o){return o===94&&"_hiddenFootnoteSupport"in i.parser.constructs?e(o):n(o)}}const v3={name:"lineEnding",tokenize:LLe};function LLe(t,n){return e;function e(i){return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),Qn(t,n,"linePrefix")}}const jb={name:"thematicBreak",tokenize:BLe};function BLe(t,n,e){let i=0,s;return r;function r(c){return t.enter("thematicBreak"),o(c)}function o(c){return s=c,a(c)}function a(c){return c===s?(t.enter("thematicBreakSequence"),l(c)):i>=3&&(c===null||on(c))?(t.exit("thematicBreak"),n(c)):e(c)}function l(c){return c===s?(t.consume(c),i++,l):(t.exit("thematicBreakSequence"),zn(c)?Qn(t,a,"whitespace")(c):a(c))}}const Vr={name:"list",tokenize:VLe,continuation:{tokenize:DLe},exit:zLe},FLe={tokenize:HLe,partial:!0},NLe={tokenize:$Le,partial:!0};function VLe(t,n,e){const i=this,s=i.events[i.events.length-1];let r=s&&s[1].type==="linePrefix"?s[2].sliceSerialize(s[1],!0).length:0,o=0;return a;function a(p){const m=i.containerState.type||(p===42||p===43||p===45?"listUnordered":"listOrdered");if(m==="listUnordered"?!i.containerState.marker||p===i.containerState.marker:Jk(p)){if(i.containerState.type||(i.containerState.type=m,t.enter(m,{_container:!0})),m==="listUnordered")return t.enter("listItemPrefix"),p===42||p===45?t.check(jb,e,c)(p):c(p);if(!i.interrupt||p===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),l(p)}return e(p)}function l(p){return Jk(p)&&++o<10?(t.consume(p),l):(!i.interrupt||o<2)&&(i.containerState.marker?p===i.containerState.marker:p===41||p===46)?(t.exit("listItemValue"),c(p)):e(p)}function c(p){return t.enter("listItemMarker"),t.consume(p),t.exit("listItemMarker"),i.containerState.marker=i.containerState.marker||p,t.check(i0,i.interrupt?e:u,t.attempt(FLe,f,d))}function u(p){return i.containerState.initialBlankLine=!0,r++,f(p)}function d(p){return zn(p)?(t.enter("listItemPrefixWhitespace"),t.consume(p),t.exit("listItemPrefixWhitespace"),f):e(p)}function f(p){return i.containerState.size=r+i.sliceSerialize(t.exit("listItemPrefix"),!0).length,n(p)}}function DLe(t,n,e){const i=this;return i.containerState._closeFlow=void 0,t.check(i0,s,r);function s(a){return i.containerState.furtherBlankLines=i.containerState.furtherBlankLines||i.containerState.initialBlankLine,Qn(t,n,"listItemIndent",i.containerState.size+1)(a)}function r(a){return i.containerState.furtherBlankLines||!zn(a)?(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,o(a)):(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,t.attempt(NLe,n,o)(a))}function o(a){return i.containerState._closeFlow=!0,i.interrupt=void 0,Qn(t,t.attempt(Vr,n,e),"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function $Le(t,n,e){const i=this;return Qn(t,s,"listItemIndent",i.containerState.size+1);function s(r){const o=i.events[i.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===i.containerState.size?n(r):e(r)}}function zLe(t){t.exit(this.containerState.type)}function HLe(t,n,e){const i=this;return Qn(t,s,"listItemPrefixWhitespace",i.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function s(r){const o=i.events[i.events.length-1];return!zn(r)&&o&&o[1].type==="listItemPrefixWhitespace"?n(r):e(r)}}const cP={name:"setextUnderline",tokenize:WLe,resolveTo:ULe};function ULe(t,n){let e=t.length,i,s,r;for(;e--;)if(t[e][0]==="enter"){if(t[e][1].type==="content"){i=e;break}t[e][1].type==="paragraph"&&(s=e)}else t[e][1].type==="content"&&t.splice(e,1),!r&&t[e][1].type==="definition"&&(r=e);const o={type:"setextHeading",start:Object.assign({},t[s][1].start),end:Object.assign({},t[t.length-1][1].end)};return t[s][1].type="setextHeadingText",r?(t.splice(s,0,["enter",o,n]),t.splice(r+1,0,["exit",t[i][1],n]),t[i][1].end=Object.assign({},t[r][1].end)):t[i][1]=o,t.push(["exit",o,n]),t}function WLe(t,n,e){const i=this;let s;return r;function r(c){let u=i.events.length,d;for(;u--;)if(i.events[u][1].type!=="lineEnding"&&i.events[u][1].type!=="linePrefix"&&i.events[u][1].type!=="content"){d=i.events[u][1].type==="paragraph";break}return!i.parser.lazy[i.now().line]&&(i.interrupt||d)?(t.enter("setextHeadingLine"),s=c,o(c)):e(c)}function o(c){return t.enter("setextHeadingLineSequence"),a(c)}function a(c){return c===s?(t.consume(c),a):(t.exit("setextHeadingLineSequence"),zn(c)?Qn(t,l,"lineSuffix")(c):l(c))}function l(c){return c===null||on(c)?(t.exit("setextHeadingLine"),n(c)):e(c)}}const jLe={tokenize:qLe};function qLe(t){const n=this,e=t.attempt(i0,i,t.attempt(this.parser.constructs.flowInitial,s,Qn(t,t.attempt(this.parser.constructs.flow,s,t.attempt(XOe,s)),"linePrefix")));return e;function i(r){if(r===null){t.consume(r);return}return t.enter("lineEndingBlank"),t.consume(r),t.exit("lineEndingBlank"),n.currentConstruct=void 0,e}function s(r){if(r===null){t.consume(r);return}return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),n.currentConstruct=void 0,e}}const KLe={resolveAll:NU()},GLe=FU("string"),YLe=FU("text");function FU(t){return{tokenize:n,resolveAll:NU(t==="text"?ZLe:void 0)};function n(e){const i=this,s=this.parser.constructs[t],r=e.attempt(s,o,a);return o;function o(u){return c(u)?r(u):a(u)}function a(u){if(u===null){e.consume(u);return}return e.enter("data"),e.consume(u),l}function l(u){return c(u)?(e.exit("data"),r(u)):(e.consume(u),l)}function c(u){if(u===null)return!0;const d=s[u];let f=-1;if(d)for(;++f<d.length;){const p=d[f];if(!p.previous||p.previous.call(i,i.previous))return!0}return!1}}}function NU(t){return n;function n(e,i){let s=-1,r;for(;++s<=e.length;)r===void 0?e[s]&&e[s][1].type==="data"&&(r=s,s++):(!e[s]||e[s][1].type!=="data")&&(s!==r+2&&(e[r][1].end=e[s-1][1].end,e.splice(r+2,s-r-2),s=r+2),r=void 0);return t?t(e,i):e}}function ZLe(t,n){let e=0;for(;++e<=t.length;)if((e===t.length||t[e][1].type==="lineEnding")&&t[e-1][1].type==="data"){const i=t[e-1][1],s=n.sliceStream(i);let r=s.length,o=-1,a=0,l;for(;r--;){const c=s[r];if(typeof c=="string"){for(o=c.length;c.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(c===-2)l=!0,a++;else if(c!==-1){r++;break}}if(a){const c={type:e===t.length||l||a<2?"lineSuffix":"hardBreakTrailing",start:{line:i.end.line,column:i.end.column-a,offset:i.end.offset-a,_index:i.start._index+r,_bufferIndex:r?o:i.start._bufferIndex+o},end:Object.assign({},i.end)};i.end=Object.assign({},c.start),i.start.offset===i.end.offset?Object.assign(i,c):(t.splice(e,0,["enter",c,n],["exit",c,n]),e+=2)}e++}return t}function XLe(t,n,e){let i=Object.assign(e?Object.assign({},e):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const s={},r=[];let o=[],a=[];const l={consume:b,enter:E,exit:x,attempt:k(A),check:k(I),interrupt:k(I,{interrupt:!0})},c={previous:null,code:null,containerState:{},events:[],parser:t,sliceStream:p,sliceSerialize:f,now:m,defineSkip:v,write:d};let u=n.tokenize.call(c,l);return n.resolveAll&&r.push(n),c;function d(P){return o=or(o,P),y(),o[o.length-1]!==null?[]:(O(n,0),c.events=Ty(r,c.events,c),c.events)}function f(P,R){return QLe(p(P),R)}function p(P){return JLe(o,P)}function m(){const{line:P,column:R,offset:L,_index:F,_bufferIndex:B}=i;return{line:P,column:R,offset:L,_index:F,_bufferIndex:B}}function v(P){s[P.line]=P.column,T()}function y(){let P;for(;i._index<o.length;){const R=o[i._index];if(typeof R=="string")for(P=i._index,i._bufferIndex<0&&(i._bufferIndex=0);i._index===P&&i._bufferIndex<R.length;)_(R.charCodeAt(i._bufferIndex));else _(R)}}function _(P){u=u(P)}function b(P){on(P)?(i.line++,i.column=1,i.offset+=P===-3?2:1,T()):P!==-1&&(i.column++,i.offset++),i._bufferIndex<0?i._index++:(i._bufferIndex++,i._bufferIndex===o[i._index].length&&(i._bufferIndex=-1,i._index++)),c.previous=P}function E(P,R){const L=R||{};return L.type=P,L.start=m(),c.events.push(["enter",L,c]),a.push(L),L}function x(P){const R=a.pop();return R.end=m(),c.events.push(["exit",R,c]),R}function A(P,R){O(P,R.from)}function I(P,R){R.restore()}function k(P,R){return L;function L(F,B,z){let J,q,G,S;return Array.isArray(F)?re(F):"tokenize"in F?re([F]):V(F);function V(Ne){return ne;function ne(me){const pe=me!==null&&Ne[me],ge=me!==null&&Ne.null,rt=[...Array.isArray(pe)?pe:pe?[pe]:[],...Array.isArray(ge)?ge:ge?[ge]:[]];return re(rt)(me)}}function re(Ne){return J=Ne,q=0,Ne.length===0?z:U(Ne[q])}function U(Ne){return ne;function ne(me){return S=M(),G=Ne,Ne.partial||(c.currentConstruct=Ne),Ne.name&&c.parser.constructs.disable.null.includes(Ne.name)?Fe():Ne.tokenize.call(R?Object.assign(Object.create(c),R):c,l,Pe,Fe)(me)}}function Pe(Ne){return P(G,S),B}function Fe(Ne){return S.restore(),++q<J.length?U(J[q]):z}}}function O(P,R){P.resolveAll&&!r.includes(P)&&r.push(P),P.resolve&&Eo(c.events,R,c.events.length-R,P.resolve(c.events.slice(R),c)),P.resolveTo&&(c.events=P.resolveTo(c.events,c))}function M(){const P=m(),R=c.previous,L=c.currentConstruct,F=c.events.length,B=Array.from(a);return{restore:z,from:F};function z(){i=P,c.previous=R,c.currentConstruct=L,c.events.length=F,a=B,T()}}function T(){i.line in s&&i.column<2&&(i.column=s[i.line],i.offset+=s[i.line]-1)}}function JLe(t,n){const e=n.start._index,i=n.start._bufferIndex,s=n.end._index,r=n.end._bufferIndex;let o;if(e===s)o=[t[e].slice(i,r)];else{if(o=t.slice(e,s),i>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(i):o.shift()}r>0&&o.push(t[s].slice(0,r))}return o}function QLe(t,n){let e=-1;const i=[];let s;for(;++e<t.length;){const r=t[e];let o;if(typeof r=="string")o=r;else switch(r){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=n?" ":"	";break}case-1:{if(!n&&s)continue;o=" ";break}default:o=String.fromCharCode(r)}s=r===-2,i.push(o)}return i.join("")}const eBe={42:Vr,43:Vr,45:Vr,48:Vr,49:Vr,50:Vr,51:Vr,52:Vr,53:Vr,54:Vr,55:Vr,56:Vr,57:Vr,62:IU},tBe={91:nLe},nBe={[-2]:g3,[-1]:g3,32:g3},iBe={35:lLe,42:jb,45:[cP,jb],60:hLe,61:cP,95:jb,96:aP,126:aP},sBe={38:MU,92:RU},rBe={[-5]:v3,[-4]:v3,[-3]:v3,33:RLe,38:MU,42:Qk,60:[OOe,_Le],91:PLe,92:[oLe,RU],93:nT,95:Qk,96:qOe},oBe={null:[Qk,KLe]},aBe={null:[42,95]},lBe={null:[]};var cBe=Object.freeze(Object.defineProperty({__proto__:null,document:eBe,contentInitial:tBe,flowInitial:nBe,flow:iBe,string:sBe,text:rBe,insideSpan:oBe,attentionMarkers:aBe,disable:lBe},Symbol.toStringTag,{value:"Module"}));function uBe(t){const e=TU([cBe,...(t||{}).extensions||[]]),i={defined:[],lazy:{},constructs:e,content:s(TOe),document:s(AOe),flow:s(jLe),string:s(GLe),text:s(YLe)};return i;function s(r){return o;function o(a){return XLe(i,r,a)}}}function dBe(t){for(;!PU(t););return t}const uP=/[\0\t\n\r]/g;function hBe(){let t=1,n="",e=!0,i;return s;function s(r,o,a){const l=[];let c,u,d,f,p;for(r=n+r.toString(o),d=0,n="",e&&(r.charCodeAt(0)===65279&&d++,e=void 0);d<r.length;){if(uP.lastIndex=d,c=uP.exec(r),f=c&&c.index!==void 0?c.index:r.length,p=r.charCodeAt(f),!c){n=r.slice(d);break}if(p===10&&d===f&&i)l.push(-3),i=void 0;else switch(i&&(l.push(-5),i=void 0),d<f&&(l.push(r.slice(d,f)),t+=f-d),p){case 0:{l.push(65533),t++;break}case 9:{for(u=Math.ceil(t/4)*4,l.push(-2);t++<u;)l.push(-1);break}case 10:{l.push(-4),t=1;break}default:i=!0,t=1}d=f+1}return a&&(i&&l.push(-5),n&&l.push(n),l.push(null)),l}}function fBe(t,n,e){return typeof n!="string"&&(e=n,n=void 0),SOe(e)(dBe(uBe(e).document().write(hBe()(t,n,!0))))}const mBe={tokenize:wBe,partial:!0},VU={tokenize:yBe,partial:!0},DU={tokenize:CBe,partial:!0},$U={tokenize:kBe,partial:!0},pBe={tokenize:EBe,partial:!0},zU={tokenize:bBe,previous:UU},HU={tokenize:_Be,previous:WU},Fc={tokenize:vBe,previous:jU},Ml={},gBe={text:Ml};let xd=48;for(;xd<123;)Ml[xd]=Fc,xd++,xd===58?xd=65:xd===91&&(xd=97);Ml[43]=Fc;Ml[45]=Fc;Ml[46]=Fc;Ml[95]=Fc;Ml[72]=[Fc,HU];Ml[104]=[Fc,HU];Ml[87]=[Fc,zU];Ml[119]=[Fc,zU];function vBe(t,n,e){const i=this;let s,r;return o;function o(d){return!e4(d)||!jU.call(i,i.previous)||iT(i.events)?e(d):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),a(d))}function a(d){return e4(d)?(t.consume(d),a):d===64?(t.consume(d),l):e(d)}function l(d){return d===46?t.check(pBe,u,c)(d):d===45||d===95||fr(d)?(r=!0,t.consume(d),l):u(d)}function c(d){return t.consume(d),s=!0,l}function u(d){return r&&s&&Er(i.previous)?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),n(d)):e(d)}}function bBe(t,n,e){const i=this;return s;function s(o){return o!==87&&o!==119||!UU.call(i,i.previous)||iT(i.events)?e(o):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check(mBe,t.attempt(VU,t.attempt(DU,r),e),e)(o))}function r(o){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),n(o)}}function _Be(t,n,e){const i=this;let s="",r=!1;return o;function o(d){return(d===72||d===104)&&WU.call(i,i.previous)&&!iT(i.events)?(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),s+=String.fromCodePoint(d),t.consume(d),a):e(d)}function a(d){if(Er(d)&&s.length<5)return s+=String.fromCodePoint(d),t.consume(d),a;if(d===58){const f=s.toLowerCase();if(f==="http"||f==="https")return t.consume(d),l}return e(d)}function l(d){return d===47?(t.consume(d),r?c:(r=!0,l)):e(d)}function c(d){return d===null||j_(d)||Oi(d)||gm(d)||tT(d)?e(d):t.attempt(VU,t.attempt(DU,u),e)(d)}function u(d){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),n(d)}}function wBe(t,n,e){let i=0;return s;function s(o){return(o===87||o===119)&&i<3?(i++,t.consume(o),s):o===46&&i===3?(t.consume(o),r):e(o)}function r(o){return o===null?e(o):n(o)}}function yBe(t,n,e){let i,s,r;return o;function o(c){return c===46||c===95?t.check($U,l,a)(c):c===null||Oi(c)||gm(c)||c!==45&&tT(c)?l(c):(r=!0,t.consume(c),o)}function a(c){return c===95?i=!0:(s=i,i=void 0),t.consume(c),o}function l(c){return s||i||!r?e(c):n(c)}}function CBe(t,n){let e=0,i=0;return s;function s(o){return o===40?(e++,t.consume(o),s):o===41&&i<e?r(o):o===33||o===34||o===38||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===60||o===63||o===93||o===95||o===126?t.check($U,n,r)(o):o===null||Oi(o)||gm(o)?n(o):(t.consume(o),s)}function r(o){return o===41&&i++,t.consume(o),s}}function kBe(t,n,e){return i;function i(a){return a===33||a===34||a===39||a===41||a===42||a===44||a===46||a===58||a===59||a===63||a===95||a===126?(t.consume(a),i):a===38?(t.consume(a),r):a===93?(t.consume(a),s):a===60||a===null||Oi(a)||gm(a)?n(a):e(a)}function s(a){return a===null||a===40||a===91||Oi(a)||gm(a)?n(a):i(a)}function r(a){return Er(a)?o(a):e(a)}function o(a){return a===59?(t.consume(a),i):Er(a)?(t.consume(a),o):e(a)}}function EBe(t,n,e){return i;function i(r){return t.consume(r),s}function s(r){return fr(r)?e(r):n(r)}}function UU(t){return t===null||t===40||t===42||t===95||t===91||t===93||t===126||Oi(t)}function WU(t){return!Er(t)}function jU(t){return!(t===47||e4(t))}function e4(t){return t===43||t===45||t===46||t===95||fr(t)}function iT(t){let n=t.length,e=!1;for(;n--;){const i=t[n][1];if((i.type==="labelLink"||i.type==="labelImage")&&!i._balanced){e=!0;break}if(i._gfmAutolinkLiteralWalkedInto){e=!1;break}}return t.length>0&&!e&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),e}const SBe={exit:{literalAutolinkEmail:xBe,literalAutolinkHttp:ABe,literalAutolinkWww:TBe}};function TBe(t){sT.call(this,t,"http://")}function xBe(t){sT.call(this,t,"mailto:")}function ABe(t){sT.call(this,t)}function sT(t,n){const e=this.sliceSerialize(t);this.tag('<a href="'+Xd((n||"")+e)+'">'),this.raw(this.encode(e)),this.tag("</a>")}const IBe={tokenize:NBe,partial:!0};function RBe(){return{document:{91:{tokenize:LBe,continuation:{tokenize:BBe},exit:FBe}},text:{91:{tokenize:OBe},93:{add:"after",tokenize:MBe,resolveTo:PBe}}}}function MBe(t,n,e){const i=this;let s=i.events.length;const r=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let o;for(;s--;){const l=i.events[s][1];if(l.type==="labelImage"){o=l;break}if(l.type==="gfmFootnoteCall"||l.type==="labelLink"||l.type==="label"||l.type==="image"||l.type==="link")break}return a;function a(l){if(!o||!o._balanced)return e(l);const c=xl(i.sliceSerialize({start:o.end,end:i.now()}));return c.codePointAt(0)!==94||!r.includes(c.slice(1))?e(l):(t.enter("gfmFootnoteCallLabelMarker"),t.consume(l),t.exit("gfmFootnoteCallLabelMarker"),n(l))}}function PBe(t,n){let e=t.length;for(;e--;)if(t[e][1].type==="labelImage"&&t[e][0]==="enter"){t[e][1];break}t[e+1][1].type="data",t[e+3][1].type="gfmFootnoteCallLabelMarker";const i={type:"gfmFootnoteCall",start:Object.assign({},t[e+3][1].start),end:Object.assign({},t[t.length-1][1].end)},s={type:"gfmFootnoteCallMarker",start:Object.assign({},t[e+3][1].end),end:Object.assign({},t[e+3][1].end)};s.end.column++,s.end.offset++,s.end._bufferIndex++;const r={type:"gfmFootnoteCallString",start:Object.assign({},s.end),end:Object.assign({},t[t.length-1][1].start)},o={type:"chunkString",contentType:"string",start:Object.assign({},r.start),end:Object.assign({},r.end)},a=[t[e+1],t[e+2],["enter",i,n],t[e+3],t[e+4],["enter",s,n],["exit",s,n],["enter",r,n],["enter",o,n],["exit",o,n],["exit",r,n],t[t.length-2],t[t.length-1],["exit",i,n]];return t.splice(e,t.length-e+1,...a),t}function OBe(t,n,e){const i=this,s=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let r=0,o;return a;function a(d){return t.enter("gfmFootnoteCall"),t.enter("gfmFootnoteCallLabelMarker"),t.consume(d),t.exit("gfmFootnoteCallLabelMarker"),l}function l(d){return d!==94?e(d):(t.enter("gfmFootnoteCallMarker"),t.consume(d),t.exit("gfmFootnoteCallMarker"),t.enter("gfmFootnoteCallString"),t.enter("chunkString").contentType="string",c)}function c(d){if(r>999||d===93&&!o||d===null||d===91||Oi(d))return e(d);if(d===93){t.exit("chunkString");const f=t.exit("gfmFootnoteCallString");return s.includes(xl(i.sliceSerialize(f)))?(t.enter("gfmFootnoteCallLabelMarker"),t.consume(d),t.exit("gfmFootnoteCallLabelMarker"),t.exit("gfmFootnoteCall"),n):e(d)}return Oi(d)||(o=!0),r++,t.consume(d),d===92?u:c}function u(d){return d===91||d===92||d===93?(t.consume(d),r++,c):c(d)}}function LBe(t,n,e){const i=this,s=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let r,o=0,a;return l;function l(m){return t.enter("gfmFootnoteDefinition")._container=!0,t.enter("gfmFootnoteDefinitionLabel"),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(m),t.exit("gfmFootnoteDefinitionLabelMarker"),c}function c(m){return m===94?(t.enter("gfmFootnoteDefinitionMarker"),t.consume(m),t.exit("gfmFootnoteDefinitionMarker"),t.enter("gfmFootnoteDefinitionLabelString"),t.enter("chunkString").contentType="string",u):e(m)}function u(m){if(o>999||m===93&&!a||m===null||m===91||Oi(m))return e(m);if(m===93){t.exit("chunkString");const v=t.exit("gfmFootnoteDefinitionLabelString");return r=xl(i.sliceSerialize(v)),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(m),t.exit("gfmFootnoteDefinitionLabelMarker"),t.exit("gfmFootnoteDefinitionLabel"),f}return Oi(m)||(a=!0),o++,t.consume(m),m===92?d:u}function d(m){return m===91||m===92||m===93?(t.consume(m),o++,u):u(m)}function f(m){return m===58?(t.enter("definitionMarker"),t.consume(m),t.exit("definitionMarker"),s.includes(r)||s.push(r),Qn(t,p,"gfmFootnoteDefinitionWhitespace")):e(m)}function p(m){return n(m)}}function BBe(t,n,e){return t.check(i0,n,t.attempt(IBe,n,e))}function FBe(t){t.exit("gfmFootnoteDefinition")}function NBe(t,n,e){const i=this;return Qn(t,s,"gfmFootnoteDefinitionIndent",5);function s(r){const o=i.events[i.events.length-1];return o&&o[1].type==="gfmFootnoteDefinitionIndent"&&o[2].sliceSerialize(o[1],!0).length===4?n(r):e(r)}}const VBe={}.hasOwnProperty,DBe={};function $Be(t,n){return"Back to reference "+(t+1)+(n>1?"-"+n:"")}function zBe(t){const n=DBe,e=n.label||"Footnotes",i=n.labelTagName||"h2",s=n.labelAttributes===null||n.labelAttributes===void 0?'class="sr-only"':n.labelAttributes,r=n.backLabel||$Be,o=n.clobberPrefix===null||n.clobberPrefix===void 0?"user-content-":n.clobberPrefix;return{enter:{gfmFootnoteDefinition(){this.getData("tightStack").push(!1)},gfmFootnoteDefinitionLabelString(){this.buffer()},gfmFootnoteCallString(){this.buffer()}},exit:{gfmFootnoteDefinition(){let a=this.getData("gfmFootnoteDefinitions");const l=this.getData("gfmFootnoteDefinitionStack"),c=this.getData("tightStack"),u=l.pop(),d=this.resume();a||this.setData("gfmFootnoteDefinitions",a={}),VBe.call(a,u)||(a[u]=d),c.pop(),this.setData("slurpOneLineEnding",!0),this.setData("lastWasTag")},gfmFootnoteDefinitionLabelString(a){let l=this.getData("gfmFootnoteDefinitionStack");l||this.setData("gfmFootnoteDefinitionStack",l=[]),l.push(xl(this.sliceSerialize(a))),this.resume(),this.buffer()},gfmFootnoteCallString(a){let l=this.getData("gfmFootnoteCallOrder"),c=this.getData("gfmFootnoteCallCounts");const u=xl(this.sliceSerialize(a));let d;this.resume(),l||this.setData("gfmFootnoteCallOrder",l=[]),c||this.setData("gfmFootnoteCallCounts",c={});const f=l.indexOf(u),p=Xd(u.toLowerCase());f===-1?(l.push(u),c[u]=1,d=l.length):(c[u]++,d=f+1);const m=c[u];this.tag('<sup><a href="#'+o+"fn-"+p+'" id="'+o+"fnref-"+p+(m>1?"-"+m:"")+'" data-footnote-ref="" aria-describedby="footnote-label">'+String(d)+"</a></sup>")},null(){const a=this.getData("gfmFootnoteCallOrder")||[],l=this.getData("gfmFootnoteCallCounts")||{},c=this.getData("gfmFootnoteDefinitions")||{};let u=-1;for(a.length>0&&(this.lineEndingIfNeeded(),this.tag('<section data-footnotes="" class="footnotes"><'+i+' id="footnote-label"'+(s?" "+s:"")+">"),this.raw(this.encode(e)),this.tag("</"+i+">"),this.lineEndingIfNeeded(),this.tag("<ol>"));++u<a.length;){const d=a[u],f=Xd(d.toLowerCase());let p=0;const m=[];for(;++p<=l[d];)m.push('<a href="#'+o+"fnref-"+f+(p>1?"-"+p:"")+'" data-footnote-backref="" aria-label="'+this.encode(typeof r=="string"?r:r(u,p))+'" class="data-footnote-backref">↩'+(p>1?"<sup>"+p+"</sup>":"")+"</a>");const v=m.join(" ");let y=!1;this.lineEndingIfNeeded(),this.tag('<li id="'+o+"fn-"+f+'">'),this.lineEndingIfNeeded(),this.tag(c[d].replace(/<\/p>(?:\r?\n|\r)?$/,_=>(y=!0," "+v+_))),y||(this.lineEndingIfNeeded(),this.tag(v)),this.lineEndingIfNeeded(),this.tag("</li>")}a.length>0&&(this.lineEndingIfNeeded(),this.tag("</ol>"),this.lineEndingIfNeeded(),this.tag("</section>"))}}}}const HBe={enter:{strikethrough(){this.tag("<del>")}},exit:{strikethrough(){this.tag("</del>")}}};function UBe(t){let e={}.singleTilde;const i={tokenize:r,resolveAll:s};return e==null&&(e=!0),{text:{126:i},insideSpan:{null:[i]},attentionMarkers:{null:[126]}};function s(o,a){let l=-1;for(;++l<o.length;)if(o[l][0]==="enter"&&o[l][1].type==="strikethroughSequenceTemporary"&&o[l][1]._close){let c=l;for(;c--;)if(o[c][0]==="exit"&&o[c][1].type==="strikethroughSequenceTemporary"&&o[c][1]._open&&o[l][1].end.offset-o[l][1].start.offset===o[c][1].end.offset-o[c][1].start.offset){o[l][1].type="strikethroughSequence",o[c][1].type="strikethroughSequence";const u={type:"strikethrough",start:Object.assign({},o[c][1].start),end:Object.assign({},o[l][1].end)},d={type:"strikethroughText",start:Object.assign({},o[c][1].end),end:Object.assign({},o[l][1].start)},f=[["enter",u,a],["enter",o[c][1],a],["exit",o[c][1],a],["enter",d,a]],p=a.parser.constructs.insideSpan.null;p&&Eo(f,f.length,0,Ty(p,o.slice(c+1,l),a)),Eo(f,f.length,0,[["exit",d,a],["enter",o[l][1],a],["exit",o[l][1],a],["exit",u,a]]),Eo(o,c-1,l-c+3,f),l=c+f.length-2;break}}for(l=-1;++l<o.length;)o[l][1].type==="strikethroughSequenceTemporary"&&(o[l][1].type="data");return o}function r(o,a,l){const c=this.previous,u=this.events;let d=0;return f;function f(m){return c===126&&u[u.length-1][1].type!=="characterEscape"?l(m):(o.enter("strikethroughSequenceTemporary"),p(m))}function p(m){const v=q_(c);if(m===126)return d>1?l(m):(o.consume(m),d++,p);if(d<2&&!e)return l(m);const y=o.exit("strikethroughSequenceTemporary"),_=q_(m);return y._open=!_||_===2&&!!v,y._close=!v||v===2&&!!_,a(m)}}}const b3={none:"",left:' align="left"',right:' align="right"',center:' align="center"'},WBe={enter:{table(t){const n=t._align;this.lineEndingIfNeeded(),this.tag("<table>"),this.setData("tableAlign",n)},tableBody(){this.tag("<tbody>")},tableData(){const t=this.getData("tableAlign"),n=this.getData("tableColumn"),e=b3[t[n]];e===void 0?this.buffer():(this.lineEndingIfNeeded(),this.tag("<td"+e+">"))},tableHead(){this.lineEndingIfNeeded(),this.tag("<thead>")},tableHeader(){const t=this.getData("tableAlign"),n=this.getData("tableColumn"),e=b3[t[n]];this.lineEndingIfNeeded(),this.tag("<th"+e+">")},tableRow(){this.setData("tableColumn",0),this.lineEndingIfNeeded(),this.tag("<tr>")}},exit:{codeTextData(t){let n=this.sliceSerialize(t);this.getData("tableAlign")&&(n=n.replace(/\\([\\|])/g,jBe)),this.raw(this.encode(n))},table(){this.setData("tableAlign"),this.setData("slurpAllLineEndings"),this.lineEndingIfNeeded(),this.tag("</table>")},tableBody(){this.lineEndingIfNeeded(),this.tag("</tbody>")},tableData(){const t=this.getData("tableAlign"),n=this.getData("tableColumn");n in t?(this.tag("</td>"),this.setData("tableColumn",n+1)):this.resume()},tableHead(){this.lineEndingIfNeeded(),this.tag("</thead>")},tableHeader(){const t=this.getData("tableColumn");this.tag("</th>"),this.setData("tableColumn",t+1)},tableRow(){const t=this.getData("tableAlign");let n=this.getData("tableColumn");for(;n<t.length;)this.lineEndingIfNeeded(),this.tag("<td"+b3[t[n]]+"></td>"),n++;this.setData("tableColumn",n),this.lineEndingIfNeeded(),this.tag("</tr>")}}};function jBe(t,n){return n==="|"?n:t}class qBe{constructor(){this.map=[]}add(n,e,i){KBe(this,n,e,i)}consume(n){if(this.map.sort((r,o)=>r[0]-o[0]),this.map.length===0)return;let e=this.map.length;const i=[];for(;e>0;)e-=1,i.push(n.slice(this.map[e][0]+this.map[e][1])),i.push(this.map[e][2]),n.length=this.map[e][0];i.push([...n]),n.length=0;let s=i.pop();for(;s;)n.push(...s),s=i.pop();this.map.length=0}}function KBe(t,n,e,i){let s=0;if(!(e===0&&i.length===0)){for(;s<t.map.length;){if(t.map[s][0]===n){t.map[s][1]+=e,t.map[s][2].push(...i);return}s+=1}t.map.push([n,e,i])}}function GBe(t,n){let e=!1;const i=[];for(;n<t.length;){const s=t[n];if(e){if(s[0]==="enter")s[1].type==="tableContent"&&i.push(t[n+1][1].type==="tableDelimiterMarker"?"left":"none");else if(s[1].type==="tableContent"){if(t[n-1][1].type==="tableDelimiterMarker"){const r=i.length-1;i[r]=i[r]==="left"?"center":"right"}}else if(s[1].type==="tableDelimiterRow")break}else s[0]==="enter"&&s[1].type==="tableDelimiterRow"&&(e=!0);n+=1}return i}const YBe={flow:{null:{tokenize:ZBe,resolveAll:XBe}}};function ZBe(t,n,e){const i=this;let s=0,r=0,o;return a;function a(T){let P=i.events.length-1;for(;P>-1;){const F=i.events[P][1].type;if(F==="lineEnding"||F==="linePrefix")P--;else break}const R=P>-1?i.events[P][1].type:null,L=R==="tableHead"||R==="tableRow"?I:l;return L===I&&i.parser.lazy[i.now().line]?e(T):L(T)}function l(T){return t.enter("tableHead"),t.enter("tableRow"),c(T)}function c(T){return T===124||(o=!0,r+=1),u(T)}function u(T){return T===null?e(T):on(T)?r>1?(r=0,i.interrupt=!0,t.exit("tableRow"),t.enter("lineEnding"),t.consume(T),t.exit("lineEnding"),p):e(T):zn(T)?Qn(t,u,"whitespace")(T):(r+=1,o&&(o=!1,s+=1),T===124?(t.enter("tableCellDivider"),t.consume(T),t.exit("tableCellDivider"),o=!0,u):(t.enter("data"),d(T)))}function d(T){return T===null||T===124||Oi(T)?(t.exit("data"),u(T)):(t.consume(T),T===92?f:d)}function f(T){return T===92||T===124?(t.consume(T),d):d(T)}function p(T){return i.interrupt=!1,i.parser.lazy[i.now().line]?e(T):(t.enter("tableDelimiterRow"),o=!1,zn(T)?Qn(t,m,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(T):m(T))}function m(T){return T===45||T===58?y(T):T===124?(o=!0,t.enter("tableCellDivider"),t.consume(T),t.exit("tableCellDivider"),v):A(T)}function v(T){return zn(T)?Qn(t,y,"whitespace")(T):y(T)}function y(T){return T===58?(r+=1,o=!0,t.enter("tableDelimiterMarker"),t.consume(T),t.exit("tableDelimiterMarker"),_):T===45?(r+=1,_(T)):T===null||on(T)?x(T):A(T)}function _(T){return T===45?(t.enter("tableDelimiterFiller"),b(T)):A(T)}function b(T){return T===45?(t.consume(T),b):T===58?(o=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume(T),t.exit("tableDelimiterMarker"),E):(t.exit("tableDelimiterFiller"),E(T))}function E(T){return zn(T)?Qn(t,x,"whitespace")(T):x(T)}function x(T){return T===124?m(T):T===null||on(T)?!o||s!==r?A(T):(t.exit("tableDelimiterRow"),t.exit("tableHead"),n(T)):A(T)}function A(T){return e(T)}function I(T){return t.enter("tableRow"),k(T)}function k(T){return T===124?(t.enter("tableCellDivider"),t.consume(T),t.exit("tableCellDivider"),k):T===null||on(T)?(t.exit("tableRow"),n(T)):zn(T)?Qn(t,k,"whitespace")(T):(t.enter("data"),O(T))}function O(T){return T===null||T===124||Oi(T)?(t.exit("data"),k(T)):(t.consume(T),T===92?M:O)}function M(T){return T===92||T===124?(t.consume(T),O):O(T)}}function XBe(t,n){let e=-1,i=!0,s=0,r=[0,0,0,0],o=[0,0,0,0],a=!1,l=0,c,u,d;const f=new qBe;for(;++e<t.length;){const p=t[e],m=p[1];p[0]==="enter"?m.type==="tableHead"?(a=!1,l!==0&&(dP(f,n,l,c,u),u=void 0,l=0),c={type:"table",start:Object.assign({},m.start),end:Object.assign({},m.end)},f.add(e,0,[["enter",c,n]])):m.type==="tableRow"||m.type==="tableDelimiterRow"?(i=!0,d=void 0,r=[0,0,0,0],o=[0,e+1,0,0],a&&(a=!1,u={type:"tableBody",start:Object.assign({},m.start),end:Object.assign({},m.end)},f.add(e,0,[["enter",u,n]])),s=m.type==="tableDelimiterRow"?2:u?3:1):s&&(m.type==="data"||m.type==="tableDelimiterMarker"||m.type==="tableDelimiterFiller")?(i=!1,o[2]===0&&(r[1]!==0&&(o[0]=o[1],d=Yv(f,n,r,s,void 0,d),r=[0,0,0,0]),o[2]=e)):m.type==="tableCellDivider"&&(i?i=!1:(r[1]!==0&&(o[0]=o[1],d=Yv(f,n,r,s,void 0,d)),r=o,o=[r[1],e,0,0])):m.type==="tableHead"?(a=!0,l=e):m.type==="tableRow"||m.type==="tableDelimiterRow"?(l=e,r[1]!==0?(o[0]=o[1],d=Yv(f,n,r,s,e,d)):o[1]!==0&&(d=Yv(f,n,o,s,e,d)),s=0):s&&(m.type==="data"||m.type==="tableDelimiterMarker"||m.type==="tableDelimiterFiller")&&(o[3]=e)}for(l!==0&&dP(f,n,l,c,u),f.consume(n.events),e=-1;++e<n.events.length;){const p=n.events[e];p[0]==="enter"&&p[1].type==="table"&&(p[1]._align=GBe(n.events,e))}return t}function Yv(t,n,e,i,s,r){const o=i===1?"tableHeader":i===2?"tableDelimiter":"tableData",a="tableContent";e[0]!==0&&(r.end=Object.assign({},Rf(n.events,e[0])),t.add(e[0],0,[["exit",r,n]]));const l=Rf(n.events,e[1]);if(r={type:o,start:Object.assign({},l),end:Object.assign({},l)},t.add(e[1],0,[["enter",r,n]]),e[2]!==0){const c=Rf(n.events,e[2]),u=Rf(n.events,e[3]),d={type:a,start:Object.assign({},c),end:Object.assign({},u)};if(t.add(e[2],0,[["enter",d,n]]),i!==2){const f=n.events[e[2]],p=n.events[e[3]];if(f[1].end=Object.assign({},p[1].end),f[1].type="chunkText",f[1].contentType="text",e[3]>e[2]+1){const m=e[2]+1,v=e[3]-e[2]-1;t.add(m,v,[])}}t.add(e[3]+1,0,[["exit",d,n]])}return s!==void 0&&(r.end=Object.assign({},Rf(n.events,s)),t.add(s,0,[["exit",r,n]]),r=void 0),r}function dP(t,n,e,i,s){const r=[],o=Rf(n.events,e);s&&(s.end=Object.assign({},o),r.push(["exit",s,n])),i.end=Object.assign({},o),r.push(["exit",i,n]),t.add(e+1,0,r)}function Rf(t,n){const e=t[n],i=e[0]==="enter"?"start":"end";return e[1][i]}const qU=/<(\/?)(iframe|noembed|noframes|plaintext|script|style|title|textarea|xmp)(?=[\t\n\f\r />])/gi,JBe=new RegExp("^"+qU.source,"i"),QBe={exit:{htmlFlowData(t){hP.call(this,t,qU)},htmlTextData(t){hP.call(this,t,JBe)}}};function hP(t,n){let e=this.sliceSerialize(t);this.options.allowDangerousHtml&&(e=e.replace(n,"&lt;$1$2")),this.raw(this.encode(e))}const eFe={enter:{taskListCheck(){this.tag('<input type="checkbox" disabled="" ')}},exit:{taskListCheck(){this.tag("/>")},taskListCheckValueChecked(){this.tag('checked="" ')}}},tFe={tokenize:iFe},nFe={text:{91:tFe}};function iFe(t,n,e){const i=this;return s;function s(l){return i.previous!==null||!i._gfmTasklistFirstContentOfListItem?e(l):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(l),t.exit("taskListCheckMarker"),r)}function r(l){return Oi(l)?(t.enter("taskListCheckValueUnchecked"),t.consume(l),t.exit("taskListCheckValueUnchecked"),o):l===88||l===120?(t.enter("taskListCheckValueChecked"),t.consume(l),t.exit("taskListCheckValueChecked"),o):e(l)}function o(l){return l===93?(t.enter("taskListCheckMarker"),t.consume(l),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),a):e(l)}function a(l){return on(l)?n(l):zn(l)?t.check({tokenize:sFe},n,e)(l):e(l)}}function sFe(t,n,e){return Qn(t,i,"whitespace");function i(s){return s===null?e(s):n(s)}}function rFe(t){return TU([gBe,RBe(),UBe(),YBe,nFe])}function oFe(t){return xU([SBe,zBe(),HBe,WBe,QBe,eFe])}const Ns={carriageReturn:-5,lineFeed:-4,carriageReturnLineFeed:-3,horizontalTab:-2,virtualSpace:-1,eof:null,nul:0,soh:1,stx:2,etx:3,eot:4,enq:5,ack:6,bel:7,bs:8,ht:9,lf:10,vt:11,ff:12,cr:13,so:14,si:15,dle:16,dc1:17,dc2:18,dc3:19,dc4:20,nak:21,syn:22,etb:23,can:24,em:25,sub:26,esc:27,fs:28,gs:29,rs:30,us:31,space:32,exclamationMark:33,quotationMark:34,numberSign:35,dollarSign:36,percentSign:37,ampersand:38,apostrophe:39,leftParenthesis:40,rightParenthesis:41,asterisk:42,plusSign:43,comma:44,dash:45,dot:46,slash:47,digit0:48,digit1:49,digit2:50,digit3:51,digit4:52,digit5:53,digit6:54,digit7:55,digit8:56,digit9:57,colon:58,semicolon:59,lessThan:60,equalsTo:61,greaterThan:62,questionMark:63,atSign:64,uppercaseA:65,uppercaseB:66,uppercaseC:67,uppercaseD:68,uppercaseE:69,uppercaseF:70,uppercaseG:71,uppercaseH:72,uppercaseI:73,uppercaseJ:74,uppercaseK:75,uppercaseL:76,uppercaseM:77,uppercaseN:78,uppercaseO:79,uppercaseP:80,uppercaseQ:81,uppercaseR:82,uppercaseS:83,uppercaseT:84,uppercaseU:85,uppercaseV:86,uppercaseW:87,uppercaseX:88,uppercaseY:89,uppercaseZ:90,leftSquareBracket:91,backslash:92,rightSquareBracket:93,caret:94,underscore:95,graveAccent:96,lowercaseA:97,lowercaseB:98,lowercaseC:99,lowercaseD:100,lowercaseE:101,lowercaseF:102,lowercaseG:103,lowercaseH:104,lowercaseI:105,lowercaseJ:106,lowercaseK:107,lowercaseL:108,lowercaseM:109,lowercaseN:110,lowercaseO:111,lowercaseP:112,lowercaseQ:113,lowercaseR:114,lowercaseS:115,lowercaseT:116,lowercaseU:117,lowercaseV:118,lowercaseW:119,lowercaseX:120,lowercaseY:121,lowercaseZ:122,leftCurlyBrace:123,verticalBar:124,rightCurlyBrace:125,tilde:126,del:127,degree:176,byteOrderMarker:65279,replacementCharacter:65533},aFe=(t,n,e)=>{const i=o=>o===Ns.carriageReturn||o===Ns.lineFeed||o===Ns.carriageReturnLineFeed||o===Ns.eof?e(o):o===Ns.backslash?(t.consume(o),s):o===Ns.degree?(t.exit("underlineContent"),t.enter("underlineMarker"),t.consume(o),t.exit("underlineMarker"),t.exit("underline"),n):(t.consume(o),i),s=o=>o===Ns.backslash||o===Ns.degree?(t.consume(o),i):i(o),r=o=>o===Ns.degree?e(o):i(o);return o=>(t.enter("underline"),t.enter("underlineMarker"),t.consume(o),t.exit("underlineMarker"),t.enter("underlineContent",{contentType:"string"}),r)},lFe={name:"underline",tokenize:aFe},cFe={text:{176:lFe}},uFe={enter:{underline(){this.tag("<u>")}},exit:{underline(){this.tag("</u>")}}},dFe=(t,n,e)=>{const i=o=>o===Ns.carriageReturn||o===Ns.lineFeed||o===Ns.carriageReturnLineFeed||o===Ns.eof?e(o):o===Ns.backslash?(t.consume(o),s):o===Ns.greaterThan?(t.exit("usertagContent"),t.enter("usertagMarker"),t.consume(o),t.exit("usertagMarker"),t.exit("usertag"),n):(t.consume(o),i),s=o=>o===Ns.backslash||o===Ns.greaterThan?(t.consume(o),i):i(o),r=o=>o===Ns.atSign?(t.consume(o),t.exit("usertagMarker"),t.enter("usertagContent"),i):e(o);return o=>(t.enter("usertag"),t.enter("usertagMarker"),t.consume(o),r)},hFe={name:"usertag",tokenize:dFe},fFe={text:{60:hFe}},mFe=t=>({exit:{usertagContent(n){const e=this.sliceSerialize(n);this.tag(`<span class="vac-text-tag" data-user-id="${e}">`);const i=t.find(s=>s._id===e);this.raw(`@${this.encode(i?i.username:e)}`),this.tag("</span>")}}});var pFe=(t,{textFormatting:n})=>{if(n){let e=[];n.linkify||(e=["literalAutolink","literalAutolinkEmail"]);const i=fBe(t.replaceAll("<usertag>","<@").replaceAll("</usertag>",">"),{extensions:[{...rFe(),disable:{null:e}},cFe,fFe],htmlExtensions:[oFe(),uFe,mFe(n.users)]});if(n.singleLine){const s=document.createElement("div");return s.innerHTML=i,[{types:[],value:s.innerText}]}return[{types:["markdown"],value:i}]}return[{types:[],value:t}]};const rT=["png","jpg","jpeg","webp","svg","gif"],KU=["mp4","video/ogg","webm","quicktime"],gFe=["mp3","audio/ogg","wav","mpeg"],vFe={name:"FormatMessage",components:{SvgIcon:Qs},props:{messageId:{type:String,default:""},roomId:{type:String,default:""},roomList:{type:Boolean,default:!1},content:{type:[String,Number],required:!0},deleted:{type:Boolean,default:!1},users:{type:Array,default:()=>[]},linkify:{type:Boolean,default:!0},singleLine:{type:Boolean,default:!1},reply:{type:Boolean,default:!1},textFormatting:{type:Object,required:!0},textMessages:{type:Object,default:()=>{}},linkOptions:{type:Object,required:!0}},emits:["open-user-tag"],computed:{parsedMessage(){if(this.deleted)return[{value:this.textMessages.MESSAGE_DELETED}];let t;this.textFormatting.disabled?t={}:t={textFormatting:{linkify:this.linkify,linkOptions:this.linkOptions,singleLine:this.singleLine,reply:this.reply,users:this.users,...this.textFormatting}};const n=pFe(this.content,t);return n.forEach(e=>{e.markdown=this.checkType(e,"markdown"),e.tag=this.checkType(e,"tag"),e.image=this.checkImageType(e)}),n}},methods:{checkType(t,n){return t.types&&t.types.indexOf(n)!==-1},checkImageType(t){let n=t.value.lastIndexOf(".");t.value.lastIndexOf("/")>n&&(n=-1);const i=t.value.substring(n+1,t.value.length),s=n>0&&rT.some(r=>i.toLowerCase().includes(r));return s&&this.setImageSize(t),s},setImageSize(t){const n=new Image;n.src=t.value,n.addEventListener("load",e);function e(i){const s=i.path[0].width/150;t.height=Math.round(i.path[0].height/s)+"px",n.removeEventListener("load",e)}},openTag(t){const n=t.target.getAttribute("data-user-id");if(!this.singleLine&&n){const e=this.users.find(i=>String(i._id)===n);this.$emit("open-user-tag",e)}}}},bFe=["innerHTML"],_Fe={class:"vac-image-link-container"},wFe={class:"vac-image-link-message"};function yFe(t,n,e,i,s,r){const o=tn("svg-icon");return Ve(),Qe("div",{class:Pn(["vac-format-message-wrapper",{"vac-text-ellipsis":e.singleLine}])},[(Ve(!0),Qe(Yn,null,Tn(r.parsedMessage,(a,l)=>(Ve(),Qe(Yn,{key:l},[a.markdown?(Ve(),Qe("div",{key:0,class:"markdown",onClick:n[0]||(n[0]=(...c)=>r.openTag&&r.openTag(...c)),innerHTML:a.value},null,8,bFe)):(Ve(),Qe("div",{key:1,class:Pn(["vac-format-container",{"vac-text-ellipsis":e.singleLine}])},[(Ve(),mi(xMe(a.url?"a":"span"),{class:Pn({"vac-text-ellipsis":e.singleLine,"vac-text-tag":!e.singleLine&&!e.reply&&a.tag}),href:a.href,target:a.href?e.linkOptions.target:null,rel:a.href?e.linkOptions.rel:null},{default:rn(()=>[e.deleted?(Ve(),Qe(Yn,{key:0},[xt(t.$slots,e.roomList?"deleted-icon-room_"+e.roomId:"deleted-icon_"+e.messageId,{},()=>[It(o,{name:"deleted",class:Pn(["vac-icon-deleted",{"vac-icon-deleted-room":e.roomList}])},null,8,["class"])]),Tc(" "+fn(e.textMessages.MESSAGE_DELETED),1)],64)):a.url&&a.image?(Ve(),Qe(Yn,{key:1},[gt("div",_Fe,[gt("div",{class:"vac-image-link",style:Wi({"background-image":`url('${a.value}')`,height:a.height})},null,4)]),gt("div",wFe,fn(a.value),1)],64)):(Ve(),Qe(Yn,{key:2},[Tc(fn(a.value),1)],64))]),_:2},1032,["class","href","target","rel"]))],2))],64))),128))],2)}var s0=Ni(vFe,[["render",yFe]]);const Wd="__v-click-outside",GU=typeof window<"u",CFe=typeof navigator<"u",kFe=GU&&("ontouchstart"in window||CFe&&navigator.msMaxTouchPoints>0),EFe=kFe?["touchstart"]:["click"],SFe=t=>{const n=typeof t=="function";if(!n&&typeof t!="object")throw new Error("v-click-outside: Binding value must be a function or an object");return{handler:n?t:t.handler,middleware:t.middleware||(e=>e),events:t.events||EFe,isActive:t.isActive!==!1,detectIframe:t.detectIframe!==!1,capture:!!t.capture}},YU=({event:t,handler:n,middleware:e})=>{e(t)&&n(t)},TFe=({el:t,event:n,handler:e,middleware:i})=>{setTimeout(()=>{const{activeElement:s}=document;s&&s.tagName==="IFRAME"&&!t.contains(s)&&YU({event:n,handler:e,middleware:i})},0)},xFe=({el:t,event:n,handler:e,middleware:i})=>{const s=n.path||n.composedPath&&n.composedPath();(s?s.indexOf(t)<0:!t.contains(n.target))&&YU({event:n,handler:e,middleware:i})},ZU=(t,{value:n})=>{const{events:e,handler:i,middleware:s,isActive:r,detectIframe:o,capture:a}=SFe(n);if(r){if(t[Wd]=e.map(l=>({event:l,srcTarget:document.documentElement,handler:c=>xFe({el:t,event:c,handler:i,middleware:s}),capture:a})),o){const l={event:"blur",srcTarget:window,handler:c=>TFe({el:t,event:c,handler:i,middleware:s}),capture:a};t[Wd]=[...t[Wd],l]}t[Wd].forEach(({event:l,srcTarget:c,handler:u})=>setTimeout(()=>{t[Wd]&&c.addEventListener(l,u,a)},0))}},XU=t=>{(t[Wd]||[]).forEach(({event:e,srcTarget:i,handler:s,capture:r})=>i.removeEventListener(e,s,r)),delete t[Wd]},AFe=(t,{value:n,oldValue:e})=>{JSON.stringify(n)!==JSON.stringify(e)&&(XU(t),ZU(t,{value:n}))},IFe={beforeMount:ZU,updated:AFe,unmounted:XU};var xy=GU?IFe:{},JU=(t,n,e)=>{if(t.typingUsers&&t.typingUsers.length){const i=t.users.filter(s=>{if(s._id!==n&&t.typingUsers.indexOf(s._id)!==-1&&!(s.status&&s.status.state==="offline"))return!0});return i.length?t.users.length===2?e.IS_TYPING:i.map(s=>s.username).join(", ")+" "+e.IS_TYPING:void 0}};function S1(t,n){if(!(!n||!n.type))return t.some(e=>n.type.toLowerCase().includes(e))}function vm(t){return S1(rT,t)}function r0(t){return S1(KU,t)}function fP(t){return S1(rT,t)||S1(KU,t)}function Ay(t){return S1(gFe,t)}const RFe={name:"RoomsContent",components:{SvgIcon:Qs,FormatMessage:s0},directives:{clickOutside:xy},props:{currentUserId:{type:[String,Number],required:!0},room:{type:Object,required:!0},textFormatting:{type:Object,required:!0},linkOptions:{type:Object,required:!0},textMessages:{type:Object,required:!0},roomActions:{type:Array,required:!0}},emits:["room-action-handler"],data(){return{roomMenuOpened:null}},computed:{getLastMessage(){const t=this.typingUsers;if(t)return t;const n=this.room.lastMessage.content;if(this.room.users.length<=2)return n;const e=this.room.users.find(i=>i._id===this.room.lastMessage.senderId);return this.room.lastMessage.username?`${this.room.lastMessage.username} - ${n}`:!e||e._id===this.currentUserId?n:`${e.username} - ${n}`},userStatus(){if(!this.room.users||this.room.users.length!==2)return;const t=this.room.users.find(n=>n._id!==this.currentUserId);return t&&t.status?t.status.state:null},typingUsers(){return JU(this.room,this.currentUserId,this.textMessages)},isMessageCheckmarkVisible(){return!this.typingUsers&&this.room.lastMessage&&!this.room.lastMessage.deleted&&this.room.lastMessage.senderId===this.currentUserId&&(this.room.lastMessage.saved||this.room.lastMessage.distributed||this.room.lastMessage.seen)},formattedDuration(){var t,n;const e=(n=(t=this.room.lastMessage)==null?void 0:t.files)==null?void 0:n[0];if(e){if(!e.duration)return`${e.name}.${e.extension}`;let i=Math.floor(e.duration);return(i-(i%=60))/60+(i>9?":":":0")+i}return""},isAudio(){return this.room.lastMessage.files?Ay(this.room.lastMessage.files[0]):!1}},methods:{roomActionHandler(t){this.closeRoomMenu(),this.$emit("room-action-handler",{action:t,roomId:this.room.roomId})},closeRoomMenu(){this.roomMenuOpened=null}}},MFe={class:"vac-room-container"},PFe={class:"vac-name-container vac-text-ellipsis"},OFe={class:"vac-title-container"},LFe={class:"vac-room-name vac-text-ellipsis"},BFe={key:1,class:"vac-text-date"},FFe={key:0},NFe={key:1,class:"vac-text-ellipsis"},VFe={key:3,class:"vac-text-ellipsis"},DFe={class:"vac-room-options-container"},$Fe={key:0,class:"vac-badge-counter vac-room-badge"},zFe={key:0,class:"vac-menu-options"},HFe={class:"vac-menu-list"},UFe=["onClick"];function WFe(t,n,e,i,s,r){const o=tn("svg-icon"),a=tn("format-message"),l=yy("click-outside");return Ve(),Qe("div",MFe,[xt(t.$slots,"room-list-item_"+e.room.roomId,{},()=>[xt(t.$slots,"room-list-avatar_"+e.room.roomId,{},()=>[e.room.avatar?(Ve(),Qe("div",{key:0,class:"vac-avatar",style:Wi({"background-image":`url('${e.room.avatar}')`})},null,4)):Tt("",!0)]),gt("div",PFe,[gt("div",OFe,[r.userStatus?(Ve(),Qe("div",{key:0,class:Pn(["vac-state-circle",{"vac-state-online":r.userStatus==="online"}])},null,2)):Tt("",!0),xt(t.$slots,"room-list-info_"+e.room.roomId,{},()=>[gt("div",LFe,fn(e.room.roomName),1)]),e.room.lastMessage?(Ve(),Qe("div",BFe,fn(e.room.lastMessage.timestamp),1)):Tt("",!0)]),gt("div",{class:Pn(["vac-text-last",{"vac-message-new":e.room.lastMessage&&e.room.lastMessage.new&&!r.typingUsers}])},[r.isMessageCheckmarkVisible?(Ve(),Qe("span",FFe,[xt(t.$slots,"checkmark-icon_"+e.room.roomId,{},()=>[It(o,{name:e.room.lastMessage.distributed?"double-checkmark":"checkmark",param:e.room.lastMessage.seen?"seen":"",class:"vac-icon-check"},null,8,["name","param"])])])):Tt("",!0),e.room.lastMessage&&!e.room.lastMessage.deleted&&r.isAudio?(Ve(),Qe("div",NFe,[xt(t.$slots,"microphone-icon_"+e.room.roomId,{},()=>[It(o,{name:"microphone",class:"vac-icon-microphone"})]),Tc(" "+fn(r.formattedDuration),1)])):e.room.lastMessage?(Ve(),mi(a,{key:2,"message-id":e.room.lastMessage._id,"room-id":e.room.roomId,"room-list":!0,content:r.getLastMessage,deleted:!!e.room.lastMessage.deleted&&!r.typingUsers,users:e.room.users,"text-messages":e.textMessages,linkify:!1,"text-formatting":e.textFormatting,"link-options":e.linkOptions,"single-line":!0},ki({_:2},[Tn(t.$slots,(c,u)=>({name:u,fn:rn(d=>[xt(t.$slots,u,Ci(vi(d)))])}))]),1032,["message-id","room-id","content","deleted","users","text-messages","text-formatting","link-options"])):Tt("",!0),!e.room.lastMessage&&r.typingUsers?(Ve(),Qe("div",VFe,fn(r.typingUsers),1)):Tt("",!0),gt("div",DFe,[e.room.unreadCount?(Ve(),Qe("div",$Fe,fn(e.room.unreadCount),1)):Tt("",!0),xt(t.$slots,"room-list-options_"+e.room.roomId,{},()=>[e.roomActions.length?(Ve(),Qe("div",{key:0,class:"vac-svg-button vac-list-room-options",onClick:n[0]||(n[0]=bl(c=>s.roomMenuOpened=e.room.roomId,["stop"]))},[xt(t.$slots,"room-list-options-icon_"+e.room.roomId,{},()=>[It(o,{name:"dropdown",param:"room"})])])):Tt("",!0),e.roomActions.length?(Ve(),mi(vs,{key:1,name:"vac-slide-left"},{default:rn(()=>[s.roomMenuOpened===e.room.roomId?Sc((Ve(),Qe("div",zFe,[gt("div",HFe,[(Ve(!0),Qe(Yn,null,Tn(e.roomActions,c=>(Ve(),Qe("div",{key:c.name},[gt("div",{class:"vac-menu-item",onClick:bl(u=>r.roomActionHandler(c),["stop"])},fn(c.title),9,UFe)]))),128))])])),[[l,r.closeRoomMenu]]):Tt("",!0)]),_:1})):Tt("",!0)])])],2)])])])}var jFe=Ni(RFe,[["render",WFe]]),t4=(t,n,e,i=!1)=>!e||e===""?t:t.filter(s=>i?Zv(s[n]).startsWith(Zv(e)):Zv(s[n]).includes(Zv(e)));function Zv(t){return t.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"")}const qFe={name:"RoomsList",components:{Loader:Sy,RoomsSearch:fOe,RoomContent:jFe},props:{currentUserId:{type:[String,Number],required:!0},textMessages:{type:Object,required:!0},showRoomsList:{type:Boolean,required:!0},showSearch:{type:Boolean,required:!0},showAddRoom:{type:Boolean,required:!0},textFormatting:{type:Object,required:!0},linkOptions:{type:Object,required:!0},isMobile:{type:Boolean,required:!0},rooms:{type:Array,required:!0},loadingRooms:{type:Boolean,required:!0},roomsLoaded:{type:Boolean,required:!0},room:{type:Object,required:!0},customSearchRoomEnabled:{type:[Boolean,String],default:!1},roomActions:{type:Array,required:!0},scrollDistance:{type:Number,required:!0}},emits:["add-room","search-room","room-action-handler","loading-more-rooms","fetch-room","fetch-more-rooms"],data(){return{filteredRooms:this.rooms||[],observer:null,showLoader:!0,loadingMoreRooms:!1,selectedRoomId:""}},watch:{rooms:{deep:!0,handler(t,n){this.filteredRooms=t,(t.length!==n.length||this.roomsLoaded)&&(this.loadingMoreRooms=!1)}},loadingRooms(t){t||setTimeout(()=>this.initIntersectionObserver())},loadingMoreRooms(t){this.$emit("loading-more-rooms",t)},roomsLoaded:{immediate:!0,handler(t){t&&(this.loadingMoreRooms=!1,this.loadingRooms||(this.showLoader=!1))}},room:{immediate:!0,handler(t){t&&!this.isMobile&&(this.selectedRoomId=t.roomId)}}},methods:{initIntersectionObserver(){this.observer&&(this.showLoader=!0,this.observer.disconnect());const t=this.$el.querySelector("#infinite-loader-rooms");if(t){const n={root:this.$el.querySelector("#rooms-list"),rootMargin:`${this.scrollDistance}px`,threshold:0};this.observer=new IntersectionObserver(e=>{e[0].isIntersecting&&this.loadMoreRooms()},n),this.observer.observe(t)}},searchRoom(t){this.customSearchRoomEnabled?this.$emit("search-room",t.target.value):this.filteredRooms=t4(this.rooms,"roomName",t.target.value)},openRoom(t){t.roomId===this.room.roomId&&!this.isMobile||(this.isMobile||(this.selectedRoomId=t.roomId),this.$emit("fetch-room",{room:t}))},loadMoreRooms(){if(!this.loadingMoreRooms){if(this.roomsLoaded){this.loadingMoreRooms=!1,this.showLoader=!1;return}this.$emit("fetch-more-rooms"),this.loadingMoreRooms=!0}}}},KFe={key:0,class:"vac-rooms-empty"},GFe={key:1,id:"rooms-list",class:"vac-room-list"},YFe=["id","onClick"],ZFe={key:0,id:"infinite-loader-rooms"};function XFe(t,n,e,i,s,r){const o=tn("rooms-search"),a=tn("loader"),l=tn("room-content");return Sc((Ve(),Qe("div",{class:Pn(["vac-rooms-container",{"vac-rooms-container-full":e.isMobile,"vac-app-border-r":!e.isMobile}])},[xt(t.$slots,"rooms-header"),xt(t.$slots,"rooms-list-search",{},()=>[It(o,{rooms:e.rooms,"loading-rooms":e.loadingRooms,"text-messages":e.textMessages,"show-search":e.showSearch,"show-add-room":e.showAddRoom,onSearchRoom:r.searchRoom,onAddRoom:n[0]||(n[0]=c=>t.$emit("add-room"))},ki({_:2},[Tn(t.$slots,(c,u)=>({name:u,fn:rn(d=>[xt(t.$slots,u,Ci(vi(d)))])}))]),1032,["rooms","loading-rooms","text-messages","show-search","show-add-room","onSearchRoom"])]),It(a,{show:e.loadingRooms,type:"rooms"},ki({_:2},[Tn(t.$slots,(c,u)=>({name:u,fn:rn(d=>[xt(t.$slots,u,Ci(vi(d)))])}))]),1032,["show"]),!e.loadingRooms&&!e.rooms.length?(Ve(),Qe("div",KFe,[xt(t.$slots,"rooms-empty",{},()=>[Tc(fn(e.textMessages.ROOMS_EMPTY),1)])])):Tt("",!0),e.loadingRooms?Tt("",!0):(Ve(),Qe("div",GFe,[(Ve(!0),Qe(Yn,null,Tn(s.filteredRooms,c=>(Ve(),Qe("div",{id:c.roomId,key:c.roomId,class:Pn(["vac-room-item",{"vac-room-selected":s.selectedRoomId===c.roomId}]),onClick:u=>r.openRoom(c)},[It(l,{"current-user-id":e.currentUserId,room:c,"text-formatting":e.textFormatting,"link-options":e.linkOptions,"text-messages":e.textMessages,"room-actions":e.roomActions,onRoomActionHandler:n[1]||(n[1]=u=>t.$emit("room-action-handler",u))},ki({_:2},[Tn(t.$slots,(u,d)=>({name:d,fn:rn(f=>[xt(t.$slots,d,Ci(vi(f)))])}))]),1032,["current-user-id","room","text-formatting","link-options","text-messages","room-actions"])],10,YFe))),128)),It(vs,{name:"vac-fade-message"},{default:rn(()=>[e.rooms.length&&!e.loadingRooms?(Ve(),Qe("div",ZFe,[It(a,{show:s.showLoader,infinite:!0,type:"infinite-rooms"},ki({_:2},[Tn(t.$slots,(c,u)=>({name:u,fn:rn(d=>[xt(t.$slots,u,Ci(vi(d)))])}))]),1032,["show"])])):Tt("",!0)]),_:3})]))],2)),[[Ey,e.showRoomsList]])}var JFe=Ni(qFe,[["render",XFe]]);const QFe={name:"RoomHeader",components:{SvgIcon:Qs},directives:{clickOutside:xy},props:{currentUserId:{type:[String,Number],required:!0},textMessages:{type:Object,required:!0},singleRoom:{type:Boolean,required:!0},showRoomsList:{type:Boolean,required:!0},isMobile:{type:Boolean,required:!0},roomInfoEnabled:{type:Boolean,required:!0},menuActions:{type:Array,required:!0},room:{type:Object,required:!0},messageSelectionEnabled:{type:Boolean,required:!0},messageSelectionActions:{type:Array,required:!0},selectedMessagesTotal:{type:Number,required:!0}},emits:["toggle-rooms-list","room-info","menu-action-handler","cancel-message-selection","message-selection-action-handler"],data(){return{menuOpened:!1,messageSelectionAnimationEnded:!0}},computed:{typingUsers(){return JU(this.room,this.currentUserId,this.textMessages)},userStatus(){if(!this.room.users||this.room.users.length!==2)return;const t=this.room.users.find(e=>e._id!==this.currentUserId);if(!(t!=null&&t.status))return;let n="";return t.status.state==="online"?n=this.textMessages.IS_ONLINE:t.status.lastChanged&&(n=this.textMessages.LAST_SEEN+t.status.lastChanged),n}},watch:{messageSelectionEnabled(t){t?this.messageSelectionAnimationEnded=!1:setTimeout(()=>{this.messageSelectionAnimationEnded=!0},300)}},methods:{menuActionHandler(t){this.closeMenu(),this.$emit("menu-action-handler",t)},closeMenu(){this.menuOpened=!1},messageSelectionActionHandler(t){this.$emit("message-selection-action-handler",t)}}},eNe={class:"vac-room-header vac-app-border-b"},tNe={class:"vac-room-wrapper"},nNe={key:0,class:"vac-room-selection"},iNe=["id"],sNe=["onClick"],rNe={class:"vac-selection-button-count"},oNe={class:"vac-text-ellipsis"},aNe={class:"vac-room-name vac-text-ellipsis"},lNe={key:0,class:"vac-room-info vac-text-ellipsis"},cNe={key:1,class:"vac-room-info vac-text-ellipsis"},uNe={key:0,class:"vac-menu-options"},dNe={class:"vac-menu-list"},hNe=["onClick"];function fNe(t,n,e,i,s,r){const o=tn("svg-icon"),a=yy("click-outside");return Ve(),Qe("div",eNe,[xt(t.$slots,"room-header",{},()=>[gt("div",tNe,[It(vs,{name:"vac-slide-up"},{default:rn(()=>[e.messageSelectionEnabled?(Ve(),Qe("div",nNe,[(Ve(!0),Qe(Yn,null,Tn(e.messageSelectionActions,l=>(Ve(),Qe("div",{id:l.name,key:l.name},[gt("div",{class:"vac-selection-button",onClick:c=>r.messageSelectionActionHandler(l)},[Tc(fn(l.title)+" ",1),gt("span",rNe,fn(e.selectedMessagesTotal),1)],8,sNe)],8,iNe))),128)),gt("div",{class:"vac-selection-cancel vac-item-clickable",onClick:n[0]||(n[0]=l=>t.$emit("cancel-message-selection"))},fn(e.textMessages.CANCEL_SELECT_MESSAGE),1)])):Tt("",!0)]),_:1}),!e.messageSelectionEnabled&&s.messageSelectionAnimationEnded?(Ve(),Qe(Yn,{key:0},[e.singleRoom?Tt("",!0):(Ve(),Qe("div",{key:0,class:Pn(["vac-svg-button vac-toggle-button",{"vac-rotate-icon-init":!e.isMobile,"vac-rotate-icon":!e.showRoomsList&&!e.isMobile}]),onClick:n[1]||(n[1]=l=>t.$emit("toggle-rooms-list"))},[xt(t.$slots,"toggle-icon",{},()=>[It(o,{name:"toggle"})])],2)),gt("div",{class:Pn(["vac-info-wrapper",{"vac-item-clickable":e.roomInfoEnabled}]),onClick:n[2]||(n[2]=l=>t.$emit("room-info"))},[xt(t.$slots,"room-header-avatar",{},()=>[e.room.avatar?(Ve(),Qe("div",{key:0,class:"vac-avatar",style:Wi({"background-image":`url('${e.room.avatar}')`})},null,4)):Tt("",!0)]),xt(t.$slots,"room-header-info",{},()=>[gt("div",oNe,[gt("div",aNe,fn(e.room.roomName),1),r.typingUsers?(Ve(),Qe("div",lNe,fn(r.typingUsers),1)):(Ve(),Qe("div",cNe,fn(r.userStatus),1))])])],2),e.room.roomId?xt(t.$slots,"room-options",{key:1},()=>[e.menuActions.length?(Ve(),Qe("div",{key:0,class:"vac-svg-button vac-room-options",onClick:n[3]||(n[3]=l=>s.menuOpened=!s.menuOpened)},[xt(t.$slots,"menu-icon",{},()=>[It(o,{name:"menu"})])])):Tt("",!0),e.menuActions.length?(Ve(),mi(vs,{key:1,name:"vac-slide-left"},{default:rn(()=>[s.menuOpened?Sc((Ve(),Qe("div",uNe,[gt("div",dNe,[(Ve(!0),Qe(Yn,null,Tn(e.menuActions,l=>(Ve(),Qe("div",{key:l.name},[gt("div",{class:"vac-menu-item",onClick:c=>r.menuActionHandler(l)},fn(l.title),9,hNe)]))),128))])])),[[a,r.closeMenu]]):Tt("",!0)]),_:1})):Tt("",!0)]):Tt("",!0)],64)):Tt("",!0)])])])}var mNe=Ni(QFe,[["render",fNe]]);function Xv(t){if(typeof t!="string"||!t)throw new Error("expected a non-empty string, got: "+t)}function _3(t){if(typeof t!="number")throw new Error("expected a number, got: "+t)}const pNe=1,gNe=1,Dh="emoji",bm="keyvalue",oT="favorites",vNe="tokens",QU="tokens",bNe="unicode",eW="count",_Ne="group",wNe="order",tW="group-order",n4="eTag",K_="url",mP="skinTone",zm="readonly",aT="readwrite",nW="skinUnicodes",yNe="skinUnicodes",CNe="https://cdn.jsdelivr.net/npm/emoji-picker-element-data@^1/en/emojibase/data.json",kNe="en";function ENe(t,n){const e=new Set,i=[];for(const s of t){const r=n(s);e.has(r)||(e.add(r),i.push(s))}return i}function pP(t){return ENe(t,n=>n.unicode)}function SNe(t){function n(e,i,s){const r=i?t.createObjectStore(e,{keyPath:i}):t.createObjectStore(e);if(s)for(const[o,[a,l]]of Object.entries(s))r.createIndex(o,a,{multiEntry:l});return r}n(bm),n(Dh,bNe,{[QU]:[vNe,!0],[tW]:[[_Ne,wNe]],[nW]:[yNe,!0]}),n(oT,void 0,{[eW]:[""]})}const i4={},qb={},G_={};function iW(t,n,e){e.onerror=()=>n(e.error),e.onblocked=()=>n(new Error("IDB blocked")),e.onsuccess=()=>t(e.result)}async function TNe(t){const n=await new Promise((e,i)=>{const s=indexedDB.open(t,pNe);i4[t]=s,s.onupgradeneeded=r=>{r.oldVersion<gNe&&SNe(s.result)},iW(e,i,s)});return n.onclose=()=>lT(t),n}function xNe(t){return qb[t]||(qb[t]=TNe(t)),qb[t]}function Nc(t,n,e,i){return new Promise((s,r)=>{const o=t.transaction(n,e,{durability:"relaxed"}),a=typeof n=="string"?o.objectStore(n):n.map(c=>o.objectStore(c));let l;i(a,o,c=>{l=c}),o.oncomplete=()=>s(l),o.onerror=()=>r(o.error)})}function lT(t){const n=i4[t],e=n&&n.result;if(e){e.close();const i=G_[t];if(i)for(const s of i)s()}delete i4[t],delete qb[t],delete G_[t]}function ANe(t){return new Promise((n,e)=>{lT(t);const i=indexedDB.deleteDatabase(t);iW(n,e,i)})}function INe(t,n){let e=G_[t];e||(e=G_[t]=[]),e.push(n)}const RNe=new Set([":D","XD",":'D","O:)",":X",":P",";P","XP",":L",":Z",":j","8D","XO","8)",":B",":O",":S",":'o","Dx","X(","D:",":C",">0)",":3","</3","<3","\\M/",":E","8#"]);function qf(t){return t.split(/[\s_]+/).map(n=>!n.match(/\w/)||RNe.has(n)?n.toLowerCase():n.replace(/[)(:,]/g,"").replace(/’/g,"'").toLowerCase()).filter(Boolean)}const MNe=2;function sW(t){return t.filter(Boolean).map(n=>n.toLowerCase()).filter(n=>n.length>=MNe)}function PNe(t){return t.map(({annotation:e,emoticon:i,group:s,order:r,shortcodes:o,skins:a,tags:l,emoji:c,version:u})=>{const d=[...new Set(sW([...(o||[]).map(qf).flat(),...l.map(qf).flat(),...qf(e),i]))].sort(),f={annotation:e,group:s,order:r,tags:l,tokens:d,unicode:c,version:u};if(i&&(f.emoticon=i),o&&(f.shortcodes=o),a){f.skinTones=[],f.skinUnicodes=[],f.skinVersions=[];for(const{tone:p,emoji:m,version:v}of a)f.skinTones.push(p),f.skinUnicodes.push(m),f.skinVersions.push(v)}return f})}function rW(t,n,e,i){t[n](e).onsuccess=s=>i&&i(s.target.result)}function yh(t,n,e){rW(t,"get",n,e)}function oW(t,n,e){rW(t,"getAll",n,e)}function cT(t){t.commit&&t.commit()}function ONe(t,n){let e=t[0];for(let i=1;i<t.length;i++){const s=t[i];n(e)>n(s)&&(e=s)}return e}function aW(t,n){const e=ONe(t,s=>s.length),i=[];for(const s of e)t.some(r=>r.findIndex(o=>n(o)===n(s))===-1)||i.push(s);return i}async function LNe(t){return!await uT(t,bm,K_)}async function BNe(t,n,e){const[i,s]=await Promise.all([n4,K_].map(r=>uT(t,bm,r)));return i===e&&s===n}async function FNe(t,n){return Nc(t,Dh,zm,(i,s,r)=>{let o;const a=()=>{i.getAll(o&&IDBKeyRange.lowerBound(o,!0),50).onsuccess=l=>{const c=l.target.result;for(const u of c)if(o=u.unicode,n(u))return r(u);if(c.length<50)return r();a()}};a()})}async function lW(t,n,e,i){try{const s=PNe(n);await Nc(t,[Dh,bm],aT,([r,o],a)=>{let l,c,u=0;function d(){++u===2&&f()}function f(){if(!(l===i&&c===e)){r.clear();for(const p of s)r.put(p);o.put(i,n4),o.put(e,K_),cT(a)}}yh(o,n4,p=>{l=p,d()}),yh(o,K_,p=>{c=p,d()})})}finally{}}async function NNe(t,n){return Nc(t,Dh,zm,(e,i,s)=>{const r=IDBKeyRange.bound([n,0],[n+1,0],!1,!0);oW(e.index(tW),r,s)})}async function cW(t,n){const e=sW(qf(n));return e.length?Nc(t,Dh,zm,(i,s,r)=>{const o=[],a=()=>{o.length===e.length&&l()},l=()=>{const c=aW(o,u=>u.unicode);r(c.sort((u,d)=>u.order<d.order?-1:1))};for(let c=0;c<e.length;c++){const u=e[c],d=c===e.length-1?IDBKeyRange.bound(u,u+"￿",!1,!0):IDBKeyRange.only(u);oW(i.index(QU),d,f=>{o.push(f),a()})}}):[]}async function VNe(t,n){const e=await cW(t,n);return e.length?e.filter(i=>(i.shortcodes||[]).map(r=>r.toLowerCase()).includes(n.toLowerCase()))[0]||null:await FNe(t,s=>(s.shortcodes||[]).includes(n.toLowerCase()))||null}async function DNe(t,n){return Nc(t,Dh,zm,(e,i,s)=>yh(e,n,r=>{if(r)return s(r);yh(e.index(nW),n,o=>s(o||null))}))}function uT(t,n,e){return Nc(t,n,zm,(i,s,r)=>yh(i,e,r))}function $Ne(t,n,e,i){return Nc(t,n,aT,(s,r)=>{s.put(i,e),cT(r)})}function zNe(t,n){return Nc(t,oT,aT,(e,i)=>yh(e,n,s=>{e.put((s||0)+1,n),cT(i)}))}function HNe(t,n,e){return e===0?[]:Nc(t,[oT,Dh],zm,([i,s],r,o)=>{const a=[];i.index(eW).openCursor(void 0,"prev").onsuccess=l=>{const c=l.target.result;if(!c)return o(a);function u(p){if(a.push(p),a.length===e)return o(a);c.continue()}const d=c.primaryKey,f=n.byName(d);if(f)return u(f);yh(s,d,p=>{if(p)return u(p);c.continue()})}})}const Jv="";function UNe(t,n){const e=new Map;for(const s of t){const r=n(s);for(const o of r){let a=e;for(let c=0;c<o.length;c++){const u=o.charAt(c);let d=a.get(u);d||(d=new Map,a.set(u,d)),a=d}let l=a.get(Jv);l||(l=[],a.set(Jv,l)),l.push(s)}}return(s,r)=>{let o=e;for(let c=0;c<s.length;c++){const u=s.charAt(c),d=o.get(u);if(d)o=d;else return[]}if(r)return o.get(Jv)||[];const a=[],l=[o];for(;l.length;){const u=[...l.shift().entries()].sort((d,f)=>d[0]<f[0]?-1:1);for(const[d,f]of u)d===Jv?a.push(...f):l.push(f)}return a}}const WNe=["name","url"];function jNe(t){const n=t&&Array.isArray(t),e=n&&t.length&&(!t[0]||WNe.some(i=>!(i in t[0])));if(!n||e)throw new Error("Custom emojis are in the wrong format")}function gP(t){jNe(t);const n=(f,p)=>f.name.toLowerCase()<p.name.toLowerCase()?-1:1,e=t.sort(n),s=UNe(t,f=>[...new Set((f.shortcodes||[]).map(p=>qf(p)).flat())]),r=f=>s(f,!0),o=f=>s(f,!1),a=f=>{const p=qf(f),m=p.map((v,y)=>(y<p.length-1?r:o)(v));return aW(m,v=>v.name).sort(n)},l=new Map,c=new Map;for(const f of t){c.set(f.name.toLowerCase(),f);for(const p of f.shortcodes||[])l.set(p.toLowerCase(),f)}return{all:e,search:a,byShortcode:f=>l.get(f.toLowerCase()),byName:f=>c.get(f.toLowerCase())}}function Bp(t){if(!t)return t;if(delete t.tokens,t.skinTones){const n=t.skinTones.length;t.skins=Array(n);for(let e=0;e<n;e++)t.skins[e]={tone:t.skinTones[e],unicode:t.skinUnicodes[e],version:t.skinVersions[e]};delete t.skinTones,delete t.skinUnicodes,delete t.skinVersions}return t}function uW(t){t||console.warn("emoji-picker-element is more efficient if the dataSource server exposes an ETag header.")}const qNe=["annotation","emoji","group","order","tags","version"];function KNe(t){if(!t||!Array.isArray(t)||!t[0]||typeof t[0]!="object"||qNe.some(n=>!(n in t[0])))throw new Error("Emoji data is in the wrong format")}function dW(t,n){if(Math.floor(t.status/100)!==2)throw new Error("Failed to fetch: "+n+":  "+t.status)}async function GNe(t){const n=await fetch(t,{method:"HEAD"});dW(n,t);const e=n.headers.get("etag");return uW(e),e}async function s4(t){const n=await fetch(t);dW(n,t);const e=n.headers.get("etag");uW(e);const i=await n.json();return KNe(i),[e,i]}function YNe(t){for(var n="",e=new Uint8Array(t),i=e.byteLength,s=-1;++s<i;)n+=String.fromCharCode(e[s]);return n}function ZNe(t){for(var n=t.length,e=new ArrayBuffer(n),i=new Uint8Array(e),s=-1;++s<n;)i[s]=t.charCodeAt(s);return e}async function hW(t){const n=JSON.stringify(t),e=ZNe(n),i=await crypto.subtle.digest("SHA-1",e),s=YNe(i);return btoa(s)}async function XNe(t,n){let e,i=await GNe(n);if(!i){const s=await s4(n);i=s[0],e=s[1],i||(i=await hW(e))}await BNe(t,n,i)||(e||(e=(await s4(n))[1]),await lW(t,e,n,i))}async function JNe(t,n){let[e,i]=await s4(n);e||(e=await hW(i)),await lW(t,i,n,e)}class fW{constructor({dataSource:n=CNe,locale:e=kNe,customEmoji:i=[]}={}){this.dataSource=n,this.locale=e,this._dbName=`emoji-picker-element-${this.locale}`,this._db=void 0,this._lazyUpdate=void 0,this._custom=gP(i),this._clear=this._clear.bind(this),this._ready=this._init()}async _init(){const n=this._db=await xNe(this._dbName);INe(this._dbName,this._clear);const e=this.dataSource;await LNe(n)?await JNe(n,e):this._lazyUpdate=XNe(n,e)}async ready(){const n=async()=>(this._ready||(this._ready=this._init()),this._ready);await n(),this._db||await n()}async getEmojiByGroup(n){return _3(n),await this.ready(),pP(await NNe(this._db,n)).map(Bp)}async getEmojiBySearchQuery(n){Xv(n),await this.ready();const e=this._custom.search(n),i=pP(await cW(this._db,n)).map(Bp);return[...e,...i]}async getEmojiByShortcode(n){Xv(n),await this.ready();const e=this._custom.byShortcode(n);return e||Bp(await VNe(this._db,n))}async getEmojiByUnicodeOrName(n){Xv(n),await this.ready();const e=this._custom.byName(n);return e||Bp(await DNe(this._db,n))}async getPreferredSkinTone(){return await this.ready(),await uT(this._db,bm,mP)||0}async setPreferredSkinTone(n){return _3(n),await this.ready(),$Ne(this._db,bm,mP,n)}async incrementFavoriteEmojiCount(n){return Xv(n),await this.ready(),zNe(this._db,n)}async getTopFavoriteEmoji(n){return _3(n),await this.ready(),(await HNe(this._db,this._custom,n)).map(Bp)}set customEmoji(n){this._custom=gP(n)}get customEmoji(){return this._custom.all}async _shutdown(){await this.ready();try{await this._lazyUpdate}catch{}}_clear(){this._db=this._ready=this._lazyUpdate=void 0}async close(){await this._shutdown(),await lT(this._dbName)}async delete(){await this._shutdown(),await ANe(this._dbName)}}function T1(){}function mW(t){return t()}function vP(){return Object.create(null)}function o0(t){t.forEach(mW)}function pW(t){return typeof t=="function"}function QNe(t,n){return t!=t?n==n:t!==n||t&&typeof t=="object"||typeof t=="function"}let Qv;function Y_(t,n){return Qv||(Qv=document.createElement("a")),Qv.href=n,t===Qv.href}function eVe(t){return Object.keys(t).length===0}function tVe(t){return t&&pW(t.destroy)?t.destroy:T1}function Ii(t,n){t.appendChild(n)}function za(t,n,e){t.insertBefore(n,e||null)}function Ha(t){t.parentNode.removeChild(t)}function _i(t){return document.createElement(t)}function pl(t){return document.createTextNode(t)}function ya(t,n,e,i){return t.addEventListener(n,e,i),()=>t.removeEventListener(n,e,i)}function Ye(t,n,e){e==null?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}function gl(t,n){n=""+n,t.wholeText!==n&&(t.data=n)}function bP(t,n){t.value=n??""}function su(t,n,e,i){e===null?t.style.removeProperty(n):t.style.setProperty(n,e,"")}let dT;function Bg(t){dT=t}const Zp=[],Of=[],Kb=[],_P=[],gW=Promise.resolve();let r4=!1;function vW(){r4||(r4=!0,gW.then(bW))}function nVe(){return vW(),gW}function o4(t){Kb.push(t)}const w3=new Set;let eb=0;function bW(){const t=dT;do{for(;eb<Zp.length;){const n=Zp[eb];eb++,Bg(n),iVe(n.$$)}for(Bg(null),Zp.length=0,eb=0;Of.length;)Of.pop()();for(let n=0;n<Kb.length;n+=1){const e=Kb[n];w3.has(e)||(w3.add(e),e())}Kb.length=0}while(Zp.length);for(;_P.length;)_P.pop()();r4=!1,w3.clear(),Bg(t)}function iVe(t){if(t.fragment!==null){t.update(),o0(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(o4)}}const sVe=new Set;function rVe(t,n){t&&t.i&&(sVe.delete(t),t.i(n))}const oVe=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function Xp(t,n){t.d(1),n.delete(t.key)}function Jp(t,n,e,i,s,r,o,a,l,c,u,d){let f=t.length,p=r.length,m=f;const v={};for(;m--;)v[t[m].key]=m;const y=[],_=new Map,b=new Map;for(m=p;m--;){const I=d(s,r,m),k=e(I);let O=o.get(k);O?O.p(I,n):(O=c(k,I),O.c()),_.set(k,y[m]=O),k in v&&b.set(k,Math.abs(m-v[k]))}const E=new Set,x=new Set;function A(I){rVe(I,1),I.m(a,u),o.set(I.key,I),u=I.first,p--}for(;f&&p;){const I=y[p-1],k=t[f-1],O=I.key,M=k.key;I===k?(u=I.first,f--,p--):_.has(M)?!o.has(O)||E.has(O)?A(I):x.has(M)?f--:b.get(O)>b.get(M)?(x.add(O),A(I)):(E.add(M),f--):(l(k,o),f--)}for(;f--;){const I=t[f];_.has(I.key)||l(I,o)}for(;p;)A(y[p-1]);return y}function aVe(t,n,e,i){const{fragment:s,on_mount:r,on_destroy:o,after_update:a}=t.$$;s&&s.m(n,e),o4(()=>{const l=r.map(mW).filter(pW);o?o.push(...l):o0(l),t.$$.on_mount=[]}),a.forEach(o4)}function lVe(t,n){const e=t.$$;e.fragment!==null&&(o0(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx=[])}function cVe(t,n){t.$$.dirty[0]===-1&&(Zp.push(t),vW(),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}function uVe(t,n,e,i,s,r,o,a=[-1]){const l=dT;Bg(t);const c=t.$$={fragment:null,ctx:null,props:r,update:T1,not_equal:s,bound:vP(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(l?l.$$.context:[]),callbacks:vP(),dirty:a,skip_bound:!1,root:n.target||l.$$.root};let u=!1;c.ctx=e?e(t,n.props||{},(d,f,...p)=>{const m=p.length?p[0]:f;return c.ctx&&s(c.ctx[d],c.ctx[d]=m)&&(!c.skip_bound&&c.bound[d]&&c.bound[d](m),u&&cVe(t,d)),f}):[],c.update(),u=!0,o0(c.before_update),c.fragment=i?i(c.ctx):!1,n.target&&(c.fragment&&c.fragment.c(),aVe(t,n.target,void 0),bW()),Bg(l)}class dVe{$destroy(){lVe(this,1),this.$destroy=T1}$on(n,e){const i=this.$$.callbacks[n]||(this.$$.callbacks[n]=[]);return i.push(e),()=>{const s=i.indexOf(e);s!==-1&&i.splice(s,1)}}$set(n){this.$$set&&!eVe(n)&&(this.$$.skip_bound=!0,this.$$set(n),this.$$.skip_bound=!1)}}const _W=[[-1,"✨","custom"],[0,"😀","smileys-emotion"],[1,"👋","people-body"],[3,"🐱","animals-nature"],[4,"🍎","food-drink"],[5,"🏠️","travel-places"],[6,"⚽","activities"],[7,"📝","objects"],[8,"⛔️","symbols"],[9,"🏁","flags"]].map(([t,n,e])=>({id:t,emoji:n,name:e})),tb=_W.slice(1),hVe=_W[0],fVe=2,wP=6,wW=typeof requestIdleCallback=="function"?requestIdleCallback:setTimeout;function yP(t){return t.unicode.includes("‍")}const mVe={"🫠":14,"🥲":13.1,"🥻":12.1,"🥰":11,"🤩":5,"👱‍♀️":4,"🤣":3,"👁️‍🗨️":2,"😀":1,"😐️":.7,"😃":.6},pVe=1e3,gVe="🖐️",vVe=8,bVe=["😊","😒","♥️","👍️","😍","😂","😭","☺️","😔","😩","😏","💕","🙌","😘"],yW='"Twemoji Mozilla","Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji","EmojiOne Color","Android Emoji",sans-serif',_Ve=(t,n)=>t<n?-1:t>n?1:0,CP=(t,n)=>{const e=document.createElement("canvas");e.width=e.height=1;const i=e.getContext("2d");return i.textBaseline="top",i.font=`100px ${yW}`,i.fillStyle=n,i.scale(.01,.01),i.fillText(t,0,0),i.getImageData(0,0,1,1).data},wVe=(t,n)=>{const e=[...t].join(","),i=[...n].join(",");return e===i&&!e.startsWith("0,0,0,")};function yVe(t){const n=CP(t,"#000"),e=CP(t,"#fff");return n&&e&&wVe(n,e)}function CVe(){const t=Object.entries(mVe);try{for(const[n,e]of t)if(yVe(n))return e}catch{}finally{}return t[0][1]}const y3=new Promise(t=>wW(()=>t(CVe()))),a4=new Map,kVe="️",EVe="\uD83C",SVe="‍",TVe=127995,xVe=57339;function AVe(t,n){if(n===0)return t;const e=t.indexOf(SVe);return e!==-1?t.substring(0,e)+String.fromCodePoint(TVe+n-1)+t.substring(e):(t.endsWith(kVe)&&(t=t.substring(0,t.length-1)),t+EVe+String.fromCodePoint(xVe+n-1))}function ru(t){t.preventDefault(),t.stopPropagation()}function C3(t,n,e){return n+=t?-1:1,n<0?n=e.length-1:n>=e.length&&(n=0),n}function CW(t,n){const e=new Set,i=[];for(const s of t){const r=n(s);e.has(r)||(e.add(r),i.push(s))}return i}function IVe(t,n){const e=i=>{const s={};for(const r of i)typeof r.tone=="number"&&r.version<=n&&(s[r.tone]=r.unicode);return s};return t.map(({unicode:i,skins:s,shortcodes:r,url:o,name:a,category:l})=>({unicode:i,name:a,shortcodes:r,url:o,category:l,id:i||a,skins:s&&e(s),title:(r||[]).join(", ")}))}const Gb=requestAnimationFrame;let RVe=typeof ResizeObserver=="function";function MVe(t,n){let e;return RVe?(e=new ResizeObserver(i=>n(i[0].contentRect.width)),e.observe(t)):Gb(()=>n(t.getBoundingClientRect().width)),{destroy(){e&&e.disconnect()}}}function kP(t){{const n=document.createRange();return n.selectNode(t.firstChild),n.getBoundingClientRect().width}}let k3;function PVe(t,n,e){for(const i of t){const s=e(i),r=kP(s);typeof k3>"u"&&(k3=kP(n));const o=r/1.8<k3;a4.set(i.unicode,o)}}function OVe(t){return CW(t,n=>n)}const{Map:Qp}=oVe;function EP(t,n,e){const i=t.slice();return i[63]=n[e],i[65]=e,i}function SP(t,n,e){const i=t.slice();return i[66]=n[e],i[65]=e,i}function TP(t,n,e){const i=t.slice();return i[63]=n[e],i[65]=e,i}function xP(t,n,e){const i=t.slice();return i[69]=n[e],i}function AP(t,n,e){const i=t.slice();return i[72]=n[e],i[65]=e,i}function IP(t,n){let e,i=n[72]+"",s,r,o,a,l,c;return{key:t,first:null,c(){e=_i("div"),s=pl(i),Ye(e,"id",r="skintone-"+n[65]),Ye(e,"class",o="emoji hide-focus "+(n[65]===n[20]?"active":"")),Ye(e,"aria-selected",a=n[65]===n[20]),Ye(e,"role","option"),Ye(e,"title",l=n[0].skinTones[n[65]]),Ye(e,"tabindex","-1"),Ye(e,"aria-label",c=n[0].skinTones[n[65]]),this.first=e},m(u,d){za(u,e,d),Ii(e,s)},p(u,d){n=u,d[0]&512&&i!==(i=n[72]+"")&&gl(s,i),d[0]&512&&r!==(r="skintone-"+n[65])&&Ye(e,"id",r),d[0]&1049088&&o!==(o="emoji hide-focus "+(n[65]===n[20]?"active":""))&&Ye(e,"class",o),d[0]&1049088&&a!==(a=n[65]===n[20])&&Ye(e,"aria-selected",a),d[0]&513&&l!==(l=n[0].skinTones[n[65]])&&Ye(e,"title",l),d[0]&513&&c!==(c=n[0].skinTones[n[65]])&&Ye(e,"aria-label",c)},d(u){u&&Ha(e)}}}function RP(t,n){let e,i,s=n[69].emoji+"",r,o,a,l,c,u,d;function f(){return n[49](n[69])}return{key:t,first:null,c(){e=_i("button"),i=_i("div"),r=pl(s),Ye(i,"class","nav-emoji emoji"),Ye(e,"role","tab"),Ye(e,"class","nav-button"),Ye(e,"aria-controls",o="tab-"+n[69].id),Ye(e,"aria-label",a=n[0].categories[n[69].name]),Ye(e,"aria-selected",l=!n[4]&&n[13].id===n[69].id),Ye(e,"title",c=n[0].categories[n[69].name]),this.first=e},m(p,m){za(p,e,m),Ii(e,i),Ii(i,r),u||(d=ya(e,"click",f),u=!0)},p(p,m){n=p,m[0]&4096&&s!==(s=n[69].emoji+"")&&gl(r,s),m[0]&4096&&o!==(o="tab-"+n[69].id)&&Ye(e,"aria-controls",o),m[0]&4097&&a!==(a=n[0].categories[n[69].name])&&Ye(e,"aria-label",a),m[0]&12304&&l!==(l=!n[4]&&n[13].id===n[69].id)&&Ye(e,"aria-selected",l),m[0]&4097&&c!==(c=n[0].categories[n[69].name])&&Ye(e,"title",c)},d(p){p&&Ha(e),u=!1,d()}}}function LVe(t){let n,e;return{c(){n=_i("img"),Ye(n,"class","custom-emoji"),Y_(n.src,e=t[63].url)||Ye(n,"src",e),Ye(n,"alt",""),Ye(n,"loading","lazy")},m(i,s){za(i,n,s)},p(i,s){s[0]&32768&&!Y_(n.src,e=i[63].url)&&Ye(n,"src",e)},d(i){i&&Ha(n)}}}function BVe(t){let n=t[27](t[63],t[8])+"",e;return{c(){e=pl(n)},m(i,s){za(i,e,s)},p(i,s){s[0]&33024&&n!==(n=i[27](i[63],i[8])+"")&&gl(e,n)},d(i){i&&Ha(e)}}}function MP(t,n){let e,i,s,r,o,a,l;function c(f,p){return f[63].unicode?BVe:LVe}let u=c(n),d=u(n);return{key:t,first:null,c(){e=_i("button"),d.c(),Ye(e,"role",i=n[4]?"option":"menuitem"),Ye(e,"aria-selected",s=n[4]?n[65]==n[5]:""),Ye(e,"aria-label",r=n[28](n[63],n[8])),Ye(e,"title",o=n[63].title),Ye(e,"class",a="emoji "+(n[4]&&n[65]===n[5]?"active":"")),Ye(e,"id",l="emo-"+n[63].id),this.first=e},m(f,p){za(f,e,p),d.m(e,null)},p(f,p){n=f,u===(u=c(n))&&d?d.p(n,p):(d.d(1),d=u(n),d&&(d.c(),d.m(e,null))),p[0]&16&&i!==(i=n[4]?"option":"menuitem")&&Ye(e,"role",i),p[0]&32816&&s!==(s=n[4]?n[65]==n[5]:"")&&Ye(e,"aria-selected",s),p[0]&33024&&r!==(r=n[28](n[63],n[8]))&&Ye(e,"aria-label",r),p[0]&32768&&o!==(o=n[63].title)&&Ye(e,"title",o),p[0]&32816&&a!==(a="emoji "+(n[4]&&n[65]===n[5]?"active":""))&&Ye(e,"class",a),p[0]&32768&&l!==(l="emo-"+n[63].id)&&Ye(e,"id",l)},d(f){f&&Ha(e),d.d()}}}function PP(t,n){let e,i=(n[4]?n[0].searchResultsLabel:n[66].category?n[66].category:n[15].length>1?n[0].categories.custom:n[0].categories[n[13].name])+"",s,r,o,a,l=[],c=new Qp,u,d,f,p=n[66].emojis;const m=v=>v[63].id;for(let v=0;v<p.length;v+=1){let y=TP(n,p,v),_=m(y);c.set(_,l[v]=MP(_,y))}return{key:t,first:null,c(){e=_i("div"),s=pl(i),a=_i("div");for(let v=0;v<l.length;v+=1)l[v].c();Ye(e,"id",r="menu-label-"+n[65]),Ye(e,"class",o="category "+(n[15].length===1&&n[15][0].category===""?"gone":"")),Ye(e,"aria-hidden","true"),Ye(a,"class","emoji-menu"),Ye(a,"role",u=n[4]?"listbox":"menu"),Ye(a,"aria-labelledby",d="menu-label-"+n[65]),Ye(a,"id",f=n[4]?"search-results":""),this.first=e},m(v,y){za(v,e,y),Ii(e,s),za(v,a,y);for(let _=0;_<l.length;_+=1)l[_].m(a,null)},p(v,y){n=v,y[0]&40977&&i!==(i=(n[4]?n[0].searchResultsLabel:n[66].category?n[66].category:n[15].length>1?n[0].categories.custom:n[0].categories[n[13].name])+"")&&gl(s,i),y[0]&32768&&r!==(r="menu-label-"+n[65])&&Ye(e,"id",r),y[0]&32768&&o!==(o="category "+(n[15].length===1&&n[15][0].category===""?"gone":""))&&Ye(e,"class",o),y[0]&402686256&&(p=n[66].emojis,l=Jp(l,y,m,1,n,p,c,a,Xp,MP,null,TP)),y[0]&16&&u!==(u=n[4]?"listbox":"menu")&&Ye(a,"role",u),y[0]&32768&&d!==(d="menu-label-"+n[65])&&Ye(a,"aria-labelledby",d),y[0]&16&&f!==(f=n[4]?"search-results":"")&&Ye(a,"id",f)},d(v){v&&Ha(e),v&&Ha(a);for(let y=0;y<l.length;y+=1)l[y].d()}}}function FVe(t){let n,e;return{c(){n=_i("img"),Ye(n,"class","custom-emoji"),Y_(n.src,e=t[63].url)||Ye(n,"src",e),Ye(n,"alt",""),Ye(n,"loading","lazy")},m(i,s){za(i,n,s)},p(i,s){s[0]&1024&&!Y_(n.src,e=i[63].url)&&Ye(n,"src",e)},d(i){i&&Ha(n)}}}function NVe(t){let n=t[27](t[63],t[8])+"",e;return{c(){e=pl(n)},m(i,s){za(i,e,s)},p(i,s){s[0]&1280&&n!==(n=i[27](i[63],i[8])+"")&&gl(e,n)},d(i){i&&Ha(e)}}}function OP(t,n){let e,i,s,r;function o(c,u){return c[63].unicode?NVe:FVe}let a=o(n),l=a(n);return{key:t,first:null,c(){e=_i("button"),l.c(),Ye(e,"role","menuitem"),Ye(e,"aria-label",i=n[28](n[63],n[8])),Ye(e,"title",s=n[63].title),Ye(e,"class","emoji"),Ye(e,"id",r="fav-"+n[63].id),this.first=e},m(c,u){za(c,e,u),l.m(e,null)},p(c,u){n=c,a===(a=o(n))&&l?l.p(n,u):(l.d(1),l=a(n),l&&(l.c(),l.m(e,null))),u[0]&1280&&i!==(i=n[28](n[63],n[8]))&&Ye(e,"aria-label",i),u[0]&1024&&s!==(s=n[63].title)&&Ye(e,"title",s),u[0]&1024&&r!==(r="fav-"+n[63].id)&&Ye(e,"id",r)},d(c){c&&Ha(e),l.d()}}}function VVe(t){let n,e,i,s,r,o,a,l,c,u=t[0].searchLabel+"",d,f,p=t[0].searchDescription+"",m,v,y,_,b,E,x,A=t[0].skinToneDescription+"",I,k,O=[],M=new Qp,T,P,R,L,F,B=[],z=new Qp,J,q,G,S,V,re,U,Pe,Fe=[],Ne=new Qp,ne,me,pe,ge,rt,wt=[],D=new Qp,$,X,le,ie,be,Ae,_e=t[9];const Ee=Re=>Re[72];for(let Re=0;Re<_e.length;Re+=1){let je=AP(t,_e,Re),ae=Ee(je);M.set(ae,O[Re]=IP(ae,je))}let he=t[12];const He=Re=>Re[69].id;for(let Re=0;Re<he.length;Re+=1){let je=xP(t,he,Re),ae=He(je);z.set(ae,B[Re]=RP(ae,je))}let ze=t[15];const de=Re=>Re[66].category;for(let Re=0;Re<ze.length;Re+=1){let je=SP(t,ze,Re),ae=de(je);Ne.set(ae,Fe[Re]=PP(ae,je))}let We=t[10];const ut=Re=>Re[63].id;for(let Re=0;Re<We.length;Re+=1){let je=EP(t,We,Re),ae=ut(je);D.set(ae,wt[Re]=OP(ae,je))}return{c(){n=_i("section"),e=_i("div"),i=_i("div"),s=_i("div"),r=_i("input"),c=_i("label"),d=pl(u),f=_i("span"),m=pl(p),v=_i("div"),y=_i("button"),_=pl(t[21]),x=_i("span"),I=pl(A),k=_i("div");for(let Re=0;Re<O.length;Re+=1)O[Re].c();F=_i("div");for(let Re=0;Re<B.length;Re+=1)B[Re].c();q=_i("div"),G=_i("div"),S=_i("div"),V=pl(t[18]),U=_i("div"),Pe=_i("div");for(let Re=0;Re<Fe.length;Re+=1)Fe[Re].c();rt=_i("div");for(let Re=0;Re<wt.length;Re+=1)wt[Re].c();le=_i("button"),le.textContent="😀",Ye(e,"class","pad-top"),Ye(r,"id","search"),Ye(r,"class","search"),Ye(r,"type","search"),Ye(r,"role","combobox"),Ye(r,"enterkeyhint","search"),Ye(r,"placeholder",o=t[0].searchLabel),Ye(r,"autocapitalize","none"),Ye(r,"autocomplete","off"),Ye(r,"spellcheck","true"),Ye(r,"aria-expanded",a=!!(t[4]&&t[1].length)),Ye(r,"aria-controls","search-results"),Ye(r,"aria-describedby","search-description"),Ye(r,"aria-autocomplete","list"),Ye(r,"aria-activedescendant",l=t[26]?`emo-${t[26]}`:""),Ye(c,"class","sr-only"),Ye(c,"for","search"),Ye(f,"id","search-description"),Ye(f,"class","sr-only"),Ye(s,"class","search-wrapper"),Ye(y,"id","skintone-button"),Ye(y,"class",b="emoji "+(t[6]?"hide-focus":"")),Ye(y,"aria-label",t[23]),Ye(y,"title",t[23]),Ye(y,"aria-describedby","skintone-description"),Ye(y,"aria-haspopup","listbox"),Ye(y,"aria-expanded",t[6]),Ye(y,"aria-controls","skintone-list"),Ye(v,"class",E="skintone-button-wrapper "+(t[19]?"expanded":"")),Ye(x,"id","skintone-description"),Ye(x,"class","sr-only"),Ye(k,"id","skintone-list"),Ye(k,"class",T="skintone-list "+(t[6]?"":"hidden no-animate")),su(k,"transform","translateY("+(t[6]?0:"calc(-1 * var(--num-skintones) * var(--total-emoji-size))")+")"),Ye(k,"role","listbox"),Ye(k,"aria-label",P=t[0].skinTonesLabel),Ye(k,"aria-activedescendant",R="skintone-"+t[20]),Ye(k,"aria-hidden",L=!t[6]),Ye(i,"class","search-row"),Ye(F,"class","nav"),Ye(F,"role","tablist"),su(F,"grid-template-columns","repeat("+t[12].length+", 1fr)"),Ye(F,"aria-label",J=t[0].categoriesLabel),Ye(G,"class","indicator"),su(G,"transform","translateX("+(t[24]?-1:1)*t[11]*100+"%)"),Ye(q,"class","indicator-wrapper"),Ye(S,"class",re="message "+(t[18]?"":"gone")),Ye(S,"role","alert"),Ye(S,"aria-live","polite"),Ye(U,"class",ne="tabpanel "+(!t[14]||t[18]?"gone":"")),Ye(U,"role",me=t[4]?"region":"tabpanel"),Ye(U,"aria-label",pe=t[4]?t[0].searchResultsLabel:t[0].categories[t[13].name]),Ye(U,"id",ge=t[4]?"":`tab-${t[13].id}`),Ye(U,"tabindex","0"),Ye(rt,"class",$="favorites emoji-menu "+(t[18]?"gone":"")),Ye(rt,"role","menu"),Ye(rt,"aria-label",X=t[0].favoritesLabel),su(rt,"padding-inline-end",t[25]+"px"),Ye(le,"aria-hidden","true"),Ye(le,"tabindex","-1"),Ye(le,"class","abs-pos hidden emoji"),Ye(n,"class","picker"),Ye(n,"aria-label",ie=t[0].regionLabel),Ye(n,"style",t[22])},m(Re,je){za(Re,n,je),Ii(n,e),Ii(n,i),Ii(i,s),Ii(s,r),bP(r,t[2]),Ii(s,c),Ii(c,d),Ii(s,f),Ii(f,m),Ii(i,v),Ii(v,y),Ii(y,_),Ii(i,x),Ii(x,I),Ii(i,k);for(let ae=0;ae<O.length;ae+=1)O[ae].m(k,null);t[48](k),Ii(n,F);for(let ae=0;ae<B.length;ae+=1)B[ae].m(F,null);Ii(n,q),Ii(q,G),Ii(n,S),Ii(S,V),Ii(n,U),Ii(U,Pe);for(let ae=0;ae<Fe.length;ae+=1)Fe[ae].m(Pe,null);t[50](U),Ii(n,rt);for(let ae=0;ae<wt.length;ae+=1)wt[ae].m(rt,null);Ii(n,le),t[51](le),t[52](n),be||(Ae=[ya(r,"input",t[47]),ya(r,"keydown",t[30]),ya(y,"click",t[35]),ya(k,"focusout",t[38]),ya(k,"click",t[34]),ya(k,"keydown",t[36]),ya(k,"keyup",t[37]),ya(F,"keydown",t[32]),tVe(t[29].call(null,Pe)),ya(U,"click",t[33]),ya(rt,"click",t[33])],be=!0)},p(Re,je){je[0]&1&&o!==(o=Re[0].searchLabel)&&Ye(r,"placeholder",o),je[0]&18&&a!==(a=!!(Re[4]&&Re[1].length))&&Ye(r,"aria-expanded",a),je[0]&67108864&&l!==(l=Re[26]?`emo-${Re[26]}`:"")&&Ye(r,"aria-activedescendant",l),je[0]&4&&bP(r,Re[2]),je[0]&1&&u!==(u=Re[0].searchLabel+"")&&gl(d,u),je[0]&1&&p!==(p=Re[0].searchDescription+"")&&gl(m,p),je[0]&2097152&&gl(_,Re[21]),je[0]&64&&b!==(b="emoji "+(Re[6]?"hide-focus":""))&&Ye(y,"class",b),je[0]&8388608&&Ye(y,"aria-label",Re[23]),je[0]&8388608&&Ye(y,"title",Re[23]),je[0]&64&&Ye(y,"aria-expanded",Re[6]),je[0]&524288&&E!==(E="skintone-button-wrapper "+(Re[19]?"expanded":""))&&Ye(v,"class",E),je[0]&1&&A!==(A=Re[0].skinToneDescription+"")&&gl(I,A),je[0]&1049089&&(_e=Re[9],O=Jp(O,je,Ee,1,Re,_e,M,k,Xp,IP,null,AP)),je[0]&64&&T!==(T="skintone-list "+(Re[6]?"":"hidden no-animate"))&&Ye(k,"class",T),je[0]&64&&su(k,"transform","translateY("+(Re[6]?0:"calc(-1 * var(--num-skintones) * var(--total-emoji-size))")+")"),je[0]&1&&P!==(P=Re[0].skinTonesLabel)&&Ye(k,"aria-label",P),je[0]&1048576&&R!==(R="skintone-"+Re[20])&&Ye(k,"aria-activedescendant",R),je[0]&64&&L!==(L=!Re[6])&&Ye(k,"aria-hidden",L),je[0]&12305|je[1]&1&&(he=Re[12],B=Jp(B,je,He,1,Re,he,z,F,Xp,RP,null,xP)),je[0]&4096&&su(F,"grid-template-columns","repeat("+Re[12].length+", 1fr)"),je[0]&1&&J!==(J=Re[0].categoriesLabel)&&Ye(F,"aria-label",J),je[0]&16779264&&su(G,"transform","translateX("+(Re[24]?-1:1)*Re[11]*100+"%)"),je[0]&262144&&gl(V,Re[18]),je[0]&262144&&re!==(re="message "+(Re[18]?"":"gone"))&&Ye(S,"class",re),je[0]&402694449&&(ze=Re[15],Fe=Jp(Fe,je,de,1,Re,ze,Ne,Pe,Xp,PP,null,SP)),je[0]&278528&&ne!==(ne="tabpanel "+(!Re[14]||Re[18]?"gone":""))&&Ye(U,"class",ne),je[0]&16&&me!==(me=Re[4]?"region":"tabpanel")&&Ye(U,"role",me),je[0]&8209&&pe!==(pe=Re[4]?Re[0].searchResultsLabel:Re[0].categories[Re[13].name])&&Ye(U,"aria-label",pe),je[0]&8208&&ge!==(ge=Re[4]?"":`tab-${Re[13].id}`)&&Ye(U,"id",ge),je[0]&402654464&&(We=Re[10],wt=Jp(wt,je,ut,1,Re,We,D,rt,Xp,OP,null,EP)),je[0]&262144&&$!==($="favorites emoji-menu "+(Re[18]?"gone":""))&&Ye(rt,"class",$),je[0]&1&&X!==(X=Re[0].favoritesLabel)&&Ye(rt,"aria-label",X),je[0]&33554432&&su(rt,"padding-inline-end",Re[25]+"px"),je[0]&1&&ie!==(ie=Re[0].regionLabel)&&Ye(n,"aria-label",ie),je[0]&4194304&&Ye(n,"style",Re[22])},i:T1,o:T1,d(Re){Re&&Ha(n);for(let je=0;je<O.length;je+=1)O[je].d();t[48](null);for(let je=0;je<B.length;je+=1)B[je].d();for(let je=0;je<Fe.length;je+=1)Fe[je].d();t[50](null);for(let je=0;je<wt.length;je+=1)wt[je].d();t[51](null),t[52](null),be=!1,o0(Ae)}}}function DVe(t,n,e){let{skinToneEmoji:i}=n,{i18n:s}=n,{database:r}=n,{customEmoji:o}=n,{customCategorySorting:a}=n,l=!0,c=[],u=[],d="",f="",p,m,v,y=!1,_=-1,b,E=!1,x=!1,A,I=0,k=0,O,M,T="",P=[],R=[],L,F=vVe,B=!1,z=0,J=0,q=tb,G,S=!1,V;const re=ae=>{p.getRootNode().getElementById(ae).focus()},U=(ae,Ue)=>{p.dispatchEvent(new CustomEvent(ae,{detail:Ue,bubbles:!0,composed:!0}))},Pe=(ae,Ue)=>Ue&&ae.skins&&ae.skins[Ue]||ae.unicode,Fe=(ae,Ue)=>OVe([ae.name||Pe(ae,Ue),...ae.shortcodes||[]]).join(", "),Ne=ae=>/^skintone-/.test(ae.id);y3.then(ae=>{ae||e(18,b=s.emojiUnsupportedMessage)});function ne(ae){return MVe(ae,Ue=>{{const W=getComputedStyle(p),K=parseInt(W.getPropertyValue("--num-columns"),10),te=W.getPropertyValue("direction")==="rtl",ue=ae.parentElement.getBoundingClientRect().width-Ue;e(46,F=K),e(25,z=ue),e(24,B=te)}})}function me(ae){const Ue=p.getRootNode();PVe(ae,m,K=>Ue.getElementById(`emo-${K.id}`)),e(1,c=c)}function pe(ae){return!ae.unicode||!yP(ae)||a4.get(ae.unicode)}async function ge(ae){const Ue=await y3;return ae.filter(({version:W})=>!W||W<=Ue)}async function rt(ae){return IVe(ae,await y3)}async function wt(ae){if(typeof ae>"u")return[];const Ue=ae===-1?o:await r.getEmojiByGroup(ae);return rt(await ge(Ue))}async function D(ae){return rt(await ge(await r.getEmojiBySearchQuery(ae)))}function $(ae){if(!y||!c.length)return;const Ue=W=>{ru(ae),e(5,_=C3(W,_,c))};switch(ae.key){case"ArrowDown":return Ue(!1);case"ArrowUp":return Ue(!0);case"Enter":if(_!==-1)return ru(ae),ie(c[_].id);c.length&&e(5,_=0)}}function X(ae){e(2,d=""),e(44,f=""),e(5,_=-1),e(11,J=q.findIndex(Ue=>Ue.id===ae.id))}function le(ae){const{target:Ue,key:W}=ae,K=te=>{te&&(ru(ae),te.focus())};switch(W){case"ArrowLeft":return K(Ue.previousSibling);case"ArrowRight":return K(Ue.nextSibling);case"Home":return K(Ue.parentElement.firstChild);case"End":return K(Ue.parentElement.lastChild)}}async function ie(ae){const Ue=await r.getEmojiByUnicodeOrName(ae),W=[...c,...R].find(te=>te.id===ae),K=W.unicode&&Pe(W,I);await r.incrementFavoriteEmojiCount(ae),U("emoji-click",{emoji:Ue,skinTone:I,...K&&{unicode:K},...W.name&&{name:W.name}})}async function be(ae){const{target:Ue}=ae;if(!Ue.classList.contains("emoji"))return;ru(ae);const W=Ue.id.substring(4);ie(W)}async function Ae(ae){const{target:Ue}=ae;if(!Ne(Ue))return;ru(ae);const W=parseInt(Ue.id.slice(9),10);e(8,I=W),e(6,E=!1),re("skintone-button"),U("skin-tone-change",{skinTone:W}),r.setPreferredSkinTone(W)}async function _e(ae){e(6,E=!E),e(20,k=I),E&&(ru(ae),Gb(()=>re(`skintone-${k}`)))}function Ee(ae){if(!E)return;const Ue=async W=>{ru(ae),e(20,k=W),await nVe(),re(`skintone-${k}`)};switch(ae.key){case"ArrowUp":return Ue(C3(!0,k,P));case"ArrowDown":return Ue(C3(!1,k,P));case"Home":return Ue(0);case"End":return Ue(P.length-1);case"Enter":return Ae(ae);case"Escape":return ru(ae),e(6,E=!1),re("skintone-button")}}function he(ae){if(E)switch(ae.key){case" ":return Ae(ae)}}async function He(ae){const{relatedTarget:Ue}=ae;(!Ue||!Ne(Ue))&&e(6,E=!1)}function ze(){d=this.value,e(2,d)}function de(ae){Of[ae?"unshift":"push"](()=>{A=ae,e(7,A)})}const We=ae=>X(ae);function ut(ae){Of[ae?"unshift":"push"](()=>{v=ae,e(3,v)})}function Re(ae){Of[ae?"unshift":"push"](()=>{m=ae,e(17,m)})}function je(ae){Of[ae?"unshift":"push"](()=>{p=ae,e(16,p)})}return t.$$set=ae=>{"skinToneEmoji"in ae&&e(40,i=ae.skinToneEmoji),"i18n"in ae&&e(0,s=ae.i18n),"database"in ae&&e(39,r=ae.database),"customEmoji"in ae&&e(41,o=ae.customEmoji),"customCategorySorting"in ae&&e(42,a=ae.customCategorySorting)},t.$$.update=()=>{if(t.$$.dirty[1]&1280&&o&&r&&e(39,r.customEmoji=o,r),t.$$.dirty[0]&1|t.$$.dirty[1]&256){async function ae(){let Ue=!1;const W=setTimeout(()=>{Ue=!0,e(18,b=s.loadingMessage)},pVe);try{await r.ready(),e(14,S=!0)}catch(K){console.error(K),e(18,b=s.networkErrorMessage)}finally{clearTimeout(W),Ue&&(Ue=!1,e(18,b=""))}}r&&ae()}if(t.$$.dirty[0]&6144|t.$$.dirty[1]&1024&&(o&&o.length?e(12,q=[hVe,...tb]):q!==tb&&(J&&e(11,J--,J),e(12,q=tb))),t.$$.dirty[0]&4&&wW(()=>{e(44,f=(d||"").trim()),e(5,_=-1)}),t.$$.dirty[0]&6144&&e(13,G=q[J]),t.$$.dirty[0]&24576|t.$$.dirty[1]&8192){async function ae(){if(!S)e(1,c=[]),e(4,y=!1);else if(f.length>=fVe){const Ue=f,W=await D(Ue);Ue===f&&(e(1,c=W),e(4,y=!0))}else if(G){const Ue=G.id,W=await wt(Ue);Ue===G.id&&(e(1,c=W),e(4,y=!1))}}ae()}if(t.$$.dirty[0]&4112&&e(22,M=`
  --font-family: ${yW};
  --num-groups: ${q.length}; 
  --indicator-opacity: ${y?0:1}; 
  --num-skintones: ${wP};`),t.$$.dirty[0]&16384|t.$$.dirty[1]&256){async function ae(){S&&e(8,I=await r.getPreferredSkinTone())}ae()}if(t.$$.dirty[1]&512&&e(9,P=Array(wP).fill().map((ae,Ue)=>AVe(i,Ue))),t.$$.dirty[0]&768&&e(21,O=P[I]),t.$$.dirty[0]&257&&e(23,T=s.skinToneLabel.replace("{skinTone}",s.skinTones[I])),t.$$.dirty[0]&16384|t.$$.dirty[1]&256){async function ae(){e(45,L=(await Promise.all(bVe.map(Ue=>r.getEmojiByUnicodeOrName(Ue)))).filter(Boolean))}S&&ae()}if(t.$$.dirty[0]&16384|t.$$.dirty[1]&49408){async function ae(){const Ue=await r.getTopFavoriteEmoji(F),W=await rt(CW([...Ue,...L],K=>K.unicode||K.name).slice(0,F));e(10,R=W)}S&&L&&ae()}if(t.$$.dirty[0]&10){const ae=c.filter(Ue=>Ue.unicode).filter(Ue=>yP(Ue)&&!a4.has(Ue.unicode));ae.length?Gb(()=>me(ae)):(e(1,c=c.filter(pe)),Gb(()=>{(v||{}).scrollTop=0}))}t.$$.dirty[0]&1026|t.$$.dirty[1]&4096,t.$$.dirty[0]&18|t.$$.dirty[1]&2048&&e(15,u=function(){if(y)return[{category:"",emojis:c}];const Ue=new Map;for(const W of c){const K=W.category||"";let te=Ue.get(K);te||(te=[],Ue.set(K,te)),te.push(W)}return[...Ue.entries()].map(([W,K])=>({category:W,emojis:K})).sort((W,K)=>a(W.category,K.category))}()),t.$$.dirty[0]&34&&e(26,V=_!==-1&&c[_].id),t.$$.dirty[0]&192&&(E?A.addEventListener("transitionend",()=>{e(19,x=!0)},{once:!0}):e(19,x=!1))},[s,c,d,v,y,_,E,A,I,P,R,J,q,G,S,u,p,m,b,x,k,O,M,T,B,z,V,Pe,Fe,ne,$,X,le,be,Ae,_e,Ee,he,He,r,i,o,a,l,f,L,F,ze,de,We,ut,Re,je]}class $Ve extends dVe{constructor(n){super(),uVe(this,n,DVe,VVe,QNe,{skinToneEmoji:40,i18n:0,database:39,customEmoji:41,customCategorySorting:42},null,[-1,-1,-1])}}const zVe="https://cdn.jsdelivr.net/npm/emoji-picker-element-data@^1/en/emojibase/data.json",HVe="en";var UVe={categoriesLabel:"Categories",emojiUnsupportedMessage:"Your browser does not support color emoji.",favoritesLabel:"Favorites",loadingMessage:"Loading…",networkErrorMessage:"Could not load emoji.",regionLabel:"Emoji picker",searchDescription:"When search results are available, press up or down to select and enter to choose.",searchLabel:"Search",searchResultsLabel:"Search results",skinToneDescription:"When expanded, press up or down to select and enter to choose.",skinToneLabel:"Choose a skin tone (currently {skinTone})",skinTonesLabel:"Skin tones",skinTones:["Default","Light","Medium-Light","Medium","Medium-Dark","Dark"],categories:{custom:"Custom","smileys-emotion":"Smileys and emoticons","people-body":"People and body","animals-nature":"Animals and nature","food-drink":"Food and drink","travel-places":"Travel and places",activities:"Activities",objects:"Objects",symbols:"Symbols",flags:"Flags"}};const kW=["customEmoji","customCategorySorting","database","dataSource","i18n","locale","skinToneEmoji"];class EW extends HTMLElement{constructor(n){super(),this.attachShadow({mode:"open"});const e=document.createElement("style");e.textContent=":host{--emoji-size:1.375rem;--emoji-padding:0.5rem;--category-emoji-size:var(--emoji-size);--category-emoji-padding:var(--emoji-padding);--indicator-height:3px;--input-border-radius:0.5rem;--input-border-size:1px;--input-font-size:1rem;--input-line-height:1.5;--input-padding:0.25rem;--num-columns:8;--outline-size:2px;--border-size:1px;--skintone-border-radius:1rem;--category-font-size:1rem;display:flex;width:min-content;height:400px}:host,:host(.light){--background:#fff;--border-color:#e0e0e0;--indicator-color:#385ac1;--input-border-color:#999;--input-font-color:#111;--input-placeholder-color:#999;--outline-color:#999;--category-font-color:#111;--button-active-background:#e6e6e6;--button-hover-background:#d9d9d9}:host(.dark){--background:#222;--border-color:#444;--indicator-color:#5373ec;--input-border-color:#ccc;--input-font-color:#efefef;--input-placeholder-color:#ccc;--outline-color:#fff;--category-font-color:#efefef;--button-active-background:#555555;--button-hover-background:#484848}@media (prefers-color-scheme:dark){:host{--background:#222;--border-color:#444;--indicator-color:#5373ec;--input-border-color:#ccc;--input-font-color:#efefef;--input-placeholder-color:#ccc;--outline-color:#fff;--category-font-color:#efefef;--button-active-background:#555555;--button-hover-background:#484848}}:host([hidden]){display:none}button{margin:0;padding:0;border:0;background:0 0;box-shadow:none;-webkit-tap-highlight-color:transparent}button::-moz-focus-inner{border:0}input{padding:0;margin:0;line-height:1.15;font-family:inherit}input[type=search]{-webkit-appearance:none}:focus{outline:var(--outline-color) solid var(--outline-size);outline-offset:calc(-1*var(--outline-size))}:host([data-js-focus-visible]) :focus:not([data-focus-visible-added]){outline:0}:focus:not(:focus-visible){outline:0}.hide-focus{outline:0}*{box-sizing:border-box}.picker{contain:content;display:flex;flex-direction:column;background:var(--background);border:var(--border-size) solid var(--border-color);width:100%;height:100%;overflow:hidden;--total-emoji-size:calc(var(--emoji-size) + (2 * var(--emoji-padding)));--total-category-emoji-size:calc(var(--category-emoji-size) + (2 * var(--category-emoji-padding)))}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0}.hidden{opacity:0;pointer-events:none}.abs-pos{position:absolute;left:0;top:0}.gone{display:none!important}.skintone-button-wrapper,.skintone-list{background:var(--background);z-index:3}.skintone-button-wrapper.expanded{z-index:1}.skintone-list{position:absolute;inset-inline-end:0;top:0;z-index:2;overflow:visible;border-bottom:var(--border-size) solid var(--border-color);border-radius:0 0 var(--skintone-border-radius) var(--skintone-border-radius);will-change:transform;transition:transform .2s ease-in-out;transform-origin:center 0}@media (prefers-reduced-motion:reduce){.skintone-list{transition-duration:.001s}}@supports not (inset-inline-end:0){.skintone-list{right:0}}.skintone-list.no-animate{transition:none}.tabpanel{overflow-y:auto;-webkit-overflow-scrolling:touch;will-change:transform;min-height:0;flex:1;contain:content}.emoji-menu{display:grid;grid-template-columns:repeat(var(--num-columns),var(--total-emoji-size));justify-content:space-around;align-items:flex-start;width:100%}.category{padding:var(--emoji-padding);font-size:var(--category-font-size);color:var(--category-font-color)}.custom-emoji,.emoji,button.emoji{height:var(--total-emoji-size);width:var(--total-emoji-size)}.emoji,button.emoji{font-size:var(--emoji-size);display:flex;align-items:center;justify-content:center;border-radius:100%;line-height:1;overflow:hidden;font-family:var(--font-family);cursor:pointer}@media (hover:hover) and (pointer:fine){.emoji:hover,button.emoji:hover{background:var(--button-hover-background)}}.emoji.active,.emoji:active,button.emoji.active,button.emoji:active{background:var(--button-active-background)}.custom-emoji{padding:var(--emoji-padding);object-fit:contain;pointer-events:none;background-repeat:no-repeat;background-position:center center;background-size:var(--emoji-size) var(--emoji-size)}.nav,.nav-button{align-items:center}.nav{display:grid;justify-content:space-between;contain:content}.nav-button{display:flex;justify-content:center}.nav-emoji{font-size:var(--category-emoji-size);width:var(--total-category-emoji-size);height:var(--total-category-emoji-size)}.indicator-wrapper{display:flex;border-bottom:1px solid var(--border-color)}.indicator{width:calc(100%/var(--num-groups));height:var(--indicator-height);opacity:var(--indicator-opacity);background-color:var(--indicator-color);will-change:transform,opacity;transition:opacity .1s linear,transform .25s ease-in-out}@media (prefers-reduced-motion:reduce){.indicator{will-change:opacity;transition:opacity .1s linear}}.pad-top,input.search{background:var(--background);width:100%}.pad-top{height:var(--emoji-padding);z-index:3}.search-row{display:flex;align-items:center;position:relative;padding-inline-start:var(--emoji-padding);padding-bottom:var(--emoji-padding)}.search-wrapper{flex:1;min-width:0}input.search{padding:var(--input-padding);border-radius:var(--input-border-radius);border:var(--input-border-size) solid var(--input-border-color);color:var(--input-font-color);font-size:var(--input-font-size);line-height:var(--input-line-height)}input.search::placeholder{color:var(--input-placeholder-color)}.favorites{display:flex;flex-direction:row;border-top:var(--border-size) solid var(--border-color);contain:content}.message{padding:var(--emoji-padding)}",this.shadowRoot.appendChild(e),this._ctx={locale:HVe,dataSource:zVe,skinToneEmoji:gVe,customCategorySorting:_Ve,customEmoji:null,i18n:UVe,...n};for(const i of kW)i!=="database"&&Object.prototype.hasOwnProperty.call(this,i)&&(this._ctx[i]=this[i],delete this[i]);this._dbFlush()}connectedCallback(){this._cmp=new $Ve({target:this.shadowRoot,props:this._ctx})}disconnectedCallback(){this._cmp.$destroy(),this._cmp=void 0;const{database:n}=this._ctx;n&&n.close().catch(e=>console.error(e))}static get observedAttributes(){return["locale","data-source","skin-tone-emoji"]}attributeChangedCallback(n,e,i){this._set(n.replace(/-([a-z])/g,(s,r)=>r.toUpperCase()),i)}_set(n,e){this._ctx[n]=e,this._cmp&&this._cmp.$set({[n]:e}),["locale","dataSource"].includes(n)&&this._dbFlush()}_dbCreate(){const{locale:n,dataSource:e,database:i}=this._ctx;(!i||i.locale!==n||i.dataSource!==e)&&this._set("database",new fW({locale:n,dataSource:e}))}_dbFlush(){Promise.resolve().then(()=>this._dbCreate())}}const SW={};for(const t of kW)SW[t]={get(){return t==="database"&&this._dbCreate(),this._ctx[t]},set(n){if(t==="database")throw new Error("database is read-only");this._set(t,n)}};Object.defineProperties(EW.prototype,SW);customElements.get("emoji-picker")||customElements.define("emoji-picker",EW);function TW(t,n){for(;t&&!t.querySelector(n);){t=t.parentNode;const e=t.querySelector(n);if(e)return e}return null}const WVe={name:"EmojiPickerContainer",components:{SvgIcon:Qs},props:{emojiOpened:{type:Boolean,default:!1},emojiReaction:{type:Boolean,default:!1},positionTop:{type:Boolean,default:!1},positionRight:{type:Boolean,default:!1},messageId:{type:String,default:""},emojiDataSource:{type:String,default:void 0}},emits:["add-emoji","open-emoji"],data(){return{emojiPickerHeight:320,emojiPickerTop:0,emojiPickerRight:""}},watch:{emojiOpened(t){t&&setTimeout(()=>{this.addCustomStyling(),this.$refs.emojiPicker.shadowRoot.addEventListener("emoji-click",({detail:n})=>{this.$emit("add-emoji",{unicode:n.unicode})})},0)}},methods:{addCustomStyling(){const t=`.picker {
				border: none;
			}`,n=`.nav {
				overflow-x: auto;
			}`,e=`.search-wrapper {
				padding-right: 2px;
				padding-left: 2px;
			}`,i=`input.search {
				height: 32px;
				font-size: 14px;
				border-radius: 10rem;
				border: var(--chat-border-style);
				padding: 5px 10px;
				outline: none;
				background: var(--chat-bg-color-input);
				color: var(--chat-color);
			}`,s=document.createElement("style");s.textContent=t+n+e+i,this.$refs.emojiPicker.shadowRoot.appendChild(s)},openEmoji(t){this.$emit("open-emoji",!this.emojiOpened),this.setEmojiPickerPosition(t.clientY,t.view.innerWidth,t.view.innerHeight)},setEmojiPickerPosition(t,n,e){const i=n<500||e<700,s=TW(this.$el,"#room-footer");if(!s){i&&(this.emojiPickerRight="-50px");return}i?(this.emojiPickerRight=n/2-(this.positionTop?200:150)+"px",this.emojiPickerTop=100,this.emojiPickerHeight=e-200):(s.getBoundingClientRect().top-t>this.emojiPickerHeight-50?this.emojiPickerTop=t+10:this.emojiPickerTop=t-this.emojiPickerHeight-10,this.emojiPickerRight=this.positionTop?"0px":this.positionRight?"60px":"")}}},jVe={class:"vac-emoji-wrapper"};function qVe(t,n,e,i,s,r){const o=tn("svg-icon"),a=tn("emoji-picker");return Ve(),Qe("div",jVe,[gt("div",{class:Pn(["vac-svg-button",{"vac-emoji-reaction":e.emojiReaction}]),onClick:n[0]||(n[0]=(...l)=>r.openEmoji&&r.openEmoji(...l))},[xt(t.$slots,e.messageId?"emoji-picker-reaction-icon_"+e.messageId:"emoji-picker-icon",{},()=>[It(o,{name:"emoji",param:e.emojiReaction?"reaction":""},null,8,["param"])])],2),e.emojiOpened?(Ve(),mi(vs,{key:0,name:"vac-slide-up",appear:""},{default:rn(()=>[gt("div",{class:Pn(["vac-emoji-picker",{"vac-picker-reaction":e.emojiReaction}]),style:Wi({height:`${s.emojiPickerHeight}px`,top:e.positionTop?s.emojiPickerHeight:`${s.emojiPickerTop}px`,right:s.emojiPickerRight,display:s.emojiPickerTop||!e.emojiReaction?"initial":"none"})},[e.emojiOpened?(Ve(),mi(a,{key:0,ref:"emojiPicker","data-source":e.emojiDataSource},null,8,["data-source"])):Tt("",!0)],6)]),_:1})):Tt("",!0)])}var xW=Ni(WVe,[["render",qVe]]);const KVe={name:"RoomFiles",components:{Loader:Sy,SvgIcon:Qs},props:{file:{type:Object,required:!0},index:{type:Number,required:!0}},emits:["remove-file"],computed:{isImage(){return vm(this.file)},isVideo(){return r0(this.file)}}},GVe={class:"vac-room-file-container"},YVe=["src"],ZVe={class:"vac-text-ellipsis"},XVe={key:0,class:"vac-text-ellipsis vac-text-extension"};function JVe(t,n,e,i,s,r){const o=tn("loader"),a=tn("svg-icon");return Ve(),Qe("div",GVe,[It(o,{show:e.file.loading,type:"room-file"},ki({_:2},[Tn(t.$slots,(l,c)=>({name:c,fn:rn(u=>[xt(t.$slots,c,Ci(vi(u)))])}))]),1032,["show"]),gt("div",{class:"vac-svg-button vac-icon-remove",onClick:n[0]||(n[0]=l=>t.$emit("remove-file",e.index))},[xt(t.$slots,"image-close-icon",{},()=>[It(a,{name:"close",param:"image"})])]),r.isImage?(Ve(),Qe("div",{key:0,class:Pn(["vac-message-image",{"vac-blur-loading":e.file.loading}]),style:Wi({"background-image":`url('${e.file.localUrl||e.file.url}')`})},null,6)):r.isVideo?(Ve(),Qe("video",{key:1,controls:"",class:Pn({"vac-blur-loading":e.file.loading})},[gt("source",{src:e.file.localUrl||e.file.url},null,8,YVe)],2)):(Ve(),Qe("div",{key:2,class:Pn(["vac-file-container",{"vac-blur-loading":e.file.loading}])},[gt("div",null,[xt(t.$slots,"file-icon",{},()=>[It(a,{name:"file"})])]),gt("div",ZVe,fn(e.file.name),1),e.file.extension?(Ve(),Qe("div",XVe,fn(e.file.extension),1)):Tt("",!0)],2))])}var QVe=Ni(KVe,[["render",JVe]]);const eDe={name:"RoomFiles",components:{SvgIcon:Qs,RoomFile:QVe},props:{files:{type:Array,required:!0}},emits:["remove-file","reset-message"],computed:{}},tDe={key:0,class:"vac-room-files-container"},nDe={class:"vac-files-box"},iDe={class:"vac-icon-close"};function sDe(t,n,e,i,s,r){const o=tn("room-file"),a=tn("svg-icon");return Ve(),mi(vs,{name:"vac-slide-up"},{default:rn(()=>[e.files.length?(Ve(),Qe("div",tDe,[gt("div",nDe,[(Ve(!0),Qe(Yn,null,Tn(e.files,(l,c)=>(Ve(),Qe("div",{key:c},[It(o,{file:l,index:c,onRemoveFile:n[0]||(n[0]=u=>t.$emit("remove-file",u))},ki({_:2},[Tn(t.$slots,(u,d)=>({name:d,fn:rn(f=>[xt(t.$slots,d,Ci(vi(f)))])}))]),1032,["file","index"])]))),128))]),gt("div",iDe,[gt("div",{class:"vac-svg-button",onClick:n[1]||(n[1]=l=>t.$emit("reset-message"))},[xt(t.$slots,"files-close-icon",{},()=>[It(a,{name:"close-outline"})])])])])):Tt("",!0)]),_:3})}var rDe=Ni(eDe,[["render",sDe]]);const oDe={props:{percentage:{type:Number,default:0},messageSelectionEnabled:{type:Boolean,required:!0}},emits:["hover-audio-progress","change-linehead"],data(){return{isMouseDown:!1}},methods:{onMouseDown(t){if(this.messageSelectionEnabled)return;this.isMouseDown=!0;const n=this.calculateLineHeadPosition(t,this.$refs.progress);this.$emit("change-linehead",n),document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp)},onMouseUp(t){if(this.messageSelectionEnabled)return;this.isMouseDown=!1,document.removeEventListener("mouseup",this.onMouseUp),document.removeEventListener("mousemove",this.onMouseMove);const n=this.calculateLineHeadPosition(t,this.$refs.progress);this.$emit("change-linehead",n)},onMouseMove(t){if(this.messageSelectionEnabled)return;const n=this.calculateLineHeadPosition(t,this.$refs.progress);this.$emit("change-linehead",n)},calculateLineHeadPosition(t,n){const e=n.getBoundingClientRect().width,i=n.getBoundingClientRect().left;let s=(t.clientX-i)/e;return s=s<0?0:s,s=s>1?1:s,s}}},aDe={class:"vac-player-progress"},lDe={class:"vac-line-container"};function cDe(t,n,e,i,s,r){return Ve(),Qe("div",{ref:"progress",class:"vac-player-bar",onMousedown:n[0]||(n[0]=(...o)=>r.onMouseDown&&r.onMouseDown(...o)),onMouseover:n[1]||(n[1]=o=>t.$emit("hover-audio-progress",!0)),onMouseout:n[2]||(n[2]=o=>t.$emit("hover-audio-progress",!1))},[gt("div",aDe,[gt("div",lDe,[gt("div",{class:"vac-line-progress",style:Wi({width:`${e.percentage}%`})},null,4),gt("div",{class:Pn(["vac-line-dot",{"vac-line-dot__active":s.isMouseDown}]),style:Wi({left:`${e.percentage}%`})},null,6)])])],544)}var uDe=Ni(oDe,[["render",cDe]]);const dDe={name:"AudioPlayer",components:{SvgIcon:Qs,AudioControl:uDe},props:{messageId:{type:[String,Number],default:null},src:{type:String,default:null},messageSelectionEnabled:{type:Boolean,required:!0}},emits:["hover-audio-progress","update-progress-time"],data(){return{isPlaying:!1,duration:this.convertTimeMMSS(0),playedTime:this.convertTimeMMSS(0),progress:0}},computed:{playerUniqId(){return`audio-player${this.messageId}`},audioSource(){return this.src?this.src:(this.resetProgress(),null)}},mounted(){this.player=this.$el.querySelector("#"+this.playerUniqId),this.player.addEventListener("ended",()=>{this.isPlaying=!1}),this.player.addEventListener("loadeddata",()=>{this.resetProgress(),this.duration=this.convertTimeMMSS(this.player.duration),this.updateProgressTime()}),this.player.addEventListener("timeupdate",this.onTimeUpdate)},methods:{convertTimeMMSS(t){return new Date(t*1e3).toISOString().substr(14,5)},playback(){this.messageSelectionEnabled||!this.audioSource||(this.isPlaying?this.player.pause():setTimeout(()=>this.player.play()),this.isPlaying=!this.isPlaying)},resetProgress(){this.isPlaying&&this.player.pause(),this.duration=this.convertTimeMMSS(0),this.playedTime=this.convertTimeMMSS(0),this.progress=0,this.isPlaying=!1,this.updateProgressTime()},onTimeUpdate(){this.playedTime=this.convertTimeMMSS(this.player.currentTime),this.progress=this.player.currentTime/this.player.duration*100,this.updateProgressTime()},onUpdateProgress(t){t&&(this.player.currentTime=t*this.player.duration)},updateProgressTime(){this.$emit("update-progress-time",this.progress>1?this.playedTime:this.duration)}}},hDe={class:"vac-audio-player"},fDe=["id","src"];function mDe(t,n,e,i,s,r){const o=tn("svg-icon"),a=tn("audio-control");return Ve(),Qe("div",null,[gt("div",hDe,[gt("div",{class:"vac-svg-button",onClick:n[0]||(n[0]=(...l)=>r.playback&&r.playback(...l))},[s.isPlaying?xt(t.$slots,"audio-pause-icon_"+e.messageId,{key:0},()=>[It(o,{name:"audio-pause"})]):xt(t.$slots,"audio-play-icon_"+e.messageId,{key:1},()=>[It(o,{name:"audio-play"})])]),It(a,{percentage:s.progress,"message-selection-enabled":e.messageSelectionEnabled,onChangeLinehead:r.onUpdateProgress,onHoverAudioProgress:n[1]||(n[1]=l=>t.$emit("hover-audio-progress",l))},null,8,["percentage","message-selection-enabled","onChangeLinehead"]),gt("audio",{id:r.playerUniqId,src:r.audioSource},null,8,fDe)])])}var hT=Ni(dDe,[["render",mDe]]);const pDe={name:"RoomMessageReply",components:{SvgIcon:Qs,FormatMessage:s0,AudioPlayer:hT},props:{room:{type:Object,required:!0},messageReply:{type:Object,default:null},textFormatting:{type:Object,required:!0},linkOptions:{type:Object,required:!0}},emits:["reset-message"],computed:{firstFile(){var t,n;return(n=(t=this.messageReply)==null?void 0:t.files)!=null&&n.length?this.messageReply.files[0]:{}},isImage(){return vm(this.firstFile)},isVideo(){return r0(this.firstFile)},isAudio(){return Ay(this.firstFile)},isOtherFile(){var t,n;return((n=(t=this.messageReply)==null?void 0:t.files)==null?void 0:n.length)&&!this.isAudio&&!this.isVideo&&!this.isImage}}},gDe={key:0,class:"vac-reply-container"},vDe={class:"vac-reply-box"},bDe={class:"vac-reply-info"},_De={class:"vac-reply-username"},wDe={class:"vac-reply-content"},yDe=["src"],CDe={key:1,controls:"",class:"vac-image-reply"},kDe=["src"],EDe={key:3,class:"vac-image-reply vac-file-container"},SDe={class:"vac-text-ellipsis"},TDe={key:0,class:"vac-text-ellipsis vac-text-extension"},xDe={class:"vac-icon-reply"};function ADe(t,n,e,i,s,r){const o=tn("format-message"),a=tn("audio-player"),l=tn("svg-icon");return Ve(),mi(vs,{name:"vac-slide-up"},{default:rn(()=>[e.messageReply?(Ve(),Qe("div",gDe,[gt("div",vDe,[gt("div",bDe,[gt("div",_De,fn(e.messageReply.username),1),gt("div",wDe,[It(o,{"message-id":e.messageReply._id,content:e.messageReply.content,users:e.room.users,"text-formatting":e.textFormatting,"link-options":e.linkOptions,reply:!0},null,8,["message-id","content","users","text-formatting","link-options"])])]),r.isImage?(Ve(),Qe("img",{key:0,src:r.firstFile.url,class:"vac-image-reply"},null,8,yDe)):r.isVideo?(Ve(),Qe("video",CDe,[gt("source",{src:r.firstFile.url},null,8,kDe)])):r.isAudio?(Ve(),mi(a,{key:2,src:r.firstFile.url,"message-selection-enabled":!1,class:"vac-audio-reply"},ki({_:2},[Tn(t.$slots,(c,u)=>({name:u,fn:rn(d=>[xt(t.$slots,u,Ci(vi(d)))])}))]),1032,["src"])):r.isOtherFile?(Ve(),Qe("div",EDe,[gt("div",null,[xt(t.$slots,"file-icon",{},()=>[It(l,{name:"file"})])]),gt("div",SDe,fn(r.firstFile.name),1),r.firstFile.extension?(Ve(),Qe("div",TDe,fn(r.firstFile.extension),1)):Tt("",!0)])):Tt("",!0)]),gt("div",xDe,[gt("div",{class:"vac-svg-button",onClick:n[0]||(n[0]=c=>t.$emit("reset-message"))},[xt(t.$slots,"reply-close-icon",{},()=>[It(l,{name:"close-outline"})])])])])):Tt("",!0)]),_:3})}var IDe=Ni(pDe,[["render",ADe]]);const RDe={name:"RoomUsersTag",props:{filteredUsersTag:{type:Array,required:!0},selectItem:{type:Boolean,default:null},activeUpOrDown:{type:Number,default:null}},emits:["select-user-tag","activate-item"],data(){return{activeItem:null}},watch:{filteredUsersTag(t,n){(!n.length||t.length!==n.length)&&(this.activeItem=0)},selectItem(t){t&&this.$emit("select-user-tag",this.filteredUsersTag[this.activeItem])},activeUpOrDown(){this.activeUpOrDown>0&&this.activeItem<this.filteredUsersTag.length-1?this.activeItem++:this.activeUpOrDown<0&&this.activeItem>0&&this.activeItem--,this.$emit("activate-item")}}},MDe={key:0,class:"vac-tags-container"},PDe=["onMouseover","onClick"],ODe={class:"vac-tags-info"},LDe={class:"vac-tags-username"};function BDe(t,n,e,i,s,r){return Ve(),mi(vs,{name:"vac-slide-up"},{default:rn(()=>[e.filteredUsersTag.length?(Ve(),Qe("div",MDe,[(Ve(!0),Qe(Yn,null,Tn(e.filteredUsersTag,(o,a)=>(Ve(),Qe("div",{key:o._id,class:Pn(["vac-tags-box",{"vac-tags-box-active":a===s.activeItem}]),onMouseover:l=>s.activeItem=a,onClick:l=>t.$emit("select-user-tag",o)},[gt("div",ODe,[o.avatar?(Ve(),Qe("div",{key:0,class:"vac-avatar vac-tags-avatar",style:Wi({"background-image":`url('${o.avatar}')`})},null,4)):Tt("",!0),gt("div",LDe,fn(o.username),1)])],42,PDe))),128))])):Tt("",!0)]),_:1})}var FDe=Ni(RDe,[["render",BDe]]);const NDe={name:"RoomEmojis",props:{filteredEmojis:{type:Array,required:!0},selectItem:{type:Boolean,default:null},activeUpOrDown:{type:Number,default:null}},emits:["select-emoji","activate-item"],data(){return{activeItem:null}},watch:{filteredEmojis(t,n){(!n.length||t.length!==n.length)&&(this.activeItem=0)},selectItem(t){t&&this.$emit("select-emoji",this.filteredEmojis[this.activeItem])},activeUpOrDown(){this.activeUpOrDown>0&&this.activeItem<this.filteredEmojis.length-1?this.activeItem++:this.activeUpOrDown<0&&this.activeItem>0&&this.activeItem--,this.$emit("activate-item")}}},VDe={key:0,class:"vac-emojis-container"},DDe=["onMouseover","onClick"];function $De(t,n,e,i,s,r){return Ve(),mi(vs,{name:"vac-slide-up"},{default:rn(()=>[e.filteredEmojis.length?(Ve(),Qe("div",VDe,[(Ve(!0),Qe(Yn,null,Tn(e.filteredEmojis,(o,a)=>(Ve(),Qe("div",{key:o,class:Pn(["vac-emoji-element",{"vac-emoji-element-active":a===s.activeItem}]),onMouseover:l=>s.activeItem=a,onClick:l=>t.$emit("select-emoji",o)},fn(o),43,DDe))),128))])):Tt("",!0)]),_:1})}var zDe=Ni(NDe,[["render",$De]]);const HDe={name:"RoomTemplatesText",props:{filteredTemplatesText:{type:Array,required:!0},selectItem:{type:Boolean,default:null},activeUpOrDown:{type:Number,default:null}},emits:["select-template-text","activate-item"],data(){return{activeItem:null}},watch:{filteredTemplatesText(t,n){(!n.length||t.length!==n.length)&&(this.activeItem=0)},selectItem(t){t&&this.$emit("select-template-text",this.filteredTemplatesText[this.activeItem])},activeUpOrDown(){this.activeUpOrDown>0&&this.activeItem<this.filteredTemplatesText.length-1?this.activeItem++:this.activeUpOrDown<0&&this.activeItem>0&&this.activeItem--,this.$emit("activate-item")}}},UDe={key:0,class:"vac-template-container vac-app-box-shadow"},WDe=["onMouseover","onClick"],jDe={class:"vac-template-info"},qDe={class:"vac-template-tag"},KDe={class:"vac-template-text"};function GDe(t,n,e,i,s,r){return Ve(),mi(vs,{name:"vac-slide-up"},{default:rn(()=>[e.filteredTemplatesText.length?(Ve(),Qe("div",UDe,[(Ve(!0),Qe(Yn,null,Tn(e.filteredTemplatesText,(o,a)=>(Ve(),Qe("div",{key:a,class:Pn(["vac-template-box",{"vac-template-active":a===s.activeItem}]),onMouseover:l=>s.activeItem=a,onClick:l=>t.$emit("select-template-text",o)},[gt("div",jDe,[gt("div",qDe," /"+fn(o.tag),1),gt("div",KDe,fn(o.text),1)])],42,WDe))),128))])):Tt("",!0)]),_:1})}var YDe=Ni(HDe,[["render",GDe]]);function ZDe(t){return new Int8Array(t)}function AW(t){return new Int16Array(t)}function IW(t){return new Int32Array(t)}function RW(t){return new Float32Array(t)}function XDe(t){return new Float64Array(t)}function MW(t){if(t.length==1)return RW(t[0]);var n=t[0];t=t.slice(1);for(var e=[],i=0;i<n;i++)e.push(MW(t));return e}function PW(t){if(t.length==1)return IW(t[0]);var n=t[0];t=t.slice(1);for(var e=[],i=0;i<n;i++)e.push(PW(t));return e}function OW(t){if(t.length==1)return AW(t[0]);var n=t[0];t=t.slice(1);for(var e=[],i=0;i<n;i++)e.push(OW(t));return e}function LW(t){if(t.length==1)return new Array(t[0]);var n=t[0];t=t.slice(1);for(var e=[],i=0;i<n;i++)e.push(LW(t));return e}var BW={};BW.fill=function(t,n,e,i){if(arguments.length==2)for(var s=0;s<t.length;s++)t[s]=arguments[1];else for(var s=n;s<e;s++)t[s]=i};var a0={};a0.arraycopy=function(t,n,e,i,s){for(var r=n+s;n<r;)e[i++]=t[n++]};a0.out={};a0.out.println=function(t){console.log(t)};a0.out.printf=function(){console.log.apply(console,arguments)};var Iy={};Iy.SQRT2=1.4142135623730951;Iy.FAST_LOG10=function(t){return Math.log10(t)};Iy.FAST_LOG10_X=function(t,n){return Math.log10(t)*n};function xc(t){this.ordinal=t}xc.short_block_allowed=new xc(0);xc.short_block_coupled=new xc(1);xc.short_block_dispensed=new xc(2);xc.short_block_forced=new xc(3);var FW={};FW.MAX_VALUE=34028235e31;function Lo(t){this.ordinal=t}Lo.vbr_off=new Lo(0);Lo.vbr_mt=new Lo(1);Lo.vbr_rh=new Lo(2);Lo.vbr_abr=new Lo(3);Lo.vbr_mtrh=new Lo(4);Lo.vbr_default=Lo.vbr_mtrh;var JDe=function(t){},St={System:a0,VbrMode:Lo,Float:FW,ShortBlock:xc,Util:Iy,Arrays:BW,new_array_n:LW,new_byte:ZDe,new_double:XDe,new_float:RW,new_float_n:MW,new_int:IW,new_int_n:PW,new_short:AW,new_short_n:OW,assert:JDe},QDe=St.System,os=St.Util,e$e=St.Arrays,t$e=St.new_float;function n$e(){var t=[-.1482523854003001,32.308141959636465,296.40344946382766,883.1344870032432,11113.947376231741,1057.2713659324597,305.7402417275812,30.825928907280012,3.8533188138216365,59.42900443849514,709.5899960123345,5281.91112291017,-5829.66483675846,-817.6293103748613,-76.91656988279972,-4.594269939176596,.9063471690191471,.1960342806591213,-.15466694054279598,34.324387823855965,301.8067566458425,817.599602898885,11573.795901679885,1181.2520595540152,321.59731579894424,31.232021761053772,3.7107095756221318,53.650946155329365,684.167428119626,5224.56624370173,-6366.391851890084,-908.9766368219582,-89.83068876699639,-5.411397422890401,.8206787908286602,.3901806440322567,-.16070888947830023,36.147034243915876,304.11815768187864,732.7429163887613,11989.60988270091,1300.012278487897,335.28490093152146,31.48816102859945,3.373875931311736,47.232241542899175,652.7371796173471,5132.414255594984,-6909.087078780055,-1001.9990371107289,-103.62185754286375,-6.104916304710272,.7416505462720353,.5805693545089249,-.16636367662261495,37.751650073343995,303.01103387567713,627.9747488785183,12358.763425278165,1412.2779918482834,346.7496836825721,31.598286663170416,3.1598635433980946,40.57878626349686,616.1671130880391,5007.833007176154,-7454.040671756168,-1095.7960341867115,-118.24411666465777,-6.818469345853504,.6681786379192989,.7653668647301797,-.1716176790982088,39.11551877123304,298.3413246578966,503.5259106886539,12679.589408408976,1516.5821921214542,355.9850766329023,31.395241710249053,2.9164211881972335,33.79716964664243,574.8943997801362,4853.234992253242,-7997.57021486075,-1189.7624067269965,-133.6444792601766,-7.7202770609839915,.5993769336819237,.9427934736519954,-.17645823955292173,40.21879108166477,289.9982036694474,359.3226160751053,12950.259102786438,1612.1013903507662,362.85067106591504,31.045922092242872,2.822222032597987,26.988862316190684,529.8996541764288,4671.371946949588,-8535.899136645805,-1282.5898586244496,-149.58553632943463,-8.643494270763135,.5345111359507916,1.111140466039205,-.36174739330527045,41.04429910497807,277.5463268268618,195.6386023135583,13169.43812144731,1697.6433561479398,367.40983966190305,30.557037410382826,2.531473372857427,20.070154905927314,481.50208566532336,4464.970341588308,-9065.36882077239,-1373.62841526722,-166.1660487028118,-9.58289321133207,.4729647758913199,1.268786568327291,-.36970682634889585,41.393213350082036,261.2935935556502,12.935476055240873,13336.131683328815,1772.508612059496,369.76534388639965,29.751323653701338,2.4023193045459172,13.304795348228817,430.5615775526625,4237.0568611071185,-9581.931701634761,-1461.6913552409758,-183.12733958476446,-10.718010163869403,.41421356237309503,1.414213562373095,-.37677560326535325,41.619486213528496,241.05423794991074,-187.94665032361226,13450.063605744153,1836.153896465782,369.4908799925761,29.001847876923147,2.0714759319987186,6.779591200894186,377.7767837205709,3990.386575512536,-10081.709459700915,-1545.947424837898,-200.3762958015653,-11.864482073055006,.3578057213145241,1.546020906725474,-.3829366947518991,41.1516456456653,216.47684307105183,-406.1569483347166,13511.136535077321,1887.8076599260432,367.3025214564151,28.136213436723654,1.913880671464418,.3829366947518991,323.85365704338597,3728.1472257487526,-10561.233882199509,-1625.2025997821418,-217.62525175416,-13.015432208941645,.3033466836073424,1.66293922460509,-.5822628872992417,40.35639251440489,188.20071124269245,-640.2706748618148,13519.21490106562,1927.6022433578062,362.8197642637487,26.968821921868447,1.7463817695935329,-5.62650678237171,269.3016715297017,3453.386536448852,-11016.145278780888,-1698.6569643425091,-234.7658734267683,-14.16351421663124,.2504869601913055,1.76384252869671,-.5887180101749253,39.23429103868072,155.76096234403798,-889.2492977967378,13475.470561874661,1955.0535223723712,356.4450994756727,25.894952980042156,1.5695032905781554,-11.181939564328772,214.80884394039484,3169.1640829158237,-11443.321309975563,-1765.1588461316153,-251.68908574481912,-15.49755935939164,.198912367379658,1.847759065022573,-.7912582233652842,37.39369355329111,119.699486012458,-1151.0956593239027,13380.446257078214,1970.3952110853447,348.01959814116185,24.731487364283044,1.3850130831637748,-16.421408865300393,161.05030052864092,2878.3322807850063,-11838.991423510031,-1823.985884688674,-268.2854986386903,-16.81724543849939,.1483359875383474,1.913880671464418,-.7960642926861912,35.2322109610459,80.01928065061526,-1424.0212633405113,13235.794061869668,1973.804052543835,337.9908651258184,23.289159354463873,1.3934255946442087,-21.099669467133474,108.48348407242611,2583.700758091299,-12199.726194855148,-1874.2780658979746,-284.2467154529415,-18.11369784385905,.09849140335716425,1.961570560806461,-.998795456205172,32.56307803611191,36.958364584370486,-1706.075448829146,13043.287458812016,1965.3831106103316,326.43182772364605,22.175018750622293,1.198638339011324,-25.371248002043963,57.53505923036915,2288.41886619975,-12522.674544337233,-1914.8400385312243,-299.26241273417224,-19.37805630698734,.04912684976946725,1.990369453344394,.035780907*os.SQRT2*.5/2384e-9,.017876148*os.SQRT2*.5/2384e-9,.003134727*os.SQRT2*.5/2384e-9,.002457142*os.SQRT2*.5/2384e-9,971317e-9*os.SQRT2*.5/2384e-9,218868e-9*os.SQRT2*.5/2384e-9,101566e-9*os.SQRT2*.5/2384e-9,13828e-9*os.SQRT2*.5/2384e-9,12804.797818791945,1945.5515939597317,313.4244966442953,20.801593959731544,1995.1556208053692,9.000838926174497,-29.20218120805369],n=12,e=36,i=[[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,940084909404969e-27,6423305872147839e-28,2382191739347918e-28,5456116108943412e-27,4878985199565852e-27,4240448995017367e-27,3559909094758252e-27,2858043359288075e-27,2156177623817898e-27,1475637723558783e-27,8371015190102974e-28,2599706096327376e-28,-5456116108943412e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758252e-27,-2858043359288076e-27,-2156177623817898e-27,-1475637723558783e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347923e-28,-6423305872147843e-28,-9400849094049696e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049694e-28,-642330587214784e-27,-2382191739347918e-28],[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,9400849094049688e-28,6423305872147841e-28,2382191739347918e-28,5456116108943413e-27,4878985199565852e-27,4240448995017367e-27,3559909094758253e-27,2858043359288075e-27,2156177623817898e-27,1475637723558782e-27,8371015190102975e-28,2599706096327376e-28,-5461314069809755e-27,-4921085770524055e-27,-4343405037091838e-27,-3732668368707687e-27,-3093523840190885e-27,-2430835727329465e-27,-1734679010007751e-27,-974825365660928e-27,-2797435120168326e-28,0,0,0,0,0,0,-2283748241799531e-28,-4037858874020686e-28,-2146547464825323e-28],[.1316524975873958,.414213562373095,.7673269879789602,1.091308501069271,1.303225372841206,1.56968557711749,1.920982126971166,2.414213562373094,3.171594802363212,4.510708503662055,7.595754112725146,22.90376554843115,.984807753012208,.6427876096865394,.3420201433256688,.9396926207859084,-.1736481776669303,-.7660444431189779,.8660254037844387,.5,-.5144957554275265,-.4717319685649723,-.3133774542039019,-.1819131996109812,-.09457419252642064,-.04096558288530405,-.01419856857247115,-.003699974673760037,.8574929257125442,.8817419973177052,.9496286491027329,.9833145924917901,.9955178160675857,.9991605581781475,.999899195244447,.9999931550702802],[0,0,0,0,0,0,2283748241799531e-28,4037858874020686e-28,2146547464825323e-28,5461314069809755e-27,4921085770524055e-27,4343405037091838e-27,3732668368707687e-27,3093523840190885e-27,2430835727329466e-27,1734679010007751e-27,974825365660928e-27,2797435120168326e-28,-5456116108943413e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758253e-27,-2858043359288075e-27,-2156177623817898e-27,-1475637723558782e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347913e-28,-6423305872147834e-28,-9400849094049688e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049688e-28,-6423305872147841e-28,-2382191739347918e-28]],s=i[Y.SHORT_TYPE],r=i[Y.SHORT_TYPE],o=i[Y.SHORT_TYPE],a=i[Y.SHORT_TYPE],l=[0,1,16,17,8,9,24,25,4,5,20,21,12,13,28,29,2,3,18,19,10,11,26,27,6,7,22,23,14,15,30,31];function c(f,p,m){for(var v=10,y=p+238-14-286,_=-15;_<0;_++){var b,E,x;b=t[v+-10],E=f[y+-224]*b,x=f[p+224]*b,b=t[v+-9],E+=f[y+-160]*b,x+=f[p+160]*b,b=t[v+-8],E+=f[y+-96]*b,x+=f[p+96]*b,b=t[v+-7],E+=f[y+-32]*b,x+=f[p+32]*b,b=t[v+-6],E+=f[y+32]*b,x+=f[p+-32]*b,b=t[v+-5],E+=f[y+96]*b,x+=f[p+-96]*b,b=t[v+-4],E+=f[y+160]*b,x+=f[p+-160]*b,b=t[v+-3],E+=f[y+224]*b,x+=f[p+-224]*b,b=t[v+-2],E+=f[p+-256]*b,x-=f[y+256]*b,b=t[v+-1],E+=f[p+-192]*b,x-=f[y+192]*b,b=t[v+0],E+=f[p+-128]*b,x-=f[y+128]*b,b=t[v+1],E+=f[p+-64]*b,x-=f[y+64]*b,b=t[v+2],E+=f[p+0]*b,x-=f[y+0]*b,b=t[v+3],E+=f[p+64]*b,x-=f[y+-64]*b,b=t[v+4],E+=f[p+128]*b,x-=f[y+-128]*b,b=t[v+5],E+=f[p+192]*b,x-=f[y+-192]*b,E*=t[v+6],b=x-E,m[30+_*2]=x+E,m[31+_*2]=t[v+7]*b,v+=18,p--,y++}{var E,x,A,I;x=f[p+-16]*t[v+-10],E=f[p+-32]*t[v+-2],x+=(f[p+-48]-f[p+16])*t[v+-9],E+=f[p+-96]*t[v+-1],x+=(f[p+-80]+f[p+48])*t[v+-8],E+=f[p+-160]*t[v+0],x+=(f[p+-112]-f[p+80])*t[v+-7],E+=f[p+-224]*t[v+1],x+=(f[p+-144]+f[p+112])*t[v+-6],E-=f[p+32]*t[v+2],x+=(f[p+-176]-f[p+144])*t[v+-5],E-=f[p+96]*t[v+3],x+=(f[p+-208]+f[p+176])*t[v+-4],E-=f[p+160]*t[v+4],x+=(f[p+-240]-f[p+208])*t[v+-3],E-=f[p+224],A=E-x,I=E+x,x=m[14],E=m[15]-x,m[31]=I+x,m[30]=A+E,m[15]=A-E,m[14]=I-x}{var k;k=m[28]-m[0],m[0]+=m[28],m[28]=k*t[v+-2*18+7],k=m[29]-m[1],m[1]+=m[29],m[29]=k*t[v+-2*18+7],k=m[26]-m[2],m[2]+=m[26],m[26]=k*t[v+-4*18+7],k=m[27]-m[3],m[3]+=m[27],m[27]=k*t[v+-4*18+7],k=m[24]-m[4],m[4]+=m[24],m[24]=k*t[v+-6*18+7],k=m[25]-m[5],m[5]+=m[25],m[25]=k*t[v+-6*18+7],k=m[22]-m[6],m[6]+=m[22],m[22]=k*os.SQRT2,k=m[23]-m[7],m[7]+=m[23],m[23]=k*os.SQRT2-m[7],m[7]-=m[6],m[22]-=m[7],m[23]-=m[22],k=m[6],m[6]=m[31]-k,m[31]=m[31]+k,k=m[7],m[7]=m[30]-k,m[30]=m[30]+k,k=m[22],m[22]=m[15]-k,m[15]=m[15]+k,k=m[23],m[23]=m[14]-k,m[14]=m[14]+k,k=m[20]-m[8],m[8]+=m[20],m[20]=k*t[v+-10*18+7],k=m[21]-m[9],m[9]+=m[21],m[21]=k*t[v+-10*18+7],k=m[18]-m[10],m[10]+=m[18],m[18]=k*t[v+-12*18+7],k=m[19]-m[11],m[11]+=m[19],m[19]=k*t[v+-12*18+7],k=m[16]-m[12],m[12]+=m[16],m[16]=k*t[v+-14*18+7],k=m[17]-m[13],m[13]+=m[17],m[17]=k*t[v+-14*18+7],k=-m[20]+m[24],m[20]+=m[24],m[24]=k*t[v+-12*18+7],k=-m[21]+m[25],m[21]+=m[25],m[25]=k*t[v+-12*18+7],k=m[4]-m[8],m[4]+=m[8],m[8]=k*t[v+-12*18+7],k=m[5]-m[9],m[5]+=m[9],m[9]=k*t[v+-12*18+7],k=m[0]-m[12],m[0]+=m[12],m[12]=k*t[v+-4*18+7],k=m[1]-m[13],m[1]+=m[13],m[13]=k*t[v+-4*18+7],k=m[16]-m[28],m[16]+=m[28],m[28]=k*t[v+-4*18+7],k=-m[17]+m[29],m[17]+=m[29],m[29]=k*t[v+-4*18+7],k=os.SQRT2*(m[2]-m[10]),m[2]+=m[10],m[10]=k,k=os.SQRT2*(m[3]-m[11]),m[3]+=m[11],m[11]=k,k=os.SQRT2*(-m[18]+m[26]),m[18]+=m[26],m[26]=k-m[18],k=os.SQRT2*(-m[19]+m[27]),m[19]+=m[27],m[27]=k-m[19],k=m[2],m[19]-=m[3],m[3]-=k,m[2]=m[31]-k,m[31]+=k,k=m[3],m[11]-=m[19],m[18]-=k,m[3]=m[30]-k,m[30]+=k,k=m[18],m[27]-=m[11],m[19]-=k,m[18]=m[15]-k,m[15]+=k,k=m[19],m[10]-=k,m[19]=m[14]-k,m[14]+=k,k=m[10],m[11]-=k,m[10]=m[23]-k,m[23]+=k,k=m[11],m[26]-=k,m[11]=m[22]-k,m[22]+=k,k=m[26],m[27]-=k,m[26]=m[7]-k,m[7]+=k,k=m[27],m[27]=m[6]-k,m[6]+=k,k=os.SQRT2*(m[0]-m[4]),m[0]+=m[4],m[4]=k,k=os.SQRT2*(m[1]-m[5]),m[1]+=m[5],m[5]=k,k=os.SQRT2*(m[16]-m[20]),m[16]+=m[20],m[20]=k,k=os.SQRT2*(m[17]-m[21]),m[17]+=m[21],m[21]=k,k=-os.SQRT2*(m[8]-m[12]),m[8]+=m[12],m[12]=k-m[8],k=-os.SQRT2*(m[9]-m[13]),m[9]+=m[13],m[13]=k-m[9],k=-os.SQRT2*(m[25]-m[29]),m[25]+=m[29],m[29]=k-m[25],k=-os.SQRT2*(m[24]+m[28]),m[24]-=m[28],m[28]=k-m[24],k=m[24]-m[16],m[24]=k,k=m[20]-k,m[20]=k,k=m[28]-k,m[28]=k,k=m[25]-m[17],m[25]=k,k=m[21]-k,m[21]=k,k=m[29]-k,m[29]=k,k=m[17]-m[1],m[17]=k,k=m[9]-k,m[9]=k,k=m[25]-k,m[25]=k,k=m[5]-k,m[5]=k,k=m[21]-k,m[21]=k,k=m[13]-k,m[13]=k,k=m[29]-k,m[29]=k,k=m[1]-m[0],m[1]=k,k=m[16]-k,m[16]=k,k=m[17]-k,m[17]=k,k=m[8]-k,m[8]=k,k=m[9]-k,m[9]=k,k=m[24]-k,m[24]=k,k=m[25]-k,m[25]=k,k=m[4]-k,m[4]=k,k=m[5]-k,m[5]=k,k=m[20]-k,m[20]=k,k=m[21]-k,m[21]=k,k=m[12]-k,m[12]=k,k=m[13]-k,m[13]=k,k=m[28]-k,m[28]=k,k=m[29]-k,m[29]=k,k=m[0],m[0]+=m[31],m[31]-=k,k=m[1],m[1]+=m[30],m[30]-=k,k=m[16],m[16]+=m[15],m[15]-=k,k=m[17],m[17]+=m[14],m[14]-=k,k=m[8],m[8]+=m[23],m[23]-=k,k=m[9],m[9]+=m[22],m[22]-=k,k=m[24],m[24]+=m[7],m[7]-=k,k=m[25],m[25]+=m[6],m[6]-=k,k=m[4],m[4]+=m[27],m[27]-=k,k=m[5],m[5]+=m[26],m[26]-=k,k=m[20],m[20]+=m[11],m[11]-=k,k=m[21],m[21]+=m[10],m[10]-=k,k=m[12],m[12]+=m[19],m[19]-=k,k=m[13],m[13]+=m[18],m[18]-=k,k=m[28],m[28]+=m[3],m[3]-=k,k=m[29],m[29]+=m[2],m[2]-=k}}function u(f,p){for(var m=0;m<3;m++){var v,y,_,b,E,x;b=f[p+2*3]*i[Y.SHORT_TYPE][0]-f[p+5*3],v=f[p+0*3]*i[Y.SHORT_TYPE][2]-f[p+3*3],y=b+v,_=b-v,b=f[p+5*3]*i[Y.SHORT_TYPE][0]+f[p+2*3],v=f[p+3*3]*i[Y.SHORT_TYPE][2]+f[p+0*3],E=b+v,x=-b+v,v=(f[p+1*3]*i[Y.SHORT_TYPE][1]-f[p+4*3])*2069978111953089e-26,b=(f[p+4*3]*i[Y.SHORT_TYPE][1]+f[p+1*3])*2069978111953089e-26,f[p+3*0]=y*190752519173728e-25+v,f[p+3*5]=-E*190752519173728e-25+b,_=_*.8660254037844387*1907525191737281e-26,E=E*.5*1907525191737281e-26+b,f[p+3*1]=_-E,f[p+3*2]=_+E,y=y*.5*1907525191737281e-26-v,x=x*.8660254037844387*1907525191737281e-26,f[p+3*3]=y+x,f[p+3*4]=y-x,p++}}function d(f,p,m){var v,y;{var _,b,E,x,A,I,k,O;_=m[17]-m[9],E=m[15]-m[11],x=m[14]-m[12],A=m[0]+m[8],I=m[1]+m[7],k=m[2]+m[6],O=m[3]+m[5],f[p+17]=A+k-O-(I-m[4]),y=(A+k-O)*r[19]+(I-m[4]),v=(_-E-x)*r[18],f[p+5]=v+y,f[p+6]=v-y,b=(m[16]-m[10])*r[18],I=I*r[19]+m[4],v=_*r[12]+b+E*r[13]+x*r[14],y=-A*r[16]+I-k*r[17]+O*r[15],f[p+1]=v+y,f[p+2]=v-y,v=_*r[13]-b-E*r[14]+x*r[12],y=-A*r[17]+I-k*r[15]+O*r[16],f[p+9]=v+y,f[p+10]=v-y,v=_*r[14]-b+E*r[12]-x*r[13],y=A*r[15]-I+k*r[16]-O*r[17],f[p+13]=v+y,f[p+14]=v-y}{var M,T,P,R,L,F,B,z;M=m[8]-m[0],P=m[6]-m[2],R=m[5]-m[3],L=m[17]+m[9],F=m[16]+m[10],B=m[15]+m[11],z=m[14]+m[12],f[p+0]=L+B+z+(F+m[13]),v=(L+B+z)*r[19]-(F+m[13]),y=(M-P+R)*r[18],f[p+11]=v+y,f[p+12]=v-y,T=(m[7]-m[1])*r[18],F=m[13]-F*r[19],v=L*r[15]-F+B*r[16]+z*r[17],y=M*r[14]+T+P*r[12]+R*r[13],f[p+3]=v+y,f[p+4]=v-y,v=-L*r[17]+F-B*r[15]-z*r[16],y=M*r[13]+T-P*r[14]-R*r[12],f[p+7]=v+y,f[p+8]=v-y,v=-L*r[16]+F-B*r[17]-z*r[15],y=M*r[12]-T+P*r[13]-R*r[14],f[p+15]=v+y,f[p+16]=v-y}}this.mdct_sub48=function(f,p,m){for(var v=p,y=286,_=0;_<f.channels_out;_++){for(var b=0;b<f.mode_gr;b++){for(var E,x=f.l3_side.tt[b][_],A=x.xr,I=0,k=f.sb_sample[_][1-b],O=0,M=0;M<18/2;M++)for(c(v,y,k[O]),c(v,y+32,k[O+1]),O+=2,y+=64,E=1;E<32;E+=2)k[O-1][E]*=-1;for(E=0;E<32;E++,I+=18){var T=x.block_type,P=f.sb_sample[_][b],R=f.sb_sample[_][1-b];if(x.mixed_block_flag!=0&&E<2&&(T=0),f.amp_filter[E]<1e-12)e$e.fill(A,I+0,I+18,0);else{if(f.amp_filter[E]<1)for(var M=0;M<18;M++)R[M][l[E]]*=f.amp_filter[E];if(T==Y.SHORT_TYPE){for(var M=-n/4;M<0;M++){var L=i[Y.SHORT_TYPE][M+3];A[I+M*3+9]=P[9+M][l[E]]*L-P[8-M][l[E]],A[I+M*3+18]=P[14-M][l[E]]*L+P[15+M][l[E]],A[I+M*3+10]=P[15+M][l[E]]*L-P[14-M][l[E]],A[I+M*3+19]=R[2-M][l[E]]*L+R[3+M][l[E]],A[I+M*3+11]=R[3+M][l[E]]*L-R[2-M][l[E]],A[I+M*3+20]=R[8-M][l[E]]*L+R[9+M][l[E]]}u(A,I)}else{for(var F=t$e(18),M=-e/4;M<0;M++){var B,z;B=i[T][M+27]*R[M+9][l[E]]+i[T][M+36]*R[8-M][l[E]],z=i[T][M+9]*P[M+9][l[E]]-i[T][M+18]*P[8-M][l[E]],F[M+9]=B-z*s[3+M+9],F[M+18]=B*s[3+M+9]+z}d(A,I,F)}}if(T!=Y.SHORT_TYPE&&E!=0)for(var M=7;M>=0;--M){var J,q;J=A[I+M]*o[20+M]+A[I+-1-M]*a[28+M],q=A[I+M]*a[28+M]-A[I+-1-M]*o[20+M],A[I+-1-M]=J,A[I+M]=q}}}if(v=m,y=286,f.mode_gr==1)for(var G=0;G<18;G++)QDe.arraycopy(f.sb_sample[_][1][G],0,f.sb_sample[_][0][G],0,32)}}}var i$e=St.System,s$e=St.new_float,r$e=St.new_float_n;function Z_(){this.l=s$e(Y.SBMAX_l),this.s=r$e([Y.SBMAX_s,3]);var t=this;this.assign=function(n){i$e.arraycopy(n.l,0,t.l,0,Y.SBMAX_l);for(var e=0;e<Y.SBMAX_s;e++)for(var i=0;i<3;i++)t.s[e][i]=n.s[e][i]}}function ou(){this.thm=new Z_,this.en=new Z_}function ai(t){var n=t;this.ordinal=function(){return n}}ai.STEREO=new ai(0);ai.JOINT_STEREO=new ai(1);ai.DUAL_CHANNEL=new ai(2);ai.MONO=new ai(3);ai.NOT_SET=new ai(4);var LP=St.System,nb=St.VbrMode,BP=St.new_array_n,FP=St.new_float,o$e=St.new_float_n,a$e=St.new_int,ib=St.assert;Y.ENCDELAY=576;Y.POSTDELAY=1152;Y.MDCTDELAY=48;Y.FFTOFFSET=224+Y.MDCTDELAY;Y.DECDELAY=528;Y.SBLIMIT=32;Y.CBANDS=64;Y.SBPSY_l=21;Y.SBPSY_s=12;Y.SBMAX_l=22;Y.SBMAX_s=13;Y.PSFB21=6;Y.PSFB12=6;Y.BLKSIZE=1024;Y.HBLKSIZE=Y.BLKSIZE/2+1;Y.BLKSIZE_s=256;Y.HBLKSIZE_s=Y.BLKSIZE_s/2+1;Y.NORM_TYPE=0;Y.START_TYPE=1;Y.SHORT_TYPE=2;Y.STOP_TYPE=3;Y.MPG_MD_LR_LR=0;Y.MPG_MD_LR_I=1;Y.MPG_MD_MS_LR=2;Y.MPG_MD_MS_I=3;Y.fircoef=[-.0207887*5,-.0378413*5,-.0432472*5,-.031183*5,779609e-23*5,.0467745*5,.10091*5,.151365*5,.187098*5];function Y(){var t=Y.FFTOFFSET,n=Y.MPG_MD_MS_LR,e=null;this.psy=null;var i=null,s=null,r=null;this.setModules=function(u,d,f,p){e=u,this.psy=d,i=d,s=p,r=f};var o=new n$e;function a(u){var d,f;if(u.ATH.useAdjust==0){u.ATH.adjust=1;return}if(f=u.loudness_sq[0][0],d=u.loudness_sq[1][0],u.channels_out==2?(f+=u.loudness_sq[0][1],d+=u.loudness_sq[1][1]):(f+=f,d+=d),u.mode_gr==2&&(f=Math.max(f,d)),f*=.5,f*=u.ATH.aaSensitivityP,f>.03125)u.ATH.adjust>=1?u.ATH.adjust=1:u.ATH.adjust<u.ATH.adjustLimit&&(u.ATH.adjust=u.ATH.adjustLimit),u.ATH.adjustLimit=1;else{var p=31.98*f+625e-6;u.ATH.adjust>=p?(u.ATH.adjust*=p*.075+.925,u.ATH.adjust<p&&(u.ATH.adjust=p)):u.ATH.adjustLimit>=p?u.ATH.adjust=p:u.ATH.adjust<u.ATH.adjustLimit&&(u.ATH.adjust=u.ATH.adjustLimit),u.ATH.adjustLimit=p}}function l(u){var d,f;for(ib(u.bitrate_index>=0&&u.bitrate_index<16),ib(u.mode_ext>=0&&u.mode_ext<4),u.bitrate_stereoMode_Hist[u.bitrate_index][4]++,u.bitrate_stereoMode_Hist[15][4]++,u.channels_out==2&&(u.bitrate_stereoMode_Hist[u.bitrate_index][u.mode_ext]++,u.bitrate_stereoMode_Hist[15][u.mode_ext]++),d=0;d<u.mode_gr;++d)for(f=0;f<u.channels_out;++f){var p=u.l3_side.tt[d][f].block_type|0;u.l3_side.tt[d][f].mixed_block_flag!=0&&(p=4),u.bitrate_blockType_Hist[u.bitrate_index][p]++,u.bitrate_blockType_Hist[u.bitrate_index][5]++,u.bitrate_blockType_Hist[15][p]++,u.bitrate_blockType_Hist[15][5]++}}function c(u,d){var f=u.internal_flags,p,m;if(f.lame_encode_frame_init==0){var v,y,_=FP(2014),b=FP(2014);for(f.lame_encode_frame_init=1,v=0,y=0;v<286+576*(1+f.mode_gr);++v)v<576*f.mode_gr?(_[v]=0,f.channels_out==2&&(b[v]=0)):(_[v]=d[0][y],f.channels_out==2&&(b[v]=d[1][y]),++y);for(m=0;m<f.mode_gr;m++)for(p=0;p<f.channels_out;p++)f.l3_side.tt[m][p].block_type=Y.SHORT_TYPE;o.mdct_sub48(f,_,b),ib(f.mf_size>=Y.BLKSIZE+u.framesize-Y.FFTOFFSET),ib(f.mf_size>=512+u.framesize-32)}}this.lame_encode_mp3_frame=function(u,d,f,p,m,v){var y,_=BP([2,2]);_[0][0]=new ou,_[0][1]=new ou,_[1][0]=new ou,_[1][1]=new ou;var b=BP([2,2]);b[0][0]=new ou,b[0][1]=new ou,b[1][0]=new ou,b[1][1]=new ou;var E,x=[null,null],A=u.internal_flags,I=o$e([2,4]),k=[.5,.5],O=[[0,0],[0,0]],M=[[0,0],[0,0]],T,P,R;if(x[0]=d,x[1]=f,A.lame_encode_frame_init==0&&c(u,x),A.padding=0,(A.slot_lag-=A.frac_SpF)<0&&(A.slot_lag+=u.out_samplerate,A.padding=1),A.psymodel!=0){var L,F=[null,null],B=0,z=a$e(2);for(R=0;R<A.mode_gr;R++){for(P=0;P<A.channels_out;P++)F[P]=x[P],B=576+R*576-Y.FFTOFFSET;if(u.VBR==nb.vbr_mtrh||u.VBR==nb.vbr_mt?L=i.L3psycho_anal_vbr(u,F,B,R,_,b,O[R],M[R],I[R],z):L=i.L3psycho_anal_ns(u,F,B,R,_,b,O[R],M[R],I[R],z),L!=0)return-4;for(u.mode==ai.JOINT_STEREO&&(k[R]=I[R][2]+I[R][3],k[R]>0&&(k[R]=I[R][3]/k[R])),P=0;P<A.channels_out;P++){var J=A.l3_side.tt[R][P];J.block_type=z[P],J.mixed_block_flag=0}}}else for(R=0;R<A.mode_gr;R++)for(P=0;P<A.channels_out;P++)A.l3_side.tt[R][P].block_type=Y.NORM_TYPE,A.l3_side.tt[R][P].mixed_block_flag=0,M[R][P]=O[R][P]=700;if(a(A),o.mdct_sub48(A,x[0],x[1]),A.mode_ext=Y.MPG_MD_LR_LR,u.force_ms)A.mode_ext=Y.MPG_MD_MS_LR;else if(u.mode==ai.JOINT_STEREO){var q=0,G=0;for(R=0;R<A.mode_gr;R++)for(P=0;P<A.channels_out;P++)q+=M[R][P],G+=O[R][P];if(q<=1*G){var S=A.l3_side.tt[0],V=A.l3_side.tt[A.mode_gr-1];S[0].block_type==S[1].block_type&&V[0].block_type==V[1].block_type&&(A.mode_ext=Y.MPG_MD_MS_LR)}}if(A.mode_ext==n?(E=b,T=M):(E=_,T=O),u.analysis&&A.pinfo!=null)for(R=0;R<A.mode_gr;R++)for(P=0;P<A.channels_out;P++)A.pinfo.ms_ratio[R]=A.ms_ratio[R],A.pinfo.ms_ener_ratio[R]=k[R],A.pinfo.blocktype[R][P]=A.l3_side.tt[R][P].block_type,A.pinfo.pe[R][P]=T[R][P],LP.arraycopy(A.l3_side.tt[R][P].xr,0,A.pinfo.xr[R][P],0,576),A.mode_ext==n&&(A.pinfo.ers[R][P]=A.pinfo.ers[R][P+2],LP.arraycopy(A.pinfo.energy[R][P+2],0,A.pinfo.energy[R][P],0,A.pinfo.energy[R][P].length));if(u.VBR==nb.vbr_off||u.VBR==nb.vbr_abr){var re,U;for(re=0;re<18;re++)A.nsPsy.pefirbuf[re]=A.nsPsy.pefirbuf[re+1];for(U=0,R=0;R<A.mode_gr;R++)for(P=0;P<A.channels_out;P++)U+=T[R][P];for(A.nsPsy.pefirbuf[18]=U,U=A.nsPsy.pefirbuf[9],re=0;re<9;re++)U+=(A.nsPsy.pefirbuf[re]+A.nsPsy.pefirbuf[18-re])*Y.fircoef[re];for(U=670*5*A.mode_gr*A.channels_out/U,R=0;R<A.mode_gr;R++)for(P=0;P<A.channels_out;P++)T[R][P]*=U}if(A.iteration_loop.iteration_loop(u,T,k,E),e.format_bitstream(u),y=e.copy_buffer(A,p,m,v,1),u.bWriteVbrTag&&s.addVbrFrame(u),u.analysis&&A.pinfo!=null){for(P=0;P<A.channels_out;P++){var Pe;for(Pe=0;Pe<t;Pe++)A.pinfo.pcmdata[P][Pe]=A.pinfo.pcmdata[P][Pe+u.framesize];for(Pe=t;Pe<1600;Pe++)A.pinfo.pcmdata[P][Pe]=x[P][Pe-t]}r.set_frame_pinfo(u,E)}return l(A),y}}var NP=St.Util,VP=St.new_float;function l$e(){var t=VP(Y.BLKSIZE),n=VP(Y.BLKSIZE_s/2),e=[.9238795325112867,.3826834323650898,.9951847266721969,.0980171403295606,.9996988186962042,.02454122852291229,.9999811752826011,.006135884649154475];function i(r,o,a){var l=0,c,u,d;a<<=1;var f=o+a;c=4;do{var p,m,v,y,_,b,E;E=c>>1,y=c,_=c<<1,b=_+y,c=_<<1,u=o,d=u+E;do{var x,A,I,k;A=r[u+0]-r[u+y],x=r[u+0]+r[u+y],k=r[u+_]-r[u+b],I=r[u+_]+r[u+b],r[u+_]=x-I,r[u+0]=x+I,r[u+b]=A-k,r[u+y]=A+k,A=r[d+0]-r[d+y],x=r[d+0]+r[d+y],k=NP.SQRT2*r[d+b],I=NP.SQRT2*r[d+_],r[d+_]=x-I,r[d+0]=x+I,r[d+b]=A-k,r[d+y]=A+k,d+=c,u+=c}while(u<f);for(m=e[l+0],p=e[l+1],v=1;v<E;v++){var O,M;O=1-2*p*p,M=2*p*m,u=o+v,d=o+y-v;do{var T,P,R,x,A,L,I,F,k,B;P=M*r[u+y]-O*r[d+y],T=O*r[u+y]+M*r[d+y],A=r[u+0]-T,x=r[u+0]+T,L=r[d+0]-P,R=r[d+0]+P,P=M*r[u+b]-O*r[d+b],T=O*r[u+b]+M*r[d+b],k=r[u+_]-T,I=r[u+_]+T,B=r[d+_]-P,F=r[d+_]+P,P=p*I-m*B,T=m*I+p*B,r[u+_]=x-T,r[u+0]=x+T,r[d+b]=L-P,r[d+y]=L+P,P=m*F-p*k,T=p*F+m*k,r[d+_]=R-T,r[d+0]=R+T,r[u+b]=A-P,r[u+y]=A+P,d+=c,u+=c}while(u<f);O=m,m=O*e[l+0]-p*e[l+1],p=O*e[l+1]+p*e[l+0]}l+=2}while(c<a)}var s=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254];this.fft_short=function(r,o,a,l,c){for(var u=0;u<3;u++){var d=Y.BLKSIZE_s/2,f=65535&576/3*(u+1),p=Y.BLKSIZE_s/8-1;do{var m,v,y,_,b,E=s[p<<2]&255;m=n[E]*l[a][c+E+f],b=n[127-E]*l[a][c+E+f+128],v=m-b,m=m+b,y=n[E+64]*l[a][c+E+f+64],b=n[63-E]*l[a][c+E+f+192],_=y-b,y=y+b,d-=4,o[u][d+0]=m+y,o[u][d+2]=m-y,o[u][d+1]=v+_,o[u][d+3]=v-_,m=n[E+1]*l[a][c+E+f+1],b=n[126-E]*l[a][c+E+f+129],v=m-b,m=m+b,y=n[E+65]*l[a][c+E+f+65],b=n[62-E]*l[a][c+E+f+193],_=y-b,y=y+b,o[u][d+Y.BLKSIZE_s/2+0]=m+y,o[u][d+Y.BLKSIZE_s/2+2]=m-y,o[u][d+Y.BLKSIZE_s/2+1]=v+_,o[u][d+Y.BLKSIZE_s/2+3]=v-_}while(--p>=0);i(o[u],d,Y.BLKSIZE_s/2)}},this.fft_long=function(r,o,a,l,c){var u=Y.BLKSIZE/8-1,d=Y.BLKSIZE/2;do{var f,p,m,v,y,_=s[u]&255;f=t[_]*l[a][c+_],y=t[_+512]*l[a][c+_+512],p=f-y,f=f+y,m=t[_+256]*l[a][c+_+256],y=t[_+768]*l[a][c+_+768],v=m-y,m=m+y,d-=4,o[d+0]=f+m,o[d+2]=f-m,o[d+1]=p+v,o[d+3]=p-v,f=t[_+1]*l[a][c+_+1],y=t[_+513]*l[a][c+_+513],p=f-y,f=f+y,m=t[_+257]*l[a][c+_+257],y=t[_+769]*l[a][c+_+769],v=m-y,m=m+y,o[d+Y.BLKSIZE/2+0]=f+m,o[d+Y.BLKSIZE/2+2]=f-m,o[d+Y.BLKSIZE/2+1]=p+v,o[d+Y.BLKSIZE/2+3]=p-v}while(--u>=0);i(o,d,Y.BLKSIZE/2)},this.init_fft=function(r){for(var o=0;o<Y.BLKSIZE;o++)t[o]=.42-.5*Math.cos(2*Math.PI*(o+.5)/Y.BLKSIZE)+.08*Math.cos(4*Math.PI*(o+.5)/Y.BLKSIZE);for(var o=0;o<Y.BLKSIZE_s/2;o++)n[o]=.5*(1-Math.cos(2*Math.PI*(o+.5)/Y.BLKSIZE_s))}}var ff=St.VbrMode,DP=St.Float,mf=St.ShortBlock,Fr=St.Util,c$e=St.Arrays,ws=St.new_float,qo=St.new_float_n,Ad=St.new_int,yn=St.assert;function E3(){var t=new l$e,n=2.302585092994046,e=2,i=16,s=2,r=16,o=.34,a=1/(14752*14752)/(Y.BLKSIZE/2),l=.01,c=.8,u=.6,d=.3,f=3.5,p=21,m=.2302585093;function v(W){return W}function y(W,K){for(var te=0,oe=0;oe<Y.BLKSIZE/2;++oe)te+=W[oe]*K.ATH.eql_w[oe];return te*=a,te}function _(W,K,te,oe,ue,ee,Ce,xe,ke,Ge,Te){var Ke=W.internal_flags;if(ke<2)t.fft_long(Ke,oe[ue],ke,Ge,Te),t.fft_short(Ke,ee[Ce],ke,Ge,Te);else if(ke==2){for(var Le=Y.BLKSIZE-1;Le>=0;--Le){var lt=oe[ue+0][Le],nt=oe[ue+1][Le];oe[ue+0][Le]=(lt+nt)*Fr.SQRT2*.5,oe[ue+1][Le]=(lt-nt)*Fr.SQRT2*.5}for(var Mt=2;Mt>=0;--Mt)for(var Le=Y.BLKSIZE_s-1;Le>=0;--Le){var lt=ee[Ce+0][Mt][Le],nt=ee[Ce+1][Mt][Le];ee[Ce+0][Mt][Le]=(lt+nt)*Fr.SQRT2*.5,ee[Ce+1][Mt][Le]=(lt-nt)*Fr.SQRT2*.5}}K[0]=oe[ue+0][0],K[0]*=K[0];for(var Le=Y.BLKSIZE/2-1;Le>=0;--Le){var $e=oe[ue+0][Y.BLKSIZE/2-Le],yt=oe[ue+0][Y.BLKSIZE/2+Le];K[Y.BLKSIZE/2-Le]=($e*$e+yt*yt)*.5}for(var Mt=2;Mt>=0;--Mt){te[Mt][0]=ee[Ce+0][Mt][0],te[Mt][0]*=te[Mt][0];for(var Le=Y.BLKSIZE_s/2-1;Le>=0;--Le){var $e=ee[Ce+0][Mt][Y.BLKSIZE_s/2-Le],yt=ee[Ce+0][Mt][Y.BLKSIZE_s/2+Le];te[Mt][Y.BLKSIZE_s/2-Le]=($e*$e+yt*yt)*.5}}{for(var qt=0,Le=11;Le<Y.HBLKSIZE;Le++)qt+=K[Le];Ke.tot_ener[ke]=qt}if(W.analysis){for(var Le=0;Le<Y.HBLKSIZE;Le++)Ke.pinfo.energy[xe][ke][Le]=Ke.pinfo.energy_save[ke][Le],Ke.pinfo.energy_save[ke][Le]=K[Le];Ke.pinfo.pe[xe][ke]=Ke.pe[ke]}W.athaa_loudapprox==2&&ke<2&&(Ke.loudness_sq[xe][ke]=Ke.loudness_sq_save[ke],Ke.loudness_sq_save[ke]=y(K,Ke))}var b=8,E=23,x=15,A,I,k,O=[1,.79433,.63096,.63096,.63096,.63096,.63096,.25119,.11749];function M(){A=Math.pow(10,(b+1)/16),I=Math.pow(10,(E+1)/16),k=Math.pow(10,x/10)}var T=[3.3246*3.3246,3.23837*3.23837,3.15437*3.15437,3.00412*3.00412,2.86103*2.86103,2.65407*2.65407,2.46209*2.46209,2.284*2.284,2.11879*2.11879,1.96552*1.96552,1.82335*1.82335,1.69146*1.69146,1.56911*1.56911,1.46658*1.46658,1.37074*1.37074,1.31036*1.31036,1.25264*1.25264,1.20648*1.20648,1.16203*1.16203,1.12765*1.12765,1.09428*1.09428,1.0659*1.0659,1.03826*1.03826,1.01895*1.01895,1],P=[1.33352*1.33352,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.30382*1.30382,1.22321*1.22321,1.14758*1.14758,1],R=[2.35364*2.35364,2.29259*2.29259,2.23313*2.23313,2.12675*2.12675,2.02545*2.02545,1.87894*1.87894,1.74303*1.74303,1.61695*1.61695,1.49999*1.49999,1.39148*1.39148,1.29083*1.29083,1.19746*1.19746,1.11084*1.11084,1.03826*1.03826];function L(W,K,te,oe,ue,ee){var Ce;if(K>W)if(K<W*I)Ce=K/W;else return W+K;else{if(W>=K*I)return W+K;Ce=W/K}if(W+=K,oe+3<=6){if(Ce>=A)return W;var xe=0|Fr.FAST_LOG10_X(Ce,16);return W*P[xe]}var xe=0|Fr.FAST_LOG10_X(Ce,16);if(K=ue.ATH.cb_l[te]*ue.ATH.adjust,W<k*K){if(W>K){var ke,Ge;return ke=1,xe<=13&&(ke=R[xe]),Ge=Fr.FAST_LOG10_X(W/K,10/15),W*((T[xe]-ke)*Ge+ke)}return xe>13?W:W*R[xe]}return W*T[xe]}var F=[1.33352*1.33352,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.30382*1.30382,1.22321*1.22321,1.14758*1.14758,1];function B(W,K,te){var oe;if(W<0&&(W=0),K<0&&(K=0),W<=0)return K;if(K<=0)return W;if(K>W?oe=K/W:oe=W/K,te>=-2&&te<=2){if(oe>=A)return W+K;var ue=0|Fr.FAST_LOG10_X(oe,16);return(W+K)*F[ue]}return oe<I?W+K:(W<K&&(W=K),W)}function z(W,K){var te=W.internal_flags;if(te.channels_out>1){for(var oe=0;oe<Y.SBMAX_l;oe++){var ue=te.thm[0].l[oe],ee=te.thm[1].l[oe];te.thm[0].l[oe]+=ee*K,te.thm[1].l[oe]+=ue*K}for(var oe=0;oe<Y.SBMAX_s;oe++)for(var Ce=0;Ce<3;Ce++){var ue=te.thm[0].s[oe][Ce],ee=te.thm[1].s[oe][Ce];te.thm[0].s[oe][Ce]+=ee*K,te.thm[1].s[oe][Ce]+=ue*K}}}function J(W){for(var K=0;K<Y.SBMAX_l;K++)if(!(W.thm[0].l[K]>1.58*W.thm[1].l[K]||W.thm[1].l[K]>1.58*W.thm[0].l[K])){var te=W.mld_l[K]*W.en[3].l[K],oe=Math.max(W.thm[2].l[K],Math.min(W.thm[3].l[K],te));te=W.mld_l[K]*W.en[2].l[K];var ue=Math.max(W.thm[3].l[K],Math.min(W.thm[2].l[K],te));W.thm[2].l[K]=oe,W.thm[3].l[K]=ue}for(var K=0;K<Y.SBMAX_s;K++)for(var ee=0;ee<3;ee++)if(!(W.thm[0].s[K][ee]>1.58*W.thm[1].s[K][ee]||W.thm[1].s[K][ee]>1.58*W.thm[0].s[K][ee])){var te=W.mld_s[K]*W.en[3].s[K][ee],oe=Math.max(W.thm[2].s[K][ee],Math.min(W.thm[3].s[K][ee],te));te=W.mld_s[K]*W.en[2].s[K][ee];var ue=Math.max(W.thm[3].s[K][ee],Math.min(W.thm[2].s[K][ee],te));W.thm[2].s[K][ee]=oe,W.thm[3].s[K][ee]=ue}}function q(W,K,te){var oe=K,ue=Math.pow(10,te);K*=2,oe*=2;for(var ee=0;ee<Y.SBMAX_l;ee++){var Ce,xe,ke,Ge;if(Ge=W.ATH.cb_l[W.bm_l[ee]]*ue,Ce=Math.min(Math.max(W.thm[0].l[ee],Ge),Math.max(W.thm[1].l[ee],Ge)),xe=Math.max(W.thm[2].l[ee],Ge),ke=Math.max(W.thm[3].l[ee],Ge),Ce*K<xe+ke){var Te=Ce*oe/(xe+ke);xe*=Te,ke*=Te}W.thm[2].l[ee]=Math.min(xe,W.thm[2].l[ee]),W.thm[3].l[ee]=Math.min(ke,W.thm[3].l[ee])}ue*=Y.BLKSIZE_s/Y.BLKSIZE;for(var ee=0;ee<Y.SBMAX_s;ee++)for(var Ke=0;Ke<3;Ke++){var Ce,xe,ke,Ge;if(Ge=W.ATH.cb_s[W.bm_s[ee]]*ue,Ce=Math.min(Math.max(W.thm[0].s[ee][Ke],Ge),Math.max(W.thm[1].s[ee][Ke],Ge)),xe=Math.max(W.thm[2].s[ee][Ke],Ge),ke=Math.max(W.thm[3].s[ee][Ke],Ge),Ce*K<xe+ke){var Te=Ce*K/(xe+ke);xe*=Te,ke*=Te}W.thm[2].s[ee][Ke]=Math.min(W.thm[2].s[ee][Ke],xe),W.thm[3].s[ee][Ke]=Math.min(W.thm[3].s[ee][Ke],ke)}}function G(W,K,te,oe,ue){var ee,Ce,xe=0,ke=0;for(ee=Ce=0;ee<Y.SBMAX_s;++Ce,++ee){for(var Ge=W.bo_s[ee],Te=W.npart_s,Ke=Ge<Te?Ge:Te;Ce<Ke;)yn(K[Ce]>=0),yn(te[Ce]>=0),xe+=K[Ce],ke+=te[Ce],Ce++;if(W.en[oe].s[ee][ue]=xe,W.thm[oe].s[ee][ue]=ke,Ce>=Te){++ee;break}yn(K[Ce]>=0),yn(te[Ce]>=0);{var Le=W.PSY.bo_s_weight[ee],lt=1-Le;xe=Le*K[Ce],ke=Le*te[Ce],W.en[oe].s[ee][ue]+=xe,W.thm[oe].s[ee][ue]+=ke,xe=lt*K[Ce],ke=lt*te[Ce]}}for(;ee<Y.SBMAX_s;++ee)W.en[oe].s[ee][ue]=0,W.thm[oe].s[ee][ue]=0}function S(W,K,te,oe){var ue,ee,Ce=0,xe=0;for(ue=ee=0;ue<Y.SBMAX_l;++ee,++ue){for(var ke=W.bo_l[ue],Ge=W.npart_l,Te=ke<Ge?ke:Ge;ee<Te;)yn(K[ee]>=0),yn(te[ee]>=0),Ce+=K[ee],xe+=te[ee],ee++;if(W.en[oe].l[ue]=Ce,W.thm[oe].l[ue]=xe,ee>=Ge){++ue;break}yn(K[ee]>=0),yn(te[ee]>=0);{var Ke=W.PSY.bo_l_weight[ue],Le=1-Ke;Ce=Ke*K[ee],xe=Ke*te[ee],W.en[oe].l[ue]+=Ce,W.thm[oe].l[ue]+=xe,Ce=Le*K[ee],xe=Le*te[ee]}}for(;ue<Y.SBMAX_l;++ue)W.en[oe].l[ue]=0,W.thm[oe].l[ue]=0}function V(W,K,te,oe,ue,ee){var Ce=W.internal_flags,xe,ke;for(ke=xe=0;ke<Ce.npart_s;++ke){for(var Ge=0,Te=Ce.numlines_s[ke],Ke=0;Ke<Te;++Ke,++xe){var Le=K[ee][xe];Ge+=Le}te[ke]=Ge}for(yn(ke==Ce.npart_s),xe=ke=0;ke<Ce.npart_s;ke++){var lt=Ce.s3ind_s[ke][0],nt=Ce.s3_ss[xe++]*te[lt];for(++lt;lt<=Ce.s3ind_s[ke][1];)nt+=Ce.s3_ss[xe]*te[lt],++xe,++lt;{var Mt=s*Ce.nb_s1[ue][ke];oe[ke]=Math.min(nt,Mt)}if(Ce.blocktype_old[ue&1]==Y.SHORT_TYPE){var Mt=r*Ce.nb_s2[ue][ke],$e=oe[ke];oe[ke]=Math.min(Mt,$e)}Ce.nb_s2[ue][ke]=Ce.nb_s1[ue][ke],Ce.nb_s1[ue][ke]=nt,yn(oe[ke]>=0)}for(;ke<=Y.CBANDS;++ke)te[ke]=0,oe[ke]=0}function re(W,K,te,oe){var ue=W.internal_flags;W.short_blocks==mf.short_block_coupled&&!(K[0]!=0&&K[1]!=0)&&(K[0]=K[1]=0);for(var ee=0;ee<ue.channels_out;ee++)oe[ee]=Y.NORM_TYPE,W.short_blocks==mf.short_block_dispensed&&(K[ee]=1),W.short_blocks==mf.short_block_forced&&(K[ee]=0),K[ee]!=0?(yn(ue.blocktype_old[ee]!=Y.START_TYPE),ue.blocktype_old[ee]==Y.SHORT_TYPE&&(oe[ee]=Y.STOP_TYPE)):(oe[ee]=Y.SHORT_TYPE,ue.blocktype_old[ee]==Y.NORM_TYPE&&(ue.blocktype_old[ee]=Y.START_TYPE),ue.blocktype_old[ee]==Y.STOP_TYPE&&(ue.blocktype_old[ee]=Y.SHORT_TYPE)),te[ee]=ue.blocktype_old[ee],ue.blocktype_old[ee]=oe[ee]}function U(W,K,te){return te>=1?W:te<=0?K:K>0?Math.pow(W/K,te)*K:0}var Pe=[11.8,13.6,17.2,32,46.5,51.3,57.5,67.1,71.5,84.6,97.6,130];function Fe(W,K){for(var te=309.07,oe=0;oe<Y.SBMAX_s-1;oe++)for(var ue=0;ue<3;ue++){var ee=W.thm.s[oe][ue];if(ee>0){var Ce=ee*K,xe=W.en.s[oe][ue];xe>Ce&&(xe>Ce*1e10?te+=Pe[oe]*(10*n):te+=Pe[oe]*Fr.FAST_LOG10(xe/Ce))}}return te}var Ne=[6.8,5.8,5.8,6.4,6.5,9.9,12.1,14.4,15,18.9,21.6,26.9,34.2,40.2,46.8,56.5,60.7,73.9,85.7,93.4,126.1];function ne(W,K){for(var te=281.0575,oe=0;oe<Y.SBMAX_l-1;oe++){var ue=W.thm.l[oe];if(ue>0){var ee=ue*K,Ce=W.en.l[oe];Ce>ee&&(Ce>ee*1e10?te+=Ne[oe]*(10*n):te+=Ne[oe]*Fr.FAST_LOG10(Ce/ee))}}return te}function me(W,K,te,oe,ue){var ee,Ce;for(ee=Ce=0;ee<W.npart_l;++ee){var xe=0,ke=0,Ge;for(Ge=0;Ge<W.numlines_l[ee];++Ge,++Ce){var Te=K[Ce];xe+=Te,ke<Te&&(ke=Te)}te[ee]=xe,oe[ee]=ke,ue[ee]=xe*W.rnumlines_l[ee],yn(W.rnumlines_l[ee]>=0),yn(te[ee]>=0),yn(oe[ee]>=0),yn(ue[ee]>=0)}}function pe(W,K,te,oe){var ue=O.length-1,ee=0,Ce=te[ee]+te[ee+1];if(Ce>0){var xe=K[ee];xe<K[ee+1]&&(xe=K[ee+1]),yn(W.numlines_l[ee]+W.numlines_l[ee+1]-1>0),Ce=20*(xe*2-Ce)/(Ce*(W.numlines_l[ee]+W.numlines_l[ee+1]-1));var ke=0|Ce;ke>ue&&(ke=ue),oe[ee]=ke}else oe[ee]=0;for(ee=1;ee<W.npart_l-1;ee++)if(Ce=te[ee-1]+te[ee]+te[ee+1],Ce>0){var xe=K[ee-1];xe<K[ee]&&(xe=K[ee]),xe<K[ee+1]&&(xe=K[ee+1]),yn(W.numlines_l[ee-1]+W.numlines_l[ee]+W.numlines_l[ee+1]-1>0),Ce=20*(xe*3-Ce)/(Ce*(W.numlines_l[ee-1]+W.numlines_l[ee]+W.numlines_l[ee+1]-1));var ke=0|Ce;ke>ue&&(ke=ue),oe[ee]=ke}else oe[ee]=0;if(yn(ee==W.npart_l-1),Ce=te[ee-1]+te[ee],Ce>0){var xe=K[ee-1];xe<K[ee]&&(xe=K[ee]),yn(W.numlines_l[ee-1]+W.numlines_l[ee]-1>0),Ce=20*(xe*2-Ce)/(Ce*(W.numlines_l[ee-1]+W.numlines_l[ee]-1));var ke=0|Ce;ke>ue&&(ke=ue),oe[ee]=ke}else oe[ee]=0;yn(ee==W.npart_l-1)}var ge=[-865163e-23*2,-.00851586*2,-674764e-23*2,.0209036*2,-336639e-22*2,-.0438162*2,-154175e-22*2,.0931738*2,-552212e-22*2,-.313819*2];this.L3psycho_anal_ns=function(W,K,te,oe,ue,ee,Ce,xe,ke,Ge){var Te=W.internal_flags,Ke=qo([2,Y.BLKSIZE]),Le=qo([2,3,Y.BLKSIZE_s]),lt=ws(Y.CBANDS+1),nt=ws(Y.CBANDS+1),Mt=ws(Y.CBANDS+2),$e=Ad(2),yt=Ad(2),qt,ct,Pt,st,zt,ni,Ct,Jt,Me=qo([2,576]),ht,Qt=Ad(Y.CBANDS+2),nn=Ad(Y.CBANDS+2);for(c$e.fill(nn,0),qt=Te.channels_out,W.mode==ai.JOINT_STEREO&&(qt=4),W.VBR==ff.vbr_off?ht=Te.ResvMax==0?0:Te.ResvSize/Te.ResvMax*.5:W.VBR==ff.vbr_rh||W.VBR==ff.vbr_mtrh||W.VBR==ff.vbr_mt?ht=.6:ht=1,ct=0;ct<Te.channels_out;ct++){var Bn=K[ct],Vi=te+576-350-p+192;for(st=0;st<576;st++){var ss,Ot;for(ss=Bn[Vi+st+10],Ot=0,zt=0;zt<(p-1)/2-1;zt+=2)ss+=ge[zt]*(Bn[Vi+st+zt]+Bn[Vi+st+p-zt]),Ot+=ge[zt+1]*(Bn[Vi+st+zt+1]+Bn[Vi+st+p-zt-1]);Me[ct][st]=ss+Ot}ue[oe][ct].en.assign(Te.en[ct]),ue[oe][ct].thm.assign(Te.thm[ct]),qt>2&&(ee[oe][ct].en.assign(Te.en[ct+2]),ee[oe][ct].thm.assign(Te.thm[ct+2]))}for(ct=0;ct<qt;ct++){var we,vt,Lt=ws(12),En=[0,0,0,0],ji=ws(12),Di=1,As,gr=ws(Y.CBANDS),Ga=ws(Y.CBANDS),_n=[0,0,0,0],Vc=ws(Y.HBLKSIZE),Dc=qo([3,Y.HBLKSIZE_s]);for(yn(Te.npart_s<=Y.CBANDS),yn(Te.npart_l<=Y.CBANDS),st=0;st<3;st++)Lt[st]=Te.nsPsy.last_en_subshort[ct][st+6],yn(Te.nsPsy.last_en_subshort[ct][st+4]>0),ji[st]=Lt[st]/Te.nsPsy.last_en_subshort[ct][st+4],En[0]+=Lt[st];if(ct==2)for(st=0;st<576;st++){var Hm,Um;Hm=Me[0][st],Um=Me[1][st],Me[0][st]=Hm+Um,Me[1][st]=Hm-Um}{var l0=Me[ct&1],ed=0;for(st=0;st<9;st++){for(var c0=ed+64,us=1;ed<c0;ed++)us<Math.abs(l0[ed])&&(us=Math.abs(l0[ed]));Te.nsPsy.last_en_subshort[ct][st]=Lt[st+3]=us,En[1+st/3]+=us,us>Lt[st+3-2]?(yn(Lt[st+3-2]>0),us=us/Lt[st+3-2]):Lt[st+3-2]>us*10?us=Lt[st+3-2]/(us*10):us=0,ji[st+3]=us}}if(W.analysis){var $h=ji[0];for(st=1;st<12;st++)$h<ji[st]&&($h=ji[st]);Te.pinfo.ers[oe][ct]=Te.pinfo.ers_save[ct],Te.pinfo.ers_save[ct]=$h}for(As=ct==3?Te.nsPsy.attackthre_s:Te.nsPsy.attackthre,st=0;st<12;st++)_n[st/3]==0&&ji[st]>As&&(_n[st/3]=st%3+1);for(st=1;st<4;st++){var td;En[st-1]>En[st]?(yn(En[st]>0),td=En[st-1]/En[st]):(yn(En[st-1]>0),td=En[st]/En[st-1]),td<1.7&&(_n[st]=0,st==1&&(_n[0]=0))}for(_n[0]!=0&&Te.nsPsy.lastAttacks[ct]!=0&&(_n[0]=0),(Te.nsPsy.lastAttacks[ct]==3||_n[0]+_n[1]+_n[2]+_n[3]!=0)&&(Di=0,_n[1]!=0&&_n[0]!=0&&(_n[1]=0),_n[2]!=0&&_n[1]!=0&&(_n[2]=0),_n[3]!=0&&_n[2]!=0&&(_n[3]=0)),ct<2?yt[ct]=Di:Di==0&&(yt[0]=yt[1]=0),ke[ct]=Te.tot_ener[ct],vt=Le,we=Ke,_(W,Vc,Dc,we,ct&1,vt,ct&1,oe,ct,K,te),me(Te,Vc,lt,gr,Ga),pe(Te,gr,Ga,Qt),Jt=0;Jt<3;Jt++){var Wm,Ws;for(V(W,Dc,nt,Mt,ct,Jt),G(Te,nt,Mt,ct,Jt),Ct=0;Ct<Y.SBMAX_s;Ct++){if(Ws=Te.thm[ct].s[Ct][Jt],Ws*=c,_n[Jt]>=2||_n[Jt+1]==1){var Ya=Jt!=0?Jt-1:2,us=U(Te.thm[ct].s[Ct][Ya],Ws,u*ht);Ws=Math.min(Ws,us)}if(_n[Jt]==1){var Ya=Jt!=0?Jt-1:2,us=U(Te.thm[ct].s[Ct][Ya],Ws,d*ht);Ws=Math.min(Ws,us)}else if(Jt!=0&&_n[Jt-1]==3||Jt==0&&Te.nsPsy.lastAttacks[ct]==3){var Ya=Jt!=2?Jt+1:0,us=U(Te.thm[ct].s[Ct][Ya],Ws,d*ht);Ws=Math.min(Ws,us)}Wm=Lt[Jt*3+3]+Lt[Jt*3+4]+Lt[Jt*3+5],Lt[Jt*3+5]*6<Wm&&(Ws*=.5,Lt[Jt*3+4]*6<Wm&&(Ws*=.5)),Te.thm[ct].s[Ct][Jt]=Ws}}for(Te.nsPsy.lastAttacks[ct]=_n[2],ni=0,Pt=0;Pt<Te.npart_l;Pt++){for(var Za=Te.s3ind[Pt][0],jm=lt[Za]*O[Qt[Za]],Xa=Te.s3_ll[ni++]*jm;++Za<=Te.s3ind[Pt][1];)jm=lt[Za]*O[Qt[Za]],Xa=L(Xa,Te.s3_ll[ni++]*jm,Za,Za-Pt,Te);Xa*=.158489319246111,Te.blocktype_old[ct&1]==Y.SHORT_TYPE?Mt[Pt]=Xa:Mt[Pt]=U(Math.min(Xa,Math.min(e*Te.nb_1[ct][Pt],i*Te.nb_2[ct][Pt])),Xa,ht),Te.nb_2[ct][Pt]=Te.nb_1[ct][Pt],Te.nb_1[ct][Pt]=Xa}for(;Pt<=Y.CBANDS;++Pt)lt[Pt]=0,Mt[Pt]=0;S(Te,lt,Mt,ct)}if((W.mode==ai.STEREO||W.mode==ai.JOINT_STEREO)&&W.interChRatio>0&&z(W,W.interChRatio),W.mode==ai.JOINT_STEREO){var zh;J(Te),zh=W.msfix,Math.abs(zh)>0&&q(Te,zh,W.ATHlower*Te.ATH.adjust)}for(re(W,yt,Ge,$e),ct=0;ct<qt;ct++){var Pl,nd=0,id,$c;ct>1?(Pl=xe,nd=-2,id=Y.NORM_TYPE,(Ge[0]==Y.SHORT_TYPE||Ge[1]==Y.SHORT_TYPE)&&(id=Y.SHORT_TYPE),$c=ee[oe][ct-2]):(Pl=Ce,nd=0,id=Ge[ct],$c=ue[oe][ct]),id==Y.SHORT_TYPE?Pl[nd+ct]=Fe($c,Te.masking_lower):Pl[nd+ct]=ne($c,Te.masking_lower),W.analysis&&(Te.pinfo.pe[oe][ct]=Pl[nd+ct])}return 0};function rt(W,K,te,oe,ue,ee,Ce,xe){var ke=W.internal_flags;if(oe<2)t.fft_long(ke,Ce[xe],oe,K,te);else if(oe==2)for(var Ge=Y.BLKSIZE-1;Ge>=0;--Ge){var Te=Ce[xe+0][Ge],Ke=Ce[xe+1][Ge];Ce[xe+0][Ge]=(Te+Ke)*Fr.SQRT2*.5,Ce[xe+1][Ge]=(Te-Ke)*Fr.SQRT2*.5}ee[0]=Ce[xe+0][0],ee[0]*=ee[0];for(var Ge=Y.BLKSIZE/2-1;Ge>=0;--Ge){var Le=Ce[xe+0][Y.BLKSIZE/2-Ge],lt=Ce[xe+0][Y.BLKSIZE/2+Ge];ee[Y.BLKSIZE/2-Ge]=(Le*Le+lt*lt)*.5}{for(var nt=0,Ge=11;Ge<Y.HBLKSIZE;Ge++)nt+=ee[Ge];ke.tot_ener[oe]=nt}if(W.analysis){for(var Ge=0;Ge<Y.HBLKSIZE;Ge++)ke.pinfo.energy[ue][oe][Ge]=ke.pinfo.energy_save[oe][Ge],ke.pinfo.energy_save[oe][Ge]=ee[Ge];ke.pinfo.pe[ue][oe]=ke.pe[oe]}}function wt(W,K,te,oe,ue,ee,Ce,xe){var ke=W.internal_flags;if(ue==0&&oe<2&&t.fft_short(ke,Ce[xe],oe,K,te),oe==2)for(var Ge=Y.BLKSIZE_s-1;Ge>=0;--Ge){var Te=Ce[xe+0][ue][Ge],Ke=Ce[xe+1][ue][Ge];Ce[xe+0][ue][Ge]=(Te+Ke)*Fr.SQRT2*.5,Ce[xe+1][ue][Ge]=(Te-Ke)*Fr.SQRT2*.5}ee[ue][0]=Ce[xe+0][ue][0],ee[ue][0]*=ee[ue][0];for(var Ge=Y.BLKSIZE_s/2-1;Ge>=0;--Ge){var Le=Ce[xe+0][ue][Y.BLKSIZE_s/2-Ge],lt=Ce[xe+0][ue][Y.BLKSIZE_s/2+Ge];ee[ue][Y.BLKSIZE_s/2-Ge]=(Le*Le+lt*lt)*.5}}function D(W,K,te,oe){var ue=W.internal_flags;W.athaa_loudapprox==2&&te<2&&(ue.loudness_sq[K][te]=ue.loudness_sq_save[te],ue.loudness_sq_save[te]=y(oe,ue))}var $=[-865163e-23*2,-.00851586*2,-674764e-23*2,.0209036*2,-336639e-22*2,-.0438162*2,-154175e-22*2,.0931738*2,-552212e-22*2,-.313819*2];function X(W,K,te,oe,ue,ee,Ce,xe,ke,Ge){for(var Te=qo([2,576]),Ke=W.internal_flags,Le=Ke.channels_out,lt=W.mode==ai.JOINT_STEREO?4:Le,nt=0;nt<Le;nt++){firbuf=K[nt];for(var Mt=te+576-350-p+192,$e=0;$e<576;$e++){var yt,qt;yt=firbuf[Mt+$e+10],qt=0;for(var ct=0;ct<(p-1)/2-1;ct+=2)yt+=$[ct]*(firbuf[Mt+$e+ct]+firbuf[Mt+$e+p-ct]),qt+=$[ct+1]*(firbuf[Mt+$e+ct+1]+firbuf[Mt+$e+p-ct-1]);Te[nt][$e]=yt+qt}ue[oe][nt].en.assign(Ke.en[nt]),ue[oe][nt].thm.assign(Ke.thm[nt]),lt>2&&(ee[oe][nt].en.assign(Ke.en[nt+2]),ee[oe][nt].thm.assign(Ke.thm[nt+2]))}for(var nt=0;nt<lt;nt++){var Pt=ws(12),st=ws(12),zt=[0,0,0,0],ni=Te[nt&1],Ct=0,Jt=nt==3?Ke.nsPsy.attackthre_s:Ke.nsPsy.attackthre,Me=1;if(nt==2)for(var $e=0,ct=576;ct>0;++$e,--ct){var ht=Te[0][$e],Qt=Te[1][$e];Te[0][$e]=ht+Qt,Te[1][$e]=ht-Qt}for(var $e=0;$e<3;$e++)st[$e]=Ke.nsPsy.last_en_subshort[nt][$e+6],yn(Ke.nsPsy.last_en_subshort[nt][$e+4]>0),Pt[$e]=st[$e]/Ke.nsPsy.last_en_subshort[nt][$e+4],zt[0]+=st[$e];for(var $e=0;$e<9;$e++){for(var nn=Ct+64,Bn=1;Ct<nn;Ct++)Bn<Math.abs(ni[Ct])&&(Bn=Math.abs(ni[Ct]));Ke.nsPsy.last_en_subshort[nt][$e]=st[$e+3]=Bn,zt[1+$e/3]+=Bn,Bn>st[$e+3-2]?(yn(st[$e+3-2]>0),Bn=Bn/st[$e+3-2]):st[$e+3-2]>Bn*10?Bn=st[$e+3-2]/(Bn*10):Bn=0,Pt[$e+3]=Bn}for(var $e=0;$e<3;++$e){var Vi=st[$e*3+3]+st[$e*3+4]+st[$e*3+5],ss=1;st[$e*3+5]*6<Vi&&(ss*=.5,st[$e*3+4]*6<Vi&&(ss*=.5)),xe[nt][$e]=ss}if(W.analysis){for(var Ot=Pt[0],$e=1;$e<12;$e++)Ot<Pt[$e]&&(Ot=Pt[$e]);Ke.pinfo.ers[oe][nt]=Ke.pinfo.ers_save[nt],Ke.pinfo.ers_save[nt]=Ot}for(var $e=0;$e<12;$e++)ke[nt][$e/3]==0&&Pt[$e]>Jt&&(ke[nt][$e/3]=$e%3+1);for(var $e=1;$e<4;$e++){var we=zt[$e-1],vt=zt[$e],Lt=Math.max(we,vt);Lt<4e4&&we<1.7*vt&&vt<1.7*we&&($e==1&&ke[nt][0]<=ke[nt][$e]&&(ke[nt][0]=0),ke[nt][$e]=0)}ke[nt][0]<=Ke.nsPsy.lastAttacks[nt]&&(ke[nt][0]=0),(Ke.nsPsy.lastAttacks[nt]==3||ke[nt][0]+ke[nt][1]+ke[nt][2]+ke[nt][3]!=0)&&(Me=0,ke[nt][1]!=0&&ke[nt][0]!=0&&(ke[nt][1]=0),ke[nt][2]!=0&&ke[nt][1]!=0&&(ke[nt][2]=0),ke[nt][3]!=0&&ke[nt][2]!=0&&(ke[nt][3]=0)),nt<2?Ge[nt]=Me:Me==0&&(Ge[0]=Ge[1]=0),Ce[nt]=Ke.tot_ener[nt]}}function le(W,K,te){if(te==0)for(var oe=0;oe<W.npart_s;oe++)W.nb_s2[K][oe]=W.nb_s1[K][oe],W.nb_s1[K][oe]=0}function ie(W,K){for(var te=0;te<W.npart_l;te++)W.nb_2[K][te]=W.nb_1[K][te],W.nb_1[K][te]=0}function be(W,K,te,oe){var ue=O.length-1,ee=0,Ce=te[ee]+te[ee+1];if(Ce>0){var xe=K[ee];xe<K[ee+1]&&(xe=K[ee+1]),yn(W.numlines_s[ee]+W.numlines_s[ee+1]-1>0),Ce=20*(xe*2-Ce)/(Ce*(W.numlines_s[ee]+W.numlines_s[ee+1]-1));var ke=0|Ce;ke>ue&&(ke=ue),oe[ee]=ke}else oe[ee]=0;for(ee=1;ee<W.npart_s-1;ee++)if(Ce=te[ee-1]+te[ee]+te[ee+1],yn(ee+1<W.npart_s),Ce>0){var xe=K[ee-1];xe<K[ee]&&(xe=K[ee]),xe<K[ee+1]&&(xe=K[ee+1]),yn(W.numlines_s[ee-1]+W.numlines_s[ee]+W.numlines_s[ee+1]-1>0),Ce=20*(xe*3-Ce)/(Ce*(W.numlines_s[ee-1]+W.numlines_s[ee]+W.numlines_s[ee+1]-1));var ke=0|Ce;ke>ue&&(ke=ue),oe[ee]=ke}else oe[ee]=0;if(yn(ee==W.npart_s-1),Ce=te[ee-1]+te[ee],Ce>0){var xe=K[ee-1];xe<K[ee]&&(xe=K[ee]),yn(W.numlines_s[ee-1]+W.numlines_s[ee]-1>0),Ce=20*(xe*2-Ce)/(Ce*(W.numlines_s[ee-1]+W.numlines_s[ee]-1));var ke=0|Ce;ke>ue&&(ke=ue),oe[ee]=ke}else oe[ee]=0;yn(ee==W.npart_s-1)}function Ae(W,K,te,oe,ue,ee){var Ce=W.internal_flags,xe=new float[Y.CBANDS],ke=ws(Y.CBANDS),Ge,Te,Ke,Le=new int[Y.CBANDS];for(Ke=Te=0;Ke<Ce.npart_s;++Ke){var lt=0,nt=0,Mt=Ce.numlines_s[Ke];for(Ge=0;Ge<Mt;++Ge,++Te){var $e=K[ee][Te];lt+=$e,nt<$e&&(nt=$e)}te[Ke]=lt,xe[Ke]=nt,ke[Ke]=lt/Mt,yn(ke[Ke]>=0)}for(yn(Ke==Ce.npart_s);Ke<Y.CBANDS;++Ke)xe[Ke]=0,ke[Ke]=0;for(be(Ce,xe,ke,Le),Te=Ke=0;Ke<Ce.npart_s;Ke++){var yt=Ce.s3ind_s[Ke][0],qt=Ce.s3ind_s[Ke][1],ct,Pt,st,zt,ni;for(ct=Le[yt],Pt=1,zt=Ce.s3_ss[Te]*te[yt]*O[Le[yt]],++Te,++yt;yt<=qt;)ct+=Le[yt],Pt+=1,st=Ce.s3_ss[Te]*te[yt]*O[Le[yt]],zt=B(zt,st,yt-Ke),++Te,++yt;ct=(1+2*ct)/(2*Pt),ni=O[ct]*.5,zt*=ni,oe[Ke]=zt,Ce.nb_s2[ue][Ke]=Ce.nb_s1[ue][Ke],Ce.nb_s1[ue][Ke]=zt,st=xe[Ke],st*=Ce.minval_s[Ke],st*=ni,oe[Ke]>st&&(oe[Ke]=st),Ce.masking_lower>1&&(oe[Ke]*=Ce.masking_lower),oe[Ke]>te[Ke]&&(oe[Ke]=te[Ke]),Ce.masking_lower<1&&(oe[Ke]*=Ce.masking_lower),yn(oe[Ke]>=0)}for(;Ke<Y.CBANDS;++Ke)te[Ke]=0,oe[Ke]=0}function _e(W,K,te,oe,ue){var ee=ws(Y.CBANDS),Ce=ws(Y.CBANDS),xe=Ad(Y.CBANDS+2),ke;me(W,K,te,ee,Ce),pe(W,ee,Ce,xe);var Ge=0;for(ke=0;ke<W.npart_l;ke++){var Te,Ke,Le,lt,nt=W.s3ind[ke][0],Mt=W.s3ind[ke][1],$e=0,yt=0;for($e=xe[nt],yt+=1,Ke=W.s3_ll[Ge]*te[nt]*O[xe[nt]],++Ge,++nt;nt<=Mt;)$e+=xe[nt],yt+=1,Te=W.s3_ll[Ge]*te[nt]*O[xe[nt]],lt=B(Ke,Te,nt-ke),Ke=lt,++Ge,++nt;if($e=(1+2*$e)/(2*yt),Le=O[$e]*.5,Ke*=Le,W.blocktype_old[ue&1]==Y.SHORT_TYPE){var qt=e*W.nb_1[ue][ke];qt>0?oe[ke]=Math.min(Ke,qt):oe[ke]=Math.min(Ke,te[ke]*d)}else{var ct=i*W.nb_2[ue][ke],Pt=e*W.nb_1[ue][ke],qt;ct<=0&&(ct=Ke),Pt<=0&&(Pt=Ke),W.blocktype_old[ue&1]==Y.NORM_TYPE?qt=Math.min(Pt,ct):qt=Pt,oe[ke]=Math.min(Ke,qt)}W.nb_2[ue][ke]=W.nb_1[ue][ke],W.nb_1[ue][ke]=Ke,Te=ee[ke],Te*=W.minval_l[ke],Te*=Le,oe[ke]>Te&&(oe[ke]=Te),W.masking_lower>1&&(oe[ke]*=W.masking_lower),oe[ke]>te[ke]&&(oe[ke]=te[ke]),W.masking_lower<1&&(oe[ke]*=W.masking_lower),yn(oe[ke]>=0)}for(;ke<Y.CBANDS;++ke)te[ke]=0,oe[ke]=0}function Ee(W,K){var te=W.internal_flags;W.short_blocks==mf.short_block_coupled&&!(K[0]!=0&&K[1]!=0)&&(K[0]=K[1]=0);for(var oe=0;oe<te.channels_out;oe++)W.short_blocks==mf.short_block_dispensed&&(K[oe]=1),W.short_blocks==mf.short_block_forced&&(K[oe]=0)}function he(W,K,te){for(var oe=W.internal_flags,ue=0;ue<oe.channels_out;ue++){var ee=Y.NORM_TYPE;K[ue]!=0?(yn(oe.blocktype_old[ue]!=Y.START_TYPE),oe.blocktype_old[ue]==Y.SHORT_TYPE&&(ee=Y.STOP_TYPE)):(ee=Y.SHORT_TYPE,oe.blocktype_old[ue]==Y.NORM_TYPE&&(oe.blocktype_old[ue]=Y.START_TYPE),oe.blocktype_old[ue]==Y.STOP_TYPE&&(oe.blocktype_old[ue]=Y.SHORT_TYPE)),te[ue]=oe.blocktype_old[ue],oe.blocktype_old[ue]=ee}}function He(W,K,te,oe,ue,ee,Ce){for(var xe=ee*2,ke=ee>0?Math.pow(10,ue):1,Ge,Te,Ke=0;Ke<Ce;++Ke){var Le=W[2][Ke],lt=W[3][Ke],nt=K[0][Ke],Mt=K[1][Ke],$e=K[2][Ke],yt=K[3][Ke];if(nt<=1.58*Mt&&Mt<=1.58*nt){var qt=te[Ke]*lt,ct=te[Ke]*Le;Te=Math.max($e,Math.min(yt,qt)),Ge=Math.max(yt,Math.min($e,ct))}else Te=$e,Ge=yt;if(ee>0){var Pt,st,zt=oe[Ke]*ke;if(Pt=Math.min(Math.max(nt,zt),Math.max(Mt,zt)),$e=Math.max(Te,zt),yt=Math.max(Ge,zt),st=$e+yt,st>0&&Pt*xe<st){var ni=Pt*xe/st;$e*=ni,yt*=ni}Te=Math.min($e,Te),Ge=Math.min(yt,Ge)}Te>Le&&(Te=Le),Ge>lt&&(Ge=lt),K[2][Ke]=Te,K[3][Ke]=Ge}}this.L3psycho_anal_vbr=function(W,K,te,oe,ue,ee,Ce,xe,ke,Ge){var Te=W.internal_flags,Ke,Le,lt=ws(Y.HBLKSIZE),nt=qo([3,Y.HBLKSIZE_s]),Mt=qo([2,Y.BLKSIZE]),$e=qo([2,3,Y.BLKSIZE_s]),yt=qo([4,Y.CBANDS]),qt=qo([4,Y.CBANDS]),ct=qo([4,3]),Pt=.6,st=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],zt=Ad(2),ni=W.mode==ai.JOINT_STEREO?4:Te.channels_out;X(W,K,te,oe,ue,ee,ke,ct,st,zt),Ee(W,zt);{for(var Ct=0;Ct<ni;Ct++){var Jt=Ct&1;Ke=Mt,rt(W,K,te,Ct,oe,lt,Ke,Jt),D(W,oe,Ct,lt),zt[Jt]!=0?_e(Te,lt,yt[Ct],qt[Ct],Ct):ie(Te,Ct)}zt[0]+zt[1]==2&&W.mode==ai.JOINT_STEREO&&He(yt,qt,Te.mld_cb_l,Te.ATH.cb_l,W.ATHlower*Te.ATH.adjust,W.msfix,Te.npart_l);for(var Ct=0;Ct<ni;Ct++){var Jt=Ct&1;zt[Jt]!=0&&S(Te,yt[Ct],qt[Ct],Ct)}}{for(var Me=0;Me<3;Me++){for(var Ct=0;Ct<ni;++Ct){var Jt=Ct&1;zt[Jt]!=0?le(Te,Ct,Me):(Le=$e,wt(W,K,te,Ct,Me,nt,Le,Jt),Ae(W,nt,yt[Ct],qt[Ct],Ct,Me))}zt[0]+zt[1]==0&&W.mode==ai.JOINT_STEREO&&He(yt,qt,Te.mld_cb_s,Te.ATH.cb_s,W.ATHlower*Te.ATH.adjust,W.msfix,Te.npart_s);for(var Ct=0;Ct<ni;++Ct){var Jt=Ct&1;zt[Jt]==0&&G(Te,yt[Ct],qt[Ct],Ct,Me)}}for(var Ct=0;Ct<ni;Ct++){var Jt=Ct&1;if(zt[Jt]==0)for(var ht=0;ht<Y.SBMAX_s;ht++){for(var Qt=ws(3),Me=0;Me<3;Me++){var nn=Te.thm[Ct].s[ht][Me];if(nn*=c,st[Ct][Me]>=2||st[Ct][Me+1]==1){var Bn=Me!=0?Me-1:2,Vi=U(Te.thm[Ct].s[ht][Bn],nn,u*Pt);nn=Math.min(nn,Vi)}else if(st[Ct][Me]==1){var Bn=Me!=0?Me-1:2,Vi=U(Te.thm[Ct].s[ht][Bn],nn,d*Pt);nn=Math.min(nn,Vi)}else if(Me!=0&&st[Ct][Me-1]==3||Me==0&&Te.nsPsy.lastAttacks[Ct]==3){var Bn=Me!=2?Me+1:0,Vi=U(Te.thm[Ct].s[ht][Bn],nn,d*Pt);nn=Math.min(nn,Vi)}nn*=ct[Ct][Me],Qt[Me]=nn}for(var Me=0;Me<3;Me++)Te.thm[Ct].s[ht][Me]=Qt[Me]}}}for(var Ct=0;Ct<ni;Ct++)Te.nsPsy.lastAttacks[Ct]=st[Ct][2];he(W,zt,Ge);for(var Ct=0;Ct<ni;Ct++){var ss,Ot,we,vt;Ct>1?(ss=xe,Ot=-2,we=Y.NORM_TYPE,(Ge[0]==Y.SHORT_TYPE||Ge[1]==Y.SHORT_TYPE)&&(we=Y.SHORT_TYPE),vt=ee[oe][Ct-2]):(ss=Ce,Ot=0,we=Ge[Ct],vt=ue[oe][Ct]),we==Y.SHORT_TYPE?ss[Ot+Ct]=Fe(vt,Te.masking_lower):ss[Ot+Ct]=ne(vt,Te.masking_lower),W.analysis&&(Te.pinfo.pe[oe][Ct]=ss[Ot+Ct])}return 0};function ze(W,K){var te=W,oe;return te>=0?oe=-te*27:oe=te*K,oe<=-72?0:Math.exp(oe*m)}function de(W){var K=0,te=0;{var oe=0,ue,ee;for(oe=0;ze(oe,W)>1e-20;oe-=1);for(ue=oe,ee=0;Math.abs(ee-ue)>1e-12;)oe=(ee+ue)/2,ze(oe,W)>0?ee=oe:ue=oe;K=ue}{var oe=0,ue,ee;for(oe=0;ze(oe,W)>1e-20;oe+=1);for(ue=0,ee=oe;Math.abs(ee-ue)>1e-12;)oe=(ee+ue)/2,ze(oe,W)>0?ue=oe:ee=oe;te=ee}{var Ce=0,xe=1e3,ke;for(ke=0;ke<=xe;++ke){var oe=K+ke*(te-K)/xe,Ge=ze(oe,W);Ce+=Ge}{var Te=(xe+1)/(Ce*(te-K));return Te}}}function We(W){var K,te,oe,ue;return K=W,K>=0?K*=3:K*=1.5,K>=.5&&K<=2.5?(ue=K-.5,te=8*(ue*ue-2*ue)):te=0,K+=.474,oe=15.811389+7.5*K-17.5*Math.sqrt(1+K*K),oe<=-60?0:(K=Math.exp((te+oe)*m),K/=.6609193,K)}function ut(W){return W<0&&(W=0),W=W*.001,13*Math.atan(.76*W)+3.5*Math.atan(W*W/(7.5*7.5))}function Re(W,K,te,oe,ue,ee,Ce,xe,ke,Ge,Te,Ke){var Le=ws(Y.CBANDS+1),lt=xe/(Ke>15?2*576:2*192),nt=Ad(Y.HBLKSIZE),Mt;xe/=ke;var $e=0,yt=0;for(Mt=0;Mt<Y.CBANDS;Mt++){var qt,ct;for(qt=ut(xe*$e),Le[Mt]=xe*$e,ct=$e;ut(xe*ct)-qt<o&&ct<=ke/2;ct++);for(W[Mt]=ct-$e,yt=Mt+1;$e<ct;)nt[$e++]=Mt;if($e>ke/2){$e=ke/2,++Mt;break}}Le[Mt]=xe*$e;for(var Pt=0;Pt<Ke;Pt++){var st,zt,ni,Ct,Jt;ni=Ge[Pt],Ct=Ge[Pt+1],st=0|Math.floor(.5+Te*(ni-.5)),st<0&&(st=0),zt=0|Math.floor(.5+Te*(Ct-.5)),zt>ke/2&&(zt=ke/2),te[Pt]=(nt[st]+nt[zt])/2,K[Pt]=nt[zt];var Me=lt*Ct;Ce[Pt]=(Me-Le[K[Pt]])/(Le[K[Pt]+1]-Le[K[Pt]]),Ce[Pt]<0?Ce[Pt]=0:Ce[Pt]>1&&(Ce[Pt]=1),Jt=ut(xe*Ge[Pt]*Te),Jt=Math.min(Jt,15.5)/15.5,ee[Pt]=Math.pow(10,1.25*(1-Math.cos(Math.PI*Jt))-2.5)}$e=0;for(var ht=0;ht<yt;ht++){var Qt=W[ht],qt,nn;qt=ut(xe*$e),nn=ut(xe*($e+Qt-1)),oe[ht]=.5*(qt+nn),qt=ut(xe*($e-.5)),nn=ut(xe*($e+Qt-.5)),ue[ht]=nn-qt,$e+=Qt}return yt}function je(W,K,te,oe,ue,ee){var Ce=qo([Y.CBANDS,Y.CBANDS]),xe,ke=0;if(ee)for(var Ge=0;Ge<K;Ge++)for(xe=0;xe<K;xe++){var Te=We(te[Ge]-te[xe])*oe[xe];Ce[Ge][xe]=Te*ue[Ge]}else for(xe=0;xe<K;xe++)for(var Ke=15+Math.min(21/te[xe],12),Le=de(Ke),Ge=0;Ge<K;Ge++){var Te=Le*ze(te[Ge]-te[xe],Ke)*oe[xe];Ce[Ge][xe]=Te*ue[Ge]}for(var Ge=0;Ge<K;Ge++){for(xe=0;xe<K&&!(Ce[Ge][xe]>0);xe++);for(W[Ge][0]=xe,xe=K-1;xe>0&&!(Ce[Ge][xe]>0);xe--);W[Ge][1]=xe,ke+=W[Ge][1]-W[Ge][0]+1}for(var lt=ws(ke),nt=0,Ge=0;Ge<K;Ge++)for(xe=W[Ge][0];xe<=W[Ge][1];xe++)lt[nt++]=Ce[Ge][xe];return lt}function ae(W){var K=ut(W);return K=Math.min(K,15.5)/15.5,Math.pow(10,1.25*(1-Math.cos(Math.PI*K))-2.5)}this.psymodel_init=function(W){var K=W.internal_flags,te,oe=!0,ue=13,ee=24,Ce=0,xe=0,ke=-8.25,Ge=-4.5,Te=ws(Y.CBANDS),Ke=ws(Y.CBANDS),Le=ws(Y.CBANDS),lt=W.out_samplerate;switch(W.experimentalZ){default:case 0:oe=!0;break;case 1:oe=!(W.VBR==ff.vbr_mtrh||W.VBR==ff.vbr_mt);break;case 2:oe=!1;break;case 3:ue=8,Ce=-1.75,xe=-.0125,ke=-8.25,Ge=-2.25;break}for(K.ms_ener_ratio_old=.25,K.blocktype_old[0]=K.blocktype_old[1]=Y.NORM_TYPE,te=0;te<4;++te){for(var $e=0;$e<Y.CBANDS;++$e)K.nb_1[te][$e]=1e20,K.nb_2[te][$e]=1e20,K.nb_s1[te][$e]=K.nb_s2[te][$e]=1;for(var nt=0;nt<Y.SBMAX_l;nt++)K.en[te].l[nt]=1e20,K.thm[te].l[nt]=1e20;for(var $e=0;$e<3;++$e){for(var nt=0;nt<Y.SBMAX_s;nt++)K.en[te].s[nt][$e]=1e20,K.thm[te].s[nt][$e]=1e20;K.nsPsy.lastAttacks[te]=0}for(var $e=0;$e<9;$e++)K.nsPsy.last_en_subshort[te][$e]=10}for(K.loudness_sq_save[0]=K.loudness_sq_save[1]=0,K.npart_l=Re(K.numlines_l,K.bo_l,K.bm_l,Te,Ke,K.mld_l,K.PSY.bo_l_weight,lt,Y.BLKSIZE,K.scalefac_band.l,Y.BLKSIZE/(2*576),Y.SBMAX_l),yn(K.npart_l<Y.CBANDS),te=0;te<K.npart_l;te++){var Mt=Ce;Te[te]>=ue&&(Mt=xe*(Te[te]-ue)/(ee-ue)+Ce*(ee-Te[te])/(ee-ue)),Le[te]=Math.pow(10,Mt/10),K.numlines_l[te]>0?K.rnumlines_l[te]=1/K.numlines_l[te]:K.rnumlines_l[te]=0}K.s3_ll=je(K.s3ind,K.npart_l,Te,Ke,Le,oe);var $e=0;for(te=0;te<K.npart_l;te++){var yt;yt=DP.MAX_VALUE;for(var qt=0;qt<K.numlines_l[te];qt++,$e++){var ct=lt*$e/(1e3*Y.BLKSIZE),Pt;Pt=this.ATHformula(ct*1e3,W)-20,Pt=Math.pow(10,.1*Pt),Pt*=K.numlines_l[te],yt>Pt&&(yt=Pt)}K.ATH.cb_l[te]=yt,yt=-20+Te[te]*20/10,yt>6&&(yt=100),yt<-15&&(yt=-15),yt-=8,K.minval_l[te]=Math.pow(10,yt/10)*K.numlines_l[te]}for(K.npart_s=Re(K.numlines_s,K.bo_s,K.bm_s,Te,Ke,K.mld_s,K.PSY.bo_s_weight,lt,Y.BLKSIZE_s,K.scalefac_band.s,Y.BLKSIZE_s/(2*192),Y.SBMAX_s),yn(K.npart_s<Y.CBANDS),$e=0,te=0;te<K.npart_s;te++){var yt,Mt=ke;Te[te]>=ue&&(Mt=Ge*(Te[te]-ue)/(ee-ue)+ke*(ee-Te[te])/(ee-ue)),Le[te]=Math.pow(10,Mt/10),yt=DP.MAX_VALUE;for(var qt=0;qt<K.numlines_s[te];qt++,$e++){var ct=lt*$e/(1e3*Y.BLKSIZE_s),Pt;Pt=this.ATHformula(ct*1e3,W)-20,Pt=Math.pow(10,.1*Pt),Pt*=K.numlines_s[te],yt>Pt&&(yt=Pt)}K.ATH.cb_s[te]=yt,yt=-7+Te[te]*7/12,Te[te]>12&&(yt*=1+Math.log(1+yt)*3.1),Te[te]<12&&(yt*=1+Math.log(1-yt)*2.3),yt<-15&&(yt=-15),yt-=8,K.minval_s[te]=Math.pow(10,yt/10)*K.numlines_s[te]}K.s3_ss=je(K.s3ind_s,K.npart_s,Te,Ke,Le,oe),M(),t.init_fft(K),K.decay=Math.exp(-1*n/(l*lt/192));{var st;st=f,W.exp_nspsytune&2&&(st=1),Math.abs(W.msfix)>0&&(st=W.msfix),W.msfix=st;for(var zt=0;zt<K.npart_l;zt++)K.s3ind[zt][1]>K.npart_l-1&&(K.s3ind[zt][1]=K.npart_l-1)}var ni=576*K.mode_gr/lt;if(K.ATH.decay=Math.pow(10,-12/10*ni),K.ATH.adjust=.01,K.ATH.adjustLimit=1,yn(K.bo_l[Y.SBMAX_l-1]<=K.npart_l),yn(K.bo_s[Y.SBMAX_s-1]<=K.npart_s),W.ATHtype!=-1){var ct,Ct=W.out_samplerate/Y.BLKSIZE,Jt=0;for(ct=0,te=0;te<Y.BLKSIZE/2;++te)ct+=Ct,K.ATH.eql_w[te]=1/Math.pow(10,this.ATHformula(ct,W)/10),Jt+=K.ATH.eql_w[te];for(Jt=1/Jt,te=Y.BLKSIZE/2;--te>=0;)K.ATH.eql_w[te]*=Jt}{for(var zt=$e=0;zt<K.npart_s;++zt)for(te=0;te<K.numlines_s[zt];++te)++$e;for(var zt=$e=0;zt<K.npart_l;++zt)for(te=0;te<K.numlines_l[zt];++te)++$e}for($e=0,te=0;te<K.npart_l;te++){var ct=lt*($e+K.numlines_l[te]/2)/(1*Y.BLKSIZE);K.mld_cb_l[te]=ae(ct),$e+=K.numlines_l[te]}for(;te<Y.CBANDS;++te)K.mld_cb_l[te]=1;for($e=0,te=0;te<K.npart_s;te++){var ct=lt*($e+K.numlines_s[te]/2)/(1*Y.BLKSIZE_s);K.mld_cb_s[te]=ae(ct),$e+=K.numlines_s[te]}for(;te<Y.CBANDS;++te)K.mld_cb_s[te]=1;return 0};function Ue(W,K){W<-.3&&(W=3410),W/=1e3,W=Math.max(.1,W);var te=3.64*Math.pow(W,-.8)-6.8*Math.exp(-.6*Math.pow(W-3.4,2))+6*Math.exp(-.15*Math.pow(W-8.7,2))+(.6+.04*K)*.001*Math.pow(W,4);return te}this.ATHformula=function(W,K){var te;switch(K.ATHtype){case 0:te=Ue(W,9);break;case 1:te=Ue(W,-1);break;case 2:te=Ue(W,0);break;case 3:te=Ue(W,1)+6;break;case 4:te=Ue(W,K.ATHcurve);break;default:te=Ue(W,0);break}return te}}function u$e(){this.class_id=0,this.num_samples=0,this.num_channels=0,this.in_samplerate=0,this.out_samplerate=0,this.scale=0,this.scale_left=0,this.scale_right=0,this.analysis=!1,this.bWriteVbrTag=!1,this.decode_only=!1,this.quality=0,this.mode=ai.STEREO,this.force_ms=!1,this.free_format=!1,this.findReplayGain=!1,this.decode_on_the_fly=!1,this.write_id3tag_automatic=!1,this.brate=0,this.compression_ratio=0,this.copyright=0,this.original=0,this.extension=0,this.emphasis=0,this.error_protection=0,this.strict_ISO=!1,this.disable_reservoir=!1,this.quant_comp=0,this.quant_comp_short=0,this.experimentalY=!1,this.experimentalZ=0,this.exp_nspsytune=0,this.preset=0,this.VBR=null,this.VBR_q_frac=0,this.VBR_q=0,this.VBR_mean_bitrate_kbps=0,this.VBR_min_bitrate_kbps=0,this.VBR_max_bitrate_kbps=0,this.VBR_hard_min=0,this.lowpassfreq=0,this.highpassfreq=0,this.lowpasswidth=0,this.highpasswidth=0,this.maskingadjust=0,this.maskingadjust_short=0,this.ATHonly=!1,this.ATHshort=!1,this.noATH=!1,this.ATHtype=0,this.ATHcurve=0,this.ATHlower=0,this.athaa_type=0,this.athaa_loudapprox=0,this.athaa_sensitivity=0,this.short_blocks=null,this.useTemporal=!1,this.interChRatio=0,this.msfix=0,this.tune=!1,this.tune_value_a=0,this.version=0,this.encoder_delay=0,this.encoder_padding=0,this.framesize=0,this.frameNum=0,this.lame_allocated_gfp=0,this.internal_flags=null}var Bu={};Bu.SFBMAX=Y.SBMAX_s*3;var d$e=St.new_float,Id=St.new_int;function X_(){this.xr=d$e(576),this.l3_enc=Id(576),this.scalefac=Id(Bu.SFBMAX),this.xrpow_max=0,this.part2_3_length=0,this.big_values=0,this.count1=0,this.global_gain=0,this.scalefac_compress=0,this.block_type=0,this.mixed_block_flag=0,this.table_select=Id(3),this.subblock_gain=Id(4),this.region0_count=0,this.region1_count=0,this.preflag=0,this.scalefac_scale=0,this.count1table_select=0,this.part2_length=0,this.sfb_lmax=0,this.sfb_smin=0,this.psy_lmax=0,this.sfbmax=0,this.psymax=0,this.sfbdivide=0,this.width=Id(Bu.SFBMAX),this.window=Id(Bu.SFBMAX),this.count1bits=0,this.sfb_partition_table=null,this.slen=Id(4),this.max_nonzero_coeff=0;var t=this;function n(i){return new Int32Array(i)}function e(i){return new Float32Array(i)}this.assign=function(i){t.xr=e(i.xr),t.l3_enc=n(i.l3_enc),t.scalefac=n(i.scalefac),t.xrpow_max=i.xrpow_max,t.part2_3_length=i.part2_3_length,t.big_values=i.big_values,t.count1=i.count1,t.global_gain=i.global_gain,t.scalefac_compress=i.scalefac_compress,t.block_type=i.block_type,t.mixed_block_flag=i.mixed_block_flag,t.table_select=n(i.table_select),t.subblock_gain=n(i.subblock_gain),t.region0_count=i.region0_count,t.region1_count=i.region1_count,t.preflag=i.preflag,t.scalefac_scale=i.scalefac_scale,t.count1table_select=i.count1table_select,t.part2_length=i.part2_length,t.sfb_lmax=i.sfb_lmax,t.sfb_smin=i.sfb_smin,t.psy_lmax=i.psy_lmax,t.sfbmax=i.sfbmax,t.psymax=i.psymax,t.sfbdivide=i.sfbdivide,t.width=n(i.width),t.window=n(i.window),t.count1bits=i.count1bits,t.sfb_partition_table=i.sfb_partition_table.slice(0),t.slen=n(i.slen),t.max_nonzero_coeff=i.max_nonzero_coeff}}var $P=St.new_int;function h$e(){this.tt=[[null,null],[null,null]],this.main_data_begin=0,this.private_bits=0,this.resvDrain_pre=0,this.resvDrain_post=0,this.scfsi=[$P(4),$P(4)];for(var t=0;t<2;t++)for(var n=0;n<2;n++)this.tt[t][n]=new X_}var sb=St.System,rb=St.new_int;function ll(t,n,e,i){this.l=rb(1+Y.SBMAX_l),this.s=rb(1+Y.SBMAX_s),this.psfb21=rb(1+Y.PSFB21),this.psfb12=rb(1+Y.PSFB12);var s=this.l,r=this.s;arguments.length==4&&(this.arrL=arguments[0],this.arrS=arguments[1],this.arr21=arguments[2],this.arr12=arguments[3],sb.arraycopy(this.arrL,0,s,0,Math.min(this.arrL.length,this.l.length)),sb.arraycopy(this.arrS,0,r,0,Math.min(this.arrS.length,this.s.length)),sb.arraycopy(this.arr21,0,this.psfb21,0,Math.min(this.arr21.length,this.psfb21.length)),sb.arraycopy(this.arr12,0,this.psfb12,0,Math.min(this.arr12.length,this.psfb12.length)))}var S3=St.new_float,f$e=St.new_float_n,m$e=St.new_int;function p$e(){this.last_en_subshort=f$e([4,9]),this.lastAttacks=m$e(4),this.pefirbuf=S3(19),this.longfact=S3(Y.SBMAX_l),this.shortfact=S3(Y.SBMAX_s),this.attackthre=0,this.attackthre_s=0}function g$e(){this.sum=0,this.seen=0,this.want=0,this.pos=0,this.size=0,this.bag=null,this.nVbrNumFrames=0,this.nBytesWritten=0,this.TotalFrameSize=0}var v$e=St.new_byte,b$e=St.new_double,Ko=St.new_float,Rd=St.new_float_n,_a=St.new_int,ob=St.new_int_n;ii.MFSIZE=3*1152+Y.ENCDELAY-Y.MDCTDELAY;ii.MAX_HEADER_BUF=256;ii.MAX_BITS_PER_CHANNEL=4095;ii.MAX_BITS_PER_GRANULE=7680;ii.BPC=320;function ii(){var t=40;this.Class_ID=0,this.lame_encode_frame_init=0,this.iteration_init_init=0,this.fill_buffer_resample_init=0,this.mfbuf=Rd([2,ii.MFSIZE]),this.mode_gr=0,this.channels_in=0,this.channels_out=0,this.resample_ratio=0,this.mf_samples_to_encode=0,this.mf_size=0,this.VBR_min_bitrate=0,this.VBR_max_bitrate=0,this.bitrate_index=0,this.samplerate_index=0,this.mode_ext=0,this.lowpass1=0,this.lowpass2=0,this.highpass1=0,this.highpass2=0,this.noise_shaping=0,this.noise_shaping_amp=0,this.substep_shaping=0,this.psymodel=0,this.noise_shaping_stop=0,this.subblock_gain=0,this.use_best_huffman=0,this.full_outer_loop=0,this.l3_side=new h$e,this.ms_ratio=Ko(2),this.padding=0,this.frac_SpF=0,this.slot_lag=0,this.tag_spec=null,this.nMusicCRC=0,this.OldValue=_a(2),this.CurrentStep=_a(2),this.masking_lower=0,this.bv_scf=_a(576),this.pseudohalf=_a(Bu.SFBMAX),this.sfb21_extra=!1,this.inbuf_old=new Array(2),this.blackfilt=new Array(2*ii.BPC+1),this.itime=b$e(2),this.sideinfo_len=0,this.sb_sample=Rd([2,2,18,Y.SBLIMIT]),this.amp_filter=Ko(32);function n(){this.write_timing=0,this.ptr=0,this.buf=v$e(t)}this.header=new Array(ii.MAX_HEADER_BUF),this.h_ptr=0,this.w_ptr=0,this.ancillary_flag=0,this.ResvSize=0,this.ResvMax=0,this.scalefac_band=new ll,this.minval_l=Ko(Y.CBANDS),this.minval_s=Ko(Y.CBANDS),this.nb_1=Rd([4,Y.CBANDS]),this.nb_2=Rd([4,Y.CBANDS]),this.nb_s1=Rd([4,Y.CBANDS]),this.nb_s2=Rd([4,Y.CBANDS]),this.s3_ss=null,this.s3_ll=null,this.decay=0,this.thm=new Array(4),this.en=new Array(4),this.tot_ener=Ko(4),this.loudness_sq=Rd([2,2]),this.loudness_sq_save=Ko(2),this.mld_l=Ko(Y.SBMAX_l),this.mld_s=Ko(Y.SBMAX_s),this.bm_l=_a(Y.SBMAX_l),this.bo_l=_a(Y.SBMAX_l),this.bm_s=_a(Y.SBMAX_s),this.bo_s=_a(Y.SBMAX_s),this.npart_l=0,this.npart_s=0,this.s3ind=ob([Y.CBANDS,2]),this.s3ind_s=ob([Y.CBANDS,2]),this.numlines_s=_a(Y.CBANDS),this.numlines_l=_a(Y.CBANDS),this.rnumlines_l=Ko(Y.CBANDS),this.mld_cb_l=Ko(Y.CBANDS),this.mld_cb_s=Ko(Y.CBANDS),this.numlines_s_num1=0,this.numlines_l_num1=0,this.pe=Ko(4),this.ms_ratio_s_old=0,this.ms_ratio_l_old=0,this.ms_ener_ratio_old=0,this.blocktype_old=_a(2),this.nsPsy=new p$e,this.VBR_seek_table=new g$e,this.ATH=null,this.PSY=null,this.nogap_total=0,this.nogap_current=0,this.decode_on_the_fly=!0,this.findReplayGain=!0,this.findPeakSample=!0,this.PeakSample=0,this.RadioGain=0,this.AudiophileGain=0,this.rgdata=null,this.noclipGainChange=0,this.noclipScale=0,this.bitrate_stereoMode_Hist=ob([16,5]),this.bitrate_blockType_Hist=ob([16,6]),this.pinfo=null,this.hip=null,this.in_buffer_nsamples=0,this.in_buffer_0=null,this.in_buffer_1=null,this.iteration_loop=null;for(var e=0;e<this.en.length;e++)this.en[e]=new Z_;for(var e=0;e<this.thm.length;e++)this.thm[e]=new Z_;for(var e=0;e<this.header.length;e++)this.header[e]=new n}var Md=St.new_float;function _$e(){this.useAdjust=0,this.aaSensitivityP=0,this.adjust=0,this.adjustLimit=0,this.decay=0,this.floor=0,this.l=Md(Y.SBMAX_l),this.s=Md(Y.SBMAX_s),this.psfb21=Md(Y.PSFB21),this.psfb12=Md(Y.PSFB12),this.cb_l=Md(Y.CBANDS),this.cb_s=Md(Y.CBANDS),this.eql_w=Md(Y.BLKSIZE/2)}var Nr=St.System,zP=St.Arrays;cs.STEPS_per_dB=100;cs.MAX_dB=120;cs.GAIN_NOT_ENOUGH_SAMPLES=-24601;cs.GAIN_ANALYSIS_ERROR=0;cs.GAIN_ANALYSIS_OK=1;cs.INIT_GAIN_ANALYSIS_ERROR=0;cs.INIT_GAIN_ANALYSIS_OK=1;cs.YULE_ORDER=10;cs.MAX_ORDER=cs.YULE_ORDER;cs.MAX_SAMP_FREQ=48e3;cs.RMS_WINDOW_TIME_NUMERATOR=1;cs.RMS_WINDOW_TIME_DENOMINATOR=20;cs.MAX_SAMPLES_PER_WINDOW=cs.MAX_SAMP_FREQ*cs.RMS_WINDOW_TIME_NUMERATOR/cs.RMS_WINDOW_TIME_DENOMINATOR+1;function cs(){var t=64.82,n=.95,e=cs.RMS_WINDOW_TIME_NUMERATOR,i=cs.RMS_WINDOW_TIME_DENOMINATOR,s=[[.038575994352,-3.84664617118067,-.02160367184185,7.81501653005538,-.00123395316851,-11.34170355132042,-9291677959e-14,13.05504219327545,-.01655260341619,-12.28759895145294,.02161526843274,9.4829380631979,-.02074045215285,-5.87257861775999,.00594298065125,2.75465861874613,.00306428023191,-.86984376593551,.00012025322027,.13919314567432,.00288463683916],[.0541865640643,-3.47845948550071,-.02911007808948,6.36317777566148,-.00848709379851,-8.54751527471874,-.00851165645469,9.4769360780128,-.00834990904936,-8.81498681370155,.02245293253339,6.85401540936998,-.02596338512915,-4.39470996079559,.01624864962975,2.19611684890774,-.00240879051584,-.75104302451432,.00674613682247,.13149317958808,-.00187763777362],[.15457299681924,-2.37898834973084,-.09331049056315,2.84868151156327,-.06247880153653,-2.64577170229825,.02163541888798,2.23697657451713,-.05588393329856,-1.67148153367602,.04781476674921,1.00595954808547,.00222312597743,-.45953458054983,.03174092540049,.16378164858596,-.01390589421898,-.05032077717131,.00651420667831,.0234789740702,-.00881362733839],[.30296907319327,-1.61273165137247,-.22613988682123,1.0797749225997,-.08587323730772,-.2565625775407,.03282930172664,-.1627671912044,-.00915702933434,-.22638893773906,-.02364141202522,.39120800788284,-.00584456039913,-.22138138954925,.06276101321749,.04500235387352,-828086748e-14,.02005851806501,.00205861885564,.00302439095741,-.02950134983287],[.33642304856132,-1.49858979367799,-.2557224142557,.87350271418188,-.11828570177555,.12205022308084,.11921148675203,-.80774944671438,-.07834489609479,.47854794562326,-.0046997791438,-.12453458140019,-.0058950022444,-.04067510197014,.05724228140351,.08333755284107,.00832043980773,-.04237348025746,-.0163538138454,.02977207319925,-.0176017656815],[.4491525660845,-.62820619233671,-.14351757464547,.29661783706366,-.22784394429749,-.372563729424,-.01419140100551,.00213767857124,.04078262797139,-.42029820170918,-.12398163381748,.22199650564824,.04097565135648,.00613424350682,.10478503600251,.06747620744683,-.01863887810927,.05784820375801,-.03193428438915,.03222754072173,.00541907748707],[.56619470757641,-1.04800335126349,-.75464456939302,.29156311971249,.1624213774223,-.26806001042947,.16744243493672,.00819999645858,-.18901604199609,.45054734505008,.3093178284183,-.33032403314006,-.27562961986224,.0673936833311,.00647310677246,-.04784254229033,.08647503780351,.01639907836189,-.0378898455484,.01807364323573,-.00588215443421],[.58100494960553,-.51035327095184,-.53174909058578,-.31863563325245,-.14289799034253,-.20256413484477,.17520704835522,.1472815413433,.02377945217615,.38952639978999,.15558449135573,-.23313271880868,-.25344790059353,-.05246019024463,.01628462406333,-.02505961724053,.06920467763959,.02442357316099,-.03721611395801,.01818801111503,-.00749618797172],[.53648789255105,-.2504987195602,-.42163034350696,-.43193942311114,-.00275953611929,-.03424681017675,.04267842219415,-.04678328784242,-.10214864179676,.26408300200955,.14590772289388,.15113130533216,-.02459864859345,-.17556493366449,-.11202315195388,-.18823009262115,-.04060034127,.05477720428674,.0478866554818,.0470440968812,-.02217936801134]],r=[[.98621192462708,-1.97223372919527,-1.97242384925416,.97261396931306,.98621192462708],[.98500175787242,-1.96977855582618,-1.97000351574484,.9702284756635,.98500175787242],[.97938932735214,-1.95835380975398,-1.95877865470428,.95920349965459,.97938932735214],[.97531843204928,-1.95002759149878,-1.95063686409857,.95124613669835,.97531843204928],[.97316523498161,-1.94561023566527,-1.94633046996323,.94705070426118,.97316523498161],[.96454515552826,-1.92783286977036,-1.92909031105652,.93034775234268,.96454515552826],[.96009142950541,-1.91858953033784,-1.92018285901082,.92177618768381,.96009142950541],[.95856916599601,-1.9154210807478,-1.91713833199203,.91885558323625,.95856916599601],[.94597685600279,-1.88903307939452,-1.89195371200558,.89487434461664,.94597685600279]];function o(d,f,p,m,v,y){for(;v--!=0;)p[m]=1e-10+d[f+0]*y[0]-p[m-1]*y[1]+d[f-1]*y[2]-p[m-2]*y[3]+d[f-2]*y[4]-p[m-3]*y[5]+d[f-3]*y[6]-p[m-4]*y[7]+d[f-4]*y[8]-p[m-5]*y[9]+d[f-5]*y[10]-p[m-6]*y[11]+d[f-6]*y[12]-p[m-7]*y[13]+d[f-7]*y[14]-p[m-8]*y[15]+d[f-8]*y[16]-p[m-9]*y[17]+d[f-9]*y[18]-p[m-10]*y[19]+d[f-10]*y[20],++m,++f}function a(d,f,p,m,v,y){for(;v--!=0;)p[m]=d[f+0]*y[0]-p[m-1]*y[1]+d[f-1]*y[2]-p[m-2]*y[3]+d[f-2]*y[4],++m,++f}function l(d,f){for(var p=0;p<MAX_ORDER;p++)d.linprebuf[p]=d.lstepbuf[p]=d.loutbuf[p]=d.rinprebuf[p]=d.rstepbuf[p]=d.routbuf[p]=0;switch(0|f){case 48e3:d.reqindex=0;break;case 44100:d.reqindex=1;break;case 32e3:d.reqindex=2;break;case 24e3:d.reqindex=3;break;case 22050:d.reqindex=4;break;case 16e3:d.reqindex=5;break;case 12e3:d.reqindex=6;break;case 11025:d.reqindex=7;break;case 8e3:d.reqindex=8;break;default:return INIT_GAIN_ANALYSIS_ERROR}return d.sampleWindow=0|(f*e+i-1)/i,d.lsum=0,d.rsum=0,d.totsamp=0,zP.ill(d.A,0),INIT_GAIN_ANALYSIS_OK}this.InitGainAnalysis=function(d,f){return l(d,f)!=INIT_GAIN_ANALYSIS_OK?INIT_GAIN_ANALYSIS_ERROR:(d.linpre=MAX_ORDER,d.rinpre=MAX_ORDER,d.lstep=MAX_ORDER,d.rstep=MAX_ORDER,d.lout=MAX_ORDER,d.rout=MAX_ORDER,zP.fill(d.B,0),INIT_GAIN_ANALYSIS_OK)};function c(d){return d*d}this.AnalyzeSamples=function(d,f,p,m,v,y,_){var b,E,x,A,I,k,O;if(y==0)return GAIN_ANALYSIS_OK;switch(O=0,I=y,_){case 1:m=f,v=p;break;case 2:break;default:return GAIN_ANALYSIS_ERROR}for(y<MAX_ORDER?(Nr.arraycopy(f,p,d.linprebuf,MAX_ORDER,y),Nr.arraycopy(m,v,d.rinprebuf,MAX_ORDER,y)):(Nr.arraycopy(f,p,d.linprebuf,MAX_ORDER,MAX_ORDER),Nr.arraycopy(m,v,d.rinprebuf,MAX_ORDER,MAX_ORDER));I>0;){k=I>d.sampleWindow-d.totsamp?d.sampleWindow-d.totsamp:I,O<MAX_ORDER?(b=d.linpre+O,E=d.linprebuf,x=d.rinpre+O,A=d.rinprebuf,k>MAX_ORDER-O&&(k=MAX_ORDER-O)):(b=p+O,E=f,x=v+O,A=m),o(E,b,d.lstepbuf,d.lstep+d.totsamp,k,s[d.reqindex]),o(A,x,d.rstepbuf,d.rstep+d.totsamp,k,s[d.reqindex]),a(d.lstepbuf,d.lstep+d.totsamp,d.loutbuf,d.lout+d.totsamp,k,r[d.reqindex]),a(d.rstepbuf,d.rstep+d.totsamp,d.routbuf,d.rout+d.totsamp,k,r[d.reqindex]),b=d.lout+d.totsamp,E=d.loutbuf,x=d.rout+d.totsamp,A=d.routbuf;for(var M=k%8;M--!=0;)d.lsum+=c(E[b++]),d.rsum+=c(A[x++]);for(M=k/8;M--!=0;)d.lsum+=c(E[b+0])+c(E[b+1])+c(E[b+2])+c(E[b+3])+c(E[b+4])+c(E[b+5])+c(E[b+6])+c(E[b+7]),b+=8,d.rsum+=c(A[x+0])+c(A[x+1])+c(A[x+2])+c(A[x+3])+c(A[x+4])+c(A[x+5])+c(A[x+6])+c(A[x+7]),x+=8;if(I-=k,O+=k,d.totsamp+=k,d.totsamp==d.sampleWindow){var T=cs.STEPS_per_dB*10*Math.log10((d.lsum+d.rsum)/d.totsamp*.5+1e-37),P=T<=0?0:0|T;P>=d.A.length&&(P=d.A.length-1),d.A[P]++,d.lsum=d.rsum=0,Nr.arraycopy(d.loutbuf,d.totsamp,d.loutbuf,0,MAX_ORDER),Nr.arraycopy(d.routbuf,d.totsamp,d.routbuf,0,MAX_ORDER),Nr.arraycopy(d.lstepbuf,d.totsamp,d.lstepbuf,0,MAX_ORDER),Nr.arraycopy(d.rstepbuf,d.totsamp,d.rstepbuf,0,MAX_ORDER),d.totsamp=0}if(d.totsamp>d.sampleWindow)return GAIN_ANALYSIS_ERROR}return y<MAX_ORDER?(Nr.arraycopy(d.linprebuf,y,d.linprebuf,0,MAX_ORDER-y),Nr.arraycopy(d.rinprebuf,y,d.rinprebuf,0,MAX_ORDER-y),Nr.arraycopy(f,p,d.linprebuf,MAX_ORDER-y,y),Nr.arraycopy(m,v,d.rinprebuf,MAX_ORDER-y,y)):(Nr.arraycopy(f,p+y-MAX_ORDER,d.linprebuf,0,MAX_ORDER),Nr.arraycopy(m,v+y-MAX_ORDER,d.rinprebuf,0,MAX_ORDER)),GAIN_ANALYSIS_OK};function u(d,f){var p,m=0;for(p=0;p<f;p++)m+=d[p];if(m==0)return GAIN_NOT_ENOUGH_SAMPLES;var v=0|Math.ceil(m*(1-n));for(p=f;p-- >0&&!((v-=d[p])<=0););return t-p/cs.STEPS_per_dB}this.GetTitleGain=function(d){for(var f=u(d.A,d.A.length),p=0;p<d.A.length;p++)d.B[p]+=d.A[p],d.A[p]=0;for(var p=0;p<MAX_ORDER;p++)d.linprebuf[p]=d.lstepbuf[p]=d.loutbuf[p]=d.rinprebuf[p]=d.rstepbuf[p]=d.routbuf[p]=0;return d.totsamp=0,d.lsum=d.rsum=0,f}}var pf=St.new_float,HP=St.new_int;function w$e(){this.linprebuf=pf(void 0*2),this.linpre=0,this.lstepbuf=pf(void 0+void 0),this.lstep=0,this.loutbuf=pf(void 0+void 0),this.lout=0,this.rinprebuf=pf(void 0*2),this.rinpre=0,this.rstepbuf=pf(void 0+void 0),this.rstep=0,this.routbuf=pf(void 0+void 0),this.rout=0,this.sampleWindow=0,this.totsamp=0,this.lsum=0,this.rsum=0,this.freqindex=0,this.first=0,this.A=HP(0|void 0*void 0),this.B=HP(0|void 0*void 0)}function NW(t){this.bits=t}var UP=St.new_float,y$e=St.new_int,WP=St.assert;function C$e(t){var n=t;this.quantize=n,this.iteration_loop=function(e,i,s,r){var o=e.internal_flags,a=UP(Bu.SFBMAX),l=UP(576),c=y$e(2),u=0,d,f=o.l3_side,p=new NW(u);this.quantize.rv.ResvFrameBegin(e,p),u=p.bits;for(var m=0;m<o.mode_gr;m++){d=this.quantize.qupvt.on_pe(e,i,c,u,m,m),o.mode_ext==Y.MPG_MD_MS_LR&&(this.quantize.ms_convert(o.l3_side,m),this.quantize.qupvt.reduce_side(c,s[m],u,d));for(var v=0;v<o.channels_out;v++){var y,_,b=f.tt[m][v];b.block_type!=Y.SHORT_TYPE?(y=0,_=o.PSY.mask_adjust-y):(y=0,_=o.PSY.mask_adjust_short-y),o.masking_lower=Math.pow(10,_*.1),this.quantize.init_outer_loop(o,b),this.quantize.init_xrpow(o,b,l)&&(this.quantize.qupvt.calc_xmin(e,r[m][v],b,a),this.quantize.outer_loop(e,b,a,l,v,c[v])),this.quantize.iteration_finish_one(o,m,v),WP(b.part2_3_length<=ii.MAX_BITS_PER_CHANNEL),WP(b.part2_3_length<=c[v])}}this.quantize.rv.ResvFrameEnd(o,u)}}function Zn(t,n,e,i){this.xlen=t,this.linmax=n,this.table=e,this.hlen=i}var Xe={};Xe.t1HB=[1,1,1,0];Xe.t2HB=[1,2,1,3,1,1,3,2,0];Xe.t3HB=[3,2,1,1,1,1,3,2,0];Xe.t5HB=[1,2,6,5,3,1,4,4,7,5,7,1,6,1,1,0];Xe.t6HB=[7,3,5,1,6,2,3,2,5,4,4,1,3,3,2,0];Xe.t7HB=[1,2,10,19,16,10,3,3,7,10,5,3,11,4,13,17,8,4,12,11,18,15,11,2,7,6,9,14,3,1,6,4,5,3,2,0];Xe.t8HB=[3,4,6,18,12,5,5,1,2,16,9,3,7,3,5,14,7,3,19,17,15,13,10,4,13,5,8,11,5,1,12,4,4,1,1,0];Xe.t9HB=[7,5,9,14,15,7,6,4,5,5,6,7,7,6,8,8,8,5,15,6,9,10,5,1,11,7,9,6,4,1,14,4,6,2,6,0];Xe.t10HB=[1,2,10,23,35,30,12,17,3,3,8,12,18,21,12,7,11,9,15,21,32,40,19,6,14,13,22,34,46,23,18,7,20,19,33,47,27,22,9,3,31,22,41,26,21,20,5,3,14,13,10,11,16,6,5,1,9,8,7,8,4,4,2,0];Xe.t11HB=[3,4,10,24,34,33,21,15,5,3,4,10,32,17,11,10,11,7,13,18,30,31,20,5,25,11,19,59,27,18,12,5,35,33,31,58,30,16,7,5,28,26,32,19,17,15,8,14,14,12,9,13,14,9,4,1,11,4,6,6,6,3,2,0];Xe.t12HB=[9,6,16,33,41,39,38,26,7,5,6,9,23,16,26,11,17,7,11,14,21,30,10,7,17,10,15,12,18,28,14,5,32,13,22,19,18,16,9,5,40,17,31,29,17,13,4,2,27,12,11,15,10,7,4,1,27,12,8,12,6,3,1,0];Xe.t13HB=[1,5,14,21,34,51,46,71,42,52,68,52,67,44,43,19,3,4,12,19,31,26,44,33,31,24,32,24,31,35,22,14,15,13,23,36,59,49,77,65,29,40,30,40,27,33,42,16,22,20,37,61,56,79,73,64,43,76,56,37,26,31,25,14,35,16,60,57,97,75,114,91,54,73,55,41,48,53,23,24,58,27,50,96,76,70,93,84,77,58,79,29,74,49,41,17,47,45,78,74,115,94,90,79,69,83,71,50,59,38,36,15,72,34,56,95,92,85,91,90,86,73,77,65,51,44,43,42,43,20,30,44,55,78,72,87,78,61,46,54,37,30,20,16,53,25,41,37,44,59,54,81,66,76,57,54,37,18,39,11,35,33,31,57,42,82,72,80,47,58,55,21,22,26,38,22,53,25,23,38,70,60,51,36,55,26,34,23,27,14,9,7,34,32,28,39,49,75,30,52,48,40,52,28,18,17,9,5,45,21,34,64,56,50,49,45,31,19,12,15,10,7,6,3,48,23,20,39,36,35,53,21,16,23,13,10,6,1,4,2,16,15,17,27,25,20,29,11,17,12,16,8,1,1,0,1];Xe.t15HB=[7,12,18,53,47,76,124,108,89,123,108,119,107,81,122,63,13,5,16,27,46,36,61,51,42,70,52,83,65,41,59,36,19,17,15,24,41,34,59,48,40,64,50,78,62,80,56,33,29,28,25,43,39,63,55,93,76,59,93,72,54,75,50,29,52,22,42,40,67,57,95,79,72,57,89,69,49,66,46,27,77,37,35,66,58,52,91,74,62,48,79,63,90,62,40,38,125,32,60,56,50,92,78,65,55,87,71,51,73,51,70,30,109,53,49,94,88,75,66,122,91,73,56,42,64,44,21,25,90,43,41,77,73,63,56,92,77,66,47,67,48,53,36,20,71,34,67,60,58,49,88,76,67,106,71,54,38,39,23,15,109,53,51,47,90,82,58,57,48,72,57,41,23,27,62,9,86,42,40,37,70,64,52,43,70,55,42,25,29,18,11,11,118,68,30,55,50,46,74,65,49,39,24,16,22,13,14,7,91,44,39,38,34,63,52,45,31,52,28,19,14,8,9,3,123,60,58,53,47,43,32,22,37,24,17,12,15,10,2,1,71,37,34,30,28,20,17,26,21,16,10,6,8,6,2,0];Xe.t16HB=[1,5,14,44,74,63,110,93,172,149,138,242,225,195,376,17,3,4,12,20,35,62,53,47,83,75,68,119,201,107,207,9,15,13,23,38,67,58,103,90,161,72,127,117,110,209,206,16,45,21,39,69,64,114,99,87,158,140,252,212,199,387,365,26,75,36,68,65,115,101,179,164,155,264,246,226,395,382,362,9,66,30,59,56,102,185,173,265,142,253,232,400,388,378,445,16,111,54,52,100,184,178,160,133,257,244,228,217,385,366,715,10,98,48,91,88,165,157,148,261,248,407,397,372,380,889,884,8,85,84,81,159,156,143,260,249,427,401,392,383,727,713,708,7,154,76,73,141,131,256,245,426,406,394,384,735,359,710,352,11,139,129,67,125,247,233,229,219,393,743,737,720,885,882,439,4,243,120,118,115,227,223,396,746,742,736,721,712,706,223,436,6,202,224,222,218,216,389,386,381,364,888,443,707,440,437,1728,4,747,211,210,208,370,379,734,723,714,1735,883,877,876,3459,865,2,377,369,102,187,726,722,358,711,709,866,1734,871,3458,870,434,0,12,10,7,11,10,17,11,9,13,12,10,7,5,3,1,3];Xe.t24HB=[15,13,46,80,146,262,248,434,426,669,653,649,621,517,1032,88,14,12,21,38,71,130,122,216,209,198,327,345,319,297,279,42,47,22,41,74,68,128,120,221,207,194,182,340,315,295,541,18,81,39,75,70,134,125,116,220,204,190,178,325,311,293,271,16,147,72,69,135,127,118,112,210,200,188,352,323,306,285,540,14,263,66,129,126,119,114,214,202,192,180,341,317,301,281,262,12,249,123,121,117,113,215,206,195,185,347,330,308,291,272,520,10,435,115,111,109,211,203,196,187,353,332,313,298,283,531,381,17,427,212,208,205,201,193,186,177,169,320,303,286,268,514,377,16,335,199,197,191,189,181,174,333,321,305,289,275,521,379,371,11,668,184,183,179,175,344,331,314,304,290,277,530,383,373,366,10,652,346,171,168,164,318,309,299,287,276,263,513,375,368,362,6,648,322,316,312,307,302,292,284,269,261,512,376,370,364,359,4,620,300,296,294,288,282,273,266,515,380,374,369,365,361,357,2,1033,280,278,274,267,264,259,382,378,372,367,363,360,358,356,0,43,20,19,17,15,13,11,9,7,6,4,7,5,3,1,3];Xe.t32HB=[1,10,8,20,12,20,16,32,14,12,24,0,28,16,24,16];Xe.t33HB=[15,28,26,48,22,40,36,64,14,24,20,32,12,16,8,0];Xe.t1l=[1,4,3,5];Xe.t2l=[1,4,7,4,5,7,6,7,8];Xe.t3l=[2,3,7,4,4,7,6,7,8];Xe.t5l=[1,4,7,8,4,5,8,9,7,8,9,10,8,8,9,10];Xe.t6l=[3,4,6,8,4,4,6,7,5,6,7,8,7,7,8,9];Xe.t7l=[1,4,7,9,9,10,4,6,8,9,9,10,7,7,9,10,10,11,8,9,10,11,11,11,8,9,10,11,11,12,9,10,11,12,12,12];Xe.t8l=[2,4,7,9,9,10,4,4,6,10,10,10,7,6,8,10,10,11,9,10,10,11,11,12,9,9,10,11,12,12,10,10,11,11,13,13];Xe.t9l=[3,4,6,7,9,10,4,5,6,7,8,10,5,6,7,8,9,10,7,7,8,9,9,10,8,8,9,9,10,11,9,9,10,10,11,11];Xe.t10l=[1,4,7,9,10,10,10,11,4,6,8,9,10,11,10,10,7,8,9,10,11,12,11,11,8,9,10,11,12,12,11,12,9,10,11,12,12,12,12,12,10,11,12,12,13,13,12,13,9,10,11,12,12,12,13,13,10,10,11,12,12,13,13,13];Xe.t11l=[2,4,6,8,9,10,9,10,4,5,6,8,10,10,9,10,6,7,8,9,10,11,10,10,8,8,9,11,10,12,10,11,9,10,10,11,11,12,11,12,9,10,11,12,12,13,12,13,9,9,9,10,11,12,12,12,9,9,10,11,12,12,12,12];Xe.t12l=[4,4,6,8,9,10,10,10,4,5,6,7,9,9,10,10,6,6,7,8,9,10,9,10,7,7,8,8,9,10,10,10,8,8,9,9,10,10,10,11,9,9,10,10,10,11,10,11,9,9,9,10,10,11,11,12,10,10,10,11,11,11,11,12];Xe.t13l=[1,5,7,8,9,10,10,11,10,11,12,12,13,13,14,14,4,6,8,9,10,10,11,11,11,11,12,12,13,14,14,14,7,8,9,10,11,11,12,12,11,12,12,13,13,14,15,15,8,9,10,11,11,12,12,12,12,13,13,13,13,14,15,15,9,9,11,11,12,12,13,13,12,13,13,14,14,15,15,16,10,10,11,12,12,12,13,13,13,13,14,13,15,15,16,16,10,11,12,12,13,13,13,13,13,14,14,14,15,15,16,16,11,11,12,13,13,13,14,14,14,14,15,15,15,16,18,18,10,10,11,12,12,13,13,14,14,14,14,15,15,16,17,17,11,11,12,12,13,13,13,15,14,15,15,16,16,16,18,17,11,12,12,13,13,14,14,15,14,15,16,15,16,17,18,19,12,12,12,13,14,14,14,14,15,15,15,16,17,17,17,18,12,13,13,14,14,15,14,15,16,16,17,17,17,18,18,18,13,13,14,15,15,15,16,16,16,16,16,17,18,17,18,18,14,14,14,15,15,15,17,16,16,19,17,17,17,19,18,18,13,14,15,16,16,16,17,16,17,17,18,18,21,20,21,18];Xe.t15l=[3,5,6,8,8,9,10,10,10,11,11,12,12,12,13,14,5,5,7,8,9,9,10,10,10,11,11,12,12,12,13,13,6,7,7,8,9,9,10,10,10,11,11,12,12,13,13,13,7,8,8,9,9,10,10,11,11,11,12,12,12,13,13,13,8,8,9,9,10,10,11,11,11,11,12,12,12,13,13,13,9,9,9,10,10,10,11,11,11,11,12,12,13,13,13,14,10,9,10,10,10,11,11,11,11,12,12,12,13,13,14,14,10,10,10,11,11,11,11,12,12,12,12,12,13,13,13,14,10,10,10,11,11,11,11,12,12,12,12,13,13,14,14,14,10,10,11,11,11,11,12,12,12,13,13,13,13,14,14,14,11,11,11,11,12,12,12,12,12,13,13,13,13,14,15,14,11,11,11,11,12,12,12,12,13,13,13,13,14,14,14,15,12,12,11,12,12,12,13,13,13,13,13,13,14,14,15,15,12,12,12,12,12,13,13,13,13,14,14,14,14,14,15,15,13,13,13,13,13,13,13,13,14,14,14,14,15,15,14,15,13,13,13,13,13,13,13,14,14,14,14,14,15,15,15,15];Xe.t16_5l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,11,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,11,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,12,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,13,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,12,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,13,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,13,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,13,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,13,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,14,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,13,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,14,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,14,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,14,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,14,11,11,11,12,12,13,13,13,14,14,14,14,14,14,14,12];Xe.t16l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,10,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,10,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,11,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,12,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,11,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,12,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,12,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,12,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,12,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,13,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,12,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,13,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,13,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,13,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,13,10,10,10,11,11,12,12,12,13,13,13,13,13,13,13,10];Xe.t24l=[4,5,7,8,9,10,10,11,11,12,12,12,12,12,13,10,5,6,7,8,9,10,10,11,11,11,12,12,12,12,12,10,7,7,8,9,9,10,10,11,11,11,11,12,12,12,13,9,8,8,9,9,10,10,10,11,11,11,11,12,12,12,12,9,9,9,9,10,10,10,10,11,11,11,12,12,12,12,13,9,10,9,10,10,10,10,11,11,11,11,12,12,12,12,12,9,10,10,10,10,10,11,11,11,11,12,12,12,12,12,13,9,11,10,10,10,11,11,11,11,12,12,12,12,12,13,13,10,11,11,11,11,11,11,11,11,11,12,12,12,12,13,13,10,11,11,11,11,11,11,11,12,12,12,12,12,13,13,13,10,12,11,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,10,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,10,13,12,12,12,12,12,12,13,13,13,13,13,13,13,13,10,9,9,9,9,9,9,9,9,9,9,9,10,10,10,10,6];Xe.t32l=[1,5,5,7,5,8,7,9,5,7,7,9,7,9,9,10];Xe.t33l=[4,5,5,6,5,6,6,7,5,6,6,7,6,7,7,8];Xe.ht=[new Zn(0,0,null,null),new Zn(2,0,Xe.t1HB,Xe.t1l),new Zn(3,0,Xe.t2HB,Xe.t2l),new Zn(3,0,Xe.t3HB,Xe.t3l),new Zn(0,0,null,null),new Zn(4,0,Xe.t5HB,Xe.t5l),new Zn(4,0,Xe.t6HB,Xe.t6l),new Zn(6,0,Xe.t7HB,Xe.t7l),new Zn(6,0,Xe.t8HB,Xe.t8l),new Zn(6,0,Xe.t9HB,Xe.t9l),new Zn(8,0,Xe.t10HB,Xe.t10l),new Zn(8,0,Xe.t11HB,Xe.t11l),new Zn(8,0,Xe.t12HB,Xe.t12l),new Zn(16,0,Xe.t13HB,Xe.t13l),new Zn(0,0,null,Xe.t16_5l),new Zn(16,0,Xe.t15HB,Xe.t15l),new Zn(1,1,Xe.t16HB,Xe.t16l),new Zn(2,3,Xe.t16HB,Xe.t16l),new Zn(3,7,Xe.t16HB,Xe.t16l),new Zn(4,15,Xe.t16HB,Xe.t16l),new Zn(6,63,Xe.t16HB,Xe.t16l),new Zn(8,255,Xe.t16HB,Xe.t16l),new Zn(10,1023,Xe.t16HB,Xe.t16l),new Zn(13,8191,Xe.t16HB,Xe.t16l),new Zn(4,15,Xe.t24HB,Xe.t24l),new Zn(5,31,Xe.t24HB,Xe.t24l),new Zn(6,63,Xe.t24HB,Xe.t24l),new Zn(7,127,Xe.t24HB,Xe.t24l),new Zn(8,255,Xe.t24HB,Xe.t24l),new Zn(9,511,Xe.t24HB,Xe.t24l),new Zn(11,2047,Xe.t24HB,Xe.t24l),new Zn(13,8191,Xe.t24HB,Xe.t24l),new Zn(0,0,Xe.t32HB,Xe.t32l),new Zn(0,0,Xe.t33HB,Xe.t33l)];Xe.largetbl=[65540,327685,458759,589832,655369,655370,720906,720907,786443,786444,786444,851980,851980,851980,917517,655370,262149,393222,524295,589832,655369,720906,720906,720907,786443,786443,786444,851980,917516,851980,917516,655370,458759,524295,589832,655369,720905,720906,786442,786443,851979,786443,851979,851980,851980,917516,917517,720905,589832,589832,655369,720905,720906,786442,786442,786443,851979,851979,917515,917516,917516,983052,983052,786441,655369,655369,720905,720906,786442,786442,851978,851979,851979,917515,917516,917516,983052,983052,983053,720905,655370,655369,720906,720906,786442,851978,851979,917515,851979,917515,917516,983052,983052,983052,1048588,786441,720906,720906,720906,786442,851978,851979,851979,851979,917515,917516,917516,917516,983052,983052,1048589,786441,720907,720906,786442,786442,851979,851979,851979,917515,917516,983052,983052,983052,983052,1114125,1114125,786442,720907,786443,786443,851979,851979,851979,917515,917515,983051,983052,983052,983052,1048588,1048589,1048589,786442,786443,786443,786443,851979,851979,917515,917515,983052,983052,983052,983052,1048588,983053,1048589,983053,851978,786444,851979,786443,851979,917515,917516,917516,917516,983052,1048588,1048588,1048589,1114125,1114125,1048589,786442,851980,851980,851979,851979,917515,917516,983052,1048588,1048588,1048588,1048588,1048589,1048589,983053,1048589,851978,851980,917516,917516,917516,917516,983052,983052,983052,983052,1114124,1048589,1048589,1048589,1048589,1179661,851978,983052,917516,917516,917516,983052,983052,1048588,1048588,1048589,1179661,1114125,1114125,1114125,1245197,1114125,851978,917517,983052,851980,917516,1048588,1048588,983052,1048589,1048589,1114125,1179661,1114125,1245197,1114125,1048589,851978,655369,655369,655369,720905,720905,786441,786441,786441,851977,851977,851977,851978,851978,851978,851978,655366];Xe.table23=[65538,262147,458759,262148,327684,458759,393222,458759,524296];Xe.table56=[65539,262148,458758,524296,262148,327684,524294,589831,458757,524294,589831,655368,524295,524295,589832,655369];Xe.bitrate_table=[[0,8,16,24,32,40,48,56,64,80,96,112,128,144,160,-1],[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],[0,8,16,24,32,40,48,56,64,-1,-1,-1,-1,-1,-1,-1]];Xe.samplerate_table=[[22050,24e3,16e3,-1],[44100,48e3,32e3,-1],[11025,12e3,8e3,-1]];Xe.scfsi_band=[0,6,11,16,21];var Pd=St.VbrMode,ab=St.Float,T3=St.Util,Od=St.new_float,k$e=St.new_int,Fp=St.assert;rr.Q_MAX=257;rr.Q_MAX2=116;rr.LARGE_BITS=1e5;rr.IXMAX_VAL=8206;function rr(){var t=null,n=null,e=null;this.setModules=function(b,E,x){t=b,n=E,e=x};function i(b){return d[b+rr.Q_MAX2]}this.IPOW20=function(b){return f[b]};var s=2220446049250313e-31,r=rr.IXMAX_VAL,o=r+2,a=rr.Q_MAX,l=rr.Q_MAX2,c=100;this.nr_of_sfb_block=[[[6,5,5,5],[9,9,9,9],[6,9,9,9]],[[6,5,7,3],[9,9,12,6],[6,9,12,6]],[[11,10,0,0],[18,18,0,0],[15,18,0,0]],[[7,7,7,0],[12,12,12,0],[6,15,12,0]],[[6,6,6,3],[12,9,9,6],[6,12,9,6]],[[8,8,5,0],[15,12,9,0],[6,18,9,0]]];var u=[0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,2,2,3,3,3,2,0];this.pretab=u,this.sfBandIndex=[new ll([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,24,32,42,56,74,100,132,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new ll([0,6,12,18,24,30,36,44,54,66,80,96,114,136,162,194,232,278,332,394,464,540,576],[0,4,8,12,18,26,36,48,62,80,104,136,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new ll([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new ll([0,4,8,12,16,20,24,30,36,44,52,62,74,90,110,134,162,196,238,288,342,418,576],[0,4,8,12,16,22,30,40,52,66,84,106,136,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new ll([0,4,8,12,16,20,24,30,36,42,50,60,72,88,106,128,156,190,230,276,330,384,576],[0,4,8,12,16,22,28,38,50,64,80,100,126,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new ll([0,4,8,12,16,20,24,30,36,44,54,66,82,102,126,156,194,240,296,364,448,550,576],[0,4,8,12,16,22,30,42,58,78,104,138,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new ll([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0/3,12/3,24/3,36/3,54/3,78/3,108/3,144/3,186/3,240/3,312/3,402/3,522/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new ll([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0/3,12/3,24/3,36/3,54/3,78/3,108/3,144/3,186/3,240/3,312/3,402/3,522/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new ll([0,12,24,36,48,60,72,88,108,132,160,192,232,280,336,400,476,566,568,570,572,574,576],[0/3,24/3,48/3,72/3,108/3,156/3,216/3,288/3,372/3,480/3,486/3,492/3,498/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0])];var d=Od(a+l+1),f=Od(a),p=Od(o),m=Od(o);this.adj43=m;function v(b,E){var x=e.ATHformula(E,b);return x-=c,x=Math.pow(10,x/10+b.ATHlower),x}function y(b){for(var E=b.internal_flags.ATH.l,x=b.internal_flags.ATH.psfb21,A=b.internal_flags.ATH.s,I=b.internal_flags.ATH.psfb12,k=b.internal_flags,O=b.out_samplerate,M=0;M<Y.SBMAX_l;M++){var T=k.scalefac_band.l[M],P=k.scalefac_band.l[M+1];E[M]=ab.MAX_VALUE;for(var R=T;R<P;R++){var L=R*O/1152,F=v(b,L);E[M]=Math.min(E[M],F)}}for(var M=0;M<Y.PSFB21;M++){var T=k.scalefac_band.psfb21[M],P=k.scalefac_band.psfb21[M+1];x[M]=ab.MAX_VALUE;for(var R=T;R<P;R++){var L=R*O/1152,F=v(b,L);x[M]=Math.min(x[M],F)}}for(var M=0;M<Y.SBMAX_s;M++){var T=k.scalefac_band.s[M],P=k.scalefac_band.s[M+1];A[M]=ab.MAX_VALUE;for(var R=T;R<P;R++){var L=R*O/384,F=v(b,L);A[M]=Math.min(A[M],F)}A[M]*=k.scalefac_band.s[M+1]-k.scalefac_band.s[M]}for(var M=0;M<Y.PSFB12;M++){var T=k.scalefac_band.psfb12[M],P=k.scalefac_band.psfb12[M+1];I[M]=ab.MAX_VALUE;for(var R=T;R<P;R++){var L=R*O/384,F=v(b,L);I[M]=Math.min(I[M],F)}I[M]*=k.scalefac_band.s[13]-k.scalefac_band.s[12]}if(b.noATH){for(var M=0;M<Y.SBMAX_l;M++)E[M]=1e-20;for(var M=0;M<Y.PSFB21;M++)x[M]=1e-20;for(var M=0;M<Y.SBMAX_s;M++)A[M]=1e-20;for(var M=0;M<Y.PSFB12;M++)I[M]=1e-20}k.ATH.floor=10*Math.log10(v(b,-1))}this.iteration_init=function(b){var E=b.internal_flags,x=E.l3_side,A;if(E.iteration_init_init==0){for(E.iteration_init_init=1,x.main_data_begin=0,y(b),p[0]=0,A=1;A<o;A++)p[A]=Math.pow(A,4/3);for(A=0;A<o-1;A++)m[A]=A+1-Math.pow(.5*(p[A]+p[A+1]),.75);for(m[A]=.5,A=0;A<a;A++)f[A]=Math.pow(2,(A-210)*-.1875);for(A=0;A<=a+l;A++)d[A]=Math.pow(2,(A-210-l)*.25);t.huffman_init(E);{var I,k,O,M;for(A=b.exp_nspsytune>>2&63,A>=32&&(A-=64),I=Math.pow(10,A/4/10),A=b.exp_nspsytune>>8&63,A>=32&&(A-=64),k=Math.pow(10,A/4/10),A=b.exp_nspsytune>>14&63,A>=32&&(A-=64),O=Math.pow(10,A/4/10),A=b.exp_nspsytune>>20&63,A>=32&&(A-=64),M=O*Math.pow(10,A/4/10),A=0;A<Y.SBMAX_l;A++){var T;A<=6?T=I:A<=13?T=k:A<=20?T=O:T=M,E.nsPsy.longfact[A]=T}for(A=0;A<Y.SBMAX_s;A++){var T;A<=5?T=I:A<=10?T=k:A<=11?T=O:T=M,E.nsPsy.shortfact[A]=T}}}},this.on_pe=function(b,E,x,A,I,k){var O=b.internal_flags,M=0,T,P=k$e(2),R,L=new NW(M),F=n.ResvMaxBits(b,A,L,k);M=L.bits;var B=M+F;for(B>ii.MAX_BITS_PER_GRANULE&&(B=ii.MAX_BITS_PER_GRANULE),T=0,R=0;R<O.channels_out;++R)x[R]=Math.min(ii.MAX_BITS_PER_CHANNEL,M/O.channels_out),P[R]=0|x[R]*E[I][R]/700-x[R],P[R]>A*3/4&&(P[R]=A*3/4),P[R]<0&&(P[R]=0),P[R]+x[R]>ii.MAX_BITS_PER_CHANNEL&&(P[R]=Math.max(0,ii.MAX_BITS_PER_CHANNEL-x[R])),T+=P[R];if(T>F)for(R=0;R<O.channels_out;++R)P[R]=F*P[R]/T;for(R=0;R<O.channels_out;++R)x[R]+=P[R],F-=P[R];for(T=0,R=0;R<O.channels_out;++R)T+=x[R];if(T>ii.MAX_BITS_PER_GRANULE){var z=0;for(R=0;R<O.channels_out;++R)x[R]*=ii.MAX_BITS_PER_GRANULE,x[R]/=T,z+=x[R]}return B},this.reduce_side=function(b,E,x,A){Fp(b[0]+b[1]<=ii.MAX_BITS_PER_GRANULE);var I=.33*(.5-E)/.5;I<0&&(I=0),I>.5&&(I=.5);var k=0|I*.5*(b[0]+b[1]);k>ii.MAX_BITS_PER_CHANNEL-b[0]&&(k=ii.MAX_BITS_PER_CHANNEL-b[0]),k<0&&(k=0),b[1]>=125&&(b[1]-k>125?(b[0]<x&&(b[0]+=k),b[1]-=k):(b[0]+=b[1]-125,b[1]=125)),k=b[0]+b[1],k>A&&(b[0]=A*b[0]/k,b[1]=A*b[1]/k),Fp(b[0]<=ii.MAX_BITS_PER_CHANNEL),Fp(b[1]<=ii.MAX_BITS_PER_CHANNEL),Fp(b[0]+b[1]<=ii.MAX_BITS_PER_GRANULE)},this.athAdjust=function(b,E,x){var A=90.30873362,I=94.82444863,k=T3.FAST_LOG10_X(E,10),O=b*b,M=0;return k-=x,O>1e-20&&(M=1+T3.FAST_LOG10_X(O,10/A)),M<0&&(M=0),k*=M,k+=x+A-I,Math.pow(10,.1*k)},this.calc_xmin=function(b,E,x,A){var I=0,k=b.internal_flags,O,M=0,T=0,P=k.ATH,R=x.xr,L=b.VBR==Pd.vbr_mtrh?1:0,F=k.masking_lower;for((b.VBR==Pd.vbr_mtrh||b.VBR==Pd.vbr_mt)&&(F=1),O=0;O<x.psy_lmax;O++){var B,z,J,q,G,S;b.VBR==Pd.vbr_rh||b.VBR==Pd.vbr_mtrh?z=athAdjust(P.adjust,P.l[O],P.floor):z=P.adjust*P.l[O],G=x.width[O],J=z/G,q=s,S=G>>1,B=0;do{var V,re;V=R[M]*R[M],B+=V,q+=V<J?V:J,M++,re=R[M]*R[M],B+=re,q+=re<J?re:J,M++}while(--S>0);if(B>z&&T++,O==Y.SBPSY_l){var U=z*k.nsPsy.longfact[O];q<U&&(q=U)}if(L!=0&&(z=q),!b.ATHonly){var Pe=E.en.l[O];if(Pe>0){var U;U=B*E.thm.l[O]*F/Pe,L!=0&&(U*=k.nsPsy.longfact[O]),z<U&&(z=U)}}L!=0?A[I++]=z:A[I++]=z*k.nsPsy.longfact[O]}var Fe=575;if(x.block_type!=Y.SHORT_TYPE)for(var Ne=576;Ne--!=0&&Zo.EQ(R[Ne],0);)Fe=Ne;x.max_nonzero_coeff=Fe;for(var ne=x.sfb_smin;O<x.psymax;ne++,O+=3){var G,me,pe;for(b.VBR==Pd.vbr_rh||b.VBR==Pd.vbr_mtrh?pe=athAdjust(P.adjust,P.s[ne],P.floor):pe=P.adjust*P.s[ne],G=x.width[O],me=0;me<3;me++){var B=0,z,J,q,S=G>>1;J=pe/G,q=s;do{var V,re;V=R[M]*R[M],B+=V,q+=V<J?V:J,M++,re=R[M]*R[M],B+=re,q+=re<J?re:J,M++}while(--S>0);if(B>pe&&T++,ne==Y.SBPSY_s){var U=pe*k.nsPsy.shortfact[ne];q<U&&(q=U)}if(L!=0?z=q:z=pe,!b.ATHonly&&!b.ATHshort){var Pe=E.en.s[ne][me];if(Pe>0){var U;U=B*E.thm.s[ne][me]*F/Pe,L!=0&&(U*=k.nsPsy.shortfact[ne]),z<U&&(z=U)}}L!=0?A[I++]=z:A[I++]=z*k.nsPsy.shortfact[ne]}b.useTemporal&&(A[I-3]>A[I-3+1]&&(A[I-3+1]+=(A[I-3]-A[I-3+1])*k.decay),A[I-3+1]>A[I-3+2]&&(A[I-3+2]+=(A[I-3+1]-A[I-3+2])*k.decay))}return T};function _(b){this.s=b}this.calc_noise_core=function(b,E,x,A){var I=0,k=E.s,O=b.l3_enc;if(k>b.count1)for(;x--!=0;){var M;M=b.xr[k],k++,I+=M*M,M=b.xr[k],k++,I+=M*M}else if(k>b.big_values){var T=Od(2);for(T[0]=0,T[1]=A;x--!=0;){var M;M=Math.abs(b.xr[k])-T[O[k]],k++,I+=M*M,M=Math.abs(b.xr[k])-T[O[k]],k++,I+=M*M}}else for(;x--!=0;){var M;M=Math.abs(b.xr[k])-p[O[k]]*A,k++,I+=M*M,M=Math.abs(b.xr[k])-p[O[k]]*A,k++,I+=M*M}return E.s=k,I},this.calc_noise=function(b,E,x,A,I){var k=0,O=0,M,T,P=0,R=0,L=0,F=-20,B=0,z=b.scalefac,J=0;for(A.over_SSD=0,M=0;M<b.psymax;M++){var q=b.global_gain-(z[J++]+(b.preflag!=0?u[M]:0)<<b.scalefac_scale+1)-b.subblock_gain[b.window[M]]*8,G=0;if(I!=null&&I.step[M]==q)G=I.noise[M],B+=b.width[M],x[k++]=G/E[O++],G=I.noise_log[M];else{var S=i(q);if(T=b.width[M]>>1,B+b.width[M]>b.max_nonzero_coeff){var V;V=b.max_nonzero_coeff-B+1,V>0?T=V>>1:T=0}var re=new _(B);G=this.calc_noise_core(b,re,T,S),B=re.s,I!=null&&(I.step[M]=q,I.noise[M]=G),G=x[k++]=G/E[O++],G=T3.FAST_LOG10(Math.max(G,1e-20)),I!=null&&(I.noise_log[M]=G)}if(I!=null&&(I.global_gain=b.global_gain),L+=G,G>0){var U;U=Math.max(0|G*10+.5,1),A.over_SSD+=U*U,P++,R+=G}F=Math.max(F,G)}return A.over_count=P,A.tot_noise=L,A.over_noise=R,A.max_noise=F,P},this.set_pinfo=function(b,E,x,A,I){var k=b.internal_flags,O,M,T,P,R,L=E.scalefac_scale==0?.5:1,F=E.scalefac,B=Od(L3Side.SFBMAX),z=Od(L3Side.SFBMAX),J=new CalcNoiseResult;calc_xmin(b,x,E,B),calc_noise(E,B,z,J,null);var q=0;for(M=E.sfb_lmax,E.block_type!=Y.SHORT_TYPE&&E.mixed_block_flag==0&&(M=22),O=0;O<M;O++){var G=k.scalefac_band.l[O],S=k.scalefac_band.l[O+1],V=S-G;for(P=0;q<S;q++)P+=E.xr[q]*E.xr[q];P/=V,R=1e15,k.pinfo.en[A][I][O]=R*P,k.pinfo.xfsf[A][I][O]=R*B[O]*z[O]/V,x.en.l[O]>0&&!b.ATHonly?P=P/x.en.l[O]:P=0,k.pinfo.thr[A][I][O]=R*Math.max(P*x.thm.l[O],k.ATH.l[O]),k.pinfo.LAMEsfb[A][I][O]=0,E.preflag!=0&&O>=11&&(k.pinfo.LAMEsfb[A][I][O]=-L*u[O]),O<Y.SBPSY_l&&(Fp(F[O]>=0),k.pinfo.LAMEsfb[A][I][O]-=L*F[O])}if(E.block_type==Y.SHORT_TYPE)for(M=O,O=E.sfb_smin;O<Y.SBMAX_s;O++)for(var G=k.scalefac_band.s[O],S=k.scalefac_band.s[O+1],V=S-G,re=0;re<3;re++){for(P=0,T=G;T<S;T++)P+=E.xr[q]*E.xr[q],q++;P=Math.max(P/V,1e-20),R=1e15,k.pinfo.en_s[A][I][3*O+re]=R*P,k.pinfo.xfsf_s[A][I][3*O+re]=R*B[M]*z[M]/V,x.en.s[O][re]>0?P=P/x.en.s[O][re]:P=0,(b.ATHonly||b.ATHshort)&&(P=0),k.pinfo.thr_s[A][I][3*O+re]=R*Math.max(P*x.thm.s[O][re],k.ATH.s[O]),k.pinfo.LAMEsfb_s[A][I][3*O+re]=-2*E.subblock_gain[re],O<Y.SBPSY_s&&(k.pinfo.LAMEsfb_s[A][I][3*O+re]-=L*F[M]),M++}k.pinfo.LAMEqss[A][I]=E.global_gain,k.pinfo.LAMEmainbits[A][I]=E.part2_3_length+E.part2_length,k.pinfo.LAMEsfbits[A][I]=E.part2_length,k.pinfo.over[A][I]=J.over_count,k.pinfo.max_noise[A][I]=J.max_noise*10,k.pinfo.over_noise[A][I]=J.over_noise*10,k.pinfo.tot_noise[A][I]=J.tot_noise*10,k.pinfo.over_SSD[A][I]=J.over_SSD}}var E$e=St.System,S$e=St.Arrays,Np=St.new_int,x3=St.assert;function x1(){var t=null;this.qupvt=null,this.setModules=function(T){this.qupvt=T,t=T};function n(T){this.bits=0|T}var e=[[0,0],[0,0],[0,0],[0,0],[0,0],[0,1],[1,1],[1,1],[1,2],[2,2],[2,3],[2,3],[3,4],[3,4],[3,4],[4,5],[4,5],[4,6],[5,6],[5,6],[5,7],[6,7],[6,7]];function i(T,P,R,L,F,B){var z=.5946/P;for(T=T>>1;T--!=0;)F[B++]=z>R[L++]?0:1,F[B++]=z>R[L++]?0:1}function s(T,P,R,L,F,B){T=T>>1;var z=T%2;for(T=T>>1;T--!=0;){var J,q,G,S,V,re,U,Pe;J=R[L++]*P,q=R[L++]*P,V=0|J,G=R[L++]*P,re=0|q,S=R[L++]*P,U=0|G,J+=t.adj43[V],Pe=0|S,q+=t.adj43[re],F[B++]=0|J,G+=t.adj43[U],F[B++]=0|q,S+=t.adj43[Pe],F[B++]=0|G,F[B++]=0|S}if(z!=0){var J,q,V,re;J=R[L++]*P,q=R[L++]*P,V=0|J,re=0|q,J+=t.adj43[V],q+=t.adj43[re],F[B++]=0|J,F[B++]=0|q}}function r(T,P,R,L,F){var B,z,J=0,q,G=0,S=0,V=0,re=P,U=0,Pe=re,Fe=0,Ne=T,ne=0;for(q=F!=null&&L.global_gain==F.global_gain,L.block_type==Y.SHORT_TYPE?z=38:z=21,B=0;B<=z;B++){var me=-1;if((q||L.block_type==Y.NORM_TYPE)&&(me=L.global_gain-(L.scalefac[B]+(L.preflag!=0?t.pretab[B]:0)<<L.scalefac_scale+1)-L.subblock_gain[L.window[B]]*8),x3(L.width[B]>=0),q&&F.step[B]==me)G!=0&&(s(G,R,Ne,ne,Pe,Fe),G=0),S!=0&&(i(S,R,Ne,ne,Pe,Fe),S=0);else{var pe=L.width[B];if(J+L.width[B]>L.max_nonzero_coeff){var ge;ge=L.max_nonzero_coeff-J+1,S$e.fill(P,L.max_nonzero_coeff,576,0),pe=ge,pe<0&&(pe=0),B=z+1}if(G==0&&S==0&&(Pe=re,Fe=U,Ne=T,ne=V),F!=null&&F.sfb_count1>0&&B>=F.sfb_count1&&F.step[B]>0&&me>=F.step[B]?(G!=0&&(s(G,R,Ne,ne,Pe,Fe),G=0,Pe=re,Fe=U,Ne=T,ne=V),S+=pe):(S!=0&&(i(S,R,Ne,ne,Pe,Fe),S=0,Pe=re,Fe=U,Ne=T,ne=V),G+=pe),pe<=0){S!=0&&(i(S,R,Ne,ne,Pe,Fe),S=0),G!=0&&(s(G,R,Ne,ne,Pe,Fe),G=0);break}}B<=z&&(U+=L.width[B],V+=L.width[B],J+=L.width[B])}G!=0&&(s(G,R,Ne,ne,Pe,Fe),G=0),S!=0&&(i(S,R,Ne,ne,Pe,Fe),S=0)}function o(T,P,R){var L=0,F=0;do{var B=T[P++],z=T[P++];L<B&&(L=B),F<z&&(F=z)}while(P<R);return L<F&&(L=F),L}function a(T,P,R,L,F,B){var z=Xe.ht[L].xlen*65536+Xe.ht[F].xlen,J=0,q;do{var G=T[P++],S=T[P++];G!=0&&(G>14&&(G=15,J+=z),G*=16),S!=0&&(S>14&&(S=15,J+=z),G+=S),J+=Xe.largetbl[G]}while(P<R);return q=J&65535,J>>=16,J>q&&(J=q,L=F),B.bits+=J,L}function l(T,P,R,L){var F=0,B=Xe.ht[1].hlen;do{var z=T[P+0]*2+T[P+1];P+=2,F+=B[z]}while(P<R);return L.bits+=F,1}function c(T,P,R,L,F){var B=0,z,J=Xe.ht[L].xlen,q;L==2?q=Xe.table23:q=Xe.table56;do{var G=T[P+0]*J+T[P+1];P+=2,B+=q[G]}while(P<R);return z=B&65535,B>>=16,B>z&&(B=z,L++),F.bits+=B,L}function u(T,P,R,L,F){var B=0,z=0,J=0,q=Xe.ht[L].xlen,G=Xe.ht[L].hlen,S=Xe.ht[L+1].hlen,V=Xe.ht[L+2].hlen;do{var re=T[P+0]*q+T[P+1];P+=2,B+=G[re],z+=S[re],J+=V[re]}while(P<R);var U=L;return B>z&&(B=z,U++),B>J&&(B=J,U=L+2),F.bits+=B,U}var d=[1,2,5,7,7,10,10,13,13,13,13,13,13,13,13];function f(T,P,R,L){var F=o(T,P,R);switch(F){case 0:return F;case 1:return l(T,P,R,L);case 2:case 3:return c(T,P,R,d[F-1],L);case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:return u(T,P,R,d[F-1],L);default:if(F>rr.IXMAX_VAL)return L.bits=rr.LARGE_BITS,-1;F-=15;var B;for(B=24;B<32&&!(Xe.ht[B].linmax>=F);B++);var z;for(z=B-8;z<24&&!(Xe.ht[z].linmax>=F);z++);return a(T,P,R,z,B,L)}}this.noquant_count_bits=function(T,P,R){var L=P.l3_enc,F=Math.min(576,P.max_nonzero_coeff+2>>1<<1);for(R!=null&&(R.sfb_count1=0);F>1&&!(L[F-1]|L[F-2]);F-=2);P.count1=F;for(var B=0,z=0;F>3;F-=4){var J;if(((L[F-1]|L[F-2]|L[F-3]|L[F-4])&2147483647)>1)break;J=((L[F-4]*2+L[F-3])*2+L[F-2])*2+L[F-1],B+=Xe.t32l[J],z+=Xe.t33l[J]}var q=B;if(P.count1table_select=0,B>z&&(q=z,P.count1table_select=1),P.count1bits=q,P.big_values=F,F==0)return q;if(P.block_type==Y.SHORT_TYPE)B=3*T.scalefac_band.s[3],B>P.big_values&&(B=P.big_values),z=P.big_values;else if(P.block_type==Y.NORM_TYPE){if(B=P.region0_count=T.bv_scf[F-2],z=P.region1_count=T.bv_scf[F-1],z=T.scalefac_band.l[B+z+2],B=T.scalefac_band.l[B+1],z<F){var G=new n(q);P.table_select[2]=f(L,z,F,G),q=G.bits}}else P.region0_count=7,P.region1_count=Y.SBMAX_l-1-7-1,B=T.scalefac_band.l[8],z=F,B>z&&(B=z);if(B=Math.min(B,F),z=Math.min(z,F),B>0){var G=new n(q);P.table_select[0]=f(L,0,B,G),q=G.bits}if(B<z){var G=new n(q);P.table_select[1]=f(L,B,z,G),q=G.bits}if(T.use_best_huffman==2&&(P.part2_3_length=q,best_huffman_divide(T,P),q=P.part2_3_length),R!=null&&P.block_type==Y.NORM_TYPE){for(var S=0;T.scalefac_band.l[S]<P.big_values;)S++;R.sfb_count1=S}return q},this.count_bits=function(T,P,R,L){var F=R.l3_enc,B=rr.IXMAX_VAL/t.IPOW20(R.global_gain);if(R.xrpow_max>B)return rr.LARGE_BITS;if(r(P,F,t.IPOW20(R.global_gain),R,L),T.substep_shaping&2)for(var z=0,J=R.global_gain+R.scalefac_scale,q=.634521682242439/t.IPOW20(J),G=0;G<R.sfbmax;G++){var S=R.width[G];if(T.pseudohalf[G]==0)z+=S;else{var V;for(V=z,z+=S;V<z;++V)F[V]=P[V]>=q?F[V]:0}}return this.noquant_count_bits(T,R,L)};function p(T,P,R,L,F,B,z){for(var J=P.big_values,q=0;q<=22;q++)L[q]=rr.LARGE_BITS;for(var q=0;q<16;q++){var G=T.scalefac_band.l[q+1];if(G>=J)break;var S=0,V=new n(S),re=f(R,0,G,V);S=V.bits;for(var U=0;U<8;U++){var Pe=T.scalefac_band.l[q+U+2];if(Pe>=J)break;var Fe=S;V=new n(Fe);var Ne=f(R,G,Pe,V);Fe=V.bits,L[q+U]>Fe&&(L[q+U]=Fe,F[q+U]=q,B[q+U]=re,z[q+U]=Ne)}}}function m(T,P,R,L,F,B,z,J){for(var q=P.big_values,G=2;G<Y.SBMAX_l+1;G++){var S=T.scalefac_band.l[G];if(S>=q)break;var V=F[G-2]+P.count1bits;if(R.part2_3_length<=V)break;var re=new n(V),U=f(L,S,q,re);V=re.bits,!(R.part2_3_length<=V)&&(R.assign(P),R.part2_3_length=V,R.region0_count=B[G-2],R.region1_count=G-2-B[G-2],R.table_select[0]=z[G-2],R.table_select[1]=J[G-2],R.table_select[2]=U)}}this.best_huffman_divide=function(T,P){var R=new X_,L=P.l3_enc,F=Np(23),B=Np(23),z=Np(23),J=Np(23);if(!(P.block_type==Y.SHORT_TYPE&&T.mode_gr==1)){R.assign(P),P.block_type==Y.NORM_TYPE&&(p(T,P,L,F,B,z,J),m(T,R,P,L,F,B,z,J));var q=R.big_values;if(!(q==0||(L[q-2]|L[q-1])>1)&&(q=P.count1+2,!(q>576))){R.assign(P),R.count1=q;for(var G=0,S=0;q>R.big_values;q-=4){var V=((L[q-4]*2+L[q-3])*2+L[q-2])*2+L[q-1];G+=Xe.t32l[V],S+=Xe.t33l[V]}if(R.big_values=q,R.count1table_select=0,G>S&&(G=S,R.count1table_select=1),R.count1bits=G,R.block_type==Y.NORM_TYPE)m(T,R,P,L,F,B,z,J);else{if(R.part2_3_length=G,G=T.scalefac_band.l[8],G>q&&(G=q),G>0){var re=new n(R.part2_3_length);R.table_select[0]=f(L,0,G,re),R.part2_3_length=re.bits}if(q>G){var re=new n(R.part2_3_length);R.table_select[1]=f(L,G,q,re),R.part2_3_length=re.bits}P.part2_3_length>R.part2_3_length&&P.assign(R)}}}};var v=[1,1,1,1,8,2,2,2,4,4,4,8,8,8,16,16],y=[1,2,4,8,1,2,4,8,2,4,8,2,4,8,4,8],_=[0,0,0,0,3,1,1,1,2,2,2,3,3,3,4,4],b=[0,1,2,3,0,1,2,3,1,2,3,1,2,3,2,3];x1.slen1_tab=_,x1.slen2_tab=b;function E(T,P){for(var R,L=P.tt[1][T],F=P.tt[0][T],B=0;B<Xe.scfsi_band.length-1;B++){for(R=Xe.scfsi_band[B];R<Xe.scfsi_band[B+1]&&!(F.scalefac[R]!=L.scalefac[R]&&L.scalefac[R]>=0);R++);if(R==Xe.scfsi_band[B+1]){for(R=Xe.scfsi_band[B];R<Xe.scfsi_band[B+1];R++)L.scalefac[R]=-1;P.scfsi[T][B]=1}}var z=0,J=0;for(R=0;R<11;R++)L.scalefac[R]!=-1&&(J++,z<L.scalefac[R]&&(z=L.scalefac[R]));for(var q=0,G=0;R<Y.SBPSY_l;R++)L.scalefac[R]!=-1&&(G++,q<L.scalefac[R]&&(q=L.scalefac[R]));for(var B=0;B<16;B++)if(z<v[B]&&q<y[B]){var S=_[B]*J+b[B]*G;L.part2_length>S&&(L.part2_length=S,L.scalefac_compress=B)}}this.best_scalefac_store=function(T,P,R,L){var F=L.tt[P][R],B,z,J,q,G=0;for(J=0,B=0;B<F.sfbmax;B++){var S=F.width[B];for(J+=S,q=-S;q<0&&F.l3_enc[q+J]==0;q++);q==0&&(F.scalefac[B]=G=-2)}if(F.scalefac_scale==0&&F.preflag==0){var V=0;for(B=0;B<F.sfbmax;B++)F.scalefac[B]>0&&(V|=F.scalefac[B]);if(!(V&1)&&V!=0){for(B=0;B<F.sfbmax;B++)F.scalefac[B]>0&&(F.scalefac[B]>>=1);F.scalefac_scale=G=1}}if(F.preflag==0&&F.block_type!=Y.SHORT_TYPE&&T.mode_gr==2){for(B=11;B<Y.SBPSY_l&&!(F.scalefac[B]<t.pretab[B]&&F.scalefac[B]!=-2);B++);if(B==Y.SBPSY_l){for(B=11;B<Y.SBPSY_l;B++)F.scalefac[B]>0&&(F.scalefac[B]-=t.pretab[B]);F.preflag=G=1}}for(z=0;z<4;z++)L.scfsi[R][z]=0;for(T.mode_gr==2&&P==1&&L.tt[0][R].block_type!=Y.SHORT_TYPE&&L.tt[1][R].block_type!=Y.SHORT_TYPE&&(E(R,L),G=0),B=0;B<F.sfbmax;B++)F.scalefac[B]==-2&&(F.scalefac[B]=0);G!=0&&(T.mode_gr==2?this.scale_bitcount(F):this.scale_bitcount_lsf(T,F))};function x(T,P){for(var R=0;R<P;++R)if(T[R]<0)return!1;return!0}var A=[0,18,36,54,54,36,54,72,54,72,90,72,90,108,108,126],I=[0,18,36,54,51,35,53,71,52,70,88,69,87,105,104,122],k=[0,10,20,30,33,21,31,41,32,42,52,43,53,63,64,74];this.scale_bitcount=function(T){var P,R,L=0,F=0,B,z=T.scalefac;if(x3(x(z,T.sfbmax)),T.block_type==Y.SHORT_TYPE)B=A,T.mixed_block_flag!=0&&(B=I);else if(B=k,T.preflag==0){for(R=11;R<Y.SBPSY_l&&!(z[R]<t.pretab[R]);R++);if(R==Y.SBPSY_l)for(T.preflag=1,R=11;R<Y.SBPSY_l;R++)z[R]-=t.pretab[R]}for(R=0;R<T.sfbdivide;R++)L<z[R]&&(L=z[R]);for(;R<T.sfbmax;R++)F<z[R]&&(F=z[R]);for(T.part2_length=rr.LARGE_BITS,P=0;P<16;P++)L<v[P]&&F<y[P]&&T.part2_length>B[P]&&(T.part2_length=B[P],T.scalefac_compress=P);return T.part2_length==rr.LARGE_BITS};var O=[[15,15,7,7],[15,15,7,0],[7,3,0,0],[15,31,31,0],[7,7,7,0],[3,3,0,0]];this.scale_bitcount_lsf=function(T,P){var R,L,F,B,z,J,q,G,S=Np(4),V=P.scalefac;for(P.preflag!=0?R=2:R=0,q=0;q<4;q++)S[q]=0;if(P.block_type==Y.SHORT_TYPE){L=1;var re=t.nr_of_sfb_block[R][L];for(G=0,F=0;F<4;F++)for(B=re[F]/3,q=0;q<B;q++,G++)for(z=0;z<3;z++)V[G*3+z]>S[F]&&(S[F]=V[G*3+z])}else{L=0;var re=t.nr_of_sfb_block[R][L];for(G=0,F=0;F<4;F++)for(B=re[F],q=0;q<B;q++,G++)V[G]>S[F]&&(S[F]=V[G])}for(J=!1,F=0;F<4;F++)S[F]>O[R][F]&&(J=!0);if(!J){var U,Pe,Fe,Ne;for(P.sfb_partition_table=t.nr_of_sfb_block[R][L],F=0;F<4;F++)P.slen[F]=M[S[F]];switch(U=P.slen[0],Pe=P.slen[1],Fe=P.slen[2],Ne=P.slen[3],R){case 0:P.scalefac_compress=(U*5+Pe<<4)+(Fe<<2)+Ne;break;case 1:P.scalefac_compress=400+(U*5+Pe<<2)+Fe;break;case 2:P.scalefac_compress=500+U*3+Pe;break;default:E$e.err.printf(`intensity stereo not implemented yet
`);break}}if(!J)for(x3(P.sfb_partition_table!=null),P.part2_length=0,F=0;F<4;F++)P.part2_length+=P.slen[F]*P.sfb_partition_table[F];return J};var M=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];this.huffman_init=function(T){for(var P=2;P<=576;P+=2){for(var R=0,L;T.scalefac_band.l[++R]<P;);for(L=e[R][0];T.scalefac_band.l[L+1]>P;)L--;for(L<0&&(L=e[R][0]),T.bv_scf[P-2]=L,L=e[R][1];T.scalefac_band.l[L+T.bv_scf[P-2]+2]>P;)L--;L<0&&(L=e[R][1]),T.bv_scf[P-1]=L}}}var rl=St.System,T$e=St.Arrays,x$e=St.new_byte,A$e=St.new_float_n,I$e=St.new_int,ys=St.assert;Zo.EQ=function(t,n){return Math.abs(t)>Math.abs(n)?Math.abs(t-n)<=Math.abs(t)*1e-6:Math.abs(t-n)<=Math.abs(n)*1e-6};Zo.NEQ=function(t,n){return!Zo.EQ(t,n)};function Zo(){var t=this,n=32773,e=null,i=null,s=null,r=null;this.setModules=function(O,M,T,P){e=O,i=M,s=T,r=P};var o=null,a=0,l=0,c=0;this.getframebits=function(O){var M=O.internal_flags,T;M.bitrate_index!=0?T=Xe.bitrate_table[O.version][M.bitrate_index]:T=O.brate;var P=0|(O.version+1)*72e3*T/O.out_samplerate+M.padding;return 8*P};function u(O){rl.arraycopy(O.header[O.w_ptr].buf,0,o,l,O.sideinfo_len),l+=O.sideinfo_len,a+=O.sideinfo_len*8,O.w_ptr=O.w_ptr+1&ii.MAX_HEADER_BUF-1}function d(O,M,T){for(;T>0;){var P;c==0&&(c=8,l++,ys(O.header[O.w_ptr].write_timing>=a),O.header[O.w_ptr].write_timing==a&&u(O),o[l]=0),P=Math.min(T,c),T-=P,c-=P,o[l]|=M>>T<<c,a+=P}}function f(O,M,T){for(;T>0;){var P;c==0&&(c=8,l++,o[l]=0),P=Math.min(T,c),T-=P,c-=P,o[l]|=M>>T<<c,a+=P}}function p(O,M){var T=O.internal_flags,P;if(M>=8&&(d(T,76,8),M-=8),M>=8&&(d(T,65,8),M-=8),M>=8&&(d(T,77,8),M-=8),M>=8&&(d(T,69,8),M-=8),M>=32){var R=s.getLameShortVersion();if(M>=32)for(P=0;P<R.length&&M>=8;++P)M-=8,d(T,R.charAt(P),8)}for(;M>=1;M-=1)d(T,T.ancillary_flag,1),T.ancillary_flag^=O.disable_reservoir?0:1}function m(O,M,T){for(var P=O.header[O.h_ptr].ptr;T>0;){var R=Math.min(T,8-(P&7));T-=R,O.header[O.h_ptr].buf[P>>3]|=M>>T<<8-(P&7)-R,P+=R}O.header[O.h_ptr].ptr=P}function v(O,M){O<<=8;for(var T=0;T<8;T++)O<<=1,M<<=1,(M^O)&65536&&(M^=n);return M}this.CRC_writeheader=function(O,M){var T=65535;T=v(M[2]&255,T),T=v(M[3]&255,T);for(var P=6;P<O.sideinfo_len;P++)T=v(M[P]&255,T);M[4]=byte(T>>8),M[5]=byte(T&255)};function y(O,M){var T=O.internal_flags,P,R,L;if(P=T.l3_side,T.header[T.h_ptr].ptr=0,T$e.fill(T.header[T.h_ptr].buf,0,T.sideinfo_len,0),O.out_samplerate<16e3?m(T,4094,12):m(T,4095,12),m(T,O.version,1),m(T,1,2),m(T,O.error_protection?0:1,1),m(T,T.bitrate_index,4),m(T,T.samplerate_index,2),m(T,T.padding,1),m(T,O.extension,1),m(T,O.mode.ordinal(),2),m(T,T.mode_ext,2),m(T,O.copyright,1),m(T,O.original,1),m(T,O.emphasis,2),O.error_protection&&m(T,0,16),O.version==1){for(ys(P.main_data_begin>=0),m(T,P.main_data_begin,9),T.channels_out==2?m(T,P.private_bits,3):m(T,P.private_bits,5),L=0;L<T.channels_out;L++){var F;for(F=0;F<4;F++)m(T,P.scfsi[L][F],1)}for(R=0;R<2;R++)for(L=0;L<T.channels_out;L++){var B=P.tt[R][L];m(T,B.part2_3_length+B.part2_length,12),m(T,B.big_values/2,9),m(T,B.global_gain,8),m(T,B.scalefac_compress,4),B.block_type!=Y.NORM_TYPE?(m(T,1,1),m(T,B.block_type,2),m(T,B.mixed_block_flag,1),B.table_select[0]==14&&(B.table_select[0]=16),m(T,B.table_select[0],5),B.table_select[1]==14&&(B.table_select[1]=16),m(T,B.table_select[1],5),m(T,B.subblock_gain[0],3),m(T,B.subblock_gain[1],3),m(T,B.subblock_gain[2],3)):(m(T,0,1),B.table_select[0]==14&&(B.table_select[0]=16),m(T,B.table_select[0],5),B.table_select[1]==14&&(B.table_select[1]=16),m(T,B.table_select[1],5),B.table_select[2]==14&&(B.table_select[2]=16),m(T,B.table_select[2],5),ys(B.region0_count>=0&&B.region0_count<16),ys(B.region1_count>=0&&B.region1_count<8),m(T,B.region0_count,4),m(T,B.region1_count,3)),m(T,B.preflag,1),m(T,B.scalefac_scale,1),m(T,B.count1table_select,1)}}else for(ys(P.main_data_begin>=0),m(T,P.main_data_begin,8),m(T,P.private_bits,T.channels_out),R=0,L=0;L<T.channels_out;L++){var B=P.tt[R][L];m(T,B.part2_3_length+B.part2_length,12),m(T,B.big_values/2,9),m(T,B.global_gain,8),m(T,B.scalefac_compress,9),B.block_type!=Y.NORM_TYPE?(m(T,1,1),m(T,B.block_type,2),m(T,B.mixed_block_flag,1),B.table_select[0]==14&&(B.table_select[0]=16),m(T,B.table_select[0],5),B.table_select[1]==14&&(B.table_select[1]=16),m(T,B.table_select[1],5),m(T,B.subblock_gain[0],3),m(T,B.subblock_gain[1],3),m(T,B.subblock_gain[2],3)):(m(T,0,1),B.table_select[0]==14&&(B.table_select[0]=16),m(T,B.table_select[0],5),B.table_select[1]==14&&(B.table_select[1]=16),m(T,B.table_select[1],5),B.table_select[2]==14&&(B.table_select[2]=16),m(T,B.table_select[2],5),ys(B.region0_count>=0&&B.region0_count<16),ys(B.region1_count>=0&&B.region1_count<8),m(T,B.region0_count,4),m(T,B.region1_count,3)),m(T,B.scalefac_scale,1),m(T,B.count1table_select,1)}O.error_protection&&CRC_writeheader(T,T.header[T.h_ptr].buf);{var z=T.h_ptr;ys(T.header[z].ptr==T.sideinfo_len*8),T.h_ptr=z+1&ii.MAX_HEADER_BUF-1,T.header[T.h_ptr].write_timing=T.header[z].write_timing+M,T.h_ptr==T.w_ptr&&rl.err.println(`Error: MAX_HEADER_BUF too small in bitstream.c 
`)}}function _(O,M){var T=Xe.ht[M.count1table_select+32],P,R=0,L=M.big_values,F=M.big_values;for(ys(M.count1table_select<2),P=(M.count1-M.big_values)/4;P>0;--P){var B=0,z=0,J;J=M.l3_enc[L+0],J!=0&&(z+=8,M.xr[F+0]<0&&B++),J=M.l3_enc[L+1],J!=0&&(z+=4,B*=2,M.xr[F+1]<0&&B++),J=M.l3_enc[L+2],J!=0&&(z+=2,B*=2,M.xr[F+2]<0&&B++),J=M.l3_enc[L+3],J!=0&&(z++,B*=2,M.xr[F+3]<0&&B++),L+=4,F+=4,d(O,B+T.table[z],T.hlen[z]),R+=T.hlen[z]}return R}function b(O,M,T,P,R){var L=Xe.ht[M],F=0;if(M==0)return F;for(var B=T;B<P;B+=2){var z=0,J=0,q=L.xlen,G=L.xlen,S=0,V=R.l3_enc[B],re=R.l3_enc[B+1];if(V!=0&&(R.xr[B]<0&&S++,z--),M>15){if(V>14){var U=V-15;ys(U<=L.linmax),S|=U<<1,J=q,V=15}if(re>14){var Pe=re-15;ys(Pe<=L.linmax),S<<=q,S|=Pe,J+=q,re=15}G=16}re!=0&&(S<<=1,R.xr[B+1]<0&&S++,z--),V=V*G+re,J-=z,z+=L.hlen[V],d(O,L.table[V],z),d(O,S,J),F+=z+J}return F}function E(O,M){var T=3*O.scalefac_band.s[3];T>M.big_values&&(T=M.big_values);var P=b(O,M.table_select[0],0,T,M);return P+=b(O,M.table_select[1],T,M.big_values,M),P}function x(O,M){var T,P,R,L;T=M.big_values;var F=M.region0_count+1;return ys(F<O.scalefac_band.l.length),R=O.scalefac_band.l[F],F+=M.region1_count+1,ys(F<O.scalefac_band.l.length),L=O.scalefac_band.l[F],R>T&&(R=T),L>T&&(L=T),P=b(O,M.table_select[0],0,R,M),P+=b(O,M.table_select[1],R,L,M),P+=b(O,M.table_select[2],L,T,M),P}function A(O){var M,T,P,R,L=0,F=O.internal_flags,B=F.l3_side;if(O.version==1)for(M=0;M<2;M++)for(T=0;T<F.channels_out;T++){var z=B.tt[M][T],J=x1.slen1_tab[z.scalefac_compress],q=x1.slen2_tab[z.scalefac_compress];for(R=0,P=0;P<z.sfbdivide;P++)z.scalefac[P]!=-1&&(d(F,z.scalefac[P],J),R+=J);for(;P<z.sfbmax;P++)z.scalefac[P]!=-1&&(d(F,z.scalefac[P],q),R+=q);ys(R==z.part2_length),z.block_type==Y.SHORT_TYPE?R+=E(F,z):R+=x(F,z),R+=_(F,z),ys(R==z.part2_3_length+z.part2_length),L+=R}else for(M=0,T=0;T<F.channels_out;T++){var z=B.tt[M][T],G,S,V=0;if(ys(z.sfb_partition_table!=null),R=0,P=0,S=0,z.block_type==Y.SHORT_TYPE){for(;S<4;S++){var re=z.sfb_partition_table[S]/3,U=z.slen[S];for(G=0;G<re;G++,P++)d(F,Math.max(z.scalefac[P*3+0],0),U),d(F,Math.max(z.scalefac[P*3+1],0),U),d(F,Math.max(z.scalefac[P*3+2],0),U),V+=3*U}R+=E(F,z)}else{for(;S<4;S++){var re=z.sfb_partition_table[S],U=z.slen[S];for(G=0;G<re;G++,P++)d(F,Math.max(z.scalefac[P],0),U),V+=U}R+=x(F,z)}R+=_(F,z),ys(R==z.part2_3_length),ys(V==z.part2_length),L+=V+R}return L}function I(){this.total=0}function k(O,M){var T=O.internal_flags,P,R,L,F,B;return B=T.w_ptr,F=T.h_ptr-1,F==-1&&(F=ii.MAX_HEADER_BUF-1),P=T.header[F].write_timing-a,M.total=P,P>=0&&(R=1+F-B,F<B&&(R=1+F-B+ii.MAX_HEADER_BUF),P-=R*8*T.sideinfo_len),L=t.getframebits(O),P+=L,M.total+=L,M.total%8!=0?M.total=1+M.total/8:M.total=M.total/8,M.total+=l+1,P<0&&rl.err.println(`strange error flushing buffer ... 
`),P}this.flush_bitstream=function(O){var M=O.internal_flags,T,P,R=M.h_ptr-1;if(R==-1&&(R=ii.MAX_HEADER_BUF-1),T=M.l3_side,!((P=k(O,new I))<0)){if(p(O,P),ys(M.header[R].write_timing+this.getframebits(O)==a),M.ResvSize=0,T.main_data_begin=0,M.findReplayGain){var L=e.GetTitleGain(M.rgdata);ys(NEQ(L,GainAnalysis.GAIN_NOT_ENOUGH_SAMPLES)),M.RadioGain=Math.floor(L*10+.5)|0}M.findPeakSample&&(M.noclipGainChange=Math.ceil(Math.log10(M.PeakSample/32767)*20*10)|0,M.noclipGainChange>0&&(EQ(O.scale,1)||EQ(O.scale,0))?M.noclipScale=Math.floor(32767/M.PeakSample*100)/100:M.noclipScale=-1)}},this.add_dummy_byte=function(O,M,T){for(var P=O.internal_flags,R;T-- >0;)for(f(P,M,8),R=0;R<ii.MAX_HEADER_BUF;++R)P.header[R].write_timing+=8},this.format_bitstream=function(O){var M=O.internal_flags,T;T=M.l3_side;var P=this.getframebits(O);p(O,T.resvDrain_pre),y(O,P);var R=8*M.sideinfo_len;if(R+=A(O),p(O,T.resvDrain_post),R+=T.resvDrain_post,T.main_data_begin+=(P-R)/8,k(O,new I)!=M.ResvSize&&rl.err.println("Internal buffer inconsistency. flushbits <> ResvSize"),T.main_data_begin*8!=M.ResvSize&&(rl.err.printf(`bit reservoir error: 
l3_side.main_data_begin: %d 
Resvoir size:             %d 
resv drain (post)         %d 
resv drain (pre)          %d 
header and sideinfo:      %d 
data bits:                %d 
total bits:               %d (remainder: %d) 
bitsperframe:             %d 
`,8*T.main_data_begin,M.ResvSize,T.resvDrain_post,T.resvDrain_pre,8*M.sideinfo_len,R-T.resvDrain_post-8*M.sideinfo_len,R,R%8,P),rl.err.println("This is a fatal error.  It has several possible causes:"),rl.err.println("90%%  LAME compiled with buggy version of gcc using advanced optimizations"),rl.err.println(" 9%%  Your system is overclocked"),rl.err.println(" 1%%  bug in LAME encoding library"),M.ResvSize=T.main_data_begin*8),a>1e9){var L;for(L=0;L<ii.MAX_HEADER_BUF;++L)M.header[L].write_timing-=a;a=0}return 0},this.copy_buffer=function(O,M,T,P,R){var L=l+1;if(L<=0)return 0;if(P!=0&&L>P)return-1;if(rl.arraycopy(o,0,M,T,L),l=-1,c=0,R!=0){var F=I$e(1);if(F[0]=O.nMusicCRC,r.updateMusicCRC(F,M,T,L),O.nMusicCRC=F[0],L>0&&(O.VBR_seek_table.nBytesWritten+=L),O.decode_on_the_fly){for(var B=A$e([2,1152]),z=L,J=-1,q;J!=0;)if(J=i.hip_decode1_unclipped(O.hip,M,T,z,B[0],B[1]),z=0,J==-1&&(J=0),J>0){if(O.findPeakSample){for(q=0;q<J;q++)B[0][q]>O.PeakSample?O.PeakSample=B[0][q]:-B[0][q]>O.PeakSample&&(O.PeakSample=-B[0][q]);if(O.channels_out>1)for(q=0;q<J;q++)B[1][q]>O.PeakSample?O.PeakSample=B[1][q]:-B[1][q]>O.PeakSample&&(O.PeakSample=-B[1][q])}if(O.findReplayGain&&e.AnalyzeSamples(O.rgdata,B[0],0,B[1],0,J,O.channels_out)==GainAnalysis.GAIN_ANALYSIS_ERROR)return-6}}}return L},this.init_bit_stream_w=function(O){o=x$e(dn.LAME_MAXMP3BUFFER),O.h_ptr=O.w_ptr=0,O.header[O.h_ptr].write_timing=0,l=-1,c=0,a=0}}var R$e=St.System,Ai=St.VbrMode,A3=St.ShortBlock,Ld=St.new_float,jP=St.new_int_n,M$e=St.new_short_n,au=St.assert;function dn(){var t=this,n=128*1024;dn.V9=410,dn.V8=420,dn.V7=430,dn.V6=440,dn.V5=450,dn.V4=460,dn.V3=470,dn.V2=480,dn.V1=490,dn.V0=500,dn.R3MIX=1e3,dn.STANDARD=1001,dn.EXTREME=1002,dn.INSANE=1003,dn.STANDARD_FAST=1004,dn.EXTREME_FAST=1005,dn.MEDIUM=1006,dn.MEDIUM_FAST=1007;var e=16384+n;dn.LAME_MAXMP3BUFFER=e;var i,s,r,o,a,l=new E3,c,u,d;this.enc=new Y,this.setModules=function(S,V,re,U,Pe,Fe,Ne,ne,me){i=S,s=V,r=re,o=U,a=Pe,c=Fe,u=ne,d=me,this.enc.setModules(s,l,o,c)};function f(){this.mask_adjust=0,this.mask_adjust_short=0,this.bo_l_weight=Ld(Y.SBMAX_l),this.bo_s_weight=Ld(Y.SBMAX_s)}function p(){this.lowerlimit=0}function m(S,V){this.lowpass=V}var v=4294479419;function y(S){var V;return S.class_id=v,V=S.internal_flags=new ii,S.mode=ai.NOT_SET,S.original=1,S.in_samplerate=44100,S.num_channels=2,S.num_samples=-1,S.bWriteVbrTag=!0,S.quality=-1,S.short_blocks=null,V.subblock_gain=-1,S.lowpassfreq=0,S.highpassfreq=0,S.lowpasswidth=-1,S.highpasswidth=-1,S.VBR=Ai.vbr_off,S.VBR_q=4,S.ATHcurve=-1,S.VBR_mean_bitrate_kbps=128,S.VBR_min_bitrate_kbps=0,S.VBR_max_bitrate_kbps=0,S.VBR_hard_min=0,V.VBR_min_bitrate=1,V.VBR_max_bitrate=13,S.quant_comp=-1,S.quant_comp_short=-1,S.msfix=-1,V.resample_ratio=1,V.OldValue[0]=180,V.OldValue[1]=180,V.CurrentStep[0]=4,V.CurrentStep[1]=4,V.masking_lower=1,V.nsPsy.attackthre=-1,V.nsPsy.attackthre_s=-1,S.scale=-1,S.athaa_type=-1,S.ATHtype=-1,S.athaa_loudapprox=-1,S.athaa_sensitivity=0,S.useTemporal=null,S.interChRatio=-1,V.mf_samples_to_encode=Y.ENCDELAY+Y.POSTDELAY,S.encoder_padding=0,V.mf_size=Y.ENCDELAY-Y.MDCTDELAY,S.findReplayGain=!1,S.decode_on_the_fly=!1,V.decode_on_the_fly=!1,V.findReplayGain=!1,V.findPeakSample=!1,V.RadioGain=0,V.AudiophileGain=0,V.noclipGainChange=0,V.noclipScale=-1,S.preset=0,S.write_id3tag_automatic=!0,0}this.lame_init=function(){var S=new u$e;return y(S),S.lame_allocated_gfp=1,S};function _(S){return S>1?0:S<=0?1:Math.cos(Math.PI/2*S)}this.nearestBitrateFullIndex=function(S){var V=[8,16,24,32,40,48,56,64,80,96,112,128,160,192,224,256,320],re=0,U=0,Pe=0,Fe=0;Fe=V[16],Pe=16,U=V[16],re=16;for(var Ne=0;Ne<16;Ne++)if(Math.max(S,V[Ne+1])!=S){Fe=V[Ne+1],Pe=Ne+1,U=V[Ne],re=Ne;break}return Fe-S>S-U?re:Pe};function b(S,V){var re=44100;return V>=48e3?re=48e3:V>=44100?re=44100:V>=32e3?re=32e3:V>=24e3?re=24e3:V>=22050?re=22050:V>=16e3?re=16e3:V>=12e3?re=12e3:V>=11025?re=11025:V>=8e3&&(re=8e3),S==-1?re:(S<=15960&&(re=44100),S<=15250&&(re=32e3),S<=11220&&(re=24e3),S<=9970&&(re=22050),S<=7230&&(re=16e3),S<=5420&&(re=12e3),S<=4510&&(re=11025),S<=3970&&(re=8e3),V<re?V>44100?48e3:V>32e3?44100:V>24e3?32e3:V>22050?24e3:V>16e3?22050:V>12e3?16e3:V>11025?12e3:V>8e3?11025:8e3:re)}function E(S,V){switch(S){case 44100:return V.version=1,0;case 48e3:return V.version=1,1;case 32e3:return V.version=1,2;case 22050:return V.version=0,0;case 24e3:return V.version=0,1;case 16e3:return V.version=0,2;case 11025:return V.version=0,0;case 12e3:return V.version=0,1;case 8e3:return V.version=0,2;default:return V.version=0,-1}}function x(S,V,re){re<16e3&&(V=2);for(var U=Xe.bitrate_table[V][1],Pe=2;Pe<=14;Pe++)Xe.bitrate_table[V][Pe]>0&&Math.abs(Xe.bitrate_table[V][Pe]-S)<Math.abs(U-S)&&(U=Xe.bitrate_table[V][Pe]);return U}function A(S,V,re){re<16e3&&(V=2);for(var U=0;U<=14;U++)if(Xe.bitrate_table[V][U]>0&&Xe.bitrate_table[V][U]==S)return U;return-1}function I(S,V){var re=[new m(8,2e3),new m(16,3700),new m(24,3900),new m(32,5500),new m(40,7e3),new m(48,7500),new m(56,1e4),new m(64,11e3),new m(80,13500),new m(96,15100),new m(112,15600),new m(128,17e3),new m(160,17500),new m(192,18600),new m(224,19400),new m(256,19700),new m(320,20500)],U=t.nearestBitrateFullIndex(V);S.lowerlimit=re[U].lowpass}function k(S){var V=S.internal_flags,re=32,U=-1;if(V.lowpass1>0){for(var Pe=999,Fe=0;Fe<=31;Fe++){var Ne=Fe/31;Ne>=V.lowpass2&&(re=Math.min(re,Fe)),V.lowpass1<Ne&&Ne<V.lowpass2&&(Pe=Math.min(Pe,Fe))}Pe==999?V.lowpass1=(re-.75)/31:V.lowpass1=(Pe-.75)/31,V.lowpass2=re/31}if(V.highpass2>0&&V.highpass2<.9*(.75/31)&&(V.highpass1=0,V.highpass2=0,R$e.err.println(`Warning: highpass filter disabled.  highpass frequency too small
`)),V.highpass2>0){for(var ne=-1,Fe=0;Fe<=31;Fe++){var Ne=Fe/31;Ne<=V.highpass1&&(U=Math.max(U,Fe)),V.highpass1<Ne&&Ne<V.highpass2&&(ne=Math.max(ne,Fe))}V.highpass1=U/31,ne==-1?V.highpass2=(U+.75)/31:V.highpass2=(ne+.75)/31}for(var Fe=0;Fe<32;Fe++){var me,pe,Ne=Fe/31;V.highpass2>V.highpass1?me=_((V.highpass2-Ne)/(V.highpass2-V.highpass1+1e-20)):me=1,V.lowpass2>V.lowpass1?pe=_((Ne-V.lowpass1)/(V.lowpass2-V.lowpass1+1e-20)):pe=1,V.amp_filter[Fe]=me*pe}}function O(S){var V=S.internal_flags;switch(S.quality){default:case 9:V.psymodel=0,V.noise_shaping=0,V.noise_shaping_amp=0,V.noise_shaping_stop=0,V.use_best_huffman=0,V.full_outer_loop=0;break;case 8:S.quality=7;case 7:V.psymodel=1,V.noise_shaping=0,V.noise_shaping_amp=0,V.noise_shaping_stop=0,V.use_best_huffman=0,V.full_outer_loop=0;break;case 6:V.psymodel=1,V.noise_shaping==0&&(V.noise_shaping=1),V.noise_shaping_amp=0,V.noise_shaping_stop=0,V.subblock_gain==-1&&(V.subblock_gain=1),V.use_best_huffman=0,V.full_outer_loop=0;break;case 5:V.psymodel=1,V.noise_shaping==0&&(V.noise_shaping=1),V.noise_shaping_amp=0,V.noise_shaping_stop=0,V.subblock_gain==-1&&(V.subblock_gain=1),V.use_best_huffman=0,V.full_outer_loop=0;break;case 4:V.psymodel=1,V.noise_shaping==0&&(V.noise_shaping=1),V.noise_shaping_amp=0,V.noise_shaping_stop=0,V.subblock_gain==-1&&(V.subblock_gain=1),V.use_best_huffman=1,V.full_outer_loop=0;break;case 3:V.psymodel=1,V.noise_shaping==0&&(V.noise_shaping=1),V.noise_shaping_amp=1,V.noise_shaping_stop=1,V.subblock_gain==-1&&(V.subblock_gain=1),V.use_best_huffman=1,V.full_outer_loop=0;break;case 2:V.psymodel=1,V.noise_shaping==0&&(V.noise_shaping=1),V.substep_shaping==0&&(V.substep_shaping=2),V.noise_shaping_amp=1,V.noise_shaping_stop=1,V.subblock_gain==-1&&(V.subblock_gain=1),V.use_best_huffman=1,V.full_outer_loop=0;break;case 1:V.psymodel=1,V.noise_shaping==0&&(V.noise_shaping=1),V.substep_shaping==0&&(V.substep_shaping=2),V.noise_shaping_amp=2,V.noise_shaping_stop=1,V.subblock_gain==-1&&(V.subblock_gain=1),V.use_best_huffman=1,V.full_outer_loop=0;break;case 0:V.psymodel=1,V.noise_shaping==0&&(V.noise_shaping=1),V.substep_shaping==0&&(V.substep_shaping=2),V.noise_shaping_amp=2,V.noise_shaping_stop=1,V.subblock_gain==-1&&(V.subblock_gain=1),V.use_best_huffman=1,V.full_outer_loop=0;break}}function M(S){var V=S.internal_flags;S.frameNum=0,S.write_id3tag_automatic&&u.id3tag_write_v2(S),V.bitrate_stereoMode_Hist=jP([16,5]),V.bitrate_blockType_Hist=jP([16,6]),V.PeakSample=0,S.bWriteVbrTag&&c.InitVbrTag(S)}this.lame_init_params=function(S){var V=S.internal_flags;if(V.Class_ID=0,V.ATH==null&&(V.ATH=new _$e),V.PSY==null&&(V.PSY=new f),V.rgdata==null&&(V.rgdata=new w$e),V.channels_in=S.num_channels,V.channels_in==1&&(S.mode=ai.MONO),V.channels_out=S.mode==ai.MONO?1:2,V.mode_ext=Y.MPG_MD_MS_LR,S.mode==ai.MONO&&(S.force_ms=!1),S.VBR==Ai.vbr_off&&S.VBR_mean_bitrate_kbps!=128&&S.brate==0&&(S.brate=S.VBR_mean_bitrate_kbps),S.VBR==Ai.vbr_off||S.VBR==Ai.vbr_mtrh||S.VBR==Ai.vbr_mt||(S.free_format=!1),S.VBR==Ai.vbr_off&&S.brate==0&&Zo.EQ(S.compression_ratio,0)&&(S.compression_ratio=11.025),S.VBR==Ai.vbr_off&&S.compression_ratio>0&&(S.out_samplerate==0&&(S.out_samplerate=map2MP3Frequency(int(.97*S.in_samplerate))),S.brate=0|S.out_samplerate*16*V.channels_out/(1e3*S.compression_ratio),V.samplerate_index=E(S.out_samplerate,S),S.free_format||(S.brate=x(S.brate,S.version,S.out_samplerate))),S.out_samplerate!=0&&(S.out_samplerate<16e3?(S.VBR_mean_bitrate_kbps=Math.max(S.VBR_mean_bitrate_kbps,8),S.VBR_mean_bitrate_kbps=Math.min(S.VBR_mean_bitrate_kbps,64)):S.out_samplerate<32e3?(S.VBR_mean_bitrate_kbps=Math.max(S.VBR_mean_bitrate_kbps,8),S.VBR_mean_bitrate_kbps=Math.min(S.VBR_mean_bitrate_kbps,160)):(S.VBR_mean_bitrate_kbps=Math.max(S.VBR_mean_bitrate_kbps,32),S.VBR_mean_bitrate_kbps=Math.min(S.VBR_mean_bitrate_kbps,320))),S.lowpassfreq==0){var re=16e3;switch(S.VBR){case Ai.vbr_off:{var U=new p;I(U,S.brate),re=U.lowerlimit;break}case Ai.vbr_abr:{var U=new p;I(U,S.VBR_mean_bitrate_kbps),re=U.lowerlimit;break}case Ai.vbr_rh:{var Pe=[19500,19e3,18600,18e3,17500,16e3,15600,14900,12500,1e4,3950];if(S.VBR_q>=0&&S.VBR_q<=9){var Fe=Pe[S.VBR_q],Ne=Pe[S.VBR_q+1],ne=S.VBR_q_frac;re=linear_int(Fe,Ne,ne)}else re=19500;break}default:{var Pe=[19500,19e3,18500,18e3,17500,16500,15500,14500,12500,9500,3950];if(S.VBR_q>=0&&S.VBR_q<=9){var Fe=Pe[S.VBR_q],Ne=Pe[S.VBR_q+1],ne=S.VBR_q_frac;re=linear_int(Fe,Ne,ne)}else re=19500}}S.mode==ai.MONO&&(S.VBR==Ai.vbr_off||S.VBR==Ai.vbr_abr)&&(re*=1.5),S.lowpassfreq=re|0}if(S.out_samplerate==0&&(2*S.lowpassfreq>S.in_samplerate&&(S.lowpassfreq=S.in_samplerate/2),S.out_samplerate=b(S.lowpassfreq|0,S.in_samplerate)),S.lowpassfreq=Math.min(20500,S.lowpassfreq),S.lowpassfreq=Math.min(S.out_samplerate/2,S.lowpassfreq),S.VBR==Ai.vbr_off&&(S.compression_ratio=S.out_samplerate*16*V.channels_out/(1e3*S.brate)),S.VBR==Ai.vbr_abr&&(S.compression_ratio=S.out_samplerate*16*V.channels_out/(1e3*S.VBR_mean_bitrate_kbps)),S.bWriteVbrTag||(S.findReplayGain=!1,S.decode_on_the_fly=!1,V.findPeakSample=!1),V.findReplayGain=S.findReplayGain,V.decode_on_the_fly=S.decode_on_the_fly,V.decode_on_the_fly&&(V.findPeakSample=!0),V.findReplayGain&&i.InitGainAnalysis(V.rgdata,S.out_samplerate)==GainAnalysis.INIT_GAIN_ANALYSIS_ERROR)return S.internal_flags=null,-6;switch(V.decode_on_the_fly&&!S.decode_only&&(V.hip!=null&&d.hip_decode_exit(V.hip),V.hip=d.hip_decode_init()),V.mode_gr=S.out_samplerate<=24e3?1:2,S.framesize=576*V.mode_gr,S.encoder_delay=Y.ENCDELAY,V.resample_ratio=S.in_samplerate/S.out_samplerate,S.VBR){case Ai.vbr_mt:case Ai.vbr_rh:case Ai.vbr_mtrh:{var me=[5.7,6.5,7.3,8.2,10,11.9,13,14,15,16.5];S.compression_ratio=me[S.VBR_q]}break;case Ai.vbr_abr:S.compression_ratio=S.out_samplerate*16*V.channels_out/(1e3*S.VBR_mean_bitrate_kbps);break;default:S.compression_ratio=S.out_samplerate*16*V.channels_out/(1e3*S.brate);break}if(S.mode==ai.NOT_SET&&(S.mode=ai.JOINT_STEREO),S.highpassfreq>0?(V.highpass1=2*S.highpassfreq,S.highpasswidth>=0?V.highpass2=2*(S.highpassfreq+S.highpasswidth):V.highpass2=1*2*S.highpassfreq,V.highpass1/=S.out_samplerate,V.highpass2/=S.out_samplerate):(V.highpass1=0,V.highpass2=0),S.lowpassfreq>0?(V.lowpass2=2*S.lowpassfreq,S.lowpasswidth>=0?(V.lowpass1=2*(S.lowpassfreq-S.lowpasswidth),V.lowpass1<0&&(V.lowpass1=0)):V.lowpass1=1*2*S.lowpassfreq,V.lowpass1/=S.out_samplerate,V.lowpass2/=S.out_samplerate):(V.lowpass1=0,V.lowpass2=0),k(S),V.samplerate_index=E(S.out_samplerate,S),V.samplerate_index<0)return S.internal_flags=null,-1;if(S.VBR==Ai.vbr_off){if(S.free_format)V.bitrate_index=0;else if(S.brate=x(S.brate,S.version,S.out_samplerate),V.bitrate_index=A(S.brate,S.version,S.out_samplerate),V.bitrate_index<=0)return S.internal_flags=null,-1}else V.bitrate_index=1;S.analysis&&(S.bWriteVbrTag=!1),V.pinfo!=null&&(S.bWriteVbrTag=!1),s.init_bit_stream_w(V);for(var pe=V.samplerate_index+3*S.version+6*(S.out_samplerate<16e3?1:0),ge=0;ge<Y.SBMAX_l+1;ge++)V.scalefac_band.l[ge]=o.sfBandIndex[pe].l[ge];for(var ge=0;ge<Y.PSFB21+1;ge++){var rt=(V.scalefac_band.l[22]-V.scalefac_band.l[21])/Y.PSFB21,wt=V.scalefac_band.l[21]+ge*rt;V.scalefac_band.psfb21[ge]=wt}V.scalefac_band.psfb21[Y.PSFB21]=576;for(var ge=0;ge<Y.SBMAX_s+1;ge++)V.scalefac_band.s[ge]=o.sfBandIndex[pe].s[ge];for(var ge=0;ge<Y.PSFB12+1;ge++){var rt=(V.scalefac_band.s[13]-V.scalefac_band.s[12])/Y.PSFB12,wt=V.scalefac_band.s[12]+ge*rt;V.scalefac_band.psfb12[ge]=wt}V.scalefac_band.psfb12[Y.PSFB12]=192,S.version==1?V.sideinfo_len=V.channels_out==1?21:36:V.sideinfo_len=V.channels_out==1?13:21,S.error_protection&&(V.sideinfo_len+=2),M(S),V.Class_ID=v;{var D;for(D=0;D<19;D++)V.nsPsy.pefirbuf[D]=700*V.mode_gr*V.channels_out;S.ATHtype==-1&&(S.ATHtype=4)}switch(au(S.VBR_q<=9),au(S.VBR_q>=0),S.VBR){case Ai.vbr_mt:S.VBR=Ai.vbr_mtrh;case Ai.vbr_mtrh:{S.useTemporal==null&&(S.useTemporal=!1),r.apply_preset(S,500-S.VBR_q*10,0),S.quality<0&&(S.quality=LAME_DEFAULT_QUALITY),S.quality<5&&(S.quality=0),S.quality>5&&(S.quality=5),V.PSY.mask_adjust=S.maskingadjust,V.PSY.mask_adjust_short=S.maskingadjust_short,S.experimentalY?V.sfb21_extra=!1:V.sfb21_extra=S.out_samplerate>44e3,V.iteration_loop=new VBRNewIterationLoop(a);break}case Ai.vbr_rh:{r.apply_preset(S,500-S.VBR_q*10,0),V.PSY.mask_adjust=S.maskingadjust,V.PSY.mask_adjust_short=S.maskingadjust_short,S.experimentalY?V.sfb21_extra=!1:V.sfb21_extra=S.out_samplerate>44e3,S.quality>6&&(S.quality=6),S.quality<0&&(S.quality=LAME_DEFAULT_QUALITY),V.iteration_loop=new VBROldIterationLoop(a);break}default:{var $;V.sfb21_extra=!1,S.quality<0&&(S.quality=LAME_DEFAULT_QUALITY),$=S.VBR,$==Ai.vbr_off&&(S.VBR_mean_bitrate_kbps=S.brate),r.apply_preset(S,S.VBR_mean_bitrate_kbps,0),S.VBR=$,V.PSY.mask_adjust=S.maskingadjust,V.PSY.mask_adjust_short=S.maskingadjust_short,$==Ai.vbr_off?V.iteration_loop=new C$e(a):V.iteration_loop=new ABRIterationLoop(a);break}}if(au(S.scale>=0),S.VBR!=Ai.vbr_off){if(V.VBR_min_bitrate=1,V.VBR_max_bitrate=14,S.out_samplerate<16e3&&(V.VBR_max_bitrate=8),S.VBR_min_bitrate_kbps!=0&&(S.VBR_min_bitrate_kbps=x(S.VBR_min_bitrate_kbps,S.version,S.out_samplerate),V.VBR_min_bitrate=A(S.VBR_min_bitrate_kbps,S.version,S.out_samplerate),V.VBR_min_bitrate<0)||S.VBR_max_bitrate_kbps!=0&&(S.VBR_max_bitrate_kbps=x(S.VBR_max_bitrate_kbps,S.version,S.out_samplerate),V.VBR_max_bitrate=A(S.VBR_max_bitrate_kbps,S.version,S.out_samplerate),V.VBR_max_bitrate<0))return-1;S.VBR_min_bitrate_kbps=Xe.bitrate_table[S.version][V.VBR_min_bitrate],S.VBR_max_bitrate_kbps=Xe.bitrate_table[S.version][V.VBR_max_bitrate],S.VBR_mean_bitrate_kbps=Math.min(Xe.bitrate_table[S.version][V.VBR_max_bitrate],S.VBR_mean_bitrate_kbps),S.VBR_mean_bitrate_kbps=Math.max(Xe.bitrate_table[S.version][V.VBR_min_bitrate],S.VBR_mean_bitrate_kbps)}return S.tune&&(V.PSY.mask_adjust+=S.tune_value_a,V.PSY.mask_adjust_short+=S.tune_value_a),O(S),au(S.scale>=0),S.athaa_type<0?V.ATH.useAdjust=3:V.ATH.useAdjust=S.athaa_type,V.ATH.aaSensitivityP=Math.pow(10,S.athaa_sensitivity/-10),S.short_blocks==null&&(S.short_blocks=A3.short_block_allowed),S.short_blocks==A3.short_block_allowed&&(S.mode==ai.JOINT_STEREO||S.mode==ai.STEREO)&&(S.short_blocks=A3.short_block_coupled),S.quant_comp<0&&(S.quant_comp=1),S.quant_comp_short<0&&(S.quant_comp_short=0),S.msfix<0&&(S.msfix=0),S.exp_nspsytune=S.exp_nspsytune|1,S.internal_flags.nsPsy.attackthre<0&&(S.internal_flags.nsPsy.attackthre=E3.NSATTACKTHRE),S.internal_flags.nsPsy.attackthre_s<0&&(S.internal_flags.nsPsy.attackthre_s=E3.NSATTACKTHRE_S),au(S.scale>=0),S.scale<0&&(S.scale=1),S.ATHtype<0&&(S.ATHtype=4),S.ATHcurve<0&&(S.ATHcurve=4),S.athaa_loudapprox<0&&(S.athaa_loudapprox=2),S.interChRatio<0&&(S.interChRatio=0),S.useTemporal==null&&(S.useTemporal=!0),V.slot_lag=V.frac_SpF=0,S.VBR==Ai.vbr_off&&(V.slot_lag=V.frac_SpF=(S.version+1)*72e3*S.brate%S.out_samplerate|0),o.iteration_init(S),l.psymodel_init(S),au(S.scale>=0),0};function T(S,V){(S.in_buffer_0==null||S.in_buffer_nsamples<V)&&(S.in_buffer_0=Ld(V),S.in_buffer_1=Ld(V),S.in_buffer_nsamples=V)}this.lame_encode_flush=function(S,V,re,U){var Pe=S.internal_flags,Fe=M$e([2,1152]),Ne=0,ne,me,pe,ge,rt=Pe.mf_samples_to_encode-Y.POSTDELAY,wt=P(S);if(Pe.mf_samples_to_encode<1)return 0;for(ne=0,S.in_samplerate!=S.out_samplerate&&(rt+=16*S.out_samplerate/S.in_samplerate),pe=S.framesize-rt%S.framesize,pe<576&&(pe+=S.framesize),S.encoder_padding=pe,ge=(rt+pe)/S.framesize;ge>0&&Ne>=0;){var D=wt-Pe.mf_size,$=S.frameNum;D*=S.in_samplerate,D/=S.out_samplerate,D>1152&&(D=1152),D<1&&(D=1),me=U-ne,U==0&&(me=0),Ne=this.lame_encode_buffer(S,Fe[0],Fe[1],D,V,re,me),re+=Ne,ne+=Ne,ge-=$!=S.frameNum?1:0}if(Pe.mf_samples_to_encode=0,Ne<0||(me=U-ne,U==0&&(me=0),s.flush_bitstream(S),Ne=s.copy_buffer(Pe,V,re,me,1),Ne<0))return Ne;if(re+=Ne,ne+=Ne,me=U-ne,U==0&&(me=0),S.write_id3tag_automatic){if(u.id3tag_write_v1(S),Ne=s.copy_buffer(Pe,V,re,me,0),Ne<0)return Ne;ne+=Ne}return ne},this.lame_encode_buffer=function(S,V,re,U,Pe,Fe,Ne){var ne=S.internal_flags,me=[null,null];if(ne.Class_ID!=v)return-3;if(U==0)return 0;T(ne,U),me[0]=ne.in_buffer_0,me[1]=ne.in_buffer_1;for(var pe=0;pe<U;pe++)me[0][pe]=V[pe],ne.channels_in>1&&(me[1][pe]=re[pe]);return R(S,me[0],me[1],U,Pe,Fe,Ne)};function P(S){var V=Y.BLKSIZE+S.framesize-Y.FFTOFFSET;return V=Math.max(V,512+S.framesize-32),V}function R(S,V,re,U,Pe,Fe,Ne){var ne=S.internal_flags,me=0,pe,ge,rt,wt,D,$=[null,null],X=[null,null];if(ne.Class_ID!=v)return-3;if(U==0)return 0;if(D=s.copy_buffer(ne,Pe,Fe,Ne,0),D<0)return D;if(Fe+=D,me+=D,X[0]=V,X[1]=re,Zo.NEQ(S.scale,0)&&Zo.NEQ(S.scale,1))for(ge=0;ge<U;++ge)X[0][ge]*=S.scale,ne.channels_out==2&&(X[1][ge]*=S.scale);if(Zo.NEQ(S.scale_left,0)&&Zo.NEQ(S.scale_left,1))for(ge=0;ge<U;++ge)X[0][ge]*=S.scale_left;if(Zo.NEQ(S.scale_right,0)&&Zo.NEQ(S.scale_right,1))for(ge=0;ge<U;++ge)X[1][ge]*=S.scale_right;if(S.num_channels==2&&ne.channels_out==1)for(ge=0;ge<U;++ge)X[0][ge]=.5*(X[0][ge]+X[1][ge]),X[1][ge]=0;wt=P(S),$[0]=ne.mfbuf[0],$[1]=ne.mfbuf[1];for(var le=0;U>0;){var ie=[null,null],be=0,Ae=0;ie[0]=X[0],ie[1]=X[1];var _e=new F;if(G(S,$,ie,le,U,_e),be=_e.n_in,Ae=_e.n_out,ne.findReplayGain&&!ne.decode_on_the_fly&&i.AnalyzeSamples(ne.rgdata,$[0],ne.mf_size,$[1],ne.mf_size,Ae,ne.channels_out)==GainAnalysis.GAIN_ANALYSIS_ERROR)return-6;if(U-=be,le+=be,ne.channels_out==2,ne.mf_size+=Ae,au(ne.mf_size<=ii.MFSIZE),ne.mf_samples_to_encode<1&&(ne.mf_samples_to_encode=Y.ENCDELAY+Y.POSTDELAY),ne.mf_samples_to_encode+=Ae,ne.mf_size>=wt){var Ee=Ne-me;if(Ne==0&&(Ee=0),pe=L(S,$[0],$[1],Pe,Fe,Ee),pe<0)return pe;for(Fe+=pe,me+=pe,ne.mf_size-=S.framesize,ne.mf_samples_to_encode-=S.framesize,rt=0;rt<ne.channels_out;rt++)for(ge=0;ge<ne.mf_size;ge++)$[rt][ge]=$[rt][ge+S.framesize]}}return me}function L(S,V,re,U,Pe,Fe){var Ne=t.enc.lame_encode_mp3_frame(S,V,re,U,Pe,Fe);return S.frameNum++,Ne}function F(){this.n_in=0,this.n_out=0}function B(){this.num_used=0}function z(S,V){return V!=0?z(V,S%V):S}function J(S,V,re){var U=Math.PI*V;S/=re,S<0&&(S=0),S>1&&(S=1);var Pe=S-.5,Fe=.42-.5*Math.cos(2*S*Math.PI)+.08*Math.cos(4*S*Math.PI);return Math.abs(Pe)<1e-9?U/Math.PI:Fe*Math.sin(re*U*Pe)/(Math.PI*re*Pe)}function q(S,V,re,U,Pe,Fe,Ne,ne,me){var pe=S.internal_flags,ge,rt=0,wt,D=S.out_samplerate/z(S.out_samplerate,S.in_samplerate);D>ii.BPC&&(D=ii.BPC);var $=Math.abs(pe.resample_ratio-Math.floor(.5+pe.resample_ratio))<1e-4?1:0,X=1/pe.resample_ratio;X>1&&(X=1);var le=31;le%2==0&&--le,le+=$;var ie=le+1;if(pe.fill_buffer_resample_init==0){for(pe.inbuf_old[0]=Ld(ie),pe.inbuf_old[1]=Ld(ie),ge=0;ge<=2*D;++ge)pe.blackfilt[ge]=Ld(ie);for(pe.itime[0]=0,pe.itime[1]=0,rt=0;rt<=2*D;rt++){var be=0,Ae=(rt-D)/(2*D);for(ge=0;ge<=le;ge++)be+=pe.blackfilt[rt][ge]=J(ge-Ae,X,le);for(ge=0;ge<=le;ge++)pe.blackfilt[rt][ge]/=be}pe.fill_buffer_resample_init=1}var _e=pe.inbuf_old[me];for(wt=0;wt<U;wt++){var Ee,he;if(Ee=wt*pe.resample_ratio,rt=0|Math.floor(Ee-pe.itime[me]),le+rt-le/2>=Ne)break;var Ae=Ee-pe.itime[me]-(rt+.5*(le%2));he=0|Math.floor(Ae*2*D+D+.5);var He=0;for(ge=0;ge<=le;++ge){var ze=0|ge+rt-le/2,de;de=ze<0?_e[ie+ze]:Pe[Fe+ze],He+=de*pe.blackfilt[he][ge]}V[re+wt]=He}if(ne.num_used=Math.min(Ne,le+rt-le/2),pe.itime[me]+=ne.num_used-wt*pe.resample_ratio,ne.num_used>=ie)for(ge=0;ge<ie;ge++)_e[ge]=Pe[Fe+ne.num_used+ge-ie];else{var We=ie-ne.num_used;for(ge=0;ge<We;++ge)_e[ge]=_e[ge+ne.num_used];for(rt=0;ge<ie;++ge,++rt)_e[ge]=Pe[Fe+rt];au(rt==ne.num_used)}return wt}function G(S,V,re,U,Pe,Fe){var Ne=S.internal_flags;if(Ne.resample_ratio<.9999||Ne.resample_ratio>1.0001)for(var ne=0;ne<Ne.channels_out;ne++){var me=new B;Fe.n_out=q(S,V[ne],Ne.mf_size,S.framesize,re[ne],U,Pe,me,ne),Fe.n_in=me.num_used}else{Fe.n_out=Math.min(S.framesize,Pe),Fe.n_in=Fe.n_out;for(var pe=0;pe<Fe.n_out;++pe)V[0][Ne.mf_size+pe]=re[0][U+pe],Ne.channels_out==2&&(V[1][Ne.mf_size+pe]=re[1][U+pe])}}}var ol=St.VbrMode;function P$e(){function t(c,u,d,f,p,m,v,y,_,b,E,x,A,I,k){this.vbr_q=c,this.quant_comp=u,this.quant_comp_s=d,this.expY=f,this.st_lrm=p,this.st_s=m,this.masking_adj=v,this.masking_adj_short=y,this.ath_lower=_,this.ath_curve=b,this.ath_sensitivity=E,this.interch=x,this.safejoint=A,this.sfb21mod=I,this.msfix=k}function n(c,u,d,f,p,m,v,y,_,b,E,x,A,I){this.quant_comp=u,this.quant_comp_s=d,this.safejoint=f,this.nsmsfix=p,this.st_lrm=m,this.st_s=v,this.nsbass=y,this.scale=_,this.masking_adj=b,this.ath_lower=E,this.ath_curve=x,this.interch=A,this.sfscale=I}var e;this.setModules=function(c){e=c};var i=[new t(0,9,9,0,5.2,125,-4.2,-6.3,4.8,1,0,0,2,21,.97),new t(1,9,9,0,5.3,125,-3.6,-5.6,4.5,1.5,0,0,2,21,1.35),new t(2,9,9,0,5.6,125,-2.2,-3.5,2.8,2,0,0,2,21,1.49),new t(3,9,9,1,5.8,130,-1.8,-2.8,2.6,3,-4,0,2,20,1.64),new t(4,9,9,1,6,135,-.7,-1.1,1.1,3.5,-8,0,2,0,1.79),new t(5,9,9,1,6.4,140,.5,.4,-7.5,4,-12,2e-4,0,0,1.95),new t(6,9,9,1,6.6,145,.67,.65,-14.7,6.5,-19,4e-4,0,0,2.3),new t(7,9,9,1,6.6,145,.8,.75,-19.7,8,-22,6e-4,0,0,2.7),new t(8,9,9,1,6.6,145,1.2,1.15,-27.5,10,-23,7e-4,0,0,0),new t(9,9,9,1,6.6,145,1.6,1.6,-36,11,-25,8e-4,0,0,0),new t(10,9,9,1,6.6,145,2,2,-36,12,-25,8e-4,0,0,0)],s=[new t(0,9,9,0,4.2,25,-7,-4,7.5,1,0,0,2,26,.97),new t(1,9,9,0,4.2,25,-5.6,-3.6,4.5,1.5,0,0,2,21,1.35),new t(2,9,9,0,4.2,25,-4.4,-1.8,2,2,0,0,2,18,1.49),new t(3,9,9,1,4.2,25,-3.4,-1.25,1.1,3,-4,0,2,15,1.64),new t(4,9,9,1,4.2,25,-2.2,.1,0,3.5,-8,0,2,0,1.79),new t(5,9,9,1,4.2,25,-1,1.65,-7.7,4,-12,2e-4,0,0,1.95),new t(6,9,9,1,4.2,25,-0,2.47,-7.7,6.5,-19,4e-4,0,0,2),new t(7,9,9,1,4.2,25,.5,2,-14.5,8,-22,6e-4,0,0,2),new t(8,9,9,1,4.2,25,1,2.4,-22,10,-23,7e-4,0,0,2),new t(9,9,9,1,4.2,25,1.5,2.95,-30,11,-25,8e-4,0,0,2),new t(10,9,9,1,4.2,25,2,2.95,-36,12,-30,8e-4,0,0,2)];function r(c,u,d){var f=c.VBR==ol.vbr_rh?i:s,p=c.VBR_q_frac,m=f[u],v=f[u+1],y=m;m.st_lrm=m.st_lrm+p*(v.st_lrm-m.st_lrm),m.st_s=m.st_s+p*(v.st_s-m.st_s),m.masking_adj=m.masking_adj+p*(v.masking_adj-m.masking_adj),m.masking_adj_short=m.masking_adj_short+p*(v.masking_adj_short-m.masking_adj_short),m.ath_lower=m.ath_lower+p*(v.ath_lower-m.ath_lower),m.ath_curve=m.ath_curve+p*(v.ath_curve-m.ath_curve),m.ath_sensitivity=m.ath_sensitivity+p*(v.ath_sensitivity-m.ath_sensitivity),m.interch=m.interch+p*(v.interch-m.interch),m.msfix=m.msfix+p*(v.msfix-m.msfix),l(c,y.vbr_q),d!=0?c.quant_comp=y.quant_comp:Math.abs(c.quant_comp- -1)>0||(c.quant_comp=y.quant_comp),d!=0?c.quant_comp_short=y.quant_comp_s:Math.abs(c.quant_comp_short- -1)>0||(c.quant_comp_short=y.quant_comp_s),y.expY!=0&&(c.experimentalY=y.expY!=0),d!=0?c.internal_flags.nsPsy.attackthre=y.st_lrm:Math.abs(c.internal_flags.nsPsy.attackthre- -1)>0||(c.internal_flags.nsPsy.attackthre=y.st_lrm),d!=0?c.internal_flags.nsPsy.attackthre_s=y.st_s:Math.abs(c.internal_flags.nsPsy.attackthre_s- -1)>0||(c.internal_flags.nsPsy.attackthre_s=y.st_s),d!=0?c.maskingadjust=y.masking_adj:Math.abs(c.maskingadjust-0)>0||(c.maskingadjust=y.masking_adj),d!=0?c.maskingadjust_short=y.masking_adj_short:Math.abs(c.maskingadjust_short-0)>0||(c.maskingadjust_short=y.masking_adj_short),d!=0?c.ATHlower=-y.ath_lower/10:Math.abs(-c.ATHlower*10-0)>0||(c.ATHlower=-y.ath_lower/10),d!=0?c.ATHcurve=y.ath_curve:Math.abs(c.ATHcurve- -1)>0||(c.ATHcurve=y.ath_curve),d!=0?c.athaa_sensitivity=y.ath_sensitivity:Math.abs(c.athaa_sensitivity- -1)>0||(c.athaa_sensitivity=y.ath_sensitivity),y.interch>0&&(d!=0?c.interChRatio=y.interch:Math.abs(c.interChRatio- -1)>0||(c.interChRatio=y.interch)),y.safejoint>0&&(c.exp_nspsytune=c.exp_nspsytune|y.safejoint),y.sfb21mod>0&&(c.exp_nspsytune=c.exp_nspsytune|y.sfb21mod<<20),d!=0?c.msfix=y.msfix:Math.abs(c.msfix- -1)>0||(c.msfix=y.msfix),d==0&&(c.VBR_q=u,c.VBR_q_frac=p)}var o=[new n(8,9,9,0,0,6.6,145,0,.95,0,-30,11,.0012,1),new n(16,9,9,0,0,6.6,145,0,.95,0,-25,11,.001,1),new n(24,9,9,0,0,6.6,145,0,.95,0,-20,11,.001,1),new n(32,9,9,0,0,6.6,145,0,.95,0,-15,11,.001,1),new n(40,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new n(48,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new n(56,9,9,0,0,6.6,145,0,.95,0,-6,11,8e-4,1),new n(64,9,9,0,0,6.6,145,0,.95,0,-2,11,8e-4,1),new n(80,9,9,0,0,6.6,145,0,.95,0,0,8,7e-4,1),new n(96,9,9,0,2.5,6.6,145,0,.95,0,1,5.5,6e-4,1),new n(112,9,9,0,2.25,6.6,145,0,.95,0,2,4.5,5e-4,1),new n(128,9,9,0,1.95,6.4,140,0,.95,0,3,4,2e-4,1),new n(160,9,9,1,1.79,6,135,0,.95,-2,5,3.5,0,1),new n(192,9,9,1,1.49,5.6,125,0,.97,-4,7,3,0,0),new n(224,9,9,1,1.25,5.2,125,0,.98,-6,9,2,0,0),new n(256,9,9,1,.97,5.2,125,0,1,-8,10,1,0,0),new n(320,9,9,1,.9,5.2,125,0,1,-10,12,0,0,0)];function a(c,u,d){var f=u,p=e.nearestBitrateFullIndex(u);if(c.VBR=ol.vbr_abr,c.VBR_mean_bitrate_kbps=f,c.VBR_mean_bitrate_kbps=Math.min(c.VBR_mean_bitrate_kbps,320),c.VBR_mean_bitrate_kbps=Math.max(c.VBR_mean_bitrate_kbps,8),c.brate=c.VBR_mean_bitrate_kbps,c.VBR_mean_bitrate_kbps>320&&(c.disable_reservoir=!0),o[p].safejoint>0&&(c.exp_nspsytune=c.exp_nspsytune|2),o[p].sfscale>0&&(c.internal_flags.noise_shaping=2),Math.abs(o[p].nsbass)>0){var m=int(o[p].nsbass*4);m<0&&(m+=64),c.exp_nspsytune=c.exp_nspsytune|m<<2}return d!=0?c.quant_comp=o[p].quant_comp:Math.abs(c.quant_comp- -1)>0||(c.quant_comp=o[p].quant_comp),d!=0?c.quant_comp_short=o[p].quant_comp_s:Math.abs(c.quant_comp_short- -1)>0||(c.quant_comp_short=o[p].quant_comp_s),d!=0?c.msfix=o[p].nsmsfix:Math.abs(c.msfix- -1)>0||(c.msfix=o[p].nsmsfix),d!=0?c.internal_flags.nsPsy.attackthre=o[p].st_lrm:Math.abs(c.internal_flags.nsPsy.attackthre- -1)>0||(c.internal_flags.nsPsy.attackthre=o[p].st_lrm),d!=0?c.internal_flags.nsPsy.attackthre_s=o[p].st_s:Math.abs(c.internal_flags.nsPsy.attackthre_s- -1)>0||(c.internal_flags.nsPsy.attackthre_s=o[p].st_s),d!=0?c.scale=o[p].scale:Math.abs(c.scale- -1)>0||(c.scale=o[p].scale),d!=0?c.maskingadjust=o[p].masking_adj:Math.abs(c.maskingadjust-0)>0||(c.maskingadjust=o[p].masking_adj),o[p].masking_adj>0?d!=0?c.maskingadjust_short=o[p].masking_adj*.9:Math.abs(c.maskingadjust_short-0)>0||(c.maskingadjust_short=o[p].masking_adj*.9):d!=0?c.maskingadjust_short=o[p].masking_adj*1.1:Math.abs(c.maskingadjust_short-0)>0||(c.maskingadjust_short=o[p].masking_adj*1.1),d!=0?c.ATHlower=-o[p].ath_lower/10:Math.abs(-c.ATHlower*10-0)>0||(c.ATHlower=-o[p].ath_lower/10),d!=0?c.ATHcurve=o[p].ath_curve:Math.abs(c.ATHcurve- -1)>0||(c.ATHcurve=o[p].ath_curve),d!=0?c.interChRatio=o[p].interch:Math.abs(c.interChRatio- -1)>0||(c.interChRatio=o[p].interch),u}this.apply_preset=function(c,u,d){switch(u){case dn.R3MIX:{u=dn.V3,c.VBR=ol.vbr_mtrh;break}case dn.MEDIUM:{u=dn.V4,c.VBR=ol.vbr_rh;break}case dn.MEDIUM_FAST:{u=dn.V4,c.VBR=ol.vbr_mtrh;break}case dn.STANDARD:{u=dn.V2,c.VBR=ol.vbr_rh;break}case dn.STANDARD_FAST:{u=dn.V2,c.VBR=ol.vbr_mtrh;break}case dn.EXTREME:{u=dn.V0,c.VBR=ol.vbr_rh;break}case dn.EXTREME_FAST:{u=dn.V0,c.VBR=ol.vbr_mtrh;break}case dn.INSANE:return u=320,c.preset=u,a(c,u,d),c.VBR=ol.vbr_off,u}switch(c.preset=u,u){case dn.V9:return r(c,9,d),u;case dn.V8:return r(c,8,d),u;case dn.V7:return r(c,7,d),u;case dn.V6:return r(c,6,d),u;case dn.V5:return r(c,5,d),u;case dn.V4:return r(c,4,d),u;case dn.V3:return r(c,3,d),u;case dn.V2:return r(c,2,d),u;case dn.V1:return r(c,1,d),u;case dn.V0:return r(c,0,d),u}return u>=8&&u<=320?a(c,u,d):(c.preset=0,u)};function l(c,u){var d=0;return u<0&&(d=-1,u=0),u>9&&(d=-1,u=9),c.VBR_q=u,c.VBR_q_frac=0,d}}function O$e(){this.setModules=function(t,n){}}function I3(){this.over_noise=0,this.tot_noise=0,this.max_noise=0,this.over_count=0,this.over_SSD=0,this.bits=0}var qP=St.new_float,L$e=St.new_int;function B$e(){this.global_gain=0,this.sfb_count1=0,this.step=L$e(39),this.noise=qP(39),this.noise_log=qP(39)}var lu=St.System,KP=St.VbrMode,R3=St.Util,gf=St.Arrays,Vp=St.new_float,Dp=St.assert;function F$e(){var t;this.rv=null;var n;this.qupvt=null;var e,i=new O$e,s;this.setModules=function(_,b,E,x){t=_,n=b,this.rv=b,e=E,this.qupvt=E,s=x,i.setModules(e,s)},this.ms_convert=function(_,b){for(var E=0;E<576;++E){var x=_.tt[b][0].xr[E],A=_.tt[b][1].xr[E];_.tt[b][0].xr[E]=(x+A)*(R3.SQRT2*.5),_.tt[b][1].xr[E]=(x-A)*(R3.SQRT2*.5)}};function r(_,b,E,x){x=0;for(var A=0;A<=E;++A){var I=Math.abs(_.xr[A]);x+=I,b[A]=Math.sqrt(I*Math.sqrt(I)),b[A]>_.xrpow_max&&(_.xrpow_max=b[A])}return x}this.init_xrpow=function(_,b,E){var x=0,A=0|b.max_nonzero_coeff;if(b.xrpow_max=0,gf.fill(E,A,576,0),x=r(b,E,A,x),x>1e-20){var I=0;_.substep_shaping&2&&(I=1);for(var k=0;k<b.psymax;k++)_.pseudohalf[k]=I;return!0}return gf.fill(b.l3_enc,0,576,0),!1};function o(_,b){var E=_.ATH,x=b.xr;if(b.block_type!=Y.SHORT_TYPE)for(var A=!1,I=Y.PSFB21-1;I>=0&&!A;I--){var k=_.scalefac_band.psfb21[I],O=_.scalefac_band.psfb21[I+1],M=e.athAdjust(E.adjust,E.psfb21[I],E.floor);_.nsPsy.longfact[21]>1e-12&&(M*=_.nsPsy.longfact[21]);for(var T=O-1;T>=k;T--)if(Math.abs(x[T])<M)x[T]=0;else{A=!0;break}}else for(var P=0;P<3;P++)for(var A=!1,I=Y.PSFB12-1;I>=0&&!A;I--){var k=_.scalefac_band.s[12]*3+(_.scalefac_band.s[13]-_.scalefac_band.s[12])*P+(_.scalefac_band.psfb12[I]-_.scalefac_band.psfb12[0]),O=k+(_.scalefac_band.psfb12[I+1]-_.scalefac_band.psfb12[I]),R=e.athAdjust(E.adjust,E.psfb12[I],E.floor);_.nsPsy.shortfact[12]>1e-12&&(R*=_.nsPsy.shortfact[12]);for(var T=O-1;T>=k;T--)if(Math.abs(x[T])<R)x[T]=0;else{A=!0;break}}}this.init_outer_loop=function(_,b){b.part2_3_length=0,b.big_values=0,b.count1=0,b.global_gain=210,b.scalefac_compress=0,b.table_select[0]=0,b.table_select[1]=0,b.table_select[2]=0,b.subblock_gain[0]=0,b.subblock_gain[1]=0,b.subblock_gain[2]=0,b.subblock_gain[3]=0,b.region0_count=0,b.region1_count=0,b.preflag=0,b.scalefac_scale=0,b.count1table_select=0,b.part2_length=0,b.sfb_lmax=Y.SBPSY_l,b.sfb_smin=Y.SBPSY_s,b.psy_lmax=_.sfb21_extra?Y.SBMAX_l:Y.SBPSY_l,b.psymax=b.psy_lmax,b.sfbmax=b.sfb_lmax,b.sfbdivide=11;for(var E=0;E<Y.SBMAX_l;E++)b.width[E]=_.scalefac_band.l[E+1]-_.scalefac_band.l[E],b.window[E]=3;if(b.block_type==Y.SHORT_TYPE){var x=Vp(576);b.sfb_smin=0,b.sfb_lmax=0,b.mixed_block_flag!=0&&(b.sfb_smin=3,b.sfb_lmax=_.mode_gr*2+4),b.psymax=b.sfb_lmax+3*((_.sfb21_extra?Y.SBMAX_s:Y.SBPSY_s)-b.sfb_smin),b.sfbmax=b.sfb_lmax+3*(Y.SBPSY_s-b.sfb_smin),b.sfbdivide=b.sfbmax-18,b.psy_lmax=b.sfb_lmax;var A=_.scalefac_band.l[b.sfb_lmax];lu.arraycopy(b.xr,0,x,0,576);for(var E=b.sfb_smin;E<Y.SBMAX_s;E++)for(var I=_.scalefac_band.s[E],k=_.scalefac_band.s[E+1],O=0;O<3;O++)for(var M=I;M<k;M++)b.xr[A++]=x[3*M+O];for(var T=b.sfb_lmax,E=b.sfb_smin;E<Y.SBMAX_s;E++)b.width[T]=b.width[T+1]=b.width[T+2]=_.scalefac_band.s[E+1]-_.scalefac_band.s[E],b.window[T]=0,b.window[T+1]=1,b.window[T+2]=2,T+=3}b.count1bits=0,b.sfb_partition_table=e.nr_of_sfb_block[0][0],b.slen[0]=0,b.slen[1]=0,b.slen[2]=0,b.slen[3]=0,b.max_nonzero_coeff=575,gf.fill(b.scalefac,0),o(_,b)};function a(_){this.ordinal=_}a.BINSEARCH_NONE=new a(0),a.BINSEARCH_UP=new a(1),a.BINSEARCH_DOWN=new a(2);function l(_,b,E,x,A){var I,k=_.CurrentStep[x],O=!1,M=_.OldValue[x],T=a.BINSEARCH_NONE;for(b.global_gain=M,E-=b.part2_length;;){var P;if(I=s.count_bits(_,A,b,null),k==1||I==E)break;I>E?(T==a.BINSEARCH_DOWN&&(O=!0),O&&(k/=2),T=a.BINSEARCH_UP,P=k):(T==a.BINSEARCH_UP&&(O=!0),O&&(k/=2),T=a.BINSEARCH_DOWN,P=-k),b.global_gain+=P,b.global_gain<0&&(b.global_gain=0,O=!0),b.global_gain>255&&(b.global_gain=255,O=!0)}for(Dp(b.global_gain>=0),Dp(b.global_gain<256);I>E&&b.global_gain<255;)b.global_gain++,I=s.count_bits(_,A,b,null);return _.CurrentStep[x]=M-b.global_gain>=4?4:2,_.OldValue[x]=b.global_gain,b.part2_3_length=I,I}this.trancate_smallspectrums=function(_,b,E,x){var A=Vp(Bu.SFBMAX);if(!(!(_.substep_shaping&4)&&b.block_type==Y.SHORT_TYPE||_.substep_shaping&128)){e.calc_noise(b,E,A,new I3,null);for(var k=0;k<576;k++){var I=0;b.l3_enc[k]!=0&&(I=Math.abs(b.xr[k])),x[k]=I}var k=0,O=8;b.block_type==Y.SHORT_TYPE&&(O=6);do{var M,T,P,R,L=b.width[O];if(k+=L,!(A[O]>=1)&&(gf.sort(x,k-L,L),!BitStream.EQ(x[k-1],0))){M=(1-A[O])*E[O],T=0,R=0;do{var F;for(P=1;R+P<L&&!BitStream.NEQ(x[R+k-L],x[R+k+P-L]);P++);if(F=x[R+k-L]*x[R+k-L]*P,M<F){R!=0&&(T=x[R+k-L-1]);break}M-=F,R+=P}while(R<L);if(!BitStream.EQ(T,0))do Math.abs(b.xr[k-L])<=T&&(b.l3_enc[k-L]=0);while(--L>0)}}while(++O<b.psymax);b.part2_3_length=s.noquant_count_bits(_,b,null)}};function c(_){for(var b=0;b<_.sfbmax;b++)if(_.scalefac[b]+_.subblock_gain[_.window[b]]==0)return!1;return!0}function u(_){return R3.FAST_LOG10(.368+.632*_*_*_)}function d(_,b){for(var E=1e-37,x=0;x<b.psymax;x++)E+=u(_[x]);return Math.max(1e-20,E)}function f(_,b,E,x,A){var I;switch(_){default:case 9:{b.over_count>0?(I=E.over_SSD<=b.over_SSD,E.over_SSD==b.over_SSD&&(I=E.bits<b.bits)):I=E.max_noise<0&&E.max_noise*10+E.bits<=b.max_noise*10+b.bits;break}case 0:I=E.over_count<b.over_count||E.over_count==b.over_count&&E.over_noise<b.over_noise||E.over_count==b.over_count&&BitStream.EQ(E.over_noise,b.over_noise)&&E.tot_noise<b.tot_noise;break;case 8:E.max_noise=d(A,x);case 1:I=E.max_noise<b.max_noise;break;case 2:I=E.tot_noise<b.tot_noise;break;case 3:I=E.tot_noise<b.tot_noise&&E.max_noise<b.max_noise;break;case 4:I=E.max_noise<=0&&b.max_noise>.2||E.max_noise<=0&&b.max_noise<0&&b.max_noise>E.max_noise-.2&&E.tot_noise<b.tot_noise||E.max_noise<=0&&b.max_noise>0&&b.max_noise>E.max_noise-.2&&E.tot_noise<b.tot_noise+b.over_noise||E.max_noise>0&&b.max_noise>-.05&&b.max_noise>E.max_noise-.1&&E.tot_noise+E.over_noise<b.tot_noise+b.over_noise||E.max_noise>0&&b.max_noise>-.1&&b.max_noise>E.max_noise-.15&&E.tot_noise+E.over_noise+E.over_noise<b.tot_noise+b.over_noise+b.over_noise;break;case 5:I=E.over_noise<b.over_noise||BitStream.EQ(E.over_noise,b.over_noise)&&E.tot_noise<b.tot_noise;break;case 6:I=E.over_noise<b.over_noise||BitStream.EQ(E.over_noise,b.over_noise)&&(E.max_noise<b.max_noise||BitStream.EQ(E.max_noise,b.max_noise)&&E.tot_noise<=b.tot_noise);break;case 7:I=E.over_count<b.over_count||E.over_noise<b.over_noise;break}return b.over_count==0&&(I=I&&E.bits<b.bits),I}function p(_,b,E,x,A){var I=_.internal_flags,k;b.scalefac_scale==0?k=1.2968395546510096:k=1.6817928305074292;for(var O=0,M=0;M<b.sfbmax;M++)O<E[M]&&(O=E[M]);var T=I.noise_shaping_amp;switch(T==3&&(A?T=2:T=1),T){case 2:break;case 1:O>1?O=Math.pow(O,.5):O*=.95;break;case 0:default:O>1?O=1:O*=.95;break}for(var P=0,M=0;M<b.sfbmax;M++){var R=b.width[M],L;if(P+=R,!(E[M]<O)){if(I.substep_shaping&2&&(I.pseudohalf[M]=I.pseudohalf[M]==0?1:0,I.pseudohalf[M]==0&&I.noise_shaping_amp==2))return;for(b.scalefac[M]++,L=-R;L<0;L++)x[P+L]*=k,x[P+L]>b.xrpow_max&&(b.xrpow_max=x[P+L]);if(I.noise_shaping_amp==2)return}}}function m(_,b){for(var E=1.2968395546510096,x=0,A=0;A<_.sfbmax;A++){var I=_.width[A],k=_.scalefac[A];if(_.preflag!=0&&(k+=e.pretab[A]),x+=I,k&1){k++;for(var O=-I;O<0;O++)b[x+O]*=E,b[x+O]>_.xrpow_max&&(_.xrpow_max=b[x+O])}_.scalefac[A]=k>>1}_.preflag=0,_.scalefac_scale=1}function v(_,b,E){var x,A=b.scalefac;for(x=0;x<b.sfb_lmax;x++)if(A[x]>=16)return!0;for(var I=0;I<3;I++){var k=0,O=0;for(x=b.sfb_lmax+I;x<b.sfbdivide;x+=3)k<A[x]&&(k=A[x]);for(;x<b.sfbmax;x+=3)O<A[x]&&(O=A[x]);if(!(k<16&&O<8)){if(b.subblock_gain[I]>=7)return!0;b.subblock_gain[I]++;var M=_.scalefac_band.l[b.sfb_lmax];for(x=b.sfb_lmax+I;x<b.sfbmax;x+=3){var T,P=b.width[x],R=A[x];if(R=R-(4>>b.scalefac_scale),R>=0){A[x]=R,M+=P*3;continue}A[x]=0;{var L=210+(R<<b.scalefac_scale+1);T=e.IPOW20(L)}M+=P*(I+1);for(var F=-P;F<0;F++)E[M+F]*=T,E[M+F]>b.xrpow_max&&(b.xrpow_max=E[M+F]);M+=P*(3-I-1)}{var T=e.IPOW20(202);M+=b.width[x]*(I+1);for(var F=-b.width[x];F<0;F++)E[M+F]*=T,E[M+F]>b.xrpow_max&&(b.xrpow_max=E[M+F])}}}return!1}function y(_,b,E,x,A){var I=_.internal_flags;p(_,b,E,x,A);var k=c(b);return k?!1:(I.mode_gr==2?k=s.scale_bitcount(b):k=s.scale_bitcount_lsf(I,b),k?(I.noise_shaping>1&&(gf.fill(I.pseudohalf,0),b.scalefac_scale==0?(m(b,x),k=!1):b.block_type==Y.SHORT_TYPE&&I.subblock_gain>0&&(k=v(I,b,x)||c(b))),k||(I.mode_gr==2?k=s.scale_bitcount(b):k=s.scale_bitcount_lsf(I,b)),!k):!0)}this.outer_loop=function(_,b,E,x,A,I){var k=_.internal_flags,O=new X_,M=Vp(576),T=Vp(Bu.SFBMAX),P=new I3,R,L=new B$e,F=9999999,B=!1,z=!1,J=0;if(l(k,b,I,A,x),k.noise_shaping==0)return 100;e.calc_noise(b,E,T,P,L),P.bits=b.part2_3_length,O.assign(b);var q=0;for(lu.arraycopy(x,0,M,0,576);!B;){do{var G=new I3,S,V=255;if(k.substep_shaping&2?S=20:S=3,k.sfb21_extra&&(T[O.sfbmax]>1||O.block_type==Y.SHORT_TYPE&&(T[O.sfbmax+1]>1||T[O.sfbmax+2]>1))||!y(_,O,T,x,z))break;O.scalefac_scale!=0&&(V=254);var re=I-O.part2_length;if(re<=0)break;for(;(O.part2_3_length=s.count_bits(k,x,O,L))>re&&O.global_gain<=V;)O.global_gain++;if(O.global_gain>V)break;if(P.over_count==0){for(;(O.part2_3_length=s.count_bits(k,x,O,L))>F&&O.global_gain<=V;)O.global_gain++;if(O.global_gain>V)break}if(e.calc_noise(O,E,T,G,L),G.bits=O.part2_3_length,b.block_type!=Y.SHORT_TYPE?R=_.quant_comp:R=_.quant_comp_short,R=f(R,P,G,O,T)?1:0,R!=0)F=b.part2_3_length,P=G,b.assign(O),q=0,lu.arraycopy(x,0,M,0,576);else if(k.full_outer_loop==0&&(++q>S&&P.over_count==0||k.noise_shaping_amp==3&&z&&q>30||k.noise_shaping_amp==3&&z&&O.global_gain-J>15))break}while(O.global_gain+O.scalefac_scale<255);k.noise_shaping_amp==3?z?B=!0:(O.assign(b),lu.arraycopy(M,0,x,0,576),q=0,J=O.global_gain,z=!0):B=!0}return Dp(b.global_gain+b.scalefac_scale<=255),_.VBR==KP.vbr_rh||_.VBR==KP.vbr_mtrh?lu.arraycopy(M,0,x,0,576):k.substep_shaping&1&&trancate_smallspectrums(k,b,E,x),P.over_count},this.iteration_finish_one=function(_,b,E){var x=_.l3_side,A=x.tt[b][E];s.best_scalefac_store(_,b,E,x),_.use_best_huffman==1&&s.best_huffman_divide(_,A),n.ResvAdjust(_,A)},this.VBR_encode_granule=function(_,b,E,x,A,I,k){var O=_.internal_flags,M=new X_,T=Vp(576),P=k,R=k+1,L=(k+I)/2,F,B,z=0,J=O.sfb21_extra;Dp(P<=LameInternalFlags.MAX_BITS_PER_CHANNEL),gf.fill(M.l3_enc,0);do L>P-42?O.sfb21_extra=!1:O.sfb21_extra=J,B=outer_loop(_,b,E,x,A,L),B<=0?(z=1,R=b.part2_3_length,M.assign(b),lu.arraycopy(x,0,T,0,576),k=R-32,F=k-I,L=(k+I)/2):(I=L+32,F=k-I,L=(k+I)/2,z!=0&&(z=2,b.assign(M),lu.arraycopy(T,0,x,0,576)));while(F>12);O.sfb21_extra=J,z==2&&lu.arraycopy(M.l3_enc,0,b.l3_enc,0,576),Dp(b.part2_3_length<=P)},this.get_framebits=function(_,b){var E=_.internal_flags;E.bitrate_index=E.VBR_min_bitrate;var x=t.getframebits(_);E.bitrate_index=1,x=t.getframebits(_);for(var A=1;A<=E.VBR_max_bitrate;A++){E.bitrate_index=A;var I=new MeanBits(x);b[A]=n.ResvFrameBegin(_,I),x=I.bits}},this.VBR_old_prepare=function(_,b,E,x,A,I,k,O,M){var T=_.internal_flags,P,R=0,L=1,F=0;T.bitrate_index=T.VBR_max_bitrate;var B=n.ResvFrameBegin(_,new MeanBits(0))/T.mode_gr;get_framebits(_,I);for(var z=0;z<T.mode_gr;z++){var J=e.on_pe(_,b,O[z],B,z,0);T.mode_ext==Y.MPG_MD_MS_LR&&(ms_convert(T.l3_side,z),e.reduce_side(O[z],E[z],B,J));for(var q=0;q<T.channels_out;++q){var G=T.l3_side.tt[z][q];G.block_type!=Y.SHORT_TYPE?(R=1.28/(1+Math.exp(3.5-b[z][q]/300))-.05,P=T.PSY.mask_adjust-R):(R=2.56/(1+Math.exp(3.5-b[z][q]/300))-.14,P=T.PSY.mask_adjust_short-R),T.masking_lower=Math.pow(10,P*.1),init_outer_loop(T,G),M[z][q]=e.calc_xmin(_,x[z][q],G,A[z][q]),M[z][q]!=0&&(L=0),k[z][q]=126,F+=O[z][q]}}for(var z=0;z<T.mode_gr;z++)for(var q=0;q<T.channels_out;q++)F>I[T.VBR_max_bitrate]&&(O[z][q]*=I[T.VBR_max_bitrate],O[z][q]/=F),k[z][q]>O[z][q]&&(k[z][q]=O[z][q]);return L},this.bitpressure_strategy=function(_,b,E,x){for(var A=0;A<_.mode_gr;A++)for(var I=0;I<_.channels_out;I++){for(var k=_.l3_side.tt[A][I],O=b[A][I],M=0,T=0;T<k.psy_lmax;T++)O[M++]*=1+.029*T*T/Y.SBMAX_l/Y.SBMAX_l;if(k.block_type==Y.SHORT_TYPE)for(var T=k.sfb_smin;T<Y.SBMAX_s;T++)O[M++]*=1+.029*T*T/Y.SBMAX_s/Y.SBMAX_s,O[M++]*=1+.029*T*T/Y.SBMAX_s/Y.SBMAX_s,O[M++]*=1+.029*T*T/Y.SBMAX_s/Y.SBMAX_s;x[A][I]=0|Math.max(E[A][I],.9*x[A][I])}},this.VBR_new_prepare=function(_,b,E,x,A,I){var k=_.internal_flags,O=1,M=0,T=0,P;if(_.free_format){k.bitrate_index=0;var R=new MeanBits(M);P=n.ResvFrameBegin(_,R),M=R.bits,A[0]=P}else{k.bitrate_index=k.VBR_max_bitrate;var R=new MeanBits(M);n.ResvFrameBegin(_,R),M=R.bits,get_framebits(_,A),P=A[k.VBR_max_bitrate]}for(var L=0;L<k.mode_gr;L++){e.on_pe(_,b,I[L],M,L,0),k.mode_ext==Y.MPG_MD_MS_LR&&ms_convert(k.l3_side,L);for(var F=0;F<k.channels_out;++F){var B=k.l3_side.tt[L][F];k.masking_lower=Math.pow(10,k.PSY.mask_adjust*.1),init_outer_loop(k,B),e.calc_xmin(_,E[L][F],B,x[L][F])!=0&&(O=0),T+=I[L][F]}}for(var L=0;L<k.mode_gr;L++)for(var F=0;F<k.channels_out;F++)T>P&&(I[L][F]*=P,I[L][F]/=T);return O},this.calc_target_bits=function(_,b,E,x,A,I){var k=_.internal_flags,O=k.l3_side,M,T,P,R,L=0;k.bitrate_index=k.VBR_max_bitrate;var F=new MeanBits(L);for(I[0]=n.ResvFrameBegin(_,F),L=F.bits,k.bitrate_index=1,L=t.getframebits(_)-k.sideinfo_len*8,A[0]=L/(k.mode_gr*k.channels_out),L=_.VBR_mean_bitrate_kbps*_.framesize*1e3,k.substep_shaping&1&&(L*=1.09),L/=_.out_samplerate,L-=k.sideinfo_len*8,L/=k.mode_gr*k.channels_out,M=.93+.07*(11-_.compression_ratio)/(11-5.5),M<.9&&(M=.9),M>1&&(M=1),T=0;T<k.mode_gr;T++){var B=0;for(P=0;P<k.channels_out;P++){if(x[T][P]=int(M*L),b[T][P]>700){var z=int((b[T][P]-700)/1.4),J=O.tt[T][P];x[T][P]=int(M*L),J.block_type==Y.SHORT_TYPE&&z<L/2&&(z=L/2),z>L*3/2?z=L*3/2:z<0&&(z=0),x[T][P]+=z}x[T][P]>LameInternalFlags.MAX_BITS_PER_CHANNEL&&(x[T][P]=LameInternalFlags.MAX_BITS_PER_CHANNEL),B+=x[T][P]}if(B>LameInternalFlags.MAX_BITS_PER_GRANULE)for(P=0;P<k.channels_out;++P)x[T][P]*=LameInternalFlags.MAX_BITS_PER_GRANULE,x[T][P]/=B}if(k.mode_ext==Y.MPG_MD_MS_LR)for(T=0;T<k.mode_gr;T++)e.reduce_side(x[T],E[T],L*k.channels_out,LameInternalFlags.MAX_BITS_PER_GRANULE);for(R=0,T=0;T<k.mode_gr;T++)for(P=0;P<k.channels_out;P++)x[T][P]>LameInternalFlags.MAX_BITS_PER_CHANNEL&&(x[T][P]=LameInternalFlags.MAX_BITS_PER_CHANNEL),R+=x[T][P];if(R>I[0])for(T=0;T<k.mode_gr;T++)for(P=0;P<k.channels_out;P++)x[T][P]*=I[0],x[T][P]/=R}}var GP=St.assert;function N$e(){var t;this.setModules=function(n){t=n},this.ResvFrameBegin=function(n,e){var i=n.internal_flags,s,r=i.l3_side,o=t.getframebits(n);e.bits=(o-i.sideinfo_len*8)/i.mode_gr;var a=8*256*i.mode_gr-8;n.brate>320?s=8*int(n.brate*1e3/(n.out_samplerate/1152)/8+.5):(s=8*1440,n.strict_ISO&&(s=8*int(32e4/(n.out_samplerate/1152)/8+.5))),i.ResvMax=s-o,i.ResvMax>a&&(i.ResvMax=a),(i.ResvMax<0||n.disable_reservoir)&&(i.ResvMax=0);var l=e.bits*i.mode_gr+Math.min(i.ResvSize,i.ResvMax);return l>s&&(l=s),GP(i.ResvMax%8==0),GP(i.ResvMax>=0),r.resvDrain_pre=0,i.pinfo!=null&&(i.pinfo.mean_bits=e.bits/2,i.pinfo.resvsize=i.ResvSize),l},this.ResvMaxBits=function(n,e,i,s){var r=n.internal_flags,o,a=r.ResvSize,l=r.ResvMax;s!=0&&(a+=e),r.substep_shaping&1&&(l*=.9),i.bits=e,a*10>l*9?(o=a-l*9/10,i.bits+=o,r.substep_shaping|=128):(o=0,r.substep_shaping&=127,!n.disable_reservoir&&!(r.substep_shaping&1)&&(i.bits-=.1*e));var c=a<r.ResvMax*6/10?a:r.ResvMax*6/10;return c-=o,c<0&&(c=0),c},this.ResvAdjust=function(n,e){n.ResvSize-=e.part2_3_length+e.part2_length},this.ResvFrameEnd=function(n,e){var i,s=n.l3_side;n.ResvSize+=e*n.mode_gr;var r=0;s.resvDrain_post=0,s.resvDrain_pre=0,(i=n.ResvSize%8)!=0&&(r+=i),i=n.ResvSize-r-n.ResvMax,i>0&&(r+=i);{var o=Math.min(s.main_data_begin*8,r)/8;s.resvDrain_pre+=8*o,r-=8*o,n.ResvSize-=8*o,s.main_data_begin-=o}s.resvDrain_post+=r,n.ResvSize-=r}}function V$e(){var t="http://www.mp3dev.org/",n=3,e=98,i=4,s=0,r=93;this.getLameVersion=function(){return n+"."+e+"."+i},this.getLameShortVersion=function(){return n+"."+e+"."+i},this.getLameVeryShortVersion=function(){return"LAME"+n+"."+e+"r"},this.getPsyVersion=function(){return s+"."+r},this.getLameUrl=function(){return t},this.getLameOsBitness=function(){return"32bits"}}var D$e=St.System,M3=St.VbrMode,YP=St.ShortBlock,$$e=St.Arrays,lb=St.new_byte,z$e=St.assert;A1.NUMTOCENTRIES=100;A1.MAXFRAMESIZE=2880;function A1(){var t,n,e;this.setModules=function(L,F,B){t=L,n=F,e=B};var i=1,s=2,r=4,o=8,a=A1.NUMTOCENTRIES,l=A1.MAXFRAMESIZE,c=a+4+4+4+4+4,u=c+9+1+1+8+1+1+3+1+1+2+4+2+2,d=128,f=64,p=32,m=null,v="Xing",y="Info",_=[0,49345,49537,320,49921,960,640,49729,50689,1728,1920,51009,1280,50625,50305,1088,52225,3264,3456,52545,3840,53185,52865,3648,2560,51905,52097,2880,51457,2496,2176,51265,55297,6336,6528,55617,6912,56257,55937,6720,7680,57025,57217,8e3,56577,7616,7296,56385,5120,54465,54657,5440,55041,6080,5760,54849,53761,4800,4992,54081,4352,53697,53377,4160,61441,12480,12672,61761,13056,62401,62081,12864,13824,63169,63361,14144,62721,13760,13440,62529,15360,64705,64897,15680,65281,16320,16e3,65089,64001,15040,15232,64321,14592,63937,63617,14400,10240,59585,59777,10560,60161,11200,10880,59969,60929,11968,12160,61249,11520,60865,60545,11328,58369,9408,9600,58689,9984,59329,59009,9792,8704,58049,58241,9024,57601,8640,8320,57409,40961,24768,24960,41281,25344,41921,41601,25152,26112,42689,42881,26432,42241,26048,25728,42049,27648,44225,44417,27968,44801,28608,28288,44609,43521,27328,27520,43841,26880,43457,43137,26688,30720,47297,47489,31040,47873,31680,31360,47681,48641,32448,32640,48961,32e3,48577,48257,31808,46081,29888,30080,46401,30464,47041,46721,30272,29184,45761,45953,29504,45313,29120,28800,45121,20480,37057,37249,20800,37633,21440,21120,37441,38401,22208,22400,38721,21760,38337,38017,21568,39937,23744,23936,40257,24320,40897,40577,24128,23040,39617,39809,23360,39169,22976,22656,38977,34817,18624,18816,35137,19200,35777,35457,19008,19968,36545,36737,20288,36097,19904,19584,35905,17408,33985,34177,17728,34561,18368,18048,34369,33281,17088,17280,33601,16640,33217,32897,16448];function b(L,F){if(L.nVbrNumFrames++,L.sum+=F,L.seen++,!(L.seen<L.want)&&(L.pos<L.size&&(L.bag[L.pos]=L.sum,L.pos++,L.seen=0),L.pos==L.size)){for(var B=1;B<L.size;B+=2)L.bag[B/2]=L.bag[B];L.want*=2,L.pos/=2}}function E(L,F){if(!(L.pos<=0))for(var B=1;B<a;++B){var z=B/a,J,q,G=0|Math.floor(z*L.pos);G>L.pos-1&&(G=L.pos-1),J=L.bag[G],q=L.sum;var S=0|256*J/q;S>255&&(S=255),F[B]=255&S}}this.addVbrFrame=function(L){var F=L.internal_flags,B=Tables.bitrate_table[L.version][F.bitrate_index];z$e(F.VBR_seek_table.bag!=null),b(F.VBR_seek_table,B)};function x(L,F){var B=L[F+0]&255;return B<<=8,B|=L[F+1]&255,B<<=8,B|=L[F+2]&255,B<<=8,B|=L[F+3]&255,B}function A(L,F,B){L[F+0]=255&(B>>24&255),L[F+1]=255&(B>>16&255),L[F+2]=255&(B>>8&255),L[F+3]=255&(B&255)}function I(L,F,B){L[F+0]=255&(B>>8&255),L[F+1]=255&(B&255)}function k(L,F){return new String(L,F,v.length(),m).equals(v)||new String(L,F,y.length(),m).equals(y)}function O(L,F,B){return 255&(L<<F|B&~(-1<<F))}function M(L,F){var B=L.internal_flags;F[0]=O(F[0],8,255),F[1]=O(F[1],3,7),F[1]=O(F[1],1,L.out_samplerate<16e3?0:1),F[1]=O(F[1],1,L.version),F[1]=O(F[1],2,1),F[1]=O(F[1],1,L.error_protection?0:1),F[2]=O(F[2],4,B.bitrate_index),F[2]=O(F[2],2,B.samplerate_index),F[2]=O(F[2],1,0),F[2]=O(F[2],1,L.extension),F[3]=O(F[3],2,L.mode.ordinal()),F[3]=O(F[3],2,B.mode_ext),F[3]=O(F[3],1,L.copyright),F[3]=O(F[3],1,L.original),F[3]=O(F[3],2,L.emphasis),F[0]=255;var z=255&(F[1]&241),J;L.version==1?J=d:L.out_samplerate<16e3?J=p:J=f,L.VBR==M3.vbr_off&&(J=L.brate);var q;L.free_format?q=0:q=255&16*t.BitrateIndex(J,L.version,L.out_samplerate),L.version==1?(F[1]=255&(z|10),z=255&(F[2]&13),F[2]=255&(q|z)):(F[1]=255&(z|2),z=255&(F[2]&13),F[2]=255&(q|z))}this.getVbrTag=function(L){var F=new VBRTagData,B=0;F.flags=0;var z=L[B+1]>>3&1,J=L[B+2]>>2&3,q=L[B+3]>>6&3,G=L[B+2]>>4&15;if(G=Tables.bitrate_table[z][G],L[B+1]>>4==14?F.samprate=Tables.samplerate_table[2][J]:F.samprate=Tables.samplerate_table[z][J],z!=0?q!=3?B+=36:B+=21:q!=3?B+=21:B+=13,!k(L,B))return null;B+=4,F.hId=z;var S=F.flags=x(L,B);if(B+=4,S&i&&(F.frames=x(L,B),B+=4),S&s&&(F.bytes=x(L,B),B+=4),S&r){if(F.toc!=null)for(var V=0;V<a;V++)F.toc[V]=L[B+V];B+=a}F.vbrScale=-1,S&o&&(F.vbrScale=x(L,B),B+=4),F.headersize=(z+1)*72e3*G/F.samprate,B+=21;var re=L[B+0]<<4;re+=L[B+1]>>4;var U=(L[B+1]&15)<<8;return U+=L[B+2]&255,(re<0||re>3e3)&&(re=-1),(U<0||U>3e3)&&(U=-1),F.encDelay=re,F.encPadding=U,F},this.InitVbrTag=function(L){var F=L.internal_flags,B;L.version==1?B=d:L.out_samplerate<16e3?B=p:B=f,L.VBR==M3.vbr_off&&(B=L.brate);var z=(L.version+1)*72e3*B/L.out_samplerate,J=F.sideinfo_len+u;if(F.VBR_seek_table.TotalFrameSize=z,z<J||z>l){L.bWriteVbrTag=!1;return}F.VBR_seek_table.nVbrNumFrames=0,F.VBR_seek_table.nBytesWritten=0,F.VBR_seek_table.sum=0,F.VBR_seek_table.seen=0,F.VBR_seek_table.want=1,F.VBR_seek_table.pos=0,F.VBR_seek_table.bag==null&&(F.VBR_seek_table.bag=new int[400],F.VBR_seek_table.size=400);var q=lb(l);M(L,q);for(var G=F.VBR_seek_table.TotalFrameSize,S=0;S<G;++S)n.add_dummy_byte(L,q[S]&255,1)};function T(L,F){var B=F^L;return F=F>>8^_[B&255],F}this.updateMusicCRC=function(L,F,B,z){for(var J=0;J<z;++J)L[0]=T(F[B+J],L[0])};function P(L,F,B,z,J){var q=L.internal_flags,G=0,S=L.encoder_delay,V=L.encoder_padding,re=100-10*L.VBR_q-L.quality,U=e.getLameVeryShortVersion(),Pe,Fe=0,Ne,ne=[1,5,3,2,4,0,3],me=0|(L.lowpassfreq/100+.5>255?255:L.lowpassfreq/100+.5),pe=0,ge=0,rt=0,wt=L.internal_flags.noise_shaping,D=0,$=0,X=0,le=0,ie=0,be=(L.exp_nspsytune&1)!=0,Ae=(L.exp_nspsytune&2)!=0,_e=!1,Ee=!1,he=L.internal_flags.nogap_total,He=L.internal_flags.nogap_current,ze=L.ATHtype,de=0,We;switch(L.VBR){case vbr_abr:We=L.VBR_mean_bitrate_kbps;break;case vbr_off:We=L.brate;break;default:We=L.VBR_min_bitrate_kbps}switch(L.VBR.ordinal()<ne.length?Pe=ne[L.VBR.ordinal()]:Pe=0,Ne=16*Fe+Pe,q.findReplayGain&&(q.RadioGain>510&&(q.RadioGain=510),q.RadioGain<-510&&(q.RadioGain=-510),ge=8192,ge|=3072,q.RadioGain>=0?ge|=q.RadioGain:(ge|=512,ge|=-q.RadioGain)),q.findPeakSample&&(pe=Math.abs(0|q.PeakSample/32767*Math.pow(2,23)+.5)),he!=-1&&(He>0&&(Ee=!0),He<he-1&&(_e=!0)),de=ze+((be?1:0)<<4)+((Ae?1:0)<<5)+((_e?1:0)<<6)+((Ee?1:0)<<7),re<0&&(re=0),L.mode){case MONO:D=0;break;case STEREO:D=1;break;case DUAL_CHANNEL:D=2;break;case JOINT_STEREO:L.force_ms?D=4:D=3;break;case NOT_SET:default:D=7;break}L.in_samplerate<=32e3?X=0:L.in_samplerate==48e3?X=2:L.in_samplerate>48e3?X=3:X=1,(L.short_blocks==YP.short_block_forced||L.short_blocks==YP.short_block_dispensed||L.lowpassfreq==-1&&L.highpassfreq==-1||L.scale_left<L.scale_right||L.scale_left>L.scale_right||L.disable_reservoir&&L.brate<320||L.noATH||L.ATHonly||ze==0||L.in_samplerate<=32e3)&&($=1),le=wt+(D<<2)+($<<5)+(X<<6),ie=q.nMusicCRC,A(B,z+G,re),G+=4;for(var ut=0;ut<9;ut++)B[z+G+ut]=255&U.charAt(ut);G+=9,B[z+G]=255&Ne,G++,B[z+G]=255&me,G++,A(B,z+G,pe),G+=4,I(B,z+G,ge),G+=2,I(B,z+G,rt),G+=2,B[z+G]=255&de,G++,We>=255?B[z+G]=255:B[z+G]=255&We,G++,B[z+G]=255&S>>4,B[z+G+1]=255&(S<<4)+(V>>8),B[z+G+2]=255&V,G+=3,B[z+G]=255&le,G++,B[z+G++]=0,I(B,z+G,L.preset),G+=2,A(B,z+G,F),G+=4,I(B,z+G,ie),G+=2;for(var Re=0;Re<G;Re++)J=T(B[z+Re],J);return I(B,z+G,J),G+=2,G}function R(L){L.seek(0);var F=lb(10);L.readFully(F);var B;return new String(F,"ISO-8859-1").startsWith("ID3")?B=0:B=((F[6]&127)<<21|(F[7]&127)<<14|(F[8]&127)<<7|F[9]&127)+F.length,B}this.getLameTagFrame=function(L,F){var B=L.internal_flags;if(!L.bWriteVbrTag||B.Class_ID!=Lame.LAME_ID||B.VBR_seek_table.pos<=0)return 0;if(F.length<B.VBR_seek_table.TotalFrameSize)return B.VBR_seek_table.TotalFrameSize;$$e.fill(F,0,B.VBR_seek_table.TotalFrameSize,0),M(L,F);var z=lb(a);if(L.free_format)for(var J=1;J<a;++J)z[J]=255&255*J/100;else E(B.VBR_seek_table,z);var q=B.sideinfo_len;L.error_protection&&(q-=2),L.VBR==M3.vbr_off?(F[q++]=255&y.charAt(0),F[q++]=255&y.charAt(1),F[q++]=255&y.charAt(2),F[q++]=255&y.charAt(3)):(F[q++]=255&v.charAt(0),F[q++]=255&v.charAt(1),F[q++]=255&v.charAt(2),F[q++]=255&v.charAt(3)),A(F,q,i+s+r+o),q+=4,A(F,q,B.VBR_seek_table.nVbrNumFrames),q+=4;var G=B.VBR_seek_table.nBytesWritten+B.VBR_seek_table.TotalFrameSize;A(F,q,0|G),q+=4,D$e.arraycopy(z,0,F,q,z.length),q+=z.length,L.error_protection&&n.CRC_writeheader(B,F);for(var S=0,J=0;J<q;J++)S=T(F[J],S);return q+=P(L,G,F,q,S),B.VBR_seek_table.TotalFrameSize},this.putVbrTag=function(L,F){var B=L.internal_flags;if(B.VBR_seek_table.pos<=0||(F.seek(F.length()),F.length()==0))return-1;var z=R(F);F.seek(z);var J=lb(l),q=getLameTagFrame(L,J);return q>J.length?-1:(q<1||F.write(J,0,q),0)}}var ZP=St.new_byte,H$e=St.assert;function U$e(){this.setModules=function(t,n){}}function W$e(){this.setModules=function(t,n,e){}}function j$e(){}function q$e(){this.setModules=function(t,n){}}function K$e(t,n,e){arguments.length!=3&&(console.error("WARN: Mp3Encoder(channels, samplerate, kbps) not specified"),t=1,n=44100,e=128);var i=new dn,s=new U$e,r=new cs,o=new Zo,a=new P$e,l=new rr,c=new F$e,u=new A1,d=new V$e,f=new q$e,p=new N$e,m=new x1,v=new W$e,y=new j$e;i.setModules(r,o,a,l,c,u,d,f,y),o.setModules(r,y,d,u),f.setModules(o,d),a.setModules(i),c.setModules(o,p,l,m),l.setModules(m,p,i.enc.psy),p.setModules(o),m.setModules(l),u.setModules(i,o,d),s.setModules(v,y),v.setModules(d,f,a);var _=i.lame_init();_.num_channels=t,_.in_samplerate=n,_.brate=e,_.mode=ai.STEREO,_.quality=3,_.bWriteVbrTag=!1,_.disable_reservoir=!0,_.write_id3tag_automatic=!1,i.lame_init_params(_);var b=1152,E=0|1.25*b+7200,x=ZP(E);this.encodeBuffer=function(A,I){t==1&&(I=A),H$e(A.length==I.length),A.length>b&&(b=A.length,E=0|1.25*b+7200,x=ZP(E));var k=i.lame_encode_buffer(_,A,I,A.length,x,0,E);return new Int8Array(x.subarray(0,k))},this.flush=function(){var A=i.lame_encode_flush(_,x,0,E);return new Int8Array(x.subarray(0,A))}}function Ry(t){return t.charCodeAt(0)<<24|t.charCodeAt(1)<<16|t.charCodeAt(2)<<8|t.charCodeAt(3)}Ry("RIFF");Ry("WAVE");Ry("fmt ");Ry("data");class G$e{constructor(n){this.bitRate=n.bitRate,this.sampleRate=n.sampleRate,this.dataBuffer=[],this.encoder=new K$e(1,this.sampleRate,this.bitRate)}encode(n){const i=this._convertBuffer(n);let s=i.length;for(let r=0;s>=0;r+=1152){const o=i.subarray(r,r+1152),a=this.encoder.encodeBuffer(o);this.dataBuffer.push(new Int8Array(a)),s-=1152}}finish(){this.dataBuffer.push(this.encoder.flush());const n=new Blob(this.dataBuffer,{type:"audio/mp3"});return this.dataBuffer=[],{id:Date.now(),blob:n,url:URL.createObjectURL(n)}}_floatTo16BitPCM(n,e){for(let i=0;i<n.length;i++){const s=Math.max(-1,Math.min(1,n[i]));e[i]=s<0?s*32768:s*32767}}_convertBuffer(n){const e=new Float32Array(n),i=new Int16Array(n.length);return this._floatTo16BitPCM(e,i),i}}class Y$e{constructor(n={}){this.beforeRecording=n.beforeRecording,this.pauseRecording=n.pauseRecording,this.afterRecording=n.afterRecording,this.micFailed=n.micFailed,this.encoderOptions={bitRate:n.bitRate,sampleRate:n.sampleRate},this.bufferSize=4096,this.records=[],this.isPause=!1,this.isRecording=!1,this.duration=0,this.volume=0,this._duration=0}start(){const n={video:!1,audio:{channelCount:1,echoCancellation:!1}};this.beforeRecording&&this.beforeRecording("start recording"),navigator.mediaDevices.getUserMedia(n).then(this._micCaptured.bind(this)).catch(this._micError.bind(this)),this.isPause=!1,this.isRecording=!0,this.lameEncoder||(this.lameEncoder=new G$e(this.encoderOptions))}stop(){this.stream.getTracks().forEach(e=>e.stop()),this.input.disconnect(),this.processor.disconnect(),this.context.close();let n=null;n=this.lameEncoder.finish(),n.duration=this.duration,this.records.push(n),this._duration=0,this.duration=0,this.isPause=!1,this.isRecording=!1,this.afterRecording&&this.afterRecording(n)}pause(){this.stream.getTracks().forEach(n=>n.stop()),this.input.disconnect(),this.processor.disconnect(),this._duration=this.duration,this.isPause=!0,this.pauseRecording&&this.pauseRecording("pause recording")}_micCaptured(n){this.context=new(window.AudioContext||window.webkitAudioContext),this.duration=this._duration,this.input=this.context.createMediaStreamSource(n),this.processor=this.context.createScriptProcessor(this.bufferSize,1,1),this.stream=n,this.processor.onaudioprocess=e=>{const i=e.inputBuffer.getChannelData(0);let s=0;this.lameEncoder&&this.lameEncoder.encode(i);for(let r=0;r<i.length;++r)s+=i[r]*i[r];this.duration=parseFloat(this._duration)+parseFloat(this.context.currentTime.toFixed(2)),this.volume=Math.sqrt(s/i.length).toFixed(2)},this.input.connect(this.processor),this.processor.connect(this.context.destination)}_micError(n){this.micFailed&&this.micFailed(n)}}var XP=window.chrome,fT=window.navigator,Z$e=fT.vendor,X$e=typeof window.opr<"u",J$e=fT.userAgent.indexOf("Edg")>-1,Q$e=fT.userAgent.match("CriOS");function eze(){return Q$e?!0:XP!==null&&typeof XP<"u"&&Z$e==="Google Inc."&&X$e===!1&&J$e===!1}function JP(){var t=tze(),n=t.substr(0,4);return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw(n|u)|c55\/|capi|ccwa|cdm|cell|chtm|cldc|cmd|co(mp|nd)|craw|da(it|ll|ng)|dbte|dcs|devi|dica|dmob|do(c|p)o|ds(12|d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(|_)|g1 u|g560|gene|gf5|gmo|go(\.w|od)|gr(ad|un)|haie|hcit|hd(m|p|t)|hei|hi(pt|ta)|hp( i|ip)|hsc|ht(c(| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i(20|go|ma)|i230|iac( ||\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|[a-w])|libw|lynx|m1w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|mcr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|([1-8]|c))|phil|pire|pl(ay|uc)|pn2|po(ck|rt|se)|prox|psio|ptg|qaa|qc(07|12|21|32|60|[2-7]|i)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h|oo|p)|sdk\/|se(c(|0|1)|47|mc|nd|ri)|sgh|shar|sie(|m)|sk0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h|v|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl|tdg|tel(i|m)|tim|tmo|to(pl|sh)|ts(70|m|m3|m5)|tx9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas|your|zeto|zte/i.test(n)}function tze(){var t=navigator.userAgent||navigator.vendor||window.opera||null;if(!t)throw new Error("Failed to look for user agent information.");return t}const nze={name:"RoomFooter",components:{SvgIcon:Qs,EmojiPickerContainer:xW,RoomFiles:rDe,RoomMessageReply:IDe,RoomUsersTag:FDe,RoomEmojis:zDe,RoomTemplatesText:YDe},directives:{clickOutside:xy},props:{room:{type:Object,required:!0},roomId:{type:[String,Number],required:!0},roomMessage:{type:String,default:null},textFormatting:{type:Object,required:!0},linkOptions:{type:Object,required:!0},textMessages:{type:Object,required:!0},showSendIcon:{type:Boolean,required:!0},showFiles:{type:Boolean,required:!0},showAudio:{type:Boolean,required:!0},showEmojis:{type:Boolean,required:!0},showFooter:{type:Boolean,required:!0},acceptedFiles:{type:String,required:!0},multipleFiles:{type:Boolean,default:!0},captureFiles:{type:String,required:!0},textareaActionEnabled:{type:Boolean,required:!0},textareaAutoFocus:{type:Boolean,required:!0},userTagsEnabled:{type:Boolean,required:!0},emojisSuggestionEnabled:{type:Boolean,required:!0},templatesText:{type:Array,default:null},audioBitRate:{type:Number,required:!0},audioSampleRate:{type:Number,required:!0},initReplyMessage:{type:Object,default:null},initEditMessage:{type:Object,default:null},droppedFiles:{type:Array,default:null},emojiDataSource:{type:String,default:void 0}},emits:["edit-message","send-message","update-edited-message-id","textarea-action-handler","typing-message"],data(){return{message:"",editedMessage:{},messageReply:null,cursorRangePosition:null,files:[],fileDialog:!1,selectUsersTagItem:null,selectEmojiItem:null,selectTemplatesTextItem:null,format:"mp3",activeUpOrDownEmojis:null,activeUpOrDownUsersTag:null,activeUpOrDownTemplatesText:null,emojisDB:new fW({dataSource:this.emojiDataSource}),emojiOpened:!1,keepKeyboardOpen:!1,filteredEmojis:[],filteredUsersTag:[],selectedUsersTag:[],filteredTemplatesText:[],recorder:this.initRecorder(),isRecording:!1}},computed:{isMessageEmpty(){return!this.files.length&&!this.message.trim()},isFileLoading(){return this.files.some(t=>t.loading)},recordedTime(){return new Date(this.recorder.duration*1e3).toISOString().substr(14,5)},shadowFooter(){return!!this.filteredEmojis.length||!!this.filteredUsersTag.length||!!this.filteredTemplatesText.length||!!this.files.length||!!this.messageReply}},watch:{roomId(){this.resetMessage(!0,!0),this.roomMessage&&(this.message=this.roomMessage,setTimeout(()=>this.onChangeInput()))},message(t){this.getTextareaRef().value=t},roomMessage:{immediate:!0,handler(t){t&&(this.message=this.roomMessage)}},editedMessage(t){this.$emit("update-edited-message-id",t._id)},initReplyMessage(t){t&&this.replyMessage(t)},initEditMessage(t){t&&this.editMessage(t)},droppedFiles(t){t&&this.onFileChange(t)}},mounted(){const t=JP();let n=!0;this.getTextareaRef().addEventListener("keyup",e=>{e.key==="Enter"&&!e.shiftKey&&!this.fileDialog&&(t?(this.message=this.message+`
`,setTimeout(()=>this.onChangeInput())):n&&!this.filteredEmojis.length&&!this.filteredUsersTag.length&&!this.filteredTemplatesText.length&&this.sendMessage()),n=!e.isComposing,setTimeout(()=>{this.updateFooterLists()},60)}),this.getTextareaRef().addEventListener("click",()=>{t&&(this.keepKeyboardOpen=!0),this.updateFooterLists()}),this.getTextareaRef().addEventListener("blur",()=>{setTimeout(()=>{this.resetFooterList()},100),t&&setTimeout(()=>this.keepKeyboardOpen=!1)})},beforeUnmount(){this.stopRecorder()},methods:{getTextareaRef(){return this.$refs.roomTextarea},focusTextarea(t){JP()&&t||this.getTextareaRef()&&(this.getTextareaRef().focus(),this.cursorRangePosition&&setTimeout(()=>{const n=eze()?0:1;this.getTextareaRef().setSelectionRange(this.cursorRangePosition+n,this.cursorRangePosition+n),this.cursorRangePosition=null}))},onChangeInput(){var t,n,e;((t=this.getTextareaRef())!=null&&t.value||((n=this.getTextareaRef())==null?void 0:n.value)==="")&&(this.message=(e=this.getTextareaRef())==null?void 0:e.value),this.keepKeyboardOpen=!0,this.resizeTextarea(),this.$emit("typing-message",this.message)},resizeTextarea(){const t=this.getTextareaRef();if(!t)return;const n=window.getComputedStyle(t,null).getPropertyValue("padding-top").replace("px","");t.style.height=0,t.style.height=t.scrollHeight-n*2+"px"},escapeTextarea(){this.filteredEmojis.length?this.filteredEmojis=[]:this.filteredUsersTag.length?this.filteredUsersTag=[]:this.filteredTemplatesText.length?this.filteredTemplatesText=[]:this.resetMessage()},onPasteImage(t){var n;const e=(n=t.clipboardData)==null?void 0:n.items;e&&Array.from(e).forEach(i=>{if(i.type.includes("image")){const s=i.getAsFile();this.onFileChange([s])}})},updateActiveUpOrDown(t,n){this.filteredEmojis.length?(this.activeUpOrDownEmojis=n,t.preventDefault()):this.filteredUsersTag.length?(this.activeUpOrDownUsersTag=n,t.preventDefault()):this.filteredTemplatesText.length&&(this.activeUpOrDownTemplatesText=n,t.preventDefault())},selectItem(){this.filteredEmojis.length?this.selectEmojiItem=!0:this.filteredUsersTag.length?this.selectUsersTagItem=!0:this.filteredTemplatesText.length&&(this.selectTemplatesTextItem=!0)},selectEmoji(t){if(this.selectEmojiItem=!1,!t)return;const{position:n,endPosition:e}=this.getCharPosition(":");this.message=this.message.substr(0,n-1)+t+this.message.substr(e,this.message.length-1),this.cursorRangePosition=n,this.focusTextarea()},selectTemplateText(t){if(this.selectTemplatesTextItem=!1,!t)return;const{position:n,endPosition:e}=this.getCharPosition("/"),i=this.message.substr(e,e).length?"":" ";this.message=this.message.substr(0,n-1)+t.text+i+this.message.substr(e,this.message.length-1),this.cursorRangePosition=n+t.text.length+i.length+1,this.focusTextarea()},addEmoji(t){this.message+=t.unicode,this.focusTextarea(!0)},launchFilePicker(){this.$refs.file.value="",this.$refs.file.click()},async onFileChange(t){this.fileDialog=!0,this.focusTextarea(),Array.from(t).forEach(async n=>{const e=URL.createObjectURL(n),i=n.name.lastIndexOf(".");this.files.push({loading:!0,name:n.name.substring(0,i),size:n.size,type:n.type,extension:n.name.substring(i+1),localUrl:e});const s=await fetch(e).then(o=>o.blob());let r=this.files.find(o=>o.localUrl===e);r&&(r.blob=s,r.loading=!1,delete r.loading)}),setTimeout(()=>this.fileDialog=!1,500)},removeFile(t){this.files.splice(t,1),this.focusTextarea()},toggleRecorder(t){if(this.isRecording=t,!this.recorder.isRecording)setTimeout(()=>this.recorder.start(),200);else try{this.recorder.stop();const n=this.recorder.records[0];this.files.push({blob:n.blob,name:`audio.${this.format}`,size:n.blob.size,duration:n.duration,type:n.blob.type,audio:!0,localUrl:URL.createObjectURL(n.blob)}),this.recorder=this.initRecorder(),this.sendMessage()}catch{setTimeout(()=>this.stopRecorder(),100)}},stopRecorder(){if(this.recorder.isRecording)try{this.recorder.stop(),this.recorder=this.initRecorder()}catch{setTimeout(()=>this.stopRecorder(),100)}},textareaActionHandler(){this.$emit("textarea-action-handler",this.message)},sendMessage(){var t;let n=this.message.trim();if(!this.files.length&&!n||this.isFileLoading)return;this.selectedUsersTag.forEach(i=>{n=n.replace(`@${i.username}`,`<usertag>${i._id}</usertag>`)});const e=this.files.length?this.files:null;this.editedMessage._id?(this.editedMessage.content!==n||(t=this.editedMessage.files)!=null&&t.length||this.files.length)&&this.$emit("edit-message",{messageId:this.editedMessage._id,newContent:n,files:e,replyMessage:this.messageReply,usersTag:this.selectedUsersTag}):this.$emit("send-message",{content:n,files:e,replyMessage:this.messageReply,usersTag:this.selectedUsersTag}),this.resetMessage(!0)},editMessage(t){this.resetMessage(),this.editedMessage={...t};let n=t.content;const e=n,i="<usertag>",s="</usertag>";[...n.matchAll(new RegExp(i,"gi"))].map(o=>o.index).forEach(o=>{const a=e.substring(o+i.length,e.indexOf(s,o)),l=this.room.users.find(c=>c._id===a);n=n.replace(`${i}${a}${s}`,`@${(l==null?void 0:l.username)||"unknown"}`),this.selectUserTag(l,!0)}),this.message=n,t.files&&(this.files=[...t.files]),setTimeout(()=>this.resizeTextarea())},replyMessage(t){this.editedMessage={},this.messageReply=t,this.focusTextarea()},updateFooterLists(){this.updateFooterList("@"),this.updateFooterList(":"),this.updateFooterList("/")},updateFooterList(t){if(!this.getTextareaRef()||t===":"&&!this.emojisSuggestionEnabled||t==="@"&&(!this.userTagsEnabled||!this.room.users)||t==="/"&&!this.templatesText)return;const n=this.getTextareaRef().selectionStart;let e=n;for(;e>0&&this.message.charAt(e-1)!==t&&(this.message.charAt(e-1)!==" "||t!==":");)e--;const i=this.message.charAt(e-2),s=!i.match(/^[0-9a-zA-Z]+$/);if(this.message.charAt(e-1)===t&&(!i||i===" "||s)){const r=this.message.substring(e,n);t===":"?this.updateEmojis(r):t==="@"?this.updateShowUsersTag(r):t==="/"&&this.updateShowTemplatesText(r)}else this.resetFooterList(t)},updateShowUsersTag(t){this.filteredUsersTag=t4(this.room.users,"username",t,!0).filter(n=>n._id!==this.currentUserId)},selectUserTag(t,n=!1){if(this.selectUsersTagItem=!1,!t)return;const{position:e,endPosition:i}=this.getCharPosition("@"),s=this.message.substr(i,i).length?"":" ";this.message=this.message.substr(0,e)+t.username+s+this.message.substr(i,this.message.length-1),this.selectedUsersTag=[...this.selectedUsersTag,{...t}],n||(this.cursorRangePosition=e+t.username.length+s.length+1),this.focusTextarea()},updateShowTemplatesText(t){this.filteredTemplatesText=t4(this.templatesText,"tag",t,!0)},getCharPosition(t){let e=this.getTextareaRef().selectionStart;for(;e>0&&this.message.charAt(e-1)!==t;)e--;const i=this.getTextareaRef().selectionEnd;return{position:e,endPosition:i}},async updateEmojis(t){if(!t)return;const n=await this.emojisDB.getEmojiBySearchQuery(t);this.filteredEmojis=n.map(e=>e.unicode)},resetFooterList(t=null){t===":"?this.filteredEmojis=[]:t==="@"?this.filteredUsersTag=[]:t==="/"?this.filteredTemplatesText=[]:(this.filteredEmojis=[],this.filteredUsersTag=[],this.filteredTemplatesText=[])},resetMessage(t=!1,n=!1){n||this.$emit("typing-message",null),this.selectedUsersTag=[],this.resetFooterList(),this.resetTextareaSize(),this.message="",this.editedMessage={},this.messageReply=null,this.files=[],this.emojiOpened=!1,this.preventKeyboardFromClosing(),(this.textareaAutoFocus||!n)&&setTimeout(()=>this.focusTextarea(t))},resetTextareaSize(){this.getTextareaRef()&&(this.getTextareaRef().style.height="20px")},preventKeyboardFromClosing(){this.keepKeyboardOpen&&this.getTextareaRef().focus()},initRecorder(){return this.isRecording=!1,new Y$e({bitRate:Number(this.audioBitRate),sampleRate:Number(this.audioSampleRate),beforeRecording:null,afterRecording:null,pauseRecording:null,micFailed:this.micFailed})},micFailed(){this.isRecording=!1,this.recorder=this.initRecorder()}}},ize={key:0,class:"vac-icon-textarea-left"},sze=gt("div",{class:"vac-dot-audio-record"},null,-1),rze={class:"vac-dot-audio-record-time"},oze=["placeholder"],aze={class:"vac-icon-textarea"},lze={key:1},cze=["multiple","accept","capture"];function uze(t,n,e,i,s,r){const o=tn("room-emojis"),a=tn("room-users-tag"),l=tn("room-templates-text"),c=tn("room-message-reply"),u=tn("room-files"),d=tn("svg-icon"),f=tn("emoji-picker-container"),p=yy("click-outside");return Sc((Ve(),Qe("div",{id:"room-footer",class:Pn(["vac-room-footer",{"vac-app-box-shadow":r.shadowFooter}])},[It(o,{"filtered-emojis":s.filteredEmojis,"select-item":s.selectEmojiItem,"active-up-or-down":s.activeUpOrDownEmojis,onSelectEmoji:n[0]||(n[0]=m=>r.selectEmoji(m)),onActivateItem:n[1]||(n[1]=m=>s.activeUpOrDownEmojis=0)},null,8,["filtered-emojis","select-item","active-up-or-down"]),It(a,{"filtered-users-tag":s.filteredUsersTag,"select-item":s.selectUsersTagItem,"active-up-or-down":s.activeUpOrDownUsersTag,onSelectUserTag:n[2]||(n[2]=m=>r.selectUserTag(m)),onActivateItem:n[3]||(n[3]=m=>s.activeUpOrDownUsersTag=0)},null,8,["filtered-users-tag","select-item","active-up-or-down"]),It(l,{"filtered-templates-text":s.filteredTemplatesText,"select-item":s.selectTemplatesTextItem,"active-up-or-down":s.activeUpOrDownTemplatesText,onSelectTemplateText:n[4]||(n[4]=m=>r.selectTemplateText(m)),onActivateItem:n[5]||(n[5]=m=>s.activeUpOrDownTemplatesText=0)},null,8,["filtered-templates-text","select-item","active-up-or-down"]),It(c,{room:e.room,"message-reply":s.messageReply,"text-formatting":e.textFormatting,"link-options":e.linkOptions,onResetMessage:r.resetMessage},ki({_:2},[Tn(t.$slots,(m,v)=>({name:v,fn:rn(y=>[xt(t.$slots,v,Ci(vi(y)))])}))]),1032,["room","message-reply","text-formatting","link-options","onResetMessage"]),It(u,{files:s.files,onRemoveFile:r.removeFile,onResetMessage:r.resetMessage},ki({_:2},[Tn(t.$slots,(m,v)=>({name:v,fn:rn(y=>[xt(t.$slots,v,Ci(vi(y)))])}))]),1032,["files","onRemoveFile","onResetMessage"]),gt("div",{class:Pn(["vac-box-footer",{"vac-box-footer-border":!s.files.length}])},[e.showAudio&&!s.files.length?(Ve(),Qe("div",ize,[s.isRecording?(Ve(),Qe(Yn,{key:0},[gt("div",{class:"vac-svg-button vac-icon-audio-stop",onClick:n[6]||(n[6]=(...m)=>r.stopRecorder&&r.stopRecorder(...m))},[xt(t.$slots,"audio-stop-icon",{},()=>[It(d,{name:"close-outline"})])]),sze,gt("div",rze,fn(r.recordedTime),1),gt("div",{class:"vac-svg-button vac-icon-audio-confirm",onClick:n[7]||(n[7]=m=>r.toggleRecorder(!1))},[xt(t.$slots,"audio-check-icon",{},()=>[It(d,{name:"checkmark"})])])],64)):(Ve(),Qe("div",{key:1,class:"vac-svg-button",onClick:n[8]||(n[8]=m=>r.toggleRecorder(!0))},[xt(t.$slots,"microphone-icon",{},()=>[It(d,{name:"microphone",class:"vac-icon-microphone"})])]))])):Tt("",!0),gt("textarea",{id:"roomTextarea",ref:"roomTextarea",placeholder:e.textMessages.TYPE_MESSAGE,class:Pn(["vac-textarea",{"vac-textarea-outline":s.editedMessage._id}]),style:{"min-height":"20px","padding-left":"12px"},onInput:n[9]||(n[9]=(...m)=>r.onChangeInput&&r.onChangeInput(...m)),onKeydown:[n[10]||(n[10]=Nd((...m)=>r.escapeTextarea&&r.escapeTextarea(...m),["esc"])),n[11]||(n[11]=Nd(bl((...m)=>r.selectItem&&r.selectItem(...m),["exact","prevent"]),["enter"])),n[13]||(n[13]=Nd(bl(()=>{},["exact","prevent"]),["tab"])),n[14]||(n[14]=Nd((...m)=>r.selectItem&&r.selectItem(...m),["tab"])),n[15]||(n[15]=Nd(m=>r.updateActiveUpOrDown(m,-1),["up"])),n[16]||(n[16]=Nd(m=>r.updateActiveUpOrDown(m,1),["down"]))],onPaste:n[12]||(n[12]=(...m)=>r.onPasteImage&&r.onPasteImage(...m))},null,42,oze),gt("div",aze,[s.editedMessage._id?(Ve(),Qe("div",{key:0,class:"vac-svg-button",onClick:n[17]||(n[17]=(...m)=>r.resetMessage&&r.resetMessage(...m))},[xt(t.$slots,"edit-close-icon",{},()=>[It(d,{name:"close-outline"})])])):Tt("",!0),e.showEmojis?Sc((Ve(),Qe("div",lze,[xt(t.$slots,"emoji-picker",XS({emojiOpened:s.emojiOpened},{addEmoji:r.addEmoji}),()=>[It(f,{"emoji-opened":s.emojiOpened,"position-top":!0,"emoji-data-source":e.emojiDataSource,onAddEmoji:r.addEmoji,onOpenEmoji:n[18]||(n[18]=m=>s.emojiOpened=m)},{"emoji-picker-icon":rn(()=>[xt(t.$slots,"emoji-picker-icon")]),_:3},8,["emoji-opened","emoji-data-source","onAddEmoji"])])])),[[p,()=>s.emojiOpened=!1]]):Tt("",!0),e.showFiles?(Ve(),Qe("div",{key:2,class:"vac-svg-button",onClick:n[19]||(n[19]=(...m)=>r.launchFilePicker&&r.launchFilePicker(...m))},[xt(t.$slots,"paperclip-icon",{},()=>[It(d,{name:"paperclip"})])])):Tt("",!0),e.textareaActionEnabled?(Ve(),Qe("div",{key:3,class:"vac-svg-button",onClick:n[20]||(n[20]=(...m)=>r.textareaActionHandler&&r.textareaActionHandler(...m))},[xt(t.$slots,"custom-action-icon",{},()=>[It(d,{name:"deleted"})])])):Tt("",!0),e.showFiles?(Ve(),Qe("input",{key:4,ref:"file",type:"file",multiple:e.multipleFiles?!0:null,accept:e.acceptedFiles,capture:e.captureFiles,style:{display:"none"},onChange:n[21]||(n[21]=m=>r.onFileChange(m.target.files))},null,40,cze)):Tt("",!0),e.showSendIcon?(Ve(),Qe("div",{key:5,class:Pn(["vac-svg-button",{"vac-send-disabled":r.isMessageEmpty}]),onClick:n[22]||(n[22]=(...m)=>r.sendMessage&&r.sendMessage(...m))},[xt(t.$slots,"send-icon",{},()=>[It(d,{name:"send",param:r.isMessageEmpty||r.isFileLoading?"disabled":""},null,8,["param"])])],2)):Tt("",!0)])],2)],2)),[[Ey,Object.keys(e.room).length&&e.showFooter]])}var dze=Ni(nze,[["render",uze]]);const hze={name:"MessageReply",components:{AudioPlayer:hT,SvgIcon:Qs,FormatMessage:s0},props:{message:{type:Object,required:!0},textFormatting:{type:Object,required:!0},linkOptions:{type:Object,required:!0},roomUsers:{type:Array,required:!0}},computed:{replyUsername(){const{senderId:t}=this.message.replyMessage,n=this.roomUsers.find(e=>e._id===t);return n?n.username:""},firstFile(){var t,n;return(n=(t=this.message.replyMessage)==null?void 0:t.files)!=null&&n.length?this.message.replyMessage.files[0]:{}},isAudio(){return Ay(this.firstFile)},isImage(){return vm(this.firstFile)},isVideo(){return r0(this.firstFile)},isOtherFile(){var t;return((t=this.message.replyMessage.files)==null?void 0:t.length)&&!this.isAudio&&!this.isVideo&&!this.isImage}}},fze={class:"vac-reply-message"},mze={class:"vac-reply-username"},pze={key:0,class:"vac-image-reply-container"},gze={key:1,class:"vac-video-reply-container"},vze={controls:""},bze=["src"],_ze={key:3,class:"vac-file-container"},wze={class:"vac-text-ellipsis"},yze={key:0,class:"vac-text-ellipsis vac-text-extension"},Cze={class:"vac-reply-content"};function kze(t,n,e,i,s,r){const o=tn("audio-player"),a=tn("svg-icon"),l=tn("format-message");return Ve(),Qe("div",fze,[gt("div",mze,fn(r.replyUsername),1),r.isImage?(Ve(),Qe("div",pze,[gt("div",{class:"vac-message-image vac-message-image-reply",style:Wi({"background-image":`url('${r.firstFile.url}')`})},null,4)])):r.isVideo?(Ve(),Qe("div",gze,[gt("video",vze,[gt("source",{src:r.firstFile.url},null,8,bze)])])):r.isAudio?(Ve(),mi(o,{key:2,src:r.firstFile.url,"message-selection-enabled":!1,onUpdateProgressTime:n[0]||(n[0]=c=>t.progressTime=c),onHoverAudioProgress:n[1]||(n[1]=c=>t.hoverAudioProgress=c)},ki({_:2},[Tn(t.$slots,(c,u)=>({name:u,fn:rn(d=>[xt(t.$slots,u,Ci(vi(d)))])}))]),1032,["src"])):r.isOtherFile?(Ve(),Qe("div",_ze,[gt("div",null,[xt(t.$slots,"file-icon",{},()=>[It(a,{name:"file"})])]),gt("div",wze,fn(r.firstFile.name),1),r.firstFile.extension?(Ve(),Qe("div",yze,fn(r.firstFile.extension),1)):Tt("",!0)])):Tt("",!0),gt("div",Cze,[It(l,{"message-id":e.message.replyMessage._id,content:e.message.replyMessage.content,users:e.roomUsers,"text-formatting":e.textFormatting,"link-options":e.linkOptions,reply:!0},null,8,["message-id","content","users","text-formatting","link-options"])])])}var Eze=Ni(hze,[["render",kze]]);const Sze={name:"ProgressBar",props:{progress:{type:Number,default:0}},data(){return{radius:35,stroke:4,normalizedRadius:27,circumference:54*Math.PI}},computed:{strokeDashoffset(){return this.circumference-this.progress/100*this.circumference}}},Tze={ref:"progress",class:"vac-progress-wrapper"},xze=["height","width"],Aze=["stroke-dasharray","stroke-width","r","cx","cy"],Ize={class:"vac-progress-text"},Rze=gt("span",{class:"vac-progress-pourcent"},"%",-1);function Mze(t,n,e,i,s,r){return Ve(),mi(vs,{name:"vac-fade-spinner",appear:""},{default:rn(()=>[gt("div",Tze,[(Ve(),Qe("svg",{height:s.radius*2,width:s.radius*2},[gt("circle",{stroke:"rgba(255, 255, 255, 0.7)","stroke-dasharray":s.circumference+" "+s.circumference,style:Wi({strokeDashoffset:r.strokeDashoffset,strokeLinecap:"round"}),"stroke-width":s.stroke,fill:"transparent",r:s.normalizedRadius,cx:s.radius,cy:s.radius},null,12,Aze)],8,xze)),gt("div",{class:"vac-progress-content",style:Wi({height:s.radius*2-19+"px",width:s.radius*2-19+"px"})},[gt("div",Ize,[Tc(fn(e.progress),1),Rze])],4)],512)]),_:1})}var VW=Ni(Sze,[["render",Mze]]);const Pze={name:"MessageFile",components:{SvgIcon:Qs,Loader:Sy,ProgressBar:VW},props:{currentUserId:{type:[String,Number],required:!0},message:{type:Object,required:!0},file:{type:Object,required:!0},index:{type:Number,required:!0},messageSelectionEnabled:{type:Boolean,required:!0}},emits:["open-file"],data(){return{imageResponsive:"",imageLoading:!1,imageHover:!1}},computed:{isImageLoading(){return this.file.url.indexOf("blob:http")!==-1||this.imageLoading},isImage(){return vm(this.file)},isVideo(){return r0(this.file)}},watch:{file:{immediate:!0,handler(){this.checkImgLoad()}}},mounted(){const t=this.$refs["imageRef"+this.index];t&&(this.imageResponsive={maxHeight:t.clientWidth-18,loaderTop:t.clientHeight/2-9})},methods:{checkImgLoad(){if(!vm(this.file))return;this.imageLoading=!0;const t=new Image;t.src=this.file.url,t.addEventListener("load",()=>this.imageLoading=!1)},openFile(t,n){this.messageSelectionEnabled||(t.stopPropagation(),this.$emit("open-file",{file:this.file,action:n}))}}},Oze={class:"vac-message-file-container"},Lze={key:0,class:"vac-image-buttons"},Bze={controls:""},Fze=["src"];function Nze(t,n,e,i,s,r){const o=tn("progress-bar"),a=tn("loader"),l=tn("svg-icon");return Ve(),Qe("div",Oze,[r.isImage?(Ve(),Qe("div",{key:0,ref:"imageRef"+e.index,class:"vac-message-image-container",onMouseover:n[2]||(n[2]=c=>s.imageHover=!0),onMouseleave:n[3]||(n[3]=c=>s.imageHover=!1),onClick:n[4]||(n[4]=c=>r.openFile(c,"preview"))},[e.file.progress>=0?(Ve(),mi(o,{key:0,progress:e.file.progress,style:Wi({top:`${s.imageResponsive.loaderTop}px`})},null,8,["progress","style"])):(Ve(),mi(a,{key:1,show:r.isImageLoading,type:"message-file","message-id":e.message._id,style:Wi({top:`${s.imageResponsive.loaderTop}px`})},ki({_:2},[Tn(t.$slots,(c,u)=>({name:u,fn:rn(d=>[xt(t.$slots,u,Ci(vi(d)))])}))]),1032,["show","message-id","style"])),gt("div",{class:Pn(["vac-message-image",{"vac-blur-loading":r.isImageLoading&&e.message.senderId===e.currentUserId}]),style:Wi({"background-image":`url('${r.isImageLoading&&e.file.preview||e.file.url}')`,"max-height":`${s.imageResponsive.maxHeight}px`})},[It(vs,{name:"vac-fade-image"},{default:rn(()=>[!e.messageSelectionEnabled&&s.imageHover&&!r.isImageLoading?(Ve(),Qe("div",Lze,[gt("div",{class:"vac-svg-button vac-button-view",onClick:n[0]||(n[0]=c=>r.openFile(c,"preview"))},[xt(t.$slots,"eye-icon_"+e.message._id,{},()=>[It(l,{name:"eye"})])]),gt("div",{class:"vac-svg-button vac-button-download",onClick:n[1]||(n[1]=c=>r.openFile(c,"download"))},[xt(t.$slots,"document-icon_"+e.message._id,{},()=>[It(l,{name:"document"})])])])):Tt("",!0)]),_:3})],6)],544)):r.isVideo?(Ve(),Qe("div",{key:1,class:"vac-video-container",onClick:n[5]||(n[5]=bl(c=>r.openFile(c,"preview"),["prevent"]))},[e.file.progress>=0?(Ve(),mi(o,{key:0,progress:e.file.progress},null,8,["progress"])):Tt("",!0),gt("video",Bze,[gt("source",{src:e.file.url},null,8,Fze)])])):Tt("",!0)])}var Vze=Ni(Pze,[["render",Nze]]);const Dze={name:"MessageFiles",components:{SvgIcon:Qs,FormatMessage:s0,ProgressBar:VW,MessageFile:Vze},props:{currentUserId:{type:[String,Number],required:!0},message:{type:Object,required:!0},roomUsers:{type:Array,required:!0},textFormatting:{type:Object,required:!0},linkOptions:{type:Object,required:!0},messageSelectionEnabled:{type:Boolean,required:!0}},emits:["open-file","open-user-tag"],computed:{imageVideoFiles(){return this.message.files.filter(t=>fP(t))},otherFiles(){return this.message.files.filter(t=>!fP(t))}},methods:{openFile(t,n,e){this.messageSelectionEnabled||(t.stopPropagation(),this.$emit("open-file",{file:n,action:e}))}}},$ze={class:"vac-message-files-container"},zze=["onClick"],Hze={class:"vac-svg-button"},Uze={class:"vac-text-ellipsis"},Wze={key:0,class:"vac-text-ellipsis vac-text-extension"};function jze(t,n,e,i,s,r){const o=tn("message-file"),a=tn("progress-bar"),l=tn("svg-icon"),c=tn("format-message");return Ve(),Qe("div",$ze,[(Ve(!0),Qe(Yn,null,Tn(r.imageVideoFiles,(u,d)=>(Ve(),Qe("div",{key:d+"iv"},[It(o,{file:u,"current-user-id":e.currentUserId,message:e.message,index:d,"message-selection-enabled":e.messageSelectionEnabled,onOpenFile:n[0]||(n[0]=f=>t.$emit("open-file",f))},ki({_:2},[Tn(t.$slots,(f,p)=>({name:p,fn:rn(m=>[xt(t.$slots,p,Ci(vi(m)))])}))]),1032,["file","current-user-id","message","index","message-selection-enabled"])]))),128)),(Ve(!0),Qe(Yn,null,Tn(r.otherFiles,(u,d)=>(Ve(),Qe("div",{key:d+"a",class:"vac-file-wrapper"},[u.progress>=0?(Ve(),mi(a,{key:0,progress:u.progress,style:{top:"44px"}},null,8,["progress"])):Tt("",!0),gt("div",{class:Pn(["vac-file-container",{"vac-file-container-progress":u.progress>=0}]),onClick:f=>r.openFile(f,u,"download")},[gt("div",Hze,[xt(t.$slots,"document-icon",{},()=>[It(l,{name:"document"})])]),gt("div",Uze,fn(u.name),1),u.extension?(Ve(),Qe("div",Wze,fn(u.extension),1)):Tt("",!0)],10,zze)]))),128)),It(c,{"message-id":e.message._id,content:e.message.content,users:e.roomUsers,"text-formatting":e.textFormatting,"link-options":e.linkOptions,onOpenUserTag:n[1]||(n[1]=u=>t.$emit("open-user-tag",u))},null,8,["message-id","content","users","text-formatting","link-options"])])}var qze=Ni(Dze,[["render",jze]]);const Kze={name:"MessageActions",components:{SvgIcon:Qs,EmojiPickerContainer:xW},directives:{clickOutside:xy},props:{currentUserId:{type:[String,Number],required:!0},message:{type:Object,required:!0},messageActions:{type:Array,required:!0},showReactionEmojis:{type:Boolean,required:!0},messageHover:{type:Boolean,required:!0},hoverMessageId:{type:[String,Number],default:null},hoverAudioProgress:{type:Boolean,required:!0},emojiDataSource:{type:String,default:void 0}},emits:["update-emoji-opened","update-options-opened","update-message-hover","message-action-handler","send-message-reaction"],data(){return{menuOptionsTop:0,optionsOpened:!1,optionsClosing:!1,emojiOpened:!1}},computed:{isMessageActions(){return this.filteredMessageActions.length&&this.messageHover&&!this.message.deleted&&!this.message.disableActions&&!this.hoverAudioProgress},isMessageReactions(){return this.showReactionEmojis&&this.messageHover&&!this.message.deleted&&!this.message.disableReactions&&!this.hoverAudioProgress},filteredMessageActions(){return this.message.senderId===this.currentUserId?this.messageActions:this.messageActions.filter(t=>!t.onlyMe)}},watch:{emojiOpened(t){this.$emit("update-emoji-opened",t),t&&(this.optionsOpened=!1)},optionsOpened(t){this.$emit("update-options-opened",t)}},methods:{openOptions(){this.optionsClosing||(this.optionsOpened=!this.optionsOpened,this.optionsOpened&&setTimeout(()=>{const t=TW(this.$el,"#room-footer");if(!t||!this.$refs.menuOptions||!this.$refs.actionIcon)return;const n=this.$refs.menuOptions.getBoundingClientRect().height,e=this.$refs.actionIcon.getBoundingClientRect().top;t.getBoundingClientRect().top-e>n+50?this.menuOptionsTop=30:this.menuOptionsTop=-n}))},closeOptions(){this.optionsOpened=!1,this.optionsClosing=!0,this.updateMessageHover(),setTimeout(()=>this.optionsClosing=!1,100)},openEmoji(){this.emojiOpened=!this.emojiOpened},closeEmoji(){this.emojiOpened=!1,this.updateMessageHover()},updateMessageHover(){this.hoverMessageId!==this.message._id&&this.$emit("update-message-hover",!1)},messageActionHandler(t){this.closeOptions(),this.$emit("message-action-handler",t)},sendMessageReaction(t,n){this.$emit("send-message-reaction",{emoji:t,reaction:n}),this.closeEmoji()}}},Gze={class:"vac-message-actions-wrapper"},Yze={key:"3"},Zze={class:"vac-menu-list"},Xze=["onClick"];function Jze(t,n,e,i,s,r){const o=tn("svg-icon"),a=tn("emoji-picker-container"),l=yy("click-outside");return Ve(),Qe("div",Gze,[gt("div",{class:"vac-options-container",style:Wi({display:e.hoverAudioProgress?"none":"initial",width:r.filteredMessageActions.length&&e.showReactionEmojis?"70px":"45px"})},[It(eT,{name:"vac-slide-left",tag:"span"},{default:rn(()=>[r.isMessageActions||r.isMessageReactions?(Ve(),Qe("div",{key:"1",class:Pn(["vac-blur-container",{"vac-options-me":e.message.senderId===e.currentUserId}])},null,2)):Tt("",!0),r.isMessageActions?(Ve(),Qe("div",{ref:"actionIcon",key:"2",class:"vac-svg-button vac-message-options",onClick:n[0]||(n[0]=(...c)=>r.openOptions&&r.openOptions(...c))},[xt(t.$slots,"dropdown-icon_"+e.message._id,{},()=>[It(o,{name:"dropdown",param:"message"})])],512)):Tt("",!0),r.isMessageReactions?Sc((Ve(),Qe("div",Yze,[xt(t.$slots,"emoji-picker",XS({emojiOpened:s.emojiOpened},{addEmoji:r.sendMessageReaction}),()=>[It(a,{class:"vac-message-emojis",style:Wi({right:r.isMessageActions?"30px":"5px"}),"emoji-opened":s.emojiOpened,"emoji-reaction":!0,"position-right":e.message.senderId===e.currentUserId,"message-id":e.message._id,"emoji-data-source":e.emojiDataSource,onAddEmoji:r.sendMessageReaction,onOpenEmoji:r.openEmoji},ki({_:2},[Tn(t.$slots,(c,u)=>({name:u,fn:rn(d=>[xt(t.$slots,u,Ci(vi(d)))])}))]),1032,["style","emoji-opened","position-right","message-id","emoji-data-source","onAddEmoji","onOpenEmoji"])])])),[[l,r.closeEmoji]]):Tt("",!0)]),_:3})],4),r.filteredMessageActions.length?(Ve(),mi(vs,{key:0,name:e.message.senderId===e.currentUserId?"vac-slide-left":"vac-slide-right"},{default:rn(()=>[s.optionsOpened?Sc((Ve(),Qe("div",{key:0,ref:"menuOptions",class:Pn(["vac-menu-options",{"vac-menu-left":e.message.senderId!==e.currentUserId}]),style:Wi({top:`${s.menuOptionsTop}px`})},[gt("div",Zze,[(Ve(!0),Qe(Yn,null,Tn(r.filteredMessageActions,c=>(Ve(),Qe("div",{key:c.name},[gt("div",{class:"vac-menu-item",onClick:u=>r.messageActionHandler(c)},fn(c.title),9,Xze)]))),128))])],6)),[[l,r.closeOptions]]):Tt("",!0)]),_:1},8,["name"])):Tt("",!0)])}var Qze=Ni(Kze,[["render",Jze]]);const eHe={name:"MessageReactions",props:{currentUserId:{type:[String,Number],required:!0},message:{type:Object,required:!0}},emits:["send-message-reaction"],methods:{sendMessageReaction(t,n){this.$emit("send-message-reaction",{emoji:t,reaction:n})}}},tHe=["onClick"];function nHe(t,n,e,i,s,r){return e.message.deleted?Tt("",!0):(Ve(),mi(eT,{key:0,name:"vac-slide-left",tag:"span"},{default:rn(()=>[(Ve(!0),Qe(Yn,null,Tn(e.message.reactions,(o,a)=>Sc((Ve(),Qe("button",{key:a+0,class:Pn(["vac-button-reaction",{"vac-reaction-me":o.indexOf(e.currentUserId)!==-1}]),style:Wi({float:e.message.senderId===e.currentUserId?"right":"left"}),onClick:l=>r.sendMessageReaction({unicode:a},o)},[Tc(fn(a),1),gt("span",null,fn(o.length),1)],14,tHe)),[[Ey,o.length]])),128))]),_:1}))}var iHe=Ni(eHe,[["render",nHe]]);function sHe(t){if(!((i,s)=>s.every(r=>{let o=!1;return(r.type[0]==="array"&&Array.isArray(i[r.key])||r.type.find(a=>a===typeof i[r.key]))&&(o=!0),o&&mT(i,r.key)}))(t,[{key:"roomId",type:["string","number"]},{key:"roomName",type:["string"]},{key:"users",type:["array"]}]))throw new Error("Rooms object is not valid! Must contain at least roomId[String, Number], roomName[String] and users[Array]")}function rHe(t){if(!((i,s)=>s.every(r=>r.type.find(a=>a===typeof i[r.key])&&mT(i,r.key)))(t,[{key:"_id",type:["string","number"]},{key:"username",type:["string"]}]))throw new Error("Participants object is not valid! Must contain at least _id[String, Number] and username[String]")}function oHe(t){if(!((i,s)=>s.every(r=>r.type.find(a=>a===typeof i[r.key])&&mT(i,r.key)))(t,[{key:"_id",type:["string","number"]},{key:"senderId",type:["string","number"]}]))throw new Error("Messages object is not valid! Must contain at least _id[String, Number] and senderId[String, Number]")}function mT(t,n){return Object.prototype.hasOwnProperty.call(t,n)&&t[n]!==null&&t[n]!==void 0}const aHe={name:"RoomMessage",components:{SvgIcon:Qs,FormatMessage:s0,AudioPlayer:hT,MessageReply:Eze,MessageFiles:qze,MessageActions:Qze,MessageReactions:iHe},props:{currentUserId:{type:[String,Number],required:!0},textMessages:{type:Object,required:!0},index:{type:Number,required:!0},message:{type:Object,required:!0},messages:{type:Array,required:!0},editedMessageId:{type:[String,Number],default:null},roomUsers:{type:Array,default:()=>[]},messageActions:{type:Array,required:!0},newMessages:{type:Array,default:()=>[]},showReactionEmojis:{type:Boolean,required:!0},showNewMessagesDivider:{type:Boolean,required:!0},textFormatting:{type:Object,required:!0},linkOptions:{type:Object,required:!0},usernameOptions:{type:Object,required:!0},messageSelectionEnabled:{type:Boolean,required:!0},selectedMessages:{type:Array,default:()=>[]},emojiDataSource:{type:String,default:void 0}},emits:["message-added","open-file","open-user-tag","open-failed-message","message-action-handler","send-message-reaction","select-message","unselect-message"],data(){return{hoverMessageId:null,messageHover:!1,optionsOpened:!1,emojiOpened:!1,newMessage:{},progressTime:"- : -",hoverAudioProgress:!1}},computed:{showUsername(){return!this.usernameOptions.currentUser&&this.message.senderId===this.currentUserId?!1:this.roomUsers.length>=this.usernameOptions.minUsers},showDate(){return this.index>0&&this.message.date!==this.messages[this.index-1].date},messageOffset(){return this.index>0&&this.message.senderId!==this.messages[this.index-1].senderId},isMessageHover(){return this.editedMessageId===this.message._id||this.hoverMessageId===this.message._id},isAudio(){var t;return(t=this.message.files)==null?void 0:t.some(n=>Ay(n))},isCheckmarkVisible(){return this.message.senderId===this.currentUserId&&!this.message.deleted&&(this.message.saved||this.message.distributed||this.message.seen)},hasCurrentUserAvatar(){return this.messages.some(t=>t.senderId===this.currentUserId&&t.avatar)},hasSenderUserAvatar(){return this.messages.some(t=>t.senderId!==this.currentUserId&&t.avatar)},isMessageSelected(){return this.messageSelectionEnabled&&!!this.selectedMessages.find(t=>t._id===this.message._id)}},watch:{newMessages:{immediate:!0,deep:!0,handler(t){if(!t.length||!this.showNewMessagesDivider){this.newMessage={};return}this.newMessage=t.reduce((n,e)=>e.index<n.index?e:n)}},messageSelectionEnabled(){this.resetMessageHover()}},mounted(){oHe(this.message),this.$emit("message-added",{message:this.message,index:this.index,ref:this.$refs.message})},methods:{onHoverMessage(){this.messageSelectionEnabled||(this.messageHover=!0,this.canEditMessage()&&(this.hoverMessageId=this.message._id))},canEditMessage(){return!this.message.deleted},onLeaveMessage(){this.messageSelectionEnabled||(!this.optionsOpened&&!this.emojiOpened&&(this.messageHover=!1),this.hoverMessageId=null)},resetMessageHover(){this.messageHover=!1,this.hoverMessageId=null},openFile(t){this.$emit("open-file",{message:this.message,file:t})},openUserTag(t){this.$emit("open-user-tag",{user:t})},messageActionHandler(t){this.resetMessageHover(),setTimeout(()=>{this.$emit("message-action-handler",{action:t,message:this.message})},300)},sendMessageReaction({emoji:t,reaction:n}){this.$emit("send-message-reaction",{messageId:this.message._id,reaction:t,remove:n&&n.indexOf(this.currentUserId)!==-1}),this.messageHover=!1},selectMessage(){this.messageSelectionEnabled&&(this.isMessageSelected?this.$emit("unselect-message",this.message._id):this.$emit("select-message",this.message))}}},lHe=["id"],cHe={key:0,class:"vac-card-info vac-card-date"},uHe={key:1,class:"vac-line-new"},dHe={key:2,class:"vac-card-info vac-card-system"},hHe={key:1,class:"vac-avatar-offset"},fHe={key:0,class:"vac-progress-time"},mHe={class:"vac-text-timestamp"},pHe={key:0,class:"vac-icon-edited"},gHe={key:1},vHe=gt("div",{class:"vac-failure-text"},"!",-1),bHe=[vHe],_He={key:3,class:"vac-avatar-current-offset"};function wHe(t,n,e,i,s,r){const o=tn("format-message"),a=tn("message-reply"),l=tn("message-files"),c=tn("audio-player"),u=tn("svg-icon"),d=tn("message-actions"),f=tn("message-reactions");return Ve(),Qe("div",{id:e.message._id,ref:"message",class:"vac-message-wrapper"},[r.showDate?(Ve(),Qe("div",cHe,fn(e.message.date),1)):Tt("",!0),s.newMessage._id===e.message._id?(Ve(),Qe("div",uHe,fn(e.textMessages.NEW_MESSAGES),1)):Tt("",!0),e.message.system?(Ve(),Qe("div",dHe,[xt(t.$slots,"message_"+e.message._id,{},()=>[It(o,{"message-id":e.message._id,content:e.message.content,deleted:!!e.message.deleted,users:e.roomUsers,"text-messages":e.textMessages,"text-formatting":e.textFormatting,"link-options":e.linkOptions,onOpenUserTag:r.openUserTag},ki({_:2},[Tn(t.$slots,(p,m)=>({name:m,fn:rn(v=>[xt(t.$slots,m,Ci(vi(v)))])}))]),1032,["message-id","content","deleted","users","text-messages","text-formatting","link-options","onOpenUserTag"])])])):(Ve(),Qe("div",{key:3,class:Pn(["vac-message-box",{"vac-offset-current":e.message.senderId===e.currentUserId}]),onClick:n[8]||(n[8]=(...p)=>r.selectMessage&&r.selectMessage(...p))},[xt(t.$slots,"message_"+e.message._id,{},()=>[e.message.senderId!==e.currentUserId?xt(t.$slots,"message-avatar_"+e.message._id,{key:0},()=>[e.message.avatar?(Ve(),Qe("div",{key:0,class:"vac-avatar",style:Wi({"background-image":`url('${e.message.avatar}')`})},null,4)):Tt("",!0)]):Tt("",!0),r.hasSenderUserAvatar&&!e.message.avatar?(Ve(),Qe("div",hHe)):Tt("",!0),gt("div",{class:Pn(["vac-message-container",{"vac-message-container-offset":r.messageOffset}])},[gt("div",{class:Pn(["vac-message-card",{"vac-message-highlight":r.isMessageHover,"vac-message-current":e.message.senderId===e.currentUserId,"vac-message-deleted":e.message.deleted,"vac-item-clickable":e.messageSelectionEnabled,"vac-message-selected":r.isMessageSelected}]),onMouseover:n[5]||(n[5]=(...p)=>r.onHoverMessage&&r.onHoverMessage(...p)),onMouseleave:n[6]||(n[6]=(...p)=>r.onLeaveMessage&&r.onLeaveMessage(...p))},[r.showUsername?(Ve(),Qe("div",{key:0,class:Pn(["vac-text-username",{"vac-username-reply":!e.message.deleted&&e.message.replyMessage}])},[gt("span",null,fn(e.message.username),1)],2)):Tt("",!0),!e.message.deleted&&e.message.replyMessage?(Ve(),mi(a,{key:1,message:e.message,"room-users":e.roomUsers,"text-formatting":e.textFormatting,"link-options":e.linkOptions},ki({_:2},[Tn(t.$slots,(p,m)=>({name:m,fn:rn(v=>[xt(t.$slots,m,Ci(vi(v)))])}))]),1032,["message","room-users","text-formatting","link-options"])):Tt("",!0),e.message.deleted||!e.message.files||!e.message.files.length?(Ve(),mi(o,{key:2,"message-id":e.message._id,content:e.message.content,deleted:!!e.message.deleted,users:e.roomUsers,"text-formatting":e.textFormatting,"text-messages":e.textMessages,"link-options":e.linkOptions,onOpenUserTag:r.openUserTag},ki({_:2},[Tn(t.$slots,(p,m)=>({name:m,fn:rn(v=>[xt(t.$slots,m,Ci(vi(v)))])}))]),1032,["message-id","content","deleted","users","text-formatting","text-messages","link-options","onOpenUserTag"])):!r.isAudio||e.message.files.length>1?(Ve(),mi(l,{key:3,"current-user-id":e.currentUserId,message:e.message,"room-users":e.roomUsers,"text-formatting":e.textFormatting,"link-options":e.linkOptions,"message-selection-enabled":e.messageSelectionEnabled,onOpenFile:r.openFile,onOpenUserTag:r.openUserTag},ki({_:2},[Tn(t.$slots,(p,m)=>({name:m,fn:rn(v=>[xt(t.$slots,m,Ci(vi(v)))])}))]),1032,["current-user-id","message","room-users","text-formatting","link-options","message-selection-enabled","onOpenFile","onOpenUserTag"])):(Ve(),Qe(Yn,{key:4},[It(c,{"message-id":e.message._id,src:e.message.files[0].url,"message-selection-enabled":e.messageSelectionEnabled,onUpdateProgressTime:n[0]||(n[0]=p=>s.progressTime=p),onHoverAudioProgress:n[1]||(n[1]=p=>s.hoverAudioProgress=p)},ki({_:2},[Tn(t.$slots,(p,m)=>({name:m,fn:rn(v=>[xt(t.$slots,m,Ci(vi(v)))])}))]),1032,["message-id","src","message-selection-enabled"]),e.message.deleted?Tt("",!0):(Ve(),Qe("div",fHe,fn(s.progressTime),1))],64)),gt("div",mHe,[e.message.edited&&!e.message.deleted?(Ve(),Qe("div",pHe,[xt(t.$slots,"pencil-icon_"+e.message._id,{},()=>[It(u,{name:"pencil"})])])):Tt("",!0),gt("span",null,fn(e.message.timestamp),1),r.isCheckmarkVisible?(Ve(),Qe("span",gHe,[xt(t.$slots,"checkmark-icon_"+e.message._id,{},()=>[It(u,{name:e.message.distributed?"double-checkmark":"checkmark",param:e.message.seen?"seen":"",class:"vac-icon-check"},null,8,["name","param"])])])):Tt("",!0)]),It(d,{"current-user-id":e.currentUserId,message:e.message,"message-actions":e.messageActions,"show-reaction-emojis":e.showReactionEmojis,"message-hover":s.messageHover,"hover-message-id":s.hoverMessageId,"hover-audio-progress":s.hoverAudioProgress,"emoji-data-source":e.emojiDataSource,onUpdateMessageHover:n[2]||(n[2]=p=>s.messageHover=p),onUpdateOptionsOpened:n[3]||(n[3]=p=>s.optionsOpened=p),onUpdateEmojiOpened:n[4]||(n[4]=p=>s.emojiOpened=p),onMessageActionHandler:r.messageActionHandler,onSendMessageReaction:r.sendMessageReaction},ki({_:2},[Tn(t.$slots,(p,m)=>({name:m,fn:rn(v=>[xt(t.$slots,m,Ci(vi(v)))])}))]),1032,["current-user-id","message","message-actions","show-reaction-emojis","message-hover","hover-message-id","hover-audio-progress","emoji-data-source","onMessageActionHandler","onSendMessageReaction"])],34),It(f,{"current-user-id":e.currentUserId,message:e.message,onSendMessageReaction:r.sendMessageReaction},null,8,["current-user-id","message","onSendMessageReaction"])],2),xt(t.$slots,"message-failure_"+e.message._id,{},()=>[e.message.failure&&e.message.senderId===e.currentUserId?(Ve(),Qe("div",{key:0,class:Pn(["vac-failure-container vac-svg-button",{"vac-failure-container-avatar":e.message.avatar&&e.message.senderId===e.currentUserId}]),onClick:n[7]||(n[7]=p=>t.$emit("open-failed-message",{message:e.message}))},bHe,2)):Tt("",!0)]),e.message.senderId===e.currentUserId?xt(t.$slots,"message-avatar_"+e.message._id,{key:2},()=>[e.message.avatar?(Ve(),Qe("div",{key:0,class:"vac-avatar vac-avatar-current",style:Wi({"background-image":`url('${e.message.avatar}')`})},null,4)):Tt("",!0)]):Tt("",!0),r.hasCurrentUserAvatar&&!e.message.avatar?(Ve(),Qe("div",_He)):Tt("",!0)])],2))],8,lHe)}var yHe=Ni(aHe,[["render",wHe]]);const CHe={name:"ChatRoom",components:{Loader:Sy,SvgIcon:Qs,RoomHeader:mNe,RoomFooter:dze,RoomMessage:yHe},props:{currentUserId:{type:[String,Number],required:!0},textMessages:{type:Object,required:!0},singleRoom:{type:Boolean,required:!0},showRoomsList:{type:Boolean,required:!0},isMobile:{type:Boolean,required:!0},rooms:{type:Array,required:!0},roomId:{type:[String,Number],required:!0},loadFirstRoom:{type:Boolean,required:!0},messages:{type:Array,required:!0},roomMessage:{type:String,default:null},messagesLoaded:{type:Boolean,required:!0},menuActions:{type:Array,required:!0},messageActions:{type:Array,required:!0},messageSelectionActions:{type:Array,required:!0},autoScroll:{type:Object,required:!0},showSendIcon:{type:Boolean,required:!0},showFiles:{type:Boolean,required:!0},showAudio:{type:Boolean,required:!0},audioBitRate:{type:Number,required:!0},audioSampleRate:{type:Number,required:!0},showEmojis:{type:Boolean,required:!0},showReactionEmojis:{type:Boolean,required:!0},showNewMessagesDivider:{type:Boolean,required:!0},showFooter:{type:Boolean,required:!0},acceptedFiles:{type:String,required:!0},captureFiles:{type:String,required:!0},multipleFiles:{type:Boolean,default:!0},textFormatting:{type:Object,required:!0},linkOptions:{type:Object,required:!0},loadingRooms:{type:Boolean,required:!0},roomInfoEnabled:{type:Boolean,required:!0},textareaActionEnabled:{type:Boolean,required:!0},textareaAutoFocus:{type:Boolean,required:!0},userTagsEnabled:{type:Boolean,required:!0},emojisSuggestionEnabled:{type:Boolean,required:!0},scrollDistance:{type:Number,required:!0},templatesText:{type:Array,default:null},usernameOptions:{type:Object,required:!0},emojiDataSource:{type:String,default:void 0}},emits:["toggle-rooms-list","room-info","menu-action-handler","message-selection-action-handler","edit-message","send-message","delete-message","message-action-handler","fetch-messages","send-message-reaction","typing-message","open-file","open-user-tag","open-failed-message","textarea-action-handler"],data(){return{editedMessageId:null,initReplyMessage:null,initEditMessage:null,loadingMessages:!1,observer:null,showLoader:!0,loadingMoreMessages:!1,scrollIcon:!1,scrollMessagesCount:0,newMessages:[],messageSelectionEnabled:!1,selectedMessages:[],droppedFiles:[]}},computed:{room(){return this.rooms.find(t=>t.roomId===this.roomId)||{}},showNoMessages(){return this.roomId&&!this.messages.length&&!this.loadingMessages&&!this.loadingRooms},showNoRoom(){const t=!this.rooms.length&&!this.loadingRooms||!this.roomId&&!this.loadFirstRoom;return t&&this.updateLoadingMessages(!1),t},showMessagesStarted(){return this.messages.length&&this.messagesLoaded}},watch:{roomId:{immediate:!0,handler(){this.onRoomChanged()}},messages:{deep:!0,handler(t,n){t.forEach((e,i)=>{this.showNewMessagesDivider&&!e.seen&&e.senderId!==this.currentUserId&&this.newMessages.push({_id:e._id,index:i})}),(n==null?void 0:n.length)===(t==null?void 0:t.length)-1&&(this.newMessages=[]),setTimeout(()=>this.loadingMoreMessages=!1)}},messagesLoaded(t){t&&this.updateLoadingMessages(!1)}},mounted(){this.newMessages=[]},methods:{updateLoadingMessages(t){this.loadingMessages=t,t||setTimeout(()=>this.initIntersectionObserver())},initIntersectionObserver(){this.observer&&(this.showLoader=!0,this.observer.disconnect());const t=this.$el.querySelector("#infinite-loader-messages");if(t){const n={root:this.$el.querySelector("#messages-list"),rootMargin:`${this.scrollDistance}px`,threshold:0};this.observer=new IntersectionObserver(e=>{e[0].isIntersecting&&this.loadMoreMessages()},n),this.observer.observe(t)}},preventTopScroll(){const t=this.$refs.scrollContainer,n=t.scrollHeight,e=new ResizeObserver(s=>{t.scrollHeight!==n&&this.$refs.scrollContainer&&(this.$refs.scrollContainer.scrollTo({top:t.scrollHeight-n}),e.disconnect())});for(var i=0;i<t.children.length;i++)e.observe(t.children[i])},touchStart(t){if(!this.singleRoom&&t.changedTouches.length===1){const n=t.changedTouches[0].clientX,e=t.changedTouches[0].clientY;addEventListener("touchend",i=>this.touchEnd(i,n,e),{once:!0})}},touchEnd(t,n,e){if(t.changedTouches.length===1){const i=t.changedTouches[0].clientX,s=t.changedTouches[0].clientY,r=i-n>100,o=Math.abs(s-e)>50;r&&!o&&this.$emit("toggle-rooms-list")}},onRoomChanged(){this.updateLoadingMessages(!0),this.scrollIcon=!1,this.scrollMessagesCount=0,this.resetMessageSelection();const t=this.$watch(()=>this.messages,n=>{if(!n||!n.length)return;const e=this.$refs.scrollContainer;e&&(t(),setTimeout(()=>{e.scrollTo({top:e.scrollHeight}),this.updateLoadingMessages(!1)}))})},resetMessageSelection(){this.messageSelectionEnabled=!1,this.selectedMessages=[]},selectMessage(t){this.selectedMessages.push(t)},unselectMessage(t){this.selectedMessages=this.selectedMessages.filter(n=>n._id!==t)},onMessageAdded({message:t,index:n,ref:e}){if(n!==this.messages.length-1)return;const i=e.offsetHeight+60;setTimeout(()=>{const s=this.$refs.scrollContainer;let r=!1;s&&(r=this.getBottomScroll(s)>i),t.senderId===this.currentUserId?r?this.autoScroll.send.newAfterScrollUp&&this.scrollToBottom():this.autoScroll.send.new&&this.scrollToBottom():r?this.autoScroll.receive.newAfterScrollUp?this.scrollToBottom():(this.scrollIcon=!0,this.scrollMessagesCount++):this.autoScroll.receive.new?this.scrollToBottom():(this.scrollIcon=!0,this.scrollMessagesCount++)})},onContainerScroll(t){if(!t.target)return;const n=this.getBottomScroll(t.target);n<60&&(this.scrollMessagesCount=0),this.scrollIcon=n>500||this.scrollMessagesCount},loadMoreMessages(){this.loadingMessages||setTimeout(()=>{if(!this.loadingMoreMessages){if(this.messagesLoaded||!this.roomId){this.loadingMoreMessages=!1,this.showLoader=!1;return}this.preventTopScroll(),this.$emit("fetch-messages"),this.loadingMoreMessages=!0}},500)},messageActionHandler({action:t,message:n}){switch(t.name){case"replyMessage":this.initReplyMessage=n,setTimeout(()=>{this.initReplyMessage=null});return;case"editMessage":this.initEditMessage=n,setTimeout(()=>{this.initEditMessage=null});return;case"deleteMessage":return this.$emit("delete-message",n);case"selectMessages":this.selectedMessages=[n],this.messageSelectionEnabled=!0;return;default:return this.$emit("message-action-handler",{action:t,message:n})}},messageSelectionActionHandler(t){this.$emit("message-selection-action-handler",{action:t,messages:this.selectedMessages}),this.resetMessageSelection()},sendMessageReaction(t){this.$emit("send-message-reaction",t)},getBottomScroll(t){const{scrollHeight:n,clientHeight:e,scrollTop:i}=t;return n-e-i},scrollToBottom(){setTimeout(()=>{const t=this.$refs.scrollContainer;t&&(t.classList.add("vac-scroll-smooth"),t.scrollTo({top:t.scrollHeight,behavior:"smooth"}),setTimeout(()=>t.classList.remove("vac-scroll-smooth")))},50)},openFile({message:t,file:n}){this.$emit("open-file",{message:t,file:n})},openUserTag(t){this.$emit("open-user-tag",t)},onDropFiles(t){this.showFiles&&(this.droppedFiles=t.dataTransfer.files)}}},kHe={class:"vac-container-center vac-room-empty"},EHe={class:"vac-messages-container"},SHe={key:0,class:"vac-text-started"},THe={key:1,class:"vac-text-started"},xHe={key:0,id:"infinite-loader-messages"},AHe={key:2},IHe={key:0,class:"vac-badge-counter vac-messages-count"};function RHe(t,n,e,i,s,r){const o=tn("room-header"),a=tn("loader"),l=tn("room-message"),c=tn("svg-icon"),u=tn("room-footer");return Sc((Ve(),Qe("div",{class:"vac-col-messages",onDrop:n[12]||(n[12]=bl((...d)=>r.onDropFiles&&r.onDropFiles(...d),["prevent"])),onDragenter:n[13]||(n[13]=bl(()=>{},["prevent"])),onDragover:n[14]||(n[14]=bl(()=>{},["prevent"])),onDragleave:n[15]||(n[15]=bl(()=>{},["prevent"])),onTouchstart:n[16]||(n[16]=(...d)=>r.touchStart&&r.touchStart(...d))},[r.showNoRoom?xt(t.$slots,"no-room-selected",{key:0},()=>[gt("div",kHe,[gt("div",null,fn(e.textMessages.ROOM_EMPTY),1)])]):(Ve(),mi(o,{key:1,"current-user-id":e.currentUserId,"text-messages":e.textMessages,"single-room":e.singleRoom,"show-rooms-list":e.showRoomsList,"is-mobile":e.isMobile,"room-info-enabled":e.roomInfoEnabled,"menu-actions":e.menuActions,room:r.room,"message-selection-enabled":s.messageSelectionEnabled,"message-selection-actions":e.messageSelectionActions,"selected-messages-total":s.selectedMessages.length,onToggleRoomsList:n[0]||(n[0]=d=>t.$emit("toggle-rooms-list")),onRoomInfo:n[1]||(n[1]=d=>t.$emit("room-info")),onMenuActionHandler:n[2]||(n[2]=d=>t.$emit("menu-action-handler",d)),onMessageSelectionActionHandler:r.messageSelectionActionHandler,onCancelMessageSelection:n[3]||(n[3]=d=>s.messageSelectionEnabled=!1)},ki({_:2},[Tn(t.$slots,(d,f)=>({name:f,fn:rn(p=>[xt(t.$slots,f,Ci(vi(p)))])}))]),1032,["current-user-id","text-messages","single-room","show-rooms-list","is-mobile","room-info-enabled","menu-actions","room","message-selection-enabled","message-selection-actions","selected-messages-total","onMessageSelectionActionHandler"])),gt("div",{id:"messages-list",ref:"scrollContainer",class:"vac-container-scroll",onScroll:n[5]||(n[5]=(...d)=>r.onContainerScroll&&r.onContainerScroll(...d))},[It(a,{show:s.loadingMessages,type:"messages"},ki({_:2},[Tn(t.$slots,(d,f)=>({name:f,fn:rn(p=>[xt(t.$slots,f,Ci(vi(p)))])}))]),1032,["show"]),gt("div",EHe,[gt("div",{class:Pn({"vac-messages-hidden":s.loadingMessages})},[It(vs,{name:"vac-fade-message"},{default:rn(()=>[gt("div",null,[r.showNoMessages?(Ve(),Qe("div",SHe,[xt(t.$slots,"messages-empty",{},()=>[Tc(fn(e.textMessages.MESSAGES_EMPTY),1)])])):Tt("",!0),r.showMessagesStarted?(Ve(),Qe("div",THe,fn(e.textMessages.CONVERSATION_STARTED)+" "+fn(e.messages[0].date),1)):Tt("",!0)])]),_:3}),e.messages.length&&!e.messagesLoaded?(Ve(),Qe("div",xHe,[It(a,{show:!0,infinite:!0,type:"infinite-messages"},ki({_:2},[Tn(t.$slots,(d,f)=>({name:f,fn:rn(p=>[xt(t.$slots,f,Ci(vi(p)))])}))]),1024)])):Tt("",!0),(Ve(),mi(eT,{key:e.roomId,name:"vac-fade-message",tag:"span"},{default:rn(()=>[(Ve(!0),Qe(Yn,null,Tn(e.messages,(d,f)=>(Ve(),Qe("div",{key:d.indexId||d._id},[It(l,{"current-user-id":e.currentUserId,message:d,index:f,messages:e.messages,"edited-message-id":s.editedMessageId,"message-actions":e.messageActions,"room-users":r.room.users,"text-messages":e.textMessages,"new-messages":s.newMessages,"show-reaction-emojis":e.showReactionEmojis,"show-new-messages-divider":e.showNewMessagesDivider,"text-formatting":e.textFormatting,"link-options":e.linkOptions,"username-options":e.usernameOptions,"message-selection-enabled":s.messageSelectionEnabled,"selected-messages":s.selectedMessages,"emoji-data-source":e.emojiDataSource,onMessageAdded:r.onMessageAdded,onMessageActionHandler:r.messageActionHandler,onOpenFile:r.openFile,onOpenUserTag:r.openUserTag,onOpenFailedMessage:n[4]||(n[4]=p=>t.$emit("open-failed-message",p)),onSendMessageReaction:r.sendMessageReaction,onSelectMessage:r.selectMessage,onUnselectMessage:r.unselectMessage},ki({_:2},[Tn(t.$slots,(p,m)=>({name:m,fn:rn(v=>[xt(t.$slots,m,Ci(vi(v)))])}))]),1032,["current-user-id","message","index","messages","edited-message-id","message-actions","room-users","text-messages","new-messages","show-reaction-emojis","show-new-messages-divider","text-formatting","link-options","username-options","message-selection-enabled","selected-messages","emoji-data-source","onMessageAdded","onMessageActionHandler","onOpenFile","onOpenUserTag","onSendMessageReaction","onSelectMessage","onUnselectMessage"])]))),128))]),_:3}))],2)])],544),s.loadingMessages?Tt("",!0):(Ve(),Qe("div",AHe,[It(vs,{name:"vac-bounce"},{default:rn(()=>[s.scrollIcon?(Ve(),Qe("div",{key:0,class:"vac-icon-scroll",onClick:n[6]||(n[6]=(...d)=>r.scrollToBottom&&r.scrollToBottom(...d))},[It(vs,{name:"vac-bounce"},{default:rn(()=>[s.scrollMessagesCount?(Ve(),Qe("div",IHe,fn(s.scrollMessagesCount),1)):Tt("",!0)]),_:1}),xt(t.$slots,"scroll-icon",{},()=>[It(c,{name:"dropdown",param:"scroll"})])])):Tt("",!0)]),_:3})])),It(u,{room:r.room,"room-id":e.roomId,"room-message":e.roomMessage,"text-messages":e.textMessages,"show-send-icon":e.showSendIcon,"show-files":e.showFiles,"show-audio":e.showAudio,"show-emojis":e.showEmojis,"show-footer":e.showFooter,"accepted-files":e.acceptedFiles,"capture-files":e.captureFiles,"multiple-files":e.multipleFiles,"textarea-action-enabled":e.textareaActionEnabled,"textarea-auto-focus":e.textareaAutoFocus,"user-tags-enabled":e.userTagsEnabled,"emojis-suggestion-enabled":e.emojisSuggestionEnabled,"templates-text":e.templatesText,"text-formatting":e.textFormatting,"link-options":e.linkOptions,"audio-bit-rate":e.audioBitRate,"audio-sample-rate":e.audioSampleRate,"init-reply-message":s.initReplyMessage,"init-edit-message":s.initEditMessage,"dropped-files":s.droppedFiles,"emoji-data-source":e.emojiDataSource,onUpdateEditedMessageId:n[7]||(n[7]=d=>s.editedMessageId=d),onEditMessage:n[8]||(n[8]=d=>t.$emit("edit-message",d)),onSendMessage:n[9]||(n[9]=d=>t.$emit("send-message",d)),onTypingMessage:n[10]||(n[10]=d=>t.$emit("typing-message",d)),onTextareaActionHandler:n[11]||(n[11]=d=>t.$emit("textarea-action-handler",d))},ki({_:2},[Tn(t.$slots,(d,f)=>({name:f,fn:rn(p=>[xt(t.$slots,f,Ci(vi(p)))])}))]),1032,["room","room-id","room-message","text-messages","show-send-icon","show-files","show-audio","show-emojis","show-footer","accepted-files","capture-files","multiple-files","textarea-action-enabled","textarea-auto-focus","user-tags-enabled","emojis-suggestion-enabled","templates-text","text-formatting","link-options","audio-bit-rate","audio-sample-rate","init-reply-message","init-edit-message","dropped-files","emoji-data-source"])],544)),[[Ey,e.isMobile&&!e.showRoomsList||!e.isMobile||e.singleRoom]])}var MHe=Ni(CHe,[["render",RHe]]);const PHe={name:"MediaPreview",components:{SvgIcon:Qs},props:{file:{type:Object,required:!0}},emits:["close-media-preview"],computed:{isImage(){return vm(this.file)},isVideo(){return r0(this.file)}},mounted(){this.$refs.modal.focus()},methods:{closeModal(){this.$emit("close-media-preview")}}},OHe={key:0,class:"vac-media-preview-container"},LHe={key:1,class:"vac-media-preview-container"},BHe={controls:"",autoplay:""},FHe=["src"],NHe={class:"vac-svg-button"};function VHe(t,n,e,i,s,r){const o=tn("svg-icon");return Ve(),Qe("div",{ref:"modal",tabindex:"0",class:"vac-media-preview",onClick:n[0]||(n[0]=bl((...a)=>r.closeModal&&r.closeModal(...a),["stop"])),onKeydown:n[1]||(n[1]=Nd((...a)=>r.closeModal&&r.closeModal(...a),["esc"]))},[It(vs,{name:"vac-bounce-preview",appear:""},{default:rn(()=>[r.isImage?(Ve(),Qe("div",OHe,[gt("div",{class:"vac-image-preview",style:Wi({"background-image":`url('${e.file.url}')`})},null,4)])):r.isVideo?(Ve(),Qe("div",LHe,[gt("video",BHe,[gt("source",{src:e.file.url},null,8,FHe)])])):Tt("",!0)]),_:1}),gt("div",NHe,[xt(t.$slots,"preview-close-icon",{},()=>[It(o,{name:"close-outline",param:"preview"})])])],544)}var DHe=Ni(PHe,[["render",VHe]]),$He={ROOMS_EMPTY:"No rooms",ROOM_EMPTY:"No room selected",NEW_MESSAGES:"New Messages",MESSAGE_DELETED:"This message was deleted",MESSAGES_EMPTY:"No messages",CONVERSATION_STARTED:"Conversation started on:",TYPE_MESSAGE:"Type message",SEARCH:"Search",IS_ONLINE:"is online",LAST_SEEN:"last seen ",IS_TYPING:"is writing...",CANCEL_SELECT_MESSAGE:"Cancel"};const zHe={light:{general:{color:"#0a0a0a",colorButtonClear:"#1976d2",colorButton:"#fff",backgroundColorButton:"#1976d2",backgroundInput:"#fff",colorPlaceholder:"#9ca6af",colorCaret:"#1976d2",colorSpinner:"#333",borderStyle:"1px solid #e1e4e8",backgroundScrollIcon:"#fff"},container:{border:"none",borderRadius:"4px",boxShadow:"0px 1px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12)"},header:{background:"#fff",colorRoomName:"#0a0a0a",colorRoomInfo:"#9ca6af",position:"absolute",width:"100%"},footer:{background:"#f8f9fa",borderStyleInput:"1px solid #e1e4e8",borderInputSelected:"#1976d2",backgroundReply:"#e5e5e6",backgroundTagActive:"#e5e5e6",backgroundTag:"#f8f9fa"},content:{background:"#f8f9fa"},sidemenu:{background:"#fff",backgroundHover:"#f6f6f6",backgroundActive:"#e5effa",colorActive:"#1976d2",borderColorSearch:"#e1e5e8"},dropdown:{background:"#fff",backgroundHover:"#f6f6f6"},message:{background:"#fff",backgroundMe:"#ccf2cf",color:"#0a0a0a",colorStarted:"#9ca6af",backgroundDeleted:"#dadfe2",backgroundSelected:"#c2dcf2",colorDeleted:"#757e85",colorUsername:"#9ca6af",colorTimestamp:"#828c94",backgroundDate:"#e5effa",colorDate:"#505a62",backgroundSystem:"#e5effa",colorSystem:"#505a62",backgroundMedia:"rgba(0, 0, 0, 0.15)",backgroundReply:"rgba(0, 0, 0, 0.08)",colorReplyUsername:"#0a0a0a",colorReply:"#6e6e6e",colorTag:"#0d579c",backgroundImage:"#ddd",colorNewMessages:"#1976d2",backgroundScrollCounter:"#0696c7",colorScrollCounter:"#fff",backgroundReaction:"#eee",borderStyleReaction:"1px solid #eee",backgroundReactionHover:"#fff",borderStyleReactionHover:"1px solid #ddd",colorReactionCounter:"#0a0a0a",backgroundReactionMe:"#cfecf5",borderStyleReactionMe:"1px solid #3b98b8",backgroundReactionHoverMe:"#cfecf5",borderStyleReactionHoverMe:"1px solid #3b98b8",colorReactionCounterMe:"#0b59b3",backgroundAudioRecord:"#eb4034",backgroundAudioLine:"rgba(0, 0, 0, 0.15)",backgroundAudioProgress:"#455247",backgroundAudioProgressSelector:"#455247",colorFileExtension:"#757e85"},markdown:{background:"rgba(239, 239, 239, 0.7)",border:"rgba(212, 212, 212, 0.9)",color:"#e01e5a",colorMulti:"#0a0a0a"},room:{colorUsername:"#0a0a0a",colorMessage:"#67717a",colorTimestamp:"#a2aeb8",colorStateOnline:"#4caf50",colorStateOffline:"#9ca6af",backgroundCounterBadge:"#0696c7",colorCounterBadge:"#fff"},emoji:{background:"#fff"},icons:{search:"#9ca6af",add:"#1976d2",toggle:"#0a0a0a",menu:"#0a0a0a",close:"#9ca6af",closeImage:"#fff",file:"#1976d2",paperclip:"#1976d2",closeOutline:"#000",closePreview:"#fff",send:"#1976d2",sendDisabled:"#9ca6af",emoji:"#1976d2",emojiReaction:"rgba(0, 0, 0, 0.3)",document:"#1976d2",pencil:"#9e9e9e",checkmark:"#9e9e9e",checkmarkSeen:"#0696c7",eye:"#fff",dropdownMessage:"#fff",dropdownMessageBackground:"rgba(0, 0, 0, 0.25)",dropdownRoom:"#9e9e9e",dropdownScroll:"#0a0a0a",microphone:"#1976d2",audioPlay:"#455247",audioPause:"#455247",audioCancel:"#eb4034",audioConfirm:"#1ba65b"}},dark:{general:{color:"#fff",colorButtonClear:"#fff",colorButton:"#fff",backgroundColorButton:"#1976d2",backgroundInput:"#202223",colorPlaceholder:"#596269",colorCaret:"#fff",colorSpinner:"#fff",borderStyle:"none",backgroundScrollIcon:"#fff"},container:{border:"none",borderRadius:"4px",boxShadow:"0px 1px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12)"},header:{background:"#181a1b",colorRoomName:"#fff",colorRoomInfo:"#9ca6af",position:"absolute",width:"100%"},footer:{background:"#131415",borderStyleInput:"none",borderInputSelected:"#1976d2",backgroundReply:"#1b1c1c",backgroundTagActive:"#1b1c1c",backgroundTag:"#131415"},content:{background:"#131415"},sidemenu:{background:"#181a1b",backgroundHover:"#202224",backgroundActive:"#151617",colorActive:"#fff",borderColorSearch:"#181a1b"},dropdown:{background:"#2a2c33",backgroundHover:"#26282e"},message:{background:"#22242a",backgroundMe:"#1f7e80",color:"#fff",colorStarted:"#9ca6af",backgroundDeleted:"#1b1c21",backgroundSelected:"#c2dcf2",colorDeleted:"#a2a5a8",colorUsername:"#b3bac9",colorTimestamp:"#ebedf2",backgroundDate:"rgba(0, 0, 0, 0.3)",colorDate:"#bec5cc",backgroundSystem:"rgba(0, 0, 0, 0.3)",colorSystem:"#bec5cc",backgroundMedia:"rgba(0, 0, 0, 0.18)",backgroundReply:"rgba(0, 0, 0, 0.18)",colorReplyUsername:"#fff",colorReply:"#d6d6d6",colorTag:"#f0c60a",backgroundImage:"#ddd",colorNewMessages:"#fff",backgroundScrollCounter:"#1976d2",colorScrollCounter:"#fff",backgroundReaction:"none",borderStyleReaction:"none",backgroundReactionHover:"#202223",borderStyleReactionHover:"none",colorReactionCounter:"#fff",backgroundReactionMe:"#4e9ad1",borderStyleReactionMe:"none",backgroundReactionHoverMe:"#4e9ad1",borderStyleReactionHoverMe:"none",colorReactionCounterMe:"#fff",backgroundAudioRecord:"#eb4034",backgroundAudioLine:"rgba(255, 255, 255, 0.15)",backgroundAudioProgress:"#b7d4d3",backgroundAudioProgressSelector:"#b7d4d3",colorFileExtension:"#a2a5a8"},markdown:{background:"rgba(239, 239, 239, 0.7)",border:"rgba(212, 212, 212, 0.9)",color:"#e01e5a",colorMulti:"#0a0a0a"},room:{colorUsername:"#fff",colorMessage:"#6c7278",colorTimestamp:"#6c7278",colorStateOnline:"#4caf50",colorStateOffline:"#596269",backgroundCounterBadge:"#1976d2",colorCounterBadge:"#fff"},emoji:{background:"#343740"},icons:{search:"#596269",add:"#fff",toggle:"#fff",menu:"#fff",close:"#9ca6af",closeImage:"#fff",file:"#1976d2",paperclip:"#fff",closeOutline:"#fff",closePreview:"#fff",send:"#fff",sendDisabled:"#646a70",emoji:"#fff",emojiReaction:"#fff",document:"#1976d2",pencil:"#ebedf2",checkmark:"#ebedf2",checkmarkSeen:"#f0d90a",eye:"#fff",dropdownMessage:"#fff",dropdownMessageBackground:"rgba(0, 0, 0, 0.25)",dropdownRoom:"#fff",dropdownScroll:"#0a0a0a",microphone:"#fff",audioPlay:"#b7d4d3",audioPause:"#b7d4d3",audioCancel:"#eb4034",audioConfirm:"#1ba65b"}}},HHe=({general:t,container:n,header:e,footer:i,sidemenu:s,content:r,dropdown:o,message:a,markdown:l,room:c,emoji:u,icons:d})=>({"--chat-color":t.color,"--chat-color-button-clear":t.colorButtonClear,"--chat-color-button":t.colorButton,"--chat-bg-color-button":t.backgroundColorButton,"--chat-bg-color-input":t.backgroundInput,"--chat-color-spinner":t.colorSpinner,"--chat-color-placeholder":t.colorPlaceholder,"--chat-color-caret":t.colorCaret,"--chat-border-style":t.borderStyle,"--chat-bg-scroll-icon":t.backgroundScrollIcon,"--chat-container-border":n.border,"--chat-container-border-radius":n.borderRadius,"--chat-container-box-shadow":n.boxShadow,"--chat-header-bg-color":e.background,"--chat-header-color-name":e.colorRoomName,"--chat-header-color-info":e.colorRoomInfo,"--chat-header-position":e.position,"--chat-header-width":e.width,"--chat-footer-bg-color":i.background,"--chat-border-style-input":i.borderStyleInput,"--chat-border-color-input-selected":i.borderInputSelected,"--chat-footer-bg-color-reply":i.backgroundReply,"--chat-footer-bg-color-tag-active":i.backgroundTagActive,"--chat-footer-bg-color-tag":i.backgroundTag,"--chat-content-bg-color":r.background,"--chat-sidemenu-bg-color":s.background,"--chat-sidemenu-bg-color-hover":s.backgroundHover,"--chat-sidemenu-bg-color-active":s.backgroundActive,"--chat-sidemenu-color-active":s.colorActive,"--chat-sidemenu-border-color-search":s.borderColorSearch,"--chat-dropdown-bg-color":o.background,"--chat-dropdown-bg-color-hover":o.backgroundHover,"--chat-message-bg-color":a.background,"--chat-message-bg-color-me":a.backgroundMe,"--chat-message-color-started":a.colorStarted,"--chat-message-bg-color-deleted":a.backgroundDeleted,"--chat-message-bg-color-selected":a.backgroundSelected,"--chat-message-color-deleted":a.colorDeleted,"--chat-message-color-username":a.colorUsername,"--chat-message-color-timestamp":a.colorTimestamp,"--chat-message-bg-color-date":a.backgroundDate,"--chat-message-color-date":a.colorDate,"--chat-message-bg-color-system":a.backgroundSystem,"--chat-message-color-system":a.colorSystem,"--chat-message-color":a.color,"--chat-message-bg-color-media":a.backgroundMedia,"--chat-message-bg-color-reply":a.backgroundReply,"--chat-message-color-reply-username":a.colorReplyUsername,"--chat-message-color-reply-content":a.colorReply,"--chat-message-color-tag":a.colorTag,"--chat-message-bg-color-image":a.backgroundImage,"--chat-message-color-new-messages":a.colorNewMessages,"--chat-message-bg-color-scroll-counter":a.backgroundScrollCounter,"--chat-message-color-scroll-counter":a.colorScrollCounter,"--chat-message-bg-color-reaction":a.backgroundReaction,"--chat-message-border-style-reaction":a.borderStyleReaction,"--chat-message-bg-color-reaction-hover":a.backgroundReactionHover,"--chat-message-border-style-reaction-hover":a.borderStyleReactionHover,"--chat-message-color-reaction-counter":a.colorReactionCounter,"--chat-message-bg-color-reaction-me":a.backgroundReactionMe,"--chat-message-border-style-reaction-me":a.borderStyleReactionMe,"--chat-message-bg-color-reaction-hover-me":a.backgroundReactionHoverMe,"--chat-message-border-style-reaction-hover-me":a.borderStyleReactionHoverMe,"--chat-message-color-reaction-counter-me":a.colorReactionCounterMe,"--chat-message-bg-color-audio-record":a.backgroundAudioRecord,"--chat-message-bg-color-audio-line":a.backgroundAudioLine,"--chat-message-bg-color-audio-progress":a.backgroundAudioProgress,"--chat-message-bg-color-audio-progress-selector":a.backgroundAudioProgressSelector,"--chat-message-color-file-extension":a.colorFileExtension,"--chat-markdown-bg":l.background,"--chat-markdown-border":l.border,"--chat-markdown-color":l.color,"--chat-markdown-color-multi":l.colorMulti,"--chat-room-color-username":c.colorUsername,"--chat-room-color-message":c.colorMessage,"--chat-room-color-timestamp":c.colorTimestamp,"--chat-room-color-online":c.colorStateOnline,"--chat-room-color-offline":c.colorStateOffline,"--chat-room-bg-color-badge":c.backgroundCounterBadge,"--chat-room-color-badge":c.colorCounterBadge,"--chat-emoji-bg-color":u.background,"--chat-icon-color-search":d.search,"--chat-icon-color-add":d.add,"--chat-icon-color-toggle":d.toggle,"--chat-icon-color-menu":d.menu,"--chat-icon-color-close":d.close,"--chat-icon-color-close-image":d.closeImage,"--chat-icon-color-file":d.file,"--chat-icon-color-paperclip":d.paperclip,"--chat-icon-color-close-outline":d.closeOutline,"--chat-icon-color-close-preview":d.closePreview,"--chat-icon-color-send":d.send,"--chat-icon-color-send-disabled":d.sendDisabled,"--chat-icon-color-emoji":d.emoji,"--chat-icon-color-emoji-reaction":d.emojiReaction,"--chat-icon-color-document":d.document,"--chat-icon-color-pencil":d.pencil,"--chat-icon-color-checkmark":d.checkmark,"--chat-icon-color-checkmark-seen":d.checkmarkSeen,"--chat-icon-color-eye":d.eye,"--chat-icon-color-dropdown-message":d.dropdownMessage,"--chat-icon-bg-dropdown-message":d.dropdownMessageBackground,"--chat-icon-color-dropdown-room":d.dropdownRoom,"--chat-icon-color-dropdown-scroll":d.dropdownScroll,"--chat-icon-color-microphone":d.microphone,"--chat-icon-color-audio-play":d.audioPlay,"--chat-icon-color-audio-pause":d.audioPause,"--chat-icon-color-audio-cancel":d.audioCancel,"--chat-icon-color-audio-confirm":d.audioConfirm});var UHe=`.vac-fade-spinner-enter-from{opacity:0}.vac-fade-spinner-enter-active{transition:opacity .8s}.vac-fade-spinner-leave-active{transition:opacity .2s;opacity:0}.vac-fade-image-enter-from{opacity:0}.vac-fade-image-enter-active{transition:opacity 1s}.vac-fade-image-leave-active{transition:opacity .5s;opacity:0}.vac-fade-message-enter-from{opacity:0}.vac-fade-message-enter-active{transition:opacity .5s}.vac-fade-message-leave-active{transition:opacity .2s;opacity:0}.vac-slide-left-enter-active,.vac-slide-right-enter-active{transition:all .3s ease;transition-property:transform,opacity}.vac-slide-left-leave-active,.vac-slide-right-leave-active{transition:all .2s cubic-bezier(1,.5,.8,1)!important;transition-property:transform,opacity}.vac-slide-left-enter-from,.vac-slide-left-leave-to{transform:translate(10px);opacity:0}.vac-slide-right-enter-from,.vac-slide-right-leave-to{transform:translate(-10px);opacity:0}.vac-slide-up-enter-active{transition:all .3s ease}.vac-slide-up-leave-active{transition:all .2s cubic-bezier(1,.5,.8,1)}.vac-slide-up-enter-from,.vac-slide-up-leave-to{transform:translateY(10px);opacity:0}.vac-bounce-enter-active{animation:vac-bounce-in .5s}.vac-bounce-leave-active{animation:vac-bounce-in .3s reverse}@keyframes vac-bounce-in{0%{transform:scale(0)}50%{transform:scale(1.05)}to{transform:scale(1)}}.vac-fade-preview-enter{opacity:0}.vac-fade-preview-enter-active{transition:opacity .1s}.vac-fade-preview-leave-active{transition:opacity .2s;opacity:0}.vac-bounce-preview-enter-active{animation:vac-bounce-image-in .4s}.vac-bounce-preview-leave-active{animation:vac-bounce-image-in .3s reverse}@keyframes vac-bounce-image-in{0%{transform:scale(.6)}to{transform:scale(1)}}.vac-menu-list{border-radius:4px;display:block;cursor:pointer;background:var(--chat-dropdown-bg-color);padding:6px 0}.vac-menu-list :hover{background:var(--chat-dropdown-bg-color-hover);transition:background-color .3s cubic-bezier(.25,.8,.5,1)}.vac-menu-list :not(:hover){transition:background-color .3s cubic-bezier(.25,.8,.5,1)}.vac-menu-item{-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-ms-flex:1 1 100%;flex:1 1 100%;min-height:30px;padding:5px 16px;position:relative;white-space:nowrap;line-height:30px}.vac-menu-options{position:absolute;right:10px;top:20px;z-index:9999;min-width:150px;display:inline-block;border-radius:4px;font-size:14px;color:var(--chat-color);overflow-y:auto;overflow-x:hidden;contain:content;box-shadow:0 2px 2px -4px #0000001a,0 2px 2px 1px #0000001f,0 1px 8px 1px #0000001f}.vac-app-border{border:var(--chat-border-style)}.vac-app-border-t{border-top:var(--chat-border-style)}.vac-app-border-r{border-right:var(--chat-border-style)}.vac-app-border-b{border-bottom:var(--chat-border-style)}.vac-app-box-shadow{transition:all .5s;box-shadow:0 2px 2px -4px #0000001a,0 2px 2px 1px #0000001f,0 1px 8px 1px #0000001f}.vac-item-clickable{cursor:pointer}.vac-vertical-center{display:flex;align-items:center;height:100%}.vac-vertical-center .vac-vertical-container{width:100%;text-align:center}.vac-svg-button{max-height:30px;display:flex;cursor:pointer;transition:all .2s}.vac-svg-button:hover{transform:scale(1.1);opacity:.7}.vac-avatar{background-size:cover;background-position:center center;background-repeat:no-repeat;background-color:#ddd;height:42px;width:42px;min-height:42px;min-width:42px;margin-right:15px;border-radius:50%}.vac-blur-loading{filter:blur(3px)}.vac-badge-counter{height:13px;width:auto;min-width:13px;border-radius:50%;display:flex;align-items:center;justify-content:center;padding:3px;font-size:11px;font-weight:500}.vac-text-ellipsis{width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.vac-text-tag{color:var(--chat-message-color-tag);cursor:pointer}.vac-file-container{display:flex;align-content:center;justify-content:center;flex-wrap:wrap;text-align:center;background:var(--chat-bg-color-input);border:var(--chat-border-style-input);border-radius:4px;padding:10px}.vac-file-container svg{height:28px;width:28px}.vac-file-container .vac-text-extension{font-size:12px;color:var(--chat-message-color-file-extension);margin-top:-2px}.markdown p{margin:0}.markdown ol{display:flex;flex-direction:column;list-style-position:inside}.markdown ul{display:flex;flex-direction:column}.markdown code{display:block;font-size:12px;color:var(--chat-markdown-color-multi);background:var(--chat-markdown-bg);border:1px solid var(--chat-markdown-border);border-radius:3px;margin:4px 0;padding:7px}.markdown p code{display:inline-block;font-size:12px;color:var(--chat-markdown-color);background:var(--chat-markdown-bg);border:1px solid var(--chat-markdown-border);border-radius:3px;margin:2px 0;padding:2px 3px}.vac-card-window{width:100%;display:block;max-width:100%;background:var(--chat-content-bg-color);color:var(--chat-color);overflow-wrap:break-word;white-space:normal;border:var(--chat-container-border);border-radius:var(--chat-container-border-radius);box-shadow:var(--chat-container-box-shadow);-webkit-tap-highlight-color:transparent}.vac-card-window *{font-family:inherit}.vac-card-window a{color:#0d579c;font-weight:500}.vac-card-window .vac-chat-container{height:100%;display:flex}.vac-card-window .vac-chat-container input{min-width:10px}.vac-card-window .vac-chat-container textarea,.vac-card-window .vac-chat-container input[type=text],.vac-card-window .vac-chat-container input[type=search]{-webkit-appearance:none}.vac-media-preview{position:fixed;top:0;left:0;z-index:99;width:100vw;height:100vh;display:flex;align-items:center;background-color:#000c;outline:none}.vac-media-preview .vac-media-preview-container{height:calc(100% - 140px);width:calc(100% - 80px);padding:70px 40px;margin:0 auto}.vac-media-preview .vac-image-preview{width:100%;height:100%;background-size:contain;background-repeat:no-repeat;background-position:center}.vac-media-preview video{width:100%;height:100%}.vac-media-preview .vac-svg-button{position:absolute;top:30px;right:30px;transform:scale(1.4)}@media only screen and (max-width: 768px){.vac-media-preview .vac-svg-button{top:20px;right:20px;transform:scale(1.2)}.vac-media-preview .vac-media-preview-container{width:calc(100% - 40px);padding:70px 20px}}.vac-col-messages{position:relative;height:100%;flex:1;overflow:hidden;display:flex;flex-flow:column}.vac-col-messages .vac-container-center{height:100%;width:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center}.vac-col-messages .vac-room-empty{font-size:14px;color:#9ca6af;font-style:italic;line-height:20px;white-space:pre-line}.vac-col-messages .vac-room-empty div{padding:0 10%}.vac-col-messages .vac-container-scroll{background:var(--chat-content-bg-color);flex:1;overflow-y:auto;margin-right:1px;margin-top:65px;-webkit-overflow-scrolling:touch}.vac-col-messages .vac-container-scroll.vac-scroll-smooth{scroll-behavior:smooth}.vac-col-messages .vac-messages-container{padding:0 5px 5px}.vac-col-messages .vac-text-started{font-size:14px;color:var(--chat-message-color-started);font-style:italic;text-align:center;margin-top:25px;margin-bottom:20px}.vac-col-messages .vac-icon-scroll{position:absolute;bottom:80px;right:20px;padding:8px;background:var(--chat-bg-scroll-icon);border-radius:50%;box-shadow:0 1px 1px -1px #0003,0 1px 1px #00000024,0 1px 2px #0000001f;display:flex;cursor:pointer;z-index:10}.vac-col-messages .vac-icon-scroll svg{height:25px;width:25px}.vac-col-messages .vac-messages-count{position:absolute;top:-8px;left:11px;background-color:var(--chat-message-bg-color-scroll-counter);color:var(--chat-message-color-scroll-counter)}.vac-col-messages .vac-messages-hidden{opacity:0}@media only screen and (max-width: 768px){.vac-col-messages .vac-container-scroll{margin-top:50px}.vac-col-messages .vac-text-started{margin-top:20px}.vac-col-messages .vac-icon-scroll{bottom:70px}}.vac-room-header{position:var(--chat-header-position);display:flex;align-items:center;height:64px;width:var(--chat-header-width);z-index:10;margin-right:1px;background:var(--chat-header-bg-color);border-top-right-radius:var(--chat-container-border-radius)}.vac-room-header .vac-room-wrapper{display:flex;align-items:center;min-width:0;height:100%;width:100%;padding:0 16px}.vac-room-header .vac-toggle-button{margin-right:15px}.vac-room-header .vac-toggle-button svg{height:26px;width:26px}.vac-room-header .vac-rotate-icon{transform:rotate(180deg)!important}.vac-room-header .vac-rotate-icon-init{transform:rotate(360deg)}.vac-room-header .vac-info-wrapper,.vac-room-header .vac-room-selection{display:flex;align-items:center;min-width:0;width:100%;height:100%}.vac-room-header .vac-room-selection .vac-selection-button{padding:8px 16px;color:var(--chat-color-button);background-color:var(--chat-bg-color-button);border-radius:4px;margin-right:10px;cursor:pointer;transition:all .2s}.vac-room-header .vac-room-selection .vac-selection-button:hover{opacity:.7}.vac-room-header .vac-room-selection .vac-selection-button:active{opacity:.9}.vac-room-header .vac-room-selection .vac-selection-button .vac-selection-button-count{margin-left:6px;opacity:.9}.vac-room-header .vac-room-selection .vac-selection-cancel{display:flex;align-items:center;margin-left:auto;white-space:nowrap;color:var(--chat-color-button-clear);transition:all .2s}.vac-room-header .vac-room-selection .vac-selection-cancel:hover{opacity:.7}.vac-room-header .vac-room-name{font-size:17px;font-weight:500;line-height:22px;color:var(--chat-header-color-name)}.vac-room-header .vac-room-info{font-size:13px;line-height:18px;color:var(--chat-header-color-info)}.vac-room-header .vac-room-options{margin-left:auto}@media only screen and (max-width: 768px){.vac-room-header{height:50px}.vac-room-header .vac-room-wrapper{padding:0 10px}.vac-room-header .vac-room-name{font-size:16px;line-height:22px}.vac-room-header .vac-room-info{font-size:12px;line-height:16px}.vac-room-header .vac-avatar{height:37px;width:37px;min-height:37px;min-width:37px}}.vac-room-footer{width:100%;border-bottom-right-radius:4px;z-index:10}.vac-box-footer{display:flex;position:relative;background:var(--chat-footer-bg-color);padding:10px 8px}.vac-textarea{max-height:300px;overflow-y:auto;height:20px;width:100%;line-height:20px;outline:0;resize:none;border-radius:20px;padding:12px 16px;box-sizing:content-box;font-size:16px;background:var(--chat-bg-color-input);color:var(--chat-color);caret-color:var(--chat-color-caret);border:var(--chat-border-style-input)}.vac-textarea::placeholder{color:var(--chat-color-placeholder);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.vac-textarea-outline{border:1px solid var(--chat-border-color-input-selected);box-shadow:inset 0 0 0 1px var(--chat-border-color-input-selected)}.vac-icon-textarea,.vac-icon-textarea-left{display:flex;align-items:center}.vac-icon-textarea svg,.vac-icon-textarea .vac-wrapper,.vac-icon-textarea-left svg,.vac-icon-textarea-left .vac-wrapper{margin:0 7px}.vac-icon-textarea{margin-left:5px}.vac-icon-textarea-left{display:flex;align-items:center;margin-right:5px}.vac-icon-textarea-left svg,.vac-icon-textarea-left .vac-wrapper{margin:0 7px}.vac-icon-textarea-left .vac-icon-microphone{fill:var(--chat-icon-color-microphone);margin:0 7px}.vac-icon-textarea-left .vac-dot-audio-record{height:15px;width:15px;border-radius:50%;background-color:var(--chat-message-bg-color-audio-record);animation:vac-scaling .8s ease-in-out infinite alternate}@keyframes vac-scaling{0%{transform:scale(1);opacity:.4}to{transform:scale(1.1);opacity:1}}.vac-icon-textarea-left .vac-dot-audio-record-time{font-size:16px;color:var(--chat-color);margin-left:8px;width:45px}.vac-icon-textarea-left .vac-icon-audio-stop,.vac-icon-textarea-left .vac-icon-audio-confirm{min-height:28px;min-width:28px}.vac-icon-textarea-left .vac-icon-audio-stop svg,.vac-icon-textarea-left .vac-icon-audio-confirm svg{min-height:28px;min-width:28px}.vac-icon-textarea-left .vac-icon-audio-stop{margin-right:20px}.vac-icon-textarea-left .vac-icon-audio-stop #vac-icon-close-outline{fill:var(--chat-icon-color-audio-cancel)}.vac-icon-textarea-left .vac-icon-audio-confirm{margin-right:3px;margin-left:12px}.vac-icon-textarea-left .vac-icon-audio-confirm #vac-icon-checkmark{fill:var(--chat-icon-color-audio-confirm)}.vac-send-disabled,.vac-send-disabled svg{cursor:none!important;pointer-events:none!important;transform:none!important}@media only screen and (max-width: 768px){.vac-room-footer{width:100%}.vac-box-footer{padding:7px 2px 7px 7px}.vac-box-footer.vac-box-footer-border{border-top:var(--chat-border-style-input)}.vac-textarea{padding:7px;line-height:18px}.vac-textarea::placeholder{color:transparent}.vac-icon-textarea svg,.vac-icon-textarea .vac-wrapper,.vac-icon-textarea-left svg,.vac-icon-textarea-left .vac-wrapper{margin:0 5px!important}}@media only screen and (max-height: 768px){.vac-textarea{max-height:120px}}.vac-emojis-container{width:calc(100% - 16px);padding:10px 8px;background:var(--chat-footer-bg-color);display:flex;align-items:center;overflow:auto}.vac-emojis-container .vac-emoji-element{padding:0 8px;font-size:30px;border-radius:4px;cursor:pointer;background:var(--chat-footer-bg-color-tag);transition:background-color .3s cubic-bezier(.25,.8,.5,1)}.vac-emojis-container .vac-emoji-element-active{background:var(--chat-footer-bg-color-tag-active)}@media only screen and (max-width: 768px){.vac-emojis-container{width:calc(100% - 10px);padding:7px 5px}.vac-emojis-container .vac-emoji-element{padding:0 7px;font-size:26px}}.vac-reply-container{display:flex;padding:10px 10px 0;background:var(--chat-footer-bg-color);align-items:center;width:calc(100% - 20px)}.vac-reply-container .vac-reply-box{width:100%;overflow:hidden;background:var(--chat-footer-bg-color-reply);border-radius:4px;padding:8px 10px}.vac-reply-container .vac-reply-info{overflow:hidden}.vac-reply-container .vac-reply-username{color:var(--chat-message-color-reply-username);font-size:12px;line-height:15px;margin-bottom:2px}.vac-reply-container .vac-reply-content{font-size:12px;color:var(--chat-message-color-reply-content);white-space:pre-line}.vac-reply-container .vac-icon-reply{margin-left:10px}.vac-reply-container .vac-icon-reply svg{height:20px;width:20px}.vac-reply-container .vac-image-reply{max-height:100px;max-width:200px;margin:4px 10px 0 0;border-radius:4px}.vac-reply-container .vac-audio-reply{margin-right:10px}.vac-reply-container .vac-file-container{max-width:80px}@media only screen and (max-width: 768px){.vac-reply-container{padding:5px 8px;width:calc(100% - 16px)}}.vac-room-files-container{display:flex;align-items:center;padding:10px 6px 0;background:var(--chat-footer-bg-color)}.vac-room-files-container .vac-files-box{display:flex;overflow:auto;width:calc(100% - 30px)}.vac-room-files-container video{height:100px;border:var(--chat-border-style-input);border-radius:4px}.vac-room-files-container .vac-icon-close{margin-left:auto}.vac-room-files-container .vac-icon-close svg{height:20px;width:20px}@media only screen and (max-width: 768px){.vac-files-container{padding:6px 4px 4px 2px}}.vac-room-file-container{display:flex;position:relative;margin:0 4px}.vac-room-file-container .vac-message-image{position:relative;background-color:var(--chat-message-bg-color-image)!important;background-size:cover!important;background-position:center center!important;background-repeat:no-repeat!important;height:100px;width:100px;border:var(--chat-border-style-input);border-radius:4px}.vac-room-file-container .vac-file-container{height:80px;width:80px}.vac-room-file-container .vac-icon-remove{position:absolute;top:6px;left:6px;z-index:10}.vac-room-file-container .vac-icon-remove svg{height:20px;width:20px;border-radius:50%}.vac-room-file-container .vac-icon-remove:before{content:" ";position:absolute;width:100%;height:100%;background:rgba(0,0,0,.5);border-radius:50%;z-index:-1}.vac-tags-container{display:flex;flex-direction:column;align-items:center;width:100%}.vac-tags-container .vac-tags-box{display:flex;width:100%;height:54px;overflow:hidden;cursor:pointer;background:var(--chat-footer-bg-color-tag);transition:background-color .3s cubic-bezier(.25,.8,.5,1)}.vac-tags-container .vac-tags-box-active{background:var(--chat-footer-bg-color-tag-active)}.vac-tags-container .vac-tags-info{display:flex;overflow:hidden;padding:0 20px;align-items:center}.vac-tags-container .vac-tags-avatar{height:34px;width:34px;min-height:34px;min-width:34px}.vac-tags-container .vac-tags-username{font-size:14px}@media only screen and (max-width: 768px){.vac-tags-container .vac-tags-box{height:50px}.vac-tags-container .vac-tags-info{padding:0 12px}}.vac-template-container{display:flex;flex-direction:column;align-items:center;width:100%}.vac-template-container .vac-template-box{display:flex;width:100%;height:54px;overflow:hidden;cursor:pointer;background:var(--chat-footer-bg-color-tag);transition:background-color .3s cubic-bezier(.25,.8,.5,1)}.vac-template-container .vac-template-active{background:var(--chat-footer-bg-color-tag-active)}.vac-template-container .vac-template-info{display:flex;overflow:hidden;padding:0 20px;align-items:center}.vac-template-container .vac-template-tag{font-size:14px;font-weight:700;margin-right:10px}.vac-template-container .vac-template-text{font-size:14px}@media only screen and (max-width: 768px){.vac-template-container .vac-template-box{height:50px}.vac-template-container .vac-template-info{padding:0 12px}}.vac-rooms-container{display:flex;flex-flow:column;flex:0 0 25%;min-width:260px;max-width:500px;position:relative;background:var(--chat-sidemenu-bg-color);height:100%;border-top-left-radius:var(--chat-container-border-radius);border-bottom-left-radius:var(--chat-container-border-radius)}.vac-rooms-container.vac-rooms-container-full{flex:0 0 100%;max-width:100%}.vac-rooms-container .vac-rooms-empty{font-size:14px;color:#9ca6af;font-style:italic;text-align:center;margin:40px 0;line-height:20px;white-space:pre-line}.vac-rooms-container .vac-room-list{flex:1;position:relative;max-width:100%;padding:0 10px 5px;overflow-y:auto}.vac-rooms-container .vac-room-item{border-radius:8px;align-items:center;display:flex;flex:1 1 100%;margin-bottom:5px;padding:0 14px;position:relative;min-height:71px;transition:background-color .3s cubic-bezier(.25,.8,.5,1)}.vac-rooms-container .vac-room-item:hover{background:var(--chat-sidemenu-bg-color-hover)}.vac-rooms-container .vac-room-item:not(.vac-room-selected){cursor:pointer}.vac-rooms-container .vac-room-selected{color:var(--chat-sidemenu-color-active)!important;background:var(--chat-sidemenu-bg-color-active)!important}.vac-rooms-container .vac-room-selected:hover{background:var(--chat-sidemenu-bg-color-active)!important}@media only screen and (max-width: 768px){.vac-rooms-container .vac-room-list{padding:0 7px 5px}.vac-rooms-container .vac-room-item{min-height:60px;padding:0 8px}}.vac-room-container{display:flex;flex:1;align-items:center;width:100%}.vac-room-container .vac-name-container{flex:1}.vac-room-container .vac-title-container{display:flex;align-items:center;line-height:25px}.vac-room-container .vac-state-circle{width:9px;height:9px;border-radius:50%;background-color:var(--chat-room-color-offline);margin-right:6px;transition:.3s}.vac-room-container .vac-state-online{background-color:var(--chat-room-color-online)}.vac-room-container .vac-room-name{flex:1;color:var(--chat-room-color-username);font-weight:500}.vac-room-container .vac-text-date{margin-left:5px;font-size:11px;color:var(--chat-room-color-timestamp)}.vac-room-container .vac-text-last{display:flex;align-items:center;font-size:12px;line-height:19px;color:var(--chat-room-color-message)}.vac-room-container .vac-message-new{color:var(--chat-room-color-username);font-weight:500}.vac-room-container .vac-icon-check{display:flex;vertical-align:middle;height:14px;width:14px;margin-top:-2px;margin-right:2px}.vac-room-container .vac-icon-microphone{height:15px;width:15px;vertical-align:middle;margin:-3px 1px 0 -2px;fill:var(--chat-room-color-message)}.vac-room-container .vac-room-options-container{display:flex;margin-left:auto}.vac-room-container .vac-room-badge{background-color:var(--chat-room-bg-color-badge);color:var(--chat-room-color-badge);margin-left:5px}.vac-room-container .vac-list-room-options{height:19px;width:19px;align-items:center;margin-left:5px}.vac-box-empty{margin-top:10px}@media only screen and (max-width: 768px){.vac-box-empty{margin-top:7px}}.vac-box-search{position:sticky;display:flex;align-items:center;height:64px;padding:0 15px}.vac-box-search .vac-icon-search{display:flex;position:absolute;left:30px}.vac-box-search .vac-icon-search svg{width:18px;height:18px}.vac-box-search .vac-input{height:38px;width:100%;background:var(--chat-bg-color-input);color:var(--chat-color);font-size:15px;outline:0;caret-color:var(--chat-color-caret);padding:10px 10px 10px 40px;border:1px solid var(--chat-sidemenu-border-color-search);border-radius:20px}.vac-box-search .vac-input::placeholder{color:var(--chat-color-placeholder)}.vac-box-search .vac-add-icon{margin-left:auto;padding-left:10px}@media only screen and (max-width: 768px){.vac-box-search{height:58px}}.vac-message-wrapper .vac-card-info{border-radius:4px;text-align:center;margin:10px auto;font-size:12px;padding:4px;display:block;overflow-wrap:break-word;position:relative;white-space:normal;box-shadow:0 1px 1px -1px #0000001a,0 1px 1px -1px #0000001c,0 1px 2px -1px #0000001c}.vac-message-wrapper .vac-card-date{max-width:150px;font-weight:500;text-transform:uppercase;color:var(--chat-message-color-date);background-color:var(--chat-message-bg-color-date)}.vac-message-wrapper .vac-card-system{max-width:250px;padding:8px 4px;color:var(--chat-message-color-system);background-color:var(--chat-message-bg-color-system)}.vac-message-wrapper .vac-line-new{color:var(--chat-message-color-new-messages);position:relative;text-align:center;font-size:13px;padding:10px 0}.vac-message-wrapper .vac-line-new:after,.vac-message-wrapper .vac-line-new:before{border-top:1px solid var(--chat-message-color-new-messages);content:"";left:0;position:absolute;top:50%;width:calc(50% - 60px)}.vac-message-wrapper .vac-line-new:before{left:auto;right:0}.vac-message-wrapper .vac-message-box{display:flex;flex:0 0 50%;max-width:50%;justify-content:flex-start;line-height:1.4}.vac-message-wrapper .vac-avatar{height:28px;width:28px;min-height:28px;min-width:28px;margin:0 0 2px;align-self:flex-end}.vac-message-wrapper .vac-avatar-current-offset{margin-right:28px}.vac-message-wrapper .vac-avatar-offset{margin-left:28px}.vac-message-wrapper .vac-failure-container{position:relative;align-self:flex-end;height:20px;width:20px;margin:0 0 2px -4px;border-radius:50%;background-color:#f44336}.vac-message-wrapper .vac-failure-container.vac-failure-container-avatar{margin-right:6px}.vac-message-wrapper .vac-failure-container .vac-failure-text{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:#fff;font-size:15px;font-weight:700}.vac-message-wrapper .vac-message-container{position:relative;padding:2px 10px;align-items:end;min-width:100px;box-sizing:content-box}.vac-message-wrapper .vac-message-container-offset{margin-top:10px}.vac-message-wrapper .vac-offset-current{margin-left:50%;justify-content:flex-end}.vac-message-wrapper .vac-message-card{background-color:var(--chat-message-bg-color);color:var(--chat-message-color);border-radius:8px;font-size:14px;padding:6px 9px 3px;white-space:pre-line;max-width:100%;-webkit-transition-property:box-shadow,opacity;transition-property:box-shadow,opacity;transition:box-shadow .28s cubic-bezier(.4,0,.2,1);will-change:box-shadow;box-shadow:0 1px 1px -1px #0000001a,0 1px 1px -1px #0000001c,0 1px 2px -1px #0000001c}.vac-message-wrapper .vac-message-highlight{box-shadow:0 1px 2px -1px #0000001a,0 1px 2px -1px #0000001c,0 1px 5px -1px #0000001c}.vac-message-wrapper .vac-message-current{background-color:var(--chat-message-bg-color-me)!important}.vac-message-wrapper .vac-message-deleted{color:var(--chat-message-color-deleted)!important;font-size:13px!important;font-style:italic!important;background-color:var(--chat-message-bg-color-deleted)!important}.vac-message-wrapper .vac-message-selected{background-color:var(--chat-message-bg-color-selected)!important;transition:background-color .2s}.vac-message-wrapper .vac-message-image{position:relative;background-color:var(--chat-message-bg-color-image)!important;background-size:cover!important;background-position:center center!important;background-repeat:no-repeat!important;height:250px;width:250px;max-width:100%;border-radius:4px;margin:4px auto 5px;transition:.4s filter linear}.vac-message-wrapper .vac-text-username{font-size:13px;color:var(--chat-message-color-username);margin-bottom:2px}.vac-message-wrapper .vac-username-reply{margin-bottom:5px}.vac-message-wrapper .vac-text-timestamp{font-size:10px;color:var(--chat-message-color-timestamp);text-align:right}.vac-message-wrapper .vac-progress-time{float:left;margin:-2px 0 0 40px;color:var(--chat-color);font-size:12px}.vac-message-wrapper .vac-icon-edited{-webkit-box-align:center;align-items:center;display:-webkit-inline-box;display:inline-flex;justify-content:center;letter-spacing:normal;line-height:1;text-indent:0;vertical-align:middle;margin:0 4px 2px}.vac-message-wrapper .vac-icon-edited svg{height:12px;width:12px}.vac-message-wrapper .vac-icon-check{height:14px;width:14px;vertical-align:middle;margin:-3px -3px 0 3px}@media only screen and (max-width: 768px){.vac-message-wrapper .vac-message-container{padding:2px 3px 1px}.vac-message-wrapper .vac-message-container-offset{margin-top:10px}.vac-message-wrapper .vac-message-box{flex:0 0 80%;max-width:80%}.vac-message-wrapper .vac-avatar{height:25px;width:25px;min-height:25px;min-width:25px;margin:0 6px 1px 0}.vac-message-wrapper .vac-avatar.vac-avatar-current{margin:0 0 1px 6px}.vac-message-wrapper .vac-avatar-current-offset{margin-right:31px}.vac-message-wrapper .vac-avatar-offset{margin-left:31px}.vac-message-wrapper .vac-failure-container{margin-left:2px}.vac-message-wrapper .vac-failure-container.vac-failure-container-avatar{margin-right:0}.vac-message-wrapper .vac-offset-current{margin-left:20%}.vac-message-wrapper .vac-progress-time{margin-left:37px}}.vac-audio-player{display:flex;margin:8px 0 5px}.vac-audio-player .vac-svg-button{max-width:18px;margin-left:7px}@media only screen and (max-width: 768px){.vac-audio-player{margin:4px 0 0}.vac-audio-player .vac-svg-button{max-width:16px;margin-left:5px}}.vac-player-bar{display:flex;align-items:center;max-width:calc(100% - 18px);margin-right:7px;margin-left:20px}.vac-player-bar .vac-player-progress{width:190px}.vac-player-bar .vac-player-progress .vac-line-container{position:relative;height:4px;border-radius:5px;background-color:var(--chat-message-bg-color-audio-line)}.vac-player-bar .vac-player-progress .vac-line-container .vac-line-progress{position:absolute;height:inherit;background-color:var(--chat-message-bg-color-audio-progress);border-radius:inherit}.vac-player-bar .vac-player-progress .vac-line-container .vac-line-dot{position:absolute;top:-5px;margin-left:-7px;height:14px;width:14px;border-radius:50%;background-color:var(--chat-message-bg-color-audio-progress-selector);transition:transform .25s}.vac-player-bar .vac-player-progress .vac-line-container .vac-line-dot__active{transform:scale(1.2)}@media only screen and (max-width: 768px){.vac-player-bar{margin-right:5px}.vac-player-bar .vac-player-progress .vac-line-container{height:3px}.vac-player-bar .vac-player-progress .vac-line-container .vac-line-dot{height:12px;width:12px;top:-5px;margin-left:-5px}}.vac-message-actions-wrapper .vac-options-container{position:absolute;top:2px;right:10px;height:40px;width:70px;overflow:hidden;border-top-right-radius:8px}.vac-message-actions-wrapper .vac-blur-container{position:absolute;height:100%;width:100%;left:8px;bottom:10px;background:var(--chat-message-bg-color);filter:blur(3px);border-bottom-left-radius:8px}.vac-message-actions-wrapper .vac-options-me{background:var(--chat-message-bg-color-me)}.vac-message-actions-wrapper .vac-message-options{background:var(--chat-icon-bg-dropdown-message);border-radius:50%;position:absolute;top:7px;right:7px}.vac-message-actions-wrapper .vac-message-options svg{height:17px;width:17px;padding:5px;margin:-5px}.vac-message-actions-wrapper .vac-message-emojis{position:absolute;top:6px;right:30px}.vac-message-actions-wrapper .vac-menu-options{right:15px}.vac-message-actions-wrapper .vac-menu-left{right:-118px}@media only screen and (max-width: 768px){.vac-message-actions-wrapper .vac-options-container{right:3px}.vac-message-actions-wrapper .vac-menu-left{right:-50px}}.vac-message-files-container .vac-file-wrapper{position:relative;width:fit-content}.vac-message-files-container .vac-file-wrapper .vac-file-container{height:60px;width:60px;margin:3px 0 5px;cursor:pointer;transition:all .6s}.vac-message-files-container .vac-file-wrapper .vac-file-container:hover{opacity:.85}.vac-message-files-container .vac-file-wrapper .vac-file-container svg{height:30px;width:30px}.vac-message-files-container .vac-file-wrapper .vac-file-container.vac-file-container-progress{background-color:#0000004d}.vac-message-file-container{position:relative;z-index:0}.vac-message-file-container .vac-message-image-container{cursor:pointer}.vac-message-file-container .vac-image-buttons{position:absolute;width:100%;height:100%;border-radius:4px;background:linear-gradient(to bottom,rgba(0,0,0,0) 55%,rgba(0,0,0,.02) 60%,rgba(0,0,0,.05) 65%,rgba(0,0,0,.1) 70%,rgba(0,0,0,.2) 75%,rgba(0,0,0,.3) 80%,rgba(0,0,0,.5) 85%,rgba(0,0,0,.6) 90%,rgba(0,0,0,.7) 95%,rgba(0,0,0,.8) 100%)}.vac-message-file-container .vac-image-buttons svg{height:26px;width:26px}.vac-message-file-container .vac-image-buttons .vac-button-view,.vac-message-file-container .vac-image-buttons .vac-button-download{position:absolute;bottom:6px;left:7px}.vac-message-file-container .vac-image-buttons :first-child{left:40px}.vac-message-file-container .vac-image-buttons .vac-button-view{max-width:18px;bottom:8px}.vac-message-file-container .vac-video-container{width:350px;max-width:100%;margin:4px auto 5px;cursor:pointer}.vac-message-file-container .vac-video-container video{width:100%;height:100%;border-radius:4px}.vac-button-reaction{display:inline-flex;align-items:center;border:var(--chat-message-border-style-reaction);outline:none;background:var(--chat-message-bg-color-reaction);border-radius:4px;margin:4px 2px 0;transition:.3s;padding:0 5px;font-size:18px;line-height:23px}.vac-button-reaction span{font-size:11px;font-weight:500;min-width:7px;color:var(--chat-message-color-reaction-counter)}.vac-button-reaction:hover{border:var(--chat-message-border-style-reaction-hover);background:var(--chat-message-bg-color-reaction-hover);cursor:pointer}.vac-button-reaction.vac-reaction-me{border:var(--chat-message-border-style-reaction-me);background:var(--chat-message-bg-color-reaction-me)}.vac-button-reaction.vac-reaction-me span{color:var(--chat-message-color-reaction-counter-me)}.vac-button-reaction.vac-reaction-me:hover{border:var(--chat-message-border-style-reaction-hover-me);background:var(--chat-message-bg-color-reaction-hover-me)}.vac-reply-message{background:var(--chat-message-bg-color-reply);border-radius:4px;margin:-1px -5px 8px;padding:8px 10px}.vac-reply-message .vac-reply-username{color:var(--chat-message-color-reply-username);font-size:12px;line-height:15px;margin-bottom:2px}.vac-reply-message .vac-image-reply-container{width:70px}.vac-reply-message .vac-image-reply-container .vac-message-image-reply{height:70px;width:70px;margin:4px auto 3px}.vac-reply-message .vac-video-reply-container{width:200px;max-width:100%}.vac-reply-message .vac-video-reply-container video{width:100%;height:100%;border-radius:4px}.vac-reply-message .vac-reply-content{font-size:12px;color:var(--chat-message-color-reply-content)}.vac-reply-message .vac-file-container{height:60px;width:60px}.vac-emoji-wrapper{position:relative;display:flex}.vac-emoji-wrapper .vac-emoji-reaction svg{height:19px;width:19px}.vac-emoji-wrapper .vac-emoji-picker{position:absolute;z-index:9999;bottom:32px;right:10px;width:300px;padding-top:4px;overflow:scroll;box-sizing:border-box;border-radius:.5rem;background:var(--chat-emoji-bg-color);box-shadow:0 1px 2px -2px #0000001a,0 1px 2px -1px #0000001a,0 1px 2px 1px #0000001a;scrollbar-width:none}.vac-emoji-wrapper .vac-emoji-picker::-webkit-scrollbar{display:none}.vac-emoji-wrapper .vac-emoji-picker.vac-picker-reaction{position:fixed;top:initial;right:initial}.vac-emoji-wrapper .vac-emoji-picker emoji-picker{height:100%;width:100%;--emoji-size: 1.2rem;--background: var(--chat-emoji-bg-color);--emoji-padding: .4rem;--border-color: var(--chat-sidemenu-border-color-search);--button-hover-background: var(--chat-sidemenu-bg-color-hover);--button-active-background: var(--chat-sidemenu-bg-color-hover)}.vac-format-message-wrapper .vac-format-container{display:inline}.vac-format-message-wrapper .vac-icon-deleted{height:14px;width:14px;vertical-align:middle;margin:-2px 2px 0 0;fill:var(--chat-message-color-deleted)}.vac-format-message-wrapper .vac-icon-deleted.vac-icon-deleted-room{margin:-3px 1px 0 0;fill:var(--chat-room-color-message)}.vac-format-message-wrapper .vac-image-link-container{background-color:var(--chat-message-bg-color-media);padding:8px;margin:2px auto;border-radius:4px}.vac-format-message-wrapper .vac-image-link{position:relative;background-color:var(--chat-message-bg-color-image)!important;background-size:contain;background-position:center center!important;background-repeat:no-repeat!important;height:150px;width:150px;max-width:100%;border-radius:4px;margin:0 auto}.vac-format-message-wrapper .vac-image-link-message{max-width:166px;font-size:12px}.vac-loader-wrapper.vac-container-center{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);z-index:9}.vac-loader-wrapper.vac-container-top{padding:21px}.vac-loader-wrapper.vac-container-top #vac-circle{height:20px;width:20px}.vac-loader-wrapper #vac-circle{margin:auto;height:28px;width:28px;border:3px rgba(0,0,0,.25) solid;border-top:3px var(--chat-color-spinner) solid;border-right:3px var(--chat-color-spinner) solid;border-bottom:3px var(--chat-color-spinner) solid;border-radius:50%;-webkit-animation:vac-spin 1s infinite linear;animation:vac-spin 1s infinite linear}@media only screen and (max-width: 768px){.vac-loader-wrapper #vac-circle{height:24px;width:24px}.vac-loader-wrapper.vac-container-top{padding:18px}.vac-loader-wrapper.vac-container-top #vac-circle{height:16px;width:16px}}@-webkit-keyframes vac-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0)}to{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}@keyframes vac-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0)}to{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}#vac-icon-search{fill:var(--chat-icon-color-search)}#vac-icon-add{fill:var(--chat-icon-color-add)}#vac-icon-toggle{fill:var(--chat-icon-color-toggle)}#vac-icon-menu{fill:var(--chat-icon-color-menu)}#vac-icon-close{fill:var(--chat-icon-color-close)}#vac-icon-close-image{fill:var(--chat-icon-color-close-image)}#vac-icon-file{fill:var(--chat-icon-color-file)}#vac-icon-paperclip{fill:var(--chat-icon-color-paperclip)}#vac-icon-close-outline{fill:var(--chat-icon-color-close-outline)}#vac-icon-close-outline-preview{fill:var(--chat-icon-color-close-preview)}#vac-icon-send{fill:var(--chat-icon-color-send)}#vac-icon-send-disabled{fill:var(--chat-icon-color-send-disabled)}#vac-icon-emoji{fill:var(--chat-icon-color-emoji)}#vac-icon-emoji-reaction{fill:var(--chat-icon-color-emoji-reaction)}#vac-icon-document{fill:var(--chat-icon-color-document)}#vac-icon-pencil{fill:var(--chat-icon-color-pencil)}#vac-icon-checkmark,#vac-icon-double-checkmark{fill:var(--chat-icon-color-checkmark)}#vac-icon-checkmark-seen,#vac-icon-double-checkmark-seen{fill:var(--chat-icon-color-checkmark-seen)}#vac-icon-eye{fill:var(--chat-icon-color-eye)}#vac-icon-dropdown-message{fill:var(--chat-icon-color-dropdown-message)}#vac-icon-dropdown-room{fill:var(--chat-icon-color-dropdown-room)}#vac-icon-dropdown-scroll{fill:var(--chat-icon-color-dropdown-scroll)}#vac-icon-audio-play{fill:var(--chat-icon-color-audio-play)}#vac-icon-audio-pause{fill:var(--chat-icon-color-audio-pause)}.vac-progress-wrapper{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);z-index:9}.vac-progress-wrapper circle{transition:stroke-dashoffset .35s;transform:rotate(-90deg);transform-origin:50% 50%}.vac-progress-wrapper .vac-progress-content{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);z-index:-1;margin-top:-2px;background-color:#000000b3;border-radius:50%}.vac-progress-wrapper .vac-progress-content .vac-progress-text{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);font-weight:700;color:#fff}.vac-progress-wrapper .vac-progress-content .vac-progress-text .vac-progress-pourcent{font-size:9px;font-weight:400}
`;const WHe={name:"ChatContainer",components:{RoomsList:JFe,Room:MHe,MediaPreview:DHe},props:{height:{type:String,default:"600px"},theme:{type:String,default:"light"},styles:{type:[Object,String],default:()=>({})},responsiveBreakpoint:{type:Number,default:900},singleRoom:{type:[Boolean,String],default:!1},roomsListOpened:{type:[Boolean,String],default:!0},textMessages:{type:[Object,String],default:()=>({})},currentUserId:{type:String,default:""},rooms:{type:[Array,String],default:()=>[]},roomsOrder:{type:String,default:"desc"},loadingRooms:{type:[Boolean,String],default:!1},roomsLoaded:{type:[Boolean,String],default:!1},roomId:{type:String,default:null},loadFirstRoom:{type:[Boolean,String],default:!0},messages:{type:[Array,String],default:()=>[]},messagesLoaded:{type:[Boolean,String],default:!1},roomActions:{type:[Array,String],default:()=>[]},menuActions:{type:[Array,String],default:()=>[]},messageActions:{type:[Array,String],default:()=>[{name:"replyMessage",title:"Reply"},{name:"editMessage",title:"Edit Message",onlyMe:!0},{name:"deleteMessage",title:"Delete Message",onlyMe:!0},{name:"selectMessages",title:"Select"}]},messageSelectionActions:{type:[Array,String],default:()=>[]},autoScroll:{type:[Object,String],default:()=>({send:{new:!0,newAfterScrollUp:!0},receive:{new:!0,newAfterScrollUp:!1}})},customSearchRoomEnabled:{type:[Boolean,String],default:!1},showSearch:{type:[Boolean,String],default:!0},showAddRoom:{type:[Boolean,String],default:!0},showSendIcon:{type:[Boolean,String],default:!0},showFiles:{type:[Boolean,String],default:!0},showAudio:{type:[Boolean,String],default:!0},audioBitRate:{type:Number,default:128},audioSampleRate:{type:Number,default:new(window.AudioContext||window.webkitAudioContext)().sampleRate},showEmojis:{type:[Boolean,String],default:!0},showReactionEmojis:{type:[Boolean,String],default:!0},showNewMessagesDivider:{type:[Boolean,String],default:!0},showFooter:{type:[Boolean,String],default:!0},textFormatting:{type:[Object,String],default:()=>({disabled:!1})},linkOptions:{type:[Object,String],default:()=>({disabled:!1,target:"_blank",rel:null})},roomInfoEnabled:{type:[Boolean,String],default:!1},textareaActionEnabled:{type:[Boolean,String],default:!1},textareaAutoFocus:{type:[Boolean,String],default:!0},userTagsEnabled:{type:[Boolean,String],default:!0},emojisSuggestionEnabled:{type:[Boolean,String],default:!0},roomMessage:{type:String,default:""},scrollDistance:{type:Number,default:60},acceptedFiles:{type:String,default:"*"},captureFiles:{type:String,default:""},multipleFiles:{type:[Boolean,String],default:!0},templatesText:{type:[Array,String],default:()=>[]},mediaPreviewEnabled:{type:[Boolean,String],default:!0},usernameOptions:{type:[Object,String],default:()=>({minUsers:3,currentUser:!1})},emojiDataSource:{type:String,default:void 0}},emits:["toggle-rooms-list","room-info","fetch-messages","send-message","edit-message","delete-message","open-file","open-user-tag","open-failed-message","menu-action-handler","message-action-handler","send-message-reaction","typing-message","textarea-action-handler","fetch-more-rooms","add-room","search-room","room-action-handler","message-selection-action-handler"],data(){return{slots:[],room:{},loadingMoreRooms:!1,showRoomsList:!0,isMobile:!1,showMediaPreview:!1,previewFile:{}}},computed:{t(){return{...$He,...this.textMessagesCasted}},cssVars(){const t=zHe[this.theme],n={};return Object.keys(t).map(e=>{n[e]={...t[e],...this.stylesCasted[e]||{}}}),HHe(n)},orderedRooms(){return this.roomsCasted.slice().sort((t,n)=>{const e=t.index||0,i=n.index||0;return this.roomsOrder==="asc"?e<i?-1:i<e?1:0:e>i?-1:i>e?1:0})},singleRoomCasted(){return this.castBoolean(this.singleRoom)},roomsListOpenedCasted(){return this.castBoolean(this.roomsListOpened)},loadingRoomsCasted(){return this.castBoolean(this.loadingRooms)},roomsLoadedCasted(){return this.castBoolean(this.roomsLoaded)},loadFirstRoomCasted(){return this.castBoolean(this.loadFirstRoom)},messagesLoadedCasted(){return this.castBoolean(this.messagesLoaded)},multipleFilesCasted(){return this.castBoolean(this.multipleFiles)},showSearchCasted(){return this.castBoolean(this.showSearch)},showAddRoomCasted(){return this.castBoolean(this.showAddRoom)},showSendIconCasted(){return this.castBoolean(this.showSendIcon)},showFilesCasted(){return this.castBoolean(this.showFiles)},showAudioCasted(){return this.castBoolean(this.showAudio)},showEmojisCasted(){return this.castBoolean(this.showEmojis)},showReactionEmojisCasted(){return this.castBoolean(this.showReactionEmojis)},showNewMessagesDividerCasted(){return this.castBoolean(this.showNewMessagesDivider)},showFooterCasted(){return this.castBoolean(this.showFooter)},roomInfoEnabledCasted(){return this.castBoolean(this.roomInfoEnabled)},textareaActionEnabledCasted(){return this.castBoolean(this.textareaActionEnabled)},textareaAutoFocusCasted(){return this.castBoolean(this.textareaAutoFocus)},userTagsEnabledCasted(){return this.castBoolean(this.userTagsEnabled)},emojisSuggestionEnabledCasted(){return this.castBoolean(this.emojisSuggestionEnabled)},mediaPreviewEnabledCasted(){return this.castBoolean(this.mediaPreviewEnabled)},roomsCasted(){return this.castArray(this.rooms)},messagesCasted(){return this.castArray(this.messages)},roomActionsCasted(){return this.castArray(this.roomActions)},menuActionsCasted(){return this.castArray(this.menuActions)},messageActionsCasted(){return this.castArray(this.messageActions)},messageSelectionActionsCasted(){return this.castArray(this.messageSelectionActions)},templatesTextCasted(){return this.castArray(this.templatesText)},stylesCasted(){return this.castObject(this.styles)},textMessagesCasted(){return this.castObject(this.textMessages)},autoScrollCasted(){return this.castObject(this.autoScroll)},textFormattingCasted(){return this.castObject(this.textFormatting)},linkOptionsCasted(){return this.castObject(this.linkOptions)},usernameOptionsCasted(){return this.castObject(this.usernameOptions)}},watch:{roomsCasted:{immediate:!0,deep:!0,handler(t,n){if((!t[0]||!t.find(e=>e.roomId===this.room.roomId))&&(this.showRoomsList=!0),!this.loadingMoreRooms&&this.loadFirstRoomCasted&&t[0]&&(!n||t.length!==n.length))if(this.roomId){const e=t.find(i=>i.roomId===this.roomId)||{};this.fetchRoom({room:e})}else!this.isMobile||this.singleRoomCasted?this.fetchRoom({room:this.orderedRooms[0]}):this.showRoomsList=!0}},loadingRoomsCasted(t){t&&(this.room={})},roomId:{immediate:!0,handler(t,n){if(t&&!this.loadingRoomsCasted&&this.roomsCasted.length){const e=this.roomsCasted.find(i=>i.roomId===t);this.fetchRoom({room:e})}else n&&!t&&(this.room={})}},room(t){!t||Object.entries(t).length===0||(sHe(t),t.users.forEach(n=>{rHe(n)}))},roomsListOpenedCasted:{immediate:!0,handler(t){this.showRoomsList=t}}},created(){this.updateResponsive(),window.addEventListener("resize",t=>{t.isTrusted&&this.updateResponsive()})},updated(){const t=document.querySelectorAll("[slot]");this.slots.length!==t.length&&(this.slots=t)},methods:{castBoolean(t){return t==="true"||t===!0},castArray(t){return t?Array.isArray(t)?t:JSON.parse(t):[]},castObject(t){return t?typeof t=="object"?t:JSON.parse(t):{}},updateResponsive(){this.isMobile=window.innerWidth<Number(this.responsiveBreakpoint)},toggleRoomsList(){this.showRoomsList=!this.showRoomsList,this.isMobile&&(this.room={}),this.$emit("toggle-rooms-list",{opened:this.showRoomsList})},fetchRoom({room:t}){this.room=t,this.fetchMessages({reset:!0}),this.isMobile&&(this.showRoomsList=!1)},fetchMoreRooms(){this.$emit("fetch-more-rooms")},roomInfo(){this.$emit("room-info",this.room)},addRoom(){this.$emit("add-room")},searchRoom(t){this.$emit("search-room",{value:t,roomId:this.room.roomId})},fetchMessages(t){this.$emit("fetch-messages",{room:this.room,options:t})},sendMessage(t){this.$emit("send-message",{...t,roomId:this.room.roomId})},editMessage(t){this.$emit("edit-message",{...t,roomId:this.room.roomId})},deleteMessage(t){this.$emit("delete-message",{message:t,roomId:this.room.roomId})},openFile({message:t,file:n}){this.mediaPreviewEnabledCasted&&n.action==="preview"?(this.previewFile=n.file,this.showMediaPreview=!0):this.$emit("open-file",{message:t,file:n})},openUserTag({user:t}){this.$emit("open-user-tag",{user:t})},openFailedMessage({message:t}){this.$emit("open-failed-message",{message:t,roomId:this.room.roomId})},menuActionHandler(t){this.$emit("menu-action-handler",{action:t,roomId:this.room.roomId})},roomActionHandler({action:t,roomId:n}){this.$emit("room-action-handler",{action:t,roomId:n})},messageActionHandler(t){this.$emit("message-action-handler",{...t,roomId:this.room.roomId})},messageSelectionActionHandler(t){this.$emit("message-selection-action-handler",{...t,roomId:this.room.roomId})},sendMessageReaction(t){this.$emit("send-message-reaction",{...t,roomId:this.room.roomId})},typingMessage(t){this.$emit("typing-message",{message:t,roomId:this.room.roomId})},textareaActionHandler(t){this.$emit("textarea-action-handler",{message:t,roomId:this.room.roomId})}}},jHe={class:"vac-chat-container"};function qHe(t,n,e,i,s,r){const o=tn("rooms-list"),a=tn("room"),l=tn("media-preview");return Ve(),Qe("div",{class:"vac-card-window",style:Wi([{height:e.height},r.cssVars])},[gt("div",jHe,[r.singleRoomCasted?Tt("",!0):(Ve(),mi(o,{key:0,"current-user-id":e.currentUserId,rooms:r.orderedRooms,"loading-rooms":r.loadingRoomsCasted,"rooms-loaded":r.roomsLoadedCasted,room:s.room,"room-actions":r.roomActionsCasted,"custom-search-room-enabled":e.customSearchRoomEnabled,"text-messages":r.t,"show-search":r.showSearchCasted,"show-add-room":r.showAddRoomCasted,"show-rooms-list":s.showRoomsList&&r.roomsListOpenedCasted,"text-formatting":r.textFormattingCasted,"link-options":r.linkOptionsCasted,"is-mobile":s.isMobile,"scroll-distance":e.scrollDistance,onFetchRoom:r.fetchRoom,onFetchMoreRooms:r.fetchMoreRooms,onLoadingMoreRooms:n[0]||(n[0]=c=>s.loadingMoreRooms=c),onAddRoom:r.addRoom,onSearchRoom:r.searchRoom,onRoomActionHandler:r.roomActionHandler},ki({_:2},[Tn(s.slots,c=>({name:c.slot,fn:rn(u=>[xt(t.$slots,c.slot,Ci(vi(u)))])}))]),1032,["current-user-id","rooms","loading-rooms","rooms-loaded","room","room-actions","custom-search-room-enabled","text-messages","show-search","show-add-room","show-rooms-list","text-formatting","link-options","is-mobile","scroll-distance","onFetchRoom","onFetchMoreRooms","onAddRoom","onSearchRoom","onRoomActionHandler"])),It(a,{"current-user-id":e.currentUserId,rooms:r.roomsCasted,"room-id":s.room.roomId||"","load-first-room":r.loadFirstRoomCasted,messages:r.messagesCasted,"room-message":e.roomMessage,"messages-loaded":r.messagesLoadedCasted,"menu-actions":r.menuActionsCasted,"message-actions":r.messageActionsCasted,"message-selection-actions":r.messageSelectionActionsCasted,"auto-scroll":r.autoScrollCasted,"show-send-icon":r.showSendIconCasted,"show-files":r.showFilesCasted,"show-audio":r.showAudioCasted,"audio-bit-rate":e.audioBitRate,"audio-sample-rate":e.audioSampleRate,"show-emojis":r.showEmojisCasted,"show-reaction-emojis":r.showReactionEmojisCasted,"show-new-messages-divider":r.showNewMessagesDividerCasted,"show-footer":r.showFooterCasted,"text-messages":r.t,"single-room":r.singleRoomCasted,"show-rooms-list":s.showRoomsList&&r.roomsListOpenedCasted,"text-formatting":r.textFormattingCasted,"link-options":r.linkOptionsCasted,"is-mobile":s.isMobile,"loading-rooms":r.loadingRoomsCasted,"room-info-enabled":r.roomInfoEnabledCasted,"textarea-action-enabled":r.textareaActionEnabledCasted,"textarea-auto-focus":r.textareaAutoFocusCasted,"user-tags-enabled":r.userTagsEnabledCasted,"emojis-suggestion-enabled":r.emojisSuggestionEnabledCasted,"scroll-distance":e.scrollDistance,"accepted-files":e.acceptedFiles,"capture-files":e.captureFiles,"multiple-files":r.multipleFilesCasted,"templates-text":r.templatesTextCasted,"username-options":r.usernameOptionsCasted,"emoji-data-source":e.emojiDataSource,onToggleRoomsList:r.toggleRoomsList,onRoomInfo:r.roomInfo,onFetchMessages:r.fetchMessages,onSendMessage:r.sendMessage,onEditMessage:r.editMessage,onDeleteMessage:r.deleteMessage,onOpenFile:r.openFile,onOpenUserTag:r.openUserTag,onOpenFailedMessage:r.openFailedMessage,onMenuActionHandler:r.menuActionHandler,onMessageActionHandler:r.messageActionHandler,onMessageSelectionActionHandler:r.messageSelectionActionHandler,onSendMessageReaction:r.sendMessageReaction,onTypingMessage:r.typingMessage,onTextareaActionHandler:r.textareaActionHandler},ki({_:2},[Tn(s.slots,c=>({name:c.slot,fn:rn(u=>[xt(t.$slots,c.slot,Ci(vi(u)))])}))]),1032,["current-user-id","rooms","room-id","load-first-room","messages","room-message","messages-loaded","menu-actions","message-actions","message-selection-actions","auto-scroll","show-send-icon","show-files","show-audio","audio-bit-rate","audio-sample-rate","show-emojis","show-reaction-emojis","show-new-messages-divider","show-footer","text-messages","single-room","show-rooms-list","text-formatting","link-options","is-mobile","loading-rooms","room-info-enabled","textarea-action-enabled","textarea-auto-focus","user-tags-enabled","emojis-suggestion-enabled","scroll-distance","accepted-files","capture-files","multiple-files","templates-text","username-options","emoji-data-source","onToggleRoomsList","onRoomInfo","onFetchMessages","onSendMessage","onEditMessage","onDeleteMessage","onOpenFile","onOpenUserTag","onOpenFailedMessage","onMenuActionHandler","onMessageActionHandler","onMessageSelectionActionHandler","onSendMessageReaction","onTypingMessage","onTextareaActionHandler"])]),It(vs,{name:"vac-fade-preview",appear:""},{default:rn(()=>[s.showMediaPreview?(Ve(),mi(l,{key:0,file:s.previewFile,onCloseMediaPreview:n[1]||(n[1]=c=>s.showMediaPreview=!1)},ki({_:2},[Tn(s.slots,c=>({name:c.slot,fn:rn(u=>[xt(t.$slots,c.slot,Ci(vi(u)))])}))]),1032,["file"])):Tt("",!0)]),_:3})],4)}var KHe=Ni(WHe,[["render",qHe],["styles",[UHe]]]);const GHe=BPe(KHe),QP="vue-advanced-chat";function YHe(){customElements.get(QP)||customElements.define(QP,GHe)}YHe();const ZHe={components:{AddGroupPopup:hH},data(){var e;const t=((e=history.state)==null?void 0:e.delegateid)||"",n=String(t);return{isAddGroupPopupVisible:!1,id:t,strid:n,groups:[],currentUserId:n,rooms:[],messages:[],messagesLoaded:!1,roomActions:[{name:"inviteUser",title:"Invite User"},{name:"deleteGroup",title:"Quit Room"}],socket:null,currentRoomId:null}},mounted(){this.fetchGroupsForDelegate(this.id),this.initializeSocketConnection()},beforeDestroy(){this.socket&&this.socket.disconnect()},methods:{showAddGroupPopup(){this.isAddGroupPopupVisible=!0,console.log("visible")},async fetchGroupsForDelegate(t){try{const n=await hi.get(`http://127.0.0.1:8000/searchgroup/${t}`);this.rooms=n.data.map(e=>{const i=e.lastMessage||null;return{roomId:e.id,roomName:e.name,unreadCount:0,users:e.delegates.map(s=>({_id:s.id,username:s.name})),lastMessage:i,index:i&&i.id?parseInt(i.id,10):0}})}catch(n){console.error("Error fetching rooms:",n)}},fetchMessages(t){const n=t.detail[0].room.roomId;this.currentRoomId=n;const e=t.detail[0].options||{},i=e.reset?1:Math.ceil(this.messages.length/30)+1;hi.get(`http://127.0.0.1:8000/groups/${n}/messages`,{params:{page:i,per_page:30}}).then(s=>{const r=s.data.messages,o=s.data.has_next;e.reset?this.messages=r.reverse():this.messages=[...r.reverse(),...this.messages],this.messagesLoaded=!o;const a=this.rooms.findIndex(l=>l.roomId===n);a!==-1&&this.rooms[a].unreadCount&&(this.rooms[a].unreadCount=0,this.rooms=[...this.rooms])}).catch(s=>console.error("Error fetching messages:",s))},openFile(t){console.log("File opened");const e=t.detail[0].file.file.url;window.open(e,"_blank")},sendMessage(t){const n=t.detail[0],e=new FormData;n.content&&e.append("content",n.content),e.append("roomId",n.roomId),e.append("senderId",this.currentUserId);const i=new Date;e.append("timestamp",i.toTimeString().substring(0,5)),e.append("date",i.toISOString().substring(0,10)),n.files&&n.files.length>0&&n.files.forEach(s=>{const r=s.blob||s,o=s.extension,a=s.name.includes(".")?s.name:`${s.name}.${o}`;e.append("files",r,a)}),hi.post("http://127.0.0.1:8000/messages",e,{headers:{"Content-Type":"multipart/form-data"}}).catch(s=>{console.error("Error sending message:",s)})},initializeSocketConnection(){this.socket=Hf("http://127.0.0.1:8000/chatsocket"),this.socket.on("new_message",t=>{console.log(t);const n={_id:t._id,content:t.text,senderId:t.senderId,timestamp:t.timestamp,date:t.date,username:t.username,files:t.files?t.files.map(i=>({name:i.name,size:i.size,type:i.type,url:i.url,preview:i.preview||null})):[]},e=this.rooms.findIndex(i=>i.roomId===t.group_id);e!==-1?(this.rooms[e].lastMessage=n,this.rooms[e].index=parseInt(t._id,10),t.group_id!==this.currentRoomId?this.rooms[e].unreadCount?this.rooms[e].unreadCount+=1:this.rooms[e].unreadCount=1:this.messages=[...this.messages,n],this.rooms=[...this.rooms]):t.group_id===this.currentRoomId&&(this.messages=[...this.messages,n])}),this.socket.on("connect",()=>{this.joinAllGroups()}),this.socket.emit("join_user_room",{user_id:this.currentUserId}),this.socket.on("added_to_group",t=>{console.log("Added to new group:",t);const n={roomId:t.id,roomName:t.name,users:t.delegates.map(e=>({_id:e.id,username:e.name})),lastMessage:t.messages[0],index:t.messages[0].id};this.rooms.push(n),this.socket.emit("join_room",{roomId:n.roomId}),vl({message:`You have been added to the group: ${t.name}`,type:"success",duration:3e3})})},joinAllGroups(){this.rooms.forEach(t=>{this.socket.emit("join_room",{roomId:t.roomId}),console.log("joined",t.roomId)})}}},XHe=["current-user-id","rooms","messages","messages-loaded","room-actions"];function JHe(t,n,e,i,s,r){const o=hH;return ve(),it(Wn,null,[ot("div",null,[ot("vue-advanced-chat",{height:"calc(100vh - 80px)","show-audio":"false","current-user-id":s.currentUserId,rooms:JSON.stringify(s.rooms),"rooms-loaded":!0,messages:JSON.stringify(s.messages),"messages-loaded":s.messagesLoaded,"room-actions":JSON.stringify(s.roomActions),onSendMessage:n[0]||(n[0]=(...a)=>r.sendMessage&&r.sendMessage(...a)),onAddRoom:n[1]||(n[1]=(...a)=>r.showAddGroupPopup&&r.showAddGroupPopup(...a)),onOpenFile:n[2]||(n[2]=(...a)=>r.openFile&&r.openFile(...a)),onFetchMessages:n[3]||(n[3]=(...a)=>r.fetchMessages&&r.fetchMessages(...a))},null,40,XHe)]),et(o,{isVisible:s.isAddGroupPopupVisible,currentUserId:s.currentUserId,onClose:n[4]||(n[4]=a=>s.isAddGroupPopupVisible=!1)},null,8,["isVisible","currentUserId"])],64)}const QHe=Pc(ZHe,[["render",JHe]]),eUe=[{path:"/",name:"Home",component:g0e},{path:"/debating/:group",name:"Debating",component:j7e},{path:"/resolution/:committee",name:"Resolution",component:Y7e},{path:"/clauses_upload",name:"Clauses",component:y0e},{path:"/clauses_upload/view/:group/:filename",name:"DocumentViewer",component:j0e},{path:"/amendments_upload",name:"AmendmentsUpload",component:JIe},{path:"/chat",name:"ChatComponent",component:QHe},{path:"/chair",name:"ChairView",component:()=>f0e(()=>import("./chair-DQVEfitO.js"),__vite__mapDeps([0,1]),import.meta.url),meta:{requiresAuth:!0}}],tUe=Tge({history:ege(),routes:eUe});gee(u0e).use(tUe).use(hoe).mount("#app");export{Je as $,Et as A,Rn as B,SB as C,vn as D,ur as E,Xn as F,Sh as G,fh as H,Rm as I,Rw as J,ri as K,es as L,Ir as M,wm as N,Dt as O,lUe as P,xs as Q,Al as R,xm as S,kl as T,kr as U,_t as V,et as W,gee as X,nce as Y,Xt as Z,kn as _,Ms as a,ra as a0,Ua as a1,lc as a2,bi as a3,qoe as a4,sc as a5,bn as a6,Ac as a7,z1 as a8,uF as a9,Fu as aA,bL as aB,Zz as aC,hi as aD,dw as aE,eF as aF,$me as aG,bE as aH,vE as aI,tF as aJ,zme as aK,efe as aL,nF as aa,Vhe as ab,yi as ac,kB as ad,yO as ae,Y4 as af,h_ as ag,Aae as ah,Ts as ai,Lae as aj,ns as ak,At as al,Cs as am,$d as an,zB as ao,Nu as ap,r_ as aq,Mn as ar,ic as as,Ut as at,Iu as au,Pc as av,vl as aw,BC as ax,Hf as ay,Wn as az,Ln as b,Tw as c,mc as d,jt as e,se as f,eC as g,gc as h,pn as i,Gu as j,cg as k,pt as l,Zt as m,Jn as n,aUe as o,ve as p,it as q,Se as r,ot as s,H as t,Am as u,oUe as v,Qi as w,is as x,De as y,Ui as z};
